var FV=Object.defineProperty;var m3=t=>{throw TypeError(t)};var OV=(t,s,r)=>s in t?FV(t,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[s]=r;var _e=(t,s,r)=>OV(t,typeof s!="symbol"?s+"":s,r),mb=(t,s,r)=>s.has(t)||m3("Cannot "+r);var Ae=(t,s,r)=>(mb(t,s,"read from private field"),r?r.call(t):s.get(t)),as=(t,s,r)=>s.has(t)?m3("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(t):s.set(t,r),Et=(t,s,r,n)=>(mb(t,s,"write to private field"),n?n.call(t,r):s.set(t,r),r),Es=(t,s,r)=>(mb(t,s,"access private method"),r);var Pv=(t,s,r,n)=>({set _(a){Et(t,s,a,r)},get _(){return Ae(t,s,n)}});function $V(t,s){for(var r=0;r<s.length;r++){const n=s[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in t)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(t,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var Dge=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function h5(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var SM={exports:{}},w1={},CM={exports:{}},$s={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bg=Symbol.for("react.element"),BV=Symbol.for("react.portal"),UV=Symbol.for("react.fragment"),zV=Symbol.for("react.strict_mode"),qV=Symbol.for("react.profiler"),VV=Symbol.for("react.provider"),HV=Symbol.for("react.context"),WV=Symbol.for("react.forward_ref"),KV=Symbol.for("react.suspense"),YV=Symbol.for("react.memo"),GV=Symbol.for("react.lazy"),h3=Symbol.iterator;function QV(t){return t===null||typeof t!="object"?null:(t=h3&&t[h3]||t["@@iterator"],typeof t=="function"?t:null)}var kM={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},AM=Object.assign,PM={};function kf(t,s,r){this.props=t,this.context=s,this.refs=PM,this.updater=r||kM}kf.prototype.isReactComponent={};kf.prototype.setState=function(t,s){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,s,"setState")};kf.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function EM(){}EM.prototype=kf.prototype;function f5(t,s,r){this.props=t,this.context=s,this.refs=PM,this.updater=r||kM}var p5=f5.prototype=new EM;p5.constructor=f5;AM(p5,kf.prototype);p5.isPureReactComponent=!0;var f3=Array.isArray,TM=Object.prototype.hasOwnProperty,x5={current:null},MM={key:!0,ref:!0,__self:!0,__source:!0};function LM(t,s,r){var n,a={},i=null,o=null;if(s!=null)for(n in s.ref!==void 0&&(o=s.ref),s.key!==void 0&&(i=""+s.key),s)TM.call(s,n)&&!MM.hasOwnProperty(n)&&(a[n]=s[n]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)a[n]===void 0&&(a[n]=l[n]);return{$$typeof:bg,type:t,key:i,ref:o,props:a,_owner:x5.current}}function ZV(t,s){return{$$typeof:bg,type:t.type,key:s,ref:t.ref,props:t.props,_owner:t._owner}}function g5(t){return typeof t=="object"&&t!==null&&t.$$typeof===bg}function XV(t){var s={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return s[r]})}var p3=/\/+/g;function hb(t,s){return typeof t=="object"&&t!==null&&t.key!=null?XV(""+t.key):s.toString(36)}function Ny(t,s,r,n,a){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case bg:case BV:o=!0}}if(o)return o=t,a=a(o),t=n===""?"."+hb(o,0):n,f3(a)?(r="",t!=null&&(r=t.replace(p3,"$&/")+"/"),Ny(a,s,r,"",function(d){return d})):a!=null&&(g5(a)&&(a=ZV(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(p3,"$&/")+"/")+t)),s.push(a)),1;if(o=0,n=n===""?".":n+":",f3(t))for(var l=0;l<t.length;l++){i=t[l];var c=n+hb(i,l);o+=Ny(i,s,r,c,a)}else if(c=QV(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=n+hb(i,l++),o+=Ny(i,s,r,c,a);else if(i==="object")throw s=String(t),Error("Objects are not valid as a React child (found: "+(s==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":s)+"). If you meant to render a collection of children, use an array instead.");return o}function Ev(t,s,r){if(t==null)return t;var n=[],a=0;return Ny(t,n,"","",function(i){return s.call(r,i,a++)}),n}function JV(t){if(t._status===-1){var s=t._result;s=s(),s.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=s)}if(t._status===1)return t._result.default;throw t._result}var Oa={current:null},wy={transition:null},eH={ReactCurrentDispatcher:Oa,ReactCurrentBatchConfig:wy,ReactCurrentOwner:x5};function DM(){throw Error("act(...) is not supported in production builds of React.")}$s.Children={map:Ev,forEach:function(t,s,r){Ev(t,function(){s.apply(this,arguments)},r)},count:function(t){var s=0;return Ev(t,function(){s++}),s},toArray:function(t){return Ev(t,function(s){return s})||[]},only:function(t){if(!g5(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};$s.Component=kf;$s.Fragment=UV;$s.Profiler=qV;$s.PureComponent=f5;$s.StrictMode=zV;$s.Suspense=KV;$s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eH;$s.act=DM;$s.cloneElement=function(t,s,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=AM({},t.props),a=t.key,i=t.ref,o=t._owner;if(s!=null){if(s.ref!==void 0&&(i=s.ref,o=x5.current),s.key!==void 0&&(a=""+s.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in s)TM.call(s,c)&&!MM.hasOwnProperty(c)&&(n[c]=s[c]===void 0&&l!==void 0?l[c]:s[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:bg,type:t.type,key:a,ref:i,props:n,_owner:o}};$s.createContext=function(t){return t={$$typeof:HV,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:VV,_context:t},t.Consumer=t};$s.createElement=LM;$s.createFactory=function(t){var s=LM.bind(null,t);return s.type=t,s};$s.createRef=function(){return{current:null}};$s.forwardRef=function(t){return{$$typeof:WV,render:t}};$s.isValidElement=g5;$s.lazy=function(t){return{$$typeof:GV,_payload:{_status:-1,_result:t},_init:JV}};$s.memo=function(t,s){return{$$typeof:YV,type:t,compare:s===void 0?null:s}};$s.startTransition=function(t){var s=wy.transition;wy.transition={};try{t()}finally{wy.transition=s}};$s.unstable_act=DM;$s.useCallback=function(t,s){return Oa.current.useCallback(t,s)};$s.useContext=function(t){return Oa.current.useContext(t)};$s.useDebugValue=function(){};$s.useDeferredValue=function(t){return Oa.current.useDeferredValue(t)};$s.useEffect=function(t,s){return Oa.current.useEffect(t,s)};$s.useId=function(){return Oa.current.useId()};$s.useImperativeHandle=function(t,s,r){return Oa.current.useImperativeHandle(t,s,r)};$s.useInsertionEffect=function(t,s){return Oa.current.useInsertionEffect(t,s)};$s.useLayoutEffect=function(t,s){return Oa.current.useLayoutEffect(t,s)};$s.useMemo=function(t,s){return Oa.current.useMemo(t,s)};$s.useReducer=function(t,s,r){return Oa.current.useReducer(t,s,r)};$s.useRef=function(t){return Oa.current.useRef(t)};$s.useState=function(t){return Oa.current.useState(t)};$s.useSyncExternalStore=function(t,s,r){return Oa.current.useSyncExternalStore(t,s,r)};$s.useTransition=function(){return Oa.current.useTransition()};$s.version="18.3.1";CM.exports=$s;var N=CM.exports;const Nt=h5(N),IM=$V({__proto__:null,default:Nt},[N]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tH=N,sH=Symbol.for("react.element"),rH=Symbol.for("react.fragment"),nH=Object.prototype.hasOwnProperty,aH=tH.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,iH={key:!0,ref:!0,__self:!0,__source:!0};function RM(t,s,r){var n,a={},i=null,o=null;r!==void 0&&(i=""+r),s.key!==void 0&&(i=""+s.key),s.ref!==void 0&&(o=s.ref);for(n in s)nH.call(s,n)&&!iH.hasOwnProperty(n)&&(a[n]=s[n]);if(t&&t.defaultProps)for(n in s=t.defaultProps,s)a[n]===void 0&&(a[n]=s[n]);return{$$typeof:sH,type:t,key:i,ref:o,props:a,_owner:aH.current}}w1.Fragment=rH;w1.jsx=RM;w1.jsxs=RM;SM.exports=w1;var e=SM.exports,FM={exports:{}},Ri={},OM={exports:{}},$M={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function s(K,Q){var ke=K.length;K.push(Q);e:for(;0<ke;){var G=ke-1>>>1,I=K[G];if(0<a(I,Q))K[G]=Q,K[ke]=I,ke=G;else break e}}function r(K){return K.length===0?null:K[0]}function n(K){if(K.length===0)return null;var Q=K[0],ke=K.pop();if(ke!==Q){K[0]=ke;e:for(var G=0,I=K.length,Z=I>>>1;G<Z;){var J=2*(G+1)-1,se=K[J],je=J+1,be=K[je];if(0>a(se,ke))je<I&&0>a(be,se)?(K[G]=be,K[je]=ke,G=je):(K[G]=se,K[J]=ke,G=J);else if(je<I&&0>a(be,ke))K[G]=be,K[je]=ke,G=je;else break e}}return Q}function a(K,Q){var ke=K.sortIndex-Q.sortIndex;return ke!==0?ke:K.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,m=null,f=3,h=!1,p=!1,g=!1,y=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(K){for(var Q=r(d);Q!==null;){if(Q.callback===null)n(d);else if(Q.startTime<=K)n(d),Q.sortIndex=Q.expirationTime,s(c,Q);else break;Q=r(d)}}function _(K){if(g=!1,w(K),!p)if(r(c)!==null)p=!0,ae(P);else{var Q=r(d);Q!==null&&Ne(_,Q.startTime-K)}}function P(K,Q){p=!1,g&&(g=!1,v(T),T=-1),h=!0;var ke=f;try{for(w(Q),m=r(c);m!==null&&(!(m.expirationTime>Q)||K&&!k());){var G=m.callback;if(typeof G=="function"){m.callback=null,f=m.priorityLevel;var I=G(m.expirationTime<=Q);Q=t.unstable_now(),typeof I=="function"?m.callback=I:m===r(c)&&n(c),w(Q)}else n(c);m=r(c)}if(m!==null)var Z=!0;else{var J=r(d);J!==null&&Ne(_,J.startTime-Q),Z=!1}return Z}finally{m=null,f=ke,h=!1}}var E=!1,L=null,T=-1,M=5,F=-1;function k(){return!(t.unstable_now()-F<M)}function D(){if(L!==null){var K=t.unstable_now();F=K;var Q=!0;try{Q=L(!0,K)}finally{Q?z():(E=!1,L=null)}}else E=!1}var z;if(typeof j=="function")z=function(){j(D)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,ue=W.port2;W.port1.onmessage=D,z=function(){ue.postMessage(null)}}else z=function(){y(D,0)};function ae(K){L=K,E||(E=!0,z())}function Ne(K,Q){T=y(function(){K(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(K){K.callback=null},t.unstable_continueExecution=function(){p||h||(p=!0,ae(P))},t.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<K?Math.floor(1e3/K):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(K){switch(f){case 1:case 2:case 3:var Q=3;break;default:Q=f}var ke=f;f=Q;try{return K()}finally{f=ke}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(K,Q){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var ke=f;f=K;try{return Q()}finally{f=ke}},t.unstable_scheduleCallback=function(K,Q,ke){var G=t.unstable_now();switch(typeof ke=="object"&&ke!==null?(ke=ke.delay,ke=typeof ke=="number"&&0<ke?G+ke:G):ke=G,K){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=ke+I,K={id:u++,callback:Q,priorityLevel:K,startTime:ke,expirationTime:I,sortIndex:-1},ke>G?(K.sortIndex=ke,s(d,K),r(c)===null&&K===r(d)&&(g?(v(T),T=-1):g=!0,Ne(_,ke-G))):(K.sortIndex=I,s(c,K),p||h||(p=!0,ae(P))),K},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(K){var Q=f;return function(){var ke=f;f=Q;try{return K.apply(this,arguments)}finally{f=ke}}}})($M);OM.exports=$M;var oH=OM.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lH=N,Di=oH;function ft(t){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)s+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var BM=new Set,vx={};function vm(t,s){Zh(t,s),Zh(t+"Capture",s)}function Zh(t,s){for(vx[t]=s,t=0;t<s.length;t++)BM.add(s[t])}var xc=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),J2=Object.prototype.hasOwnProperty,cH=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x3={},g3={};function dH(t){return J2.call(g3,t)?!0:J2.call(x3,t)?!1:cH.test(t)?g3[t]=!0:(x3[t]=!0,!1)}function uH(t,s,r,n){if(r!==null&&r.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function mH(t,s,r,n){if(s===null||typeof s>"u"||uH(t,s,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function $a(t,s,r,n,a,i,o){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=t,this.type=s,this.sanitizeURL=i,this.removeEmptyString=o}var ea={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ea[t]=new $a(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var s=t[0];ea[s]=new $a(s,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ea[t]=new $a(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ea[t]=new $a(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ea[t]=new $a(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ea[t]=new $a(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ea[t]=new $a(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ea[t]=new $a(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ea[t]=new $a(t,5,!1,t.toLowerCase(),null,!1,!1)});var v5=/[\-:]([a-z])/g;function y5(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var s=t.replace(v5,y5);ea[s]=new $a(s,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var s=t.replace(v5,y5);ea[s]=new $a(s,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var s=t.replace(v5,y5);ea[s]=new $a(s,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ea[t]=new $a(t,1,!1,t.toLowerCase(),null,!1,!1)});ea.xlinkHref=new $a("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ea[t]=new $a(t,1,!1,t.toLowerCase(),null,!0,!0)});function j5(t,s,r,n){var a=ea.hasOwnProperty(s)?ea[s]:null;(a!==null?a.type!==0:n||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(mH(s,r,a,n)&&(r=null),n||a===null?dH(s)&&(r===null?t.removeAttribute(s):t.setAttribute(s,""+r)):a.mustUseProperty?t[a.propertyName]=r===null?a.type===3?!1:"":r:(s=a.attributeName,n=a.attributeNamespace,r===null?t.removeAttribute(s):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?t.setAttributeNS(n,s,r):t.setAttribute(s,r))))}var _c=lH.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Tv=Symbol.for("react.element"),sh=Symbol.for("react.portal"),rh=Symbol.for("react.fragment"),b5=Symbol.for("react.strict_mode"),eN=Symbol.for("react.profiler"),UM=Symbol.for("react.provider"),zM=Symbol.for("react.context"),N5=Symbol.for("react.forward_ref"),tN=Symbol.for("react.suspense"),sN=Symbol.for("react.suspense_list"),w5=Symbol.for("react.memo"),sd=Symbol.for("react.lazy"),qM=Symbol.for("react.offscreen"),v3=Symbol.iterator;function Np(t){return t===null||typeof t!="object"?null:(t=v3&&t[v3]||t["@@iterator"],typeof t=="function"?t:null)}var Hr=Object.assign,fb;function qp(t){if(fb===void 0)try{throw Error()}catch(r){var s=r.stack.trim().match(/\n( *(at )?)/);fb=s&&s[1]||""}return`
`+fb+t}var pb=!1;function xb(t,s){if(!t||pb)return"";pb=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(d){var n=d}Reflect.construct(t,[],s)}else{try{s.call()}catch(d){n=d}t.call(s.prototype)}else{try{throw Error()}catch(d){n=d}t()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),i=n.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var c=`
`+a[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{pb=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?qp(t):""}function hH(t){switch(t.tag){case 5:return qp(t.type);case 16:return qp("Lazy");case 13:return qp("Suspense");case 19:return qp("SuspenseList");case 0:case 2:case 15:return t=xb(t.type,!1),t;case 11:return t=xb(t.type.render,!1),t;case 1:return t=xb(t.type,!0),t;default:return""}}function rN(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case rh:return"Fragment";case sh:return"Portal";case eN:return"Profiler";case b5:return"StrictMode";case tN:return"Suspense";case sN:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case zM:return(t.displayName||"Context")+".Consumer";case UM:return(t._context.displayName||"Context")+".Provider";case N5:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case w5:return s=t.displayName||null,s!==null?s:rN(t.type)||"Memo";case sd:s=t._payload,t=t._init;try{return rN(t(s))}catch{}}return null}function fH(t){var s=t.type;switch(t.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=s.render,t=t.displayName||t.name||"",s.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return rN(s);case 8:return s===b5?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Id(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function VM(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function pH(t){var s=VM(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),n=""+t[s];if(!t.hasOwnProperty(s)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(t,s,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function Mv(t){t._valueTracker||(t._valueTracker=pH(t))}function HM(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var r=s.getValue(),n="";return t&&(n=VM(t)?t.checked?"true":"false":t.value),t=n,t!==r?(s.setValue(t),!0):!1}function s0(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function nN(t,s){var r=s.checked;return Hr({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function y3(t,s){var r=s.defaultValue==null?"":s.defaultValue,n=s.checked!=null?s.checked:s.defaultChecked;r=Id(s.value!=null?s.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function WM(t,s){s=s.checked,s!=null&&j5(t,"checked",s,!1)}function aN(t,s){WM(t,s);var r=Id(s.value),n=s.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}s.hasOwnProperty("value")?iN(t,s.type,r):s.hasOwnProperty("defaultValue")&&iN(t,s.type,Id(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(t.defaultChecked=!!s.defaultChecked)}function j3(t,s,r){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var n=s.type;if(!(n!=="submit"&&n!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+t._wrapperState.initialValue,r||s===t.value||(t.value=s),t.defaultValue=s}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function iN(t,s,r){(s!=="number"||s0(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Vp=Array.isArray;function gh(t,s,r,n){if(t=t.options,s){s={};for(var a=0;a<r.length;a++)s["$"+r[a]]=!0;for(r=0;r<t.length;r++)a=s.hasOwnProperty("$"+t[r].value),t[r].selected!==a&&(t[r].selected=a),a&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Id(r),s=null,a=0;a<t.length;a++){if(t[a].value===r){t[a].selected=!0,n&&(t[a].defaultSelected=!0);return}s!==null||t[a].disabled||(s=t[a])}s!==null&&(s.selected=!0)}}function oN(t,s){if(s.dangerouslySetInnerHTML!=null)throw Error(ft(91));return Hr({},s,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function b3(t,s){var r=s.value;if(r==null){if(r=s.children,s=s.defaultValue,r!=null){if(s!=null)throw Error(ft(92));if(Vp(r)){if(1<r.length)throw Error(ft(93));r=r[0]}s=r}s==null&&(s=""),r=s}t._wrapperState={initialValue:Id(r)}}function KM(t,s){var r=Id(s.value),n=Id(s.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),s.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function N3(t){var s=t.textContent;s===t._wrapperState.initialValue&&s!==""&&s!==null&&(t.value=s)}function YM(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lN(t,s){return t==null||t==="http://www.w3.org/1999/xhtml"?YM(s):t==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Lv,GM=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,r,n,a){MSApp.execUnsafeLocalFunction(function(){return t(s,r,n,a)})}:t}(function(t,s){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=s;else{for(Lv=Lv||document.createElement("div"),Lv.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Lv.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;s.firstChild;)t.appendChild(s.firstChild)}});function yx(t,s){if(s){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=s;return}}t.textContent=s}var Xp={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xH=["Webkit","ms","Moz","O"];Object.keys(Xp).forEach(function(t){xH.forEach(function(s){s=s+t.charAt(0).toUpperCase()+t.substring(1),Xp[s]=Xp[t]})});function QM(t,s,r){return s==null||typeof s=="boolean"||s===""?"":r||typeof s!="number"||s===0||Xp.hasOwnProperty(t)&&Xp[t]?(""+s).trim():s+"px"}function ZM(t,s){t=t.style;for(var r in s)if(s.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=QM(r,s[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,a):t[r]=a}}var gH=Hr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function cN(t,s){if(s){if(gH[t]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(ft(137,t));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(ft(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(ft(61))}if(s.style!=null&&typeof s.style!="object")throw Error(ft(62))}}function dN(t,s){if(t.indexOf("-")===-1)return typeof s.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var uN=null;function _5(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var mN=null,vh=null,yh=null;function w3(t){if(t=_g(t)){if(typeof mN!="function")throw Error(ft(280));var s=t.stateNode;s&&(s=A1(s),mN(t.stateNode,t.type,s))}}function XM(t){vh?yh?yh.push(t):yh=[t]:vh=t}function JM(){if(vh){var t=vh,s=yh;if(yh=vh=null,w3(t),s)for(t=0;t<s.length;t++)w3(s[t])}}function eL(t,s){return t(s)}function tL(){}var gb=!1;function sL(t,s,r){if(gb)return t(s,r);gb=!0;try{return eL(t,s,r)}finally{gb=!1,(vh!==null||yh!==null)&&(tL(),JM())}}function jx(t,s){var r=t.stateNode;if(r===null)return null;var n=A1(r);if(n===null)return null;r=n[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(ft(231,s,typeof r));return r}var hN=!1;if(xc)try{var wp={};Object.defineProperty(wp,"passive",{get:function(){hN=!0}}),window.addEventListener("test",wp,wp),window.removeEventListener("test",wp,wp)}catch{hN=!1}function vH(t,s,r,n,a,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{s.apply(r,d)}catch(u){this.onError(u)}}var Jp=!1,r0=null,n0=!1,fN=null,yH={onError:function(t){Jp=!0,r0=t}};function jH(t,s,r,n,a,i,o,l,c){Jp=!1,r0=null,vH.apply(yH,arguments)}function bH(t,s,r,n,a,i,o,l,c){if(jH.apply(this,arguments),Jp){if(Jp){var d=r0;Jp=!1,r0=null}else throw Error(ft(198));n0||(n0=!0,fN=d)}}function ym(t){var s=t,r=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,s.flags&4098&&(r=s.return),t=s.return;while(t)}return s.tag===3?r:null}function rL(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function _3(t){if(ym(t)!==t)throw Error(ft(188))}function NH(t){var s=t.alternate;if(!s){if(s=ym(t),s===null)throw Error(ft(188));return s!==t?null:t}for(var r=t,n=s;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return _3(a),t;if(i===n)return _3(a),s;i=i.sibling}throw Error(ft(188))}if(r.return!==n.return)r=a,n=i;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,n=i;break}if(l===n){o=!0,n=a,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=a;break}if(l===n){o=!0,n=i,r=a;break}l=l.sibling}if(!o)throw Error(ft(189))}}if(r.alternate!==n)throw Error(ft(190))}if(r.tag!==3)throw Error(ft(188));return r.stateNode.current===r?t:s}function nL(t){return t=NH(t),t!==null?aL(t):null}function aL(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var s=aL(t);if(s!==null)return s;t=t.sibling}return null}var iL=Di.unstable_scheduleCallback,S3=Di.unstable_cancelCallback,wH=Di.unstable_shouldYield,_H=Di.unstable_requestPaint,un=Di.unstable_now,SH=Di.unstable_getCurrentPriorityLevel,S5=Di.unstable_ImmediatePriority,oL=Di.unstable_UserBlockingPriority,a0=Di.unstable_NormalPriority,CH=Di.unstable_LowPriority,lL=Di.unstable_IdlePriority,_1=null,bl=null;function kH(t){if(bl&&typeof bl.onCommitFiberRoot=="function")try{bl.onCommitFiberRoot(_1,t,void 0,(t.current.flags&128)===128)}catch{}}var Ro=Math.clz32?Math.clz32:EH,AH=Math.log,PH=Math.LN2;function EH(t){return t>>>=0,t===0?32:31-(AH(t)/PH|0)|0}var Dv=64,Iv=4194304;function Hp(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function i0(t,s){var r=t.pendingLanes;if(r===0)return 0;var n=0,a=t.suspendedLanes,i=t.pingedLanes,o=r&268435455;if(o!==0){var l=o&~a;l!==0?n=Hp(l):(i&=o,i!==0&&(n=Hp(i)))}else o=r&~a,o!==0?n=Hp(o):i!==0&&(n=Hp(i));if(n===0)return 0;if(s!==0&&s!==n&&!(s&a)&&(a=n&-n,i=s&-s,a>=i||a===16&&(i&4194240)!==0))return s;if(n&4&&(n|=r&16),s=t.entangledLanes,s!==0)for(t=t.entanglements,s&=n;0<s;)r=31-Ro(s),a=1<<r,n|=t[r],s&=~a;return n}function TH(t,s){switch(t){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function MH(t,s){for(var r=t.suspendedLanes,n=t.pingedLanes,a=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Ro(i),l=1<<o,c=a[o];c===-1?(!(l&r)||l&n)&&(a[o]=TH(l,s)):c<=s&&(t.expiredLanes|=l),i&=~l}}function pN(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function cL(){var t=Dv;return Dv<<=1,!(Dv&4194240)&&(Dv=64),t}function vb(t){for(var s=[],r=0;31>r;r++)s.push(t);return s}function Ng(t,s,r){t.pendingLanes|=s,s!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,s=31-Ro(s),t[s]=r}function LH(t,s){var r=t.pendingLanes&~s;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=s,t.mutableReadLanes&=s,t.entangledLanes&=s,s=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var a=31-Ro(r),i=1<<a;s[a]=0,n[a]=-1,t[a]=-1,r&=~i}}function C5(t,s){var r=t.entangledLanes|=s;for(t=t.entanglements;r;){var n=31-Ro(r),a=1<<n;a&s|t[n]&s&&(t[n]|=s),r&=~a}}var hr=0;function dL(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var uL,k5,mL,hL,fL,xN=!1,Rv=[],Nd=null,wd=null,_d=null,bx=new Map,Nx=new Map,nd=[],DH="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function C3(t,s){switch(t){case"focusin":case"focusout":Nd=null;break;case"dragenter":case"dragleave":wd=null;break;case"mouseover":case"mouseout":_d=null;break;case"pointerover":case"pointerout":bx.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nx.delete(s.pointerId)}}function _p(t,s,r,n,a,i){return t===null||t.nativeEvent!==i?(t={blockedOn:s,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},s!==null&&(s=_g(s),s!==null&&k5(s)),t):(t.eventSystemFlags|=n,s=t.targetContainers,a!==null&&s.indexOf(a)===-1&&s.push(a),t)}function IH(t,s,r,n,a){switch(s){case"focusin":return Nd=_p(Nd,t,s,r,n,a),!0;case"dragenter":return wd=_p(wd,t,s,r,n,a),!0;case"mouseover":return _d=_p(_d,t,s,r,n,a),!0;case"pointerover":var i=a.pointerId;return bx.set(i,_p(bx.get(i)||null,t,s,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,Nx.set(i,_p(Nx.get(i)||null,t,s,r,n,a)),!0}return!1}function pL(t){var s=Iu(t.target);if(s!==null){var r=ym(s);if(r!==null){if(s=r.tag,s===13){if(s=rL(r),s!==null){t.blockedOn=s,fL(t.priority,function(){mL(r)});return}}else if(s===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function _y(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var r=gN(t.domEventName,t.eventSystemFlags,s[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);uN=n,r.target.dispatchEvent(n),uN=null}else return s=_g(r),s!==null&&k5(s),t.blockedOn=r,!1;s.shift()}return!0}function k3(t,s,r){_y(t)&&r.delete(s)}function RH(){xN=!1,Nd!==null&&_y(Nd)&&(Nd=null),wd!==null&&_y(wd)&&(wd=null),_d!==null&&_y(_d)&&(_d=null),bx.forEach(k3),Nx.forEach(k3)}function Sp(t,s){t.blockedOn===s&&(t.blockedOn=null,xN||(xN=!0,Di.unstable_scheduleCallback(Di.unstable_NormalPriority,RH)))}function wx(t){function s(a){return Sp(a,t)}if(0<Rv.length){Sp(Rv[0],t);for(var r=1;r<Rv.length;r++){var n=Rv[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Nd!==null&&Sp(Nd,t),wd!==null&&Sp(wd,t),_d!==null&&Sp(_d,t),bx.forEach(s),Nx.forEach(s),r=0;r<nd.length;r++)n=nd[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<nd.length&&(r=nd[0],r.blockedOn===null);)pL(r),r.blockedOn===null&&nd.shift()}var jh=_c.ReactCurrentBatchConfig,o0=!0;function FH(t,s,r,n){var a=hr,i=jh.transition;jh.transition=null;try{hr=1,A5(t,s,r,n)}finally{hr=a,jh.transition=i}}function OH(t,s,r,n){var a=hr,i=jh.transition;jh.transition=null;try{hr=4,A5(t,s,r,n)}finally{hr=a,jh.transition=i}}function A5(t,s,r,n){if(o0){var a=gN(t,s,r,n);if(a===null)Ab(t,s,n,l0,r),C3(t,n);else if(IH(a,t,s,r,n))n.stopPropagation();else if(C3(t,n),s&4&&-1<DH.indexOf(t)){for(;a!==null;){var i=_g(a);if(i!==null&&uL(i),i=gN(t,s,r,n),i===null&&Ab(t,s,n,l0,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else Ab(t,s,n,null,r)}}var l0=null;function gN(t,s,r,n){if(l0=null,t=_5(n),t=Iu(t),t!==null)if(s=ym(t),s===null)t=null;else if(r=s.tag,r===13){if(t=rL(s),t!==null)return t;t=null}else if(r===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null);return l0=t,null}function xL(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(SH()){case S5:return 1;case oL:return 4;case a0:case CH:return 16;case lL:return 536870912;default:return 16}default:return 16}}var gd=null,P5=null,Sy=null;function gL(){if(Sy)return Sy;var t,s=P5,r=s.length,n,a="value"in gd?gd.value:gd.textContent,i=a.length;for(t=0;t<r&&s[t]===a[t];t++);var o=r-t;for(n=1;n<=o&&s[r-n]===a[i-n];n++);return Sy=a.slice(t,1<n?1-n:void 0)}function Cy(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function Fv(){return!0}function A3(){return!1}function Fi(t){function s(r,n,a,i,o){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Fv:A3,this.isPropagationStopped=A3,this}return Hr(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Fv)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Fv)},persist:function(){},isPersistent:Fv}),s}var Af={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},E5=Fi(Af),wg=Hr({},Af,{view:0,detail:0}),$H=Fi(wg),yb,jb,Cp,S1=Hr({},wg,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:T5,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Cp&&(Cp&&t.type==="mousemove"?(yb=t.screenX-Cp.screenX,jb=t.screenY-Cp.screenY):jb=yb=0,Cp=t),yb)},movementY:function(t){return"movementY"in t?t.movementY:jb}}),P3=Fi(S1),BH=Hr({},S1,{dataTransfer:0}),UH=Fi(BH),zH=Hr({},wg,{relatedTarget:0}),bb=Fi(zH),qH=Hr({},Af,{animationName:0,elapsedTime:0,pseudoElement:0}),VH=Fi(qH),HH=Hr({},Af,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),WH=Fi(HH),KH=Hr({},Af,{data:0}),E3=Fi(KH),YH={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},GH={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},QH={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ZH(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=QH[t])?!!s[t]:!1}function T5(){return ZH}var XH=Hr({},wg,{key:function(t){if(t.key){var s=YH[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=Cy(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?GH[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:T5,charCode:function(t){return t.type==="keypress"?Cy(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Cy(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),JH=Fi(XH),eW=Hr({},S1,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),T3=Fi(eW),tW=Hr({},wg,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:T5}),sW=Fi(tW),rW=Hr({},Af,{propertyName:0,elapsedTime:0,pseudoElement:0}),nW=Fi(rW),aW=Hr({},S1,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),iW=Fi(aW),oW=[9,13,27,32],M5=xc&&"CompositionEvent"in window,ex=null;xc&&"documentMode"in document&&(ex=document.documentMode);var lW=xc&&"TextEvent"in window&&!ex,vL=xc&&(!M5||ex&&8<ex&&11>=ex),M3=" ",L3=!1;function yL(t,s){switch(t){case"keyup":return oW.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jL(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var nh=!1;function cW(t,s){switch(t){case"compositionend":return jL(s);case"keypress":return s.which!==32?null:(L3=!0,M3);case"textInput":return t=s.data,t===M3&&L3?null:t;default:return null}}function dW(t,s){if(nh)return t==="compositionend"||!M5&&yL(t,s)?(t=gL(),Sy=P5=gd=null,nh=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return vL&&s.locale!=="ko"?null:s.data;default:return null}}var uW={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function D3(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!uW[t.type]:s==="textarea"}function bL(t,s,r,n){XM(n),s=c0(s,"onChange"),0<s.length&&(r=new E5("onChange","change",null,r,n),t.push({event:r,listeners:s}))}var tx=null,_x=null;function mW(t){ML(t,0)}function C1(t){var s=oh(t);if(HM(s))return t}function hW(t,s){if(t==="change")return s}var NL=!1;if(xc){var Nb;if(xc){var wb="oninput"in document;if(!wb){var I3=document.createElement("div");I3.setAttribute("oninput","return;"),wb=typeof I3.oninput=="function"}Nb=wb}else Nb=!1;NL=Nb&&(!document.documentMode||9<document.documentMode)}function R3(){tx&&(tx.detachEvent("onpropertychange",wL),_x=tx=null)}function wL(t){if(t.propertyName==="value"&&C1(_x)){var s=[];bL(s,_x,t,_5(t)),sL(mW,s)}}function fW(t,s,r){t==="focusin"?(R3(),tx=s,_x=r,tx.attachEvent("onpropertychange",wL)):t==="focusout"&&R3()}function pW(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return C1(_x)}function xW(t,s){if(t==="click")return C1(s)}function gW(t,s){if(t==="input"||t==="change")return C1(s)}function vW(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var Bo=typeof Object.is=="function"?Object.is:vW;function Sx(t,s){if(Bo(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var r=Object.keys(t),n=Object.keys(s);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!J2.call(s,a)||!Bo(t[a],s[a]))return!1}return!0}function F3(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function O3(t,s){var r=F3(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=s&&n>=s)return{node:r,offset:s-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=F3(r)}}function _L(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?_L(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function SL(){for(var t=window,s=s0();s instanceof t.HTMLIFrameElement;){try{var r=typeof s.contentWindow.location.href=="string"}catch{r=!1}if(r)t=s.contentWindow;else break;s=s0(t.document)}return s}function L5(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}function yW(t){var s=SL(),r=t.focusedElem,n=t.selectionRange;if(s!==r&&r&&r.ownerDocument&&_L(r.ownerDocument.documentElement,r)){if(n!==null&&L5(r)){if(s=n.start,t=n.end,t===void 0&&(t=s),"selectionStart"in r)r.selectionStart=s,r.selectionEnd=Math.min(t,r.value.length);else if(t=(s=r.ownerDocument||document)&&s.defaultView||window,t.getSelection){t=t.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!t.extend&&i>n&&(a=n,n=i,i=a),a=O3(r,i);var o=O3(r,n);a&&o&&(t.rangeCount!==1||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(s=s.createRange(),s.setStart(a.node,a.offset),t.removeAllRanges(),i>n?(t.addRange(s),t.extend(o.node,o.offset)):(s.setEnd(o.node,o.offset),t.addRange(s)))}}for(s=[],t=r;t=t.parentNode;)t.nodeType===1&&s.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<s.length;r++)t=s[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var jW=xc&&"documentMode"in document&&11>=document.documentMode,ah=null,vN=null,sx=null,yN=!1;function $3(t,s,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;yN||ah==null||ah!==s0(n)||(n=ah,"selectionStart"in n&&L5(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),sx&&Sx(sx,n)||(sx=n,n=c0(vN,"onSelect"),0<n.length&&(s=new E5("onSelect","select",null,s,r),t.push({event:s,listeners:n}),s.target=ah)))}function Ov(t,s){var r={};return r[t.toLowerCase()]=s.toLowerCase(),r["Webkit"+t]="webkit"+s,r["Moz"+t]="moz"+s,r}var ih={animationend:Ov("Animation","AnimationEnd"),animationiteration:Ov("Animation","AnimationIteration"),animationstart:Ov("Animation","AnimationStart"),transitionend:Ov("Transition","TransitionEnd")},_b={},CL={};xc&&(CL=document.createElement("div").style,"AnimationEvent"in window||(delete ih.animationend.animation,delete ih.animationiteration.animation,delete ih.animationstart.animation),"TransitionEvent"in window||delete ih.transitionend.transition);function k1(t){if(_b[t])return _b[t];if(!ih[t])return t;var s=ih[t],r;for(r in s)if(s.hasOwnProperty(r)&&r in CL)return _b[t]=s[r];return t}var kL=k1("animationend"),AL=k1("animationiteration"),PL=k1("animationstart"),EL=k1("transitionend"),TL=new Map,B3="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zd(t,s){TL.set(t,s),vm(s,[t])}for(var Sb=0;Sb<B3.length;Sb++){var Cb=B3[Sb],bW=Cb.toLowerCase(),NW=Cb[0].toUpperCase()+Cb.slice(1);Zd(bW,"on"+NW)}Zd(kL,"onAnimationEnd");Zd(AL,"onAnimationIteration");Zd(PL,"onAnimationStart");Zd("dblclick","onDoubleClick");Zd("focusin","onFocus");Zd("focusout","onBlur");Zd(EL,"onTransitionEnd");Zh("onMouseEnter",["mouseout","mouseover"]);Zh("onMouseLeave",["mouseout","mouseover"]);Zh("onPointerEnter",["pointerout","pointerover"]);Zh("onPointerLeave",["pointerout","pointerover"]);vm("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));vm("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));vm("onBeforeInput",["compositionend","keypress","textInput","paste"]);vm("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));vm("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));vm("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wW=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wp));function U3(t,s,r){var n=t.type||"unknown-event";t.currentTarget=r,bH(n,s,void 0,t),t.currentTarget=null}function ML(t,s){s=(s&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],a=n.event;n=n.listeners;e:{var i=void 0;if(s)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;U3(a,l,d),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;U3(a,l,d),i=c}}}if(n0)throw t=fN,n0=!1,fN=null,t}function Ar(t,s){var r=s[_N];r===void 0&&(r=s[_N]=new Set);var n=t+"__bubble";r.has(n)||(LL(s,t,2,!1),r.add(n))}function kb(t,s,r){var n=0;s&&(n|=4),LL(r,t,n,s)}var $v="_reactListening"+Math.random().toString(36).slice(2);function Cx(t){if(!t[$v]){t[$v]=!0,BM.forEach(function(r){r!=="selectionchange"&&(wW.has(r)||kb(r,!1,t),kb(r,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[$v]||(s[$v]=!0,kb("selectionchange",!1,s))}}function LL(t,s,r,n){switch(xL(s)){case 1:var a=FH;break;case 4:a=OH;break;default:a=A5}r=a.bind(null,s,r,t),a=void 0,!hN||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(a=!0),n?a!==void 0?t.addEventListener(s,r,{capture:!0,passive:a}):t.addEventListener(s,r,!0):a!==void 0?t.addEventListener(s,r,{passive:a}):t.addEventListener(s,r,!1)}function Ab(t,s,r,n,a){var i=n;if(!(s&1)&&!(s&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=Iu(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}sL(function(){var d=i,u=_5(r),m=[];e:{var f=TL.get(t);if(f!==void 0){var h=E5,p=t;switch(t){case"keypress":if(Cy(r)===0)break e;case"keydown":case"keyup":h=JH;break;case"focusin":p="focus",h=bb;break;case"focusout":p="blur",h=bb;break;case"beforeblur":case"afterblur":h=bb;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=P3;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=UH;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=sW;break;case kL:case AL:case PL:h=VH;break;case EL:h=nW;break;case"scroll":h=$H;break;case"wheel":h=iW;break;case"copy":case"cut":case"paste":h=WH;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=T3}var g=(s&4)!==0,y=!g&&t==="scroll",v=g?f!==null?f+"Capture":null:f;g=[];for(var j=d,w;j!==null;){w=j;var _=w.stateNode;if(w.tag===5&&_!==null&&(w=_,v!==null&&(_=jx(j,v),_!=null&&g.push(kx(j,_,w)))),y)break;j=j.return}0<g.length&&(f=new h(f,p,null,r,u),m.push({event:f,listeners:g}))}}if(!(s&7)){e:{if(f=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",f&&r!==uN&&(p=r.relatedTarget||r.fromElement)&&(Iu(p)||p[gc]))break e;if((h||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,h?(p=r.relatedTarget||r.toElement,h=d,p=p?Iu(p):null,p!==null&&(y=ym(p),p!==y||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=d),h!==p)){if(g=P3,_="onMouseLeave",v="onMouseEnter",j="mouse",(t==="pointerout"||t==="pointerover")&&(g=T3,_="onPointerLeave",v="onPointerEnter",j="pointer"),y=h==null?f:oh(h),w=p==null?f:oh(p),f=new g(_,j+"leave",h,r,u),f.target=y,f.relatedTarget=w,_=null,Iu(u)===d&&(g=new g(v,j+"enter",p,r,u),g.target=w,g.relatedTarget=y,_=g),y=_,h&&p)t:{for(g=h,v=p,j=0,w=g;w;w=Bm(w))j++;for(w=0,_=v;_;_=Bm(_))w++;for(;0<j-w;)g=Bm(g),j--;for(;0<w-j;)v=Bm(v),w--;for(;j--;){if(g===v||v!==null&&g===v.alternate)break t;g=Bm(g),v=Bm(v)}g=null}else g=null;h!==null&&z3(m,f,h,g,!1),p!==null&&y!==null&&z3(m,y,p,g,!0)}}e:{if(f=d?oh(d):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var P=hW;else if(D3(f))if(NL)P=gW;else{P=pW;var E=fW}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(P=xW);if(P&&(P=P(t,d))){bL(m,P,r,u);break e}E&&E(t,f,d),t==="focusout"&&(E=f._wrapperState)&&E.controlled&&f.type==="number"&&iN(f,"number",f.value)}switch(E=d?oh(d):window,t){case"focusin":(D3(E)||E.contentEditable==="true")&&(ah=E,vN=d,sx=null);break;case"focusout":sx=vN=ah=null;break;case"mousedown":yN=!0;break;case"contextmenu":case"mouseup":case"dragend":yN=!1,$3(m,r,u);break;case"selectionchange":if(jW)break;case"keydown":case"keyup":$3(m,r,u)}var L;if(M5)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else nh?yL(t,r)&&(T="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(T="onCompositionStart");T&&(vL&&r.locale!=="ko"&&(nh||T!=="onCompositionStart"?T==="onCompositionEnd"&&nh&&(L=gL()):(gd=u,P5="value"in gd?gd.value:gd.textContent,nh=!0)),E=c0(d,T),0<E.length&&(T=new E3(T,t,null,r,u),m.push({event:T,listeners:E}),L?T.data=L:(L=jL(r),L!==null&&(T.data=L)))),(L=lW?cW(t,r):dW(t,r))&&(d=c0(d,"onBeforeInput"),0<d.length&&(u=new E3("onBeforeInput","beforeinput",null,r,u),m.push({event:u,listeners:d}),u.data=L))}ML(m,s)})}function kx(t,s,r){return{instance:t,listener:s,currentTarget:r}}function c0(t,s){for(var r=s+"Capture",n=[];t!==null;){var a=t,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=jx(t,r),i!=null&&n.unshift(kx(t,i,a)),i=jx(t,s),i!=null&&n.push(kx(t,i,a))),t=t.return}return n}function Bm(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function z3(t,s,r,n,a){for(var i=s._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,d=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&d!==null&&(l=d,a?(c=jx(r,i),c!=null&&o.unshift(kx(r,c,l))):a||(c=jx(r,i),c!=null&&o.push(kx(r,c,l)))),r=r.return}o.length!==0&&t.push({event:s,listeners:o})}var _W=/\r\n?/g,SW=/\u0000|\uFFFD/g;function q3(t){return(typeof t=="string"?t:""+t).replace(_W,`
`).replace(SW,"")}function Bv(t,s,r){if(s=q3(s),q3(t)!==s&&r)throw Error(ft(425))}function d0(){}var jN=null,bN=null;function NN(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var wN=typeof setTimeout=="function"?setTimeout:void 0,CW=typeof clearTimeout=="function"?clearTimeout:void 0,V3=typeof Promise=="function"?Promise:void 0,kW=typeof queueMicrotask=="function"?queueMicrotask:typeof V3<"u"?function(t){return V3.resolve(null).then(t).catch(AW)}:wN;function AW(t){setTimeout(function(){throw t})}function Pb(t,s){var r=s,n=0;do{var a=r.nextSibling;if(t.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){t.removeChild(a),wx(s);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);wx(s)}function Sd(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return t}function H3(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(s===0)return t;s--}else r==="/$"&&s++}t=t.previousSibling}return null}var Pf=Math.random().toString(36).slice(2),pl="__reactFiber$"+Pf,Ax="__reactProps$"+Pf,gc="__reactContainer$"+Pf,_N="__reactEvents$"+Pf,PW="__reactListeners$"+Pf,EW="__reactHandles$"+Pf;function Iu(t){var s=t[pl];if(s)return s;for(var r=t.parentNode;r;){if(s=r[gc]||r[pl]){if(r=s.alternate,s.child!==null||r!==null&&r.child!==null)for(t=H3(t);t!==null;){if(r=t[pl])return r;t=H3(t)}return s}t=r,r=t.parentNode}return null}function _g(t){return t=t[pl]||t[gc],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function oh(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ft(33))}function A1(t){return t[Ax]||null}var SN=[],lh=-1;function Xd(t){return{current:t}}function Tr(t){0>lh||(t.current=SN[lh],SN[lh]=null,lh--)}function _r(t,s){lh++,SN[lh]=t.current,t.current=s}var Rd={},ga=Xd(Rd),Ja=Xd(!1),em=Rd;function Xh(t,s){var r=t.type.contextTypes;if(!r)return Rd;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===s)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=s[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=a),a}function ei(t){return t=t.childContextTypes,t!=null}function u0(){Tr(Ja),Tr(ga)}function W3(t,s,r){if(ga.current!==Rd)throw Error(ft(168));_r(ga,s),_r(Ja,r)}function DL(t,s,r){var n=t.stateNode;if(s=s.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in s))throw Error(ft(108,fH(t)||"Unknown",a));return Hr({},r,n)}function m0(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Rd,em=ga.current,_r(ga,t),_r(Ja,Ja.current),!0}function K3(t,s,r){var n=t.stateNode;if(!n)throw Error(ft(169));r?(t=DL(t,s,em),n.__reactInternalMemoizedMergedChildContext=t,Tr(Ja),Tr(ga),_r(ga,t)):Tr(Ja),_r(Ja,r)}var oc=null,P1=!1,Eb=!1;function IL(t){oc===null?oc=[t]:oc.push(t)}function TW(t){P1=!0,IL(t)}function Jd(){if(!Eb&&oc!==null){Eb=!0;var t=0,s=hr;try{var r=oc;for(hr=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}oc=null,P1=!1}catch(a){throw oc!==null&&(oc=oc.slice(t+1)),iL(S5,Jd),a}finally{hr=s,Eb=!1}}return null}var ch=[],dh=0,h0=null,f0=0,Xi=[],Ji=0,tm=null,mc=1,hc="";function Pu(t,s){ch[dh++]=f0,ch[dh++]=h0,h0=t,f0=s}function RL(t,s,r){Xi[Ji++]=mc,Xi[Ji++]=hc,Xi[Ji++]=tm,tm=t;var n=mc;t=hc;var a=32-Ro(n)-1;n&=~(1<<a),r+=1;var i=32-Ro(s)+a;if(30<i){var o=a-a%5;i=(n&(1<<o)-1).toString(32),n>>=o,a-=o,mc=1<<32-Ro(s)+a|r<<a|n,hc=i+t}else mc=1<<i|r<<a|n,hc=t}function D5(t){t.return!==null&&(Pu(t,1),RL(t,1,0))}function I5(t){for(;t===h0;)h0=ch[--dh],ch[dh]=null,f0=ch[--dh],ch[dh]=null;for(;t===tm;)tm=Xi[--Ji],Xi[Ji]=null,hc=Xi[--Ji],Xi[Ji]=null,mc=Xi[--Ji],Xi[Ji]=null}var Ai=null,wi=null,Rr=!1,Po=null;function FL(t,s){var r=to(5,null,null,0);r.elementType="DELETED",r.stateNode=s,r.return=t,s=t.deletions,s===null?(t.deletions=[r],t.flags|=16):s.push(r)}function Y3(t,s){switch(t.tag){case 5:var r=t.type;return s=s.nodeType!==1||r.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(t.stateNode=s,Ai=t,wi=Sd(s.firstChild),!0):!1;case 6:return s=t.pendingProps===""||s.nodeType!==3?null:s,s!==null?(t.stateNode=s,Ai=t,wi=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(r=tm!==null?{id:mc,overflow:hc}:null,t.memoizedState={dehydrated:s,treeContext:r,retryLane:1073741824},r=to(18,null,null,0),r.stateNode=s,r.return=t,t.child=r,Ai=t,wi=null,!0):!1;default:return!1}}function CN(t){return(t.mode&1)!==0&&(t.flags&128)===0}function kN(t){if(Rr){var s=wi;if(s){var r=s;if(!Y3(t,s)){if(CN(t))throw Error(ft(418));s=Sd(r.nextSibling);var n=Ai;s&&Y3(t,s)?FL(n,r):(t.flags=t.flags&-4097|2,Rr=!1,Ai=t)}}else{if(CN(t))throw Error(ft(418));t.flags=t.flags&-4097|2,Rr=!1,Ai=t}}}function G3(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ai=t}function Uv(t){if(t!==Ai)return!1;if(!Rr)return G3(t),Rr=!0,!1;var s;if((s=t.tag!==3)&&!(s=t.tag!==5)&&(s=t.type,s=s!=="head"&&s!=="body"&&!NN(t.type,t.memoizedProps)),s&&(s=wi)){if(CN(t))throw OL(),Error(ft(418));for(;s;)FL(t,s),s=Sd(s.nextSibling)}if(G3(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ft(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(s===0){wi=Sd(t.nextSibling);break e}s--}else r!=="$"&&r!=="$!"&&r!=="$?"||s++}t=t.nextSibling}wi=null}}else wi=Ai?Sd(t.stateNode.nextSibling):null;return!0}function OL(){for(var t=wi;t;)t=Sd(t.nextSibling)}function Jh(){wi=Ai=null,Rr=!1}function R5(t){Po===null?Po=[t]:Po.push(t)}var MW=_c.ReactCurrentBatchConfig;function kp(t,s,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ft(309));var n=r.stateNode}if(!n)throw Error(ft(147,t));var a=n,i=""+t;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===i?s.ref:(s=function(o){var l=a.refs;o===null?delete l[i]:l[i]=o},s._stringRef=i,s)}if(typeof t!="string")throw Error(ft(284));if(!r._owner)throw Error(ft(290,t))}return t}function zv(t,s){throw t=Object.prototype.toString.call(s),Error(ft(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t))}function Q3(t){var s=t._init;return s(t._payload)}function $L(t){function s(v,j){if(t){var w=v.deletions;w===null?(v.deletions=[j],v.flags|=16):w.push(j)}}function r(v,j){if(!t)return null;for(;j!==null;)s(v,j),j=j.sibling;return null}function n(v,j){for(v=new Map;j!==null;)j.key!==null?v.set(j.key,j):v.set(j.index,j),j=j.sibling;return v}function a(v,j){return v=Pd(v,j),v.index=0,v.sibling=null,v}function i(v,j,w){return v.index=w,t?(w=v.alternate,w!==null?(w=w.index,w<j?(v.flags|=2,j):w):(v.flags|=2,j)):(v.flags|=1048576,j)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function l(v,j,w,_){return j===null||j.tag!==6?(j=Fb(w,v.mode,_),j.return=v,j):(j=a(j,w),j.return=v,j)}function c(v,j,w,_){var P=w.type;return P===rh?u(v,j,w.props.children,_,w.key):j!==null&&(j.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===sd&&Q3(P)===j.type)?(_=a(j,w.props),_.ref=kp(v,j,w),_.return=v,_):(_=Ly(w.type,w.key,w.props,null,v.mode,_),_.ref=kp(v,j,w),_.return=v,_)}function d(v,j,w,_){return j===null||j.tag!==4||j.stateNode.containerInfo!==w.containerInfo||j.stateNode.implementation!==w.implementation?(j=Ob(w,v.mode,_),j.return=v,j):(j=a(j,w.children||[]),j.return=v,j)}function u(v,j,w,_,P){return j===null||j.tag!==7?(j=Qu(w,v.mode,_,P),j.return=v,j):(j=a(j,w),j.return=v,j)}function m(v,j,w){if(typeof j=="string"&&j!==""||typeof j=="number")return j=Fb(""+j,v.mode,w),j.return=v,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Tv:return w=Ly(j.type,j.key,j.props,null,v.mode,w),w.ref=kp(v,null,j),w.return=v,w;case sh:return j=Ob(j,v.mode,w),j.return=v,j;case sd:var _=j._init;return m(v,_(j._payload),w)}if(Vp(j)||Np(j))return j=Qu(j,v.mode,w,null),j.return=v,j;zv(v,j)}return null}function f(v,j,w,_){var P=j!==null?j.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return P!==null?null:l(v,j,""+w,_);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Tv:return w.key===P?c(v,j,w,_):null;case sh:return w.key===P?d(v,j,w,_):null;case sd:return P=w._init,f(v,j,P(w._payload),_)}if(Vp(w)||Np(w))return P!==null?null:u(v,j,w,_,null);zv(v,w)}return null}function h(v,j,w,_,P){if(typeof _=="string"&&_!==""||typeof _=="number")return v=v.get(w)||null,l(j,v,""+_,P);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Tv:return v=v.get(_.key===null?w:_.key)||null,c(j,v,_,P);case sh:return v=v.get(_.key===null?w:_.key)||null,d(j,v,_,P);case sd:var E=_._init;return h(v,j,w,E(_._payload),P)}if(Vp(_)||Np(_))return v=v.get(w)||null,u(j,v,_,P,null);zv(j,_)}return null}function p(v,j,w,_){for(var P=null,E=null,L=j,T=j=0,M=null;L!==null&&T<w.length;T++){L.index>T?(M=L,L=null):M=L.sibling;var F=f(v,L,w[T],_);if(F===null){L===null&&(L=M);break}t&&L&&F.alternate===null&&s(v,L),j=i(F,j,T),E===null?P=F:E.sibling=F,E=F,L=M}if(T===w.length)return r(v,L),Rr&&Pu(v,T),P;if(L===null){for(;T<w.length;T++)L=m(v,w[T],_),L!==null&&(j=i(L,j,T),E===null?P=L:E.sibling=L,E=L);return Rr&&Pu(v,T),P}for(L=n(v,L);T<w.length;T++)M=h(L,v,T,w[T],_),M!==null&&(t&&M.alternate!==null&&L.delete(M.key===null?T:M.key),j=i(M,j,T),E===null?P=M:E.sibling=M,E=M);return t&&L.forEach(function(k){return s(v,k)}),Rr&&Pu(v,T),P}function g(v,j,w,_){var P=Np(w);if(typeof P!="function")throw Error(ft(150));if(w=P.call(w),w==null)throw Error(ft(151));for(var E=P=null,L=j,T=j=0,M=null,F=w.next();L!==null&&!F.done;T++,F=w.next()){L.index>T?(M=L,L=null):M=L.sibling;var k=f(v,L,F.value,_);if(k===null){L===null&&(L=M);break}t&&L&&k.alternate===null&&s(v,L),j=i(k,j,T),E===null?P=k:E.sibling=k,E=k,L=M}if(F.done)return r(v,L),Rr&&Pu(v,T),P;if(L===null){for(;!F.done;T++,F=w.next())F=m(v,F.value,_),F!==null&&(j=i(F,j,T),E===null?P=F:E.sibling=F,E=F);return Rr&&Pu(v,T),P}for(L=n(v,L);!F.done;T++,F=w.next())F=h(L,v,T,F.value,_),F!==null&&(t&&F.alternate!==null&&L.delete(F.key===null?T:F.key),j=i(F,j,T),E===null?P=F:E.sibling=F,E=F);return t&&L.forEach(function(D){return s(v,D)}),Rr&&Pu(v,T),P}function y(v,j,w,_){if(typeof w=="object"&&w!==null&&w.type===rh&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Tv:e:{for(var P=w.key,E=j;E!==null;){if(E.key===P){if(P=w.type,P===rh){if(E.tag===7){r(v,E.sibling),j=a(E,w.props.children),j.return=v,v=j;break e}}else if(E.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===sd&&Q3(P)===E.type){r(v,E.sibling),j=a(E,w.props),j.ref=kp(v,E,w),j.return=v,v=j;break e}r(v,E);break}else s(v,E);E=E.sibling}w.type===rh?(j=Qu(w.props.children,v.mode,_,w.key),j.return=v,v=j):(_=Ly(w.type,w.key,w.props,null,v.mode,_),_.ref=kp(v,j,w),_.return=v,v=_)}return o(v);case sh:e:{for(E=w.key;j!==null;){if(j.key===E)if(j.tag===4&&j.stateNode.containerInfo===w.containerInfo&&j.stateNode.implementation===w.implementation){r(v,j.sibling),j=a(j,w.children||[]),j.return=v,v=j;break e}else{r(v,j);break}else s(v,j);j=j.sibling}j=Ob(w,v.mode,_),j.return=v,v=j}return o(v);case sd:return E=w._init,y(v,j,E(w._payload),_)}if(Vp(w))return p(v,j,w,_);if(Np(w))return g(v,j,w,_);zv(v,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,j!==null&&j.tag===6?(r(v,j.sibling),j=a(j,w),j.return=v,v=j):(r(v,j),j=Fb(w,v.mode,_),j.return=v,v=j),o(v)):r(v,j)}return y}var ef=$L(!0),BL=$L(!1),p0=Xd(null),x0=null,uh=null,F5=null;function O5(){F5=uh=x0=null}function $5(t){var s=p0.current;Tr(p0),t._currentValue=s}function AN(t,s,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,n!==null&&(n.childLanes|=s)):n!==null&&(n.childLanes&s)!==s&&(n.childLanes|=s),t===r)break;t=t.return}}function bh(t,s){x0=t,F5=uh=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&s&&(Qa=!0),t.firstContext=null)}function lo(t){var s=t._currentValue;if(F5!==t)if(t={context:t,memoizedValue:s,next:null},uh===null){if(x0===null)throw Error(ft(308));uh=t,x0.dependencies={lanes:0,firstContext:t}}else uh=uh.next=t;return s}var Ru=null;function B5(t){Ru===null?Ru=[t]:Ru.push(t)}function UL(t,s,r,n){var a=s.interleaved;return a===null?(r.next=r,B5(s)):(r.next=a.next,a.next=r),s.interleaved=r,vc(t,n)}function vc(t,s){t.lanes|=s;var r=t.alternate;for(r!==null&&(r.lanes|=s),r=t,t=t.return;t!==null;)t.childLanes|=s,r=t.alternate,r!==null&&(r.childLanes|=s),r=t,t=t.return;return r.tag===3?r.stateNode:null}var rd=!1;function U5(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zL(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function fc(t,s){return{eventTime:t,lane:s,tag:0,payload:null,callback:null,next:null}}function Cd(t,s,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Xs&2){var a=n.pending;return a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s,vc(t,r)}return a=n.interleaved,a===null?(s.next=s,B5(n)):(s.next=a.next,a.next=s),n.interleaved=s,vc(t,r)}function ky(t,s,r){if(s=s.updateQueue,s!==null&&(s=s.shared,(r&4194240)!==0)){var n=s.lanes;n&=t.pendingLanes,r|=n,s.lanes=r,C5(t,r)}}function Z3(t,s){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?a=i=s:i=i.next=s}else a=i=s;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=s:t.next=s,r.lastBaseUpdate=s}function g0(t,s,r,n){var a=t.updateQueue;rd=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var u=t.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(i!==null){var m=a.baseState;o=0,u=d=c=null,l=i;do{var f=l.lane,h=l.eventTime;if((n&f)===f){u!==null&&(u=u.next={eventTime:h,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=t,g=l;switch(f=s,h=r,g.tag){case 1:if(p=g.payload,typeof p=="function"){m=p.call(h,m,f);break e}m=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,f=typeof p=="function"?p.call(h,m,f):p,f==null)break e;m=Hr({},m,f);break e;case 2:rd=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=a.effects,f===null?a.effects=[l]:f.push(l))}else h={eventTime:h,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=h,c=m):u=u.next=h,o|=f;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;f=l,l=f.next,f.next=null,a.lastBaseUpdate=f,a.shared.pending=null}}while(!0);if(u===null&&(c=m),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=u,s=a.shared.interleaved,s!==null){a=s;do o|=a.lane,a=a.next;while(a!==s)}else i===null&&(a.shared.lanes=0);rm|=o,t.lanes=o,t.memoizedState=m}}function X3(t,s,r){if(t=s.effects,s.effects=null,t!==null)for(s=0;s<t.length;s++){var n=t[s],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(ft(191,a));a.call(n)}}}var Sg={},Nl=Xd(Sg),Px=Xd(Sg),Ex=Xd(Sg);function Fu(t){if(t===Sg)throw Error(ft(174));return t}function z5(t,s){switch(_r(Ex,s),_r(Px,t),_r(Nl,Sg),t=s.nodeType,t){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:lN(null,"");break;default:t=t===8?s.parentNode:s,s=t.namespaceURI||null,t=t.tagName,s=lN(s,t)}Tr(Nl),_r(Nl,s)}function tf(){Tr(Nl),Tr(Px),Tr(Ex)}function qL(t){Fu(Ex.current);var s=Fu(Nl.current),r=lN(s,t.type);s!==r&&(_r(Px,t),_r(Nl,r))}function q5(t){Px.current===t&&(Tr(Nl),Tr(Px))}var qr=Xd(0);function v0(t){for(var s=t;s!==null;){if(s.tag===13){var r=s.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Tb=[];function V5(){for(var t=0;t<Tb.length;t++)Tb[t]._workInProgressVersionPrimary=null;Tb.length=0}var Ay=_c.ReactCurrentDispatcher,Mb=_c.ReactCurrentBatchConfig,sm=0,Vr=null,Tn=null,Fn=null,y0=!1,rx=!1,Tx=0,LW=0;function oa(){throw Error(ft(321))}function H5(t,s){if(s===null)return!1;for(var r=0;r<s.length&&r<t.length;r++)if(!Bo(t[r],s[r]))return!1;return!0}function W5(t,s,r,n,a,i){if(sm=i,Vr=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Ay.current=t===null||t.memoizedState===null?FW:OW,t=r(n,a),rx){i=0;do{if(rx=!1,Tx=0,25<=i)throw Error(ft(301));i+=1,Fn=Tn=null,s.updateQueue=null,Ay.current=$W,t=r(n,a)}while(rx)}if(Ay.current=j0,s=Tn!==null&&Tn.next!==null,sm=0,Fn=Tn=Vr=null,y0=!1,s)throw Error(ft(300));return t}function K5(){var t=Tx!==0;return Tx=0,t}function cl(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fn===null?Vr.memoizedState=Fn=t:Fn=Fn.next=t,Fn}function co(){if(Tn===null){var t=Vr.alternate;t=t!==null?t.memoizedState:null}else t=Tn.next;var s=Fn===null?Vr.memoizedState:Fn.next;if(s!==null)Fn=s,Tn=t;else{if(t===null)throw Error(ft(310));Tn=t,t={memoizedState:Tn.memoizedState,baseState:Tn.baseState,baseQueue:Tn.baseQueue,queue:Tn.queue,next:null},Fn===null?Vr.memoizedState=Fn=t:Fn=Fn.next=t}return Fn}function Mx(t,s){return typeof s=="function"?s(t):s}function Lb(t){var s=co(),r=s.queue;if(r===null)throw Error(ft(311));r.lastRenderedReducer=t;var n=Tn,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var l=o=null,c=null,d=i;do{var u=d.lane;if((sm&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:t(n,d.action);else{var m={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=m,o=n):c=c.next=m,Vr.lanes|=u,rm|=u}d=d.next}while(d!==null&&d!==i);c===null?o=n:c.next=l,Bo(n,s.memoizedState)||(Qa=!0),s.memoizedState=n,s.baseState=o,s.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){a=t;do i=a.lane,Vr.lanes|=i,rm|=i,a=a.next;while(a!==t)}else a===null&&(r.lanes=0);return[s.memoizedState,r.dispatch]}function Db(t){var s=co(),r=s.queue;if(r===null)throw Error(ft(311));r.lastRenderedReducer=t;var n=r.dispatch,a=r.pending,i=s.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do i=t(i,o.action),o=o.next;while(o!==a);Bo(i,s.memoizedState)||(Qa=!0),s.memoizedState=i,s.baseQueue===null&&(s.baseState=i),r.lastRenderedState=i}return[i,n]}function VL(){}function HL(t,s){var r=Vr,n=co(),a=s(),i=!Bo(n.memoizedState,a);if(i&&(n.memoizedState=a,Qa=!0),n=n.queue,Y5(YL.bind(null,r,n,t),[t]),n.getSnapshot!==s||i||Fn!==null&&Fn.memoizedState.tag&1){if(r.flags|=2048,Lx(9,KL.bind(null,r,n,a,s),void 0,null),Bn===null)throw Error(ft(349));sm&30||WL(r,s,a)}return a}function WL(t,s,r){t.flags|=16384,t={getSnapshot:s,value:r},s=Vr.updateQueue,s===null?(s={lastEffect:null,stores:null},Vr.updateQueue=s,s.stores=[t]):(r=s.stores,r===null?s.stores=[t]:r.push(t))}function KL(t,s,r,n){s.value=r,s.getSnapshot=n,GL(s)&&QL(t)}function YL(t,s,r){return r(function(){GL(s)&&QL(t)})}function GL(t){var s=t.getSnapshot;t=t.value;try{var r=s();return!Bo(t,r)}catch{return!0}}function QL(t){var s=vc(t,1);s!==null&&Fo(s,t,1,-1)}function J3(t){var s=cl();return typeof t=="function"&&(t=t()),s.memoizedState=s.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Mx,lastRenderedState:t},s.queue=t,t=t.dispatch=RW.bind(null,Vr,t),[s.memoizedState,t]}function Lx(t,s,r,n){return t={tag:t,create:s,destroy:r,deps:n,next:null},s=Vr.updateQueue,s===null?(s={lastEffect:null,stores:null},Vr.updateQueue=s,s.lastEffect=t.next=t):(r=s.lastEffect,r===null?s.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,s.lastEffect=t)),t}function ZL(){return co().memoizedState}function Py(t,s,r,n){var a=cl();Vr.flags|=t,a.memoizedState=Lx(1|s,r,void 0,n===void 0?null:n)}function E1(t,s,r,n){var a=co();n=n===void 0?null:n;var i=void 0;if(Tn!==null){var o=Tn.memoizedState;if(i=o.destroy,n!==null&&H5(n,o.deps)){a.memoizedState=Lx(s,r,i,n);return}}Vr.flags|=t,a.memoizedState=Lx(1|s,r,i,n)}function eC(t,s){return Py(8390656,8,t,s)}function Y5(t,s){return E1(2048,8,t,s)}function XL(t,s){return E1(4,2,t,s)}function JL(t,s){return E1(4,4,t,s)}function eD(t,s){if(typeof s=="function")return t=t(),s(t),function(){s(null)};if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function tD(t,s,r){return r=r!=null?r.concat([t]):null,E1(4,4,eD.bind(null,s,t),r)}function G5(){}function sD(t,s){var r=co();s=s===void 0?null:s;var n=r.memoizedState;return n!==null&&s!==null&&H5(s,n[1])?n[0]:(r.memoizedState=[t,s],t)}function rD(t,s){var r=co();s=s===void 0?null:s;var n=r.memoizedState;return n!==null&&s!==null&&H5(s,n[1])?n[0]:(t=t(),r.memoizedState=[t,s],t)}function nD(t,s,r){return sm&21?(Bo(r,s)||(r=cL(),Vr.lanes|=r,rm|=r,t.baseState=!0),s):(t.baseState&&(t.baseState=!1,Qa=!0),t.memoizedState=r)}function DW(t,s){var r=hr;hr=r!==0&&4>r?r:4,t(!0);var n=Mb.transition;Mb.transition={};try{t(!1),s()}finally{hr=r,Mb.transition=n}}function aD(){return co().memoizedState}function IW(t,s,r){var n=Ad(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},iD(t))oD(s,r);else if(r=UL(t,s,r,n),r!==null){var a=La();Fo(r,t,n,a),lD(r,s,n)}}function RW(t,s,r){var n=Ad(t),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(iD(t))oD(s,a);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=s.lastRenderedReducer,i!==null))try{var o=s.lastRenderedState,l=i(o,r);if(a.hasEagerState=!0,a.eagerState=l,Bo(l,o)){var c=s.interleaved;c===null?(a.next=a,B5(s)):(a.next=c.next,c.next=a),s.interleaved=a;return}}catch{}finally{}r=UL(t,s,a,n),r!==null&&(a=La(),Fo(r,t,n,a),lD(r,s,n))}}function iD(t){var s=t.alternate;return t===Vr||s!==null&&s===Vr}function oD(t,s){rx=y0=!0;var r=t.pending;r===null?s.next=s:(s.next=r.next,r.next=s),t.pending=s}function lD(t,s,r){if(r&4194240){var n=s.lanes;n&=t.pendingLanes,r|=n,s.lanes=r,C5(t,r)}}var j0={readContext:lo,useCallback:oa,useContext:oa,useEffect:oa,useImperativeHandle:oa,useInsertionEffect:oa,useLayoutEffect:oa,useMemo:oa,useReducer:oa,useRef:oa,useState:oa,useDebugValue:oa,useDeferredValue:oa,useTransition:oa,useMutableSource:oa,useSyncExternalStore:oa,useId:oa,unstable_isNewReconciler:!1},FW={readContext:lo,useCallback:function(t,s){return cl().memoizedState=[t,s===void 0?null:s],t},useContext:lo,useEffect:eC,useImperativeHandle:function(t,s,r){return r=r!=null?r.concat([t]):null,Py(4194308,4,eD.bind(null,s,t),r)},useLayoutEffect:function(t,s){return Py(4194308,4,t,s)},useInsertionEffect:function(t,s){return Py(4,2,t,s)},useMemo:function(t,s){var r=cl();return s=s===void 0?null:s,t=t(),r.memoizedState=[t,s],t},useReducer:function(t,s,r){var n=cl();return s=r!==void 0?r(s):s,n.memoizedState=n.baseState=s,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},n.queue=t,t=t.dispatch=IW.bind(null,Vr,t),[n.memoizedState,t]},useRef:function(t){var s=cl();return t={current:t},s.memoizedState=t},useState:J3,useDebugValue:G5,useDeferredValue:function(t){return cl().memoizedState=t},useTransition:function(){var t=J3(!1),s=t[0];return t=DW.bind(null,t[1]),cl().memoizedState=t,[s,t]},useMutableSource:function(){},useSyncExternalStore:function(t,s,r){var n=Vr,a=cl();if(Rr){if(r===void 0)throw Error(ft(407));r=r()}else{if(r=s(),Bn===null)throw Error(ft(349));sm&30||WL(n,s,r)}a.memoizedState=r;var i={value:r,getSnapshot:s};return a.queue=i,eC(YL.bind(null,n,i,t),[t]),n.flags|=2048,Lx(9,KL.bind(null,n,i,r,s),void 0,null),r},useId:function(){var t=cl(),s=Bn.identifierPrefix;if(Rr){var r=hc,n=mc;r=(n&~(1<<32-Ro(n)-1)).toString(32)+r,s=":"+s+"R"+r,r=Tx++,0<r&&(s+="H"+r.toString(32)),s+=":"}else r=LW++,s=":"+s+"r"+r.toString(32)+":";return t.memoizedState=s},unstable_isNewReconciler:!1},OW={readContext:lo,useCallback:sD,useContext:lo,useEffect:Y5,useImperativeHandle:tD,useInsertionEffect:XL,useLayoutEffect:JL,useMemo:rD,useReducer:Lb,useRef:ZL,useState:function(){return Lb(Mx)},useDebugValue:G5,useDeferredValue:function(t){var s=co();return nD(s,Tn.memoizedState,t)},useTransition:function(){var t=Lb(Mx)[0],s=co().memoizedState;return[t,s]},useMutableSource:VL,useSyncExternalStore:HL,useId:aD,unstable_isNewReconciler:!1},$W={readContext:lo,useCallback:sD,useContext:lo,useEffect:Y5,useImperativeHandle:tD,useInsertionEffect:XL,useLayoutEffect:JL,useMemo:rD,useReducer:Db,useRef:ZL,useState:function(){return Db(Mx)},useDebugValue:G5,useDeferredValue:function(t){var s=co();return Tn===null?s.memoizedState=t:nD(s,Tn.memoizedState,t)},useTransition:function(){var t=Db(Mx)[0],s=co().memoizedState;return[t,s]},useMutableSource:VL,useSyncExternalStore:HL,useId:aD,unstable_isNewReconciler:!1};function Co(t,s){if(t&&t.defaultProps){s=Hr({},s),t=t.defaultProps;for(var r in t)s[r]===void 0&&(s[r]=t[r]);return s}return s}function PN(t,s,r,n){s=t.memoizedState,r=r(n,s),r=r==null?s:Hr({},s,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var T1={isMounted:function(t){return(t=t._reactInternals)?ym(t)===t:!1},enqueueSetState:function(t,s,r){t=t._reactInternals;var n=La(),a=Ad(t),i=fc(n,a);i.payload=s,r!=null&&(i.callback=r),s=Cd(t,i,a),s!==null&&(Fo(s,t,a,n),ky(s,t,a))},enqueueReplaceState:function(t,s,r){t=t._reactInternals;var n=La(),a=Ad(t),i=fc(n,a);i.tag=1,i.payload=s,r!=null&&(i.callback=r),s=Cd(t,i,a),s!==null&&(Fo(s,t,a,n),ky(s,t,a))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var r=La(),n=Ad(t),a=fc(r,n);a.tag=2,s!=null&&(a.callback=s),s=Cd(t,a,n),s!==null&&(Fo(s,t,n,r),ky(s,t,n))}};function tC(t,s,r,n,a,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,o):s.prototype&&s.prototype.isPureReactComponent?!Sx(r,n)||!Sx(a,i):!0}function cD(t,s,r){var n=!1,a=Rd,i=s.contextType;return typeof i=="object"&&i!==null?i=lo(i):(a=ei(s)?em:ga.current,n=s.contextTypes,i=(n=n!=null)?Xh(t,a):Rd),s=new s(r,i),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=T1,t.stateNode=s,s._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=i),s}function sC(t,s,r,n){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(r,n),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(r,n),s.state!==t&&T1.enqueueReplaceState(s,s.state,null)}function EN(t,s,r,n){var a=t.stateNode;a.props=r,a.state=t.memoizedState,a.refs={},U5(t);var i=s.contextType;typeof i=="object"&&i!==null?a.context=lo(i):(i=ei(s)?em:ga.current,a.context=Xh(t,i)),a.state=t.memoizedState,i=s.getDerivedStateFromProps,typeof i=="function"&&(PN(t,s,i,r),a.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(s=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),s!==a.state&&T1.enqueueReplaceState(a,a.state,null),g0(t,r,a,n),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308)}function sf(t,s){try{var r="",n=s;do r+=hH(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:s,stack:a,digest:null}}function Ib(t,s,r){return{value:t,source:null,stack:r??null,digest:s??null}}function TN(t,s){try{console.error(s.value)}catch(r){setTimeout(function(){throw r})}}var BW=typeof WeakMap=="function"?WeakMap:Map;function dD(t,s,r){r=fc(-1,r),r.tag=3,r.payload={element:null};var n=s.value;return r.callback=function(){N0||(N0=!0,UN=n),TN(t,s)},r}function uD(t,s,r){r=fc(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var a=s.value;r.payload=function(){return n(a)},r.callback=function(){TN(t,s)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){TN(t,s),typeof n!="function"&&(kd===null?kd=new Set([this]):kd.add(this));var o=s.stack;this.componentDidCatch(s.value,{componentStack:o!==null?o:""})}),r}function rC(t,s,r){var n=t.pingCache;if(n===null){n=t.pingCache=new BW;var a=new Set;n.set(s,a)}else a=n.get(s),a===void 0&&(a=new Set,n.set(s,a));a.has(r)||(a.add(r),t=eK.bind(null,t,s,r),s.then(t,t))}function nC(t){do{var s;if((s=t.tag===13)&&(s=t.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return t;t=t.return}while(t!==null);return null}function aC(t,s,r,n,a){return t.mode&1?(t.flags|=65536,t.lanes=a,t):(t===s?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(s=fc(-1,1),s.tag=2,Cd(r,s,1))),r.lanes|=1),t)}var UW=_c.ReactCurrentOwner,Qa=!1;function Pa(t,s,r,n){s.child=t===null?BL(s,null,r,n):ef(s,t.child,r,n)}function iC(t,s,r,n,a){r=r.render;var i=s.ref;return bh(s,a),n=W5(t,s,r,n,i,a),r=K5(),t!==null&&!Qa?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~a,yc(t,s,a)):(Rr&&r&&D5(s),s.flags|=1,Pa(t,s,n,a),s.child)}function oC(t,s,r,n,a){if(t===null){var i=r.type;return typeof i=="function"&&!r_(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(s.tag=15,s.type=i,mD(t,s,i,n,a)):(t=Ly(r.type,null,n,s,s.mode,a),t.ref=s.ref,t.return=s,s.child=t)}if(i=t.child,!(t.lanes&a)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:Sx,r(o,n)&&t.ref===s.ref)return yc(t,s,a)}return s.flags|=1,t=Pd(i,n),t.ref=s.ref,t.return=s,s.child=t}function mD(t,s,r,n,a){if(t!==null){var i=t.memoizedProps;if(Sx(i,n)&&t.ref===s.ref)if(Qa=!1,s.pendingProps=n=i,(t.lanes&a)!==0)t.flags&131072&&(Qa=!0);else return s.lanes=t.lanes,yc(t,s,a)}return MN(t,s,r,n,a)}function hD(t,s,r){var n=s.pendingProps,a=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},_r(hh,gi),gi|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:t,cachePool:null,transitions:null},s.updateQueue=null,_r(hh,gi),gi|=t,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,_r(hh,gi),gi|=n}else i!==null?(n=i.baseLanes|r,s.memoizedState=null):n=r,_r(hh,gi),gi|=n;return Pa(t,s,a,r),s.child}function fD(t,s){var r=s.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(s.flags|=512,s.flags|=2097152)}function MN(t,s,r,n,a){var i=ei(r)?em:ga.current;return i=Xh(s,i),bh(s,a),r=W5(t,s,r,n,i,a),n=K5(),t!==null&&!Qa?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~a,yc(t,s,a)):(Rr&&n&&D5(s),s.flags|=1,Pa(t,s,r,a),s.child)}function lC(t,s,r,n,a){if(ei(r)){var i=!0;m0(s)}else i=!1;if(bh(s,a),s.stateNode===null)Ey(t,s),cD(s,r,n),EN(s,r,n,a),n=!0;else if(t===null){var o=s.stateNode,l=s.memoizedProps;o.props=l;var c=o.context,d=r.contextType;typeof d=="object"&&d!==null?d=lo(d):(d=ei(r)?em:ga.current,d=Xh(s,d));var u=r.getDerivedStateFromProps,m=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==d)&&sC(s,o,n,d),rd=!1;var f=s.memoizedState;o.state=f,g0(s,n,o,a),c=s.memoizedState,l!==n||f!==c||Ja.current||rd?(typeof u=="function"&&(PN(s,r,u,n),c=s.memoizedState),(l=rd||tC(s,r,l,n,f,c,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(s.flags|=4194308)):(typeof o.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=n,s.memoizedState=c),o.props=n,o.state=c,o.context=d,n=l):(typeof o.componentDidMount=="function"&&(s.flags|=4194308),n=!1)}else{o=s.stateNode,zL(t,s),l=s.memoizedProps,d=s.type===s.elementType?l:Co(s.type,l),o.props=d,m=s.pendingProps,f=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=lo(c):(c=ei(r)?em:ga.current,c=Xh(s,c));var h=r.getDerivedStateFromProps;(u=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||f!==c)&&sC(s,o,n,c),rd=!1,f=s.memoizedState,o.state=f,g0(s,n,o,a);var p=s.memoizedState;l!==m||f!==p||Ja.current||rd?(typeof h=="function"&&(PN(s,r,h,n),p=s.memoizedState),(d=rd||tC(s,r,d,n,f,p,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,p,c)),typeof o.componentDidUpdate=="function"&&(s.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(s.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(s.flags|=1024),s.memoizedProps=n,s.memoizedState=p),o.props=n,o.state=p,o.context=c,n=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(s.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(s.flags|=1024),n=!1)}return LN(t,s,r,n,i,a)}function LN(t,s,r,n,a,i){fD(t,s);var o=(s.flags&128)!==0;if(!n&&!o)return a&&K3(s,r,!1),yc(t,s,i);n=s.stateNode,UW.current=s;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return s.flags|=1,t!==null&&o?(s.child=ef(s,t.child,null,i),s.child=ef(s,null,l,i)):Pa(t,s,l,i),s.memoizedState=n.state,a&&K3(s,r,!0),s.child}function pD(t){var s=t.stateNode;s.pendingContext?W3(t,s.pendingContext,s.pendingContext!==s.context):s.context&&W3(t,s.context,!1),z5(t,s.containerInfo)}function cC(t,s,r,n,a){return Jh(),R5(a),s.flags|=256,Pa(t,s,r,n),s.child}var DN={dehydrated:null,treeContext:null,retryLane:0};function IN(t){return{baseLanes:t,cachePool:null,transitions:null}}function xD(t,s,r){var n=s.pendingProps,a=qr.current,i=!1,o=(s.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(a&2)!==0),l?(i=!0,s.flags&=-129):(t===null||t.memoizedState!==null)&&(a|=1),_r(qr,a&1),t===null)return kN(s),t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(s.mode&1?t.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(o=n.children,t=n.fallback,i?(n=s.mode,i=s.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=D1(o,n,0,null),t=Qu(t,n,r,null),i.return=s,t.return=s,i.sibling=t,s.child=i,s.child.memoizedState=IN(r),s.memoizedState=DN,t):Q5(s,o));if(a=t.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return zW(t,s,o,n,l,a,r);if(i){i=n.fallback,o=s.mode,a=t.child,l=a.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&s.child!==a?(n=s.child,n.childLanes=0,n.pendingProps=c,s.deletions=null):(n=Pd(a,c),n.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=Pd(l,i):(i=Qu(i,o,r,null),i.flags|=2),i.return=s,n.return=s,n.sibling=i,s.child=n,n=i,i=s.child,o=t.child.memoizedState,o=o===null?IN(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~r,s.memoizedState=DN,n}return i=t.child,t=i.sibling,n=Pd(i,{mode:"visible",children:n.children}),!(s.mode&1)&&(n.lanes=r),n.return=s,n.sibling=null,t!==null&&(r=s.deletions,r===null?(s.deletions=[t],s.flags|=16):r.push(t)),s.child=n,s.memoizedState=null,n}function Q5(t,s){return s=D1({mode:"visible",children:s},t.mode,0,null),s.return=t,t.child=s}function qv(t,s,r,n){return n!==null&&R5(n),ef(s,t.child,null,r),t=Q5(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function zW(t,s,r,n,a,i,o){if(r)return s.flags&256?(s.flags&=-257,n=Ib(Error(ft(422))),qv(t,s,o,n)):s.memoizedState!==null?(s.child=t.child,s.flags|=128,null):(i=n.fallback,a=s.mode,n=D1({mode:"visible",children:n.children},a,0,null),i=Qu(i,a,o,null),i.flags|=2,n.return=s,i.return=s,n.sibling=i,s.child=n,s.mode&1&&ef(s,t.child,null,o),s.child.memoizedState=IN(o),s.memoizedState=DN,i);if(!(s.mode&1))return qv(t,s,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(ft(419)),n=Ib(i,n,void 0),qv(t,s,o,n)}if(l=(o&t.childLanes)!==0,Qa||l){if(n=Bn,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,vc(t,a),Fo(n,t,a,-1))}return s_(),n=Ib(Error(ft(421))),qv(t,s,o,n)}return a.data==="$?"?(s.flags|=128,s.child=t.child,s=tK.bind(null,t),a._reactRetry=s,null):(t=i.treeContext,wi=Sd(a.nextSibling),Ai=s,Rr=!0,Po=null,t!==null&&(Xi[Ji++]=mc,Xi[Ji++]=hc,Xi[Ji++]=tm,mc=t.id,hc=t.overflow,tm=s),s=Q5(s,n.children),s.flags|=4096,s)}function dC(t,s,r){t.lanes|=s;var n=t.alternate;n!==null&&(n.lanes|=s),AN(t.return,s,r)}function Rb(t,s,r,n,a){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=s,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function gD(t,s,r){var n=s.pendingProps,a=n.revealOrder,i=n.tail;if(Pa(t,s,n.children,r),n=qr.current,n&2)n=n&1|2,s.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&dC(t,r,s);else if(t.tag===19)dC(t,r,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(_r(qr,n),!(s.mode&1))s.memoizedState=null;else switch(a){case"forwards":for(r=s.child,a=null;r!==null;)t=r.alternate,t!==null&&v0(t)===null&&(a=r),r=r.sibling;r=a,r===null?(a=s.child,s.child=null):(a=r.sibling,r.sibling=null),Rb(s,!1,a,r,i);break;case"backwards":for(r=null,a=s.child,s.child=null;a!==null;){if(t=a.alternate,t!==null&&v0(t)===null){s.child=a;break}t=a.sibling,a.sibling=r,r=a,a=t}Rb(s,!0,r,null,i);break;case"together":Rb(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Ey(t,s){!(s.mode&1)&&t!==null&&(t.alternate=null,s.alternate=null,s.flags|=2)}function yc(t,s,r){if(t!==null&&(s.dependencies=t.dependencies),rm|=s.lanes,!(r&s.childLanes))return null;if(t!==null&&s.child!==t.child)throw Error(ft(153));if(s.child!==null){for(t=s.child,r=Pd(t,t.pendingProps),s.child=r,r.return=s;t.sibling!==null;)t=t.sibling,r=r.sibling=Pd(t,t.pendingProps),r.return=s;r.sibling=null}return s.child}function qW(t,s,r){switch(s.tag){case 3:pD(s),Jh();break;case 5:qL(s);break;case 1:ei(s.type)&&m0(s);break;case 4:z5(s,s.stateNode.containerInfo);break;case 10:var n=s.type._context,a=s.memoizedProps.value;_r(p0,n._currentValue),n._currentValue=a;break;case 13:if(n=s.memoizedState,n!==null)return n.dehydrated!==null?(_r(qr,qr.current&1),s.flags|=128,null):r&s.child.childLanes?xD(t,s,r):(_r(qr,qr.current&1),t=yc(t,s,r),t!==null?t.sibling:null);_r(qr,qr.current&1);break;case 19:if(n=(r&s.childLanes)!==0,t.flags&128){if(n)return gD(t,s,r);s.flags|=128}if(a=s.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),_r(qr,qr.current),n)break;return null;case 22:case 23:return s.lanes=0,hD(t,s,r)}return yc(t,s,r)}var vD,RN,yD,jD;vD=function(t,s){for(var r=s.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};RN=function(){};yD=function(t,s,r,n){var a=t.memoizedProps;if(a!==n){t=s.stateNode,Fu(Nl.current);var i=null;switch(r){case"input":a=nN(t,a),n=nN(t,n),i=[];break;case"select":a=Hr({},a,{value:void 0}),n=Hr({},n,{value:void 0}),i=[];break;case"textarea":a=oN(t,a),n=oN(t,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=d0)}cN(r,n);var o;r=null;for(d in a)if(!n.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var l=a[d];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(vx.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in n){var c=n[d];if(l=a!=null?a[d]:void 0,n.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(vx.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Ar("scroll",t),i||l===c||(i=[])):(i=i||[]).push(d,c))}r&&(i=i||[]).push("style",r);var d=i;(s.updateQueue=d)&&(s.flags|=4)}};jD=function(t,s,r,n){r!==n&&(s.flags|=4)};function Ap(t,s){if(!Rr)switch(t.tailMode){case"hidden":s=t.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function la(t){var s=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(s)for(var a=t.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=n,t.childLanes=r,s}function VW(t,s,r){var n=s.pendingProps;switch(I5(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return la(s),null;case 1:return ei(s.type)&&u0(),la(s),null;case 3:return n=s.stateNode,tf(),Tr(Ja),Tr(ga),V5(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Uv(s)?s.flags|=4:t===null||t.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,Po!==null&&(VN(Po),Po=null))),RN(t,s),la(s),null;case 5:q5(s);var a=Fu(Ex.current);if(r=s.type,t!==null&&s.stateNode!=null)yD(t,s,r,n,a),t.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!n){if(s.stateNode===null)throw Error(ft(166));return la(s),null}if(t=Fu(Nl.current),Uv(s)){n=s.stateNode,r=s.type;var i=s.memoizedProps;switch(n[pl]=s,n[Ax]=i,t=(s.mode&1)!==0,r){case"dialog":Ar("cancel",n),Ar("close",n);break;case"iframe":case"object":case"embed":Ar("load",n);break;case"video":case"audio":for(a=0;a<Wp.length;a++)Ar(Wp[a],n);break;case"source":Ar("error",n);break;case"img":case"image":case"link":Ar("error",n),Ar("load",n);break;case"details":Ar("toggle",n);break;case"input":y3(n,i),Ar("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Ar("invalid",n);break;case"textarea":b3(n,i),Ar("invalid",n)}cN(r,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&Bv(n.textContent,l,t),a=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Bv(n.textContent,l,t),a=["children",""+l]):vx.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ar("scroll",n)}switch(r){case"input":Mv(n),j3(n,i,!0);break;case"textarea":Mv(n),N3(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=d0)}n=a,s.updateQueue=n,n!==null&&(s.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=YM(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[pl]=s,t[Ax]=n,vD(t,s,!1,!1),s.stateNode=t;e:{switch(o=dN(r,n),r){case"dialog":Ar("cancel",t),Ar("close",t),a=n;break;case"iframe":case"object":case"embed":Ar("load",t),a=n;break;case"video":case"audio":for(a=0;a<Wp.length;a++)Ar(Wp[a],t);a=n;break;case"source":Ar("error",t),a=n;break;case"img":case"image":case"link":Ar("error",t),Ar("load",t),a=n;break;case"details":Ar("toggle",t),a=n;break;case"input":y3(t,n),a=nN(t,n),Ar("invalid",t);break;case"option":a=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},a=Hr({},n,{value:void 0}),Ar("invalid",t);break;case"textarea":b3(t,n),a=oN(t,n),Ar("invalid",t);break;default:a=n}cN(r,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?ZM(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&GM(t,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&yx(t,c):typeof c=="number"&&yx(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(vx.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Ar("scroll",t):c!=null&&j5(t,i,c,o))}switch(r){case"input":Mv(t),j3(t,n,!1);break;case"textarea":Mv(t),N3(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Id(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?gh(t,!!n.multiple,i,!1):n.defaultValue!=null&&gh(t,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(t.onclick=d0)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return la(s),null;case 6:if(t&&s.stateNode!=null)jD(t,s,t.memoizedProps,n);else{if(typeof n!="string"&&s.stateNode===null)throw Error(ft(166));if(r=Fu(Ex.current),Fu(Nl.current),Uv(s)){if(n=s.stateNode,r=s.memoizedProps,n[pl]=s,(i=n.nodeValue!==r)&&(t=Ai,t!==null))switch(t.tag){case 3:Bv(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Bv(n.nodeValue,r,(t.mode&1)!==0)}i&&(s.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[pl]=s,s.stateNode=n}return la(s),null;case 13:if(Tr(qr),n=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Rr&&wi!==null&&s.mode&1&&!(s.flags&128))OL(),Jh(),s.flags|=98560,i=!1;else if(i=Uv(s),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(ft(318));if(i=s.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ft(317));i[pl]=s}else Jh(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;la(s),i=!1}else Po!==null&&(VN(Po),Po=null),i=!0;if(!i)return s.flags&65536?s:null}return s.flags&128?(s.lanes=r,s):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(s.child.flags|=8192,s.mode&1&&(t===null||qr.current&1?Ln===0&&(Ln=3):s_())),s.updateQueue!==null&&(s.flags|=4),la(s),null);case 4:return tf(),RN(t,s),t===null&&Cx(s.stateNode.containerInfo),la(s),null;case 10:return $5(s.type._context),la(s),null;case 17:return ei(s.type)&&u0(),la(s),null;case 19:if(Tr(qr),i=s.memoizedState,i===null)return la(s),null;if(n=(s.flags&128)!==0,o=i.rendering,o===null)if(n)Ap(i,!1);else{if(Ln!==0||t!==null&&t.flags&128)for(t=s.child;t!==null;){if(o=v0(t),o!==null){for(s.flags|=128,Ap(i,!1),n=o.updateQueue,n!==null&&(s.updateQueue=n,s.flags|=4),s.subtreeFlags=0,n=r,r=s.child;r!==null;)i=r,t=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return _r(qr,qr.current&1|2),s.child}t=t.sibling}i.tail!==null&&un()>rf&&(s.flags|=128,n=!0,Ap(i,!1),s.lanes=4194304)}else{if(!n)if(t=v0(o),t!==null){if(s.flags|=128,n=!0,r=t.updateQueue,r!==null&&(s.updateQueue=r,s.flags|=4),Ap(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Rr)return la(s),null}else 2*un()-i.renderingStartTime>rf&&r!==1073741824&&(s.flags|=128,n=!0,Ap(i,!1),s.lanes=4194304);i.isBackwards?(o.sibling=s.child,s.child=o):(r=i.last,r!==null?r.sibling=o:s.child=o,i.last=o)}return i.tail!==null?(s=i.tail,i.rendering=s,i.tail=s.sibling,i.renderingStartTime=un(),s.sibling=null,r=qr.current,_r(qr,n?r&1|2:r&1),s):(la(s),null);case 22:case 23:return t_(),n=s.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(s.flags|=8192),n&&s.mode&1?gi&1073741824&&(la(s),s.subtreeFlags&6&&(s.flags|=8192)):la(s),null;case 24:return null;case 25:return null}throw Error(ft(156,s.tag))}function HW(t,s){switch(I5(s),s.tag){case 1:return ei(s.type)&&u0(),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return tf(),Tr(Ja),Tr(ga),V5(),t=s.flags,t&65536&&!(t&128)?(s.flags=t&-65537|128,s):null;case 5:return q5(s),null;case 13:if(Tr(qr),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(ft(340));Jh()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return Tr(qr),null;case 4:return tf(),null;case 10:return $5(s.type._context),null;case 22:case 23:return t_(),null;case 24:return null;default:return null}}var Vv=!1,fa=!1,WW=typeof WeakSet=="function"?WeakSet:Set,Ot=null;function mh(t,s){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Jr(t,s,n)}else r.current=null}function FN(t,s,r){try{r()}catch(n){Jr(t,s,n)}}var uC=!1;function KW(t,s){if(jN=o0,t=SL(),L5(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,d=0,u=0,m=t,f=null;t:for(;;){for(var h;m!==r||a!==0&&m.nodeType!==3||(l=o+a),m!==i||n!==0&&m.nodeType!==3||(c=o+n),m.nodeType===3&&(o+=m.nodeValue.length),(h=m.firstChild)!==null;)f=m,m=h;for(;;){if(m===t)break t;if(f===r&&++d===a&&(l=o),f===i&&++u===n&&(c=o),(h=m.nextSibling)!==null)break;m=f,f=m.parentNode}m=h}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(bN={focusedElem:t,selectionRange:r},o0=!1,Ot=s;Ot!==null;)if(s=Ot,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,Ot=t;else for(;Ot!==null;){s=Ot;try{var p=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,y=p.memoizedState,v=s.stateNode,j=v.getSnapshotBeforeUpdate(s.elementType===s.type?g:Co(s.type,g),y);v.__reactInternalSnapshotBeforeUpdate=j}break;case 3:var w=s.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ft(163))}}catch(_){Jr(s,s.return,_)}if(t=s.sibling,t!==null){t.return=s.return,Ot=t;break}Ot=s.return}return p=uC,uC=!1,p}function nx(t,s,r){var n=s.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&t)===t){var i=a.destroy;a.destroy=void 0,i!==void 0&&FN(s,r,i)}a=a.next}while(a!==n)}}function M1(t,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==s)}}function ON(t){var s=t.ref;if(s!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof s=="function"?s(t):s.current=t}}function bD(t){var s=t.alternate;s!==null&&(t.alternate=null,bD(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&(delete s[pl],delete s[Ax],delete s[_N],delete s[PW],delete s[EW])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ND(t){return t.tag===5||t.tag===3||t.tag===4}function mC(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ND(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function $N(t,s,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,s?r.nodeType===8?r.parentNode.insertBefore(t,s):r.insertBefore(t,s):(r.nodeType===8?(s=r.parentNode,s.insertBefore(t,r)):(s=r,s.appendChild(t)),r=r._reactRootContainer,r!=null||s.onclick!==null||(s.onclick=d0));else if(n!==4&&(t=t.child,t!==null))for($N(t,s,r),t=t.sibling;t!==null;)$N(t,s,r),t=t.sibling}function BN(t,s,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,s?r.insertBefore(t,s):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(BN(t,s,r),t=t.sibling;t!==null;)BN(t,s,r),t=t.sibling}var Qn=null,Ao=!1;function Wc(t,s,r){for(r=r.child;r!==null;)wD(t,s,r),r=r.sibling}function wD(t,s,r){if(bl&&typeof bl.onCommitFiberUnmount=="function")try{bl.onCommitFiberUnmount(_1,r)}catch{}switch(r.tag){case 5:fa||mh(r,s);case 6:var n=Qn,a=Ao;Qn=null,Wc(t,s,r),Qn=n,Ao=a,Qn!==null&&(Ao?(t=Qn,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Qn.removeChild(r.stateNode));break;case 18:Qn!==null&&(Ao?(t=Qn,r=r.stateNode,t.nodeType===8?Pb(t.parentNode,r):t.nodeType===1&&Pb(t,r),wx(t)):Pb(Qn,r.stateNode));break;case 4:n=Qn,a=Ao,Qn=r.stateNode.containerInfo,Ao=!0,Wc(t,s,r),Qn=n,Ao=a;break;case 0:case 11:case 14:case 15:if(!fa&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&FN(r,s,o),a=a.next}while(a!==n)}Wc(t,s,r);break;case 1:if(!fa&&(mh(r,s),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){Jr(r,s,l)}Wc(t,s,r);break;case 21:Wc(t,s,r);break;case 22:r.mode&1?(fa=(n=fa)||r.memoizedState!==null,Wc(t,s,r),fa=n):Wc(t,s,r);break;default:Wc(t,s,r)}}function hC(t){var s=t.updateQueue;if(s!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new WW),s.forEach(function(n){var a=sK.bind(null,t,n);r.has(n)||(r.add(n),n.then(a,a))})}}function wo(t,s){var r=s.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=t,o=s,l=o;e:for(;l!==null;){switch(l.tag){case 5:Qn=l.stateNode,Ao=!1;break e;case 3:Qn=l.stateNode.containerInfo,Ao=!0;break e;case 4:Qn=l.stateNode.containerInfo,Ao=!0;break e}l=l.return}if(Qn===null)throw Error(ft(160));wD(i,o,a),Qn=null,Ao=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){Jr(a,s,d)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)_D(s,t),s=s.sibling}function _D(t,s){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(wo(s,t),il(t),n&4){try{nx(3,t,t.return),M1(3,t)}catch(g){Jr(t,t.return,g)}try{nx(5,t,t.return)}catch(g){Jr(t,t.return,g)}}break;case 1:wo(s,t),il(t),n&512&&r!==null&&mh(r,r.return);break;case 5:if(wo(s,t),il(t),n&512&&r!==null&&mh(r,r.return),t.flags&32){var a=t.stateNode;try{yx(a,"")}catch(g){Jr(t,t.return,g)}}if(n&4&&(a=t.stateNode,a!=null)){var i=t.memoizedProps,o=r!==null?r.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&WM(a,i),dN(l,o);var d=dN(l,i);for(o=0;o<c.length;o+=2){var u=c[o],m=c[o+1];u==="style"?ZM(a,m):u==="dangerouslySetInnerHTML"?GM(a,m):u==="children"?yx(a,m):j5(a,u,m,d)}switch(l){case"input":aN(a,i);break;case"textarea":KM(a,i);break;case"select":var f=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var h=i.value;h!=null?gh(a,!!i.multiple,h,!1):f!==!!i.multiple&&(i.defaultValue!=null?gh(a,!!i.multiple,i.defaultValue,!0):gh(a,!!i.multiple,i.multiple?[]:"",!1))}a[Ax]=i}catch(g){Jr(t,t.return,g)}}break;case 6:if(wo(s,t),il(t),n&4){if(t.stateNode===null)throw Error(ft(162));a=t.stateNode,i=t.memoizedProps;try{a.nodeValue=i}catch(g){Jr(t,t.return,g)}}break;case 3:if(wo(s,t),il(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{wx(s.containerInfo)}catch(g){Jr(t,t.return,g)}break;case 4:wo(s,t),il(t);break;case 13:wo(s,t),il(t),a=t.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(J5=un())),n&4&&hC(t);break;case 22:if(u=r!==null&&r.memoizedState!==null,t.mode&1?(fa=(d=fa)||u,wo(s,t),fa=d):wo(s,t),il(t),n&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!u&&t.mode&1)for(Ot=t,u=t.child;u!==null;){for(m=Ot=u;Ot!==null;){switch(f=Ot,h=f.child,f.tag){case 0:case 11:case 14:case 15:nx(4,f,f.return);break;case 1:mh(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){n=f,r=f.return;try{s=n,p.props=s.memoizedProps,p.state=s.memoizedState,p.componentWillUnmount()}catch(g){Jr(n,r,g)}}break;case 5:mh(f,f.return);break;case 22:if(f.memoizedState!==null){pC(m);continue}}h!==null?(h.return=f,Ot=h):pC(m)}u=u.sibling}e:for(u=null,m=t;;){if(m.tag===5){if(u===null){u=m;try{a=m.stateNode,d?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,c=m.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=QM("display",o))}catch(g){Jr(t,t.return,g)}}}else if(m.tag===6){if(u===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(g){Jr(t,t.return,g)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;u===m&&(u=null),m=m.return}u===m&&(u=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:wo(s,t),il(t),n&4&&hC(t);break;case 21:break;default:wo(s,t),il(t)}}function il(t){var s=t.flags;if(s&2){try{e:{for(var r=t.return;r!==null;){if(ND(r)){var n=r;break e}r=r.return}throw Error(ft(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(yx(a,""),n.flags&=-33);var i=mC(t);BN(t,i,a);break;case 3:case 4:var o=n.stateNode.containerInfo,l=mC(t);$N(t,l,o);break;default:throw Error(ft(161))}}catch(c){Jr(t,t.return,c)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function YW(t,s,r){Ot=t,SD(t)}function SD(t,s,r){for(var n=(t.mode&1)!==0;Ot!==null;){var a=Ot,i=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||Vv;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||fa;l=Vv;var d=fa;if(Vv=o,(fa=c)&&!d)for(Ot=a;Ot!==null;)o=Ot,c=o.child,o.tag===22&&o.memoizedState!==null?xC(a):c!==null?(c.return=o,Ot=c):xC(a);for(;i!==null;)Ot=i,SD(i),i=i.sibling;Ot=a,Vv=l,fa=d}fC(t)}else a.subtreeFlags&8772&&i!==null?(i.return=a,Ot=i):fC(t)}}function fC(t){for(;Ot!==null;){var s=Ot;if(s.flags&8772){var r=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:fa||M1(5,s);break;case 1:var n=s.stateNode;if(s.flags&4&&!fa)if(r===null)n.componentDidMount();else{var a=s.elementType===s.type?r.memoizedProps:Co(s.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=s.updateQueue;i!==null&&X3(s,i,n);break;case 3:var o=s.updateQueue;if(o!==null){if(r=null,s.child!==null)switch(s.child.tag){case 5:r=s.child.stateNode;break;case 1:r=s.child.stateNode}X3(s,o,r)}break;case 5:var l=s.stateNode;if(r===null&&s.flags&4){r=l;var c=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var d=s.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var m=u.dehydrated;m!==null&&wx(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ft(163))}fa||s.flags&512&&ON(s)}catch(f){Jr(s,s.return,f)}}if(s===t){Ot=null;break}if(r=s.sibling,r!==null){r.return=s.return,Ot=r;break}Ot=s.return}}function pC(t){for(;Ot!==null;){var s=Ot;if(s===t){Ot=null;break}var r=s.sibling;if(r!==null){r.return=s.return,Ot=r;break}Ot=s.return}}function xC(t){for(;Ot!==null;){var s=Ot;try{switch(s.tag){case 0:case 11:case 15:var r=s.return;try{M1(4,s)}catch(c){Jr(s,r,c)}break;case 1:var n=s.stateNode;if(typeof n.componentDidMount=="function"){var a=s.return;try{n.componentDidMount()}catch(c){Jr(s,a,c)}}var i=s.return;try{ON(s)}catch(c){Jr(s,i,c)}break;case 5:var o=s.return;try{ON(s)}catch(c){Jr(s,o,c)}}}catch(c){Jr(s,s.return,c)}if(s===t){Ot=null;break}var l=s.sibling;if(l!==null){l.return=s.return,Ot=l;break}Ot=s.return}}var GW=Math.ceil,b0=_c.ReactCurrentDispatcher,Z5=_c.ReactCurrentOwner,no=_c.ReactCurrentBatchConfig,Xs=0,Bn=null,wn=null,Jn=0,gi=0,hh=Xd(0),Ln=0,Dx=null,rm=0,L1=0,X5=0,ax=null,Ya=null,J5=0,rf=1/0,ic=null,N0=!1,UN=null,kd=null,Hv=!1,vd=null,w0=0,ix=0,zN=null,Ty=-1,My=0;function La(){return Xs&6?un():Ty!==-1?Ty:Ty=un()}function Ad(t){return t.mode&1?Xs&2&&Jn!==0?Jn&-Jn:MW.transition!==null?(My===0&&(My=cL()),My):(t=hr,t!==0||(t=window.event,t=t===void 0?16:xL(t.type)),t):1}function Fo(t,s,r,n){if(50<ix)throw ix=0,zN=null,Error(ft(185));Ng(t,r,n),(!(Xs&2)||t!==Bn)&&(t===Bn&&(!(Xs&2)&&(L1|=r),Ln===4&&ad(t,Jn)),ti(t,n),r===1&&Xs===0&&!(s.mode&1)&&(rf=un()+500,P1&&Jd()))}function ti(t,s){var r=t.callbackNode;MH(t,s);var n=i0(t,t===Bn?Jn:0);if(n===0)r!==null&&S3(r),t.callbackNode=null,t.callbackPriority=0;else if(s=n&-n,t.callbackPriority!==s){if(r!=null&&S3(r),s===1)t.tag===0?TW(gC.bind(null,t)):IL(gC.bind(null,t)),kW(function(){!(Xs&6)&&Jd()}),r=null;else{switch(dL(n)){case 1:r=S5;break;case 4:r=oL;break;case 16:r=a0;break;case 536870912:r=lL;break;default:r=a0}r=LD(r,CD.bind(null,t))}t.callbackPriority=s,t.callbackNode=r}}function CD(t,s){if(Ty=-1,My=0,Xs&6)throw Error(ft(327));var r=t.callbackNode;if(Nh()&&t.callbackNode!==r)return null;var n=i0(t,t===Bn?Jn:0);if(n===0)return null;if(n&30||n&t.expiredLanes||s)s=_0(t,n);else{s=n;var a=Xs;Xs|=2;var i=AD();(Bn!==t||Jn!==s)&&(ic=null,rf=un()+500,Gu(t,s));do try{XW();break}catch(l){kD(t,l)}while(!0);O5(),b0.current=i,Xs=a,wn!==null?s=0:(Bn=null,Jn=0,s=Ln)}if(s!==0){if(s===2&&(a=pN(t),a!==0&&(n=a,s=qN(t,a))),s===1)throw r=Dx,Gu(t,0),ad(t,n),ti(t,un()),r;if(s===6)ad(t,n);else{if(a=t.current.alternate,!(n&30)&&!QW(a)&&(s=_0(t,n),s===2&&(i=pN(t),i!==0&&(n=i,s=qN(t,i))),s===1))throw r=Dx,Gu(t,0),ad(t,n),ti(t,un()),r;switch(t.finishedWork=a,t.finishedLanes=n,s){case 0:case 1:throw Error(ft(345));case 2:Eu(t,Ya,ic);break;case 3:if(ad(t,n),(n&130023424)===n&&(s=J5+500-un(),10<s)){if(i0(t,0)!==0)break;if(a=t.suspendedLanes,(a&n)!==n){La(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=wN(Eu.bind(null,t,Ya,ic),s);break}Eu(t,Ya,ic);break;case 4:if(ad(t,n),(n&4194240)===n)break;for(s=t.eventTimes,a=-1;0<n;){var o=31-Ro(n);i=1<<o,o=s[o],o>a&&(a=o),n&=~i}if(n=a,n=un()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*GW(n/1960))-n,10<n){t.timeoutHandle=wN(Eu.bind(null,t,Ya,ic),n);break}Eu(t,Ya,ic);break;case 5:Eu(t,Ya,ic);break;default:throw Error(ft(329))}}}return ti(t,un()),t.callbackNode===r?CD.bind(null,t):null}function qN(t,s){var r=ax;return t.current.memoizedState.isDehydrated&&(Gu(t,s).flags|=256),t=_0(t,s),t!==2&&(s=Ya,Ya=r,s!==null&&VN(s)),t}function VN(t){Ya===null?Ya=t:Ya.push.apply(Ya,t)}function QW(t){for(var s=t;;){if(s.flags&16384){var r=s.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!Bo(i(),a))return!1}catch{return!1}}}if(r=s.child,s.subtreeFlags&16384&&r!==null)r.return=s,s=r;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ad(t,s){for(s&=~X5,s&=~L1,t.suspendedLanes|=s,t.pingedLanes&=~s,t=t.expirationTimes;0<s;){var r=31-Ro(s),n=1<<r;t[r]=-1,s&=~n}}function gC(t){if(Xs&6)throw Error(ft(327));Nh();var s=i0(t,0);if(!(s&1))return ti(t,un()),null;var r=_0(t,s);if(t.tag!==0&&r===2){var n=pN(t);n!==0&&(s=n,r=qN(t,n))}if(r===1)throw r=Dx,Gu(t,0),ad(t,s),ti(t,un()),r;if(r===6)throw Error(ft(345));return t.finishedWork=t.current.alternate,t.finishedLanes=s,Eu(t,Ya,ic),ti(t,un()),null}function e_(t,s){var r=Xs;Xs|=1;try{return t(s)}finally{Xs=r,Xs===0&&(rf=un()+500,P1&&Jd())}}function nm(t){vd!==null&&vd.tag===0&&!(Xs&6)&&Nh();var s=Xs;Xs|=1;var r=no.transition,n=hr;try{if(no.transition=null,hr=1,t)return t()}finally{hr=n,no.transition=r,Xs=s,!(Xs&6)&&Jd()}}function t_(){gi=hh.current,Tr(hh)}function Gu(t,s){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,CW(r)),wn!==null)for(r=wn.return;r!==null;){var n=r;switch(I5(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&u0();break;case 3:tf(),Tr(Ja),Tr(ga),V5();break;case 5:q5(n);break;case 4:tf();break;case 13:Tr(qr);break;case 19:Tr(qr);break;case 10:$5(n.type._context);break;case 22:case 23:t_()}r=r.return}if(Bn=t,wn=t=Pd(t.current,null),Jn=gi=s,Ln=0,Dx=null,X5=L1=rm=0,Ya=ax=null,Ru!==null){for(s=0;s<Ru.length;s++)if(r=Ru[s],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=a,n.next=o}r.pending=n}Ru=null}return t}function kD(t,s){do{var r=wn;try{if(O5(),Ay.current=j0,y0){for(var n=Vr.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}y0=!1}if(sm=0,Fn=Tn=Vr=null,rx=!1,Tx=0,Z5.current=null,r===null||r.return===null){Ln=1,Dx=s,wn=null;break}e:{var i=t,o=r.return,l=r,c=s;if(s=Jn,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,m=u.tag;if(!(u.mode&1)&&(m===0||m===11||m===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=nC(o);if(h!==null){h.flags&=-257,aC(h,o,l,i,s),h.mode&1&&rC(i,d,s),s=h,c=d;var p=s.updateQueue;if(p===null){var g=new Set;g.add(c),s.updateQueue=g}else p.add(c);break e}else{if(!(s&1)){rC(i,d,s),s_();break e}c=Error(ft(426))}}else if(Rr&&l.mode&1){var y=nC(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),aC(y,o,l,i,s),R5(sf(c,l));break e}}i=c=sf(c,l),Ln!==4&&(Ln=2),ax===null?ax=[i]:ax.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,s&=-s,i.lanes|=s;var v=dD(i,c,s);Z3(i,v);break e;case 1:l=c;var j=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof j.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(kd===null||!kd.has(w)))){i.flags|=65536,s&=-s,i.lanes|=s;var _=uD(i,l,s);Z3(i,_);break e}}i=i.return}while(i!==null)}ED(r)}catch(P){s=P,wn===r&&r!==null&&(wn=r=r.return);continue}break}while(!0)}function AD(){var t=b0.current;return b0.current=j0,t===null?j0:t}function s_(){(Ln===0||Ln===3||Ln===2)&&(Ln=4),Bn===null||!(rm&268435455)&&!(L1&268435455)||ad(Bn,Jn)}function _0(t,s){var r=Xs;Xs|=2;var n=AD();(Bn!==t||Jn!==s)&&(ic=null,Gu(t,s));do try{ZW();break}catch(a){kD(t,a)}while(!0);if(O5(),Xs=r,b0.current=n,wn!==null)throw Error(ft(261));return Bn=null,Jn=0,Ln}function ZW(){for(;wn!==null;)PD(wn)}function XW(){for(;wn!==null&&!wH();)PD(wn)}function PD(t){var s=MD(t.alternate,t,gi);t.memoizedProps=t.pendingProps,s===null?ED(t):wn=s,Z5.current=null}function ED(t){var s=t;do{var r=s.alternate;if(t=s.return,s.flags&32768){if(r=HW(r,s),r!==null){r.flags&=32767,wn=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ln=6,wn=null;return}}else if(r=VW(r,s,gi),r!==null){wn=r;return}if(s=s.sibling,s!==null){wn=s;return}wn=s=t}while(s!==null);Ln===0&&(Ln=5)}function Eu(t,s,r){var n=hr,a=no.transition;try{no.transition=null,hr=1,JW(t,s,r,n)}finally{no.transition=a,hr=n}return null}function JW(t,s,r,n){do Nh();while(vd!==null);if(Xs&6)throw Error(ft(327));r=t.finishedWork;var a=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(ft(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(LH(t,i),t===Bn&&(wn=Bn=null,Jn=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Hv||(Hv=!0,LD(a0,function(){return Nh(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=no.transition,no.transition=null;var o=hr;hr=1;var l=Xs;Xs|=4,Z5.current=null,KW(t,r),_D(r,t),yW(bN),o0=!!jN,bN=jN=null,t.current=r,YW(r),_H(),Xs=l,hr=o,no.transition=i}else t.current=r;if(Hv&&(Hv=!1,vd=t,w0=a),i=t.pendingLanes,i===0&&(kd=null),kH(r.stateNode),ti(t,un()),s!==null)for(n=t.onRecoverableError,r=0;r<s.length;r++)a=s[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(N0)throw N0=!1,t=UN,UN=null,t;return w0&1&&t.tag!==0&&Nh(),i=t.pendingLanes,i&1?t===zN?ix++:(ix=0,zN=t):ix=0,Jd(),null}function Nh(){if(vd!==null){var t=dL(w0),s=no.transition,r=hr;try{if(no.transition=null,hr=16>t?16:t,vd===null)var n=!1;else{if(t=vd,vd=null,w0=0,Xs&6)throw Error(ft(331));var a=Xs;for(Xs|=4,Ot=t.current;Ot!==null;){var i=Ot,o=i.child;if(Ot.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(Ot=d;Ot!==null;){var u=Ot;switch(u.tag){case 0:case 11:case 15:nx(8,u,i)}var m=u.child;if(m!==null)m.return=u,Ot=m;else for(;Ot!==null;){u=Ot;var f=u.sibling,h=u.return;if(bD(u),u===d){Ot=null;break}if(f!==null){f.return=h,Ot=f;break}Ot=h}}}var p=i.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(g!==null)}}Ot=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Ot=o;else e:for(;Ot!==null;){if(i=Ot,i.flags&2048)switch(i.tag){case 0:case 11:case 15:nx(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,Ot=v;break e}Ot=i.return}}var j=t.current;for(Ot=j;Ot!==null;){o=Ot;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,Ot=w;else e:for(o=j;Ot!==null;){if(l=Ot,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:M1(9,l)}}catch(P){Jr(l,l.return,P)}if(l===o){Ot=null;break e}var _=l.sibling;if(_!==null){_.return=l.return,Ot=_;break e}Ot=l.return}}if(Xs=a,Jd(),bl&&typeof bl.onPostCommitFiberRoot=="function")try{bl.onPostCommitFiberRoot(_1,t)}catch{}n=!0}return n}finally{hr=r,no.transition=s}}return!1}function vC(t,s,r){s=sf(r,s),s=dD(t,s,1),t=Cd(t,s,1),s=La(),t!==null&&(Ng(t,1,s),ti(t,s))}function Jr(t,s,r){if(t.tag===3)vC(t,t,r);else for(;s!==null;){if(s.tag===3){vC(s,t,r);break}else if(s.tag===1){var n=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(kd===null||!kd.has(n))){t=sf(r,t),t=uD(s,t,1),s=Cd(s,t,1),t=La(),s!==null&&(Ng(s,1,t),ti(s,t));break}}s=s.return}}function eK(t,s,r){var n=t.pingCache;n!==null&&n.delete(s),s=La(),t.pingedLanes|=t.suspendedLanes&r,Bn===t&&(Jn&r)===r&&(Ln===4||Ln===3&&(Jn&130023424)===Jn&&500>un()-J5?Gu(t,0):X5|=r),ti(t,s)}function TD(t,s){s===0&&(t.mode&1?(s=Iv,Iv<<=1,!(Iv&130023424)&&(Iv=4194304)):s=1);var r=La();t=vc(t,s),t!==null&&(Ng(t,s,r),ti(t,r))}function tK(t){var s=t.memoizedState,r=0;s!==null&&(r=s.retryLane),TD(t,r)}function sK(t,s){var r=0;switch(t.tag){case 13:var n=t.stateNode,a=t.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(ft(314))}n!==null&&n.delete(s),TD(t,r)}var MD;MD=function(t,s,r){if(t!==null)if(t.memoizedProps!==s.pendingProps||Ja.current)Qa=!0;else{if(!(t.lanes&r)&&!(s.flags&128))return Qa=!1,qW(t,s,r);Qa=!!(t.flags&131072)}else Qa=!1,Rr&&s.flags&1048576&&RL(s,f0,s.index);switch(s.lanes=0,s.tag){case 2:var n=s.type;Ey(t,s),t=s.pendingProps;var a=Xh(s,ga.current);bh(s,r),a=W5(null,s,n,t,a,r);var i=K5();return s.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,ei(n)?(i=!0,m0(s)):i=!1,s.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,U5(s),a.updater=T1,s.stateNode=a,a._reactInternals=s,EN(s,n,t,r),s=LN(null,s,n,!0,i,r)):(s.tag=0,Rr&&i&&D5(s),Pa(null,s,a,r),s=s.child),s;case 16:n=s.elementType;e:{switch(Ey(t,s),t=s.pendingProps,a=n._init,n=a(n._payload),s.type=n,a=s.tag=nK(n),t=Co(n,t),a){case 0:s=MN(null,s,n,t,r);break e;case 1:s=lC(null,s,n,t,r);break e;case 11:s=iC(null,s,n,t,r);break e;case 14:s=oC(null,s,n,Co(n.type,t),r);break e}throw Error(ft(306,n,""))}return s;case 0:return n=s.type,a=s.pendingProps,a=s.elementType===n?a:Co(n,a),MN(t,s,n,a,r);case 1:return n=s.type,a=s.pendingProps,a=s.elementType===n?a:Co(n,a),lC(t,s,n,a,r);case 3:e:{if(pD(s),t===null)throw Error(ft(387));n=s.pendingProps,i=s.memoizedState,a=i.element,zL(t,s),g0(s,n,null,r);var o=s.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},s.updateQueue.baseState=i,s.memoizedState=i,s.flags&256){a=sf(Error(ft(423)),s),s=cC(t,s,n,r,a);break e}else if(n!==a){a=sf(Error(ft(424)),s),s=cC(t,s,n,r,a);break e}else for(wi=Sd(s.stateNode.containerInfo.firstChild),Ai=s,Rr=!0,Po=null,r=BL(s,null,n,r),s.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Jh(),n===a){s=yc(t,s,r);break e}Pa(t,s,n,r)}s=s.child}return s;case 5:return qL(s),t===null&&kN(s),n=s.type,a=s.pendingProps,i=t!==null?t.memoizedProps:null,o=a.children,NN(n,a)?o=null:i!==null&&NN(n,i)&&(s.flags|=32),fD(t,s),Pa(t,s,o,r),s.child;case 6:return t===null&&kN(s),null;case 13:return xD(t,s,r);case 4:return z5(s,s.stateNode.containerInfo),n=s.pendingProps,t===null?s.child=ef(s,null,n,r):Pa(t,s,n,r),s.child;case 11:return n=s.type,a=s.pendingProps,a=s.elementType===n?a:Co(n,a),iC(t,s,n,a,r);case 7:return Pa(t,s,s.pendingProps,r),s.child;case 8:return Pa(t,s,s.pendingProps.children,r),s.child;case 12:return Pa(t,s,s.pendingProps.children,r),s.child;case 10:e:{if(n=s.type._context,a=s.pendingProps,i=s.memoizedProps,o=a.value,_r(p0,n._currentValue),n._currentValue=o,i!==null)if(Bo(i.value,o)){if(i.children===a.children&&!Ja.current){s=yc(t,s,r);break e}}else for(i=s.child,i!==null&&(i.return=s);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=fc(-1,r&-r),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),AN(i.return,r,s),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===s.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(ft(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),AN(o,r,s),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===s){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Pa(t,s,a.children,r),s=s.child}return s;case 9:return a=s.type,n=s.pendingProps.children,bh(s,r),a=lo(a),n=n(a),s.flags|=1,Pa(t,s,n,r),s.child;case 14:return n=s.type,a=Co(n,s.pendingProps),a=Co(n.type,a),oC(t,s,n,a,r);case 15:return mD(t,s,s.type,s.pendingProps,r);case 17:return n=s.type,a=s.pendingProps,a=s.elementType===n?a:Co(n,a),Ey(t,s),s.tag=1,ei(n)?(t=!0,m0(s)):t=!1,bh(s,r),cD(s,n,a),EN(s,n,a,r),LN(null,s,n,!0,t,r);case 19:return gD(t,s,r);case 22:return hD(t,s,r)}throw Error(ft(156,s.tag))};function LD(t,s){return iL(t,s)}function rK(t,s,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function to(t,s,r,n){return new rK(t,s,r,n)}function r_(t){return t=t.prototype,!(!t||!t.isReactComponent)}function nK(t){if(typeof t=="function")return r_(t)?1:0;if(t!=null){if(t=t.$$typeof,t===N5)return 11;if(t===w5)return 14}return 2}function Pd(t,s){var r=t.alternate;return r===null?(r=to(t.tag,s,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=s,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,s=t.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Ly(t,s,r,n,a,i){var o=2;if(n=t,typeof t=="function")r_(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case rh:return Qu(r.children,a,i,s);case b5:o=8,a|=8;break;case eN:return t=to(12,r,s,a|2),t.elementType=eN,t.lanes=i,t;case tN:return t=to(13,r,s,a),t.elementType=tN,t.lanes=i,t;case sN:return t=to(19,r,s,a),t.elementType=sN,t.lanes=i,t;case qM:return D1(r,a,i,s);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case UM:o=10;break e;case zM:o=9;break e;case N5:o=11;break e;case w5:o=14;break e;case sd:o=16,n=null;break e}throw Error(ft(130,t==null?t:typeof t,""))}return s=to(o,r,s,a),s.elementType=t,s.type=n,s.lanes=i,s}function Qu(t,s,r,n){return t=to(7,t,n,s),t.lanes=r,t}function D1(t,s,r,n){return t=to(22,t,n,s),t.elementType=qM,t.lanes=r,t.stateNode={isHidden:!1},t}function Fb(t,s,r){return t=to(6,t,null,s),t.lanes=r,t}function Ob(t,s,r){return s=to(4,t.children!==null?t.children:[],t.key,s),s.lanes=r,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}function aK(t,s,r,n,a){this.tag=s,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vb(0),this.expirationTimes=vb(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vb(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function n_(t,s,r,n,a,i,o,l,c){return t=new aK(t,s,r,l,c),s===1?(s=1,i===!0&&(s|=8)):s=0,i=to(3,null,null,s),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},U5(i),t}function iK(t,s,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:sh,key:n==null?null:""+n,children:t,containerInfo:s,implementation:r}}function DD(t){if(!t)return Rd;t=t._reactInternals;e:{if(ym(t)!==t||t.tag!==1)throw Error(ft(170));var s=t;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(ei(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(ft(171))}if(t.tag===1){var r=t.type;if(ei(r))return DL(t,r,s)}return s}function ID(t,s,r,n,a,i,o,l,c){return t=n_(r,n,!0,t,a,i,o,l,c),t.context=DD(null),r=t.current,n=La(),a=Ad(r),i=fc(n,a),i.callback=s??null,Cd(r,i,a),t.current.lanes=a,Ng(t,a,n),ti(t,n),t}function I1(t,s,r,n){var a=s.current,i=La(),o=Ad(a);return r=DD(r),s.context===null?s.context=r:s.pendingContext=r,s=fc(i,o),s.payload={element:t},n=n===void 0?null:n,n!==null&&(s.callback=n),t=Cd(a,s,o),t!==null&&(Fo(t,a,o,i),ky(t,a,o)),o}function S0(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function yC(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<s?r:s}}function a_(t,s){yC(t,s),(t=t.alternate)&&yC(t,s)}function oK(){return null}var RD=typeof reportError=="function"?reportError:function(t){console.error(t)};function i_(t){this._internalRoot=t}R1.prototype.render=i_.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(ft(409));I1(t,s,null,null)};R1.prototype.unmount=i_.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;nm(function(){I1(null,t,null,null)}),s[gc]=null}};function R1(t){this._internalRoot=t}R1.prototype.unstable_scheduleHydration=function(t){if(t){var s=hL();t={blockedOn:null,target:t,priority:s};for(var r=0;r<nd.length&&s!==0&&s<nd[r].priority;r++);nd.splice(r,0,t),r===0&&pL(t)}};function o_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function F1(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function jC(){}function lK(t,s,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var d=S0(o);i.call(d)}}var o=ID(s,n,t,0,null,!1,!1,"",jC);return t._reactRootContainer=o,t[gc]=o.current,Cx(t.nodeType===8?t.parentNode:t),nm(),o}for(;a=t.lastChild;)t.removeChild(a);if(typeof n=="function"){var l=n;n=function(){var d=S0(c);l.call(d)}}var c=n_(t,0,!1,null,null,!1,!1,"",jC);return t._reactRootContainer=c,t[gc]=c.current,Cx(t.nodeType===8?t.parentNode:t),nm(function(){I1(s,c,r,n)}),c}function O1(t,s,r,n,a){var i=r._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var c=S0(o);l.call(c)}}I1(s,o,t,a)}else o=lK(r,s,t,a,n);return S0(o)}uL=function(t){switch(t.tag){case 3:var s=t.stateNode;if(s.current.memoizedState.isDehydrated){var r=Hp(s.pendingLanes);r!==0&&(C5(s,r|1),ti(s,un()),!(Xs&6)&&(rf=un()+500,Jd()))}break;case 13:nm(function(){var n=vc(t,1);if(n!==null){var a=La();Fo(n,t,1,a)}}),a_(t,1)}};k5=function(t){if(t.tag===13){var s=vc(t,134217728);if(s!==null){var r=La();Fo(s,t,134217728,r)}a_(t,134217728)}};mL=function(t){if(t.tag===13){var s=Ad(t),r=vc(t,s);if(r!==null){var n=La();Fo(r,t,s,n)}a_(t,s)}};hL=function(){return hr};fL=function(t,s){var r=hr;try{return hr=t,s()}finally{hr=r}};mN=function(t,s,r){switch(s){case"input":if(aN(t,r),s=r.name,r.type==="radio"&&s!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<r.length;s++){var n=r[s];if(n!==t&&n.form===t.form){var a=A1(n);if(!a)throw Error(ft(90));HM(n),aN(n,a)}}}break;case"textarea":KM(t,r);break;case"select":s=r.value,s!=null&&gh(t,!!r.multiple,s,!1)}};eL=e_;tL=nm;var cK={usingClientEntryPoint:!1,Events:[_g,oh,A1,XM,JM,e_]},Pp={findFiberByHostInstance:Iu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},dK={bundleType:Pp.bundleType,version:Pp.version,rendererPackageName:Pp.rendererPackageName,rendererConfig:Pp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_c.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=nL(t),t===null?null:t.stateNode},findFiberByHostInstance:Pp.findFiberByHostInstance||oK,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wv.isDisabled&&Wv.supportsFiber)try{_1=Wv.inject(dK),bl=Wv}catch{}}Ri.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cK;Ri.createPortal=function(t,s){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!o_(s))throw Error(ft(200));return iK(t,s,null,r)};Ri.createRoot=function(t,s){if(!o_(t))throw Error(ft(299));var r=!1,n="",a=RD;return s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(n=s.identifierPrefix),s.onRecoverableError!==void 0&&(a=s.onRecoverableError)),s=n_(t,1,!1,null,null,r,!1,n,a),t[gc]=s.current,Cx(t.nodeType===8?t.parentNode:t),new i_(s)};Ri.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(ft(188)):(t=Object.keys(t).join(","),Error(ft(268,t)));return t=nL(s),t=t===null?null:t.stateNode,t};Ri.flushSync=function(t){return nm(t)};Ri.hydrate=function(t,s,r){if(!F1(s))throw Error(ft(200));return O1(null,t,s,!0,r)};Ri.hydrateRoot=function(t,s,r){if(!o_(t))throw Error(ft(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",o=RD;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),s=ID(s,null,t,1,r??null,a,!1,i,o),t[gc]=s.current,Cx(t),n)for(t=0;t<n.length;t++)r=n[t],a=r._getVersion,a=a(r._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[r,a]:s.mutableSourceEagerHydrationData.push(r,a);return new R1(s)};Ri.render=function(t,s,r){if(!F1(s))throw Error(ft(200));return O1(null,t,s,!1,r)};Ri.unmountComponentAtNode=function(t){if(!F1(t))throw Error(ft(40));return t._reactRootContainer?(nm(function(){O1(null,null,t,!1,function(){t._reactRootContainer=null,t[gc]=null})}),!0):!1};Ri.unstable_batchedUpdates=e_;Ri.unstable_renderSubtreeIntoContainer=function(t,s,r,n){if(!F1(r))throw Error(ft(200));if(t==null||t._reactInternals===void 0)throw Error(ft(38));return O1(t,s,r,!1,n)};Ri.version="18.3.1-next-f1338f8080-20240426";function FD(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(FD)}catch(t){console.error(t)}}FD(),FM.exports=Ri;var jm=FM.exports;const uK=h5(jm);var OD,bC=jm;OD=bC.createRoot,bC.hydrateRoot;function mK(t,s){if(t instanceof RegExp)return{keys:!1,pattern:t};var r,n,a,i,o=[],l="",c=t.split("/");for(c[0]||c.shift();a=c.shift();)r=a[0],r==="*"?(o.push(r),l+=a[1]==="?"?"(?:/(.*))?":"/(.*)"):r===":"?(n=a.indexOf("?",1),i=a.indexOf(".",1),o.push(a.substring(1,~n?n:~i?i:a.length)),l+=~n&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(l+=(~n?"?":"")+"\\"+a.substring(i))):l+="/"+a;return{keys:o,pattern:new RegExp("^"+l+(s?"(?=$|/)":"/?$"),"i")}}var $D={exports:{}},BD={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nf=N;function hK(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var fK=typeof Object.is=="function"?Object.is:hK,pK=nf.useState,xK=nf.useEffect,gK=nf.useLayoutEffect,vK=nf.useDebugValue;function yK(t,s){var r=s(),n=pK({inst:{value:r,getSnapshot:s}}),a=n[0].inst,i=n[1];return gK(function(){a.value=r,a.getSnapshot=s,$b(a)&&i({inst:a})},[t,r,s]),xK(function(){return $b(a)&&i({inst:a}),t(function(){$b(a)&&i({inst:a})})},[t]),vK(r),r}function $b(t){var s=t.getSnapshot;t=t.value;try{var r=s();return!fK(t,r)}catch{return!0}}function jK(t,s){return s()}var bK=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?jK:yK;BD.useSyncExternalStore=nf.useSyncExternalStore!==void 0?nf.useSyncExternalStore:bK;$D.exports=BD;var NK=$D.exports;const wK=IM.useInsertionEffect,_K=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",SK=_K?N.useLayoutEffect:N.useEffect,CK=wK||SK,UD=t=>{const s=N.useRef([t,(...r)=>s[0](...r)]).current;return CK(()=>{s[0]=t}),s[1]},kK="popstate",l_="pushState",c_="replaceState",AK="hashchange",NC=[kK,l_,c_,AK],PK=t=>{for(const s of NC)addEventListener(s,t);return()=>{for(const s of NC)removeEventListener(s,t)}},zD=(t,s)=>NK.useSyncExternalStore(PK,t,s),EK=()=>location.search,TK=({ssrSearch:t=""}={})=>zD(EK,()=>t),wC=()=>location.pathname,MK=({ssrPath:t}={})=>zD(wC,t?()=>t:wC),LK=(t,{replace:s=!1,state:r=null}={})=>history[s?c_:l_](r,"",t),DK=(t={})=>[MK(t),LK],_C=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[_C]>"u"){for(const t of[l_,c_]){const s=history[t];history[t]=function(){const r=s.apply(this,arguments),n=new Event(t);return n.arguments=arguments,dispatchEvent(n),r}}Object.defineProperty(window,_C,{value:!0})}const IK=(t,s)=>s.toLowerCase().indexOf(t.toLowerCase())?"~"+s:s.slice(t.length)||"/",qD=(t="")=>t==="/"?"":t,RK=(t,s)=>t[0]==="~"?t.slice(1):qD(s)+t,FK=(t="",s)=>IK(SC(qD(t)),SC(s)),SC=t=>{try{return decodeURI(t)}catch{return t}},VD={hook:DK,searchHook:TK,parser:mK,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:t=>t},HD=N.createContext(VD),Ef=()=>N.useContext(HD),WD={},KD=N.createContext(WD),Ba=()=>N.useContext(KD),$1=t=>{const[s,r]=t.hook(t);return[FK(t.base,s),UD((n,a)=>r(RK(n,t.base),a))]},ja=()=>$1(Ef()),d_=(t,s,r,n)=>{const{pattern:a,keys:i}=s instanceof RegExp?{keys:!1,pattern:s}:t(s||"*",n),o=a.exec(r)||[],[l,...c]=o;return l!==void 0?[!0,(()=>{const d=i!==!1?Object.fromEntries(i.map((m,f)=>[m,c[f]])):o.groups;let u={...c};return d&&Object.assign(u,d),u})(),...n?[l]:[]]:[!1,null]},Sc=t=>d_(Ef().parser,t,ja()[0]),OK=({children:t,...s})=>{var u,m;const r=Ef(),n=s.hook?VD:r;let a=n;const[i,o]=((u=s.ssrPath)==null?void 0:u.split("?"))??[];o&&(s.ssrSearch=o,s.ssrPath=i),s.hrefs=s.hrefs??((m=s.hook)==null?void 0:m.hrefs);let l=N.useRef({}),c=l.current,d=c;for(let f in n){const h=f==="base"?n[f]+(s[f]||""):s[f]||n[f];c===d&&h!==d[f]&&(l.current=d={...d}),d[f]=h,h!==n[f]&&(a=d)}return N.createElement(HD.Provider,{value:a,children:t})},CC=({children:t,component:s},r)=>s?N.createElement(s,{params:r}):typeof t=="function"?t(r):t,$K=t=>{let s=N.useRef(WD),r=s.current;for(const n in t)t[n]!==r[n]&&(r=t);return Object.keys(t).length===0&&(r=t),s.current=r},Pt=({path:t,nest:s,match:r,...n})=>{const a=Ef(),[i]=$1(a),[o,l,c]=r??d_(a.parser,t,i,s),d=$K({...Ba(),...l});if(!o)return null;const u=c?N.createElement(OK,{base:c},CC(n,d)):CC(n,d);return N.createElement(KD.Provider,{value:d,children:u})},He=N.forwardRef((t,s)=>{const r=Ef(),[n,a]=$1(r),{to:i="",href:o=i,onClick:l,asChild:c,children:d,className:u,replace:m,state:f,...h}=t,p=UD(y=>{y.ctrlKey||y.metaKey||y.altKey||y.shiftKey||y.button!==0||(l==null||l(y),y.defaultPrevented||(y.preventDefault(),a(o,t)))}),g=r.hrefs(o[0]==="~"?o.slice(1):r.base+o,r);return c&&N.isValidElement(d)?N.cloneElement(d,{onClick:p,href:g}):N.createElement("a",{...h,onClick:p,href:g,className:u!=null&&u.call?u(n===o):u,children:d,ref:s})}),YD=t=>Array.isArray(t)?t.flatMap(s=>YD(s&&s.type===N.Fragment?s.props.children:s)):[t],BK=({children:t,location:s})=>{const r=Ef(),[n]=$1(r);for(const a of YD(t)){let i=0;if(N.isValidElement(a)&&(i=d_(r.parser,a.props.path,s||n,a.props.nest))[0])return N.cloneElement(a,{match:i})}return null};var Tf=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},am=typeof window>"u"||"Deno"in globalThis;function Qi(){}function UK(t,s){return typeof t=="function"?t(s):t}function HN(t){return typeof t=="number"&&t>=0&&t!==1/0}function GD(t,s){return Math.max(t+(s||0)-Date.now(),0)}function wh(t,s){return typeof t=="function"?t(s):t}function Eo(t,s){return typeof t=="function"?t(s):t}function kC(t,s){const{type:r="all",exact:n,fetchStatus:a,predicate:i,queryKey:o,stale:l}=t;if(o){if(n){if(s.queryHash!==u_(o,s.options))return!1}else if(!Ix(s.queryKey,o))return!1}if(r!=="all"){const c=s.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&s.isStale()!==l||a&&a!==s.state.fetchStatus||i&&!i(s))}function AC(t,s){const{exact:r,status:n,predicate:a,mutationKey:i}=t;if(i){if(!s.options.mutationKey)return!1;if(r){if(im(s.options.mutationKey)!==im(i))return!1}else if(!Ix(s.options.mutationKey,i))return!1}return!(n&&s.state.status!==n||a&&!a(s))}function u_(t,s){return((s==null?void 0:s.queryKeyHashFn)||im)(t)}function im(t){return JSON.stringify(t,(s,r)=>WN(r)?Object.keys(r).sort().reduce((n,a)=>(n[a]=r[a],n),{}):r)}function Ix(t,s){return t===s?!0:typeof t!=typeof s?!1:t&&s&&typeof t=="object"&&typeof s=="object"?!Object.keys(s).some(r=>!Ix(t[r],s[r])):!1}function QD(t,s){if(t===s)return t;const r=PC(t)&&PC(s);if(r||WN(t)&&WN(s)){const n=r?t:Object.keys(t),a=n.length,i=r?s:Object.keys(s),o=i.length,l=r?[]:{};let c=0;for(let d=0;d<o;d++){const u=r?d:i[d];(!r&&n.includes(u)||r)&&t[u]===void 0&&s[u]===void 0?(l[u]=void 0,c++):(l[u]=QD(t[u],s[u]),l[u]===t[u]&&t[u]!==void 0&&c++)}return a===o&&c===a?t:l}return s}function C0(t,s){if(!s||Object.keys(t).length!==Object.keys(s).length)return!1;for(const r in t)if(t[r]!==s[r])return!1;return!0}function PC(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function WN(t){if(!EC(t))return!1;const s=t.constructor;if(s===void 0)return!0;const r=s.prototype;return!(!EC(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function EC(t){return Object.prototype.toString.call(t)==="[object Object]"}function zK(t){return new Promise(s=>{setTimeout(s,t)})}function KN(t,s,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,s):r.structuralSharing!==!1?QD(t,s):s}function qK(t,s,r=0){const n=[...t,s];return r&&n.length>r?n.slice(1):n}function VK(t,s,r=0){const n=[s,...t];return r&&n.length>r?n.slice(0,-1):n}var m_=Symbol();function ZD(t,s){return!t.queryFn&&(s!=null&&s.initialPromise)?()=>s.initialPromise:!t.queryFn||t.queryFn===m_?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var zu,ld,Oh,kP,HK=(kP=class extends Tf{constructor(){super();as(this,zu);as(this,ld);as(this,Oh);Et(this,Oh,s=>{if(!am&&window.addEventListener){const r=()=>s();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){Ae(this,ld)||this.setEventListener(Ae(this,Oh))}onUnsubscribe(){var s;this.hasListeners()||((s=Ae(this,ld))==null||s.call(this),Et(this,ld,void 0))}setEventListener(s){var r;Et(this,Oh,s),(r=Ae(this,ld))==null||r.call(this),Et(this,ld,s(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(s){Ae(this,zu)!==s&&(Et(this,zu,s),this.onFocus())}onFocus(){const s=this.isFocused();this.listeners.forEach(r=>{r(s)})}isFocused(){var s;return typeof Ae(this,zu)=="boolean"?Ae(this,zu):((s=globalThis.document)==null?void 0:s.visibilityState)!=="hidden"}},zu=new WeakMap,ld=new WeakMap,Oh=new WeakMap,kP),h_=new HK,$h,cd,Bh,AP,WK=(AP=class extends Tf{constructor(){super();as(this,$h,!0);as(this,cd);as(this,Bh);Et(this,Bh,s=>{if(!am&&window.addEventListener){const r=()=>s(!0),n=()=>s(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){Ae(this,cd)||this.setEventListener(Ae(this,Bh))}onUnsubscribe(){var s;this.hasListeners()||((s=Ae(this,cd))==null||s.call(this),Et(this,cd,void 0))}setEventListener(s){var r;Et(this,Bh,s),(r=Ae(this,cd))==null||r.call(this),Et(this,cd,s(this.setOnline.bind(this)))}setOnline(s){Ae(this,$h)!==s&&(Et(this,$h,s),this.listeners.forEach(n=>{n(s)}))}isOnline(){return Ae(this,$h)}},$h=new WeakMap,cd=new WeakMap,Bh=new WeakMap,AP),k0=new WK;function YN(){let t,s;const r=new Promise((a,i)=>{t=a,s=i});r.status="pending",r.catch(()=>{});function n(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{n({status:"fulfilled",value:a}),t(a)},r.reject=a=>{n({status:"rejected",reason:a}),s(a)},r}function KK(t){return Math.min(1e3*2**t,3e4)}function XD(t){return(t??"online")==="online"?k0.isOnline():!0}var JD=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Bb(t){return t instanceof JD}function eI(t){let s=!1,r=0,n=!1,a;const i=YN(),o=g=>{var y;n||(f(new JD(g)),(y=t.abort)==null||y.call(t))},l=()=>{s=!0},c=()=>{s=!1},d=()=>h_.isFocused()&&(t.networkMode==="always"||k0.isOnline())&&t.canRun(),u=()=>XD(t.networkMode)&&t.canRun(),m=g=>{var y;n||(n=!0,(y=t.onSuccess)==null||y.call(t,g),a==null||a(),i.resolve(g))},f=g=>{var y;n||(n=!0,(y=t.onError)==null||y.call(t,g),a==null||a(),i.reject(g))},h=()=>new Promise(g=>{var y;a=v=>{(n||d())&&g(v)},(y=t.onPause)==null||y.call(t)}).then(()=>{var g;a=void 0,n||(g=t.onContinue)==null||g.call(t)}),p=()=>{if(n)return;let g;const y=r===0?t.initialPromise:void 0;try{g=y??t.fn()}catch(v){g=Promise.reject(v)}Promise.resolve(g).then(m).catch(v=>{var E;if(n)return;const j=t.retry??(am?0:3),w=t.retryDelay??KK,_=typeof w=="function"?w(r,v):w,P=j===!0||typeof j=="number"&&r<j||typeof j=="function"&&j(r,v);if(s||!P){f(v);return}r++,(E=t.onFail)==null||E.call(t,r,v),zK(_).then(()=>d()?void 0:h()).then(()=>{s?f(v):p()})})};return{promise:i,cancel:o,continue:()=>(a==null||a(),i),cancelRetry:l,continueRetry:c,canStart:u,start:()=>(u()?p():h().then(p),i)}}function YK(){let t=[],s=0,r=l=>{l()},n=l=>{l()},a=l=>setTimeout(l,0);const i=l=>{s?t.push(l):a(()=>{r(l)})},o=()=>{const l=t;t=[],l.length&&a(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;s++;try{c=l()}finally{s--,s||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{a=l}}}var Mn=YK(),qu,PP,tI=(PP=class{constructor(){as(this,qu)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),HN(this.gcTime)&&Et(this,qu,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(am?1/0:5*60*1e3))}clearGcTimeout(){Ae(this,qu)&&(clearTimeout(Ae(this,qu)),Et(this,qu,void 0))}},qu=new WeakMap,PP),Uh,zh,Gi,ha,gg,Vu,ko,rc,EP,GK=(EP=class extends tI{constructor(s){super();as(this,ko);as(this,Uh);as(this,zh);as(this,Gi);as(this,ha);as(this,gg);as(this,Vu);Et(this,Vu,!1),Et(this,gg,s.defaultOptions),this.setOptions(s.options),this.observers=[],Et(this,Gi,s.cache),this.queryKey=s.queryKey,this.queryHash=s.queryHash,Et(this,Uh,QK(this.options)),this.state=s.state??Ae(this,Uh),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var s;return(s=Ae(this,ha))==null?void 0:s.promise}setOptions(s){this.options={...Ae(this,gg),...s},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Ae(this,Gi).remove(this)}setData(s,r){const n=KN(this.state.data,s,this.options);return Es(this,ko,rc).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(s,r){Es(this,ko,rc).call(this,{type:"setState",state:s,setStateOptions:r})}cancel(s){var n,a;const r=(n=Ae(this,ha))==null?void 0:n.promise;return(a=Ae(this,ha))==null||a.cancel(s),r?r.then(Qi).catch(Qi):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Ae(this,Uh))}isActive(){return this.observers.some(s=>Eo(s.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===m_||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(s=>s.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(s=0){return this.state.isInvalidated||this.state.data===void 0||!GD(this.state.dataUpdatedAt,s)}onFocus(){var r;const s=this.observers.find(n=>n.shouldFetchOnWindowFocus());s==null||s.refetch({cancelRefetch:!1}),(r=Ae(this,ha))==null||r.continue()}onOnline(){var r;const s=this.observers.find(n=>n.shouldFetchOnReconnect());s==null||s.refetch({cancelRefetch:!1}),(r=Ae(this,ha))==null||r.continue()}addObserver(s){this.observers.includes(s)||(this.observers.push(s),this.clearGcTimeout(),Ae(this,Gi).notify({type:"observerAdded",query:this,observer:s}))}removeObserver(s){this.observers.includes(s)&&(this.observers=this.observers.filter(r=>r!==s),this.observers.length||(Ae(this,ha)&&(Ae(this,Vu)?Ae(this,ha).cancel({revert:!0}):Ae(this,ha).cancelRetry()),this.scheduleGc()),Ae(this,Gi).notify({type:"observerRemoved",query:this,observer:s}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Es(this,ko,rc).call(this,{type:"invalidate"})}fetch(s,r){var c,d,u;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(Ae(this,ha))return Ae(this,ha).continueRetry(),Ae(this,ha).promise}if(s&&this.setOptions(s),!this.options.queryFn){const m=this.observers.find(f=>f.options.queryFn);m&&this.setOptions(m.options)}const n=new AbortController,a=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(Et(this,Vu,!0),n.signal)})},i=()=>{const m=ZD(this.options,r),f={queryKey:this.queryKey,meta:this.meta};return a(f),Et(this,Vu,!1),this.options.persister?this.options.persister(m,f,this):m(f)},o={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:i};a(o),(c=this.options.behavior)==null||c.onFetch(o,this),Et(this,zh,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=o.fetchOptions)==null?void 0:d.meta))&&Es(this,ko,rc).call(this,{type:"fetch",meta:(u=o.fetchOptions)==null?void 0:u.meta});const l=m=>{var f,h,p,g;Bb(m)&&m.silent||Es(this,ko,rc).call(this,{type:"error",error:m}),Bb(m)||((h=(f=Ae(this,Gi).config).onError)==null||h.call(f,m,this),(g=(p=Ae(this,Gi).config).onSettled)==null||g.call(p,this.state.data,m,this)),this.scheduleGc()};return Et(this,ha,eI({initialPromise:r==null?void 0:r.initialPromise,fn:o.fetchFn,abort:n.abort.bind(n),onSuccess:m=>{var f,h,p,g;if(m===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(m)}catch(y){l(y);return}(h=(f=Ae(this,Gi).config).onSuccess)==null||h.call(f,m,this),(g=(p=Ae(this,Gi).config).onSettled)==null||g.call(p,m,this.state.error,this),this.scheduleGc()},onError:l,onFail:(m,f)=>{Es(this,ko,rc).call(this,{type:"failed",failureCount:m,error:f})},onPause:()=>{Es(this,ko,rc).call(this,{type:"pause"})},onContinue:()=>{Es(this,ko,rc).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),Ae(this,ha).start()}},Uh=new WeakMap,zh=new WeakMap,Gi=new WeakMap,ha=new WeakMap,gg=new WeakMap,Vu=new WeakMap,ko=new WeakSet,rc=function(s){const r=n=>{switch(s.type){case"failed":return{...n,fetchFailureCount:s.failureCount,fetchFailureReason:s.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...sI(n.data,this.options),fetchMeta:s.meta??null};case"success":return{...n,data:s.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:s.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!s.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=s.error;return Bb(a)&&a.revert&&Ae(this,zh)?{...Ae(this,zh),fetchStatus:"idle"}:{...n,error:a,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...s.state}}};this.state=r(this.state),Mn.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),Ae(this,Gi).notify({query:this,type:"updated",action:s})})},EP);function sI(t,s){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:XD(s.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function QK(t){const s=typeof t.initialData=="function"?t.initialData():t.initialData,r=s!==void 0,n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:s,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var dl,TP,ZK=(TP=class extends Tf{constructor(s={}){super();as(this,dl);this.config=s,Et(this,dl,new Map)}build(s,r,n){const a=r.queryKey,i=r.queryHash??u_(a,r);let o=this.get(i);return o||(o=new GK({cache:this,queryKey:a,queryHash:i,options:s.defaultQueryOptions(r),state:n,defaultOptions:s.getQueryDefaults(a)}),this.add(o)),o}add(s){Ae(this,dl).has(s.queryHash)||(Ae(this,dl).set(s.queryHash,s),this.notify({type:"added",query:s}))}remove(s){const r=Ae(this,dl).get(s.queryHash);r&&(s.destroy(),r===s&&Ae(this,dl).delete(s.queryHash),this.notify({type:"removed",query:s}))}clear(){Mn.batch(()=>{this.getAll().forEach(s=>{this.remove(s)})})}get(s){return Ae(this,dl).get(s)}getAll(){return[...Ae(this,dl).values()]}find(s){const r={exact:!0,...s};return this.getAll().find(n=>kC(r,n))}findAll(s={}){const r=this.getAll();return Object.keys(s).length>0?r.filter(n=>kC(s,n)):r}notify(s){Mn.batch(()=>{this.listeners.forEach(r=>{r(s)})})}onFocus(){Mn.batch(()=>{this.getAll().forEach(s=>{s.onFocus()})})}onOnline(){Mn.batch(()=>{this.getAll().forEach(s=>{s.onOnline()})})}},dl=new WeakMap,TP),ul,Ca,Hu,ml,Xc,MP,XK=(MP=class extends tI{constructor(s){super();as(this,ml);as(this,ul);as(this,Ca);as(this,Hu);this.mutationId=s.mutationId,Et(this,Ca,s.mutationCache),Et(this,ul,[]),this.state=s.state||rI(),this.setOptions(s.options),this.scheduleGc()}setOptions(s){this.options=s,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(s){Ae(this,ul).includes(s)||(Ae(this,ul).push(s),this.clearGcTimeout(),Ae(this,Ca).notify({type:"observerAdded",mutation:this,observer:s}))}removeObserver(s){Et(this,ul,Ae(this,ul).filter(r=>r!==s)),this.scheduleGc(),Ae(this,Ca).notify({type:"observerRemoved",mutation:this,observer:s})}optionalRemove(){Ae(this,ul).length||(this.state.status==="pending"?this.scheduleGc():Ae(this,Ca).remove(this))}continue(){var s;return((s=Ae(this,Hu))==null?void 0:s.continue())??this.execute(this.state.variables)}async execute(s){var a,i,o,l,c,d,u,m,f,h,p,g,y,v,j,w,_,P,E,L;Et(this,Hu,eI({fn:()=>this.options.mutationFn?this.options.mutationFn(s):Promise.reject(new Error("No mutationFn found")),onFail:(T,M)=>{Es(this,ml,Xc).call(this,{type:"failed",failureCount:T,error:M})},onPause:()=>{Es(this,ml,Xc).call(this,{type:"pause"})},onContinue:()=>{Es(this,ml,Xc).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Ae(this,Ca).canRun(this)}));const r=this.state.status==="pending",n=!Ae(this,Hu).canStart();try{if(!r){Es(this,ml,Xc).call(this,{type:"pending",variables:s,isPaused:n}),await((i=(a=Ae(this,Ca).config).onMutate)==null?void 0:i.call(a,s,this));const M=await((l=(o=this.options).onMutate)==null?void 0:l.call(o,s));M!==this.state.context&&Es(this,ml,Xc).call(this,{type:"pending",context:M,variables:s,isPaused:n})}const T=await Ae(this,Hu).start();return await((d=(c=Ae(this,Ca).config).onSuccess)==null?void 0:d.call(c,T,s,this.state.context,this)),await((m=(u=this.options).onSuccess)==null?void 0:m.call(u,T,s,this.state.context)),await((h=(f=Ae(this,Ca).config).onSettled)==null?void 0:h.call(f,T,null,this.state.variables,this.state.context,this)),await((g=(p=this.options).onSettled)==null?void 0:g.call(p,T,null,s,this.state.context)),Es(this,ml,Xc).call(this,{type:"success",data:T}),T}catch(T){try{throw await((v=(y=Ae(this,Ca).config).onError)==null?void 0:v.call(y,T,s,this.state.context,this)),await((w=(j=this.options).onError)==null?void 0:w.call(j,T,s,this.state.context)),await((P=(_=Ae(this,Ca).config).onSettled)==null?void 0:P.call(_,void 0,T,this.state.variables,this.state.context,this)),await((L=(E=this.options).onSettled)==null?void 0:L.call(E,void 0,T,s,this.state.context)),T}finally{Es(this,ml,Xc).call(this,{type:"error",error:T})}}finally{Ae(this,Ca).runNext(this)}}},ul=new WeakMap,Ca=new WeakMap,Hu=new WeakMap,ml=new WeakSet,Xc=function(s){const r=n=>{switch(s.type){case"failed":return{...n,failureCount:s.failureCount,failureReason:s.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:s.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:s.isPaused,status:"pending",variables:s.variables,submittedAt:Date.now()};case"success":return{...n,data:s.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:s.error,failureCount:n.failureCount+1,failureReason:s.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Mn.batch(()=>{Ae(this,ul).forEach(n=>{n.onMutationUpdate(s)}),Ae(this,Ca).notify({mutation:this,type:"updated",action:s})})},MP);function rI(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var xi,vg,LP,JK=(LP=class extends Tf{constructor(s={}){super();as(this,xi);as(this,vg);this.config=s,Et(this,xi,new Map),Et(this,vg,Date.now())}build(s,r,n){const a=new XK({mutationCache:this,mutationId:++Pv(this,vg)._,options:s.defaultMutationOptions(r),state:n});return this.add(a),a}add(s){const r=Kv(s),n=Ae(this,xi).get(r)??[];n.push(s),Ae(this,xi).set(r,n),this.notify({type:"added",mutation:s})}remove(s){var n;const r=Kv(s);if(Ae(this,xi).has(r)){const a=(n=Ae(this,xi).get(r))==null?void 0:n.filter(i=>i!==s);a&&(a.length===0?Ae(this,xi).delete(r):Ae(this,xi).set(r,a))}this.notify({type:"removed",mutation:s})}canRun(s){var n;const r=(n=Ae(this,xi).get(Kv(s)))==null?void 0:n.find(a=>a.state.status==="pending");return!r||r===s}runNext(s){var n;const r=(n=Ae(this,xi).get(Kv(s)))==null?void 0:n.find(a=>a!==s&&a.state.isPaused);return(r==null?void 0:r.continue())??Promise.resolve()}clear(){Mn.batch(()=>{this.getAll().forEach(s=>{this.remove(s)})})}getAll(){return[...Ae(this,xi).values()].flat()}find(s){const r={exact:!0,...s};return this.getAll().find(n=>AC(r,n))}findAll(s={}){return this.getAll().filter(r=>AC(s,r))}notify(s){Mn.batch(()=>{this.listeners.forEach(r=>{r(s)})})}resumePausedMutations(){const s=this.getAll().filter(r=>r.state.isPaused);return Mn.batch(()=>Promise.all(s.map(r=>r.continue().catch(Qi))))}},xi=new WeakMap,vg=new WeakMap,LP);function Kv(t){var s;return((s=t.options.scope)==null?void 0:s.id)??String(t.mutationId)}function TC(t){return{onFetch:(s,r)=>{var u,m,f,h,p;const n=s.options,a=(f=(m=(u=s.fetchOptions)==null?void 0:u.meta)==null?void 0:m.fetchMore)==null?void 0:f.direction,i=((h=s.state.data)==null?void 0:h.pages)||[],o=((p=s.state.data)==null?void 0:p.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let g=!1;const y=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(s.signal.aborted?g=!0:s.signal.addEventListener("abort",()=>{g=!0}),s.signal)})},v=ZD(s.options,s.fetchOptions),j=async(w,_,P)=>{if(g)return Promise.reject();if(_==null&&w.pages.length)return Promise.resolve(w);const E={queryKey:s.queryKey,pageParam:_,direction:P?"backward":"forward",meta:s.options.meta};y(E);const L=await v(E),{maxPages:T}=s.options,M=P?VK:qK;return{pages:M(w.pages,L,T),pageParams:M(w.pageParams,_,T)}};if(a&&i.length){const w=a==="backward",_=w?eY:MC,P={pages:i,pageParams:o},E=_(n,P);l=await j(P,E,w)}else{const w=t??i.length;do{const _=c===0?o[0]??n.initialPageParam:MC(n,l);if(c>0&&_==null)break;l=await j(l,_),c++}while(c<w)}return l};s.options.persister?s.fetchFn=()=>{var g,y;return(y=(g=s.options).persister)==null?void 0:y.call(g,d,{queryKey:s.queryKey,meta:s.options.meta,signal:s.signal},r)}:s.fetchFn=d}}}function MC(t,{pages:s,pageParams:r}){const n=s.length-1;return s.length>0?t.getNextPageParam(s[n],s,r[n],r):void 0}function eY(t,{pages:s,pageParams:r}){var n;return s.length>0?(n=t.getPreviousPageParam)==null?void 0:n.call(t,s[0],s,r[0],r):void 0}var Zr,dd,ud,qh,Vh,md,Hh,Wh,DP,tY=(DP=class{constructor(t={}){as(this,Zr);as(this,dd);as(this,ud);as(this,qh);as(this,Vh);as(this,md);as(this,Hh);as(this,Wh);Et(this,Zr,t.queryCache||new ZK),Et(this,dd,t.mutationCache||new JK),Et(this,ud,t.defaultOptions||{}),Et(this,qh,new Map),Et(this,Vh,new Map),Et(this,md,0)}mount(){Pv(this,md)._++,Ae(this,md)===1&&(Et(this,Hh,h_.subscribe(async t=>{t&&(await this.resumePausedMutations(),Ae(this,Zr).onFocus())})),Et(this,Wh,k0.subscribe(async t=>{t&&(await this.resumePausedMutations(),Ae(this,Zr).onOnline())})))}unmount(){var t,s;Pv(this,md)._--,Ae(this,md)===0&&((t=Ae(this,Hh))==null||t.call(this),Et(this,Hh,void 0),(s=Ae(this,Wh))==null||s.call(this),Et(this,Wh,void 0))}isFetching(t){return Ae(this,Zr).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return Ae(this,dd).findAll({...t,status:"pending"}).length}getQueryData(t){var r;const s=this.defaultQueryOptions({queryKey:t});return(r=Ae(this,Zr).get(s.queryHash))==null?void 0:r.state.data}ensureQueryData(t){const s=this.getQueryData(t.queryKey);if(s===void 0)return this.fetchQuery(t);{const r=this.defaultQueryOptions(t),n=Ae(this,Zr).build(this,r);return t.revalidateIfStale&&n.isStaleByTime(wh(r.staleTime,n))&&this.prefetchQuery(r),Promise.resolve(s)}}getQueriesData(t){return Ae(this,Zr).findAll(t).map(({queryKey:s,state:r})=>{const n=r.data;return[s,n]})}setQueryData(t,s,r){const n=this.defaultQueryOptions({queryKey:t}),a=Ae(this,Zr).get(n.queryHash),i=a==null?void 0:a.state.data,o=UK(s,i);if(o!==void 0)return Ae(this,Zr).build(this,n).setData(o,{...r,manual:!0})}setQueriesData(t,s,r){return Mn.batch(()=>Ae(this,Zr).findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,s,r)]))}getQueryState(t){var r;const s=this.defaultQueryOptions({queryKey:t});return(r=Ae(this,Zr).get(s.queryHash))==null?void 0:r.state}removeQueries(t){const s=Ae(this,Zr);Mn.batch(()=>{s.findAll(t).forEach(r=>{s.remove(r)})})}resetQueries(t,s){const r=Ae(this,Zr),n={type:"active",...t};return Mn.batch(()=>(r.findAll(t).forEach(a=>{a.reset()}),this.refetchQueries(n,s)))}cancelQueries(t={},s={}){const r={revert:!0,...s},n=Mn.batch(()=>Ae(this,Zr).findAll(t).map(a=>a.cancel(r)));return Promise.all(n).then(Qi).catch(Qi)}invalidateQueries(t={},s={}){return Mn.batch(()=>{if(Ae(this,Zr).findAll(t).forEach(n=>{n.invalidate()}),t.refetchType==="none")return Promise.resolve();const r={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(r,s)})}refetchQueries(t={},s){const r={...s,cancelRefetch:(s==null?void 0:s.cancelRefetch)??!0},n=Mn.batch(()=>Ae(this,Zr).findAll(t).filter(a=>!a.isDisabled()).map(a=>{let i=a.fetch(void 0,r);return r.throwOnError||(i=i.catch(Qi)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(Qi)}fetchQuery(t){const s=this.defaultQueryOptions(t);s.retry===void 0&&(s.retry=!1);const r=Ae(this,Zr).build(this,s);return r.isStaleByTime(wh(s.staleTime,r))?r.fetch(s):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Qi).catch(Qi)}fetchInfiniteQuery(t){return t.behavior=TC(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Qi).catch(Qi)}ensureInfiniteQueryData(t){return t.behavior=TC(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return k0.isOnline()?Ae(this,dd).resumePausedMutations():Promise.resolve()}getQueryCache(){return Ae(this,Zr)}getMutationCache(){return Ae(this,dd)}getDefaultOptions(){return Ae(this,ud)}setDefaultOptions(t){Et(this,ud,t)}setQueryDefaults(t,s){Ae(this,qh).set(im(t),{queryKey:t,defaultOptions:s})}getQueryDefaults(t){const s=[...Ae(this,qh).values()];let r={};return s.forEach(n=>{Ix(t,n.queryKey)&&(r={...r,...n.defaultOptions})}),r}setMutationDefaults(t,s){Ae(this,Vh).set(im(t),{mutationKey:t,defaultOptions:s})}getMutationDefaults(t){const s=[...Ae(this,Vh).values()];let r={};return s.forEach(n=>{Ix(t,n.mutationKey)&&(r={...r,...n.defaultOptions})}),r}defaultQueryOptions(t){if(t._defaulted)return t;const s={...Ae(this,ud).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return s.queryHash||(s.queryHash=u_(s.queryKey,s)),s.refetchOnReconnect===void 0&&(s.refetchOnReconnect=s.networkMode!=="always"),s.throwOnError===void 0&&(s.throwOnError=!!s.suspense),!s.networkMode&&s.persister&&(s.networkMode="offlineFirst"),s.enabled!==!0&&s.queryFn===m_&&(s.enabled=!1),s}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...Ae(this,ud).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){Ae(this,Zr).clear(),Ae(this,dd).clear()}},Zr=new WeakMap,dd=new WeakMap,ud=new WeakMap,qh=new WeakMap,Vh=new WeakMap,md=new WeakMap,Hh=new WeakMap,Wh=new WeakMap,DP),Ha,qs,yg,ka,Wu,Kh,hd,hl,jg,Yh,Gh,Ku,Yu,fd,Qh,lr,Kp,GN,QN,ZN,XN,JN,ew,tw,nI,IP,sY=(IP=class extends Tf{constructor(s,r){super();as(this,lr);as(this,Ha);as(this,qs);as(this,yg);as(this,ka);as(this,Wu);as(this,Kh);as(this,hd);as(this,hl);as(this,jg);as(this,Yh);as(this,Gh);as(this,Ku);as(this,Yu);as(this,fd);as(this,Qh,new Set);this.options=r,Et(this,Ha,s),Et(this,hl,null),Et(this,hd,YN()),this.options.experimental_prefetchInRender||Ae(this,hd).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(Ae(this,qs).addObserver(this),LC(Ae(this,qs),this.options)?Es(this,lr,Kp).call(this):this.updateResult(),Es(this,lr,XN).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return sw(Ae(this,qs),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return sw(Ae(this,qs),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Es(this,lr,JN).call(this),Es(this,lr,ew).call(this),Ae(this,qs).removeObserver(this)}setOptions(s,r){const n=this.options,a=Ae(this,qs);if(this.options=Ae(this,Ha).defaultQueryOptions(s),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Eo(this.options.enabled,Ae(this,qs))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Es(this,lr,tw).call(this),Ae(this,qs).setOptions(this.options),n._defaulted&&!C0(this.options,n)&&Ae(this,Ha).getQueryCache().notify({type:"observerOptionsUpdated",query:Ae(this,qs),observer:this});const i=this.hasListeners();i&&DC(Ae(this,qs),a,this.options,n)&&Es(this,lr,Kp).call(this),this.updateResult(r),i&&(Ae(this,qs)!==a||Eo(this.options.enabled,Ae(this,qs))!==Eo(n.enabled,Ae(this,qs))||wh(this.options.staleTime,Ae(this,qs))!==wh(n.staleTime,Ae(this,qs)))&&Es(this,lr,GN).call(this);const o=Es(this,lr,QN).call(this);i&&(Ae(this,qs)!==a||Eo(this.options.enabled,Ae(this,qs))!==Eo(n.enabled,Ae(this,qs))||o!==Ae(this,fd))&&Es(this,lr,ZN).call(this,o)}getOptimisticResult(s){const r=Ae(this,Ha).getQueryCache().build(Ae(this,Ha),s),n=this.createResult(r,s);return nY(this,n)&&(Et(this,ka,n),Et(this,Kh,this.options),Et(this,Wu,Ae(this,qs).state)),n}getCurrentResult(){return Ae(this,ka)}trackResult(s,r){const n={};return Object.keys(s).forEach(a=>{Object.defineProperty(n,a,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(a),r==null||r(a),s[a])})}),n}trackProp(s){Ae(this,Qh).add(s)}getCurrentQuery(){return Ae(this,qs)}refetch({...s}={}){return this.fetch({...s})}fetchOptimistic(s){const r=Ae(this,Ha).defaultQueryOptions(s),n=Ae(this,Ha).getQueryCache().build(Ae(this,Ha),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(s){return Es(this,lr,Kp).call(this,{...s,cancelRefetch:s.cancelRefetch??!0}).then(()=>(this.updateResult(),Ae(this,ka)))}createResult(s,r){var T;const n=Ae(this,qs),a=this.options,i=Ae(this,ka),o=Ae(this,Wu),l=Ae(this,Kh),d=s!==n?s.state:Ae(this,yg),{state:u}=s;let m={...u},f=!1,h;if(r._optimisticResults){const M=this.hasListeners(),F=!M&&LC(s,r),k=M&&DC(s,n,r,a);(F||k)&&(m={...m,...sI(u.data,s.options)}),r._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:p,errorUpdatedAt:g,status:y}=m;if(r.select&&m.data!==void 0)if(i&&m.data===(o==null?void 0:o.data)&&r.select===Ae(this,jg))h=Ae(this,Yh);else try{Et(this,jg,r.select),h=r.select(m.data),h=KN(i==null?void 0:i.data,h,r),Et(this,Yh,h),Et(this,hl,null)}catch(M){Et(this,hl,M)}else h=m.data;if(r.placeholderData!==void 0&&h===void 0&&y==="pending"){let M;if(i!=null&&i.isPlaceholderData&&r.placeholderData===(l==null?void 0:l.placeholderData))M=i.data;else if(M=typeof r.placeholderData=="function"?r.placeholderData((T=Ae(this,Gh))==null?void 0:T.state.data,Ae(this,Gh)):r.placeholderData,r.select&&M!==void 0)try{M=r.select(M),Et(this,hl,null)}catch(F){Et(this,hl,F)}M!==void 0&&(y="success",h=KN(i==null?void 0:i.data,M,r),f=!0)}Ae(this,hl)&&(p=Ae(this,hl),h=Ae(this,Yh),g=Date.now(),y="error");const v=m.fetchStatus==="fetching",j=y==="pending",w=y==="error",_=j&&v,P=h!==void 0,L={status:y,fetchStatus:m.fetchStatus,isPending:j,isSuccess:y==="success",isError:w,isInitialLoading:_,isLoading:_,data:h,dataUpdatedAt:m.dataUpdatedAt,error:p,errorUpdatedAt:g,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>d.dataUpdateCount||m.errorUpdateCount>d.errorUpdateCount,isFetching:v,isRefetching:v&&!j,isLoadingError:w&&!P,isPaused:m.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:w&&P,isStale:f_(s,r),refetch:this.refetch,promise:Ae(this,hd)};if(this.options.experimental_prefetchInRender){const M=D=>{L.status==="error"?D.reject(L.error):L.data!==void 0&&D.resolve(L.data)},F=()=>{const D=Et(this,hd,L.promise=YN());M(D)},k=Ae(this,hd);switch(k.status){case"pending":s.queryHash===n.queryHash&&M(k);break;case"fulfilled":(L.status==="error"||L.data!==k.value)&&F();break;case"rejected":(L.status!=="error"||L.error!==k.reason)&&F();break}}return L}updateResult(s){const r=Ae(this,ka),n=this.createResult(Ae(this,qs),this.options);if(Et(this,Wu,Ae(this,qs).state),Et(this,Kh,this.options),Ae(this,Wu).data!==void 0&&Et(this,Gh,Ae(this,qs)),C0(n,r))return;Et(this,ka,n);const a={},i=()=>{if(!r)return!0;const{notifyOnChangeProps:o}=this.options,l=typeof o=="function"?o():o;if(l==="all"||!l&&!Ae(this,Qh).size)return!0;const c=new Set(l??Ae(this,Qh));return this.options.throwOnError&&c.add("error"),Object.keys(Ae(this,ka)).some(d=>{const u=d;return Ae(this,ka)[u]!==r[u]&&c.has(u)})};(s==null?void 0:s.listeners)!==!1&&i()&&(a.listeners=!0),Es(this,lr,nI).call(this,{...a,...s})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Es(this,lr,XN).call(this)}},Ha=new WeakMap,qs=new WeakMap,yg=new WeakMap,ka=new WeakMap,Wu=new WeakMap,Kh=new WeakMap,hd=new WeakMap,hl=new WeakMap,jg=new WeakMap,Yh=new WeakMap,Gh=new WeakMap,Ku=new WeakMap,Yu=new WeakMap,fd=new WeakMap,Qh=new WeakMap,lr=new WeakSet,Kp=function(s){Es(this,lr,tw).call(this);let r=Ae(this,qs).fetch(this.options,s);return s!=null&&s.throwOnError||(r=r.catch(Qi)),r},GN=function(){Es(this,lr,JN).call(this);const s=wh(this.options.staleTime,Ae(this,qs));if(am||Ae(this,ka).isStale||!HN(s))return;const n=GD(Ae(this,ka).dataUpdatedAt,s)+1;Et(this,Ku,setTimeout(()=>{Ae(this,ka).isStale||this.updateResult()},n))},QN=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(Ae(this,qs)):this.options.refetchInterval)??!1},ZN=function(s){Es(this,lr,ew).call(this),Et(this,fd,s),!(am||Eo(this.options.enabled,Ae(this,qs))===!1||!HN(Ae(this,fd))||Ae(this,fd)===0)&&Et(this,Yu,setInterval(()=>{(this.options.refetchIntervalInBackground||h_.isFocused())&&Es(this,lr,Kp).call(this)},Ae(this,fd)))},XN=function(){Es(this,lr,GN).call(this),Es(this,lr,ZN).call(this,Es(this,lr,QN).call(this))},JN=function(){Ae(this,Ku)&&(clearTimeout(Ae(this,Ku)),Et(this,Ku,void 0))},ew=function(){Ae(this,Yu)&&(clearInterval(Ae(this,Yu)),Et(this,Yu,void 0))},tw=function(){const s=Ae(this,Ha).getQueryCache().build(Ae(this,Ha),this.options);if(s===Ae(this,qs))return;const r=Ae(this,qs);Et(this,qs,s),Et(this,yg,s.state),this.hasListeners()&&(r==null||r.removeObserver(this),s.addObserver(this))},nI=function(s){Mn.batch(()=>{s.listeners&&this.listeners.forEach(r=>{r(Ae(this,ka))}),Ae(this,Ha).getQueryCache().notify({query:Ae(this,qs),type:"observerResultsUpdated"})})},IP);function rY(t,s){return Eo(s.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&s.retryOnMount===!1)}function LC(t,s){return rY(t,s)||t.state.data!==void 0&&sw(t,s,s.refetchOnMount)}function sw(t,s,r){if(Eo(s.enabled,t)!==!1){const n=typeof r=="function"?r(t):r;return n==="always"||n!==!1&&f_(t,s)}return!1}function DC(t,s,r,n){return(t!==s||Eo(n.enabled,t)===!1)&&(!r.suspense||t.state.status!=="error")&&f_(t,r)}function f_(t,s){return Eo(s.enabled,t)!==!1&&t.isStaleByTime(wh(s.staleTime,t))}function nY(t,s){return!C0(t.getCurrentResult(),s)}var pd,xd,Wa,uc,pc,Dy,rw,RP,aY=(RP=class extends Tf{constructor(r,n){super();as(this,pc);as(this,pd);as(this,xd);as(this,Wa);as(this,uc);Et(this,pd,r),this.setOptions(n),this.bindMethods(),Es(this,pc,Dy).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var a;const n=this.options;this.options=Ae(this,pd).defaultMutationOptions(r),C0(this.options,n)||Ae(this,pd).getMutationCache().notify({type:"observerOptionsUpdated",mutation:Ae(this,Wa),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&im(n.mutationKey)!==im(this.options.mutationKey)?this.reset():((a=Ae(this,Wa))==null?void 0:a.state.status)==="pending"&&Ae(this,Wa).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=Ae(this,Wa))==null||r.removeObserver(this)}onMutationUpdate(r){Es(this,pc,Dy).call(this),Es(this,pc,rw).call(this,r)}getCurrentResult(){return Ae(this,xd)}reset(){var r;(r=Ae(this,Wa))==null||r.removeObserver(this),Et(this,Wa,void 0),Es(this,pc,Dy).call(this),Es(this,pc,rw).call(this)}mutate(r,n){var a;return Et(this,uc,n),(a=Ae(this,Wa))==null||a.removeObserver(this),Et(this,Wa,Ae(this,pd).getMutationCache().build(Ae(this,pd),this.options)),Ae(this,Wa).addObserver(this),Ae(this,Wa).execute(r)}},pd=new WeakMap,xd=new WeakMap,Wa=new WeakMap,uc=new WeakMap,pc=new WeakSet,Dy=function(){var n;const r=((n=Ae(this,Wa))==null?void 0:n.state)??rI();Et(this,xd,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},rw=function(r){Mn.batch(()=>{var n,a,i,o,l,c,d,u;if(Ae(this,uc)&&this.hasListeners()){const m=Ae(this,xd).variables,f=Ae(this,xd).context;(r==null?void 0:r.type)==="success"?((a=(n=Ae(this,uc)).onSuccess)==null||a.call(n,r.data,m,f),(o=(i=Ae(this,uc)).onSettled)==null||o.call(i,r.data,null,m,f)):(r==null?void 0:r.type)==="error"&&((c=(l=Ae(this,uc)).onError)==null||c.call(l,r.error,m,f),(u=(d=Ae(this,uc)).onSettled)==null||u.call(d,void 0,r.error,m,f))}this.listeners.forEach(m=>{m(Ae(this,xd))})})},RP),aI=N.createContext(void 0),iI=t=>{const s=N.useContext(aI);if(!s)throw new Error("No QueryClient set, use QueryClientProvider to set one");return s},iY=({client:t,children:s})=>(N.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),e.jsx(aI.Provider,{value:t,children:s})),oI=N.createContext(!1),oY=()=>N.useContext(oI);oI.Provider;function lY(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var cY=N.createContext(lY()),dY=()=>N.useContext(cY);function lI(t,s){return typeof t=="function"?t(...s):!!t}function nw(){}var uY=(t,s)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(s.isReset()||(t.retryOnMount=!1))},mY=t=>{N.useEffect(()=>{t.clearReset()},[t])},hY=({result:t,errorResetBoundary:s,throwOnError:r,query:n})=>t.isError&&!s.isReset()&&!t.isFetching&&n&&lI(r,[t.error,n]),fY=t=>{t.suspense&&(t.staleTime===void 0&&(t.staleTime=1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},pY=(t,s)=>t.isLoading&&t.isFetching&&!s,xY=(t,s)=>(t==null?void 0:t.suspense)&&s.isPending,IC=(t,s,r)=>s.fetchOptimistic(t).catch(()=>{r.clearReset()});function gY(t,s,r){var u,m,f,h,p;const n=iI(),a=oY(),i=dY(),o=n.defaultQueryOptions(t);(m=(u=n.getDefaultOptions().queries)==null?void 0:u._experimental_beforeQuery)==null||m.call(u,o),o._optimisticResults=a?"isRestoring":"optimistic",fY(o),uY(o,i),mY(i);const l=!n.getQueryCache().get(o.queryHash),[c]=N.useState(()=>new s(n,o)),d=c.getOptimisticResult(o);if(N.useSyncExternalStore(N.useCallback(g=>{const y=a?nw:c.subscribe(Mn.batchCalls(g));return c.updateResult(),y},[c,a]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),N.useEffect(()=>{c.setOptions(o,{listeners:!1})},[o,c]),xY(o,d))throw IC(o,c,i);if(hY({result:d,errorResetBoundary:i,throwOnError:o.throwOnError,query:n.getQueryCache().get(o.queryHash)}))throw d.error;if((h=(f=n.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||h.call(f,o,d),o.experimental_prefetchInRender&&!am&&pY(d,a)){const g=l?IC(o,c,i):(p=n.getQueryCache().get(o.queryHash))==null?void 0:p.promise;g==null||g.catch(nw).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?d:c.trackResult(d)}function Xe(t,s){return gY(t,sY)}function yt(t,s){const r=iI(),[n]=N.useState(()=>new aY(r,t));N.useEffect(()=>{n.setOptions(t)},[n,t]);const a=N.useSyncExternalStore(N.useCallback(o=>n.subscribe(Mn.batchCalls(o)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),i=N.useCallback((o,l)=>{n.mutate(o,l).catch(nw)},[n]);if(a.error&&lI(n.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:i,mutateAsync:a.mutate}}const vY=()=>"",cI=vY();async function dI(t){if(!t.ok){const s=await t.text()||t.statusText;throw new Error(`${t.status}: ${s}`)}}async function pt(t,s,r){const n=await fetch(`${cI}${s}`,{method:t,headers:r?{"Content-Type":"application/json"}:{},body:r?JSON.stringify(r):void 0,credentials:"include"});return await dI(n),n}const yY=({on401:t})=>async({queryKey:s})=>{const r=await fetch(`${cI}${s.join("/")}`,{credentials:"include"});return t==="returnNull"&&r.status===401?null:(await dI(r),await r.json())},xt=new tY({defaultOptions:{queries:{queryFn:yY({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),jY=1,bY=1e6;let Ub=0;function NY(){return Ub=(Ub+1)%Number.MAX_SAFE_INTEGER,Ub.toString()}const zb=new Map,RC=t=>{if(zb.has(t))return;const s=setTimeout(()=>{zb.delete(t),ox({type:"REMOVE_TOAST",toastId:t})},bY);zb.set(t,s)},wY=(t,s)=>{switch(s.type){case"ADD_TOAST":return{...t,toasts:[s.toast,...t.toasts].slice(0,jY)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(r=>r.id===s.toast.id?{...r,...s.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=s;return r?RC(r):t.toasts.forEach(n=>{RC(n.id)}),{...t,toasts:t.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return s.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(r=>r.id!==s.toastId)}}},Iy=[];let Ry={toasts:[]};function ox(t){Ry=wY(Ry,t),Iy.forEach(s=>{s(Ry)})}function _Y({...t}){const s=NY(),r=a=>ox({type:"UPDATE_TOAST",toast:{...a,id:s}}),n=()=>ox({type:"DISMISS_TOAST",toastId:s});return ox({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:a=>{a||n()}}}),{id:s,dismiss:n,update:r}}function Ht(){const[t,s]=N.useState(Ry);return N.useEffect(()=>(Iy.push(s),()=>{const r=Iy.indexOf(s);r>-1&&Iy.splice(r,1)}),[t]),{...t,toast:_Y,dismiss:r=>ox({type:"DISMISS_TOAST",toastId:r})}}function ht(t,s,{checkForDefaultPrevented:r=!0}={}){return function(a){if(t==null||t(a),r===!1||!a.defaultPrevented)return s==null?void 0:s(a)}}function FC(t,s){if(typeof t=="function")return t(s);t!=null&&(t.current=s)}function B1(...t){return s=>{let r=!1;const n=t.map(a=>{const i=FC(a,s);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let a=0;a<n.length;a++){const i=n[a];typeof i=="function"?i():FC(t[a],null)}}}}function us(...t){return N.useCallback(B1(...t),t)}function SY(t,s){const r=N.createContext(s),n=i=>{const{children:o,...l}=i,c=N.useMemo(()=>l,Object.values(l));return e.jsx(r.Provider,{value:c,children:o})};n.displayName=t+"Provider";function a(i){const o=N.useContext(r);if(o)return o;if(s!==void 0)return s;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[n,a]}function Dn(t,s=[]){let r=[];function n(i,o){const l=N.createContext(o),c=r.length;r=[...r,o];const d=m=>{var v;const{scope:f,children:h,...p}=m,g=((v=f==null?void 0:f[t])==null?void 0:v[c])||l,y=N.useMemo(()=>p,Object.values(p));return e.jsx(g.Provider,{value:y,children:h})};d.displayName=i+"Provider";function u(m,f){var g;const h=((g=f==null?void 0:f[t])==null?void 0:g[c])||l,p=N.useContext(h);if(p)return p;if(o!==void 0)return o;throw new Error(`\`${m}\` must be used within \`${i}\``)}return[d,u]}const a=()=>{const i=r.map(o=>N.createContext(o));return function(l){const c=(l==null?void 0:l[t])||i;return N.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return a.scopeName=t,[n,CY(a,...s)]}function CY(...t){const s=t[0];if(t.length===1)return s;const r=()=>{const n=t.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=n.reduce((l,{useScope:c,scopeName:d})=>{const m=c(i)[`__scope${d}`];return{...l,...m}},{});return N.useMemo(()=>({[`__scope${s.scopeName}`]:o}),[o])}};return r.scopeName=s.scopeName,r}function om(t){const s=kY(t),r=N.forwardRef((n,a)=>{const{children:i,...o}=n,l=N.Children.toArray(i),c=l.find(AY);if(c){const d=c.props.children,u=l.map(m=>m===c?N.Children.count(d)>1?N.Children.only(null):N.isValidElement(d)?d.props.children:null:m);return e.jsx(s,{...o,ref:a,children:N.isValidElement(d)?N.cloneElement(d,void 0,u):null})}return e.jsx(s,{...o,ref:a,children:i})});return r.displayName=`${t}.Slot`,r}var uI=om("Slot");function kY(t){const s=N.forwardRef((r,n)=>{const{children:a,...i}=r;if(N.isValidElement(a)){const o=EY(a),l=PY(i,a.props);return a.type!==N.Fragment&&(l.ref=n?B1(n,o):o),N.cloneElement(a,l)}return N.Children.count(a)>1?N.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var mI=Symbol("radix.slottable");function hI(t){const s=({children:r})=>e.jsx(e.Fragment,{children:r});return s.displayName=`${t}.Slottable`,s.__radixId=mI,s}function AY(t){return N.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===mI}function PY(t,s){const r={...s};for(const n in s){const a=t[n],i=s[n];/^on[A-Z]/.test(n)?a&&i?r[n]=(...l)=>{i(...l),a(...l)}:a&&(r[n]=a):n==="style"?r[n]={...a,...i}:n==="className"&&(r[n]=[a,i].filter(Boolean).join(" "))}return{...t,...r}}function EY(t){var n,a;let s=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=s&&"isReactWarning"in s&&s.isReactWarning;return r?t.ref:(s=(a=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:a.get,r=s&&"isReactWarning"in s&&s.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function Mf(t){const s=t+"CollectionProvider",[r,n]=Dn(s),[a,i]=r(s,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:y,children:v}=g,j=Nt.useRef(null),w=Nt.useRef(new Map).current;return e.jsx(a,{scope:y,itemMap:w,collectionRef:j,children:v})};o.displayName=s;const l=t+"CollectionSlot",c=om(l),d=Nt.forwardRef((g,y)=>{const{scope:v,children:j}=g,w=i(l,v),_=us(y,w.collectionRef);return e.jsx(c,{ref:_,children:j})});d.displayName=l;const u=t+"CollectionItemSlot",m="data-radix-collection-item",f=om(u),h=Nt.forwardRef((g,y)=>{const{scope:v,children:j,...w}=g,_=Nt.useRef(null),P=us(y,_),E=i(u,v);return Nt.useEffect(()=>(E.itemMap.set(_,{ref:_,...w}),()=>void E.itemMap.delete(_))),e.jsx(f,{[m]:"",ref:P,children:j})});h.displayName=u;function p(g){const y=i(t+"CollectionConsumer",g);return Nt.useCallback(()=>{const j=y.collectionRef.current;if(!j)return[];const w=Array.from(j.querySelectorAll(`[${m}]`));return Array.from(y.itemMap.values()).sort((E,L)=>w.indexOf(E.ref.current)-w.indexOf(L.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:o,Slot:d,ItemSlot:h},p,n]}var TY=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Dt=TY.reduce((t,s)=>{const r=om(`Primitive.${s}`),n=N.forwardRef((a,i)=>{const{asChild:o,...l}=a,c=o?r:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(c,{...l,ref:i})});return n.displayName=`Primitive.${s}`,{...t,[s]:n}},{});function p_(t,s){t&&jm.flushSync(()=>t.dispatchEvent(s))}function Fr(t){const s=N.useRef(t);return N.useEffect(()=>{s.current=t}),N.useMemo(()=>(...r)=>{var n;return(n=s.current)==null?void 0:n.call(s,...r)},[])}function MY(t,s=globalThis==null?void 0:globalThis.document){const r=Fr(t);N.useEffect(()=>{const n=a=>{a.key==="Escape"&&r(a)};return s.addEventListener("keydown",n,{capture:!0}),()=>s.removeEventListener("keydown",n,{capture:!0})},[r,s])}var LY="DismissableLayer",aw="dismissableLayer.update",DY="dismissableLayer.pointerDownOutside",IY="dismissableLayer.focusOutside",OC,fI=N.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Lf=N.forwardRef((t,s)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=t,d=N.useContext(fI),[u,m]=N.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,h]=N.useState({}),p=us(s,L=>m(L)),g=Array.from(d.layers),[y]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),v=g.indexOf(y),j=u?g.indexOf(u):-1,w=d.layersWithOutsidePointerEventsDisabled.size>0,_=j>=v,P=FY(L=>{const T=L.target,M=[...d.branches].some(F=>F.contains(T));!_||M||(a==null||a(L),o==null||o(L),L.defaultPrevented||l==null||l())},f),E=OY(L=>{const T=L.target;[...d.branches].some(F=>F.contains(T))||(i==null||i(L),o==null||o(L),L.defaultPrevented||l==null||l())},f);return MY(L=>{j===d.layers.size-1&&(n==null||n(L),!L.defaultPrevented&&l&&(L.preventDefault(),l()))},f),N.useEffect(()=>{if(u)return r&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(OC=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),$C(),()=>{r&&d.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=OC)}},[u,f,r,d]),N.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),$C())},[u,d]),N.useEffect(()=>{const L=()=>h({});return document.addEventListener(aw,L),()=>document.removeEventListener(aw,L)},[]),e.jsx(Dt.div,{...c,ref:p,style:{pointerEvents:w?_?"auto":"none":void 0,...t.style},onFocusCapture:ht(t.onFocusCapture,E.onFocusCapture),onBlurCapture:ht(t.onBlurCapture,E.onBlurCapture),onPointerDownCapture:ht(t.onPointerDownCapture,P.onPointerDownCapture)})});Lf.displayName=LY;var RY="DismissableLayerBranch",pI=N.forwardRef((t,s)=>{const r=N.useContext(fI),n=N.useRef(null),a=us(s,n);return N.useEffect(()=>{const i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),e.jsx(Dt.div,{...t,ref:a})});pI.displayName=RY;function FY(t,s=globalThis==null?void 0:globalThis.document){const r=Fr(t),n=N.useRef(!1),a=N.useRef(()=>{});return N.useEffect(()=>{const i=l=>{if(l.target&&!n.current){let c=function(){xI(DY,r,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(s.removeEventListener("click",a.current),a.current=c,s.addEventListener("click",a.current,{once:!0})):c()}else s.removeEventListener("click",a.current);n.current=!1},o=window.setTimeout(()=>{s.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),s.removeEventListener("pointerdown",i),s.removeEventListener("click",a.current)}},[s,r]),{onPointerDownCapture:()=>n.current=!0}}function OY(t,s=globalThis==null?void 0:globalThis.document){const r=Fr(t),n=N.useRef(!1);return N.useEffect(()=>{const a=i=>{i.target&&!n.current&&xI(IY,r,{originalEvent:i},{discrete:!1})};return s.addEventListener("focusin",a),()=>s.removeEventListener("focusin",a)},[s,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function $C(){const t=new CustomEvent(aw);document.dispatchEvent(t)}function xI(t,s,r,{discrete:n}){const a=r.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});s&&a.addEventListener(t,s,{once:!0}),n?p_(a,i):a.dispatchEvent(i)}var $Y=Lf,BY=pI,gn=globalThis!=null&&globalThis.document?N.useLayoutEffect:()=>{},UY="Portal",Cg=N.forwardRef((t,s)=>{var l;const{container:r,...n}=t,[a,i]=N.useState(!1);gn(()=>i(!0),[]);const o=r||a&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?uK.createPortal(e.jsx(Dt.div,{...n,ref:s}),o):null});Cg.displayName=UY;function zY(t,s){return N.useReducer((r,n)=>s[r][n]??r,t)}var sa=t=>{const{present:s,children:r}=t,n=qY(s),a=typeof r=="function"?r({present:n.isPresent}):N.Children.only(r),i=us(n.ref,VY(a));return typeof r=="function"||n.isPresent?N.cloneElement(a,{ref:i}):null};sa.displayName="Presence";function qY(t){const[s,r]=N.useState(),n=N.useRef({}),a=N.useRef(t),i=N.useRef("none"),o=t?"mounted":"unmounted",[l,c]=zY(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return N.useEffect(()=>{const d=Yv(n.current);i.current=l==="mounted"?d:"none"},[l]),gn(()=>{const d=n.current,u=a.current;if(u!==t){const f=i.current,h=Yv(d);t?c("MOUNT"):h==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(u&&f!==h?"ANIMATION_OUT":"UNMOUNT"),a.current=t}},[t,c]),gn(()=>{if(s){let d;const u=s.ownerDocument.defaultView??window,m=h=>{const g=Yv(n.current).includes(h.animationName);if(h.target===s&&g&&(c("ANIMATION_END"),!a.current)){const y=s.style.animationFillMode;s.style.animationFillMode="forwards",d=u.setTimeout(()=>{s.style.animationFillMode==="forwards"&&(s.style.animationFillMode=y)})}},f=h=>{h.target===s&&(i.current=Yv(n.current))};return s.addEventListener("animationstart",f),s.addEventListener("animationcancel",m),s.addEventListener("animationend",m),()=>{u.clearTimeout(d),s.removeEventListener("animationstart",f),s.removeEventListener("animationcancel",m),s.removeEventListener("animationend",m)}}else c("ANIMATION_END")},[s,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:N.useCallback(d=>{d&&(n.current=getComputedStyle(d)),r(d)},[])}}function Yv(t){return(t==null?void 0:t.animationName)||"none"}function VY(t){var n,a;let s=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=s&&"isReactWarning"in s&&s.isReactWarning;return r?t.ref:(s=(a=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:a.get,r=s&&"isReactWarning"in s&&s.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function Ii({prop:t,defaultProp:s,onChange:r=()=>{}}){const[n,a]=HY({defaultProp:s,onChange:r}),i=t!==void 0,o=i?t:n,l=Fr(r),c=N.useCallback(d=>{if(i){const m=typeof d=="function"?d(t):d;m!==t&&l(m)}else a(d)},[i,t,a,l]);return[o,c]}function HY({defaultProp:t,onChange:s}){const r=N.useState(t),[n]=r,a=N.useRef(n),i=Fr(s);return N.useEffect(()=>{a.current!==n&&(i(n),a.current=n)},[n,a,i]),r}var WY="VisuallyHidden",kg=N.forwardRef((t,s)=>e.jsx(Dt.span,{...t,ref:s,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));kg.displayName=WY;var KY=kg,x_="ToastProvider",[g_,YY,GY]=Mf("Toast"),[gI,Rge]=Dn("Toast",[GY]),[QY,U1]=gI(x_),vI=t=>{const{__scopeToast:s,label:r="Notification",duration:n=5e3,swipeDirection:a="right",swipeThreshold:i=50,children:o}=t,[l,c]=N.useState(null),[d,u]=N.useState(0),m=N.useRef(!1),f=N.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${x_}\`. Expected non-empty \`string\`.`),e.jsx(g_.Provider,{scope:s,children:e.jsx(QY,{scope:s,label:r,duration:n,swipeDirection:a,swipeThreshold:i,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:N.useCallback(()=>u(h=>h+1),[]),onToastRemove:N.useCallback(()=>u(h=>h-1),[]),isFocusedToastEscapeKeyDownRef:m,isClosePausedRef:f,children:o})})};vI.displayName=x_;var yI="ToastViewport",ZY=["F8"],iw="toast.viewportPause",ow="toast.viewportResume",jI=N.forwardRef((t,s)=>{const{__scopeToast:r,hotkey:n=ZY,label:a="Notifications ({hotkey})",...i}=t,o=U1(yI,r),l=YY(r),c=N.useRef(null),d=N.useRef(null),u=N.useRef(null),m=N.useRef(null),f=us(s,m,o.onViewportChange),h=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),p=o.toastCount>0;N.useEffect(()=>{const y=v=>{var w;n.length!==0&&n.every(_=>v[_]||v.code===_)&&((w=m.current)==null||w.focus())};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[n]),N.useEffect(()=>{const y=c.current,v=m.current;if(p&&y&&v){const j=()=>{if(!o.isClosePausedRef.current){const E=new CustomEvent(iw);v.dispatchEvent(E),o.isClosePausedRef.current=!0}},w=()=>{if(o.isClosePausedRef.current){const E=new CustomEvent(ow);v.dispatchEvent(E),o.isClosePausedRef.current=!1}},_=E=>{!y.contains(E.relatedTarget)&&w()},P=()=>{y.contains(document.activeElement)||w()};return y.addEventListener("focusin",j),y.addEventListener("focusout",_),y.addEventListener("pointermove",j),y.addEventListener("pointerleave",P),window.addEventListener("blur",j),window.addEventListener("focus",w),()=>{y.removeEventListener("focusin",j),y.removeEventListener("focusout",_),y.removeEventListener("pointermove",j),y.removeEventListener("pointerleave",P),window.removeEventListener("blur",j),window.removeEventListener("focus",w)}}},[p,o.isClosePausedRef]);const g=N.useCallback(({tabbingDirection:y})=>{const j=l().map(w=>{const _=w.ref.current,P=[_,...dG(_)];return y==="forwards"?P:P.reverse()});return(y==="forwards"?j.reverse():j).flat()},[l]);return N.useEffect(()=>{const y=m.current;if(y){const v=j=>{var P,E,L;const w=j.altKey||j.ctrlKey||j.metaKey;if(j.key==="Tab"&&!w){const T=document.activeElement,M=j.shiftKey;if(j.target===y&&M){(P=d.current)==null||P.focus();return}const D=g({tabbingDirection:M?"backwards":"forwards"}),z=D.findIndex(W=>W===T);qb(D.slice(z+1))?j.preventDefault():M?(E=d.current)==null||E.focus():(L=u.current)==null||L.focus()}};return y.addEventListener("keydown",v),()=>y.removeEventListener("keydown",v)}},[l,g]),e.jsxs(BY,{ref:c,role:"region","aria-label":a.replace("{hotkey}",h),tabIndex:-1,style:{pointerEvents:p?void 0:"none"},children:[p&&e.jsx(lw,{ref:d,onFocusFromOutsideViewport:()=>{const y=g({tabbingDirection:"forwards"});qb(y)}}),e.jsx(g_.Slot,{scope:r,children:e.jsx(Dt.ol,{tabIndex:-1,...i,ref:f})}),p&&e.jsx(lw,{ref:u,onFocusFromOutsideViewport:()=>{const y=g({tabbingDirection:"backwards"});qb(y)}})]})});jI.displayName=yI;var bI="ToastFocusProxy",lw=N.forwardRef((t,s)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...a}=t,i=U1(bI,r);return e.jsx(kg,{"aria-hidden":!0,tabIndex:0,...a,ref:s,style:{position:"fixed"},onFocus:o=>{var d;const l=o.relatedTarget;!((d=i.viewport)!=null&&d.contains(l))&&n()}})});lw.displayName=bI;var z1="Toast",XY="toast.swipeStart",JY="toast.swipeMove",eG="toast.swipeCancel",tG="toast.swipeEnd",NI=N.forwardRef((t,s)=>{const{forceMount:r,open:n,defaultOpen:a,onOpenChange:i,...o}=t,[l=!0,c]=Ii({prop:n,defaultProp:a,onChange:i});return e.jsx(sa,{present:r||l,children:e.jsx(nG,{open:l,...o,ref:s,onClose:()=>c(!1),onPause:Fr(t.onPause),onResume:Fr(t.onResume),onSwipeStart:ht(t.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ht(t.onSwipeMove,d=>{const{x:u,y:m}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${m}px`)}),onSwipeCancel:ht(t.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ht(t.onSwipeEnd,d=>{const{x:u,y:m}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${m}px`),c(!1)})})})});NI.displayName=z1;var[sG,rG]=gI(z1,{onClose(){}}),nG=N.forwardRef((t,s)=>{const{__scopeToast:r,type:n="foreground",duration:a,open:i,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:u,onSwipeMove:m,onSwipeCancel:f,onSwipeEnd:h,...p}=t,g=U1(z1,r),[y,v]=N.useState(null),j=us(s,W=>v(W)),w=N.useRef(null),_=N.useRef(null),P=a||g.duration,E=N.useRef(0),L=N.useRef(P),T=N.useRef(0),{onToastAdd:M,onToastRemove:F}=g,k=Fr(()=>{var ue;(y==null?void 0:y.contains(document.activeElement))&&((ue=g.viewport)==null||ue.focus()),o()}),D=N.useCallback(W=>{!W||W===1/0||(window.clearTimeout(T.current),E.current=new Date().getTime(),T.current=window.setTimeout(k,W))},[k]);N.useEffect(()=>{const W=g.viewport;if(W){const ue=()=>{D(L.current),d==null||d()},ae=()=>{const Ne=new Date().getTime()-E.current;L.current=L.current-Ne,window.clearTimeout(T.current),c==null||c()};return W.addEventListener(iw,ae),W.addEventListener(ow,ue),()=>{W.removeEventListener(iw,ae),W.removeEventListener(ow,ue)}}},[g.viewport,P,c,d,D]),N.useEffect(()=>{i&&!g.isClosePausedRef.current&&D(P)},[i,P,g.isClosePausedRef,D]),N.useEffect(()=>(M(),()=>F()),[M,F]);const z=N.useMemo(()=>y?PI(y):null,[y]);return g.viewport?e.jsxs(e.Fragment,{children:[z&&e.jsx(aG,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:z}),e.jsx(sG,{scope:r,onClose:k,children:jm.createPortal(e.jsx(g_.ItemSlot,{scope:r,children:e.jsx($Y,{asChild:!0,onEscapeKeyDown:ht(l,()=>{g.isFocusedToastEscapeKeyDownRef.current||k(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:e.jsx(Dt.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":g.swipeDirection,...p,ref:j,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:ht(t.onKeyDown,W=>{W.key==="Escape"&&(l==null||l(W.nativeEvent),W.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,k()))}),onPointerDown:ht(t.onPointerDown,W=>{W.button===0&&(w.current={x:W.clientX,y:W.clientY})}),onPointerMove:ht(t.onPointerMove,W=>{if(!w.current)return;const ue=W.clientX-w.current.x,ae=W.clientY-w.current.y,Ne=!!_.current,K=["left","right"].includes(g.swipeDirection),Q=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,ke=K?Q(0,ue):0,G=K?0:Q(0,ae),I=W.pointerType==="touch"?10:2,Z={x:ke,y:G},J={originalEvent:W,delta:Z};Ne?(_.current=Z,Gv(JY,m,J,{discrete:!1})):BC(Z,g.swipeDirection,I)?(_.current=Z,Gv(XY,u,J,{discrete:!1}),W.target.setPointerCapture(W.pointerId)):(Math.abs(ue)>I||Math.abs(ae)>I)&&(w.current=null)}),onPointerUp:ht(t.onPointerUp,W=>{const ue=_.current,ae=W.target;if(ae.hasPointerCapture(W.pointerId)&&ae.releasePointerCapture(W.pointerId),_.current=null,w.current=null,ue){const Ne=W.currentTarget,K={originalEvent:W,delta:ue};BC(ue,g.swipeDirection,g.swipeThreshold)?Gv(tG,h,K,{discrete:!0}):Gv(eG,f,K,{discrete:!0}),Ne.addEventListener("click",Q=>Q.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),aG=t=>{const{__scopeToast:s,children:r,...n}=t,a=U1(z1,s),[i,o]=N.useState(!1),[l,c]=N.useState(!1);return lG(()=>o(!0)),N.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:e.jsx(Cg,{asChild:!0,children:e.jsx(kg,{...n,children:i&&e.jsxs(e.Fragment,{children:[a.label," ",r]})})})},iG="ToastTitle",wI=N.forwardRef((t,s)=>{const{__scopeToast:r,...n}=t;return e.jsx(Dt.div,{...n,ref:s})});wI.displayName=iG;var oG="ToastDescription",_I=N.forwardRef((t,s)=>{const{__scopeToast:r,...n}=t;return e.jsx(Dt.div,{...n,ref:s})});_I.displayName=oG;var SI="ToastAction",CI=N.forwardRef((t,s)=>{const{altText:r,...n}=t;return r.trim()?e.jsx(AI,{altText:r,asChild:!0,children:e.jsx(v_,{...n,ref:s})}):(console.error(`Invalid prop \`altText\` supplied to \`${SI}\`. Expected non-empty \`string\`.`),null)});CI.displayName=SI;var kI="ToastClose",v_=N.forwardRef((t,s)=>{const{__scopeToast:r,...n}=t,a=rG(kI,r);return e.jsx(AI,{asChild:!0,children:e.jsx(Dt.button,{type:"button",...n,ref:s,onClick:ht(t.onClick,a.onClose)})})});v_.displayName=kI;var AI=N.forwardRef((t,s)=>{const{__scopeToast:r,altText:n,...a}=t;return e.jsx(Dt.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...a,ref:s})});function PI(t){const s=[];return Array.from(t.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&s.push(n.textContent),cG(n)){const a=n.ariaHidden||n.hidden||n.style.display==="none",i=n.dataset.radixToastAnnounceExclude==="";if(!a)if(i){const o=n.dataset.radixToastAnnounceAlt;o&&s.push(o)}else s.push(...PI(n))}}),s}function Gv(t,s,r,{discrete:n}){const a=r.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:r});s&&a.addEventListener(t,s,{once:!0}),n?p_(a,i):a.dispatchEvent(i)}var BC=(t,s,r=0)=>{const n=Math.abs(t.x),a=Math.abs(t.y),i=n>a;return s==="left"||s==="right"?i&&n>r:!i&&a>r};function lG(t=()=>{}){const s=Fr(t);gn(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(s)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[s])}function cG(t){return t.nodeType===t.ELEMENT_NODE}function dG(t){const s=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)s.push(r.currentNode);return s}function qb(t){const s=document.activeElement;return t.some(r=>r===s?!0:(r.focus(),document.activeElement!==s))}var uG=vI,EI=jI,TI=NI,MI=wI,LI=_I,DI=CI,II=v_;function RI(t){var s,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(s=0;s<a;s++)t[s]&&(r=RI(t[s]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function FI(){for(var t,s,r=0,n="",a=arguments.length;r<a;r++)(t=arguments[r])&&(s=RI(t))&&(n&&(n+=" "),n+=s);return n}const UC=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,zC=FI,Ag=(t,s)=>r=>{var n;if((s==null?void 0:s.variants)==null)return zC(t,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:a,defaultVariants:i}=s,o=Object.keys(a).map(d=>{const u=r==null?void 0:r[d],m=i==null?void 0:i[d];if(u===null)return null;const f=UC(u)||UC(m);return a[d][f]}),l=r&&Object.entries(r).reduce((d,u)=>{let[m,f]=u;return f===void 0||(d[m]=f),d},{}),c=s==null||(n=s.compoundVariants)===null||n===void 0?void 0:n.reduce((d,u)=>{let{class:m,className:f,...h}=u;return Object.entries(h).every(p=>{let[g,y]=p;return Array.isArray(y)?y.includes({...i,...l}[g]):{...i,...l}[g]===y})?[...d,m,f]:d},[]);return zC(t,o,c,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mG=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),OI=(...t)=>t.filter((s,r,n)=>!!s&&n.indexOf(s)===r).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var hG={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fG=N.forwardRef(({color:t="currentColor",size:s=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:i,iconNode:o,...l},c)=>N.createElement("svg",{ref:c,...hG,width:s,height:s,stroke:t,strokeWidth:n?Number(r)*24/Number(s):r,className:OI("lucide",a),...l},[...o.map(([d,u])=>N.createElement(d,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=(t,s)=>{const r=N.forwardRef(({className:n,...a},i)=>N.createElement(fG,{ref:i,iconNode:s,className:OI(`lucide-${mG(t)}`,n),...a}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y_=Oe("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pG=Oe("Anchor",[["path",{d:"M12 22V8",key:"qkxhtm"}],["path",{d:"M5 12H2a10 10 0 0 0 20 0h-3",key:"1hv3nh"}],["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sr=Oe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j_=Oe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uo=Oe("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qC=Oe("Baby",[["path",{d:"M9 12h.01",key:"157uk2"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"5yv0yz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const af=Oe("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pg=Oe("Bird",[["path",{d:"M16 7h.01",key:"1kdx03"}],["path",{d:"M3.4 18H12a8 8 0 0 0 8-8V7a4 4 0 0 0-7.28-2.3L2 20",key:"oj1oa8"}],["path",{d:"m20 7 2 .5-2 .5",key:"12nv4d"}],["path",{d:"M10 18v3",key:"1yea0a"}],["path",{d:"M14 17.75V21",key:"1pymcb"}],["path",{d:"M7 18a6 6 0 0 0 3.84-10.61",key:"1npnn0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cw=Oe("Bluetooth",[["path",{d:"m7 7 10 10-5 5V2l5 5L7 17",key:"1q5490"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uo=Oe("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fh=Oe("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VC=Oe("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eg=Oe("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rx=Oe("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vl=Oe("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pi=Oe("Cake",[["path",{d:"M20 21v-8a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v8",key:"1w3rig"}],["path",{d:"M4 16s.5-1 2-1 2.5 2 4 2 2.5-2 4-2 2.5 2 4 2 2-1 2-1",key:"n2jgmb"}],["path",{d:"M2 21h20",key:"1nyx9w"}],["path",{d:"M7 8v3",key:"1qtyvj"}],["path",{d:"M12 8v3",key:"hwp4zt"}],["path",{d:"M17 8v3",key:"1i6e5u"}],["path",{d:"M7 4h.01",key:"1bh4kh"}],["path",{d:"M12 4h.01",key:"1ujb9j"}],["path",{d:"M17 4h.01",key:"1upcoc"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A0=Oe("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=Oe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $I=Oe("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BI=Oe("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b_=Oe("Cat",[["path",{d:"M12 5c.67 0 1.35.09 2 .26 1.78-2 5.03-2.84 6.42-2.26 1.4.58-.42 7-.42 7 .57 1.07 1 2.24 1 3.44C21 17.9 16.97 21 12 21s-9-3-9-7.56c0-1.25.5-2.4 1-3.44 0 0-1.89-6.42-.5-7 1.39-.58 4.72.23 6.5 2.23A9.04 9.04 0 0 1 12 5Z",key:"x6xyqk"}],["path",{d:"M8 14v.5",key:"1nzgdb"}],["path",{d:"M16 14v.5",key:"1lajdz"}],["path",{d:"M11.25 16.25h1.5L12 17l-.75-.75Z",key:"12kq1m"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UI=Oe("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $n=Oe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fx=Oe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zI=Oe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fd=Oe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xG=Oe("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qI=Oe("Church",[["path",{d:"M10 9h4",key:"u4k05v"}],["path",{d:"M12 7v5",key:"ma6bk"}],["path",{d:"M14 22v-4a2 2 0 0 0-4 0v4",key:"1pdhuj"}],["path",{d:"M18 22V5.618a1 1 0 0 0-.553-.894l-4.553-2.277a2 2 0 0 0-1.788 0L6.553 4.724A1 1 0 0 0 6 5.618V22",key:"1rkokr"}],["path",{d:"m18 7 3.447 1.724a1 1 0 0 1 .553.894V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9.618a1 1 0 0 1 .553-.894L6 7",key:"1w6esw"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bm=Oe("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P0=Oe("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oo=Oe("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dw=Oe("CircleDot",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _h=Oe("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vb=Oe("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E0=Oe("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=Oe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gG=Oe("Compass",[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const To=Oe("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N_=Oe("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tg=Oe("Cross",[["path",{d:"M11 2a2 2 0 0 0-2 2v5H4a2 2 0 0 0-2 2v2c0 1.1.9 2 2 2h5v5c0 1.1.9 2 2 2h2a2 2 0 0 0 2-2v-5h5a2 2 0 0 0 2-2v-2a2 2 0 0 0-2-2h-5V4a2 2 0 0 0-2-2h-2z",key:"1t5g7j"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zo=Oe("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w_=Oe("Dog",[["path",{d:"M11.25 16.25h1.5L12 17z",key:"w7jh35"}],["path",{d:"M16 14v.5",key:"1lajdz"}],["path",{d:"M4.42 11.247A13.152 13.152 0 0 0 4 14.556C4 18.728 7.582 21 12 21s8-2.272 8-6.444a11.702 11.702 0 0 0-.493-3.309",key:"u7s9ue"}],["path",{d:"M8 14v.5",key:"1nzgdb"}],["path",{d:"M8.5 8.5c-.384 1.05-1.083 2.028-2.344 2.5-1.931.722-3.576-.297-3.656-1-.113-.994 1.177-6.53 4-7 1.923-.321 3.651.845 3.651 2.235A7.497 7.497 0 0 1 14 5.277c0-1.39 1.844-2.598 3.767-2.277 2.823.47 4.113 6.006 4 7-.08.703-1.725 1.722-3.656 1-1.261-.472-1.855-1.45-2.239-2.5",key:"v8hric"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ga=Oe("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Al=Oe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vG=Oe("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pa=Oe("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VI=Oe("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ei=Oe("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yG=Oe("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jG=Oe("Factory",[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bG=Oe("Feather",[["path",{d:"M12.67 19a2 2 0 0 0 1.416-.588l6.154-6.172a6 6 0 0 0-8.49-8.49L5.586 9.914A2 2 0 0 0 5 11.328V18a1 1 0 0 0 1 1z",key:"18jl4k"}],["path",{d:"M16 8 2 22",key:"vp34q"}],["path",{d:"M17.5 15H9",key:"1oz8nu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NG=Oe("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Un=Oe("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HI=Oe("Film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T0=Oe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __=Oe("Fish",[["path",{d:"M6.5 12c.94-3.46 4.94-6 8.5-6 3.56 0 6.06 2.54 7 6-.94 3.47-3.44 6-7 6s-7.56-2.53-8.5-6Z",key:"15baut"}],["path",{d:"M18 12v.5",key:"18hhni"}],["path",{d:"M16 17.93a9.77 9.77 0 0 1 0-11.86",key:"16dt7o"}],["path",{d:"M7 10.67C7 8 5.58 5.97 2.73 5.5c-1 1.5-1 5 .23 6.5-1.24 1.5-1.24 5-.23 6.5C5.58 18.03 7 16 7 13.33",key:"l9di03"}],["path",{d:"M10.46 7.26C10.2 5.88 9.17 4.24 8 3h5.8a2 2 0 0 1 1.98 1.67l.23 1.4",key:"1kjonw"}],["path",{d:"m16.01 17.93-.23 1.4A2 2 0 0 1 13.8 21H9.5a5.96 5.96 0 0 0 1.49-3.98",key:"1zlm23"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wG=Oe("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=Oe("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const of=Oe("Flower2",[["path",{d:"M12 5a3 3 0 1 1 3 3m-3-3a3 3 0 1 0-3 3m3-3v1M9 8a3 3 0 1 0 3 3M9 8h1m5 0a3 3 0 1 1-3 3m3-3h-1m-2 3v-1",key:"3pnvol"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["path",{d:"M12 10v12",key:"6ubwww"}],["path",{d:"M12 22c4.2 0 7-1.667 7-5-4.2 0-7 1.667-7 5Z",key:"9hd38g"}],["path",{d:"M12 22c-4.2 0-7-1.667-7-5 4.2 0 7 1.667 7 5Z",key:"ufn41s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _G=Oe("Flower",[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"M12 16.5A4.5 4.5 0 1 1 7.5 12 4.5 4.5 0 1 1 12 7.5a4.5 4.5 0 1 1 4.5 4.5 4.5 4.5 0 1 1-4.5 4.5",key:"14wa3c"}],["path",{d:"M12 7.5V9",key:"1oy5b0"}],["path",{d:"M7.5 12H9",key:"eltsq1"}],["path",{d:"M16.5 12H15",key:"vk5kw4"}],["path",{d:"M12 16.5V15",key:"k7eayi"}],["path",{d:"m8 8 1.88 1.88",key:"nxy4qf"}],["path",{d:"M14.12 9.88 16 8",key:"1lst6k"}],["path",{d:"m8 16 1.88-1.88",key:"h2eex1"}],["path",{d:"M14.12 14.12 16 16",key:"uqkrx3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WI=Oe("Footprints",[["path",{d:"M4 16v-2.38C4 11.5 2.97 10.5 3 8c.03-2.72 1.49-6 4.5-6C9.37 2 10 3.8 10 5.5c0 3.11-2 5.66-2 8.68V16a2 2 0 1 1-4 0Z",key:"1dudjm"}],["path",{d:"M20 20v-2.38c0-2.12 1.03-3.12 1-5.62-.03-2.72-1.49-6-4.5-6C14.63 6 14 7.8 14 9.5c0 3.11 2 5.66 2 8.68V20a2 2 0 1 0 4 0Z",key:"l2t8xc"}],["path",{d:"M16 17h4",key:"1dejxt"}],["path",{d:"M4 13h4",key:"1bwh8b"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SG=Oe("Frame",[["line",{x1:"22",x2:"2",y1:"6",y2:"6",key:"15w7dq"}],["line",{x1:"22",x2:"2",y1:"18",y2:"18",key:"1ip48p"}],["line",{x1:"6",x2:"6",y1:"2",y2:"22",key:"a2lnyx"}],["line",{x1:"18",x2:"18",y1:"2",y2:"22",key:"8vb6jd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lm=Oe("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qo=Oe("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Za=Oe("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uw=Oe("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S_=Oe("HandHeart",[["path",{d:"M11 14h2a2 2 0 1 0 0-4h-3c-.6 0-1.1.2-1.4.6L3 16",key:"1ifwr1"}],["path",{d:"m7 20 1.6-1.4c.3-.4.8-.6 1.4-.6h4c1.1 0 2.1-.4 2.8-1.2l4.6-4.4a2 2 0 0 0-2.75-2.91l-4.2 3.9",key:"17abbs"}],["path",{d:"m2 15 6 6",key:"10dquu"}],["path",{d:"M19.5 8.5c.7-.7 1.5-1.6 1.5-2.7A2.73 2.73 0 0 0 16 4a2.78 2.78 0 0 0-5 1.8c0 1.2.8 2 1.5 2.8L16 12Z",key:"1h3036"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CG=Oe("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KI=Oe("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HC=Oe("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YI=Oe("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=Oe("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lf=Oe("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vi=Oe("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kG=Oe("Infinity",[["path",{d:"M12 12c-2-2.67-4-4-6-4a4 4 0 1 0 0 8c2 0 4-1.33 6-4Zm0 0c2 2.67 4 4 6 4a4 4 0 0 0 0-8c-2 0-4 1.33-6 4Z",key:"1z0uae"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WC=Oe("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AG=Oe("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PG=Oe("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EG=Oe("LifeBuoy",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.93 4.93 4.24 4.24",key:"1ymg45"}],["path",{d:"m14.83 9.17 4.24-4.24",key:"1cb5xl"}],["path",{d:"m14.83 14.83 4.24 4.24",key:"q42g0n"}],["path",{d:"m9.17 14.83-4.24 4.24",key:"bqpfvv"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GI=Oe("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TG=Oe("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tn=Oe("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Od=Oe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MG=Oe("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LG=Oe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ti=Oe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tr=Oe("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DG=Oe("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IG=Oe("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fy=Oe("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mw=Oe("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pl=Oe("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nn=Oe("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QI=Oe("MicVocal",[["path",{d:"m11 7.601-5.994 8.19a1 1 0 0 0 .1 1.298l.817.818a1 1 0 0 0 1.314.087L15.09 12",key:"80a601"}],["path",{d:"M16.5 21.174C15.5 20.5 14.372 20 13 20c-2.058 0-3.928 2.356-6 2-2.072-.356-2.775-3.369-1.5-4.5",key:"j0ngtp"}],["circle",{cx:"16",cy:"7",r:"5",key:"d08jfb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oy=Oe("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ka=Oe("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZI=Oe("Mountain",[["path",{d:"m8 3 4 8 5-5 5 15H2L8 3z",key:"otkl63"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zn=Oe("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M0=Oe("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _i=Oe("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C_=Oe("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KC=Oe("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ao=Oe("PartyPopper",[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RG=Oe("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Si=Oe("PawPrint",[["circle",{cx:"11",cy:"4",r:"2",key:"vol9p0"}],["circle",{cx:"18",cy:"8",r:"2",key:"17gozi"}],["circle",{cx:"20",cy:"16",r:"2",key:"1v9bxh"}],["path",{d:"M9 10a5 5 0 0 1 5 5v3.5a3.5 3.5 0 0 1-6.84 1.045Q6.52 17.48 4.46 16.84A3.5 3.5 0 0 1 5.5 10Z",key:"1ydw1z"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XI=Oe("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $d=Oe("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FG=Oe("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bd=Oe("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=Oe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OG=Oe("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=Oe("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k_=Oe("Rabbit",[["path",{d:"M13 16a3 3 0 0 1 2.24 5",key:"1epib5"}],["path",{d:"M18 12h.01",key:"yjnet6"}],["path",{d:"M18 21h-8a4 4 0 0 1-4-4 7 7 0 0 1 7-7h.2L9.6 6.4a1 1 0 1 1 2.8-2.8L15.8 7h.2c3.3 0 6 2.7 6 6v1a2 2 0 0 1-2 2h-1a3 3 0 0 0-3 3",key:"ue9ozu"}],["path",{d:"M20 8.54V4a2 2 0 1 0-4 0v3",key:"49iql8"}],["path",{d:"M7.612 12.524a3 3 0 1 0-1.6 4.3",key:"1e33i0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zu=Oe("Rainbow",[["path",{d:"M22 17a10 10 0 0 0-20 0",key:"ozegv"}],["path",{d:"M6 17a6 6 0 0 1 12 0",key:"5giftw"}],["path",{d:"M10 17a2 2 0 0 1 4 0",key:"gnsikk"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A_=Oe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ox=Oe("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P_=Oe("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cc=Oe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $x=Oe("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E_=Oe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const so=Oe("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const va=Oe("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $G=Oe("Shirt",[["path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z",key:"1wgbhj"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ud=Oe("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BG=Oe("SkipBack",[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UG=Oe("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T_=Oe("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bs=Oe("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zG=Oe("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mg=Oe("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q1=Oe("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=Oe("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yi=Oe("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lx=Oe("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qG=Oe("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jc=Oe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Um=Oe("TreeDeciduous",[["path",{d:"M8 19a4 4 0 0 1-2.24-7.32A3.5 3.5 0 0 1 9 6.03V6a3 3 0 1 1 6 0v.04a3.5 3.5 0 0 1 3.24 5.65A4 4 0 0 1 16 19Z",key:"oadzkq"}],["path",{d:"M12 19v3",key:"npa21l"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bx=Oe("TreePine",[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z",key:"cpyugq"}],["path",{d:"M12 22v-3",key:"kmzjlo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mo=Oe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $y=Oe("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ni=Oe("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M_=Oe("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VG=Oe("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zd=Oe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JI=Oe("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V1=Oe("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eu=Oe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=Oe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ta=Oe("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HG=Oe("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WG=Oe("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eR=Oe("Waves",[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KG=Oe("Wind",[["path",{d:"M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2",key:"1k4u03"}],["path",{d:"M9.6 4.6A2 2 0 1 1 11 8H2",key:"b7d0fd"}],["path",{d:"M12.6 19.4A2 2 0 1 0 14 16H2",key:"1p5cb3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YG=Oe("Workflow",[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vo=Oe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tR=Oe("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),L_="-",GG=t=>{const s=ZG(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:o=>{const l=o.split(L_);return l[0]===""&&l.length!==1&&l.shift(),sR(l,s)||QG(o)},getConflictingClassGroupIds:(o,l)=>{const c=r[o]||[];return l&&n[o]?[...c,...n[o]]:c}}},sR=(t,s)=>{var o;if(t.length===0)return s.classGroupId;const r=t[0],n=s.nextPart.get(r),a=n?sR(t.slice(1),n):void 0;if(a)return a;if(s.validators.length===0)return;const i=t.join(L_);return(o=s.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},YC=/^\[(.+)\]$/,QG=t=>{if(YC.test(t)){const s=YC.exec(t)[1],r=s==null?void 0:s.substring(0,s.indexOf(":"));if(r)return"arbitrary.."+r}},ZG=t=>{const{theme:s,prefix:r}=t,n={nextPart:new Map,validators:[]};return JG(Object.entries(t.classGroups),r).forEach(([i,o])=>{hw(o,n,i,s)}),n},hw=(t,s,r,n)=>{t.forEach(a=>{if(typeof a=="string"){const i=a===""?s:GC(s,a);i.classGroupId=r;return}if(typeof a=="function"){if(XG(a)){hw(a(n),s,r,n);return}s.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([i,o])=>{hw(o,GC(s,i),r,n)})})},GC=(t,s)=>{let r=t;return s.split(L_).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},XG=t=>t.isThemeGetter,JG=(t,s)=>s?t.map(([r,n])=>{const a=n.map(i=>typeof i=="string"?s+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[s+o,l])):i);return[r,a]}):t,eQ=t=>{if(t<1)return{get:()=>{},set:()=>{}};let s=0,r=new Map,n=new Map;const a=(i,o)=>{r.set(i,o),s++,s>t&&(s=0,n=r,r=new Map)};return{get(i){let o=r.get(i);if(o!==void 0)return o;if((o=n.get(i))!==void 0)return a(i,o),o},set(i,o){r.has(i)?r.set(i,o):a(i,o)}}},rR="!",tQ=t=>{const{separator:s,experimentalParseClassName:r}=t,n=s.length===1,a=s[0],i=s.length,o=l=>{const c=[];let d=0,u=0,m;for(let y=0;y<l.length;y++){let v=l[y];if(d===0){if(v===a&&(n||l.slice(y,y+i)===s)){c.push(l.slice(u,y)),u=y+i;continue}if(v==="/"){m=y;continue}}v==="["?d++:v==="]"&&d--}const f=c.length===0?l:l.substring(u),h=f.startsWith(rR),p=h?f.substring(1):f,g=m&&m>u?m-u:void 0;return{modifiers:c,hasImportantModifier:h,baseClassName:p,maybePostfixModifierPosition:g}};return r?l=>r({className:l,parseClassName:o}):o},sQ=t=>{if(t.length<=1)return t;const s=[];let r=[];return t.forEach(n=>{n[0]==="["?(s.push(...r.sort(),n),r=[]):r.push(n)}),s.push(...r.sort()),s},rQ=t=>({cache:eQ(t.cacheSize),parseClassName:tQ(t),...GG(t)}),nQ=/\s+/,aQ=(t,s)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:a}=s,i=[],o=t.trim().split(nQ);let l="";for(let c=o.length-1;c>=0;c-=1){const d=o[c],{modifiers:u,hasImportantModifier:m,baseClassName:f,maybePostfixModifierPosition:h}=r(d);let p=!!h,g=n(p?f.substring(0,h):f);if(!g){if(!p){l=d+(l.length>0?" "+l:l);continue}if(g=n(f),!g){l=d+(l.length>0?" "+l:l);continue}p=!1}const y=sQ(u).join(":"),v=m?y+rR:y,j=v+g;if(i.includes(j))continue;i.push(j);const w=a(g,p);for(let _=0;_<w.length;++_){const P=w[_];i.push(v+P)}l=d+(l.length>0?" "+l:l)}return l};function iQ(){let t=0,s,r,n="";for(;t<arguments.length;)(s=arguments[t++])&&(r=nR(s))&&(n&&(n+=" "),n+=r);return n}const nR=t=>{if(typeof t=="string")return t;let s,r="";for(let n=0;n<t.length;n++)t[n]&&(s=nR(t[n]))&&(r&&(r+=" "),r+=s);return r};function oQ(t,...s){let r,n,a,i=o;function o(c){const d=s.reduce((u,m)=>m(u),t());return r=rQ(d),n=r.cache.get,a=r.cache.set,i=l,l(c)}function l(c){const d=n(c);if(d)return d;const u=aQ(c,r);return a(c,u),u}return function(){return i(iQ.apply(null,arguments))}}const kr=t=>{const s=r=>r[t]||[];return s.isThemeGetter=!0,s},aR=/^\[(?:([a-z-]+):)?(.+)\]$/i,lQ=/^\d+\/\d+$/,cQ=new Set(["px","full","screen"]),dQ=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,uQ=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,mQ=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,hQ=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,fQ=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Jl=t=>Sh(t)||cQ.has(t)||lQ.test(t),Kc=t=>Df(t,"length",NQ),Sh=t=>!!t&&!Number.isNaN(Number(t)),Hb=t=>Df(t,"number",Sh),Ep=t=>!!t&&Number.isInteger(Number(t)),pQ=t=>t.endsWith("%")&&Sh(t.slice(0,-1)),As=t=>aR.test(t),Yc=t=>dQ.test(t),xQ=new Set(["length","size","percentage"]),gQ=t=>Df(t,xQ,iR),vQ=t=>Df(t,"position",iR),yQ=new Set(["image","url"]),jQ=t=>Df(t,yQ,_Q),bQ=t=>Df(t,"",wQ),Tp=()=>!0,Df=(t,s,r)=>{const n=aR.exec(t);return n?n[1]?typeof s=="string"?n[1]===s:s.has(n[1]):r(n[2]):!1},NQ=t=>uQ.test(t)&&!mQ.test(t),iR=()=>!1,wQ=t=>hQ.test(t),_Q=t=>fQ.test(t),SQ=()=>{const t=kr("colors"),s=kr("spacing"),r=kr("blur"),n=kr("brightness"),a=kr("borderColor"),i=kr("borderRadius"),o=kr("borderSpacing"),l=kr("borderWidth"),c=kr("contrast"),d=kr("grayscale"),u=kr("hueRotate"),m=kr("invert"),f=kr("gap"),h=kr("gradientColorStops"),p=kr("gradientColorStopPositions"),g=kr("inset"),y=kr("margin"),v=kr("opacity"),j=kr("padding"),w=kr("saturate"),_=kr("scale"),P=kr("sepia"),E=kr("skew"),L=kr("space"),T=kr("translate"),M=()=>["auto","contain","none"],F=()=>["auto","hidden","clip","visible","scroll"],k=()=>["auto",As,s],D=()=>[As,s],z=()=>["",Jl,Kc],W=()=>["auto",Sh,As],ue=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ae=()=>["solid","dashed","dotted","double","none"],Ne=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],K=()=>["start","end","center","between","around","evenly","stretch"],Q=()=>["","0",As],ke=()=>["auto","avoid","all","avoid-page","page","left","right","column"],G=()=>[Sh,As];return{cacheSize:500,separator:":",theme:{colors:[Tp],spacing:[Jl,Kc],blur:["none","",Yc,As],brightness:G(),borderColor:[t],borderRadius:["none","","full",Yc,As],borderSpacing:D(),borderWidth:z(),contrast:G(),grayscale:Q(),hueRotate:G(),invert:Q(),gap:D(),gradientColorStops:[t],gradientColorStopPositions:[pQ,Kc],inset:k(),margin:k(),opacity:G(),padding:D(),saturate:G(),scale:G(),sepia:Q(),skew:G(),space:D(),translate:D()},classGroups:{aspect:[{aspect:["auto","square","video",As]}],container:["container"],columns:[{columns:[Yc]}],"break-after":[{"break-after":ke()}],"break-before":[{"break-before":ke()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ue(),As]}],overflow:[{overflow:F()}],"overflow-x":[{"overflow-x":F()}],"overflow-y":[{"overflow-y":F()}],overscroll:[{overscroll:M()}],"overscroll-x":[{"overscroll-x":M()}],"overscroll-y":[{"overscroll-y":M()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ep,As]}],basis:[{basis:k()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",As]}],grow:[{grow:Q()}],shrink:[{shrink:Q()}],order:[{order:["first","last","none",Ep,As]}],"grid-cols":[{"grid-cols":[Tp]}],"col-start-end":[{col:["auto",{span:["full",Ep,As]},As]}],"col-start":[{"col-start":W()}],"col-end":[{"col-end":W()}],"grid-rows":[{"grid-rows":[Tp]}],"row-start-end":[{row:["auto",{span:[Ep,As]},As]}],"row-start":[{"row-start":W()}],"row-end":[{"row-end":W()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",As]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",As]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...K()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...K(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...K(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[j]}],px:[{px:[j]}],py:[{py:[j]}],ps:[{ps:[j]}],pe:[{pe:[j]}],pt:[{pt:[j]}],pr:[{pr:[j]}],pb:[{pb:[j]}],pl:[{pl:[j]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[L]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[L]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",As,s]}],"min-w":[{"min-w":[As,s,"min","max","fit"]}],"max-w":[{"max-w":[As,s,"none","full","min","max","fit","prose",{screen:[Yc]},Yc]}],h:[{h:[As,s,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[As,s,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[As,s,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[As,s,"auto","min","max","fit"]}],"font-size":[{text:["base",Yc,Kc]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Hb]}],"font-family":[{font:[Tp]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",As]}],"line-clamp":[{"line-clamp":["none",Sh,Hb]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Jl,As]}],"list-image":[{"list-image":["none",As]}],"list-style-type":[{list:["none","disc","decimal",As]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ae(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Jl,Kc]}],"underline-offset":[{"underline-offset":["auto",Jl,As]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:D()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",As]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",As]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ue(),vQ]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",gQ]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},jQ]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[h]}],"gradient-via":[{via:[h]}],"gradient-to":[{to:[h]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...ae(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:ae()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...ae()]}],"outline-offset":[{"outline-offset":[Jl,As]}],"outline-w":[{outline:[Jl,Kc]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:z()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[Jl,Kc]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Yc,bQ]}],"shadow-color":[{shadow:[Tp]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...Ne(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Ne()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Yc,As]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[m]}],saturate:[{saturate:[w]}],sepia:[{sepia:[P]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[m]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[P]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",As]}],duration:[{duration:G()}],ease:[{ease:["linear","in","out","in-out",As]}],delay:[{delay:G()}],animate:[{animate:["none","spin","ping","pulse","bounce",As]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[_]}],"scale-x":[{"scale-x":[_]}],"scale-y":[{"scale-y":[_]}],rotate:[{rotate:[Ep,As]}],"translate-x":[{"translate-x":[T]}],"translate-y":[{"translate-y":[T]}],"skew-x":[{"skew-x":[E]}],"skew-y":[{"skew-y":[E]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",As]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",As]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":D()}],"scroll-mx":[{"scroll-mx":D()}],"scroll-my":[{"scroll-my":D()}],"scroll-ms":[{"scroll-ms":D()}],"scroll-me":[{"scroll-me":D()}],"scroll-mt":[{"scroll-mt":D()}],"scroll-mr":[{"scroll-mr":D()}],"scroll-mb":[{"scroll-mb":D()}],"scroll-ml":[{"scroll-ml":D()}],"scroll-p":[{"scroll-p":D()}],"scroll-px":[{"scroll-px":D()}],"scroll-py":[{"scroll-py":D()}],"scroll-ps":[{"scroll-ps":D()}],"scroll-pe":[{"scroll-pe":D()}],"scroll-pt":[{"scroll-pt":D()}],"scroll-pr":[{"scroll-pr":D()}],"scroll-pb":[{"scroll-pb":D()}],"scroll-pl":[{"scroll-pl":D()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",As]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Jl,Kc,Hb]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},CQ=oQ(SQ);function bt(...t){return CQ(FI(t))}const kQ=uG,oR=N.forwardRef(({className:t,...s},r)=>e.jsx(EI,{ref:r,className:bt("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...s}));oR.displayName=EI.displayName;const AQ=Ag("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),lR=N.forwardRef(({className:t,variant:s,...r},n)=>e.jsx(TI,{ref:n,className:bt(AQ({variant:s}),t),...r}));lR.displayName=TI.displayName;const PQ=N.forwardRef(({className:t,...s},r)=>e.jsx(DI,{ref:r,className:bt("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...s}));PQ.displayName=DI.displayName;const cR=N.forwardRef(({className:t,...s},r)=>e.jsx(II,{ref:r,className:bt("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...s,children:e.jsx(Vo,{className:"h-4 w-4"})}));cR.displayName=II.displayName;const dR=N.forwardRef(({className:t,...s},r)=>e.jsx(MI,{ref:r,className:bt("text-sm font-semibold",t),...s}));dR.displayName=MI.displayName;const uR=N.forwardRef(({className:t,...s},r)=>e.jsx(LI,{ref:r,className:bt("text-sm opacity-90",t),...s}));uR.displayName=LI.displayName;function EQ(){const{toasts:t}=Ht();return e.jsxs(kQ,{children:[t.map(function({id:s,title:r,description:n,action:a,...i}){return e.jsxs(lR,{...i,children:[e.jsxs("div",{className:"grid gap-1",children:[r&&e.jsx(dR,{children:r}),n&&e.jsx(uR,{children:n})]}),a,e.jsx(cR,{})]},s)}),e.jsx(oR,{})]})}var TQ=IM[" useId ".trim().toString()]||(()=>{}),MQ=0;function io(t){const[s,r]=N.useState(TQ());return gn(()=>{t||r(n=>n??String(MQ++))},[t]),t||(s?`radix-${s}`:"")}const LQ=["top","right","bottom","left"],qd=Math.min,ji=Math.max,L0=Math.round,Qv=Math.floor,wl=t=>({x:t,y:t}),DQ={left:"right",right:"left",bottom:"top",top:"bottom"},IQ={start:"end",end:"start"};function fw(t,s,r){return ji(t,qd(s,r))}function bc(t,s){return typeof t=="function"?t(s):t}function Nc(t){return t.split("-")[0]}function If(t){return t.split("-")[1]}function D_(t){return t==="x"?"y":"x"}function I_(t){return t==="y"?"height":"width"}function Vd(t){return["top","bottom"].includes(Nc(t))?"y":"x"}function R_(t){return D_(Vd(t))}function RQ(t,s,r){r===void 0&&(r=!1);const n=If(t),a=R_(t),i=I_(a);let o=a==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return s.reference[i]>s.floating[i]&&(o=D0(o)),[o,D0(o)]}function FQ(t){const s=D0(t);return[pw(t),s,pw(s)]}function pw(t){return t.replace(/start|end/g,s=>IQ[s])}function OQ(t,s,r){const n=["left","right"],a=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return r?s?a:n:s?n:a;case"left":case"right":return s?i:o;default:return[]}}function $Q(t,s,r,n){const a=If(t);let i=OQ(Nc(t),r==="start",n);return a&&(i=i.map(o=>o+"-"+a),s&&(i=i.concat(i.map(pw)))),i}function D0(t){return t.replace(/left|right|bottom|top/g,s=>DQ[s])}function BQ(t){return{top:0,right:0,bottom:0,left:0,...t}}function mR(t){return typeof t!="number"?BQ(t):{top:t,right:t,bottom:t,left:t}}function I0(t){const{x:s,y:r,width:n,height:a}=t;return{width:n,height:a,top:r,left:s,right:s+n,bottom:r+a,x:s,y:r}}function QC(t,s,r){let{reference:n,floating:a}=t;const i=Vd(s),o=R_(s),l=I_(o),c=Nc(s),d=i==="y",u=n.x+n.width/2-a.width/2,m=n.y+n.height/2-a.height/2,f=n[l]/2-a[l]/2;let h;switch(c){case"top":h={x:u,y:n.y-a.height};break;case"bottom":h={x:u,y:n.y+n.height};break;case"right":h={x:n.x+n.width,y:m};break;case"left":h={x:n.x-a.width,y:m};break;default:h={x:n.x,y:n.y}}switch(If(s)){case"start":h[o]-=f*(r&&d?-1:1);break;case"end":h[o]+=f*(r&&d?-1:1);break}return h}const UQ=async(t,s,r)=>{const{placement:n="bottom",strategy:a="absolute",middleware:i=[],platform:o}=r,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(s));let d=await o.getElementRects({reference:t,floating:s,strategy:a}),{x:u,y:m}=QC(d,n,c),f=n,h={},p=0;for(let g=0;g<l.length;g++){const{name:y,fn:v}=l[g],{x:j,y:w,data:_,reset:P}=await v({x:u,y:m,initialPlacement:n,placement:f,strategy:a,middlewareData:h,rects:d,platform:o,elements:{reference:t,floating:s}});u=j??u,m=w??m,h={...h,[y]:{...h[y],..._}},P&&p<=50&&(p++,typeof P=="object"&&(P.placement&&(f=P.placement),P.rects&&(d=P.rects===!0?await o.getElementRects({reference:t,floating:s,strategy:a}):P.rects),{x:u,y:m}=QC(d,f,c)),g=-1)}return{x:u,y:m,placement:f,strategy:a,middlewareData:h}};async function Ux(t,s){var r;s===void 0&&(s={});const{x:n,y:a,platform:i,rects:o,elements:l,strategy:c}=t,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:m="floating",altBoundary:f=!1,padding:h=0}=bc(s,t),p=mR(h),y=l[f?m==="floating"?"reference":"floating":m],v=I0(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(y)))==null||r?y:y.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:d,rootBoundary:u,strategy:c})),j=m==="floating"?{x:n,y:a,width:o.floating.width,height:o.floating.height}:o.reference,w=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),_=await(i.isElement==null?void 0:i.isElement(w))?await(i.getScale==null?void 0:i.getScale(w))||{x:1,y:1}:{x:1,y:1},P=I0(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:j,offsetParent:w,strategy:c}):j);return{top:(v.top-P.top+p.top)/_.y,bottom:(P.bottom-v.bottom+p.bottom)/_.y,left:(v.left-P.left+p.left)/_.x,right:(P.right-v.right+p.right)/_.x}}const zQ=t=>({name:"arrow",options:t,async fn(s){const{x:r,y:n,placement:a,rects:i,platform:o,elements:l,middlewareData:c}=s,{element:d,padding:u=0}=bc(t,s)||{};if(d==null)return{};const m=mR(u),f={x:r,y:n},h=R_(a),p=I_(h),g=await o.getDimensions(d),y=h==="y",v=y?"top":"left",j=y?"bottom":"right",w=y?"clientHeight":"clientWidth",_=i.reference[p]+i.reference[h]-f[h]-i.floating[p],P=f[h]-i.reference[h],E=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let L=E?E[w]:0;(!L||!await(o.isElement==null?void 0:o.isElement(E)))&&(L=l.floating[w]||i.floating[p]);const T=_/2-P/2,M=L/2-g[p]/2-1,F=qd(m[v],M),k=qd(m[j],M),D=F,z=L-g[p]-k,W=L/2-g[p]/2+T,ue=fw(D,W,z),ae=!c.arrow&&If(a)!=null&&W!==ue&&i.reference[p]/2-(W<D?F:k)-g[p]/2<0,Ne=ae?W<D?W-D:W-z:0;return{[h]:f[h]+Ne,data:{[h]:ue,centerOffset:W-ue-Ne,...ae&&{alignmentOffset:Ne}},reset:ae}}}),qQ=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(s){var r,n;const{placement:a,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:d}=s,{mainAxis:u=!0,crossAxis:m=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:g=!0,...y}=bc(t,s);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const v=Nc(a),j=Vd(l),w=Nc(l)===l,_=await(c.isRTL==null?void 0:c.isRTL(d.floating)),P=f||(w||!g?[D0(l)]:FQ(l)),E=p!=="none";!f&&E&&P.push(...$Q(l,g,p,_));const L=[l,...P],T=await Ux(s,y),M=[];let F=((n=i.flip)==null?void 0:n.overflows)||[];if(u&&M.push(T[v]),m){const W=RQ(a,o,_);M.push(T[W[0]],T[W[1]])}if(F=[...F,{placement:a,overflows:M}],!M.every(W=>W<=0)){var k,D;const W=(((k=i.flip)==null?void 0:k.index)||0)+1,ue=L[W];if(ue)return{data:{index:W,overflows:F},reset:{placement:ue}};let ae=(D=F.filter(Ne=>Ne.overflows[0]<=0).sort((Ne,K)=>Ne.overflows[1]-K.overflows[1])[0])==null?void 0:D.placement;if(!ae)switch(h){case"bestFit":{var z;const Ne=(z=F.filter(K=>{if(E){const Q=Vd(K.placement);return Q===j||Q==="y"}return!0}).map(K=>[K.placement,K.overflows.filter(Q=>Q>0).reduce((Q,ke)=>Q+ke,0)]).sort((K,Q)=>K[1]-Q[1])[0])==null?void 0:z[0];Ne&&(ae=Ne);break}case"initialPlacement":ae=l;break}if(a!==ae)return{reset:{placement:ae}}}return{}}}};function ZC(t,s){return{top:t.top-s.height,right:t.right-s.width,bottom:t.bottom-s.height,left:t.left-s.width}}function XC(t){return LQ.some(s=>t[s]>=0)}const VQ=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(s){const{rects:r}=s,{strategy:n="referenceHidden",...a}=bc(t,s);switch(n){case"referenceHidden":{const i=await Ux(s,{...a,elementContext:"reference"}),o=ZC(i,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:XC(o)}}}case"escaped":{const i=await Ux(s,{...a,altBoundary:!0}),o=ZC(i,r.floating);return{data:{escapedOffsets:o,escaped:XC(o)}}}default:return{}}}}};async function HQ(t,s){const{placement:r,platform:n,elements:a}=t,i=await(n.isRTL==null?void 0:n.isRTL(a.floating)),o=Nc(r),l=If(r),c=Vd(r)==="y",d=["left","top"].includes(o)?-1:1,u=i&&c?-1:1,m=bc(s,t);let{mainAxis:f,crossAxis:h,alignmentAxis:p}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return l&&typeof p=="number"&&(h=l==="end"?p*-1:p),c?{x:h*u,y:f*d}:{x:f*d,y:h*u}}const WQ=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(s){var r,n;const{x:a,y:i,placement:o,middlewareData:l}=s,c=await HQ(s,t);return o===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:a+c.x,y:i+c.y,data:{...c,placement:o}}}}},KQ=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(s){const{x:r,y:n,placement:a}=s,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:y=>{let{x:v,y:j}=y;return{x:v,y:j}}},...c}=bc(t,s),d={x:r,y:n},u=await Ux(s,c),m=Vd(Nc(a)),f=D_(m);let h=d[f],p=d[m];if(i){const y=f==="y"?"top":"left",v=f==="y"?"bottom":"right",j=h+u[y],w=h-u[v];h=fw(j,h,w)}if(o){const y=m==="y"?"top":"left",v=m==="y"?"bottom":"right",j=p+u[y],w=p-u[v];p=fw(j,p,w)}const g=l.fn({...s,[f]:h,[m]:p});return{...g,data:{x:g.x-r,y:g.y-n,enabled:{[f]:i,[m]:o}}}}}},YQ=function(t){return t===void 0&&(t={}),{options:t,fn(s){const{x:r,y:n,placement:a,rects:i,middlewareData:o}=s,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=bc(t,s),u={x:r,y:n},m=Vd(a),f=D_(m);let h=u[f],p=u[m];const g=bc(l,s),y=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const w=f==="y"?"height":"width",_=i.reference[f]-i.floating[w]+y.mainAxis,P=i.reference[f]+i.reference[w]-y.mainAxis;h<_?h=_:h>P&&(h=P)}if(d){var v,j;const w=f==="y"?"width":"height",_=["top","left"].includes(Nc(a)),P=i.reference[m]-i.floating[w]+(_&&((v=o.offset)==null?void 0:v[m])||0)+(_?0:y.crossAxis),E=i.reference[m]+i.reference[w]+(_?0:((j=o.offset)==null?void 0:j[m])||0)-(_?y.crossAxis:0);p<P?p=P:p>E&&(p=E)}return{[f]:h,[m]:p}}}},GQ=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(s){var r,n;const{placement:a,rects:i,platform:o,elements:l}=s,{apply:c=()=>{},...d}=bc(t,s),u=await Ux(s,d),m=Nc(a),f=If(a),h=Vd(a)==="y",{width:p,height:g}=i.floating;let y,v;m==="top"||m==="bottom"?(y=m,v=f===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(v=m,y=f==="end"?"top":"bottom");const j=g-u.top-u.bottom,w=p-u.left-u.right,_=qd(g-u[y],j),P=qd(p-u[v],w),E=!s.middlewareData.shift;let L=_,T=P;if((r=s.middlewareData.shift)!=null&&r.enabled.x&&(T=w),(n=s.middlewareData.shift)!=null&&n.enabled.y&&(L=j),E&&!f){const F=ji(u.left,0),k=ji(u.right,0),D=ji(u.top,0),z=ji(u.bottom,0);h?T=p-2*(F!==0||k!==0?F+k:ji(u.left,u.right)):L=g-2*(D!==0||z!==0?D+z:ji(u.top,u.bottom))}await c({...s,availableWidth:T,availableHeight:L});const M=await o.getDimensions(l.floating);return p!==M.width||g!==M.height?{reset:{rects:!0}}:{}}}};function H1(){return typeof window<"u"}function Rf(t){return hR(t)?(t.nodeName||"").toLowerCase():"#document"}function Mi(t){var s;return(t==null||(s=t.ownerDocument)==null?void 0:s.defaultView)||window}function Il(t){var s;return(s=(hR(t)?t.ownerDocument:t.document)||window.document)==null?void 0:s.documentElement}function hR(t){return H1()?t instanceof Node||t instanceof Mi(t).Node:!1}function Ho(t){return H1()?t instanceof Element||t instanceof Mi(t).Element:!1}function El(t){return H1()?t instanceof HTMLElement||t instanceof Mi(t).HTMLElement:!1}function JC(t){return!H1()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Mi(t).ShadowRoot}function Lg(t){const{overflow:s,overflowX:r,overflowY:n,display:a}=Wo(t);return/auto|scroll|overlay|hidden|clip/.test(s+n+r)&&!["inline","contents"].includes(a)}function QQ(t){return["table","td","th"].includes(Rf(t))}function W1(t){return[":popover-open",":modal"].some(s=>{try{return t.matches(s)}catch{return!1}})}function F_(t){const s=O_(),r=Ho(t)?Wo(t):t;return["transform","translate","scale","rotate","perspective"].some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!s&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!s&&(r.filter?r.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function ZQ(t){let s=Hd(t);for(;El(s)&&!cf(s);){if(F_(s))return s;if(W1(s))return null;s=Hd(s)}return null}function O_(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function cf(t){return["html","body","#document"].includes(Rf(t))}function Wo(t){return Mi(t).getComputedStyle(t)}function K1(t){return Ho(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Hd(t){if(Rf(t)==="html")return t;const s=t.assignedSlot||t.parentNode||JC(t)&&t.host||Il(t);return JC(s)?s.host:s}function fR(t){const s=Hd(t);return cf(s)?t.ownerDocument?t.ownerDocument.body:t.body:El(s)&&Lg(s)?s:fR(s)}function zx(t,s,r){var n;s===void 0&&(s=[]),r===void 0&&(r=!0);const a=fR(t),i=a===((n=t.ownerDocument)==null?void 0:n.body),o=Mi(a);if(i){const l=xw(o);return s.concat(o,o.visualViewport||[],Lg(a)?a:[],l&&r?zx(l):[])}return s.concat(a,zx(a,[],r))}function xw(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function pR(t){const s=Wo(t);let r=parseFloat(s.width)||0,n=parseFloat(s.height)||0;const a=El(t),i=a?t.offsetWidth:r,o=a?t.offsetHeight:n,l=L0(r)!==i||L0(n)!==o;return l&&(r=i,n=o),{width:r,height:n,$:l}}function $_(t){return Ho(t)?t:t.contextElement}function Ch(t){const s=$_(t);if(!El(s))return wl(1);const r=s.getBoundingClientRect(),{width:n,height:a,$:i}=pR(s);let o=(i?L0(r.width):r.width)/n,l=(i?L0(r.height):r.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const XQ=wl(0);function xR(t){const s=Mi(t);return!O_()||!s.visualViewport?XQ:{x:s.visualViewport.offsetLeft,y:s.visualViewport.offsetTop}}function JQ(t,s,r){return s===void 0&&(s=!1),!r||s&&r!==Mi(t)?!1:s}function cm(t,s,r,n){s===void 0&&(s=!1),r===void 0&&(r=!1);const a=t.getBoundingClientRect(),i=$_(t);let o=wl(1);s&&(n?Ho(n)&&(o=Ch(n)):o=Ch(t));const l=JQ(i,r,n)?xR(i):wl(0);let c=(a.left+l.x)/o.x,d=(a.top+l.y)/o.y,u=a.width/o.x,m=a.height/o.y;if(i){const f=Mi(i),h=n&&Ho(n)?Mi(n):n;let p=f,g=xw(p);for(;g&&n&&h!==p;){const y=Ch(g),v=g.getBoundingClientRect(),j=Wo(g),w=v.left+(g.clientLeft+parseFloat(j.paddingLeft))*y.x,_=v.top+(g.clientTop+parseFloat(j.paddingTop))*y.y;c*=y.x,d*=y.y,u*=y.x,m*=y.y,c+=w,d+=_,p=Mi(g),g=xw(p)}}return I0({width:u,height:m,x:c,y:d})}function B_(t,s){const r=K1(t).scrollLeft;return s?s.left+r:cm(Il(t)).left+r}function gR(t,s,r){r===void 0&&(r=!1);const n=t.getBoundingClientRect(),a=n.left+s.scrollLeft-(r?0:B_(t,n)),i=n.top+s.scrollTop;return{x:a,y:i}}function eZ(t){let{elements:s,rect:r,offsetParent:n,strategy:a}=t;const i=a==="fixed",o=Il(n),l=s?W1(s.floating):!1;if(n===o||l&&i)return r;let c={scrollLeft:0,scrollTop:0},d=wl(1);const u=wl(0),m=El(n);if((m||!m&&!i)&&((Rf(n)!=="body"||Lg(o))&&(c=K1(n)),El(n))){const h=cm(n);d=Ch(n),u.x=h.x+n.clientLeft,u.y=h.y+n.clientTop}const f=o&&!m&&!i?gR(o,c,!0):wl(0);return{width:r.width*d.x,height:r.height*d.y,x:r.x*d.x-c.scrollLeft*d.x+u.x+f.x,y:r.y*d.y-c.scrollTop*d.y+u.y+f.y}}function tZ(t){return Array.from(t.getClientRects())}function sZ(t){const s=Il(t),r=K1(t),n=t.ownerDocument.body,a=ji(s.scrollWidth,s.clientWidth,n.scrollWidth,n.clientWidth),i=ji(s.scrollHeight,s.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+B_(t);const l=-r.scrollTop;return Wo(n).direction==="rtl"&&(o+=ji(s.clientWidth,n.clientWidth)-a),{width:a,height:i,x:o,y:l}}function rZ(t,s){const r=Mi(t),n=Il(t),a=r.visualViewport;let i=n.clientWidth,o=n.clientHeight,l=0,c=0;if(a){i=a.width,o=a.height;const d=O_();(!d||d&&s==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}return{width:i,height:o,x:l,y:c}}function nZ(t,s){const r=cm(t,!0,s==="fixed"),n=r.top+t.clientTop,a=r.left+t.clientLeft,i=El(t)?Ch(t):wl(1),o=t.clientWidth*i.x,l=t.clientHeight*i.y,c=a*i.x,d=n*i.y;return{width:o,height:l,x:c,y:d}}function ek(t,s,r){let n;if(s==="viewport")n=rZ(t,r);else if(s==="document")n=sZ(Il(t));else if(Ho(s))n=nZ(s,r);else{const a=xR(t);n={x:s.x-a.x,y:s.y-a.y,width:s.width,height:s.height}}return I0(n)}function vR(t,s){const r=Hd(t);return r===s||!Ho(r)||cf(r)?!1:Wo(r).position==="fixed"||vR(r,s)}function aZ(t,s){const r=s.get(t);if(r)return r;let n=zx(t,[],!1).filter(l=>Ho(l)&&Rf(l)!=="body"),a=null;const i=Wo(t).position==="fixed";let o=i?Hd(t):t;for(;Ho(o)&&!cf(o);){const l=Wo(o),c=F_(o);!c&&l.position==="fixed"&&(a=null),(i?!c&&!a:!c&&l.position==="static"&&!!a&&["absolute","fixed"].includes(a.position)||Lg(o)&&!c&&vR(t,o))?n=n.filter(u=>u!==o):a=l,o=Hd(o)}return s.set(t,n),n}function iZ(t){let{element:s,boundary:r,rootBoundary:n,strategy:a}=t;const o=[...r==="clippingAncestors"?W1(s)?[]:aZ(s,this._c):[].concat(r),n],l=o[0],c=o.reduce((d,u)=>{const m=ek(s,u,a);return d.top=ji(m.top,d.top),d.right=qd(m.right,d.right),d.bottom=qd(m.bottom,d.bottom),d.left=ji(m.left,d.left),d},ek(s,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function oZ(t){const{width:s,height:r}=pR(t);return{width:s,height:r}}function lZ(t,s,r){const n=El(s),a=Il(s),i=r==="fixed",o=cm(t,!0,i,s);let l={scrollLeft:0,scrollTop:0};const c=wl(0);if(n||!n&&!i)if((Rf(s)!=="body"||Lg(a))&&(l=K1(s)),n){const f=cm(s,!0,i,s);c.x=f.x+s.clientLeft,c.y=f.y+s.clientTop}else a&&(c.x=B_(a));const d=a&&!n&&!i?gR(a,l):wl(0),u=o.left+l.scrollLeft-c.x-d.x,m=o.top+l.scrollTop-c.y-d.y;return{x:u,y:m,width:o.width,height:o.height}}function Wb(t){return Wo(t).position==="static"}function tk(t,s){if(!El(t)||Wo(t).position==="fixed")return null;if(s)return s(t);let r=t.offsetParent;return Il(t)===r&&(r=r.ownerDocument.body),r}function yR(t,s){const r=Mi(t);if(W1(t))return r;if(!El(t)){let a=Hd(t);for(;a&&!cf(a);){if(Ho(a)&&!Wb(a))return a;a=Hd(a)}return r}let n=tk(t,s);for(;n&&QQ(n)&&Wb(n);)n=tk(n,s);return n&&cf(n)&&Wb(n)&&!F_(n)?r:n||ZQ(t)||r}const cZ=async function(t){const s=this.getOffsetParent||yR,r=this.getDimensions,n=await r(t.floating);return{reference:lZ(t.reference,await s(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function dZ(t){return Wo(t).direction==="rtl"}const uZ={convertOffsetParentRelativeRectToViewportRelativeRect:eZ,getDocumentElement:Il,getClippingRect:iZ,getOffsetParent:yR,getElementRects:cZ,getClientRects:tZ,getDimensions:oZ,getScale:Ch,isElement:Ho,isRTL:dZ};function jR(t,s){return t.x===s.x&&t.y===s.y&&t.width===s.width&&t.height===s.height}function mZ(t,s){let r=null,n;const a=Il(t);function i(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const d=t.getBoundingClientRect(),{left:u,top:m,width:f,height:h}=d;if(l||s(),!f||!h)return;const p=Qv(m),g=Qv(a.clientWidth-(u+f)),y=Qv(a.clientHeight-(m+h)),v=Qv(u),w={rootMargin:-p+"px "+-g+"px "+-y+"px "+-v+"px",threshold:ji(0,qd(1,c))||1};let _=!0;function P(E){const L=E[0].intersectionRatio;if(L!==c){if(!_)return o();L?o(!1,L):n=setTimeout(()=>{o(!1,1e-7)},1e3)}L===1&&!jR(d,t.getBoundingClientRect())&&o(),_=!1}try{r=new IntersectionObserver(P,{...w,root:a.ownerDocument})}catch{r=new IntersectionObserver(P,w)}r.observe(t)}return o(!0),i}function hZ(t,s,r,n){n===void 0&&(n={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,d=$_(t),u=a||i?[...d?zx(d):[],...zx(s)]:[];u.forEach(v=>{a&&v.addEventListener("scroll",r,{passive:!0}),i&&v.addEventListener("resize",r)});const m=d&&l?mZ(d,r):null;let f=-1,h=null;o&&(h=new ResizeObserver(v=>{let[j]=v;j&&j.target===d&&h&&(h.unobserve(s),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var w;(w=h)==null||w.observe(s)})),r()}),d&&!c&&h.observe(d),h.observe(s));let p,g=c?cm(t):null;c&&y();function y(){const v=cm(t);g&&!jR(g,v)&&r(),g=v,p=requestAnimationFrame(y)}return r(),()=>{var v;u.forEach(j=>{a&&j.removeEventListener("scroll",r),i&&j.removeEventListener("resize",r)}),m==null||m(),(v=h)==null||v.disconnect(),h=null,c&&cancelAnimationFrame(p)}}const fZ=WQ,pZ=KQ,xZ=qQ,gZ=GQ,vZ=VQ,sk=zQ,yZ=YQ,jZ=(t,s,r)=>{const n=new Map,a={platform:uZ,...r},i={...a.platform,_c:n};return UQ(t,s,{...a,platform:i})};var By=typeof document<"u"?N.useLayoutEffect:N.useEffect;function R0(t,s){if(t===s)return!0;if(typeof t!=typeof s)return!1;if(typeof t=="function"&&t.toString()===s.toString())return!0;let r,n,a;if(t&&s&&typeof t=="object"){if(Array.isArray(t)){if(r=t.length,r!==s.length)return!1;for(n=r;n--!==0;)if(!R0(t[n],s[n]))return!1;return!0}if(a=Object.keys(t),r=a.length,r!==Object.keys(s).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(s,a[n]))return!1;for(n=r;n--!==0;){const i=a[n];if(!(i==="_owner"&&t.$$typeof)&&!R0(t[i],s[i]))return!1}return!0}return t!==t&&s!==s}function bR(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function rk(t,s){const r=bR(t);return Math.round(s*r)/r}function Kb(t){const s=N.useRef(t);return By(()=>{s.current=t}),s}function bZ(t){t===void 0&&(t={});const{placement:s="bottom",strategy:r="absolute",middleware:n=[],platform:a,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:d}=t,[u,m]=N.useState({x:0,y:0,strategy:r,placement:s,middlewareData:{},isPositioned:!1}),[f,h]=N.useState(n);R0(f,n)||h(n);const[p,g]=N.useState(null),[y,v]=N.useState(null),j=N.useCallback(K=>{K!==E.current&&(E.current=K,g(K))},[]),w=N.useCallback(K=>{K!==L.current&&(L.current=K,v(K))},[]),_=i||p,P=o||y,E=N.useRef(null),L=N.useRef(null),T=N.useRef(u),M=c!=null,F=Kb(c),k=Kb(a),D=Kb(d),z=N.useCallback(()=>{if(!E.current||!L.current)return;const K={placement:s,strategy:r,middleware:f};k.current&&(K.platform=k.current),jZ(E.current,L.current,K).then(Q=>{const ke={...Q,isPositioned:D.current!==!1};W.current&&!R0(T.current,ke)&&(T.current=ke,jm.flushSync(()=>{m(ke)}))})},[f,s,r,k,D]);By(()=>{d===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,m(K=>({...K,isPositioned:!1})))},[d]);const W=N.useRef(!1);By(()=>(W.current=!0,()=>{W.current=!1}),[]),By(()=>{if(_&&(E.current=_),P&&(L.current=P),_&&P){if(F.current)return F.current(_,P,z);z()}},[_,P,z,F,M]);const ue=N.useMemo(()=>({reference:E,floating:L,setReference:j,setFloating:w}),[j,w]),ae=N.useMemo(()=>({reference:_,floating:P}),[_,P]),Ne=N.useMemo(()=>{const K={position:r,left:0,top:0};if(!ae.floating)return K;const Q=rk(ae.floating,u.x),ke=rk(ae.floating,u.y);return l?{...K,transform:"translate("+Q+"px, "+ke+"px)",...bR(ae.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:Q,top:ke}},[r,l,ae.floating,u.x,u.y]);return N.useMemo(()=>({...u,update:z,refs:ue,elements:ae,floatingStyles:Ne}),[u,z,ue,ae,Ne])}const NZ=t=>{function s(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:t,fn(r){const{element:n,padding:a}=typeof t=="function"?t(r):t;return n&&s(n)?n.current!=null?sk({element:n.current,padding:a}).fn(r):{}:n?sk({element:n,padding:a}).fn(r):{}}}},wZ=(t,s)=>({...fZ(t),options:[t,s]}),_Z=(t,s)=>({...pZ(t),options:[t,s]}),SZ=(t,s)=>({...yZ(t),options:[t,s]}),CZ=(t,s)=>({...xZ(t),options:[t,s]}),kZ=(t,s)=>({...gZ(t),options:[t,s]}),AZ=(t,s)=>({...vZ(t),options:[t,s]}),PZ=(t,s)=>({...NZ(t),options:[t,s]});var EZ="Arrow",NR=N.forwardRef((t,s)=>{const{children:r,width:n=10,height:a=5,...i}=t;return e.jsx(Dt.svg,{...i,ref:s,width:n,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?r:e.jsx("polygon",{points:"0,0 30,0 15,10"})})});NR.displayName=EZ;var TZ=NR;function Y1(t){const[s,r]=N.useState(void 0);return gn(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const n=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,d=Array.isArray(c)?c[0]:c;o=d.inlineSize,l=d.blockSize}else o=t.offsetWidth,l=t.offsetHeight;r({width:o,height:l})});return n.observe(t,{box:"border-box"}),()=>n.unobserve(t)}else r(void 0)},[t]),s}var U_="Popper",[wR,Ff]=Dn(U_),[MZ,_R]=wR(U_),SR=t=>{const{__scopePopper:s,children:r}=t,[n,a]=N.useState(null);return e.jsx(MZ,{scope:s,anchor:n,onAnchorChange:a,children:r})};SR.displayName=U_;var CR="PopperAnchor",kR=N.forwardRef((t,s)=>{const{__scopePopper:r,virtualRef:n,...a}=t,i=_R(CR,r),o=N.useRef(null),l=us(s,o);return N.useEffect(()=>{i.onAnchorChange((n==null?void 0:n.current)||o.current)}),n?null:e.jsx(Dt.div,{...a,ref:l})});kR.displayName=CR;var z_="PopperContent",[LZ,DZ]=wR(z_),AR=N.forwardRef((t,s)=>{var be,q,Te,Be,Ve,ct;const{__scopePopper:r,side:n="bottom",sideOffset:a=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:u=0,sticky:m="partial",hideWhenDetached:f=!1,updatePositionStrategy:h="optimized",onPlaced:p,...g}=t,y=_R(z_,r),[v,j]=N.useState(null),w=us(s,vt=>j(vt)),[_,P]=N.useState(null),E=Y1(_),L=(E==null?void 0:E.width)??0,T=(E==null?void 0:E.height)??0,M=n+(i!=="center"?"-"+i:""),F=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},k=Array.isArray(d)?d:[d],D=k.length>0,z={padding:F,boundary:k.filter(RZ),altBoundary:D},{refs:W,floatingStyles:ue,placement:ae,isPositioned:Ne,middlewareData:K}=bZ({strategy:"fixed",placement:M,whileElementsMounted:(...vt)=>hZ(...vt,{animationFrame:h==="always"}),elements:{reference:y.anchor},middleware:[wZ({mainAxis:a+T,alignmentAxis:o}),c&&_Z({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?SZ():void 0,...z}),c&&CZ({...z}),kZ({...z,apply:({elements:vt,rects:qe,availableWidth:pe,availableHeight:ps})=>{const{width:ns,height:ss}=qe.reference,dt=vt.floating.style;dt.setProperty("--radix-popper-available-width",`${pe}px`),dt.setProperty("--radix-popper-available-height",`${ps}px`),dt.setProperty("--radix-popper-anchor-width",`${ns}px`),dt.setProperty("--radix-popper-anchor-height",`${ss}px`)}}),_&&PZ({element:_,padding:l}),FZ({arrowWidth:L,arrowHeight:T}),f&&AZ({strategy:"referenceHidden",...z})]}),[Q,ke]=TR(ae),G=Fr(p);gn(()=>{Ne&&(G==null||G())},[Ne,G]);const I=(be=K.arrow)==null?void 0:be.x,Z=(q=K.arrow)==null?void 0:q.y,J=((Te=K.arrow)==null?void 0:Te.centerOffset)!==0,[se,je]=N.useState();return gn(()=>{v&&je(window.getComputedStyle(v).zIndex)},[v]),e.jsx("div",{ref:W.setFloating,"data-radix-popper-content-wrapper":"",style:{...ue,transform:Ne?ue.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:se,"--radix-popper-transform-origin":[(Be=K.transformOrigin)==null?void 0:Be.x,(Ve=K.transformOrigin)==null?void 0:Ve.y].join(" "),...((ct=K.hide)==null?void 0:ct.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:e.jsx(LZ,{scope:r,placedSide:Q,onArrowChange:P,arrowX:I,arrowY:Z,shouldHideArrow:J,children:e.jsx(Dt.div,{"data-side":Q,"data-align":ke,...g,ref:w,style:{...g.style,animation:Ne?void 0:"none"}})})})});AR.displayName=z_;var PR="PopperArrow",IZ={top:"bottom",right:"left",bottom:"top",left:"right"},ER=N.forwardRef(function(s,r){const{__scopePopper:n,...a}=s,i=DZ(PR,n),o=IZ[i.placedSide];return e.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:e.jsx(TZ,{...a,ref:r,style:{...a.style,display:"block"}})})});ER.displayName=PR;function RZ(t){return t!==null}var FZ=t=>({name:"transformOrigin",options:t,fn(s){var y,v,j;const{placement:r,rects:n,middlewareData:a}=s,o=((y=a.arrow)==null?void 0:y.centerOffset)!==0,l=o?0:t.arrowWidth,c=o?0:t.arrowHeight,[d,u]=TR(r),m={start:"0%",center:"50%",end:"100%"}[u],f=(((v=a.arrow)==null?void 0:v.x)??0)+l/2,h=(((j=a.arrow)==null?void 0:j.y)??0)+c/2;let p="",g="";return d==="bottom"?(p=o?m:`${f}px`,g=`${-c}px`):d==="top"?(p=o?m:`${f}px`,g=`${n.floating.height+c}px`):d==="right"?(p=`${-c}px`,g=o?m:`${h}px`):d==="left"&&(p=`${n.floating.width+c}px`,g=o?m:`${h}px`),{data:{x:p,y:g}}}});function TR(t){const[s,r="center"]=t.split("-");return[s,r]}var MR=SR,q_=kR,V_=AR,H_=ER,[G1,Fge]=Dn("Tooltip",[Ff]),W_=Ff(),LR="TooltipProvider",OZ=700,nk="tooltip.open",[$Z,DR]=G1(LR),IR=t=>{const{__scopeTooltip:s,delayDuration:r=OZ,skipDelayDuration:n=300,disableHoverableContent:a=!1,children:i}=t,o=N.useRef(!0),l=N.useRef(!1),c=N.useRef(0);return N.useEffect(()=>{const d=c.current;return()=>window.clearTimeout(d)},[]),e.jsx($Z,{scope:s,isOpenDelayedRef:o,delayDuration:r,onOpen:N.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:N.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,n)},[n]),isPointerInTransitRef:l,onPointerInTransitChange:N.useCallback(d=>{l.current=d},[]),disableHoverableContent:a,children:i})};IR.displayName=LR;var RR="Tooltip",[Oge,Q1]=G1(RR),gw="TooltipTrigger",BZ=N.forwardRef((t,s)=>{const{__scopeTooltip:r,...n}=t,a=Q1(gw,r),i=DR(gw,r),o=W_(r),l=N.useRef(null),c=us(s,l,a.onTriggerChange),d=N.useRef(!1),u=N.useRef(!1),m=N.useCallback(()=>d.current=!1,[]);return N.useEffect(()=>()=>document.removeEventListener("pointerup",m),[m]),e.jsx(q_,{asChild:!0,...o,children:e.jsx(Dt.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...n,ref:c,onPointerMove:ht(t.onPointerMove,f=>{f.pointerType!=="touch"&&!u.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),u.current=!0)}),onPointerLeave:ht(t.onPointerLeave,()=>{a.onTriggerLeave(),u.current=!1}),onPointerDown:ht(t.onPointerDown,()=>{a.open&&a.onClose(),d.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:ht(t.onFocus,()=>{d.current||a.onOpen()}),onBlur:ht(t.onBlur,a.onClose),onClick:ht(t.onClick,a.onClose)})})});BZ.displayName=gw;var UZ="TooltipPortal",[$ge,zZ]=G1(UZ,{forceMount:void 0}),df="TooltipContent",FR=N.forwardRef((t,s)=>{const r=zZ(df,t.__scopeTooltip),{forceMount:n=r.forceMount,side:a="top",...i}=t,o=Q1(df,t.__scopeTooltip);return e.jsx(sa,{present:n||o.open,children:o.disableHoverableContent?e.jsx(OR,{side:a,...i,ref:s}):e.jsx(qZ,{side:a,...i,ref:s})})}),qZ=N.forwardRef((t,s)=>{const r=Q1(df,t.__scopeTooltip),n=DR(df,t.__scopeTooltip),a=N.useRef(null),i=us(s,a),[o,l]=N.useState(null),{trigger:c,onClose:d}=r,u=a.current,{onPointerInTransitChange:m}=n,f=N.useCallback(()=>{l(null),m(!1)},[m]),h=N.useCallback((p,g)=>{const y=p.currentTarget,v={x:p.clientX,y:p.clientY},j=YZ(v,y.getBoundingClientRect()),w=GZ(v,j),_=QZ(g.getBoundingClientRect()),P=XZ([...w,..._]);l(P),m(!0)},[m]);return N.useEffect(()=>()=>f(),[f]),N.useEffect(()=>{if(c&&u){const p=y=>h(y,u),g=y=>h(y,c);return c.addEventListener("pointerleave",p),u.addEventListener("pointerleave",g),()=>{c.removeEventListener("pointerleave",p),u.removeEventListener("pointerleave",g)}}},[c,u,h,f]),N.useEffect(()=>{if(o){const p=g=>{const y=g.target,v={x:g.clientX,y:g.clientY},j=(c==null?void 0:c.contains(y))||(u==null?void 0:u.contains(y)),w=!ZZ(v,o);j?f():w&&(f(),d())};return document.addEventListener("pointermove",p),()=>document.removeEventListener("pointermove",p)}},[c,u,o,d,f]),e.jsx(OR,{...t,ref:i})}),[VZ,HZ]=G1(RR,{isInside:!1}),WZ=hI("TooltipContent"),OR=N.forwardRef((t,s)=>{const{__scopeTooltip:r,children:n,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=t,c=Q1(df,r),d=W_(r),{onClose:u}=c;return N.useEffect(()=>(document.addEventListener(nk,u),()=>document.removeEventListener(nk,u)),[u]),N.useEffect(()=>{if(c.trigger){const m=f=>{const h=f.target;h!=null&&h.contains(c.trigger)&&u()};return window.addEventListener("scroll",m,{capture:!0}),()=>window.removeEventListener("scroll",m,{capture:!0})}},[c.trigger,u]),e.jsx(Lf,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:m=>m.preventDefault(),onDismiss:u,children:e.jsxs(V_,{"data-state":c.stateAttribute,...d,...l,ref:s,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[e.jsx(WZ,{children:n}),e.jsx(VZ,{scope:r,isInside:!0,children:e.jsx(KY,{id:c.contentId,role:"tooltip",children:a||n})})]})})});FR.displayName=df;var $R="TooltipArrow",KZ=N.forwardRef((t,s)=>{const{__scopeTooltip:r,...n}=t,a=W_(r);return HZ($R,r).isInside?null:e.jsx(H_,{...a,...n,ref:s})});KZ.displayName=$R;function YZ(t,s){const r=Math.abs(s.top-t.y),n=Math.abs(s.bottom-t.y),a=Math.abs(s.right-t.x),i=Math.abs(s.left-t.x);switch(Math.min(r,n,a,i)){case i:return"left";case a:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function GZ(t,s,r=5){const n=[];switch(s){case"top":n.push({x:t.x-r,y:t.y+r},{x:t.x+r,y:t.y+r});break;case"bottom":n.push({x:t.x-r,y:t.y-r},{x:t.x+r,y:t.y-r});break;case"left":n.push({x:t.x+r,y:t.y-r},{x:t.x+r,y:t.y+r});break;case"right":n.push({x:t.x-r,y:t.y-r},{x:t.x-r,y:t.y+r});break}return n}function QZ(t){const{top:s,right:r,bottom:n,left:a}=t;return[{x:a,y:s},{x:r,y:s},{x:r,y:n},{x:a,y:n}]}function ZZ(t,s){const{x:r,y:n}=t;let a=!1;for(let i=0,o=s.length-1;i<s.length;o=i++){const l=s[i].x,c=s[i].y,d=s[o].x,u=s[o].y;c>n!=u>n&&r<(d-l)*(n-c)/(u-c)+l&&(a=!a)}return a}function XZ(t){const s=t.slice();return s.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),JZ(s)}function JZ(t){if(t.length<=1)return t.slice();const s=[];for(let n=0;n<t.length;n++){const a=t[n];for(;s.length>=2;){const i=s[s.length-1],o=s[s.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))s.pop();else break}s.push(a)}s.pop();const r=[];for(let n=t.length-1;n>=0;n--){const a=t[n];for(;r.length>=2;){const i=r[r.length-1],o=r[r.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))r.pop();else break}r.push(a)}return r.pop(),s.length===1&&r.length===1&&s[0].x===r[0].x&&s[0].y===r[0].y?s:s.concat(r)}var eX=IR,BR=FR;const tX=eX,sX=N.forwardRef(({className:t,sideOffset:s=4,...r},n)=>e.jsx(BR,{ref:n,sideOffset:s,className:bt("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t),...r}));sX.displayName=BR.displayName;const K_=Ag("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover-elevate active-elevate-2",{variants:{variant:{default:"bg-primary text-primary-foreground border border-primary-border",destructive:"bg-destructive text-destructive-foreground border border-destructive-border",outline:" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none ",secondary:"border bg-secondary text-secondary-foreground border border-secondary-border ",ghost:"border border-transparent"},size:{default:"min-h-9 px-4 py-2",sm:"min-h-8 rounded-md px-3 text-xs",lg:"min-h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),O=N.forwardRef(({className:t,variant:s,size:r,asChild:n=!1,...a},i)=>{const o=n?uI:"button";return e.jsx(o,{className:bt(K_({variant:s,size:r,className:t})),ref:i,...a})});O.displayName="Button";var rX=N.createContext(void 0);function Nm(t){const s=N.useContext(rX);return t||s||"ltr"}var Yb=0;function Y_(){N.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??ak()),document.body.insertAdjacentElement("beforeend",t[1]??ak()),Yb++,()=>{Yb===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(s=>s.remove()),Yb--}},[])}function ak(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Gb="focusScope.autoFocusOnMount",Qb="focusScope.autoFocusOnUnmount",ik={bubbles:!1,cancelable:!0},nX="FocusScope",Z1=N.forwardRef((t,s)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...o}=t,[l,c]=N.useState(null),d=Fr(a),u=Fr(i),m=N.useRef(null),f=us(s,g=>c(g)),h=N.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;N.useEffect(()=>{if(n){let g=function(w){if(h.paused||!l)return;const _=w.target;l.contains(_)?m.current=_:Jc(m.current,{select:!0})},y=function(w){if(h.paused||!l)return;const _=w.relatedTarget;_!==null&&(l.contains(_)||Jc(m.current,{select:!0}))},v=function(w){if(document.activeElement===document.body)for(const P of w)P.removedNodes.length>0&&Jc(l)};document.addEventListener("focusin",g),document.addEventListener("focusout",y);const j=new MutationObserver(v);return l&&j.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",y),j.disconnect()}}},[n,l,h.paused]),N.useEffect(()=>{if(l){lk.add(h);const g=document.activeElement;if(!l.contains(g)){const v=new CustomEvent(Gb,ik);l.addEventListener(Gb,d),l.dispatchEvent(v),v.defaultPrevented||(aX(dX(UR(l)),{select:!0}),document.activeElement===g&&Jc(l))}return()=>{l.removeEventListener(Gb,d),setTimeout(()=>{const v=new CustomEvent(Qb,ik);l.addEventListener(Qb,u),l.dispatchEvent(v),v.defaultPrevented||Jc(g??document.body,{select:!0}),l.removeEventListener(Qb,u),lk.remove(h)},0)}}},[l,d,u,h]);const p=N.useCallback(g=>{if(!r&&!n||h.paused)return;const y=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,v=document.activeElement;if(y&&v){const j=g.currentTarget,[w,_]=iX(j);w&&_?!g.shiftKey&&v===_?(g.preventDefault(),r&&Jc(w,{select:!0})):g.shiftKey&&v===w&&(g.preventDefault(),r&&Jc(_,{select:!0})):v===j&&g.preventDefault()}},[r,n,h.paused]);return e.jsx(Dt.div,{tabIndex:-1,...o,ref:f,onKeyDown:p})});Z1.displayName=nX;function aX(t,{select:s=!1}={}){const r=document.activeElement;for(const n of t)if(Jc(n,{select:s}),document.activeElement!==r)return}function iX(t){const s=UR(t),r=ok(s,t),n=ok(s.reverse(),t);return[r,n]}function UR(t){const s=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)s.push(r.currentNode);return s}function ok(t,s){for(const r of t)if(!oX(r,{upTo:s}))return r}function oX(t,{upTo:s}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(s!==void 0&&t===s)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function lX(t){return t instanceof HTMLInputElement&&"select"in t}function Jc(t,{select:s=!1}={}){if(t&&t.focus){const r=document.activeElement;t.focus({preventScroll:!0}),t!==r&&lX(t)&&s&&t.select()}}var lk=cX();function cX(){let t=[];return{add(s){const r=t[0];s!==r&&(r==null||r.pause()),t=ck(t,s),t.unshift(s)},remove(s){var r;t=ck(t,s),(r=t[0])==null||r.resume()}}}function ck(t,s){const r=[...t],n=r.indexOf(s);return n!==-1&&r.splice(n,1),r}function dX(t){return t.filter(s=>s.tagName!=="A")}var Zb="rovingFocusGroup.onEntryFocus",uX={bubbles:!1,cancelable:!0},X1="RovingFocusGroup",[vw,zR,mX]=Mf(X1),[hX,J1]=Dn(X1,[mX]),[fX,pX]=hX(X1),qR=N.forwardRef((t,s)=>e.jsx(vw.Provider,{scope:t.__scopeRovingFocusGroup,children:e.jsx(vw.Slot,{scope:t.__scopeRovingFocusGroup,children:e.jsx(xX,{...t,ref:s})})}));qR.displayName=X1;var xX=N.forwardRef((t,s)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:a=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:u=!1,...m}=t,f=N.useRef(null),h=us(s,f),p=Nm(i),[g=null,y]=Ii({prop:o,defaultProp:l,onChange:c}),[v,j]=N.useState(!1),w=Fr(d),_=zR(r),P=N.useRef(!1),[E,L]=N.useState(0);return N.useEffect(()=>{const T=f.current;if(T)return T.addEventListener(Zb,w),()=>T.removeEventListener(Zb,w)},[w]),e.jsx(fX,{scope:r,orientation:n,dir:p,loop:a,currentTabStopId:g,onItemFocus:N.useCallback(T=>y(T),[y]),onItemShiftTab:N.useCallback(()=>j(!0),[]),onFocusableItemAdd:N.useCallback(()=>L(T=>T+1),[]),onFocusableItemRemove:N.useCallback(()=>L(T=>T-1),[]),children:e.jsx(Dt.div,{tabIndex:v||E===0?-1:0,"data-orientation":n,...m,ref:h,style:{outline:"none",...t.style},onMouseDown:ht(t.onMouseDown,()=>{P.current=!0}),onFocus:ht(t.onFocus,T=>{const M=!P.current;if(T.target===T.currentTarget&&M&&!v){const F=new CustomEvent(Zb,uX);if(T.currentTarget.dispatchEvent(F),!F.defaultPrevented){const k=_().filter(ae=>ae.focusable),D=k.find(ae=>ae.active),z=k.find(ae=>ae.id===g),ue=[D,z,...k].filter(Boolean).map(ae=>ae.ref.current);WR(ue,u)}}P.current=!1}),onBlur:ht(t.onBlur,()=>j(!1))})})}),VR="RovingFocusGroupItem",HR=N.forwardRef((t,s)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:a=!1,tabStopId:i,...o}=t,l=io(),c=i||l,d=pX(VR,r),u=d.currentTabStopId===c,m=zR(r),{onFocusableItemAdd:f,onFocusableItemRemove:h}=d;return N.useEffect(()=>{if(n)return f(),()=>h()},[n,f,h]),e.jsx(vw.ItemSlot,{scope:r,id:c,focusable:n,active:a,children:e.jsx(Dt.span,{tabIndex:u?0:-1,"data-orientation":d.orientation,...o,ref:s,onMouseDown:ht(t.onMouseDown,p=>{n?d.onItemFocus(c):p.preventDefault()}),onFocus:ht(t.onFocus,()=>d.onItemFocus(c)),onKeyDown:ht(t.onKeyDown,p=>{if(p.key==="Tab"&&p.shiftKey){d.onItemShiftTab();return}if(p.target!==p.currentTarget)return;const g=yX(p,d.orientation,d.dir);if(g!==void 0){if(p.metaKey||p.ctrlKey||p.altKey||p.shiftKey)return;p.preventDefault();let v=m().filter(j=>j.focusable).map(j=>j.ref.current);if(g==="last")v.reverse();else if(g==="prev"||g==="next"){g==="prev"&&v.reverse();const j=v.indexOf(p.currentTarget);v=d.loop?jX(v,j+1):v.slice(j+1)}setTimeout(()=>WR(v))}})})})});HR.displayName=VR;var gX={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function vX(t,s){return s!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function yX(t,s,r){const n=vX(t.key,r);if(!(s==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(s==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return gX[n]}function WR(t,s=!1){const r=document.activeElement;for(const n of t)if(n===r||(n.focus({preventScroll:s}),document.activeElement!==r))return}function jX(t,s){return t.map((r,n)=>t[(s+n)%t.length])}var KR=qR,YR=HR,bX=function(t){if(typeof document>"u")return null;var s=Array.isArray(t)?t[0]:t;return s.ownerDocument.body},zm=new WeakMap,Zv=new WeakMap,Xv={},Xb=0,GR=function(t){return t&&(t.host||GR(t.parentNode))},NX=function(t,s){return s.map(function(r){if(t.contains(r))return r;var n=GR(r);return n&&t.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",t,". Doing nothing"),null)}).filter(function(r){return!!r})},wX=function(t,s,r,n){var a=NX(s,Array.isArray(t)?t:[t]);Xv[r]||(Xv[r]=new WeakMap);var i=Xv[r],o=[],l=new Set,c=new Set(a),d=function(m){!m||l.has(m)||(l.add(m),d(m.parentNode))};a.forEach(d);var u=function(m){!m||c.has(m)||Array.prototype.forEach.call(m.children,function(f){if(l.has(f))u(f);else try{var h=f.getAttribute(n),p=h!==null&&h!=="false",g=(zm.get(f)||0)+1,y=(i.get(f)||0)+1;zm.set(f,g),i.set(f,y),o.push(f),g===1&&p&&Zv.set(f,!0),y===1&&f.setAttribute(r,"true"),p||f.setAttribute(n,"true")}catch(v){console.error("aria-hidden: cannot operate on ",f,v)}})};return u(s),l.clear(),Xb++,function(){o.forEach(function(m){var f=zm.get(m)-1,h=i.get(m)-1;zm.set(m,f),i.set(m,h),f||(Zv.has(m)||m.removeAttribute(n),Zv.delete(m)),h||m.removeAttribute(r)}),Xb--,Xb||(zm=new WeakMap,zm=new WeakMap,Zv=new WeakMap,Xv={})}},G_=function(t,s,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(t)?t:[t]),a=bX(t);return a?(n.push.apply(n,Array.from(a.querySelectorAll("[aria-live]"))),wX(n,a,r,"aria-hidden")):function(){return null}},xl=function(){return xl=Object.assign||function(s){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(s[i]=r[i])}return s},xl.apply(this,arguments)};function QR(t,s){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&s.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)s.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]]);return r}function _X(t,s,r){if(r||arguments.length===2)for(var n=0,a=s.length,i;n<a;n++)(i||!(n in s))&&(i||(i=Array.prototype.slice.call(s,0,n)),i[n]=s[n]);return t.concat(i||Array.prototype.slice.call(s))}var Uy="right-scroll-bar-position",zy="width-before-scroll-bar",SX="with-scroll-bars-hidden",CX="--removed-body-scroll-bar-size";function Jb(t,s){return typeof t=="function"?t(s):t&&(t.current=s),t}function kX(t,s){var r=N.useState(function(){return{value:t,callback:s,facade:{get current(){return r.value},set current(n){var a=r.value;a!==n&&(r.value=n,r.callback(n,a))}}}})[0];return r.callback=s,r.facade}var AX=typeof window<"u"?N.useLayoutEffect:N.useEffect,dk=new WeakMap;function PX(t,s){var r=kX(null,function(n){return t.forEach(function(a){return Jb(a,n)})});return AX(function(){var n=dk.get(r);if(n){var a=new Set(n),i=new Set(t),o=r.current;a.forEach(function(l){i.has(l)||Jb(l,null)}),i.forEach(function(l){a.has(l)||Jb(l,o)})}dk.set(r,t)},[t]),r}function EX(t){return t}function TX(t,s){s===void 0&&(s=EX);var r=[],n=!1,a={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:t},useMedium:function(i){var o=s(i,n);return r.push(o),function(){r=r.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(n=!0;r.length;){var o=r;r=[],o.forEach(i)}r={push:function(l){return i(l)},filter:function(){return r}}},assignMedium:function(i){n=!0;var o=[];if(r.length){var l=r;r=[],l.forEach(i),o=r}var c=function(){var u=o;o=[],u.forEach(i)},d=function(){return Promise.resolve().then(c)};d(),r={push:function(u){o.push(u),d()},filter:function(u){return o=o.filter(u),r}}}};return a}function MX(t){t===void 0&&(t={});var s=TX(null);return s.options=xl({async:!0,ssr:!1},t),s}var ZR=function(t){var s=t.sideCar,r=QR(t,["sideCar"]);if(!s)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=s.read();if(!n)throw new Error("Sidecar medium not found");return N.createElement(n,xl({},r))};ZR.isSideCarExport=!0;function LX(t,s){return t.useMedium(s),ZR}var XR=MX(),e2=function(){},ej=N.forwardRef(function(t,s){var r=N.useRef(null),n=N.useState({onScrollCapture:e2,onWheelCapture:e2,onTouchMoveCapture:e2}),a=n[0],i=n[1],o=t.forwardProps,l=t.children,c=t.className,d=t.removeScrollBar,u=t.enabled,m=t.shards,f=t.sideCar,h=t.noIsolation,p=t.inert,g=t.allowPinchZoom,y=t.as,v=y===void 0?"div":y,j=t.gapMode,w=QR(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),_=f,P=PX([r,s]),E=xl(xl({},w),a);return N.createElement(N.Fragment,null,u&&N.createElement(_,{sideCar:XR,removeScrollBar:d,shards:m,noIsolation:h,inert:p,setCallbacks:i,allowPinchZoom:!!g,lockRef:r,gapMode:j}),o?N.cloneElement(N.Children.only(l),xl(xl({},E),{ref:P})):N.createElement(v,xl({},E,{className:c,ref:P}),l))});ej.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};ej.classNames={fullWidth:zy,zeroRight:Uy};var DX=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function IX(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var s=DX();return s&&t.setAttribute("nonce",s),t}function RX(t,s){t.styleSheet?t.styleSheet.cssText=s:t.appendChild(document.createTextNode(s))}function FX(t){var s=document.head||document.getElementsByTagName("head")[0];s.appendChild(t)}var OX=function(){var t=0,s=null;return{add:function(r){t==0&&(s=IX())&&(RX(s,r),FX(s)),t++},remove:function(){t--,!t&&s&&(s.parentNode&&s.parentNode.removeChild(s),s=null)}}},$X=function(){var t=OX();return function(s,r){N.useEffect(function(){return t.add(s),function(){t.remove()}},[s&&r])}},JR=function(){var t=$X(),s=function(r){var n=r.styles,a=r.dynamic;return t(n,a),null};return s},BX={left:0,top:0,right:0,gap:0},t2=function(t){return parseInt(t||"",10)||0},UX=function(t){var s=window.getComputedStyle(document.body),r=s[t==="padding"?"paddingLeft":"marginLeft"],n=s[t==="padding"?"paddingTop":"marginTop"],a=s[t==="padding"?"paddingRight":"marginRight"];return[t2(r),t2(n),t2(a)]},zX=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return BX;var s=UX(t),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:s[0],top:s[1],right:s[2],gap:Math.max(0,n-r+s[2]-s[0])}},qX=JR(),kh="data-scroll-locked",VX=function(t,s,r,n){var a=t.left,i=t.top,o=t.right,l=t.gap;return r===void 0&&(r="margin"),`
  .`.concat(SX,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(kh,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([s&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Uy,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(zy,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Uy," .").concat(Uy,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(zy," .").concat(zy,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(kh,`] {
    `).concat(CX,": ").concat(l,`px;
  }
`)},uk=function(){var t=parseInt(document.body.getAttribute(kh)||"0",10);return isFinite(t)?t:0},HX=function(){N.useEffect(function(){return document.body.setAttribute(kh,(uk()+1).toString()),function(){var t=uk()-1;t<=0?document.body.removeAttribute(kh):document.body.setAttribute(kh,t.toString())}},[])},WX=function(t){var s=t.noRelative,r=t.noImportant,n=t.gapMode,a=n===void 0?"margin":n;HX();var i=N.useMemo(function(){return zX(a)},[a]);return N.createElement(qX,{styles:VX(i,!s,a,r?"":"!important")})},yw=!1;if(typeof window<"u")try{var Jv=Object.defineProperty({},"passive",{get:function(){return yw=!0,!0}});window.addEventListener("test",Jv,Jv),window.removeEventListener("test",Jv,Jv)}catch{yw=!1}var qm=yw?{passive:!1}:!1,KX=function(t){return t.tagName==="TEXTAREA"},e7=function(t,s){if(!(t instanceof Element))return!1;var r=window.getComputedStyle(t);return r[s]!=="hidden"&&!(r.overflowY===r.overflowX&&!KX(t)&&r[s]==="visible")},YX=function(t){return e7(t,"overflowY")},GX=function(t){return e7(t,"overflowX")},mk=function(t,s){var r=s.ownerDocument,n=s;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var a=t7(t,n);if(a){var i=s7(t,n),o=i[1],l=i[2];if(o>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},QX=function(t){var s=t.scrollTop,r=t.scrollHeight,n=t.clientHeight;return[s,r,n]},ZX=function(t){var s=t.scrollLeft,r=t.scrollWidth,n=t.clientWidth;return[s,r,n]},t7=function(t,s){return t==="v"?YX(s):GX(s)},s7=function(t,s){return t==="v"?QX(s):ZX(s)},XX=function(t,s){return t==="h"&&s==="rtl"?-1:1},JX=function(t,s,r,n,a){var i=XX(t,window.getComputedStyle(s).direction),o=i*n,l=r.target,c=s.contains(l),d=!1,u=o>0,m=0,f=0;do{var h=s7(t,l),p=h[0],g=h[1],y=h[2],v=g-y-i*p;(p||v)&&t7(t,l)&&(m+=v,f+=p),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(s.contains(l)||s===l));return(u&&(Math.abs(m)<1||!a)||!u&&(Math.abs(f)<1||!a))&&(d=!0),d},ey=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},hk=function(t){return[t.deltaX,t.deltaY]},fk=function(t){return t&&"current"in t?t.current:t},eJ=function(t,s){return t[0]===s[0]&&t[1]===s[1]},tJ=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},sJ=0,Vm=[];function rJ(t){var s=N.useRef([]),r=N.useRef([0,0]),n=N.useRef(),a=N.useState(sJ++)[0],i=N.useState(JR)[0],o=N.useRef(t);N.useEffect(function(){o.current=t},[t]),N.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(a));var g=_X([t.lockRef.current],(t.shards||[]).map(fk),!0).filter(Boolean);return g.forEach(function(y){return y.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),g.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(a))})}}},[t.inert,t.lockRef.current,t.shards]);var l=N.useCallback(function(g,y){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!o.current.allowPinchZoom;var v=ey(g),j=r.current,w="deltaX"in g?g.deltaX:j[0]-v[0],_="deltaY"in g?g.deltaY:j[1]-v[1],P,E=g.target,L=Math.abs(w)>Math.abs(_)?"h":"v";if("touches"in g&&L==="h"&&E.type==="range")return!1;var T=mk(L,E);if(!T)return!0;if(T?P=L:(P=L==="v"?"h":"v",T=mk(L,E)),!T)return!1;if(!n.current&&"changedTouches"in g&&(w||_)&&(n.current=P),!P)return!0;var M=n.current||P;return JX(M,y,g,M==="h"?w:_,!0)},[]),c=N.useCallback(function(g){var y=g;if(!(!Vm.length||Vm[Vm.length-1]!==i)){var v="deltaY"in y?hk(y):ey(y),j=s.current.filter(function(P){return P.name===y.type&&(P.target===y.target||y.target===P.shadowParent)&&eJ(P.delta,v)})[0];if(j&&j.should){y.cancelable&&y.preventDefault();return}if(!j){var w=(o.current.shards||[]).map(fk).filter(Boolean).filter(function(P){return P.contains(y.target)}),_=w.length>0?l(y,w[0]):!o.current.noIsolation;_&&y.cancelable&&y.preventDefault()}}},[]),d=N.useCallback(function(g,y,v,j){var w={name:g,delta:y,target:v,should:j,shadowParent:nJ(v)};s.current.push(w),setTimeout(function(){s.current=s.current.filter(function(_){return _!==w})},1)},[]),u=N.useCallback(function(g){r.current=ey(g),n.current=void 0},[]),m=N.useCallback(function(g){d(g.type,hk(g),g.target,l(g,t.lockRef.current))},[]),f=N.useCallback(function(g){d(g.type,ey(g),g.target,l(g,t.lockRef.current))},[]);N.useEffect(function(){return Vm.push(i),t.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:f}),document.addEventListener("wheel",c,qm),document.addEventListener("touchmove",c,qm),document.addEventListener("touchstart",u,qm),function(){Vm=Vm.filter(function(g){return g!==i}),document.removeEventListener("wheel",c,qm),document.removeEventListener("touchmove",c,qm),document.removeEventListener("touchstart",u,qm)}},[]);var h=t.removeScrollBar,p=t.inert;return N.createElement(N.Fragment,null,p?N.createElement(i,{styles:tJ(a)}):null,h?N.createElement(WX,{gapMode:t.gapMode}):null)}function nJ(t){for(var s=null;t!==null;)t instanceof ShadowRoot&&(s=t.host,t=t.host),t=t.parentNode;return s}const aJ=LX(XR,rJ);var tj=N.forwardRef(function(t,s){return N.createElement(ej,xl({},t,{ref:s,sideCar:aJ}))});tj.classNames=ej.classNames;var jw=["Enter"," "],iJ=["ArrowDown","PageUp","Home"],r7=["ArrowUp","PageDown","End"],oJ=[...iJ,...r7],lJ={ltr:[...jw,"ArrowRight"],rtl:[...jw,"ArrowLeft"]},cJ={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Dg="Menu",[qx,dJ,uJ]=Mf(Dg),[wm,n7]=Dn(Dg,[uJ,Ff,J1]),sj=Ff(),a7=J1(),[mJ,_m]=wm(Dg),[hJ,Ig]=wm(Dg),i7=t=>{const{__scopeMenu:s,open:r=!1,children:n,dir:a,onOpenChange:i,modal:o=!0}=t,l=sj(s),[c,d]=N.useState(null),u=N.useRef(!1),m=Fr(i),f=Nm(a);return N.useEffect(()=>{const h=()=>{u.current=!0,document.addEventListener("pointerdown",p,{capture:!0,once:!0}),document.addEventListener("pointermove",p,{capture:!0,once:!0})},p=()=>u.current=!1;return document.addEventListener("keydown",h,{capture:!0}),()=>{document.removeEventListener("keydown",h,{capture:!0}),document.removeEventListener("pointerdown",p,{capture:!0}),document.removeEventListener("pointermove",p,{capture:!0})}},[]),e.jsx(MR,{...l,children:e.jsx(mJ,{scope:s,open:r,onOpenChange:m,content:c,onContentChange:d,children:e.jsx(hJ,{scope:s,onClose:N.useCallback(()=>m(!1),[m]),isUsingKeyboardRef:u,dir:f,modal:o,children:n})})})};i7.displayName=Dg;var fJ="MenuAnchor",Q_=N.forwardRef((t,s)=>{const{__scopeMenu:r,...n}=t,a=sj(r);return e.jsx(q_,{...a,...n,ref:s})});Q_.displayName=fJ;var Z_="MenuPortal",[pJ,o7]=wm(Z_,{forceMount:void 0}),l7=t=>{const{__scopeMenu:s,forceMount:r,children:n,container:a}=t,i=_m(Z_,s);return e.jsx(pJ,{scope:s,forceMount:r,children:e.jsx(sa,{present:r||i.open,children:e.jsx(Cg,{asChild:!0,container:a,children:n})})})};l7.displayName=Z_;var oo="MenuContent",[xJ,X_]=wm(oo),c7=N.forwardRef((t,s)=>{const r=o7(oo,t.__scopeMenu),{forceMount:n=r.forceMount,...a}=t,i=_m(oo,t.__scopeMenu),o=Ig(oo,t.__scopeMenu);return e.jsx(qx.Provider,{scope:t.__scopeMenu,children:e.jsx(sa,{present:n||i.open,children:e.jsx(qx.Slot,{scope:t.__scopeMenu,children:o.modal?e.jsx(gJ,{...a,ref:s}):e.jsx(vJ,{...a,ref:s})})})})}),gJ=N.forwardRef((t,s)=>{const r=_m(oo,t.__scopeMenu),n=N.useRef(null),a=us(s,n);return N.useEffect(()=>{const i=n.current;if(i)return G_(i)},[]),e.jsx(J_,{...t,ref:a,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:ht(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),vJ=N.forwardRef((t,s)=>{const r=_m(oo,t.__scopeMenu);return e.jsx(J_,{...t,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),yJ=om("MenuContent.ScrollLock"),J_=N.forwardRef((t,s)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:m,onInteractOutside:f,onDismiss:h,disableOutsideScroll:p,...g}=t,y=_m(oo,r),v=Ig(oo,r),j=sj(r),w=a7(r),_=dJ(r),[P,E]=N.useState(null),L=N.useRef(null),T=us(s,L,y.onContentChange),M=N.useRef(0),F=N.useRef(""),k=N.useRef(0),D=N.useRef(null),z=N.useRef("right"),W=N.useRef(0),ue=p?tj:N.Fragment,ae=p?{as:yJ,allowPinchZoom:!0}:void 0,Ne=Q=>{var be,q;const ke=F.current+Q,G=_().filter(Te=>!Te.disabled),I=document.activeElement,Z=(be=G.find(Te=>Te.ref.current===I))==null?void 0:be.textValue,J=G.map(Te=>Te.textValue),se=TJ(J,ke,Z),je=(q=G.find(Te=>Te.textValue===se))==null?void 0:q.ref.current;(function Te(Be){F.current=Be,window.clearTimeout(M.current),Be!==""&&(M.current=window.setTimeout(()=>Te(""),1e3))})(ke),je&&setTimeout(()=>je.focus())};N.useEffect(()=>()=>window.clearTimeout(M.current),[]),Y_();const K=N.useCallback(Q=>{var G,I;return z.current===((G=D.current)==null?void 0:G.side)&&LJ(Q,(I=D.current)==null?void 0:I.area)},[]);return e.jsx(xJ,{scope:r,searchRef:F,onItemEnter:N.useCallback(Q=>{K(Q)&&Q.preventDefault()},[K]),onItemLeave:N.useCallback(Q=>{var ke;K(Q)||((ke=L.current)==null||ke.focus(),E(null))},[K]),onTriggerLeave:N.useCallback(Q=>{K(Q)&&Q.preventDefault()},[K]),pointerGraceTimerRef:k,onPointerGraceIntentChange:N.useCallback(Q=>{D.current=Q},[]),children:e.jsx(ue,{...ae,children:e.jsx(Z1,{asChild:!0,trapped:a,onMountAutoFocus:ht(i,Q=>{var ke;Q.preventDefault(),(ke=L.current)==null||ke.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:e.jsx(Lf,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:m,onInteractOutside:f,onDismiss:h,children:e.jsx(KR,{asChild:!0,...w,dir:v.dir,orientation:"vertical",loop:n,currentTabStopId:P,onCurrentTabStopIdChange:E,onEntryFocus:ht(c,Q=>{v.isUsingKeyboardRef.current||Q.preventDefault()}),preventScrollOnEntryFocus:!0,children:e.jsx(V_,{role:"menu","aria-orientation":"vertical","data-state":S7(y.open),"data-radix-menu-content":"",dir:v.dir,...j,...g,ref:T,style:{outline:"none",...g.style},onKeyDown:ht(g.onKeyDown,Q=>{const G=Q.target.closest("[data-radix-menu-content]")===Q.currentTarget,I=Q.ctrlKey||Q.altKey||Q.metaKey,Z=Q.key.length===1;G&&(Q.key==="Tab"&&Q.preventDefault(),!I&&Z&&Ne(Q.key));const J=L.current;if(Q.target!==J||!oJ.includes(Q.key))return;Q.preventDefault();const je=_().filter(be=>!be.disabled).map(be=>be.ref.current);r7.includes(Q.key)&&je.reverse(),PJ(je)}),onBlur:ht(t.onBlur,Q=>{Q.currentTarget.contains(Q.target)||(window.clearTimeout(M.current),F.current="")}),onPointerMove:ht(t.onPointerMove,Vx(Q=>{const ke=Q.target,G=W.current!==Q.clientX;if(Q.currentTarget.contains(ke)&&G){const I=Q.clientX>W.current?"right":"left";z.current=I,W.current=Q.clientX}}))})})})})})})});c7.displayName=oo;var jJ="MenuGroup",e4=N.forwardRef((t,s)=>{const{__scopeMenu:r,...n}=t;return e.jsx(Dt.div,{role:"group",...n,ref:s})});e4.displayName=jJ;var bJ="MenuLabel",d7=N.forwardRef((t,s)=>{const{__scopeMenu:r,...n}=t;return e.jsx(Dt.div,{...n,ref:s})});d7.displayName=bJ;var F0="MenuItem",pk="menu.itemSelect",rj=N.forwardRef((t,s)=>{const{disabled:r=!1,onSelect:n,...a}=t,i=N.useRef(null),o=Ig(F0,t.__scopeMenu),l=X_(F0,t.__scopeMenu),c=us(s,i),d=N.useRef(!1),u=()=>{const m=i.current;if(!r&&m){const f=new CustomEvent(pk,{bubbles:!0,cancelable:!0});m.addEventListener(pk,h=>n==null?void 0:n(h),{once:!0}),p_(m,f),f.defaultPrevented?d.current=!1:o.onClose()}};return e.jsx(u7,{...a,ref:c,disabled:r,onClick:ht(t.onClick,u),onPointerDown:m=>{var f;(f=t.onPointerDown)==null||f.call(t,m),d.current=!0},onPointerUp:ht(t.onPointerUp,m=>{var f;d.current||(f=m.currentTarget)==null||f.click()}),onKeyDown:ht(t.onKeyDown,m=>{const f=l.searchRef.current!=="";r||f&&m.key===" "||jw.includes(m.key)&&(m.currentTarget.click(),m.preventDefault())})})});rj.displayName=F0;var u7=N.forwardRef((t,s)=>{const{__scopeMenu:r,disabled:n=!1,textValue:a,...i}=t,o=X_(F0,r),l=a7(r),c=N.useRef(null),d=us(s,c),[u,m]=N.useState(!1),[f,h]=N.useState("");return N.useEffect(()=>{const p=c.current;p&&h((p.textContent??"").trim())},[i.children]),e.jsx(qx.ItemSlot,{scope:r,disabled:n,textValue:a??f,children:e.jsx(YR,{asChild:!0,...l,focusable:!n,children:e.jsx(Dt.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...i,ref:d,onPointerMove:ht(t.onPointerMove,Vx(p=>{n?o.onItemLeave(p):(o.onItemEnter(p),p.defaultPrevented||p.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ht(t.onPointerLeave,Vx(p=>o.onItemLeave(p))),onFocus:ht(t.onFocus,()=>m(!0)),onBlur:ht(t.onBlur,()=>m(!1))})})})}),NJ="MenuCheckboxItem",m7=N.forwardRef((t,s)=>{const{checked:r=!1,onCheckedChange:n,...a}=t;return e.jsx(g7,{scope:t.__scopeMenu,checked:r,children:e.jsx(rj,{role:"menuitemcheckbox","aria-checked":O0(r)?"mixed":r,...a,ref:s,"data-state":s4(r),onSelect:ht(a.onSelect,()=>n==null?void 0:n(O0(r)?!0:!r),{checkForDefaultPrevented:!1})})})});m7.displayName=NJ;var h7="MenuRadioGroup",[wJ,_J]=wm(h7,{value:void 0,onValueChange:()=>{}}),f7=N.forwardRef((t,s)=>{const{value:r,onValueChange:n,...a}=t,i=Fr(n);return e.jsx(wJ,{scope:t.__scopeMenu,value:r,onValueChange:i,children:e.jsx(e4,{...a,ref:s})})});f7.displayName=h7;var p7="MenuRadioItem",x7=N.forwardRef((t,s)=>{const{value:r,...n}=t,a=_J(p7,t.__scopeMenu),i=r===a.value;return e.jsx(g7,{scope:t.__scopeMenu,checked:i,children:e.jsx(rj,{role:"menuitemradio","aria-checked":i,...n,ref:s,"data-state":s4(i),onSelect:ht(n.onSelect,()=>{var o;return(o=a.onValueChange)==null?void 0:o.call(a,r)},{checkForDefaultPrevented:!1})})})});x7.displayName=p7;var t4="MenuItemIndicator",[g7,SJ]=wm(t4,{checked:!1}),v7=N.forwardRef((t,s)=>{const{__scopeMenu:r,forceMount:n,...a}=t,i=SJ(t4,r);return e.jsx(sa,{present:n||O0(i.checked)||i.checked===!0,children:e.jsx(Dt.span,{...a,ref:s,"data-state":s4(i.checked)})})});v7.displayName=t4;var CJ="MenuSeparator",y7=N.forwardRef((t,s)=>{const{__scopeMenu:r,...n}=t;return e.jsx(Dt.div,{role:"separator","aria-orientation":"horizontal",...n,ref:s})});y7.displayName=CJ;var kJ="MenuArrow",j7=N.forwardRef((t,s)=>{const{__scopeMenu:r,...n}=t,a=sj(r);return e.jsx(H_,{...a,...n,ref:s})});j7.displayName=kJ;var AJ="MenuSub",[Bge,b7]=wm(AJ),Yp="MenuSubTrigger",N7=N.forwardRef((t,s)=>{const r=_m(Yp,t.__scopeMenu),n=Ig(Yp,t.__scopeMenu),a=b7(Yp,t.__scopeMenu),i=X_(Yp,t.__scopeMenu),o=N.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=i,d={__scopeMenu:t.__scopeMenu},u=N.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return N.useEffect(()=>u,[u]),N.useEffect(()=>{const m=l.current;return()=>{window.clearTimeout(m),c(null)}},[l,c]),e.jsx(Q_,{asChild:!0,...d,children:e.jsx(u7,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":a.contentId,"data-state":S7(r.open),...t,ref:B1(s,a.onTriggerChange),onClick:m=>{var f;(f=t.onClick)==null||f.call(t,m),!(t.disabled||m.defaultPrevented)&&(m.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:ht(t.onPointerMove,Vx(m=>{i.onItemEnter(m),!m.defaultPrevented&&!t.disabled&&!r.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{r.onOpenChange(!0),u()},100))})),onPointerLeave:ht(t.onPointerLeave,Vx(m=>{var h,p;u();const f=(h=r.content)==null?void 0:h.getBoundingClientRect();if(f){const g=(p=r.content)==null?void 0:p.dataset.side,y=g==="right",v=y?-5:5,j=f[y?"left":"right"],w=f[y?"right":"left"];i.onPointerGraceIntentChange({area:[{x:m.clientX+v,y:m.clientY},{x:j,y:f.top},{x:w,y:f.top},{x:w,y:f.bottom},{x:j,y:f.bottom}],side:g}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(m),m.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:ht(t.onKeyDown,m=>{var h;const f=i.searchRef.current!=="";t.disabled||f&&m.key===" "||lJ[n.dir].includes(m.key)&&(r.onOpenChange(!0),(h=r.content)==null||h.focus(),m.preventDefault())})})})});N7.displayName=Yp;var w7="MenuSubContent",_7=N.forwardRef((t,s)=>{const r=o7(oo,t.__scopeMenu),{forceMount:n=r.forceMount,...a}=t,i=_m(oo,t.__scopeMenu),o=Ig(oo,t.__scopeMenu),l=b7(w7,t.__scopeMenu),c=N.useRef(null),d=us(s,c);return e.jsx(qx.Provider,{scope:t.__scopeMenu,children:e.jsx(sa,{present:n||i.open,children:e.jsx(qx.Slot,{scope:t.__scopeMenu,children:e.jsx(J_,{id:l.contentId,"aria-labelledby":l.triggerId,...a,ref:d,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var m;o.isUsingKeyboardRef.current&&((m=c.current)==null||m.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:ht(t.onFocusOutside,u=>{u.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:ht(t.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:ht(t.onKeyDown,u=>{var h;const m=u.currentTarget.contains(u.target),f=cJ[o.dir].includes(u.key);m&&f&&(i.onOpenChange(!1),(h=l.trigger)==null||h.focus(),u.preventDefault())})})})})})});_7.displayName=w7;function S7(t){return t?"open":"closed"}function O0(t){return t==="indeterminate"}function s4(t){return O0(t)?"indeterminate":t?"checked":"unchecked"}function PJ(t){const s=document.activeElement;for(const r of t)if(r===s||(r.focus(),document.activeElement!==s))return}function EJ(t,s){return t.map((r,n)=>t[(s+n)%t.length])}function TJ(t,s,r){const a=s.length>1&&Array.from(s).every(d=>d===s[0])?s[0]:s,i=r?t.indexOf(r):-1;let o=EJ(t,Math.max(i,0));a.length===1&&(o=o.filter(d=>d!==r));const c=o.find(d=>d.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function MJ(t,s){const{x:r,y:n}=t;let a=!1;for(let i=0,o=s.length-1;i<s.length;o=i++){const l=s[i].x,c=s[i].y,d=s[o].x,u=s[o].y;c>n!=u>n&&r<(d-l)*(n-c)/(u-c)+l&&(a=!a)}return a}function LJ(t,s){if(!s)return!1;const r={x:t.clientX,y:t.clientY};return MJ(r,s)}function Vx(t){return s=>s.pointerType==="mouse"?t(s):void 0}var DJ=i7,IJ=Q_,RJ=l7,FJ=c7,OJ=e4,$J=d7,BJ=rj,UJ=m7,zJ=f7,qJ=x7,VJ=v7,HJ=y7,WJ=j7,KJ=N7,YJ=_7,r4="DropdownMenu",[GJ,Uge]=Dn(r4,[n7]),Ua=n7(),[QJ,C7]=GJ(r4),k7=t=>{const{__scopeDropdownMenu:s,children:r,dir:n,open:a,defaultOpen:i,onOpenChange:o,modal:l=!0}=t,c=Ua(s),d=N.useRef(null),[u=!1,m]=Ii({prop:a,defaultProp:i,onChange:o});return e.jsx(QJ,{scope:s,triggerId:io(),triggerRef:d,contentId:io(),open:u,onOpenChange:m,onOpenToggle:N.useCallback(()=>m(f=>!f),[m]),modal:l,children:e.jsx(DJ,{...c,open:u,onOpenChange:m,dir:n,modal:l,children:r})})};k7.displayName=r4;var A7="DropdownMenuTrigger",P7=N.forwardRef((t,s)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...a}=t,i=C7(A7,r),o=Ua(r);return e.jsx(IJ,{asChild:!0,...o,children:e.jsx(Dt.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...a,ref:B1(s,i.triggerRef),onPointerDown:ht(t.onPointerDown,l=>{!n&&l.button===0&&l.ctrlKey===!1&&(i.onOpenToggle(),i.open||l.preventDefault())}),onKeyDown:ht(t.onKeyDown,l=>{n||(["Enter"," "].includes(l.key)&&i.onOpenToggle(),l.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});P7.displayName=A7;var ZJ="DropdownMenuPortal",E7=t=>{const{__scopeDropdownMenu:s,...r}=t,n=Ua(s);return e.jsx(RJ,{...n,...r})};E7.displayName=ZJ;var T7="DropdownMenuContent",M7=N.forwardRef((t,s)=>{const{__scopeDropdownMenu:r,...n}=t,a=C7(T7,r),i=Ua(r),o=N.useRef(!1);return e.jsx(FJ,{id:a.contentId,"aria-labelledby":a.triggerId,...i,...n,ref:s,onCloseAutoFocus:ht(t.onCloseAutoFocus,l=>{var c;o.current||(c=a.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:ht(t.onInteractOutside,l=>{const c=l.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0,u=c.button===2||d;(!a.modal||u)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});M7.displayName=T7;var XJ="DropdownMenuGroup",JJ=N.forwardRef((t,s)=>{const{__scopeDropdownMenu:r,...n}=t,a=Ua(r);return e.jsx(OJ,{...a,...n,ref:s})});JJ.displayName=XJ;var eee="DropdownMenuLabel",L7=N.forwardRef((t,s)=>{const{__scopeDropdownMenu:r,...n}=t,a=Ua(r);return e.jsx($J,{...a,...n,ref:s})});L7.displayName=eee;var tee="DropdownMenuItem",D7=N.forwardRef((t,s)=>{const{__scopeDropdownMenu:r,...n}=t,a=Ua(r);return e.jsx(BJ,{...a,...n,ref:s})});D7.displayName=tee;var see="DropdownMenuCheckboxItem",I7=N.forwardRef((t,s)=>{const{__scopeDropdownMenu:r,...n}=t,a=Ua(r);return e.jsx(UJ,{...a,...n,ref:s})});I7.displayName=see;var ree="DropdownMenuRadioGroup",nee=N.forwardRef((t,s)=>{const{__scopeDropdownMenu:r,...n}=t,a=Ua(r);return e.jsx(zJ,{...a,...n,ref:s})});nee.displayName=ree;var aee="DropdownMenuRadioItem",R7=N.forwardRef((t,s)=>{const{__scopeDropdownMenu:r,...n}=t,a=Ua(r);return e.jsx(qJ,{...a,...n,ref:s})});R7.displayName=aee;var iee="DropdownMenuItemIndicator",F7=N.forwardRef((t,s)=>{const{__scopeDropdownMenu:r,...n}=t,a=Ua(r);return e.jsx(VJ,{...a,...n,ref:s})});F7.displayName=iee;var oee="DropdownMenuSeparator",O7=N.forwardRef((t,s)=>{const{__scopeDropdownMenu:r,...n}=t,a=Ua(r);return e.jsx(HJ,{...a,...n,ref:s})});O7.displayName=oee;var lee="DropdownMenuArrow",cee=N.forwardRef((t,s)=>{const{__scopeDropdownMenu:r,...n}=t,a=Ua(r);return e.jsx(WJ,{...a,...n,ref:s})});cee.displayName=lee;var dee="DropdownMenuSubTrigger",$7=N.forwardRef((t,s)=>{const{__scopeDropdownMenu:r,...n}=t,a=Ua(r);return e.jsx(KJ,{...a,...n,ref:s})});$7.displayName=dee;var uee="DropdownMenuSubContent",B7=N.forwardRef((t,s)=>{const{__scopeDropdownMenu:r,...n}=t,a=Ua(r);return e.jsx(YJ,{...a,...n,ref:s,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});B7.displayName=uee;var mee=k7,hee=P7,fee=E7,U7=M7,z7=L7,q7=D7,V7=I7,H7=R7,W7=F7,K7=O7,Y7=$7,G7=B7;const bw=mee,Nw=hee,pee=N.forwardRef(({className:t,inset:s,children:r,...n},a)=>e.jsxs(Y7,{ref:a,className:bt("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",s&&"pl-8",t),...n,children:[r,e.jsx(Fd,{className:"ml-auto"})]}));pee.displayName=Y7.displayName;const xee=N.forwardRef(({className:t,...s},r)=>e.jsx(G7,{ref:r,className:bt("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...s}));xee.displayName=G7.displayName;const $0=N.forwardRef(({className:t,sideOffset:s=4,...r},n)=>e.jsx(fee,{children:e.jsx(U7,{ref:n,sideOffset:s,className:bt("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...r})}));$0.displayName=U7.displayName;const Ts=N.forwardRef(({className:t,inset:s,...r},n)=>e.jsx(q7,{ref:n,className:bt("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",s&&"pl-8",t),...r}));Ts.displayName=q7.displayName;const gee=N.forwardRef(({className:t,children:s,checked:r,...n},a)=>e.jsxs(V7,{ref:a,className:bt("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:r,...n,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(W7,{children:e.jsx($n,{className:"h-4 w-4"})})}),s]}));gee.displayName=V7.displayName;const vee=N.forwardRef(({className:t,children:s,...r},n)=>e.jsxs(H7,{ref:n,className:bt("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(W7,{children:e.jsx(E0,{className:"h-2 w-2 fill-current"})})}),s]}));vee.displayName=H7.displayName;const Q7=N.forwardRef(({className:t,inset:s,...r},n)=>e.jsx(z7,{ref:n,className:bt("px-2 py-1.5 text-sm font-semibold",s&&"pl-8",t),...r}));Q7.displayName=z7.displayName;const fl=N.forwardRef(({className:t,...s},r)=>e.jsx(K7,{ref:r,className:bt("-mx-1 my-1 h-px bg-muted",t),...s}));fl.displayName=K7.displayName;const $=N.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:bt("shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm",t),...s}));$.displayName="Card";const le=N.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:bt("flex flex-col space-y-1.5 p-6",t),...s}));le.displayName="CardHeader";const ge=N.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:bt("text-2xl font-semibold leading-none tracking-tight",t),...s}));ge.displayName="CardTitle";const $e=N.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:bt("text-sm text-muted-foreground",t),...s}));$e.displayName="CardDescription";const V=N.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:bt("p-6 pt-0",t),...s}));V.displayName="CardContent";const mo=N.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:bt("flex items-center p-6 pt-0",t),...s}));mo.displayName="CardFooter";var n4="Tabs",[yee,zge]=Dn(n4,[J1]),Z7=J1(),[jee,a4]=yee(n4),X7=N.forwardRef((t,s)=>{const{__scopeTabs:r,value:n,onValueChange:a,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...d}=t,u=Nm(l),[m,f]=Ii({prop:n,onChange:a,defaultProp:i});return e.jsx(jee,{scope:r,baseId:io(),value:m,onValueChange:f,orientation:o,dir:u,activationMode:c,children:e.jsx(Dt.div,{dir:u,"data-orientation":o,...d,ref:s})})});X7.displayName=n4;var J7="TabsList",eF=N.forwardRef((t,s)=>{const{__scopeTabs:r,loop:n=!0,...a}=t,i=a4(J7,r),o=Z7(r);return e.jsx(KR,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:n,children:e.jsx(Dt.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:s})})});eF.displayName=J7;var tF="TabsTrigger",sF=N.forwardRef((t,s)=>{const{__scopeTabs:r,value:n,disabled:a=!1,...i}=t,o=a4(tF,r),l=Z7(r),c=aF(o.baseId,n),d=iF(o.baseId,n),u=n===o.value;return e.jsx(YR,{asChild:!0,...l,focusable:!a,active:u,children:e.jsx(Dt.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...i,ref:s,onMouseDown:ht(t.onMouseDown,m=>{!a&&m.button===0&&m.ctrlKey===!1?o.onValueChange(n):m.preventDefault()}),onKeyDown:ht(t.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&o.onValueChange(n)}),onFocus:ht(t.onFocus,()=>{const m=o.activationMode!=="manual";!u&&!a&&m&&o.onValueChange(n)})})})});sF.displayName=tF;var rF="TabsContent",nF=N.forwardRef((t,s)=>{const{__scopeTabs:r,value:n,forceMount:a,children:i,...o}=t,l=a4(rF,r),c=aF(l.baseId,n),d=iF(l.baseId,n),u=n===l.value,m=N.useRef(u);return N.useEffect(()=>{const f=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(f)},[]),e.jsx(sa,{present:a||u,children:({present:f})=>e.jsx(Dt.div,{"data-state":u?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!f,id:d,tabIndex:0,...o,ref:s,style:{...t.style,animationDuration:m.current?"0s":void 0},children:f&&i})})});nF.displayName=rF;function aF(t,s){return`${t}-trigger-${s}`}function iF(t,s){return`${t}-content-${s}`}var bee=X7,oF=eF,lF=sF,cF=nF;const ba=bee,ra=N.forwardRef(({className:t,...s},r)=>e.jsx(oF,{ref:r,className:bt("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...s}));ra.displayName=oF.displayName;const qt=N.forwardRef(({className:t,...s},r)=>e.jsx(lF,{ref:r,className:bt("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...s}));qt.displayName=lF.displayName;const Vt=N.forwardRef(({className:t,...s},r)=>e.jsx(cF,{ref:r,className:bt("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...s}));Vt.displayName=cF.displayName;const Nee=Ag("whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 hover-elevate ",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow-xs",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-destructive text-destructive-foreground shadow-xs",outline:" border [border-color:var(--badge-outline)] shadow-xs"}},defaultVariants:{variant:"default"}});function ze({className:t,variant:s,...r}){return e.jsx("div",{className:bt(Nee({variant:s}),t),...r})}function tt({className:t,...s}){return e.jsx("div",{className:bt("animate-pulse rounded-md bg-muted",t),...s})}function fo(){const{data:t,isLoading:s}=Xe({queryKey:["/api/auth/user"],retry:!1});return{user:t,isLoading:s,isAuthenticated:!!t}}var i4="Dialog",[dF,uF]=Dn(i4),[wee,Qo]=dF(i4),mF=t=>{const{__scopeDialog:s,children:r,open:n,defaultOpen:a,onOpenChange:i,modal:o=!0}=t,l=N.useRef(null),c=N.useRef(null),[d=!1,u]=Ii({prop:n,defaultProp:a,onChange:i});return e.jsx(wee,{scope:s,triggerRef:l,contentRef:c,contentId:io(),titleId:io(),descriptionId:io(),open:d,onOpenChange:u,onOpenToggle:N.useCallback(()=>u(m=>!m),[u]),modal:o,children:r})};mF.displayName=i4;var hF="DialogTrigger",fF=N.forwardRef((t,s)=>{const{__scopeDialog:r,...n}=t,a=Qo(hF,r),i=us(s,a.triggerRef);return e.jsx(Dt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":c4(a.open),...n,ref:i,onClick:ht(t.onClick,a.onOpenToggle)})});fF.displayName=hF;var o4="DialogPortal",[_ee,pF]=dF(o4,{forceMount:void 0}),xF=t=>{const{__scopeDialog:s,forceMount:r,children:n,container:a}=t,i=Qo(o4,s);return e.jsx(_ee,{scope:s,forceMount:r,children:N.Children.map(n,o=>e.jsx(sa,{present:r||i.open,children:e.jsx(Cg,{asChild:!0,container:a,children:o})}))})};xF.displayName=o4;var B0="DialogOverlay",gF=N.forwardRef((t,s)=>{const r=pF(B0,t.__scopeDialog),{forceMount:n=r.forceMount,...a}=t,i=Qo(B0,t.__scopeDialog);return i.modal?e.jsx(sa,{present:n||i.open,children:e.jsx(Cee,{...a,ref:s})}):null});gF.displayName=B0;var See=om("DialogOverlay.RemoveScroll"),Cee=N.forwardRef((t,s)=>{const{__scopeDialog:r,...n}=t,a=Qo(B0,r);return e.jsx(tj,{as:See,allowPinchZoom:!0,shards:[a.contentRef],children:e.jsx(Dt.div,{"data-state":c4(a.open),...n,ref:s,style:{pointerEvents:"auto",...n.style}})})}),dm="DialogContent",vF=N.forwardRef((t,s)=>{const r=pF(dm,t.__scopeDialog),{forceMount:n=r.forceMount,...a}=t,i=Qo(dm,t.__scopeDialog);return e.jsx(sa,{present:n||i.open,children:i.modal?e.jsx(kee,{...a,ref:s}):e.jsx(Aee,{...a,ref:s})})});vF.displayName=dm;var kee=N.forwardRef((t,s)=>{const r=Qo(dm,t.__scopeDialog),n=N.useRef(null),a=us(s,r.contentRef,n);return N.useEffect(()=>{const i=n.current;if(i)return G_(i)},[]),e.jsx(yF,{...t,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ht(t.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=r.triggerRef.current)==null||o.focus()}),onPointerDownOutside:ht(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:ht(t.onFocusOutside,i=>i.preventDefault())})}),Aee=N.forwardRef((t,s)=>{const r=Qo(dm,t.__scopeDialog),n=N.useRef(!1),a=N.useRef(!1);return e.jsx(yF,{...t,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{var c,d;(c=t.onInteractOutside)==null||c.call(t,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((d=r.triggerRef.current)==null?void 0:d.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),yF=N.forwardRef((t,s)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,...o}=t,l=Qo(dm,r),c=N.useRef(null),d=us(s,c);return Y_(),e.jsxs(e.Fragment,{children:[e.jsx(Z1,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:e.jsx(Lf,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":c4(l.open),...o,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),e.jsxs(e.Fragment,{children:[e.jsx(Eee,{titleId:l.titleId}),e.jsx(Mee,{contentRef:c,descriptionId:l.descriptionId})]})]})}),l4="DialogTitle",jF=N.forwardRef((t,s)=>{const{__scopeDialog:r,...n}=t,a=Qo(l4,r);return e.jsx(Dt.h2,{id:a.titleId,...n,ref:s})});jF.displayName=l4;var bF="DialogDescription",NF=N.forwardRef((t,s)=>{const{__scopeDialog:r,...n}=t,a=Qo(bF,r);return e.jsx(Dt.p,{id:a.descriptionId,...n,ref:s})});NF.displayName=bF;var wF="DialogClose",_F=N.forwardRef((t,s)=>{const{__scopeDialog:r,...n}=t,a=Qo(wF,r);return e.jsx(Dt.button,{type:"button",...n,ref:s,onClick:ht(t.onClick,()=>a.onOpenChange(!1))})});_F.displayName=wF;function c4(t){return t?"open":"closed"}var SF="DialogTitleWarning",[Pee,CF]=SY(SF,{contentName:dm,titleName:l4,docsSlug:"dialog"}),Eee=({titleId:t})=>{const s=CF(SF),r=`\`${s.contentName}\` requires a \`${s.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${s.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${s.docsSlug}`;return N.useEffect(()=>{t&&(document.getElementById(t)||console.error(r))},[r,t]),null},Tee="DialogDescriptionWarning",Mee=({contentRef:t,descriptionId:s})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${CF(Tee).contentName}}.`;return N.useEffect(()=>{var i;const a=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");s&&a&&(document.getElementById(s)||console.warn(n))},[n,t,s]),null},kF=mF,AF=fF,PF=xF,d4=gF,u4=vF,m4=jF,h4=NF,f4=_F;const Os=kF,si=AF,Lee=PF,EF=N.forwardRef(({className:t,...s},r)=>e.jsx(d4,{ref:r,className:bt("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s}));EF.displayName=d4.displayName;const Ds=N.forwardRef(({className:t,children:s,...r},n)=>e.jsxs(Lee,{children:[e.jsx(EF,{}),e.jsxs(u4,{ref:n,className:bt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...r,children:[s,e.jsxs(f4,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(Vo,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Ds.displayName=u4.displayName;const Is=({className:t,...s})=>e.jsx("div",{className:bt("flex flex-col space-y-1.5 text-center sm:text-left",t),...s});Is.displayName="DialogHeader";const Ra=({className:t,...s})=>e.jsx("div",{className:bt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s});Ra.displayName="DialogFooter";const Rs=N.forwardRef(({className:t,...s},r)=>e.jsx(m4,{ref:r,className:bt("text-lg font-semibold leading-none tracking-tight",t),...s}));Rs.displayName=m4.displayName;const Lr=N.forwardRef(({className:t,...s},r)=>e.jsx(h4,{ref:r,className:bt("text-sm text-muted-foreground",t),...s}));Lr.displayName=h4.displayName;const re=N.forwardRef(({className:t,type:s,...r},n)=>e.jsx("input",{type:s,className:bt("flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...r}));re.displayName="Input";const Dee="modulepreload",Iee=function(t){return"/"+t},xk={},qy=function(s,r,n){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(r.map(c=>{if(c=Iee(c),c in xk)return;xk[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":Dee,d||(m.as="script"),m.crossOrigin="",m.href=c,l&&m.setAttribute("nonce",l),document.head.appendChild(m),d)return new Promise((f,h)=>{m.addEventListener("load",f),m.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return s().catch(i)})};/*! Capacitor: https://capacitorjs.com/ - MIT License */var uf;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(uf||(uf={}));class s2 extends Error{constructor(s,r,n){super(s),this.message=s,this.code=r,this.data=n}}const Ree=t=>{var s,r;return t!=null&&t.androidBridge?"android":!((r=(s=t==null?void 0:t.webkit)===null||s===void 0?void 0:s.messageHandlers)===null||r===void 0)&&r.bridge?"ios":"web"},Fee=t=>{const s=t.CapacitorCustomPlatform||null,r=t.Capacitor||{},n=r.Plugins=r.Plugins||{},a=()=>s!==null?s.name:Ree(t),i=()=>a()!=="web",o=m=>{const f=d.get(m);return!!(f!=null&&f.platforms.has(a())||l(m))},l=m=>{var f;return(f=r.PluginHeaders)===null||f===void 0?void 0:f.find(h=>h.name===m)},c=m=>t.console.error(m),d=new Map,u=(m,f={})=>{const h=d.get(m);if(h)return console.warn(`Capacitor plugin "${m}" already registered. Cannot register plugins twice.`),h.proxy;const p=a(),g=l(m);let y;const v=async()=>(!y&&p in f?y=typeof f[p]=="function"?y=await f[p]():y=f[p]:s!==null&&!y&&"web"in f&&(y=typeof f.web=="function"?y=await f.web():y=f.web),y),j=(T,M)=>{var F,k;if(g){const D=g==null?void 0:g.methods.find(z=>M===z.name);if(D)return D.rtype==="promise"?z=>r.nativePromise(m,M.toString(),z):(z,W)=>r.nativeCallback(m,M.toString(),z,W);if(T)return(F=T[M])===null||F===void 0?void 0:F.bind(T)}else{if(T)return(k=T[M])===null||k===void 0?void 0:k.bind(T);throw new s2(`"${m}" plugin is not implemented on ${p}`,uf.Unimplemented)}},w=T=>{let M;const F=(...k)=>{const D=v().then(z=>{const W=j(z,T);if(W){const ue=W(...k);return M=ue==null?void 0:ue.remove,ue}else throw new s2(`"${m}.${T}()" is not implemented on ${p}`,uf.Unimplemented)});return T==="addListener"&&(D.remove=async()=>M()),D};return F.toString=()=>`${T.toString()}() { [capacitor code] }`,Object.defineProperty(F,"name",{value:T,writable:!1,configurable:!1}),F},_=w("addListener"),P=w("removeListener"),E=(T,M)=>{const F=_({eventName:T},M),k=async()=>{const z=await F;P({eventName:T,callbackId:z},M)},D=new Promise(z=>F.then(()=>z({remove:k})));return D.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await k()},D},L=new Proxy({},{get(T,M){switch(M){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return g?E:_;case"removeListener":return P;default:return w(M)}}});return n[m]=L,d.set(m,{name:m,proxy:L,platforms:new Set([...Object.keys(f),...g?[p]:[]])}),L};return r.convertFileSrc||(r.convertFileSrc=m=>m),r.getPlatform=a,r.handleError=c,r.isNativePlatform=i,r.isPluginAvailable=o,r.registerPlugin=u,r.Exception=s2,r.DEBUG=!!r.DEBUG,r.isLoggingEnabled=!!r.isLoggingEnabled,r},Oee=t=>t.Capacitor=Fee(t),Hx=Oee(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),p4=Hx.registerPlugin;class TF{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(s,r){let n=!1;this.listeners[s]||(this.listeners[s]=[],n=!0),this.listeners[s].push(r);const i=this.windowListeners[s];i&&!i.registered&&this.addWindowListener(i),n&&this.sendRetainedArgumentsForEvent(s);const o=async()=>this.removeListener(s,r);return Promise.resolve({remove:o})}async removeAllListeners(){this.listeners={};for(const s in this.windowListeners)this.removeWindowListener(this.windowListeners[s]);this.windowListeners={}}notifyListeners(s,r,n){const a=this.listeners[s];if(!a){if(n){let i=this.retainedEventArguments[s];i||(i=[]),i.push(r),this.retainedEventArguments[s]=i}return}a.forEach(i=>i(r))}hasListeners(s){var r;return!!(!((r=this.listeners[s])===null||r===void 0)&&r.length)}registerWindowListener(s,r){this.windowListeners[r]={registered:!1,windowEventName:s,pluginEventName:r,handler:n=>{this.notifyListeners(r,n)}}}unimplemented(s="not implemented"){return new Hx.Exception(s,uf.Unimplemented)}unavailable(s="not available"){return new Hx.Exception(s,uf.Unavailable)}async removeListener(s,r){const n=this.listeners[s];if(!n)return;const a=n.indexOf(r);this.listeners[s].splice(a,1),this.listeners[s].length||this.removeWindowListener(this.windowListeners[s])}addWindowListener(s){window.addEventListener(s.windowEventName,s.handler),s.registered=!0}removeWindowListener(s){s&&(window.removeEventListener(s.windowEventName,s.handler),s.registered=!1)}sendRetainedArgumentsForEvent(s){const r=this.retainedEventArguments[s];r&&(delete this.retainedEventArguments[s],r.forEach(n=>{this.notifyListeners(s,n)}))}}const gk=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),vk=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class $ee extends TF{async getCookies(){const s=document.cookie,r={};return s.split(";").forEach(n=>{if(n.length<=0)return;let[a,i]=n.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");a=vk(a).trim(),i=vk(i).trim(),r[a]=i}),r}async setCookie(s){try{const r=gk(s.key),n=gk(s.value),a=`; expires=${(s.expires||"").replace("expires=","")}`,i=(s.path||"/").replace("path=",""),o=s.url!=null&&s.url.length>0?`domain=${s.url}`:"";document.cookie=`${r}=${n||""}${a}; path=${i}; ${o};`}catch(r){return Promise.reject(r)}}async deleteCookie(s){try{document.cookie=`${s.key}=; Max-Age=0`}catch(r){return Promise.reject(r)}}async clearCookies(){try{const s=document.cookie.split(";")||[];for(const r of s)document.cookie=r.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(s){return Promise.reject(s)}}async clearAllCookies(){try{await this.clearCookies()}catch(s){return Promise.reject(s)}}}p4("CapacitorCookies",{web:()=>new $ee});const Bee=async t=>new Promise((s,r)=>{const n=new FileReader;n.onload=()=>{const a=n.result;s(a.indexOf(",")>=0?a.split(",")[1]:a)},n.onerror=a=>r(a),n.readAsDataURL(t)}),Uee=(t={})=>{const s=Object.keys(t);return Object.keys(t).map(a=>a.toLocaleLowerCase()).reduce((a,i,o)=>(a[i]=t[s[o]],a),{})},zee=(t,s=!0)=>t?Object.entries(t).reduce((n,a)=>{const[i,o]=a;let l,c;return Array.isArray(o)?(c="",o.forEach(d=>{l=s?encodeURIComponent(d):d,c+=`${i}=${l}&`}),c.slice(0,-1)):(l=s?encodeURIComponent(o):o,c=`${i}=${l}`),`${n}&${c}`},"").substr(1):null,qee=(t,s={})=>{const r=Object.assign({method:t.method||"GET",headers:t.headers},s),a=Uee(t.headers)["content-type"]||"";if(typeof t.data=="string")r.body=t.data;else if(a.includes("application/x-www-form-urlencoded")){const i=new URLSearchParams;for(const[o,l]of Object.entries(t.data||{}))i.set(o,l);r.body=i.toString()}else if(a.includes("multipart/form-data")||t.data instanceof FormData){const i=new FormData;if(t.data instanceof FormData)t.data.forEach((l,c)=>{i.append(c,l)});else for(const l of Object.keys(t.data))i.append(l,t.data[l]);r.body=i;const o=new Headers(r.headers);o.delete("content-type"),r.headers=o}else(a.includes("application/json")||typeof t.data=="object")&&(r.body=JSON.stringify(t.data));return r};class Vee extends TF{async request(s){const r=qee(s,s.webFetchExtra),n=zee(s.params,s.shouldEncodeUrlParams),a=n?`${s.url}?${n}`:s.url,i=await fetch(a,r),o=i.headers.get("content-type")||"";let{responseType:l="text"}=i.ok?s:{};o.includes("application/json")&&(l="json");let c,d;switch(l){case"arraybuffer":case"blob":d=await i.blob(),c=await Bee(d);break;case"json":c=await i.json();break;case"document":case"text":default:c=await i.text()}const u={};return i.headers.forEach((m,f)=>{u[f]=m}),{data:c,headers:u,status:i.status,url:i.url}}async get(s){return this.request(Object.assign(Object.assign({},s),{method:"GET"}))}async post(s){return this.request(Object.assign(Object.assign({},s),{method:"POST"}))}async put(s){return this.request(Object.assign(Object.assign({},s),{method:"PUT"}))}async patch(s){return this.request(Object.assign(Object.assign({},s),{method:"PATCH"}))}async delete(s){return this.request(Object.assign(Object.assign({},s),{method:"DELETE"}))}}p4("CapacitorHttp",{web:()=>new Vee});var ww;(function(t){t.Aztec="AZTEC",t.Codabar="CODABAR",t.Code39="CODE_39",t.Code93="CODE_93",t.Code128="CODE_128",t.DataMatrix="DATA_MATRIX",t.Ean8="EAN_8",t.Ean13="EAN_13",t.Itf="ITF",t.Pdf417="PDF_417",t.QrCode="QR_CODE",t.UpcA="UPC_A",t.UpcE="UPC_E"})(ww||(ww={}));var yk;(function(t){t.CalendarEvent="CALENDAR_EVENT",t.ContactInfo="CONTACT_INFO",t.DriversLicense="DRIVERS_LICENSE",t.Email="EMAIL",t.Geo="GEO",t.Isbn="ISBN",t.Phone="PHONE",t.Product="PRODUCT",t.Sms="SMS",t.Text="TEXT",t.Url="URL",t.Wifi="WIFI",t.Unknown="UNKNOWN"})(yk||(yk={}));var jk;(function(t){t[t["640x480"]=0]="640x480",t[t["1280x720"]=1]="1280x720",t[t["1920x1080"]=2]="1920x1080",t[t["3840x2160"]=3]="3840x2160"})(jk||(jk={}));var bk;(function(t){t.Front="FRONT",t.Back="BACK"})(bk||(bk={}));var Nk;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.PENDING=1]="PENDING",t[t.DOWNLOADING=2]="DOWNLOADING",t[t.CANCELED=3]="CANCELED",t[t.COMPLETED=4]="COMPLETED",t[t.FAILED=5]="FAILED",t[t.INSTALLING=6]="INSTALLING",t[t.DOWNLOAD_PAUSED=7]="DOWNLOAD_PAUSED"})(Nk||(Nk={}));var wk;(function(t){t[t.HOME=0]="HOME",t[t.UNKNOWN=1]="UNKNOWN",t[t.WORK=2]="WORK"})(wk||(wk={}));var _k;(function(t){t[t.HOME=0]="HOME",t[t.UNKNOWN=1]="UNKNOWN",t[t.WORK=2]="WORK"})(_k||(_k={}));var Sk;(function(t){t[t.FAX=0]="FAX",t[t.HOME=1]="HOME",t[t.MOBILE=2]="MOBILE",t[t.UNKNOWN=3]="UNKNOWN",t[t.WORK=4]="WORK"})(Sk||(Sk={}));var Ck;(function(t){t[t.OPEN=1]="OPEN",t[t.WEP=2]="WEP",t[t.WPA=3]="WPA"})(Ck||(Ck={}));const r2=p4("BarcodeScanner",{web:()=>qy(()=>import("./web-U7l89DQl.js"),[]).then(t=>new t.BarcodeScannerWeb)});function Hee(){const[t,s]=N.useState(!1),[r,n]=N.useState(null),a=async()=>{if(!Hx.isNativePlatform())return n("QR scanning is only available on mobile devices"),null;try{if(s(!0),n(null),!await i()&&!await o())return n("Camera permission denied"),null;const{barcodes:c}=await r2.scan({formats:[ww.QrCode]});return c.length>0?c[0].rawValue:null}catch(l){const c=l instanceof Error?l.message:"Failed to scan QR code";return n(c),null}finally{s(!1)}},i=async()=>{try{const{camera:l}=await r2.checkPermissions();return l==="granted"}catch(l){return console.error("Error checking camera permissions:",l),!1}},o=async()=>{try{const{camera:l}=await r2.requestPermissions();return l==="granted"}catch(l){return console.error("Error requesting camera permissions:",l),!1}};return{scanQRCode:a,isScanning:t,error:r,checkPermissions:i,requestPermissions:o,isNative:Hx.isNativePlatform()}}function n2({open:t,onOpenChange:s,onSubmit:r}){const[n,a]=N.useState(""),{scanQRCode:i,isScanning:o,isNative:l}=Hee(),{toast:c}=Ht(),d=()=>{n.trim()&&(r(n),a(""))},u=async()=>{const m=await i();if(m){const f=m.match(/inviteCode=([^&]+)/);if(f){const h=f[1];a(h),r(h)}else m.length<=20?(a(m),r(m)):c({title:"Invalid QR Code",description:"This QR code doesn't contain a valid memorial access code.",variant:"destructive"})}};return e.jsx(Os,{open:t,onOpenChange:s,children:e.jsxs(Ds,{className:"sm:max-w-md","data-testid":"modal-invite-code",children:[e.jsxs(Is,{children:[e.jsx(Rs,{className:"font-serif text-2xl",children:"Enter Access Code"}),e.jsx(Lr,{children:l?"Enter the code or scan the QR code to view this memorial.":"Please enter the invitation code you received to view this memorial."})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(AG,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),e.jsx(re,{placeholder:"Enter code",value:n,onChange:m=>a(m.target.value),onKeyDown:m=>m.key==="Enter"&&d(),className:"pl-10 text-center text-lg tracking-wider","data-testid":"input-access-code"})]}),e.jsx(O,{className:"w-full",size:"lg",onClick:d,disabled:!n.trim(),"data-testid":"button-submit-code",children:"Access Memorial"}),l&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or"})})]}),e.jsxs(O,{variant:"outline",className:"w-full",size:"lg",onClick:u,disabled:o,"data-testid":"button-scan-qr",children:[e.jsx($I,{className:"w-5 h-5 mr-2"}),o?"Scanning...":"Scan QR Code"]})]})]})]})})}var MF={exports:{}},Wee="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Kee=Wee,Yee=Kee;function LF(){}function DF(){}DF.resetWarningCache=LF;var Gee=function(){function t(n,a,i,o,l,c){if(c!==Yee){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}t.isRequired=t;function s(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:s,element:t,elementType:t,instanceOf:s,node:t,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:DF,resetWarningCache:LF};return r.PropTypes=r,r};MF.exports=Gee();var Qee=MF.exports;const yr=h5(Qee);function kk(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ak(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?kk(Object(r),!0).forEach(function(n){IF(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kk(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Vy(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Vy=function(s){return typeof s}:Vy=function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Vy(t)}function IF(t,s,r){return s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function Zee(t,s){if(t==null)return{};var r={},n=Object.keys(t),a,i;for(i=0;i<n.length;i++)a=n[i],!(s.indexOf(a)>=0)&&(r[a]=t[a]);return r}function Xee(t,s){if(t==null)return{};var r=Zee(t,s),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(s.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function RF(t,s){return Jee(t)||ete(t,s)||tte(t,s)||ste()}function Jee(t){if(Array.isArray(t))return t}function ete(t,s){var r=t&&(typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"]);if(r!=null){var n=[],a=!0,i=!1,o,l;try{for(r=r.call(t);!(a=(o=r.next()).done)&&(n.push(o.value),!(s&&n.length===s));a=!0);}catch(c){i=!0,l=c}finally{try{!a&&r.return!=null&&r.return()}finally{if(i)throw l}}return n}}function tte(t,s){if(t){if(typeof t=="string")return Pk(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Pk(t,s)}}function Pk(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,n=new Array(s);r<s;r++)n[r]=t[r];return n}function ste(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Sa=function(s,r,n){var a=!!n,i=Nt.useRef(n);Nt.useEffect(function(){i.current=n},[n]),Nt.useEffect(function(){if(!a||!s)return function(){};var o=function(){i.current&&i.current.apply(i,arguments)};return s.on(r,o),function(){s.off(r,o)}},[a,r,s,i])},_w=function(s){var r=Nt.useRef(s);return Nt.useEffect(function(){r.current=s},[s]),r.current},mf=function(s){return s!==null&&Vy(s)==="object"},rte=function(s){return mf(s)&&typeof s.then=="function"},nte=function(s){return mf(s)&&typeof s.elements=="function"&&typeof s.createToken=="function"&&typeof s.createPaymentMethod=="function"&&typeof s.confirmCardPayment=="function"},Ek="[object Object]",ate=function t(s,r){if(!mf(s)||!mf(r))return s===r;var n=Array.isArray(s),a=Array.isArray(r);if(n!==a)return!1;var i=Object.prototype.toString.call(s)===Ek,o=Object.prototype.toString.call(r)===Ek;if(i!==o)return!1;if(!i&&!n)return s===r;var l=Object.keys(s),c=Object.keys(r);if(l.length!==c.length)return!1;for(var d={},u=0;u<l.length;u+=1)d[l[u]]=!0;for(var m=0;m<c.length;m+=1)d[c[m]]=!0;var f=Object.keys(d);if(f.length!==l.length)return!1;var h=s,p=r,g=function(v){return t(h[v],p[v])};return f.every(g)},FF=function(s,r,n){return mf(s)?Object.keys(s).reduce(function(a,i){var o=!mf(r)||!ate(s[i],r[i]);return n.includes(i)?(o&&console.warn("Unsupported prop change: options.".concat(i," is not a mutable property.")),a):o?Ak(Ak({},a||{}),{},IF({},i,s[i])):a},null):null},OF="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",Tk=function(s){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:OF;if(s===null||nte(s))return s;throw new Error(r)},ite=function(s){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:OF;if(rte(s))return{tag:"async",stripePromise:Promise.resolve(s).then(function(a){return Tk(a,r)})};var n=Tk(s,r);return n===null?{tag:"empty"}:{tag:"sync",stripe:n}},ote=function(s){!s||!s._registerWrapper||!s.registerAppInfo||(s._registerWrapper({name:"react-stripe-js",version:"5.0.0"}),s.registerAppInfo({name:"react-stripe-js",version:"5.0.0",url:"https://stripe.com/docs/stripe-js/react"}))},nj=Nt.createContext(null);nj.displayName="ElementsContext";var $F=function(s,r){if(!s)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(r," in an <Elements> provider."));return s},x4=function(s){var r=s.stripe,n=s.options,a=s.children,i=Nt.useMemo(function(){return ite(r)},[r]),o=Nt.useState(function(){return{stripe:i.tag==="sync"?i.stripe:null,elements:i.tag==="sync"?i.stripe.elements(n):null}}),l=RF(o,2),c=l[0],d=l[1];Nt.useEffect(function(){var f=!0,h=function(g){d(function(y){return y.stripe?y:{stripe:g,elements:g.elements(n)}})};return i.tag==="async"&&!c.stripe?i.stripePromise.then(function(p){p&&f&&h(p)}):i.tag==="sync"&&!c.stripe&&h(i.stripe),function(){f=!1}},[i,c,n]);var u=_w(r);Nt.useEffect(function(){u!==null&&u!==r&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[u,r]);var m=_w(n);return Nt.useEffect(function(){if(c.elements){var f=FF(n,m,["clientSecret","fonts"]);f&&c.elements.update(f)}},[n,m,c.elements]),Nt.useEffect(function(){ote(c.stripe)},[c.stripe]),Nt.createElement(nj.Provider,{value:c},a)};x4.propTypes={stripe:yr.any,options:yr.object};var lte=function(s){var r=Nt.useContext(nj);return $F(r,s)},BF=function(){var s=lte("calls useElements()"),r=s.elements;return r};yr.func.isRequired;var UF=Nt.createContext(null);UF.displayName="CheckoutContext";yr.any,yr.shape({clientSecret:yr.oneOfType([yr.string,yr.instanceOf(Promise)]).isRequired,elementsOptions:yr.object}).isRequired;var Sw=function(s){var r=Nt.useContext(UF),n=Nt.useContext(nj);if(r){if(n)throw new Error("You cannot wrap the part of your app that ".concat(s," in both <CheckoutProvider> and <Elements> providers."));return r}else return $F(n,s)},cte=["mode"],dte=function(s){return s.charAt(0).toUpperCase()+s.slice(1)},ri=function(s,r){var n="".concat(dte(s),"Element"),a=function(c){var d=c.id,u=c.className,m=c.options,f=m===void 0?{}:m,h=c.onBlur,p=c.onFocus,g=c.onReady,y=c.onChange,v=c.onEscape,j=c.onClick,w=c.onLoadError,_=c.onLoaderStart,P=c.onNetworksChange,E=c.onConfirm,L=c.onCancel,T=c.onShippingAddressChange,M=c.onShippingRateChange,F=c.onSavedPaymentMethodRemove,k=c.onSavedPaymentMethodUpdate,D=Sw("mounts <".concat(n,">")),z="elements"in D?D.elements:null,W="checkoutState"in D?D.checkoutState:null,ue=(W==null?void 0:W.type)==="success"||(W==null?void 0:W.type)==="loading"?W.sdk:null,ae=Nt.useState(null),Ne=RF(ae,2),K=Ne[0],Q=Ne[1],ke=Nt.useRef(null),G=Nt.useRef(null);Sa(K,"blur",h),Sa(K,"focus",p),Sa(K,"escape",v),Sa(K,"click",j),Sa(K,"loaderror",w),Sa(K,"loaderstart",_),Sa(K,"networkschange",P),Sa(K,"confirm",E),Sa(K,"cancel",L),Sa(K,"shippingaddresschange",T),Sa(K,"shippingratechange",M),Sa(K,"savedpaymentmethodremove",F),Sa(K,"savedpaymentmethodupdate",k),Sa(K,"change",y);var I;g&&(s==="expressCheckout"?I=g:I=function(){g(K)}),Sa(K,"ready",I),Nt.useLayoutEffect(function(){if(ke.current===null&&G.current!==null&&(z||ue)){var J=null;if(ue)switch(s){case"payment":J=ue.createPaymentElement(f);break;case"address":if("mode"in f){var se=f.mode,je=Xee(f,cte);if(se==="shipping")J=ue.createShippingAddressElement(je);else if(se==="billing")J=ue.createBillingAddressElement(je);else throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.")}else throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");break;case"expressCheckout":J=ue.createExpressCheckoutElement(f);break;case"currencySelector":J=ue.createCurrencySelectorElement();break;case"taxId":J=ue.createTaxIdElement(f);break;default:throw new Error("Invalid Element type ".concat(n,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else z&&(J=z.create(s,f));ke.current=J,Q(J),J&&J.mount(G.current)}},[z,ue,f]);var Z=_w(f);return Nt.useEffect(function(){if(ke.current){var J=FF(f,Z,["paymentRequest"]);J&&"update"in ke.current&&ke.current.update(J)}},[f,Z]),Nt.useLayoutEffect(function(){return function(){if(ke.current&&typeof ke.current.destroy=="function")try{ke.current.destroy(),ke.current=null}catch{}}},[]),Nt.createElement("div",{id:d,className:u,ref:G})},i=function(c){Sw("mounts <".concat(n,">"));var d=c.id,u=c.className;return Nt.createElement("div",{id:d,className:u})},o=r?i:a;return o.propTypes={id:yr.string,className:yr.string,onChange:yr.func,onBlur:yr.func,onFocus:yr.func,onReady:yr.func,onEscape:yr.func,onClick:yr.func,onLoadError:yr.func,onLoaderStart:yr.func,onNetworksChange:yr.func,onConfirm:yr.func,onCancel:yr.func,onShippingAddressChange:yr.func,onShippingRateChange:yr.func,onSavedPaymentMethodRemove:yr.func,onSavedPaymentMethodUpdate:yr.func,options:yr.object},o.displayName=n,o.__elementType=s,o},ni=typeof window>"u",ute=Nt.createContext(null);ute.displayName="EmbeddedCheckoutProviderContext";var zF=function(){var s=Sw("calls useStripe()"),r=s.stripe;return r};ri("auBankAccount",ni);ri("card",ni);ri("cardNumber",ni);ri("cardExpiry",ni);ri("cardCvc",ni);ri("iban",ni);var qF=ri("payment",ni);ri("expressCheckout",ni);ri("paymentRequestButton",ni);ri("linkAuthentication",ni);ri("address",ni);ri("shippingAddress",ni);ri("paymentMethodMessaging",ni);ri("taxId",ni);var VF="clover",mte=function(s){return s===3?"v3":s},HF="https://js.stripe.com",hte="".concat(HF,"/").concat(VF,"/stripe.js"),fte=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,pte=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,Mk="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",xte=function(s){return fte.test(s)||pte.test(s)},gte=function(){for(var s=document.querySelectorAll('script[src^="'.concat(HF,'"]')),r=0;r<s.length;r++){var n=s[r];if(xte(n.src))return n}return null},Lk=function(s){var r="",n=document.createElement("script");n.src="".concat(hte).concat(r);var a=document.head||document.body;if(!a)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return a.appendChild(n),n},vte=function(s,r){!s||!s._registerWrapper||s._registerWrapper({name:"stripe-js",version:"8.0.0",startTime:r})},Mp=null,ty=null,sy=null,yte=function(s){return function(r){s(new Error("Failed to load Stripe.js",{cause:r}))}},jte=function(s,r){return function(){window.Stripe?s(window.Stripe):r(new Error("Stripe.js not available"))}},bte=function(s){return Mp!==null?Mp:(Mp=new Promise(function(r,n){if(typeof window>"u"||typeof document>"u"){r(null);return}if(window.Stripe&&s&&console.warn(Mk),window.Stripe){r(window.Stripe);return}try{var a=gte();if(a&&s)console.warn(Mk);else if(!a)a=Lk(s);else if(a&&sy!==null&&ty!==null){var i;a.removeEventListener("load",sy),a.removeEventListener("error",ty),(i=a.parentNode)===null||i===void 0||i.removeChild(a),a=Lk(s)}sy=jte(r,n),ty=yte(n),a.addEventListener("load",sy),a.addEventListener("error",ty)}catch(o){n(o);return}}),Mp.catch(function(r){return Mp=null,Promise.reject(r)}))},Nte=function(s,r,n){if(s===null)return null;var a=r[0],i=a.match(/^pk_test/),o=mte(s.version),l=VF;i&&o!==l&&console.warn("Stripe.js@".concat(o," was loaded on the page, but @stripe/stripe-js@").concat("8.0.0"," expected Stripe.js@").concat(l,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var c=s.apply(void 0,r);return vte(c,n),c},Lp,WF=!1,KF=function(){return Lp||(Lp=bte(null).catch(function(s){return Lp=null,Promise.reject(s)}),Lp)};Promise.resolve().then(function(){return KF()}).catch(function(t){WF||console.warn(t)});var YF=function(){for(var s=arguments.length,r=new Array(s),n=0;n<s;n++)r[n]=arguments[n];WF=!0;var a=Date.now();return KF().then(function(i){return Nte(i,r,a)})},wte="Label",GF=N.forwardRef((t,s)=>e.jsx(Dt.label,{...t,ref:s,onMouseDown:r=>{var a;r.target.closest("button, input, select, textarea")||((a=t.onMouseDown)==null||a.call(t,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));GF.displayName=wte;var QF=GF;const _te=Ag("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),De=N.forwardRef(({className:t,...s},r)=>e.jsx(QF,{ref:r,className:bt(_te(),t),...s}));De.displayName=QF.displayName;function aj(t){const s=N.useRef({value:t,previous:t});return N.useMemo(()=>(s.current.value!==t&&(s.current.previous=s.current.value,s.current.value=t),s.current.previous),[t])}var g4="Checkbox",[Ste,qge]=Dn(g4),[Cte,kte]=Ste(g4),ZF=N.forwardRef((t,s)=>{const{__scopeCheckbox:r,name:n,checked:a,defaultChecked:i,required:o,disabled:l,value:c="on",onCheckedChange:d,form:u,...m}=t,[f,h]=N.useState(null),p=us(s,_=>h(_)),g=N.useRef(!1),y=f?u||!!f.closest("form"):!0,[v=!1,j]=Ii({prop:a,defaultProp:i,onChange:d}),w=N.useRef(v);return N.useEffect(()=>{const _=f==null?void 0:f.form;if(_){const P=()=>j(w.current);return _.addEventListener("reset",P),()=>_.removeEventListener("reset",P)}},[f,j]),e.jsxs(Cte,{scope:r,state:v,disabled:l,children:[e.jsx(Dt.button,{type:"button",role:"checkbox","aria-checked":Ed(v)?"mixed":v,"aria-required":o,"data-state":eO(v),"data-disabled":l?"":void 0,disabled:l,value:c,...m,ref:p,onKeyDown:ht(t.onKeyDown,_=>{_.key==="Enter"&&_.preventDefault()}),onClick:ht(t.onClick,_=>{j(P=>Ed(P)?!0:!P),y&&(g.current=_.isPropagationStopped(),g.current||_.stopPropagation())})}),y&&e.jsx(Ate,{control:f,bubbles:!g.current,name:n,value:c,checked:v,required:o,disabled:l,form:u,style:{transform:"translateX(-100%)"},defaultChecked:Ed(i)?!1:i})]})});ZF.displayName=g4;var XF="CheckboxIndicator",JF=N.forwardRef((t,s)=>{const{__scopeCheckbox:r,forceMount:n,...a}=t,i=kte(XF,r);return e.jsx(sa,{present:n||Ed(i.state)||i.state===!0,children:e.jsx(Dt.span,{"data-state":eO(i.state),"data-disabled":i.disabled?"":void 0,...a,ref:s,style:{pointerEvents:"none",...t.style}})})});JF.displayName=XF;var Ate=t=>{const{control:s,checked:r,bubbles:n=!0,defaultChecked:a,...i}=t,o=N.useRef(null),l=aj(r),c=Y1(s);N.useEffect(()=>{const u=o.current,m=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(m,"checked").set;if(l!==r&&h){const p=new Event("click",{bubbles:n});u.indeterminate=Ed(r),h.call(u,Ed(r)?!1:r),u.dispatchEvent(p)}},[l,r,n]);const d=N.useRef(Ed(r)?!1:r);return e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a??d.current,...i,tabIndex:-1,ref:o,style:{...t.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Ed(t){return t==="indeterminate"}function eO(t){return Ed(t)?"indeterminate":t?"checked":"unchecked"}var tO=ZF,Pte=JF;const Rg=N.forwardRef(({className:t,...s},r)=>e.jsx(tO,{ref:r,className:bt("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...s,children:e.jsx(Pte,{className:bt("flex items-center justify-center text-current"),children:e.jsx($n,{className:"h-4 w-4"})})}));Rg.displayName=tO.displayName;const Ete=YF("pk_test_51SRjnR96jHydbgOxUFZjvSWSeQphnoU2b1Vd31fAuOC468pP5CokiueX7T9WSsQ0skKhOniLrRME4V82JcGUIQa800pTAsFGFZ");function Tte({fundraiserId:t,fundraiserTitle:s,amount:r,donorName:n,isAnonymous:a,clientSecret:i,onSuccess:o,onCancel:l}){const c=zF(),d=BF(),{toast:u}=Ht(),[m,f]=N.useState(!1),h=async p=>{if(p.preventDefault(),!(!c||!d)){f(!0);try{const{error:g,paymentIntent:y}=await c.confirmPayment({elements:d,confirmParams:{return_url:window.location.origin},redirect:"if_required"});if(g)u({title:"Payment Failed",description:g.message,variant:"destructive"}),f(!1);else if(y&&y.status==="succeeded"){const j=await(await pt("POST",`/api/fundraisers/${t}/donations`,{donorName:n,amount:r,isAnonymous:a,stripePaymentId:y.id})).json();u({title:"Donation Successful",description:`Thank you for your $${r} donation!`}),o()}}catch(g){u({title:"Error",description:g.message||"Failed to process donation",variant:"destructive"}),f(!1)}}};return e.jsxs("form",{onSubmit:h,className:"space-y-6",children:[e.jsx("div",{className:"bg-accent/10 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Donation Amount"}),e.jsxs("span",{className:"text-2xl font-bold text-foreground","data-testid":"text-donation-amount",children:["$",r]})]})}),e.jsx(qF,{}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(O,{type:"button",variant:"outline",onClick:l,disabled:m,className:"flex-1","data-testid":"button-cancel-donation",children:"Cancel"}),e.jsx(O,{type:"submit",disabled:!c||m,className:"flex-1","data-testid":"button-complete-donation",children:m?e.jsxs(e.Fragment,{children:[e.jsx(tn,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ga,{className:"w-4 h-4 mr-2"}),"Complete Donation"]})})]}),e.jsx("p",{className:"text-xs text-center text-muted-foreground",children:"Secure payment powered by Stripe"})]})}function Mte({open:t,onOpenChange:s,fundraiserId:r,fundraiserTitle:n,onSuccess:a}){const{toast:i}=Ht(),[o,l]=N.useState("details"),[c,d]=N.useState(""),[u,m]=N.useState(""),[f,h]=N.useState(!1),[p,g]=N.useState(""),[y,v]=N.useState(!1),j=()=>{l("details"),d(""),m(""),h(!1),g("")},w=()=>{j(),s(!1)},_=async()=>{if(!c.trim()||!u||Number(u)<=0){i({title:"Validation Error",description:"Please enter your name and a valid donation amount",variant:"destructive"});return}v(!0);try{const L=await(await pt("POST",`/api/fundraisers/${r}/create-donation-payment-intent`,{amount:Number(u)})).json();g(L.clientSecret),l("payment")}catch(E){i({title:"Error",description:E.message||"Failed to initialize payment",variant:"destructive"})}finally{v(!1)}},P=()=>{j(),a()};return e.jsx(Os,{open:t,onOpenChange:w,children:e.jsxs(Ds,{className:"sm:max-w-md","data-testid":"modal-donation-payment",children:[e.jsxs(Is,{children:[e.jsx(Rs,{className:"font-serif text-2xl",children:"Make a Donation"}),e.jsxs(Lr,{children:["Support ",n]})]}),o==="details"&&e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"donorName",children:"Your Name*"}),e.jsx(re,{id:"donorName",placeholder:"John Smith",value:c,onChange:E=>d(E.target.value),"data-testid":"input-donor-name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"amount",children:"Donation Amount (USD)*"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ga,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(re,{id:"amount",type:"number",min:"1",step:"0.01",placeholder:"50.00",value:u,onChange:E=>m(E.target.value),className:"pl-8","data-testid":"input-donation-amount"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Rg,{id:"anonymous",checked:f,onCheckedChange:E=>h(E),"data-testid":"checkbox-anonymous"}),e.jsx(De,{htmlFor:"anonymous",className:"text-sm cursor-pointer",children:"Make this donation anonymous"})]}),e.jsx(O,{onClick:_,disabled:y,className:"w-full",size:"lg","data-testid":"button-continue-to-payment",children:y?e.jsxs(e.Fragment,{children:[e.jsx(tn,{className:"w-4 h-4 mr-2 animate-spin"}),"Preparing..."]}):"Continue to Payment"})]}),o==="payment"&&p&&e.jsx("div",{className:"py-4",children:e.jsx(x4,{stripe:Ete,options:{clientSecret:p},children:e.jsx(Tte,{fundraiserId:r,fundraiserTitle:n,amount:u,donorName:c,isAnonymous:f,clientSecret:p,onSuccess:P,onCancel:()=>l("details")})})})]})})}var Fg=t=>t.type==="checkbox",Ou=t=>t instanceof Date,Ea=t=>t==null;const sO=t=>typeof t=="object";var pn=t=>!Ea(t)&&!Array.isArray(t)&&sO(t)&&!Ou(t),rO=t=>pn(t)&&t.target?Fg(t.target)?t.target.checked:t.target.value:t,Lte=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,nO=(t,s)=>t.has(Lte(s)),Dte=t=>{const s=t.constructor&&t.constructor.prototype;return pn(s)&&s.hasOwnProperty("isPrototypeOf")},v4=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Gn(t){let s;const r=Array.isArray(t),n=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)s=new Date(t);else if(t instanceof Set)s=new Set(t);else if(!(v4&&(t instanceof Blob||n))&&(r||pn(t)))if(s=r?[]:{},!r&&!Dte(t))s=t;else for(const a in t)t.hasOwnProperty(a)&&(s[a]=Gn(t[a]));else return t;return s}var ij=t=>Array.isArray(t)?t.filter(Boolean):[],dn=t=>t===void 0,Ct=(t,s,r)=>{if(!s||!pn(t))return r;const n=ij(s.split(/[,[\].]+?/)).reduce((a,i)=>Ea(a)?a:a[i],t);return dn(n)||n===t?dn(t[s])?r:t[s]:n},yi=t=>typeof t=="boolean",y4=t=>/^\w*$/.test(t),aO=t=>ij(t.replace(/["|']|\]/g,"").split(/\.|\[/)),ar=(t,s,r)=>{let n=-1;const a=y4(s)?[s]:aO(s),i=a.length,o=i-1;for(;++n<i;){const l=a[n];let c=r;if(n!==o){const d=t[l];c=pn(d)||Array.isArray(d)?d:isNaN(+a[n+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;t[l]=c,t=t[l]}};const U0={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Lo={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},ec={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},iO=Nt.createContext(null),oj=()=>Nt.useContext(iO),Ite=t=>{const{children:s,...r}=t;return Nt.createElement(iO.Provider,{value:r},s)};var oO=(t,s,r,n=!0)=>{const a={defaultValues:s._defaultValues};for(const i in t)Object.defineProperty(a,i,{get:()=>{const o=i;return s._proxyFormState[o]!==Lo.all&&(s._proxyFormState[o]=!n||Lo.all),r&&(r[o]=!0),t[o]}});return a};function Rte(t){const s=oj(),{control:r=s.control,disabled:n,name:a,exact:i}=t||{},[o,l]=Nt.useState(r._formState),c=Nt.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),d=Nt.useRef(a);return d.current=a,Nt.useEffect(()=>r._subscribe({name:d.current,formState:c.current,exact:i,callback:u=>{!n&&l({...r._formState,...u})}}),[r,n,i]),Nt.useEffect(()=>{c.current.isValid&&r._setValid(!0)},[r]),Nt.useMemo(()=>oO(o,r,c.current,!1),[o,r])}var yl=t=>typeof t=="string",lO=(t,s,r,n,a)=>yl(t)?(n&&s.watch.add(t),Ct(r,t,a)):Array.isArray(t)?t.map(i=>(n&&s.watch.add(i),Ct(r,i))):(n&&(s.watchAll=!0),r);function Fte(t){const s=oj(),{control:r=s.control,name:n,defaultValue:a,disabled:i,exact:o}=t||{},l=Nt.useRef(n),c=Nt.useRef(a);l.current=n,Nt.useEffect(()=>r._subscribe({name:l.current,formState:{values:!0},exact:o,callback:m=>!i&&u(lO(l.current,r._names,m.values||r._formValues,!1,c.current))}),[r,i,o]);const[d,u]=Nt.useState(r._getWatch(n,a));return Nt.useEffect(()=>r._removeUnmounted()),d}function Ote(t){const s=oj(),{name:r,disabled:n,control:a=s.control,shouldUnregister:i}=t,o=nO(a._names.array,r),l=Fte({control:a,name:r,defaultValue:Ct(a._formValues,r,Ct(a._defaultValues,r,t.defaultValue)),exact:!0}),c=Rte({control:a,name:r,exact:!0}),d=Nt.useRef(t),u=Nt.useRef(a.register(r,{...t.rules,value:l,...yi(t.disabled)?{disabled:t.disabled}:{}})),m=Nt.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Ct(c.errors,r)},isDirty:{enumerable:!0,get:()=>!!Ct(c.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!Ct(c.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!Ct(c.validatingFields,r)},error:{enumerable:!0,get:()=>Ct(c.errors,r)}}),[c,r]),f=Nt.useCallback(y=>u.current.onChange({target:{value:rO(y),name:r},type:U0.CHANGE}),[r]),h=Nt.useCallback(()=>u.current.onBlur({target:{value:Ct(a._formValues,r),name:r},type:U0.BLUR}),[r,a._formValues]),p=Nt.useCallback(y=>{const v=Ct(a._fields,r);v&&y&&(v._f.ref={focus:()=>y.focus(),select:()=>y.select(),setCustomValidity:j=>y.setCustomValidity(j),reportValidity:()=>y.reportValidity()})},[a._fields,r]),g=Nt.useMemo(()=>({name:r,value:l,...yi(n)||c.disabled?{disabled:c.disabled||n}:{},onChange:f,onBlur:h,ref:p}),[r,n,c.disabled,f,h,p,l]);return Nt.useEffect(()=>{const y=a._options.shouldUnregister||i;a.register(r,{...d.current.rules,...yi(d.current.disabled)?{disabled:d.current.disabled}:{}});const v=(j,w)=>{const _=Ct(a._fields,j);_&&_._f&&(_._f.mount=w)};if(v(r,!0),y){const j=Gn(Ct(a._options.defaultValues,r));ar(a._defaultValues,r,j),dn(Ct(a._formValues,r))&&ar(a._formValues,r,j)}return!o&&a.register(r),()=>{(o?y&&!a._state.action:y)?a.unregister(r):v(r,!1)}},[r,a,o,i]),Nt.useEffect(()=>{a._setDisabledField({disabled:n,name:r})},[n,r,a]),Nt.useMemo(()=>({field:g,formState:c,fieldState:m}),[g,c,m])}const $te=t=>t.render(Ote(t));var cO=(t,s,r,n,a)=>s?{...r[t],types:{...r[t]&&r[t].types?r[t].types:{},[n]:a||!0}}:{},cx=t=>Array.isArray(t)?t:[t],Dk=()=>{let t=[];return{get observers(){return t},next:a=>{for(const i of t)i.next&&i.next(a)},subscribe:a=>(t.push(a),{unsubscribe:()=>{t=t.filter(i=>i!==a)}}),unsubscribe:()=>{t=[]}}},Cw=t=>Ea(t)||!sO(t);function id(t,s){if(Cw(t)||Cw(s))return t===s;if(Ou(t)&&Ou(s))return t.getTime()===s.getTime();const r=Object.keys(t),n=Object.keys(s);if(r.length!==n.length)return!1;for(const a of r){const i=t[a];if(!n.includes(a))return!1;if(a!=="ref"){const o=s[a];if(Ou(i)&&Ou(o)||pn(i)&&pn(o)||Array.isArray(i)&&Array.isArray(o)?!id(i,o):i!==o)return!1}}return!0}var Aa=t=>pn(t)&&!Object.keys(t).length,j4=t=>t.type==="file",Do=t=>typeof t=="function",z0=t=>{if(!v4)return!1;const s=t?t.ownerDocument:0;return t instanceof(s&&s.defaultView?s.defaultView.HTMLElement:HTMLElement)},dO=t=>t.type==="select-multiple",b4=t=>t.type==="radio",Bte=t=>b4(t)||Fg(t),a2=t=>z0(t)&&t.isConnected;function Ute(t,s){const r=s.slice(0,-1).length;let n=0;for(;n<r;)t=dn(t)?n++:t[s[n++]];return t}function zte(t){for(const s in t)if(t.hasOwnProperty(s)&&!dn(t[s]))return!1;return!0}function En(t,s){const r=Array.isArray(s)?s:y4(s)?[s]:aO(s),n=r.length===1?t:Ute(t,r),a=r.length-1,i=r[a];return n&&delete n[i],a!==0&&(pn(n)&&Aa(n)||Array.isArray(n)&&zte(n))&&En(t,r.slice(0,-1)),t}var uO=t=>{for(const s in t)if(Do(t[s]))return!0;return!1};function q0(t,s={}){const r=Array.isArray(t);if(pn(t)||r)for(const n in t)Array.isArray(t[n])||pn(t[n])&&!uO(t[n])?(s[n]=Array.isArray(t[n])?[]:{},q0(t[n],s[n])):Ea(t[n])||(s[n]=!0);return s}function mO(t,s,r){const n=Array.isArray(t);if(pn(t)||n)for(const a in t)Array.isArray(t[a])||pn(t[a])&&!uO(t[a])?dn(s)||Cw(r[a])?r[a]=Array.isArray(t[a])?q0(t[a],[]):{...q0(t[a])}:mO(t[a],Ea(s)?{}:s[a],r[a]):r[a]=!id(t[a],s[a]);return r}var Dp=(t,s)=>mO(t,s,q0(s));const Ik={value:!1,isValid:!1},Rk={value:!0,isValid:!0};var hO=t=>{if(Array.isArray(t)){if(t.length>1){const s=t.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:s,isValid:!!s.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!dn(t[0].attributes.value)?dn(t[0].value)||t[0].value===""?Rk:{value:t[0].value,isValid:!0}:Rk:Ik}return Ik},fO=(t,{valueAsNumber:s,valueAsDate:r,setValueAs:n})=>dn(t)?t:s?t===""?NaN:t&&+t:r&&yl(t)?new Date(t):n?n(t):t;const Fk={isValid:!1,value:null};var pO=t=>Array.isArray(t)?t.reduce((s,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:s,Fk):Fk;function Ok(t){const s=t.ref;return j4(s)?s.files:b4(s)?pO(t.refs).value:dO(s)?[...s.selectedOptions].map(({value:r})=>r):Fg(s)?hO(t.refs).value:fO(dn(s.value)?t.ref.value:s.value,t)}var qte=(t,s,r,n)=>{const a={};for(const i of t){const o=Ct(s,i);o&&ar(a,i,o._f)}return{criteriaMode:r,names:[...t],fields:a,shouldUseNativeValidation:n}},V0=t=>t instanceof RegExp,Ip=t=>dn(t)?t:V0(t)?t.source:pn(t)?V0(t.value)?t.value.source:t.value:t,$k=t=>({isOnSubmit:!t||t===Lo.onSubmit,isOnBlur:t===Lo.onBlur,isOnChange:t===Lo.onChange,isOnAll:t===Lo.all,isOnTouch:t===Lo.onTouched});const Bk="AsyncFunction";var Vte=t=>!!t&&!!t.validate&&!!(Do(t.validate)&&t.validate.constructor.name===Bk||pn(t.validate)&&Object.values(t.validate).find(s=>s.constructor.name===Bk)),Hte=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),Uk=(t,s,r)=>!r&&(s.watchAll||s.watch.has(t)||[...s.watch].some(n=>t.startsWith(n)&&/^\.\w+/.test(t.slice(n.length))));const dx=(t,s,r,n)=>{for(const a of r||Object.keys(t)){const i=Ct(t,a);if(i){const{_f:o,...l}=i;if(o){if(o.refs&&o.refs[0]&&s(o.refs[0],a)&&!n)return!0;if(o.ref&&s(o.ref,o.name)&&!n)return!0;if(dx(l,s))break}else if(pn(l)&&dx(l,s))break}}};function zk(t,s,r){const n=Ct(t,r);if(n||y4(r))return{error:n,name:r};const a=r.split(".");for(;a.length;){const i=a.join("."),o=Ct(s,i),l=Ct(t,i);if(o&&!Array.isArray(o)&&r!==i)return{name:r};if(l&&l.type)return{name:i,error:l};a.pop()}return{name:r}}var Wte=(t,s,r,n)=>{r(t);const{name:a,...i}=t;return Aa(i)||Object.keys(i).length>=Object.keys(s).length||Object.keys(i).find(o=>s[o]===(!n||Lo.all))},Kte=(t,s,r)=>!t||!s||t===s||cx(t).some(n=>n&&(r?n===s:n.startsWith(s)||s.startsWith(n))),Yte=(t,s,r,n,a)=>a.isOnAll?!1:!r&&a.isOnTouch?!(s||t):(r?n.isOnBlur:a.isOnBlur)?!t:(r?n.isOnChange:a.isOnChange)?t:!0,Gte=(t,s)=>!ij(Ct(t,s)).length&&En(t,s),Qte=(t,s,r)=>{const n=cx(Ct(t,r));return ar(n,"root",s[r]),ar(t,r,n),t},Hy=t=>yl(t);function qk(t,s,r="validate"){if(Hy(t)||Array.isArray(t)&&t.every(Hy)||yi(t)&&!t)return{type:r,message:Hy(t)?t:"",ref:s}}var Hm=t=>pn(t)&&!V0(t)?t:{value:t,message:""},Vk=async(t,s,r,n,a,i)=>{const{ref:o,refs:l,required:c,maxLength:d,minLength:u,min:m,max:f,pattern:h,validate:p,name:g,valueAsNumber:y,mount:v}=t._f,j=Ct(r,g);if(!v||s.has(g))return{};const w=l?l[0]:o,_=D=>{a&&w.reportValidity&&(w.setCustomValidity(yi(D)?"":D||""),w.reportValidity())},P={},E=b4(o),L=Fg(o),T=E||L,M=(y||j4(o))&&dn(o.value)&&dn(j)||z0(o)&&o.value===""||j===""||Array.isArray(j)&&!j.length,F=cO.bind(null,g,n,P),k=(D,z,W,ue=ec.maxLength,ae=ec.minLength)=>{const Ne=D?z:W;P[g]={type:D?ue:ae,message:Ne,ref:o,...F(D?ue:ae,Ne)}};if(i?!Array.isArray(j)||!j.length:c&&(!T&&(M||Ea(j))||yi(j)&&!j||L&&!hO(l).isValid||E&&!pO(l).isValid)){const{value:D,message:z}=Hy(c)?{value:!!c,message:c}:Hm(c);if(D&&(P[g]={type:ec.required,message:z,ref:w,...F(ec.required,z)},!n))return _(z),P}if(!M&&(!Ea(m)||!Ea(f))){let D,z;const W=Hm(f),ue=Hm(m);if(!Ea(j)&&!isNaN(j)){const ae=o.valueAsNumber||j&&+j;Ea(W.value)||(D=ae>W.value),Ea(ue.value)||(z=ae<ue.value)}else{const ae=o.valueAsDate||new Date(j),Ne=ke=>new Date(new Date().toDateString()+" "+ke),K=o.type=="time",Q=o.type=="week";yl(W.value)&&j&&(D=K?Ne(j)>Ne(W.value):Q?j>W.value:ae>new Date(W.value)),yl(ue.value)&&j&&(z=K?Ne(j)<Ne(ue.value):Q?j<ue.value:ae<new Date(ue.value))}if((D||z)&&(k(!!D,W.message,ue.message,ec.max,ec.min),!n))return _(P[g].message),P}if((d||u)&&!M&&(yl(j)||i&&Array.isArray(j))){const D=Hm(d),z=Hm(u),W=!Ea(D.value)&&j.length>+D.value,ue=!Ea(z.value)&&j.length<+z.value;if((W||ue)&&(k(W,D.message,z.message),!n))return _(P[g].message),P}if(h&&!M&&yl(j)){const{value:D,message:z}=Hm(h);if(V0(D)&&!j.match(D)&&(P[g]={type:ec.pattern,message:z,ref:o,...F(ec.pattern,z)},!n))return _(z),P}if(p){if(Do(p)){const D=await p(j,r),z=qk(D,w);if(z&&(P[g]={...z,...F(ec.validate,z.message)},!n))return _(z.message),P}else if(pn(p)){let D={};for(const z in p){if(!Aa(D)&&!n)break;const W=qk(await p[z](j,r),w,z);W&&(D={...W,...F(z,W.message)},_(W.message),n&&(P[g]=D))}if(!Aa(D)&&(P[g]={ref:w,...D},!n))return P}}return _(!0),P};const Zte={mode:Lo.onSubmit,reValidateMode:Lo.onChange,shouldFocusError:!0};function Xte(t={}){let s={...Zte,...t},r={submitCount:0,isDirty:!1,isLoading:Do(s.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:s.errors||{},disabled:s.disabled||!1};const n={};let a=pn(s.defaultValues)||pn(s.values)?Gn(s.values||s.defaultValues)||{}:{},i=s.shouldUnregister?{}:Gn(a),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,d=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let m={...u};const f={array:Dk(),state:Dk()},h=$k(s.mode),p=$k(s.reValidateMode),g=s.criteriaMode===Lo.all,y=ve=>Pe=>{clearTimeout(d),d=setTimeout(ve,Pe)},v=async ve=>{if(!s.disabled&&(u.isValid||m.isValid||ve)){const Pe=s.resolver?Aa((await M()).errors):await k(n,!0);Pe!==r.isValid&&f.state.next({isValid:Pe})}},j=(ve,Pe)=>{!s.disabled&&(u.isValidating||u.validatingFields||m.isValidating||m.validatingFields)&&((ve||Array.from(l.mount)).forEach(Ue=>{Ue&&(Pe?ar(r.validatingFields,Ue,Pe):En(r.validatingFields,Ue))}),f.state.next({validatingFields:r.validatingFields,isValidating:!Aa(r.validatingFields)}))},w=(ve,Pe=[],Ue,rt,Qe=!0,Je=!0)=>{if(rt&&Ue&&!s.disabled){if(o.action=!0,Je&&Array.isArray(Ct(n,ve))){const it=Ue(Ct(n,ve),rt.argA,rt.argB);Qe&&ar(n,ve,it)}if(Je&&Array.isArray(Ct(r.errors,ve))){const it=Ue(Ct(r.errors,ve),rt.argA,rt.argB);Qe&&ar(r.errors,ve,it),Gte(r.errors,ve)}if((u.touchedFields||m.touchedFields)&&Je&&Array.isArray(Ct(r.touchedFields,ve))){const it=Ue(Ct(r.touchedFields,ve),rt.argA,rt.argB);Qe&&ar(r.touchedFields,ve,it)}(u.dirtyFields||m.dirtyFields)&&(r.dirtyFields=Dp(a,i)),f.state.next({name:ve,isDirty:z(ve,Pe),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else ar(i,ve,Pe)},_=(ve,Pe)=>{ar(r.errors,ve,Pe),f.state.next({errors:r.errors})},P=ve=>{r.errors=ve,f.state.next({errors:r.errors,isValid:!1})},E=(ve,Pe,Ue,rt)=>{const Qe=Ct(n,ve);if(Qe){const Je=Ct(i,ve,dn(Ue)?Ct(a,ve):Ue);dn(Je)||rt&&rt.defaultChecked||Pe?ar(i,ve,Pe?Je:Ok(Qe._f)):ae(ve,Je),o.mount&&v()}},L=(ve,Pe,Ue,rt,Qe)=>{let Je=!1,it=!1;const gt={name:ve};if(!s.disabled){if(!Ue||rt){(u.isDirty||m.isDirty)&&(it=r.isDirty,r.isDirty=gt.isDirty=z(),Je=it!==gt.isDirty);const It=id(Ct(a,ve),Pe);it=!!Ct(r.dirtyFields,ve),It?En(r.dirtyFields,ve):ar(r.dirtyFields,ve,!0),gt.dirtyFields=r.dirtyFields,Je=Je||(u.dirtyFields||m.dirtyFields)&&it!==!It}if(Ue){const It=Ct(r.touchedFields,ve);It||(ar(r.touchedFields,ve,Ue),gt.touchedFields=r.touchedFields,Je=Je||(u.touchedFields||m.touchedFields)&&It!==Ue)}Je&&Qe&&f.state.next(gt)}return Je?gt:{}},T=(ve,Pe,Ue,rt)=>{const Qe=Ct(r.errors,ve),Je=(u.isValid||m.isValid)&&yi(Pe)&&r.isValid!==Pe;if(s.delayError&&Ue?(c=y(()=>_(ve,Ue)),c(s.delayError)):(clearTimeout(d),c=null,Ue?ar(r.errors,ve,Ue):En(r.errors,ve)),(Ue?!id(Qe,Ue):Qe)||!Aa(rt)||Je){const it={...rt,...Je&&yi(Pe)?{isValid:Pe}:{},errors:r.errors,name:ve};r={...r,...it},f.state.next(it)}},M=async ve=>{j(ve,!0);const Pe=await s.resolver(i,s.context,qte(ve||l.mount,n,s.criteriaMode,s.shouldUseNativeValidation));return j(ve),Pe},F=async ve=>{const{errors:Pe}=await M(ve);if(ve)for(const Ue of ve){const rt=Ct(Pe,Ue);rt?ar(r.errors,Ue,rt):En(r.errors,Ue)}else r.errors=Pe;return Pe},k=async(ve,Pe,Ue={valid:!0})=>{for(const rt in ve){const Qe=ve[rt];if(Qe){const{_f:Je,...it}=Qe;if(Je){const gt=l.array.has(Je.name),It=Qe._f&&Vte(Qe._f);It&&u.validatingFields&&j([rt],!0);const At=await Vk(Qe,l.disabled,i,g,s.shouldUseNativeValidation&&!Pe,gt);if(It&&u.validatingFields&&j([rt]),At[Je.name]&&(Ue.valid=!1,Pe))break;!Pe&&(Ct(At,Je.name)?gt?Qte(r.errors,At,Je.name):ar(r.errors,Je.name,At[Je.name]):En(r.errors,Je.name))}!Aa(it)&&await k(it,Pe,Ue)}}return Ue.valid},D=()=>{for(const ve of l.unMount){const Pe=Ct(n,ve);Pe&&(Pe._f.refs?Pe._f.refs.every(Ue=>!a2(Ue)):!a2(Pe._f.ref))&&Te(ve)}l.unMount=new Set},z=(ve,Pe)=>!s.disabled&&(ve&&Pe&&ar(i,ve,Pe),!id(I(),a)),W=(ve,Pe,Ue)=>lO(ve,l,{...o.mount?i:dn(Pe)?a:yl(ve)?{[ve]:Pe}:Pe},Ue,Pe),ue=ve=>ij(Ct(o.mount?i:a,ve,s.shouldUnregister?Ct(a,ve,[]):[])),ae=(ve,Pe,Ue={})=>{const rt=Ct(n,ve);let Qe=Pe;if(rt){const Je=rt._f;Je&&(!Je.disabled&&ar(i,ve,fO(Pe,Je)),Qe=z0(Je.ref)&&Ea(Pe)?"":Pe,dO(Je.ref)?[...Je.ref.options].forEach(it=>it.selected=Qe.includes(it.value)):Je.refs?Fg(Je.ref)?Je.refs.length>1?Je.refs.forEach(it=>(!it.defaultChecked||!it.disabled)&&(it.checked=Array.isArray(Qe)?!!Qe.find(gt=>gt===it.value):Qe===it.value)):Je.refs[0]&&(Je.refs[0].checked=!!Qe):Je.refs.forEach(it=>it.checked=it.value===Qe):j4(Je.ref)?Je.ref.value="":(Je.ref.value=Qe,Je.ref.type||f.state.next({name:ve,values:Gn(i)})))}(Ue.shouldDirty||Ue.shouldTouch)&&L(ve,Qe,Ue.shouldTouch,Ue.shouldDirty,!0),Ue.shouldValidate&&G(ve)},Ne=(ve,Pe,Ue)=>{for(const rt in Pe){const Qe=Pe[rt],Je=`${ve}.${rt}`,it=Ct(n,Je);(l.array.has(ve)||pn(Qe)||it&&!it._f)&&!Ou(Qe)?Ne(Je,Qe,Ue):ae(Je,Qe,Ue)}},K=(ve,Pe,Ue={})=>{const rt=Ct(n,ve),Qe=l.array.has(ve),Je=Gn(Pe);ar(i,ve,Je),Qe?(f.array.next({name:ve,values:Gn(i)}),(u.isDirty||u.dirtyFields||m.isDirty||m.dirtyFields)&&Ue.shouldDirty&&f.state.next({name:ve,dirtyFields:Dp(a,i),isDirty:z(ve,Je)})):rt&&!rt._f&&!Ea(Je)?Ne(ve,Je,Ue):ae(ve,Je,Ue),Uk(ve,l)&&f.state.next({...r}),f.state.next({name:o.mount?ve:void 0,values:Gn(i)})},Q=async ve=>{o.mount=!0;const Pe=ve.target;let Ue=Pe.name,rt=!0;const Qe=Ct(n,Ue),Je=it=>{rt=Number.isNaN(it)||Ou(it)&&isNaN(it.getTime())||id(it,Ct(i,Ue,it))};if(Qe){let it,gt;const It=Pe.type?Ok(Qe._f):rO(ve),At=ve.type===U0.BLUR||ve.type===U0.FOCUS_OUT,fr=!Hte(Qe._f)&&!s.resolver&&!Ct(r.errors,Ue)&&!Qe._f.deps||Yte(At,Ct(r.touchedFields,Ue),r.isSubmitted,p,h),Us=Uk(Ue,l,At);ar(i,Ue,It),At?(Qe._f.onBlur&&Qe._f.onBlur(ve),c&&c(0)):Qe._f.onChange&&Qe._f.onChange(ve);const zt=L(Ue,It,At),xs=!Aa(zt)||Us;if(!At&&f.state.next({name:Ue,type:ve.type,values:Gn(i)}),fr)return(u.isValid||m.isValid)&&(s.mode==="onBlur"?At&&v():At||v()),xs&&f.state.next({name:Ue,...Us?{}:zt});if(!At&&Us&&f.state.next({...r}),s.resolver){const{errors:sr}=await M([Ue]);if(Je(It),rt){const rs=zk(r.errors,n,Ue),Fs=zk(sr,n,rs.name||Ue);it=Fs.error,Ue=Fs.name,gt=Aa(sr)}}else j([Ue],!0),it=(await Vk(Qe,l.disabled,i,g,s.shouldUseNativeValidation))[Ue],j([Ue]),Je(It),rt&&(it?gt=!1:(u.isValid||m.isValid)&&(gt=await k(n,!0)));rt&&(Qe._f.deps&&G(Qe._f.deps),T(Ue,gt,it,zt))}},ke=(ve,Pe)=>{if(Ct(r.errors,Pe)&&ve.focus)return ve.focus(),1},G=async(ve,Pe={})=>{let Ue,rt;const Qe=cx(ve);if(s.resolver){const Je=await F(dn(ve)?ve:Qe);Ue=Aa(Je),rt=ve?!Qe.some(it=>Ct(Je,it)):Ue}else ve?(rt=(await Promise.all(Qe.map(async Je=>{const it=Ct(n,Je);return await k(it&&it._f?{[Je]:it}:it)}))).every(Boolean),!(!rt&&!r.isValid)&&v()):rt=Ue=await k(n);return f.state.next({...!yl(ve)||(u.isValid||m.isValid)&&Ue!==r.isValid?{}:{name:ve},...s.resolver||!ve?{isValid:Ue}:{},errors:r.errors}),Pe.shouldFocus&&!rt&&dx(n,ke,ve?Qe:l.mount),rt},I=ve=>{const Pe={...o.mount?i:a};return dn(ve)?Pe:yl(ve)?Ct(Pe,ve):ve.map(Ue=>Ct(Pe,Ue))},Z=(ve,Pe)=>({invalid:!!Ct((Pe||r).errors,ve),isDirty:!!Ct((Pe||r).dirtyFields,ve),error:Ct((Pe||r).errors,ve),isValidating:!!Ct(r.validatingFields,ve),isTouched:!!Ct((Pe||r).touchedFields,ve)}),J=ve=>{ve&&cx(ve).forEach(Pe=>En(r.errors,Pe)),f.state.next({errors:ve?r.errors:{}})},se=(ve,Pe,Ue)=>{const rt=(Ct(n,ve,{_f:{}})._f||{}).ref,Qe=Ct(r.errors,ve)||{},{ref:Je,message:it,type:gt,...It}=Qe;ar(r.errors,ve,{...It,...Pe,ref:rt}),f.state.next({name:ve,errors:r.errors,isValid:!1}),Ue&&Ue.shouldFocus&&rt&&rt.focus&&rt.focus()},je=(ve,Pe)=>Do(ve)?f.state.subscribe({next:Ue=>ve(W(void 0,Pe),Ue)}):W(ve,Pe,!0),be=ve=>f.state.subscribe({next:Pe=>{Kte(ve.name,Pe.name,ve.exact)&&Wte(Pe,ve.formState||u,dt,ve.reRenderRoot)&&ve.callback({values:{...i},...r,...Pe})}}).unsubscribe,q=ve=>(o.mount=!0,m={...m,...ve.formState},be({...ve,formState:m})),Te=(ve,Pe={})=>{for(const Ue of ve?cx(ve):l.mount)l.mount.delete(Ue),l.array.delete(Ue),Pe.keepValue||(En(n,Ue),En(i,Ue)),!Pe.keepError&&En(r.errors,Ue),!Pe.keepDirty&&En(r.dirtyFields,Ue),!Pe.keepTouched&&En(r.touchedFields,Ue),!Pe.keepIsValidating&&En(r.validatingFields,Ue),!s.shouldUnregister&&!Pe.keepDefaultValue&&En(a,Ue);f.state.next({values:Gn(i)}),f.state.next({...r,...Pe.keepDirty?{isDirty:z()}:{}}),!Pe.keepIsValid&&v()},Be=({disabled:ve,name:Pe})=>{(yi(ve)&&o.mount||ve||l.disabled.has(Pe))&&(ve?l.disabled.add(Pe):l.disabled.delete(Pe))},Ve=(ve,Pe={})=>{let Ue=Ct(n,ve);const rt=yi(Pe.disabled)||yi(s.disabled);return ar(n,ve,{...Ue||{},_f:{...Ue&&Ue._f?Ue._f:{ref:{name:ve}},name:ve,mount:!0,...Pe}}),l.mount.add(ve),Ue?Be({disabled:yi(Pe.disabled)?Pe.disabled:s.disabled,name:ve}):E(ve,!0,Pe.value),{...rt?{disabled:Pe.disabled||s.disabled}:{},...s.progressive?{required:!!Pe.required,min:Ip(Pe.min),max:Ip(Pe.max),minLength:Ip(Pe.minLength),maxLength:Ip(Pe.maxLength),pattern:Ip(Pe.pattern)}:{},name:ve,onChange:Q,onBlur:Q,ref:Qe=>{if(Qe){Ve(ve,Pe),Ue=Ct(n,ve);const Je=dn(Qe.value)&&Qe.querySelectorAll&&Qe.querySelectorAll("input,select,textarea")[0]||Qe,it=Bte(Je),gt=Ue._f.refs||[];if(it?gt.find(It=>It===Je):Je===Ue._f.ref)return;ar(n,ve,{_f:{...Ue._f,...it?{refs:[...gt.filter(a2),Je,...Array.isArray(Ct(a,ve))?[{}]:[]],ref:{type:Je.type,name:ve}}:{ref:Je}}}),E(ve,!1,void 0,Je)}else Ue=Ct(n,ve,{}),Ue._f&&(Ue._f.mount=!1),(s.shouldUnregister||Pe.shouldUnregister)&&!(nO(l.array,ve)&&o.action)&&l.unMount.add(ve)}}},ct=()=>s.shouldFocusError&&dx(n,ke,l.mount),vt=ve=>{yi(ve)&&(f.state.next({disabled:ve}),dx(n,(Pe,Ue)=>{const rt=Ct(n,Ue);rt&&(Pe.disabled=rt._f.disabled||ve,Array.isArray(rt._f.refs)&&rt._f.refs.forEach(Qe=>{Qe.disabled=rt._f.disabled||ve}))},0,!1))},qe=(ve,Pe)=>async Ue=>{let rt;Ue&&(Ue.preventDefault&&Ue.preventDefault(),Ue.persist&&Ue.persist());let Qe=Gn(i);if(f.state.next({isSubmitting:!0}),s.resolver){const{errors:Je,values:it}=await M();r.errors=Je,Qe=it}else await k(n);if(l.disabled.size)for(const Je of l.disabled)ar(Qe,Je,void 0);if(En(r.errors,"root"),Aa(r.errors)){f.state.next({errors:{}});try{await ve(Qe,Ue)}catch(Je){rt=Je}}else Pe&&await Pe({...r.errors},Ue),ct(),setTimeout(ct);if(f.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Aa(r.errors)&&!rt,submitCount:r.submitCount+1,errors:r.errors}),rt)throw rt},pe=(ve,Pe={})=>{Ct(n,ve)&&(dn(Pe.defaultValue)?K(ve,Gn(Ct(a,ve))):(K(ve,Pe.defaultValue),ar(a,ve,Gn(Pe.defaultValue))),Pe.keepTouched||En(r.touchedFields,ve),Pe.keepDirty||(En(r.dirtyFields,ve),r.isDirty=Pe.defaultValue?z(ve,Gn(Ct(a,ve))):z()),Pe.keepError||(En(r.errors,ve),u.isValid&&v()),f.state.next({...r}))},ps=(ve,Pe={})=>{const Ue=ve?Gn(ve):a,rt=Gn(Ue),Qe=Aa(ve),Je=Qe?a:rt;if(Pe.keepDefaultValues||(a=Ue),!Pe.keepValues){if(Pe.keepDirtyValues){const it=new Set([...l.mount,...Object.keys(Dp(a,i))]);for(const gt of Array.from(it))Ct(r.dirtyFields,gt)?ar(Je,gt,Ct(i,gt)):K(gt,Ct(Je,gt))}else{if(v4&&dn(ve))for(const it of l.mount){const gt=Ct(n,it);if(gt&&gt._f){const It=Array.isArray(gt._f.refs)?gt._f.refs[0]:gt._f.ref;if(z0(It)){const At=It.closest("form");if(At){At.reset();break}}}}for(const it of l.mount)K(it,Ct(Je,it))}i=Gn(Je),f.array.next({values:{...Je}}),f.state.next({values:{...Je}})}l={mount:Pe.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!u.isValid||!!Pe.keepIsValid||!!Pe.keepDirtyValues,o.watch=!!s.shouldUnregister,f.state.next({submitCount:Pe.keepSubmitCount?r.submitCount:0,isDirty:Qe?!1:Pe.keepDirty?r.isDirty:!!(Pe.keepDefaultValues&&!id(ve,a)),isSubmitted:Pe.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:Qe?{}:Pe.keepDirtyValues?Pe.keepDefaultValues&&i?Dp(a,i):r.dirtyFields:Pe.keepDefaultValues&&ve?Dp(a,ve):Pe.keepDirty?r.dirtyFields:{},touchedFields:Pe.keepTouched?r.touchedFields:{},errors:Pe.keepErrors?r.errors:{},isSubmitSuccessful:Pe.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},ns=(ve,Pe)=>ps(Do(ve)?ve(i):ve,Pe),ss=(ve,Pe={})=>{const Ue=Ct(n,ve),rt=Ue&&Ue._f;if(rt){const Qe=rt.refs?rt.refs[0]:rt.ref;Qe.focus&&(Qe.focus(),Pe.shouldSelect&&Do(Qe.select)&&Qe.select())}},dt=ve=>{r={...r,...ve}},St={control:{register:Ve,unregister:Te,getFieldState:Z,handleSubmit:qe,setError:se,_subscribe:be,_runSchema:M,_getWatch:W,_getDirty:z,_setValid:v,_setFieldArray:w,_setDisabledField:Be,_setErrors:P,_getFieldArray:ue,_reset:ps,_resetDefaultValues:()=>Do(s.defaultValues)&&s.defaultValues().then(ve=>{ns(ve,s.resetOptions),f.state.next({isLoading:!1})}),_removeUnmounted:D,_disableForm:vt,_subjects:f,_proxyFormState:u,get _fields(){return n},get _formValues(){return i},get _state(){return o},set _state(ve){o=ve},get _defaultValues(){return a},get _names(){return l},set _names(ve){l=ve},get _formState(){return r},get _options(){return s},set _options(ve){s={...s,...ve}}},subscribe:q,trigger:G,register:Ve,handleSubmit:qe,watch:je,setValue:K,getValues:I,reset:ns,resetField:pe,clearErrors:J,unregister:Te,setError:se,setFocus:ss,getFieldState:Z};return{...St,formControl:St}}function Or(t={}){const s=Nt.useRef(void 0),r=Nt.useRef(void 0),[n,a]=Nt.useState({isDirty:!1,isValidating:!1,isLoading:Do(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,defaultValues:Do(t.defaultValues)?void 0:t.defaultValues});s.current||(s.current={...t.formControl?t.formControl:Xte(t),formState:n},t.formControl&&t.defaultValues&&!Do(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions));const i=s.current.control;return i._options=t,Nt.useLayoutEffect(()=>i._subscribe({formState:i._proxyFormState,callback:()=>a({...i._formState}),reRenderRoot:!0}),[i]),Nt.useEffect(()=>i._disableForm(t.disabled),[i,t.disabled]),Nt.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==n.isDirty&&i._subjects.state.next({isDirty:o})}},[i,n.isDirty]),Nt.useEffect(()=>{t.values&&!id(t.values,r.current)?(i._reset(t.values,i._options.resetOptions),r.current=t.values,a(o=>({...o}))):i._resetDefaultValues()},[t.values,i]),Nt.useEffect(()=>{t.errors&&!Aa(t.errors)&&i._setErrors(t.errors)},[t.errors,i]),Nt.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),Nt.useEffect(()=>{t.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[t.shouldUnregister,i]),s.current.formState=oO(n,i),s.current}const Wr=Ite,xO=N.createContext({}),fe=({...t})=>e.jsx(xO.Provider,{value:{name:t.name},children:e.jsx($te,{...t})}),lj=()=>{const t=N.useContext(xO),s=N.useContext(gO),{getFieldState:r,formState:n}=oj(),a=r(t.name,n);if(!t)throw new Error("useFormField should be used within <FormField>");const{id:i}=s;return{id:i,name:t.name,formItemId:`${i}-form-item`,formDescriptionId:`${i}-form-item-description`,formMessageId:`${i}-form-item-message`,...a}},gO=N.createContext({}),me=N.forwardRef(({className:t,...s},r)=>{const n=N.useId();return e.jsx(gO.Provider,{value:{id:n},children:e.jsx("div",{ref:r,className:bt("space-y-2",t),...s})})});me.displayName="FormItem";const he=N.forwardRef(({className:t,...s},r)=>{const{error:n,formItemId:a}=lj();return e.jsx(De,{ref:r,className:bt(n&&"text-destructive",t),htmlFor:a,...s})});he.displayName="FormLabel";const xe=N.forwardRef(({...t},s)=>{const{error:r,formItemId:n,formDescriptionId:a,formMessageId:i}=lj();return e.jsx(uI,{ref:s,id:n,"aria-describedby":r?`${a} ${i}`:`${a}`,"aria-invalid":!!r,...t})});xe.displayName="FormControl";const Qt=N.forwardRef(({className:t,...s},r)=>{const{formDescriptionId:n}=lj();return e.jsx("p",{ref:r,id:n,className:bt("text-sm text-muted-foreground",t),...s})});Qt.displayName="FormDescription";const ye=N.forwardRef(({className:t,children:s,...r},n)=>{const{error:a,formMessageId:i}=lj(),o=a?String((a==null?void 0:a.message)??""):s;return o?e.jsx("p",{ref:n,id:i,className:bt("text-sm font-medium text-destructive",t),...r,children:o}):null});ye.displayName="FormMessage";const Gt=N.forwardRef(({className:t,...s},r)=>e.jsx("textarea",{className:bt("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...s}));Gt.displayName="Textarea";const Hk=(t,s,r)=>{if(t&&"reportValidity"in t){const n=Ct(r,s);t.setCustomValidity(n&&n.message||""),t.reportValidity()}},vO=(t,s)=>{for(const r in s.fields){const n=s.fields[r];n&&n.ref&&"reportValidity"in n.ref?Hk(n.ref,r,t):n.refs&&n.refs.forEach(a=>Hk(a,r,t))}},Jte=(t,s)=>{s.shouldUseNativeValidation&&vO(t,s);const r={};for(const n in t){const a=Ct(s.fields,n),i=Object.assign(t[n]||{},{ref:a&&a.ref});if(ese(s.names||Object.keys(t),n)){const o=Object.assign({},Ct(r,n));ar(o,"root",i),ar(r,n,o)}else ar(r,n,i)}return r},ese=(t,s)=>t.some(r=>r.startsWith(s+"."));var tse=function(t,s){for(var r={};t.length;){var n=t[0],a=n.code,i=n.message,o=n.path.join(".");if(!r[o])if("unionErrors"in n){var l=n.unionErrors[0].errors[0];r[o]={message:l.message,type:l.code}}else r[o]={message:i,type:a};if("unionErrors"in n&&n.unionErrors.forEach(function(u){return u.errors.forEach(function(m){return t.push(m)})}),s){var c=r[o].types,d=c&&c[n.code];r[o]=cO(o,s,r,a,d?[].concat(d,n.message):n.message)}t.shift()}return r},$r=function(t,s,r){return r===void 0&&(r={}),function(n,a,i){try{return Promise.resolve(function(o,l){try{var c=Promise.resolve(t[r.mode==="sync"?"parse":"parseAsync"](n,s)).then(function(d){return i.shouldUseNativeValidation&&vO({},i),{errors:{},values:r.raw?n:d}})}catch(d){return l(d)}return c&&c.then?c.then(void 0,l):c}(0,function(o){if(function(l){return Array.isArray(l==null?void 0:l.errors)}(o))return{values:{},errors:Jte(tse(o.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw o}))}catch(o){return Promise.reject(o)}}},Ys;(function(t){t.assertEqual=a=>{};function s(a){}t.assertIs=s;function r(a){throw new Error}t.assertNever=r,t.arrayToEnum=a=>{const i={};for(const o of a)i[o]=o;return i},t.getValidEnumValues=a=>{const i=t.objectKeys(a).filter(l=>typeof a[a[l]]!="number"),o={};for(const l of i)o[l]=a[l];return t.objectValues(o)},t.objectValues=a=>t.objectKeys(a).map(function(i){return a[i]}),t.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const i=[];for(const o in a)Object.prototype.hasOwnProperty.call(a,o)&&i.push(o);return i},t.find=(a,i)=>{for(const o of a)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&Number.isFinite(a)&&Math.floor(a)===a;function n(a,i=" | "){return a.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=n,t.jsonStringifyReplacer=(a,i)=>typeof i=="bigint"?i.toString():i})(Ys||(Ys={}));var kw;(function(t){t.mergeShapes=(s,r)=>({...s,...r})})(kw||(kw={}));const Tt=Ys.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),lc=t=>{switch(typeof t){case"undefined":return Tt.undefined;case"string":return Tt.string;case"number":return Number.isNaN(t)?Tt.nan:Tt.number;case"boolean":return Tt.boolean;case"function":return Tt.function;case"bigint":return Tt.bigint;case"symbol":return Tt.symbol;case"object":return Array.isArray(t)?Tt.array:t===null?Tt.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Tt.promise:typeof Map<"u"&&t instanceof Map?Tt.map:typeof Set<"u"&&t instanceof Set?Tt.set:typeof Date<"u"&&t instanceof Date?Tt.date:Tt.object;default:return Tt.unknown}},mt=Ys.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),sse=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class Li extends Error{get errors(){return this.issues}constructor(s){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=s}format(s){const r=s||function(i){return i.message},n={_errors:[]},a=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(a);else if(o.code==="invalid_return_type")a(o.returnTypeError);else if(o.code==="invalid_arguments")a(o.argumentsError);else if(o.path.length===0)n._errors.push(r(o));else{let l=n,c=0;for(;c<o.path.length;){const d=o.path[c];c===o.path.length-1?(l[d]=l[d]||{_errors:[]},l[d]._errors.push(r(o))):l[d]=l[d]||{_errors:[]},l=l[d],c++}}};return a(this),n}static assert(s){if(!(s instanceof Li))throw new Error(`Not a ZodError: ${s}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ys.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(s=r=>r.message){const r={},n=[];for(const a of this.issues)if(a.path.length>0){const i=a.path[0];r[i]=r[i]||[],r[i].push(s(a))}else n.push(s(a));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}Li.create=t=>new Li(t);const hf=(t,s)=>{let r;switch(t.code){case mt.invalid_type:t.received===Tt.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case mt.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,Ys.jsonStringifyReplacer)}`;break;case mt.unrecognized_keys:r=`Unrecognized key(s) in object: ${Ys.joinValues(t.keys,", ")}`;break;case mt.invalid_union:r="Invalid input";break;case mt.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Ys.joinValues(t.options)}`;break;case mt.invalid_enum_value:r=`Invalid enum value. Expected ${Ys.joinValues(t.options)}, received '${t.received}'`;break;case mt.invalid_arguments:r="Invalid function arguments";break;case mt.invalid_return_type:r="Invalid function return type";break;case mt.invalid_date:r="Invalid date";break;case mt.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:Ys.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case mt.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case mt.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case mt.custom:r="Invalid input";break;case mt.invalid_intersection_types:r="Intersection results could not be merged";break;case mt.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case mt.not_finite:r="Number must be finite";break;default:r=s.defaultError,Ys.assertNever(t)}return{message:r}};let yO=hf;function rse(t){yO=t}function H0(){return yO}const W0=t=>{const{data:s,path:r,errorMaps:n,issueData:a}=t,i=[...r,...a.path||[]],o={...a,path:i};if(a.message!==void 0)return{...a,path:i,message:a.message};let l="";const c=n.filter(d=>!!d).slice().reverse();for(const d of c)l=d(o,{data:s,defaultError:l}).message;return{...a,path:i,message:l}},nse=[];function kt(t,s){const r=H0(),n=W0({issueData:s,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===hf?void 0:hf].filter(a=>!!a)});t.common.issues.push(n)}class ya{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(s,r){const n=[];for(const a of r){if(a.status==="aborted")return os;a.status==="dirty"&&s.dirty(),n.push(a.value)}return{status:s.value,value:n}}static async mergeObjectAsync(s,r){const n=[];for(const a of r){const i=await a.key,o=await a.value;n.push({key:i,value:o})}return ya.mergeObjectSync(s,n)}static mergeObjectSync(s,r){const n={};for(const a of r){const{key:i,value:o}=a;if(i.status==="aborted"||o.status==="aborted")return os;i.status==="dirty"&&s.dirty(),o.status==="dirty"&&s.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||a.alwaysSet)&&(n[i.value]=o.value)}return{status:s.value,value:n}}}const os=Object.freeze({status:"aborted"}),ph=t=>({status:"dirty",value:t}),Fa=t=>({status:"valid",value:t}),Aw=t=>t.status==="aborted",Pw=t=>t.status==="dirty",um=t=>t.status==="valid",Wx=t=>typeof Promise<"u"&&t instanceof Promise;var Yt;(function(t){t.errToObj=s=>typeof s=="string"?{message:s}:s||{},t.toString=s=>typeof s=="string"?s:s==null?void 0:s.message})(Yt||(Yt={}));class Tl{constructor(s,r,n,a){this._cachedPath=[],this.parent=s,this.data=r,this._path=n,this._key=a}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Wk=(t,s)=>{if(um(s))return{success:!0,data:s.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new Li(t.common.issues);return this._error=r,this._error}}};function _s(t){if(!t)return{};const{errorMap:s,invalid_type_error:r,required_error:n,description:a}=t;if(s&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return s?{errorMap:s,description:a}:{errorMap:(o,l)=>{const{message:c}=t;return o.code==="invalid_enum_value"?{message:c??l.defaultError}:typeof l.data>"u"?{message:c??n??l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:c??r??l.defaultError}},description:a}}class Ls{get description(){return this._def.description}_getType(s){return lc(s.data)}_getOrReturnCtx(s,r){return r||{common:s.parent.common,data:s.data,parsedType:lc(s.data),schemaErrorMap:this._def.errorMap,path:s.path,parent:s.parent}}_processInputParams(s){return{status:new ya,ctx:{common:s.parent.common,data:s.data,parsedType:lc(s.data),schemaErrorMap:this._def.errorMap,path:s.path,parent:s.parent}}}_parseSync(s){const r=this._parse(s);if(Wx(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(s){const r=this._parse(s);return Promise.resolve(r)}parse(s,r){const n=this.safeParse(s,r);if(n.success)return n.data;throw n.error}safeParse(s,r){const n={common:{issues:[],async:(r==null?void 0:r.async)??!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:s,parsedType:lc(s)},a=this._parseSync({data:s,path:n.path,parent:n});return Wk(n,a)}"~validate"(s){var n,a;const r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:s,parsedType:lc(s)};if(!this["~standard"].async)try{const i=this._parseSync({data:s,path:[],parent:r});return um(i)?{value:i.value}:{issues:r.common.issues}}catch(i){(a=(n=i==null?void 0:i.message)==null?void 0:n.toLowerCase())!=null&&a.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:s,path:[],parent:r}).then(i=>um(i)?{value:i.value}:{issues:r.common.issues})}async parseAsync(s,r){const n=await this.safeParseAsync(s,r);if(n.success)return n.data;throw n.error}async safeParseAsync(s,r){const n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:s,parsedType:lc(s)},a=this._parse({data:s,path:n.path,parent:n}),i=await(Wx(a)?a:Promise.resolve(a));return Wk(n,i)}refine(s,r){const n=a=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(a):r;return this._refinement((a,i)=>{const o=s(a),l=()=>i.addIssue({code:mt.custom,...n(a)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(s,r){return this._refinement((n,a)=>s(n)?!0:(a.addIssue(typeof r=="function"?r(n,a):r),!1))}_refinement(s){return new Ko({schema:this,typeName:cs.ZodEffects,effect:{type:"refinement",refinement:s}})}superRefine(s){return this._refinement(s)}constructor(s){this.spa=this.safeParseAsync,this._def=s,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return _l.create(this,this._def)}nullable(){return Gd.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return $o.create(this)}promise(){return pf.create(this,this._def)}or(s){return Qx.create([this,s],this._def)}and(s){return Zx.create(this,s,this._def)}transform(s){return new Ko({..._s(this._def),schema:this,typeName:cs.ZodEffects,effect:{type:"transform",transform:s}})}default(s){const r=typeof s=="function"?s:()=>s;return new sg({..._s(this._def),innerType:this,defaultValue:r,typeName:cs.ZodDefault})}brand(){return new N4({typeName:cs.ZodBranded,type:this,..._s(this._def)})}catch(s){const r=typeof s=="function"?s:()=>s;return new rg({..._s(this._def),innerType:this,catchValue:r,typeName:cs.ZodCatch})}describe(s){const r=this.constructor;return new r({...this._def,description:s})}pipe(s){return Og.create(this,s)}readonly(){return ng.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const ase=/^c[^\s-]{8,}$/i,ise=/^[0-9a-z]+$/,ose=/^[0-9A-HJKMNP-TV-Z]{26}$/i,lse=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,cse=/^[a-z0-9_-]{21}$/i,dse=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,use=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,mse=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,hse="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let i2;const fse=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,pse=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,xse=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,gse=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,vse=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,yse=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,jO="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",jse=new RegExp(`^${jO}$`);function bO(t){let s="[0-5]\\d";t.precision?s=`${s}\\.\\d{${t.precision}}`:t.precision==null&&(s=`${s}(\\.\\d+)?`);const r=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${s})${r}`}function bse(t){return new RegExp(`^${bO(t)}$`)}function NO(t){let s=`${jO}T${bO(t)}`;const r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),s=`${s}(${r.join("|")})`,new RegExp(`^${s}$`)}function Nse(t,s){return!!((s==="v4"||!s)&&fse.test(t)||(s==="v6"||!s)&&xse.test(t))}function wse(t,s){if(!dse.test(t))return!1;try{const[r]=t.split(".");if(!r)return!1;const n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),a=JSON.parse(atob(n));return!(typeof a!="object"||a===null||"typ"in a&&(a==null?void 0:a.typ)!=="JWT"||!a.alg||s&&a.alg!==s)}catch{return!1}}function _se(t,s){return!!((s==="v4"||!s)&&pse.test(t)||(s==="v6"||!s)&&gse.test(t))}class Io extends Ls{_parse(s){if(this._def.coerce&&(s.data=String(s.data)),this._getType(s)!==Tt.string){const i=this._getOrReturnCtx(s);return kt(i,{code:mt.invalid_type,expected:Tt.string,received:i.parsedType}),os}const n=new ya;let a;for(const i of this._def.checks)if(i.kind==="min")s.data.length<i.value&&(a=this._getOrReturnCtx(s,a),kt(a,{code:mt.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")s.data.length>i.value&&(a=this._getOrReturnCtx(s,a),kt(a,{code:mt.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){const o=s.data.length>i.value,l=s.data.length<i.value;(o||l)&&(a=this._getOrReturnCtx(s,a),o?kt(a,{code:mt.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):l&&kt(a,{code:mt.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")mse.test(s.data)||(a=this._getOrReturnCtx(s,a),kt(a,{validation:"email",code:mt.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")i2||(i2=new RegExp(hse,"u")),i2.test(s.data)||(a=this._getOrReturnCtx(s,a),kt(a,{validation:"emoji",code:mt.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")lse.test(s.data)||(a=this._getOrReturnCtx(s,a),kt(a,{validation:"uuid",code:mt.invalid_string,message:i.message}),n.dirty());else if(i.kind==="nanoid")cse.test(s.data)||(a=this._getOrReturnCtx(s,a),kt(a,{validation:"nanoid",code:mt.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")ase.test(s.data)||(a=this._getOrReturnCtx(s,a),kt(a,{validation:"cuid",code:mt.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")ise.test(s.data)||(a=this._getOrReturnCtx(s,a),kt(a,{validation:"cuid2",code:mt.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")ose.test(s.data)||(a=this._getOrReturnCtx(s,a),kt(a,{validation:"ulid",code:mt.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(s.data)}catch{a=this._getOrReturnCtx(s,a),kt(a,{validation:"url",code:mt.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(s.data)||(a=this._getOrReturnCtx(s,a),kt(a,{validation:"regex",code:mt.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?s.data=s.data.trim():i.kind==="includes"?s.data.includes(i.value,i.position)||(a=this._getOrReturnCtx(s,a),kt(a,{code:mt.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?s.data=s.data.toLowerCase():i.kind==="toUpperCase"?s.data=s.data.toUpperCase():i.kind==="startsWith"?s.data.startsWith(i.value)||(a=this._getOrReturnCtx(s,a),kt(a,{code:mt.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?s.data.endsWith(i.value)||(a=this._getOrReturnCtx(s,a),kt(a,{code:mt.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?NO(i).test(s.data)||(a=this._getOrReturnCtx(s,a),kt(a,{code:mt.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="date"?jse.test(s.data)||(a=this._getOrReturnCtx(s,a),kt(a,{code:mt.invalid_string,validation:"date",message:i.message}),n.dirty()):i.kind==="time"?bse(i).test(s.data)||(a=this._getOrReturnCtx(s,a),kt(a,{code:mt.invalid_string,validation:"time",message:i.message}),n.dirty()):i.kind==="duration"?use.test(s.data)||(a=this._getOrReturnCtx(s,a),kt(a,{validation:"duration",code:mt.invalid_string,message:i.message}),n.dirty()):i.kind==="ip"?Nse(s.data,i.version)||(a=this._getOrReturnCtx(s,a),kt(a,{validation:"ip",code:mt.invalid_string,message:i.message}),n.dirty()):i.kind==="jwt"?wse(s.data,i.alg)||(a=this._getOrReturnCtx(s,a),kt(a,{validation:"jwt",code:mt.invalid_string,message:i.message}),n.dirty()):i.kind==="cidr"?_se(s.data,i.version)||(a=this._getOrReturnCtx(s,a),kt(a,{validation:"cidr",code:mt.invalid_string,message:i.message}),n.dirty()):i.kind==="base64"?vse.test(s.data)||(a=this._getOrReturnCtx(s,a),kt(a,{validation:"base64",code:mt.invalid_string,message:i.message}),n.dirty()):i.kind==="base64url"?yse.test(s.data)||(a=this._getOrReturnCtx(s,a),kt(a,{validation:"base64url",code:mt.invalid_string,message:i.message}),n.dirty()):Ys.assertNever(i);return{status:n.value,value:s.data}}_regex(s,r,n){return this.refinement(a=>s.test(a),{validation:r,code:mt.invalid_string,...Yt.errToObj(n)})}_addCheck(s){return new Io({...this._def,checks:[...this._def.checks,s]})}email(s){return this._addCheck({kind:"email",...Yt.errToObj(s)})}url(s){return this._addCheck({kind:"url",...Yt.errToObj(s)})}emoji(s){return this._addCheck({kind:"emoji",...Yt.errToObj(s)})}uuid(s){return this._addCheck({kind:"uuid",...Yt.errToObj(s)})}nanoid(s){return this._addCheck({kind:"nanoid",...Yt.errToObj(s)})}cuid(s){return this._addCheck({kind:"cuid",...Yt.errToObj(s)})}cuid2(s){return this._addCheck({kind:"cuid2",...Yt.errToObj(s)})}ulid(s){return this._addCheck({kind:"ulid",...Yt.errToObj(s)})}base64(s){return this._addCheck({kind:"base64",...Yt.errToObj(s)})}base64url(s){return this._addCheck({kind:"base64url",...Yt.errToObj(s)})}jwt(s){return this._addCheck({kind:"jwt",...Yt.errToObj(s)})}ip(s){return this._addCheck({kind:"ip",...Yt.errToObj(s)})}cidr(s){return this._addCheck({kind:"cidr",...Yt.errToObj(s)})}datetime(s){return typeof s=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:s}):this._addCheck({kind:"datetime",precision:typeof(s==null?void 0:s.precision)>"u"?null:s==null?void 0:s.precision,offset:(s==null?void 0:s.offset)??!1,local:(s==null?void 0:s.local)??!1,...Yt.errToObj(s==null?void 0:s.message)})}date(s){return this._addCheck({kind:"date",message:s})}time(s){return typeof s=="string"?this._addCheck({kind:"time",precision:null,message:s}):this._addCheck({kind:"time",precision:typeof(s==null?void 0:s.precision)>"u"?null:s==null?void 0:s.precision,...Yt.errToObj(s==null?void 0:s.message)})}duration(s){return this._addCheck({kind:"duration",...Yt.errToObj(s)})}regex(s,r){return this._addCheck({kind:"regex",regex:s,...Yt.errToObj(r)})}includes(s,r){return this._addCheck({kind:"includes",value:s,position:r==null?void 0:r.position,...Yt.errToObj(r==null?void 0:r.message)})}startsWith(s,r){return this._addCheck({kind:"startsWith",value:s,...Yt.errToObj(r)})}endsWith(s,r){return this._addCheck({kind:"endsWith",value:s,...Yt.errToObj(r)})}min(s,r){return this._addCheck({kind:"min",value:s,...Yt.errToObj(r)})}max(s,r){return this._addCheck({kind:"max",value:s,...Yt.errToObj(r)})}length(s,r){return this._addCheck({kind:"length",value:s,...Yt.errToObj(r)})}nonempty(s){return this.min(1,Yt.errToObj(s))}trim(){return new Io({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Io({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Io({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(s=>s.kind==="datetime")}get isDate(){return!!this._def.checks.find(s=>s.kind==="date")}get isTime(){return!!this._def.checks.find(s=>s.kind==="time")}get isDuration(){return!!this._def.checks.find(s=>s.kind==="duration")}get isEmail(){return!!this._def.checks.find(s=>s.kind==="email")}get isURL(){return!!this._def.checks.find(s=>s.kind==="url")}get isEmoji(){return!!this._def.checks.find(s=>s.kind==="emoji")}get isUUID(){return!!this._def.checks.find(s=>s.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(s=>s.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(s=>s.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(s=>s.kind==="cuid2")}get isULID(){return!!this._def.checks.find(s=>s.kind==="ulid")}get isIP(){return!!this._def.checks.find(s=>s.kind==="ip")}get isCIDR(){return!!this._def.checks.find(s=>s.kind==="cidr")}get isBase64(){return!!this._def.checks.find(s=>s.kind==="base64")}get isBase64url(){return!!this._def.checks.find(s=>s.kind==="base64url")}get minLength(){let s=null;for(const r of this._def.checks)r.kind==="min"&&(s===null||r.value>s)&&(s=r.value);return s}get maxLength(){let s=null;for(const r of this._def.checks)r.kind==="max"&&(s===null||r.value<s)&&(s=r.value);return s}}Io.create=t=>new Io({checks:[],typeName:cs.ZodString,coerce:(t==null?void 0:t.coerce)??!1,..._s(t)});function Sse(t,s){const r=(t.toString().split(".")[1]||"").length,n=(s.toString().split(".")[1]||"").length,a=r>n?r:n,i=Number.parseInt(t.toFixed(a).replace(".","")),o=Number.parseInt(s.toFixed(a).replace(".",""));return i%o/10**a}class Wd extends Ls{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(s){if(this._def.coerce&&(s.data=Number(s.data)),this._getType(s)!==Tt.number){const i=this._getOrReturnCtx(s);return kt(i,{code:mt.invalid_type,expected:Tt.number,received:i.parsedType}),os}let n;const a=new ya;for(const i of this._def.checks)i.kind==="int"?Ys.isInteger(s.data)||(n=this._getOrReturnCtx(s,n),kt(n,{code:mt.invalid_type,expected:"integer",received:"float",message:i.message}),a.dirty()):i.kind==="min"?(i.inclusive?s.data<i.value:s.data<=i.value)&&(n=this._getOrReturnCtx(s,n),kt(n,{code:mt.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?s.data>i.value:s.data>=i.value)&&(n=this._getOrReturnCtx(s,n),kt(n,{code:mt.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="multipleOf"?Sse(s.data,i.value)!==0&&(n=this._getOrReturnCtx(s,n),kt(n,{code:mt.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):i.kind==="finite"?Number.isFinite(s.data)||(n=this._getOrReturnCtx(s,n),kt(n,{code:mt.not_finite,message:i.message}),a.dirty()):Ys.assertNever(i);return{status:a.value,value:s.data}}gte(s,r){return this.setLimit("min",s,!0,Yt.toString(r))}gt(s,r){return this.setLimit("min",s,!1,Yt.toString(r))}lte(s,r){return this.setLimit("max",s,!0,Yt.toString(r))}lt(s,r){return this.setLimit("max",s,!1,Yt.toString(r))}setLimit(s,r,n,a){return new Wd({...this._def,checks:[...this._def.checks,{kind:s,value:r,inclusive:n,message:Yt.toString(a)}]})}_addCheck(s){return new Wd({...this._def,checks:[...this._def.checks,s]})}int(s){return this._addCheck({kind:"int",message:Yt.toString(s)})}positive(s){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Yt.toString(s)})}negative(s){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Yt.toString(s)})}nonpositive(s){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Yt.toString(s)})}nonnegative(s){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Yt.toString(s)})}multipleOf(s,r){return this._addCheck({kind:"multipleOf",value:s,message:Yt.toString(r)})}finite(s){return this._addCheck({kind:"finite",message:Yt.toString(s)})}safe(s){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Yt.toString(s)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Yt.toString(s)})}get minValue(){let s=null;for(const r of this._def.checks)r.kind==="min"&&(s===null||r.value>s)&&(s=r.value);return s}get maxValue(){let s=null;for(const r of this._def.checks)r.kind==="max"&&(s===null||r.value<s)&&(s=r.value);return s}get isInt(){return!!this._def.checks.find(s=>s.kind==="int"||s.kind==="multipleOf"&&Ys.isInteger(s.value))}get isFinite(){let s=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(s===null||n.value<s)&&(s=n.value)}return Number.isFinite(r)&&Number.isFinite(s)}}Wd.create=t=>new Wd({checks:[],typeName:cs.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,..._s(t)});class Kd extends Ls{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(s){if(this._def.coerce)try{s.data=BigInt(s.data)}catch{return this._getInvalidInput(s)}if(this._getType(s)!==Tt.bigint)return this._getInvalidInput(s);let n;const a=new ya;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?s.data<i.value:s.data<=i.value)&&(n=this._getOrReturnCtx(s,n),kt(n,{code:mt.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?s.data>i.value:s.data>=i.value)&&(n=this._getOrReturnCtx(s,n),kt(n,{code:mt.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="multipleOf"?s.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(s,n),kt(n,{code:mt.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):Ys.assertNever(i);return{status:a.value,value:s.data}}_getInvalidInput(s){const r=this._getOrReturnCtx(s);return kt(r,{code:mt.invalid_type,expected:Tt.bigint,received:r.parsedType}),os}gte(s,r){return this.setLimit("min",s,!0,Yt.toString(r))}gt(s,r){return this.setLimit("min",s,!1,Yt.toString(r))}lte(s,r){return this.setLimit("max",s,!0,Yt.toString(r))}lt(s,r){return this.setLimit("max",s,!1,Yt.toString(r))}setLimit(s,r,n,a){return new Kd({...this._def,checks:[...this._def.checks,{kind:s,value:r,inclusive:n,message:Yt.toString(a)}]})}_addCheck(s){return new Kd({...this._def,checks:[...this._def.checks,s]})}positive(s){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Yt.toString(s)})}negative(s){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Yt.toString(s)})}nonpositive(s){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Yt.toString(s)})}nonnegative(s){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Yt.toString(s)})}multipleOf(s,r){return this._addCheck({kind:"multipleOf",value:s,message:Yt.toString(r)})}get minValue(){let s=null;for(const r of this._def.checks)r.kind==="min"&&(s===null||r.value>s)&&(s=r.value);return s}get maxValue(){let s=null;for(const r of this._def.checks)r.kind==="max"&&(s===null||r.value<s)&&(s=r.value);return s}}Kd.create=t=>new Kd({checks:[],typeName:cs.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,..._s(t)});class Kx extends Ls{_parse(s){if(this._def.coerce&&(s.data=!!s.data),this._getType(s)!==Tt.boolean){const n=this._getOrReturnCtx(s);return kt(n,{code:mt.invalid_type,expected:Tt.boolean,received:n.parsedType}),os}return Fa(s.data)}}Kx.create=t=>new Kx({typeName:cs.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,..._s(t)});class mm extends Ls{_parse(s){if(this._def.coerce&&(s.data=new Date(s.data)),this._getType(s)!==Tt.date){const i=this._getOrReturnCtx(s);return kt(i,{code:mt.invalid_type,expected:Tt.date,received:i.parsedType}),os}if(Number.isNaN(s.data.getTime())){const i=this._getOrReturnCtx(s);return kt(i,{code:mt.invalid_date}),os}const n=new ya;let a;for(const i of this._def.checks)i.kind==="min"?s.data.getTime()<i.value&&(a=this._getOrReturnCtx(s,a),kt(a,{code:mt.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?s.data.getTime()>i.value&&(a=this._getOrReturnCtx(s,a),kt(a,{code:mt.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):Ys.assertNever(i);return{status:n.value,value:new Date(s.data.getTime())}}_addCheck(s){return new mm({...this._def,checks:[...this._def.checks,s]})}min(s,r){return this._addCheck({kind:"min",value:s.getTime(),message:Yt.toString(r)})}max(s,r){return this._addCheck({kind:"max",value:s.getTime(),message:Yt.toString(r)})}get minDate(){let s=null;for(const r of this._def.checks)r.kind==="min"&&(s===null||r.value>s)&&(s=r.value);return s!=null?new Date(s):null}get maxDate(){let s=null;for(const r of this._def.checks)r.kind==="max"&&(s===null||r.value<s)&&(s=r.value);return s!=null?new Date(s):null}}mm.create=t=>new mm({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:cs.ZodDate,..._s(t)});class K0 extends Ls{_parse(s){if(this._getType(s)!==Tt.symbol){const n=this._getOrReturnCtx(s);return kt(n,{code:mt.invalid_type,expected:Tt.symbol,received:n.parsedType}),os}return Fa(s.data)}}K0.create=t=>new K0({typeName:cs.ZodSymbol,..._s(t)});class Yx extends Ls{_parse(s){if(this._getType(s)!==Tt.undefined){const n=this._getOrReturnCtx(s);return kt(n,{code:mt.invalid_type,expected:Tt.undefined,received:n.parsedType}),os}return Fa(s.data)}}Yx.create=t=>new Yx({typeName:cs.ZodUndefined,..._s(t)});class Gx extends Ls{_parse(s){if(this._getType(s)!==Tt.null){const n=this._getOrReturnCtx(s);return kt(n,{code:mt.invalid_type,expected:Tt.null,received:n.parsedType}),os}return Fa(s.data)}}Gx.create=t=>new Gx({typeName:cs.ZodNull,..._s(t)});class ff extends Ls{constructor(){super(...arguments),this._any=!0}_parse(s){return Fa(s.data)}}ff.create=t=>new ff({typeName:cs.ZodAny,..._s(t)});class Xu extends Ls{constructor(){super(...arguments),this._unknown=!0}_parse(s){return Fa(s.data)}}Xu.create=t=>new Xu({typeName:cs.ZodUnknown,..._s(t)});class wc extends Ls{_parse(s){const r=this._getOrReturnCtx(s);return kt(r,{code:mt.invalid_type,expected:Tt.never,received:r.parsedType}),os}}wc.create=t=>new wc({typeName:cs.ZodNever,..._s(t)});class Y0 extends Ls{_parse(s){if(this._getType(s)!==Tt.undefined){const n=this._getOrReturnCtx(s);return kt(n,{code:mt.invalid_type,expected:Tt.void,received:n.parsedType}),os}return Fa(s.data)}}Y0.create=t=>new Y0({typeName:cs.ZodVoid,..._s(t)});class $o extends Ls{_parse(s){const{ctx:r,status:n}=this._processInputParams(s),a=this._def;if(r.parsedType!==Tt.array)return kt(r,{code:mt.invalid_type,expected:Tt.array,received:r.parsedType}),os;if(a.exactLength!==null){const o=r.data.length>a.exactLength.value,l=r.data.length<a.exactLength.value;(o||l)&&(kt(r,{code:o?mt.too_big:mt.too_small,minimum:l?a.exactLength.value:void 0,maximum:o?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),n.dirty())}if(a.minLength!==null&&r.data.length<a.minLength.value&&(kt(r,{code:mt.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),n.dirty()),a.maxLength!==null&&r.data.length>a.maxLength.value&&(kt(r,{code:mt.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((o,l)=>a.type._parseAsync(new Tl(r,o,r.path,l)))).then(o=>ya.mergeArray(n,o));const i=[...r.data].map((o,l)=>a.type._parseSync(new Tl(r,o,r.path,l)));return ya.mergeArray(n,i)}get element(){return this._def.type}min(s,r){return new $o({...this._def,minLength:{value:s,message:Yt.toString(r)}})}max(s,r){return new $o({...this._def,maxLength:{value:s,message:Yt.toString(r)}})}length(s,r){return new $o({...this._def,exactLength:{value:s,message:Yt.toString(r)}})}nonempty(s){return this.min(1,s)}}$o.create=(t,s)=>new $o({type:t,minLength:null,maxLength:null,exactLength:null,typeName:cs.ZodArray,..._s(s)});function Xm(t){if(t instanceof zr){const s={};for(const r in t.shape){const n=t.shape[r];s[r]=_l.create(Xm(n))}return new zr({...t._def,shape:()=>s})}else return t instanceof $o?new $o({...t._def,type:Xm(t.element)}):t instanceof _l?_l.create(Xm(t.unwrap())):t instanceof Gd?Gd.create(Xm(t.unwrap())):t instanceof Ml?Ml.create(t.items.map(s=>Xm(s))):t}class zr extends Ls{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const s=this._def.shape(),r=Ys.objectKeys(s);return this._cached={shape:s,keys:r},this._cached}_parse(s){if(this._getType(s)!==Tt.object){const d=this._getOrReturnCtx(s);return kt(d,{code:mt.invalid_type,expected:Tt.object,received:d.parsedType}),os}const{status:n,ctx:a}=this._processInputParams(s),{shape:i,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof wc&&this._def.unknownKeys==="strip"))for(const d in a.data)o.includes(d)||l.push(d);const c=[];for(const d of o){const u=i[d],m=a.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new Tl(a,m,a.path,d)),alwaysSet:d in a.data})}if(this._def.catchall instanceof wc){const d=this._def.unknownKeys;if(d==="passthrough")for(const u of l)c.push({key:{status:"valid",value:u},value:{status:"valid",value:a.data[u]}});else if(d==="strict")l.length>0&&(kt(a,{code:mt.unrecognized_keys,keys:l}),n.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const u of l){const m=a.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new Tl(a,m,a.path,u)),alwaysSet:u in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const d=[];for(const u of c){const m=await u.key,f=await u.value;d.push({key:m,value:f,alwaysSet:u.alwaysSet})}return d}).then(d=>ya.mergeObjectSync(n,d)):ya.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(s){return Yt.errToObj,new zr({...this._def,unknownKeys:"strict",...s!==void 0?{errorMap:(r,n)=>{var i,o;const a=((o=(i=this._def).errorMap)==null?void 0:o.call(i,r,n).message)??n.defaultError;return r.code==="unrecognized_keys"?{message:Yt.errToObj(s).message??a}:{message:a}}}:{}})}strip(){return new zr({...this._def,unknownKeys:"strip"})}passthrough(){return new zr({...this._def,unknownKeys:"passthrough"})}extend(s){return new zr({...this._def,shape:()=>({...this._def.shape(),...s})})}merge(s){return new zr({unknownKeys:s._def.unknownKeys,catchall:s._def.catchall,shape:()=>({...this._def.shape(),...s._def.shape()}),typeName:cs.ZodObject})}setKey(s,r){return this.augment({[s]:r})}catchall(s){return new zr({...this._def,catchall:s})}pick(s){const r={};for(const n of Ys.objectKeys(s))s[n]&&this.shape[n]&&(r[n]=this.shape[n]);return new zr({...this._def,shape:()=>r})}omit(s){const r={};for(const n of Ys.objectKeys(this.shape))s[n]||(r[n]=this.shape[n]);return new zr({...this._def,shape:()=>r})}deepPartial(){return Xm(this)}partial(s){const r={};for(const n of Ys.objectKeys(this.shape)){const a=this.shape[n];s&&!s[n]?r[n]=a:r[n]=a.optional()}return new zr({...this._def,shape:()=>r})}required(s){const r={};for(const n of Ys.objectKeys(this.shape))if(s&&!s[n])r[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof _l;)i=i._def.innerType;r[n]=i}return new zr({...this._def,shape:()=>r})}keyof(){return wO(Ys.objectKeys(this.shape))}}zr.create=(t,s)=>new zr({shape:()=>t,unknownKeys:"strip",catchall:wc.create(),typeName:cs.ZodObject,..._s(s)});zr.strictCreate=(t,s)=>new zr({shape:()=>t,unknownKeys:"strict",catchall:wc.create(),typeName:cs.ZodObject,..._s(s)});zr.lazycreate=(t,s)=>new zr({shape:t,unknownKeys:"strip",catchall:wc.create(),typeName:cs.ZodObject,..._s(s)});class Qx extends Ls{_parse(s){const{ctx:r}=this._processInputParams(s),n=this._def.options;function a(i){for(const l of i)if(l.result.status==="valid")return l.result;for(const l of i)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;const o=i.map(l=>new Li(l.ctx.common.issues));return kt(r,{code:mt.invalid_union,unionErrors:o}),os}if(r.common.async)return Promise.all(n.map(async i=>{const o={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(a);{let i;const o=[];for(const c of n){const d={...r,common:{...r.common,issues:[]},parent:null},u=c._parseSync({data:r.data,path:r.path,parent:d});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:d}),d.common.issues.length&&o.push(d.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;const l=o.map(c=>new Li(c));return kt(r,{code:mt.invalid_union,unionErrors:l}),os}}get options(){return this._def.options}}Qx.create=(t,s)=>new Qx({options:t,typeName:cs.ZodUnion,..._s(s)});const nc=t=>t instanceof Jx?nc(t.schema):t instanceof Ko?nc(t.innerType()):t instanceof eg?[t.value]:t instanceof Yd?t.options:t instanceof tg?Ys.objectValues(t.enum):t instanceof sg?nc(t._def.innerType):t instanceof Yx?[void 0]:t instanceof Gx?[null]:t instanceof _l?[void 0,...nc(t.unwrap())]:t instanceof Gd?[null,...nc(t.unwrap())]:t instanceof N4||t instanceof ng?nc(t.unwrap()):t instanceof rg?nc(t._def.innerType):[];class cj extends Ls{_parse(s){const{ctx:r}=this._processInputParams(s);if(r.parsedType!==Tt.object)return kt(r,{code:mt.invalid_type,expected:Tt.object,received:r.parsedType}),os;const n=this.discriminator,a=r.data[n],i=this.optionsMap.get(a);return i?r.common.async?i._parseAsync({data:r.data,path:r.path,parent:r}):i._parseSync({data:r.data,path:r.path,parent:r}):(kt(r,{code:mt.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),os)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(s,r,n){const a=new Map;for(const i of r){const o=nc(i.shape[s]);if(!o.length)throw new Error(`A discriminator value for key \`${s}\` could not be extracted from all schema options`);for(const l of o){if(a.has(l))throw new Error(`Discriminator property ${String(s)} has duplicate value ${String(l)}`);a.set(l,i)}}return new cj({typeName:cs.ZodDiscriminatedUnion,discriminator:s,options:r,optionsMap:a,..._s(n)})}}function Ew(t,s){const r=lc(t),n=lc(s);if(t===s)return{valid:!0,data:t};if(r===Tt.object&&n===Tt.object){const a=Ys.objectKeys(s),i=Ys.objectKeys(t).filter(l=>a.indexOf(l)!==-1),o={...t,...s};for(const l of i){const c=Ew(t[l],s[l]);if(!c.valid)return{valid:!1};o[l]=c.data}return{valid:!0,data:o}}else if(r===Tt.array&&n===Tt.array){if(t.length!==s.length)return{valid:!1};const a=[];for(let i=0;i<t.length;i++){const o=t[i],l=s[i],c=Ew(o,l);if(!c.valid)return{valid:!1};a.push(c.data)}return{valid:!0,data:a}}else return r===Tt.date&&n===Tt.date&&+t==+s?{valid:!0,data:t}:{valid:!1}}class Zx extends Ls{_parse(s){const{status:r,ctx:n}=this._processInputParams(s),a=(i,o)=>{if(Aw(i)||Aw(o))return os;const l=Ew(i.value,o.value);return l.valid?((Pw(i)||Pw(o))&&r.dirty(),{status:r.value,value:l.data}):(kt(n,{code:mt.invalid_intersection_types}),os)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,o])=>a(i,o)):a(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}Zx.create=(t,s,r)=>new Zx({left:t,right:s,typeName:cs.ZodIntersection,..._s(r)});class Ml extends Ls{_parse(s){const{status:r,ctx:n}=this._processInputParams(s);if(n.parsedType!==Tt.array)return kt(n,{code:mt.invalid_type,expected:Tt.array,received:n.parsedType}),os;if(n.data.length<this._def.items.length)return kt(n,{code:mt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),os;!this._def.rest&&n.data.length>this._def.items.length&&(kt(n,{code:mt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const i=[...n.data].map((o,l)=>{const c=this._def.items[l]||this._def.rest;return c?c._parse(new Tl(n,o,n.path,l)):null}).filter(o=>!!o);return n.common.async?Promise.all(i).then(o=>ya.mergeArray(r,o)):ya.mergeArray(r,i)}get items(){return this._def.items}rest(s){return new Ml({...this._def,rest:s})}}Ml.create=(t,s)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ml({items:t,typeName:cs.ZodTuple,rest:null,..._s(s)})};class Xx extends Ls{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(s){const{status:r,ctx:n}=this._processInputParams(s);if(n.parsedType!==Tt.object)return kt(n,{code:mt.invalid_type,expected:Tt.object,received:n.parsedType}),os;const a=[],i=this._def.keyType,o=this._def.valueType;for(const l in n.data)a.push({key:i._parse(new Tl(n,l,n.path,l)),value:o._parse(new Tl(n,n.data[l],n.path,l)),alwaysSet:l in n.data});return n.common.async?ya.mergeObjectAsync(r,a):ya.mergeObjectSync(r,a)}get element(){return this._def.valueType}static create(s,r,n){return r instanceof Ls?new Xx({keyType:s,valueType:r,typeName:cs.ZodRecord,..._s(n)}):new Xx({keyType:Io.create(),valueType:s,typeName:cs.ZodRecord,..._s(r)})}}class G0 extends Ls{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(s){const{status:r,ctx:n}=this._processInputParams(s);if(n.parsedType!==Tt.map)return kt(n,{code:mt.invalid_type,expected:Tt.map,received:n.parsedType}),os;const a=this._def.keyType,i=this._def.valueType,o=[...n.data.entries()].map(([l,c],d)=>({key:a._parse(new Tl(n,l,n.path,[d,"key"])),value:i._parse(new Tl(n,c,n.path,[d,"value"]))}));if(n.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const c of o){const d=await c.key,u=await c.value;if(d.status==="aborted"||u.status==="aborted")return os;(d.status==="dirty"||u.status==="dirty")&&r.dirty(),l.set(d.value,u.value)}return{status:r.value,value:l}})}else{const l=new Map;for(const c of o){const d=c.key,u=c.value;if(d.status==="aborted"||u.status==="aborted")return os;(d.status==="dirty"||u.status==="dirty")&&r.dirty(),l.set(d.value,u.value)}return{status:r.value,value:l}}}}G0.create=(t,s,r)=>new G0({valueType:s,keyType:t,typeName:cs.ZodMap,..._s(r)});class hm extends Ls{_parse(s){const{status:r,ctx:n}=this._processInputParams(s);if(n.parsedType!==Tt.set)return kt(n,{code:mt.invalid_type,expected:Tt.set,received:n.parsedType}),os;const a=this._def;a.minSize!==null&&n.data.size<a.minSize.value&&(kt(n,{code:mt.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),r.dirty()),a.maxSize!==null&&n.data.size>a.maxSize.value&&(kt(n,{code:mt.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),r.dirty());const i=this._def.valueType;function o(c){const d=new Set;for(const u of c){if(u.status==="aborted")return os;u.status==="dirty"&&r.dirty(),d.add(u.value)}return{status:r.value,value:d}}const l=[...n.data.values()].map((c,d)=>i._parse(new Tl(n,c,n.path,d)));return n.common.async?Promise.all(l).then(c=>o(c)):o(l)}min(s,r){return new hm({...this._def,minSize:{value:s,message:Yt.toString(r)}})}max(s,r){return new hm({...this._def,maxSize:{value:s,message:Yt.toString(r)}})}size(s,r){return this.min(s,r).max(s,r)}nonempty(s){return this.min(1,s)}}hm.create=(t,s)=>new hm({valueType:t,minSize:null,maxSize:null,typeName:cs.ZodSet,..._s(s)});class Ah extends Ls{constructor(){super(...arguments),this.validate=this.implement}_parse(s){const{ctx:r}=this._processInputParams(s);if(r.parsedType!==Tt.function)return kt(r,{code:mt.invalid_type,expected:Tt.function,received:r.parsedType}),os;function n(l,c){return W0({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,H0(),hf].filter(d=>!!d),issueData:{code:mt.invalid_arguments,argumentsError:c}})}function a(l,c){return W0({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,H0(),hf].filter(d=>!!d),issueData:{code:mt.invalid_return_type,returnTypeError:c}})}const i={errorMap:r.common.contextualErrorMap},o=r.data;if(this._def.returns instanceof pf){const l=this;return Fa(async function(...c){const d=new Li([]),u=await l._def.args.parseAsync(c,i).catch(h=>{throw d.addIssue(n(c,h)),d}),m=await Reflect.apply(o,this,u);return await l._def.returns._def.type.parseAsync(m,i).catch(h=>{throw d.addIssue(a(m,h)),d})})}else{const l=this;return Fa(function(...c){const d=l._def.args.safeParse(c,i);if(!d.success)throw new Li([n(c,d.error)]);const u=Reflect.apply(o,this,d.data),m=l._def.returns.safeParse(u,i);if(!m.success)throw new Li([a(u,m.error)]);return m.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...s){return new Ah({...this._def,args:Ml.create(s).rest(Xu.create())})}returns(s){return new Ah({...this._def,returns:s})}implement(s){return this.parse(s)}strictImplement(s){return this.parse(s)}static create(s,r,n){return new Ah({args:s||Ml.create([]).rest(Xu.create()),returns:r||Xu.create(),typeName:cs.ZodFunction,..._s(n)})}}class Jx extends Ls{get schema(){return this._def.getter()}_parse(s){const{ctx:r}=this._processInputParams(s);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}Jx.create=(t,s)=>new Jx({getter:t,typeName:cs.ZodLazy,..._s(s)});class eg extends Ls{_parse(s){if(s.data!==this._def.value){const r=this._getOrReturnCtx(s);return kt(r,{received:r.data,code:mt.invalid_literal,expected:this._def.value}),os}return{status:"valid",value:s.data}}get value(){return this._def.value}}eg.create=(t,s)=>new eg({value:t,typeName:cs.ZodLiteral,..._s(s)});function wO(t,s){return new Yd({values:t,typeName:cs.ZodEnum,..._s(s)})}class Yd extends Ls{_parse(s){if(typeof s.data!="string"){const r=this._getOrReturnCtx(s),n=this._def.values;return kt(r,{expected:Ys.joinValues(n),received:r.parsedType,code:mt.invalid_type}),os}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(s.data)){const r=this._getOrReturnCtx(s),n=this._def.values;return kt(r,{received:r.data,code:mt.invalid_enum_value,options:n}),os}return Fa(s.data)}get options(){return this._def.values}get enum(){const s={};for(const r of this._def.values)s[r]=r;return s}get Values(){const s={};for(const r of this._def.values)s[r]=r;return s}get Enum(){const s={};for(const r of this._def.values)s[r]=r;return s}extract(s,r=this._def){return Yd.create(s,{...this._def,...r})}exclude(s,r=this._def){return Yd.create(this.options.filter(n=>!s.includes(n)),{...this._def,...r})}}Yd.create=wO;class tg extends Ls{_parse(s){const r=Ys.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(s);if(n.parsedType!==Tt.string&&n.parsedType!==Tt.number){const a=Ys.objectValues(r);return kt(n,{expected:Ys.joinValues(a),received:n.parsedType,code:mt.invalid_type}),os}if(this._cache||(this._cache=new Set(Ys.getValidEnumValues(this._def.values))),!this._cache.has(s.data)){const a=Ys.objectValues(r);return kt(n,{received:n.data,code:mt.invalid_enum_value,options:a}),os}return Fa(s.data)}get enum(){return this._def.values}}tg.create=(t,s)=>new tg({values:t,typeName:cs.ZodNativeEnum,..._s(s)});class pf extends Ls{unwrap(){return this._def.type}_parse(s){const{ctx:r}=this._processInputParams(s);if(r.parsedType!==Tt.promise&&r.common.async===!1)return kt(r,{code:mt.invalid_type,expected:Tt.promise,received:r.parsedType}),os;const n=r.parsedType===Tt.promise?r.data:Promise.resolve(r.data);return Fa(n.then(a=>this._def.type.parseAsync(a,{path:r.path,errorMap:r.common.contextualErrorMap})))}}pf.create=(t,s)=>new pf({type:t,typeName:cs.ZodPromise,..._s(s)});class Ko extends Ls{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===cs.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(s){const{status:r,ctx:n}=this._processInputParams(s),a=this._def.effect||null,i={addIssue:o=>{kt(n,o),o.fatal?r.abort():r.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),a.type==="preprocess"){const o=a.transform(n.data,i);if(n.common.async)return Promise.resolve(o).then(async l=>{if(r.value==="aborted")return os;const c=await this._def.schema._parseAsync({data:l,path:n.path,parent:n});return c.status==="aborted"?os:c.status==="dirty"||r.value==="dirty"?ph(c.value):c});{if(r.value==="aborted")return os;const l=this._def.schema._parseSync({data:o,path:n.path,parent:n});return l.status==="aborted"?os:l.status==="dirty"||r.value==="dirty"?ph(l.value):l}}if(a.type==="refinement"){const o=l=>{const c=a.refinement(l,i);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){const l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?os:(l.status==="dirty"&&r.dirty(),o(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?os:(l.status==="dirty"&&r.dirty(),o(l.value).then(()=>({status:r.value,value:l.value}))))}if(a.type==="transform")if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!um(o))return os;const l=a.transform(o.value,i);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>um(o)?Promise.resolve(a.transform(o.value,i)).then(l=>({status:r.value,value:l})):os);Ys.assertNever(a)}}Ko.create=(t,s,r)=>new Ko({schema:t,typeName:cs.ZodEffects,effect:s,..._s(r)});Ko.createWithPreprocess=(t,s,r)=>new Ko({schema:s,effect:{type:"preprocess",transform:t},typeName:cs.ZodEffects,..._s(r)});class _l extends Ls{_parse(s){return this._getType(s)===Tt.undefined?Fa(void 0):this._def.innerType._parse(s)}unwrap(){return this._def.innerType}}_l.create=(t,s)=>new _l({innerType:t,typeName:cs.ZodOptional,..._s(s)});class Gd extends Ls{_parse(s){return this._getType(s)===Tt.null?Fa(null):this._def.innerType._parse(s)}unwrap(){return this._def.innerType}}Gd.create=(t,s)=>new Gd({innerType:t,typeName:cs.ZodNullable,..._s(s)});class sg extends Ls{_parse(s){const{ctx:r}=this._processInputParams(s);let n=r.data;return r.parsedType===Tt.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}sg.create=(t,s)=>new sg({innerType:t,typeName:cs.ZodDefault,defaultValue:typeof s.default=="function"?s.default:()=>s.default,..._s(s)});class rg extends Ls{_parse(s){const{ctx:r}=this._processInputParams(s),n={...r,common:{...r.common,issues:[]}},a=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Wx(a)?a.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Li(n.common.issues)},input:n.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Li(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}rg.create=(t,s)=>new rg({innerType:t,typeName:cs.ZodCatch,catchValue:typeof s.catch=="function"?s.catch:()=>s.catch,..._s(s)});class Q0 extends Ls{_parse(s){if(this._getType(s)!==Tt.nan){const n=this._getOrReturnCtx(s);return kt(n,{code:mt.invalid_type,expected:Tt.nan,received:n.parsedType}),os}return{status:"valid",value:s.data}}}Q0.create=t=>new Q0({typeName:cs.ZodNaN,..._s(t)});const Cse=Symbol("zod_brand");class N4 extends Ls{_parse(s){const{ctx:r}=this._processInputParams(s),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class Og extends Ls{_parse(s){const{status:r,ctx:n}=this._processInputParams(s);if(n.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?os:i.status==="dirty"?(r.dirty(),ph(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})})();{const a=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?os:a.status==="dirty"?(r.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:n.path,parent:n})}}static create(s,r){return new Og({in:s,out:r,typeName:cs.ZodPipeline})}}class ng extends Ls{_parse(s){const r=this._def.innerType._parse(s),n=a=>(um(a)&&(a.value=Object.freeze(a.value)),a);return Wx(r)?r.then(a=>n(a)):n(r)}unwrap(){return this._def.innerType}}ng.create=(t,s)=>new ng({innerType:t,typeName:cs.ZodReadonly,..._s(s)});function Kk(t,s){const r=typeof t=="function"?t(s):typeof t=="string"?{message:t}:t;return typeof r=="string"?{message:r}:r}function w4(t,s={},r){return t?ff.create().superRefine((n,a)=>{const i=t(n);if(i instanceof Promise)return i.then(o=>{if(!o){const l=Kk(s,n),c=l.fatal??r??!0;a.addIssue({code:"custom",...l,fatal:c})}});if(!i){const o=Kk(s,n),l=o.fatal??r??!0;a.addIssue({code:"custom",...o,fatal:l})}}):ff.create()}const kse={object:zr.lazycreate};var cs;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(cs||(cs={}));const Ase=(t,s={message:`Input not instance of ${t.name}`})=>w4(r=>r instanceof t,s),we=Io.create,Ll=Wd.create,Pse=Q0.create,Ese=Kd.create,xn=Kx.create,Tse=mm.create,Mse=K0.create,Lse=Yx.create,_O=Gx.create,Z0=ff.create,Dse=Xu.create,Ise=wc.create,Rse=Y0.create,ag=$o.create,Dr=zr.create,Fse=zr.strictCreate,_4=Qx.create,Ose=cj.create,$se=Zx.create,Bse=Ml.create,SO=Xx.create,Use=G0.create,zse=hm.create,qse=Ah.create,Vse=Jx.create,wr=eg.create,Xn=Yd.create,Hse=tg.create,Wse=pf.create,Yk=Ko.create,Kse=_l.create,Yse=Gd.create,Gse=Ko.createWithPreprocess,Qse=Og.create,Zse=()=>we().optional(),Xse=()=>Ll().optional(),Jse=()=>xn().optional(),CO={string:t=>Io.create({...t,coerce:!0}),number:t=>Wd.create({...t,coerce:!0}),boolean:t=>Kx.create({...t,coerce:!0}),bigint:t=>Kd.create({...t,coerce:!0}),date:t=>mm.create({...t,coerce:!0})},ere=os,tre=Object.freeze(Object.defineProperty({__proto__:null,BRAND:Cse,DIRTY:ph,EMPTY_PATH:nse,INVALID:os,NEVER:ere,OK:Fa,ParseStatus:ya,Schema:Ls,ZodAny:ff,ZodArray:$o,ZodBigInt:Kd,ZodBoolean:Kx,ZodBranded:N4,ZodCatch:rg,ZodDate:mm,ZodDefault:sg,ZodDiscriminatedUnion:cj,ZodEffects:Ko,ZodEnum:Yd,ZodError:Li,get ZodFirstPartyTypeKind(){return cs},ZodFunction:Ah,ZodIntersection:Zx,ZodIssueCode:mt,ZodLazy:Jx,ZodLiteral:eg,ZodMap:G0,ZodNaN:Q0,ZodNativeEnum:tg,ZodNever:wc,ZodNull:Gx,ZodNullable:Gd,ZodNumber:Wd,ZodObject:zr,ZodOptional:_l,ZodParsedType:Tt,ZodPipeline:Og,ZodPromise:pf,ZodReadonly:ng,ZodRecord:Xx,ZodSchema:Ls,ZodSet:hm,ZodString:Io,ZodSymbol:K0,ZodTransformer:Ko,ZodTuple:Ml,ZodType:Ls,ZodUndefined:Yx,ZodUnion:Qx,ZodUnknown:Xu,ZodVoid:Y0,addIssueToContext:kt,any:Z0,array:ag,bigint:Ese,boolean:xn,coerce:CO,custom:w4,date:Tse,datetimeRegex:NO,defaultErrorMap:hf,discriminatedUnion:Ose,effect:Yk,enum:Xn,function:qse,getErrorMap:H0,getParsedType:lc,instanceof:Ase,intersection:$se,isAborted:Aw,isAsync:Wx,isDirty:Pw,isValid:um,late:kse,lazy:Vse,literal:wr,makeIssue:W0,map:Use,nan:Pse,nativeEnum:Hse,never:Ise,null:_O,nullable:Yse,number:Ll,object:Dr,get objectUtil(){return kw},oboolean:Jse,onumber:Xse,optional:Kse,ostring:Zse,pipeline:Qse,preprocess:Gse,promise:Wse,quotelessJson:sse,record:SO,set:zse,setErrorMap:rse,strictObject:Fse,string:we,symbol:Mse,transformer:Yk,tuple:Bse,undefined:Lse,union:_4,unknown:Dse,get util(){return Ys},void:Rse},Symbol.toStringTag,{value:"Module"})),sre=Dr({customerName:we().min(1,"Name is required"),customerEmail:we().email("Valid email is required"),customerPhone:we().min(1,"Phone is required"),recipientName:we().min(1,"Recipient name is required"),deliveryAddress:we().min(1,"Delivery address is required"),deliveryDate:we().optional(),deliveryTime:we().optional(),arrangementType:we().optional(),specialInstructions:we().optional(),orderAmount:we().min(1,"Order amount is required").regex(/^\d+(\.\d{1,2})?$/,"Must be a valid amount (e.g., 75.00)").refine(t=>parseFloat(t)>0,"Amount must be greater than 0")});function rre({memorialId:t,memorialName:s,deliveryLocation:r}){const[n,a]=N.useState(!1),[i,o]=N.useState(null),{toast:l}=Ht(),{data:c,isLoading:d}=Xe({queryKey:["/api/flower-shops"],enabled:n}),u=Or({resolver:$r(sre),defaultValues:{customerName:"",customerEmail:"",customerPhone:"",recipientName:s||"",deliveryAddress:r||"",deliveryDate:"",deliveryTime:"",arrangementType:"Sympathy Arrangement",specialInstructions:"",orderAmount:""}}),m=yt({mutationFn:async g=>pt("POST","/api/flower-orders",{shopId:i==null?void 0:i.id,memorialId:t||null,...g,orderAmount:g.orderAmount}),onSuccess:()=>{l({title:"Order Placed",description:`Your flower order has been sent to ${i==null?void 0:i.businessName}. They will contact you shortly to confirm.`}),a(!1),o(null),u.reset()},onError:g=>{l({title:"Error",description:g.message||"Failed to place order. Please try again.",variant:"destructive"})}}),f=g=>{o(g)},h=()=>{o(null)},p=g=>{m.mutate(g)};return e.jsxs(Os,{open:n,onOpenChange:a,children:[e.jsx(si,{asChild:!0,children:e.jsxs(O,{size:"lg",className:"bg-chart-3 hover:bg-chart-3 text-white","data-testid":"button-send-flowers",children:[e.jsx(of,{className:"w-5 h-5 mr-2"}),"Send Flowers"]})}),e.jsx(Ds,{className:"sm:max-w-2xl","data-testid":"modal-flower-shops",children:i?e.jsxs(e.Fragment,{children:[e.jsx(Is,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{variant:"ghost",size:"icon",onClick:h,"data-testid":"button-back",children:e.jsx(Sr,{className:"w-4 h-4"})}),e.jsxs("div",{children:[e.jsxs(Rs,{className:"font-serif text-2xl",children:["Order from ",i.businessName]}),e.jsx(Lr,{children:"Complete your order details"})]})]})}),e.jsx(Wr,{...u,children:e.jsxs("form",{onSubmit:u.handleSubmit(p),className:"space-y-4 max-h-[500px] overflow-y-auto py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(fe,{control:u.control,name:"customerName",render:({field:g})=>e.jsxs(me,{children:[e.jsx(he,{children:"Your Name"}),e.jsx(xe,{children:e.jsx(re,{...g,"data-testid":"input-customer-name"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:u.control,name:"customerPhone",render:({field:g})=>e.jsxs(me,{children:[e.jsx(he,{children:"Your Phone"}),e.jsx(xe,{children:e.jsx(re,{...g,"data-testid":"input-customer-phone"})}),e.jsx(ye,{})]})})]}),e.jsx(fe,{control:u.control,name:"customerEmail",render:({field:g})=>e.jsxs(me,{children:[e.jsx(he,{children:"Your Email"}),e.jsx(xe,{children:e.jsx(re,{type:"email",...g,"data-testid":"input-customer-email"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:u.control,name:"recipientName",render:({field:g})=>e.jsxs(me,{children:[e.jsx(he,{children:"Recipient Name"}),e.jsx(xe,{children:e.jsx(re,{...g,"data-testid":"input-recipient-name"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:u.control,name:"deliveryAddress",render:({field:g})=>e.jsxs(me,{children:[e.jsx(he,{children:"Delivery Address"}),e.jsx(xe,{children:e.jsx(re,{...g,"data-testid":"input-delivery-address"})}),e.jsx(ye,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(fe,{control:u.control,name:"deliveryDate",render:({field:g})=>e.jsxs(me,{children:[e.jsx(he,{children:"Delivery Date (Optional)"}),e.jsx(xe,{children:e.jsx(re,{type:"date",...g,"data-testid":"input-delivery-date"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:u.control,name:"deliveryTime",render:({field:g})=>e.jsxs(me,{children:[e.jsx(he,{children:"Delivery Time (Optional)"}),e.jsx(xe,{children:e.jsx(re,{...g,placeholder:"e.g., Morning","data-testid":"input-delivery-time"})}),e.jsx(ye,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(fe,{control:u.control,name:"arrangementType",render:({field:g})=>e.jsxs(me,{children:[e.jsx(he,{children:"Arrangement Type"}),e.jsx(xe,{children:e.jsx(re,{...g,"data-testid":"input-arrangement-type"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:u.control,name:"orderAmount",render:({field:g})=>e.jsxs(me,{children:[e.jsx(he,{children:"Order Amount ($)"}),e.jsx(xe,{children:e.jsx(re,{type:"number",step:"0.01",min:"0",...g,"data-testid":"input-order-amount"})}),e.jsx(ye,{})]})})]}),e.jsx(fe,{control:u.control,name:"specialInstructions",render:({field:g})=>e.jsxs(me,{children:[e.jsx(he,{children:"Special Instructions (Optional)"}),e.jsx(xe,{children:e.jsx(Gt,{...g,"data-testid":"input-special-instructions"})}),e.jsx(ye,{})]})}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx(O,{type:"button",variant:"outline",onClick:h,className:"flex-1","data-testid":"button-cancel-order",children:"Cancel"}),e.jsx(O,{type:"submit",className:"flex-1",disabled:m.isPending,"data-testid":"button-submit-order",children:m.isPending?"Placing Order...":"Place Order"})]})]})}),e.jsx("div",{className:"pt-4 border-t border-border",children:e.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"The florist will contact you to confirm and arrange payment"})})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Is,{children:[e.jsx(Rs,{className:"font-serif text-2xl",children:"Send Flowers"}),e.jsx(Lr,{children:r?`Choose a local florist to deliver flowers to ${r}`:"Choose a local florist for flower delivery"})]}),e.jsx("div",{className:"space-y-4 max-h-[500px] overflow-y-auto py-4",children:d?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-muted-foreground",children:"Loading flower shops..."})}):!c||c.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-muted-foreground",children:"No flower shops available at this time."}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Please check back later or contact us to add a local florist."})]}):c.map(g=>e.jsx($,{className:"p-4 hover-elevate","data-testid":`card-flower-shop-${g.id}`,children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:"font-semibold text-foreground","data-testid":`text-shop-name-${g.id}`,children:g.businessName}),parseFloat(g.rating)>0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ks,{className:"w-4 h-4 fill-amber-400 text-amber-400"}),e.jsx("span",{className:"text-sm font-medium",children:parseFloat(g.rating).toFixed(1)})]})]}),e.jsxs("div",{className:"space-y-1 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(tr,{className:"w-4 h-4"}),e.jsxs("span",{children:[g.address,", ",g.city,", ",g.state]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx($d,{className:"w-4 h-4"}),e.jsx("span",{children:g.phone})]})]}),g.specialties&&g.specialties.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:g.specialties.map((y,v)=>e.jsx(ze,{variant:"outline",className:"text-xs",children:y},v))})]}),e.jsx(O,{onClick:()=>f(g),"data-testid":`button-order-${g.id}`,children:"Order Now"})]})},g.id))}),e.jsx("div",{className:"pt-4 border-t border-border",children:e.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Partner florists offer 20% of order value as platform commission"})})]})})]})}var S4="Avatar",[nre,Vge]=Dn(S4),[are,kO]=nre(S4),AO=N.forwardRef((t,s)=>{const{__scopeAvatar:r,...n}=t,[a,i]=N.useState("idle");return e.jsx(are,{scope:r,imageLoadingStatus:a,onImageLoadingStatusChange:i,children:e.jsx(Dt.span,{...n,ref:s})})});AO.displayName=S4;var PO="AvatarImage",EO=N.forwardRef((t,s)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:a=()=>{},...i}=t,o=kO(PO,r),l=ire(n,i),c=Fr(d=>{a(d),o.onImageLoadingStatusChange(d)});return gn(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?e.jsx(Dt.img,{...i,ref:s,src:n}):null});EO.displayName=PO;var TO="AvatarFallback",MO=N.forwardRef((t,s)=>{const{__scopeAvatar:r,delayMs:n,...a}=t,i=kO(TO,r),[o,l]=N.useState(n===void 0);return N.useEffect(()=>{if(n!==void 0){const c=window.setTimeout(()=>l(!0),n);return()=>window.clearTimeout(c)}},[n]),o&&i.imageLoadingStatus!=="loaded"?e.jsx(Dt.span,{...a,ref:s}):null});MO.displayName=TO;function Gk(t,s){return t?s?(t.src!==s&&(t.src=s),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function ire(t,{referrerPolicy:s,crossOrigin:r}){const n=lre(),a=N.useRef(null),i=n?(a.current||(a.current=new window.Image),a.current):null,[o,l]=N.useState(()=>Gk(i,t));return gn(()=>{l(Gk(i,t))},[i,t]),gn(()=>{const c=m=>()=>{l(m)};if(!i)return;const d=c("loaded"),u=c("error");return i.addEventListener("load",d),i.addEventListener("error",u),s&&(i.referrerPolicy=s),typeof r=="string"&&(i.crossOrigin=r),()=>{i.removeEventListener("load",d),i.removeEventListener("error",u)}},[i,r,s]),o}function ore(){return()=>{}}function lre(){return N.useSyncExternalStore(ore,()=>!0,()=>!1)}var LO=AO,DO=EO,IO=MO;const Da=N.forwardRef(({className:t,...s},r)=>e.jsx(LO,{ref:r,className:bt(`
      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10
      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,t),...s}));Da.displayName=LO.displayName;const Td=N.forwardRef(({className:t,...s},r)=>e.jsx(DO,{ref:r,className:bt("aspect-square h-full w-full",t),...s}));Td.displayName=DO.displayName;const Ia=N.forwardRef(({className:t,...s},r)=>e.jsx(IO,{ref:r,className:bt("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...s}));Ia.displayName=IO.displayName;var cre="Separator",Qk="horizontal",dre=["horizontal","vertical"],RO=N.forwardRef((t,s)=>{const{decorative:r,orientation:n=Qk,...a}=t,i=ure(n)?n:Qk,l=r?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return e.jsx(Dt.div,{"data-orientation":i,...l,...a,ref:s})});RO.displayName=cre;function ure(t){return dre.includes(t)}var FO=RO;const ls=N.forwardRef(({className:t,orientation:s="horizontal",decorative:r=!0,...n},a)=>e.jsx(FO,{ref:a,decorative:r,orientation:s,className:bt("shrink-0 bg-border",s==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...n}));ls.displayName=FO.displayName;function Hs(t){const s=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&s==="[object Date]"?new t.constructor(+t):typeof t=="number"||s==="[object Number]"||typeof t=="string"||s==="[object String]"?new Date(t):new Date(NaN)}function Yo(t,s){return t instanceof Date?new t.constructor(s):new Date(s)}function Zk(t,s){const r=Hs(t);return isNaN(s)?Yo(t,NaN):(s&&r.setDate(r.getDate()+s),r)}function mre(t,s){const r=Hs(t);if(isNaN(s))return Yo(t,NaN);const n=r.getDate(),a=Yo(t,r.getTime());a.setMonth(r.getMonth()+s+1,0);const i=a.getDate();return n>=i?a:(r.setFullYear(a.getFullYear(),a.getMonth(),n),r)}const OO=6048e5,hre=864e5,$O=6e4,BO=36e5,ry=43200,Xk=1440;let fre={};function Of(){return fre}function ig(t,s){var l,c,d,u;const r=Of(),n=(s==null?void 0:s.weekStartsOn)??((c=(l=s==null?void 0:s.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((u=(d=r.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,a=Hs(t),i=a.getDay(),o=(i<n?7:0)+i-n;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function X0(t){return ig(t,{weekStartsOn:1})}function UO(t){const s=Hs(t),r=s.getFullYear(),n=Yo(t,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const a=X0(n),i=Yo(t,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const o=X0(i);return s.getTime()>=a.getTime()?r+1:s.getTime()>=o.getTime()?r:r-1}function Tw(t){const s=Hs(t);return s.setHours(0,0,0,0),s}function J0(t){const s=Hs(t),r=new Date(Date.UTC(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()));return r.setUTCFullYear(s.getFullYear()),+t-+r}function zO(t,s){const r=Tw(t),n=Tw(s),a=+r-J0(r),i=+n-J0(n);return Math.round((a-i)/hre)}function pre(t){const s=UO(t),r=Yo(t,0);return r.setFullYear(s,0,4),r.setHours(0,0,0,0),X0(r)}function qO(t,s){return mre(t,s*12)}function Wy(t,s){const r=Hs(t),n=Hs(s),a=r.getTime()-n.getTime();return a<0?-1:a>0?1:a}function xre(t){return Yo(t,Date.now())}function gre(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function vre(t){if(!gre(t)&&typeof t!="number")return!1;const s=Hs(t);return!isNaN(Number(s))}function yre(t,s){const r=Hs(t),n=Hs(s),a=r.getFullYear()-n.getFullYear(),i=r.getMonth()-n.getMonth();return a*12+i}function VO(t,s){const r=Hs(t),n=Hs(s),a=Jk(r,n),i=Math.abs(zO(r,n));r.setDate(r.getDate()-a*i);const o=+(Jk(r,n)===-a),l=a*(i-o);return l===0?0:l}function Jk(t,s){const r=t.getFullYear()-s.getFullYear()||t.getMonth()-s.getMonth()||t.getDate()-s.getDate()||t.getHours()-s.getHours()||t.getMinutes()-s.getMinutes()||t.getSeconds()-s.getSeconds()||t.getMilliseconds()-s.getMilliseconds();return r<0?-1:r>0?1:r}function jre(t){return s=>{const n=(t?Math[t]:Math.trunc)(s);return n===0?0:n}}function bre(t,s){return+Hs(t)-+Hs(s)}function Nre(t){const s=Hs(t);return s.setHours(23,59,59,999),s}function wre(t){const s=Hs(t),r=s.getMonth();return s.setFullYear(s.getFullYear(),r+1,0),s.setHours(23,59,59,999),s}function _re(t){const s=Hs(t);return+Nre(s)==+wre(s)}function Sre(t,s){const r=Hs(t),n=Hs(s),a=Wy(r,n),i=Math.abs(yre(r,n));let o;if(i<1)o=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-a*i);let l=Wy(r,n)===-a;_re(Hs(t))&&i===1&&Wy(t,n)===1&&(l=!1),o=a*(i-Number(l))}return o===0?0:o}function Cre(t,s,r){const n=bre(t,s)/1e3;return jre(r==null?void 0:r.roundingMethod)(n)}function kre(t){const s=Hs(t),r=Yo(t,0);return r.setFullYear(s.getFullYear(),0,1),r.setHours(0,0,0,0),r}const Are={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Pre=(t,s,r)=>{let n;const a=Are[t];return typeof a=="string"?n=a:s===1?n=a.one:n=a.other.replace("{{count}}",s.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function o2(t){return(s={})=>{const r=s.width?String(s.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const Ere={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Tre={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Mre={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Lre={date:o2({formats:Ere,defaultWidth:"full"}),time:o2({formats:Tre,defaultWidth:"full"}),dateTime:o2({formats:Mre,defaultWidth:"full"})},Dre={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Ire=(t,s,r,n)=>Dre[t];function Rp(t){return(s,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let a;if(n==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,l=r!=null&&r.width?String(r.width):o;a=t.formattingValues[l]||t.formattingValues[o]}else{const o=t.defaultWidth,l=r!=null&&r.width?String(r.width):t.defaultWidth;a=t.values[l]||t.values[o]}const i=t.argumentCallback?t.argumentCallback(s):s;return a[i]}}const Rre={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Fre={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Ore={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},$re={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Bre={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Ure={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},zre=(t,s)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},qre={ordinalNumber:zre,era:Rp({values:Rre,defaultWidth:"wide"}),quarter:Rp({values:Fre,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Rp({values:Ore,defaultWidth:"wide"}),day:Rp({values:$re,defaultWidth:"wide"}),dayPeriod:Rp({values:Bre,defaultWidth:"wide",formattingValues:Ure,defaultFormattingWidth:"wide"})};function Fp(t){return(s,r={})=>{const n=r.width,a=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],i=s.match(a);if(!i)return null;const o=i[0],l=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?Hre(l,m=>m.test(o)):Vre(l,m=>m.test(o));let d;d=t.valueCallback?t.valueCallback(c):c,d=r.valueCallback?r.valueCallback(d):d;const u=s.slice(o.length);return{value:d,rest:u}}}function Vre(t,s){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&s(t[r]))return r}function Hre(t,s){for(let r=0;r<t.length;r++)if(s(t[r]))return r}function Wre(t){return(s,r={})=>{const n=s.match(t.matchPattern);if(!n)return null;const a=n[0],i=s.match(t.parsePattern);if(!i)return null;let o=t.valueCallback?t.valueCallback(i[0]):i[0];o=r.valueCallback?r.valueCallback(o):o;const l=s.slice(a.length);return{value:o,rest:l}}}const Kre=/^(\d+)(th|st|nd|rd)?/i,Yre=/\d+/i,Gre={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Qre={any:[/^b/i,/^(a|c)/i]},Zre={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Xre={any:[/1/i,/2/i,/3/i,/4/i]},Jre={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},ene={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},tne={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},sne={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},rne={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},nne={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},ane={ordinalNumber:Wre({matchPattern:Kre,parsePattern:Yre,valueCallback:t=>parseInt(t,10)}),era:Fp({matchPatterns:Gre,defaultMatchWidth:"wide",parsePatterns:Qre,defaultParseWidth:"any"}),quarter:Fp({matchPatterns:Zre,defaultMatchWidth:"wide",parsePatterns:Xre,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Fp({matchPatterns:Jre,defaultMatchWidth:"wide",parsePatterns:ene,defaultParseWidth:"any"}),day:Fp({matchPatterns:tne,defaultMatchWidth:"wide",parsePatterns:sne,defaultParseWidth:"any"}),dayPeriod:Fp({matchPatterns:rne,defaultMatchWidth:"any",parsePatterns:nne,defaultParseWidth:"any"})},HO={code:"en-US",formatDistance:Pre,formatLong:Lre,formatRelative:Ire,localize:qre,match:ane,options:{weekStartsOn:0,firstWeekContainsDate:1}};function ine(t){const s=Hs(t);return zO(s,kre(s))+1}function one(t){const s=Hs(t),r=+X0(s)-+pre(s);return Math.round(r/OO)+1}function WO(t,s){var u,m,f,h;const r=Hs(t),n=r.getFullYear(),a=Of(),i=(s==null?void 0:s.firstWeekContainsDate)??((m=(u=s==null?void 0:s.locale)==null?void 0:u.options)==null?void 0:m.firstWeekContainsDate)??a.firstWeekContainsDate??((h=(f=a.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)??1,o=Yo(t,0);o.setFullYear(n+1,0,i),o.setHours(0,0,0,0);const l=ig(o,s),c=Yo(t,0);c.setFullYear(n,0,i),c.setHours(0,0,0,0);const d=ig(c,s);return r.getTime()>=l.getTime()?n+1:r.getTime()>=d.getTime()?n:n-1}function lne(t,s){var l,c,d,u;const r=Of(),n=(s==null?void 0:s.firstWeekContainsDate)??((c=(l=s==null?void 0:s.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((u=(d=r.locale)==null?void 0:d.options)==null?void 0:u.firstWeekContainsDate)??1,a=WO(t,s),i=Yo(t,0);return i.setFullYear(a,0,n),i.setHours(0,0,0,0),ig(i,s)}function cne(t,s){const r=Hs(t),n=+ig(r,s)-+lne(r,s);return Math.round(n/OO)+1}function ur(t,s){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(s,"0");return r+n}const Gc={y(t,s){const r=t.getFullYear(),n=r>0?r:1-r;return ur(s==="yy"?n%100:n,s.length)},M(t,s){const r=t.getMonth();return s==="M"?String(r+1):ur(r+1,2)},d(t,s){return ur(t.getDate(),s.length)},a(t,s){const r=t.getHours()/12>=1?"pm":"am";switch(s){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,s){return ur(t.getHours()%12||12,s.length)},H(t,s){return ur(t.getHours(),s.length)},m(t,s){return ur(t.getMinutes(),s.length)},s(t,s){return ur(t.getSeconds(),s.length)},S(t,s){const r=s.length,n=t.getMilliseconds(),a=Math.trunc(n*Math.pow(10,r-3));return ur(a,s.length)}},Wm={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},e6={G:function(t,s,r){const n=t.getFullYear()>0?1:0;switch(s){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,s,r){if(s==="yo"){const n=t.getFullYear(),a=n>0?n:1-n;return r.ordinalNumber(a,{unit:"year"})}return Gc.y(t,s)},Y:function(t,s,r,n){const a=WO(t,n),i=a>0?a:1-a;if(s==="YY"){const o=i%100;return ur(o,2)}return s==="Yo"?r.ordinalNumber(i,{unit:"year"}):ur(i,s.length)},R:function(t,s){const r=UO(t);return ur(r,s.length)},u:function(t,s){const r=t.getFullYear();return ur(r,s.length)},Q:function(t,s,r){const n=Math.ceil((t.getMonth()+1)/3);switch(s){case"Q":return String(n);case"QQ":return ur(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,s,r){const n=Math.ceil((t.getMonth()+1)/3);switch(s){case"q":return String(n);case"qq":return ur(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,s,r){const n=t.getMonth();switch(s){case"M":case"MM":return Gc.M(t,s);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,s,r){const n=t.getMonth();switch(s){case"L":return String(n+1);case"LL":return ur(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,s,r,n){const a=cne(t,n);return s==="wo"?r.ordinalNumber(a,{unit:"week"}):ur(a,s.length)},I:function(t,s,r){const n=one(t);return s==="Io"?r.ordinalNumber(n,{unit:"week"}):ur(n,s.length)},d:function(t,s,r){return s==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):Gc.d(t,s)},D:function(t,s,r){const n=ine(t);return s==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):ur(n,s.length)},E:function(t,s,r){const n=t.getDay();switch(s){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,s,r,n){const a=t.getDay(),i=(a-n.weekStartsOn+8)%7||7;switch(s){case"e":return String(i);case"ee":return ur(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(t,s,r,n){const a=t.getDay(),i=(a-n.weekStartsOn+8)%7||7;switch(s){case"c":return String(i);case"cc":return ur(i,s.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(t,s,r){const n=t.getDay(),a=n===0?7:n;switch(s){case"i":return String(a);case"ii":return ur(a,s.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,s,r){const a=t.getHours()/12>=1?"pm":"am";switch(s){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(t,s,r){const n=t.getHours();let a;switch(n===12?a=Wm.noon:n===0?a=Wm.midnight:a=n/12>=1?"pm":"am",s){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(t,s,r){const n=t.getHours();let a;switch(n>=17?a=Wm.evening:n>=12?a=Wm.afternoon:n>=4?a=Wm.morning:a=Wm.night,s){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(t,s,r){if(s==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return Gc.h(t,s)},H:function(t,s,r){return s==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):Gc.H(t,s)},K:function(t,s,r){const n=t.getHours()%12;return s==="Ko"?r.ordinalNumber(n,{unit:"hour"}):ur(n,s.length)},k:function(t,s,r){let n=t.getHours();return n===0&&(n=24),s==="ko"?r.ordinalNumber(n,{unit:"hour"}):ur(n,s.length)},m:function(t,s,r){return s==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):Gc.m(t,s)},s:function(t,s,r){return s==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):Gc.s(t,s)},S:function(t,s){return Gc.S(t,s)},X:function(t,s,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(s){case"X":return s6(n);case"XXXX":case"XX":return Tu(n);case"XXXXX":case"XXX":default:return Tu(n,":")}},x:function(t,s,r){const n=t.getTimezoneOffset();switch(s){case"x":return s6(n);case"xxxx":case"xx":return Tu(n);case"xxxxx":case"xxx":default:return Tu(n,":")}},O:function(t,s,r){const n=t.getTimezoneOffset();switch(s){case"O":case"OO":case"OOO":return"GMT"+t6(n,":");case"OOOO":default:return"GMT"+Tu(n,":")}},z:function(t,s,r){const n=t.getTimezoneOffset();switch(s){case"z":case"zz":case"zzz":return"GMT"+t6(n,":");case"zzzz":default:return"GMT"+Tu(n,":")}},t:function(t,s,r){const n=Math.trunc(t.getTime()/1e3);return ur(n,s.length)},T:function(t,s,r){const n=t.getTime();return ur(n,s.length)}};function t6(t,s=""){const r=t>0?"-":"+",n=Math.abs(t),a=Math.trunc(n/60),i=n%60;return i===0?r+String(a):r+String(a)+s+ur(i,2)}function s6(t,s){return t%60===0?(t>0?"-":"+")+ur(Math.abs(t)/60,2):Tu(t,s)}function Tu(t,s=""){const r=t>0?"-":"+",n=Math.abs(t),a=ur(Math.trunc(n/60),2),i=ur(n%60,2);return r+a+s+i}const r6=(t,s)=>{switch(t){case"P":return s.date({width:"short"});case"PP":return s.date({width:"medium"});case"PPP":return s.date({width:"long"});case"PPPP":default:return s.date({width:"full"})}},KO=(t,s)=>{switch(t){case"p":return s.time({width:"short"});case"pp":return s.time({width:"medium"});case"ppp":return s.time({width:"long"});case"pppp":default:return s.time({width:"full"})}},dne=(t,s)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],a=r[2];if(!a)return r6(t,s);let i;switch(n){case"P":i=s.dateTime({width:"short"});break;case"PP":i=s.dateTime({width:"medium"});break;case"PPP":i=s.dateTime({width:"long"});break;case"PPPP":default:i=s.dateTime({width:"full"});break}return i.replace("{{date}}",r6(n,s)).replace("{{time}}",KO(a,s))},une={p:KO,P:dne},mne=/^D+$/,hne=/^Y+$/,fne=["D","DD","YY","YYYY"];function pne(t){return mne.test(t)}function xne(t){return hne.test(t)}function gne(t,s,r){const n=vne(t,s,r);if(console.warn(n),fne.includes(t))throw new RangeError(n)}function vne(t,s,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${s}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const yne=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,jne=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,bne=/^'([^]*?)'?$/,Nne=/''/g,wne=/[a-zA-Z]/;function Pr(t,s,r){var u,m,f,h,p,g,y,v;const n=Of(),a=(r==null?void 0:r.locale)??n.locale??HO,i=(r==null?void 0:r.firstWeekContainsDate)??((m=(u=r==null?void 0:r.locale)==null?void 0:u.options)==null?void 0:m.firstWeekContainsDate)??n.firstWeekContainsDate??((h=(f=n.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)??1,o=(r==null?void 0:r.weekStartsOn)??((g=(p=r==null?void 0:r.locale)==null?void 0:p.options)==null?void 0:g.weekStartsOn)??n.weekStartsOn??((v=(y=n.locale)==null?void 0:y.options)==null?void 0:v.weekStartsOn)??0,l=Hs(t);if(!vre(l))throw new RangeError("Invalid time value");let c=s.match(jne).map(j=>{const w=j[0];if(w==="p"||w==="P"){const _=une[w];return _(j,a.formatLong)}return j}).join("").match(yne).map(j=>{if(j==="''")return{isToken:!1,value:"'"};const w=j[0];if(w==="'")return{isToken:!1,value:_ne(j)};if(e6[w])return{isToken:!0,value:j};if(w.match(wne))throw new RangeError("Format string contains an unescaped latin alphabet character `"+w+"`");return{isToken:!1,value:j}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const d={firstWeekContainsDate:i,weekStartsOn:o,locale:a};return c.map(j=>{if(!j.isToken)return j.value;const w=j.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&xne(w)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&pne(w))&&gne(w,s,String(t));const _=e6[w[0]];return _(l,w,a.localize,d)}).join("")}function _ne(t){const s=t.match(bne);return s?s[1].replace(Nne,"'"):t}function Sne(t,s,r){const n=Of(),a=(r==null?void 0:r.locale)??n.locale??HO,i=2520,o=Wy(t,s);if(isNaN(o))throw new RangeError("Invalid time value");const l=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:o});let c,d;o>0?(c=Hs(s),d=Hs(t)):(c=Hs(t),d=Hs(s));const u=Cre(d,c),m=(J0(d)-J0(c))/1e3,f=Math.round((u-m)/60);let h;if(f<2)return r!=null&&r.includeSeconds?u<5?a.formatDistance("lessThanXSeconds",5,l):u<10?a.formatDistance("lessThanXSeconds",10,l):u<20?a.formatDistance("lessThanXSeconds",20,l):u<40?a.formatDistance("halfAMinute",0,l):u<60?a.formatDistance("lessThanXMinutes",1,l):a.formatDistance("xMinutes",1,l):f===0?a.formatDistance("lessThanXMinutes",1,l):a.formatDistance("xMinutes",f,l);if(f<45)return a.formatDistance("xMinutes",f,l);if(f<90)return a.formatDistance("aboutXHours",1,l);if(f<Xk){const p=Math.round(f/60);return a.formatDistance("aboutXHours",p,l)}else{if(f<i)return a.formatDistance("xDays",1,l);if(f<ry){const p=Math.round(f/Xk);return a.formatDistance("xDays",p,l)}else if(f<ry*2)return h=Math.round(f/ry),a.formatDistance("aboutXMonths",h,l)}if(h=Sre(d,c),h<12){const p=Math.round(f/ry);return a.formatDistance("xMonths",p,l)}else{const p=h%12,g=Math.trunc(h/12);return p<3?a.formatDistance("aboutXYears",g,l):p<9?a.formatDistance("overXYears",g,l):a.formatDistance("almostXYears",g+1,l)}}function Ph(t,s){return Sne(t,xre(t),s)}function Cne(){return Object.assign({},Of())}function ux(t,s){const r=Hs(t),n=Hs(s);return+r<+n}function ny(t){return+Hs(t)>Date.now()}function kne(t){return+Hs(t)<Date.now()}function e1(t,s){const n=Tne(t);let a;if(n.date){const c=Mne(n.date,2);a=Lne(c.restDateString,c.year)}if(!a||isNaN(a.getTime()))return new Date(NaN);const i=a.getTime();let o=0,l;if(n.time&&(o=Dne(n.time),isNaN(o)))return new Date(NaN);if(n.timezone){if(l=Ine(n.timezone),isNaN(l))return new Date(NaN)}else{const c=new Date(i+o),d=new Date(0);return d.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),d.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),d}return new Date(i+o+l)}const ay={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Ane=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Pne=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Ene=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Tne(t){const s={},r=t.split(ay.dateTimeDelimiter);let n;if(r.length>2)return s;if(/:/.test(r[0])?n=r[0]:(s.date=r[0],n=r[1],ay.timeZoneDelimiter.test(s.date)&&(s.date=t.split(ay.timeZoneDelimiter)[0],n=t.substr(s.date.length,t.length))),n){const a=ay.timezone.exec(n);a?(s.time=n.replace(a[1],""),s.timezone=a[1]):s.time=n}return s}function Mne(t,s){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+s)+"})|(\\d{2}|[+-]\\d{"+(2+s)+"})$)"),n=t.match(r);if(!n)return{year:NaN,restDateString:""};const a=n[1]?parseInt(n[1]):null,i=n[2]?parseInt(n[2]):null;return{year:i===null?a:i*100,restDateString:t.slice((n[1]||n[2]).length)}}function Lne(t,s){if(s===null)return new Date(NaN);const r=t.match(Ane);if(!r)return new Date(NaN);const n=!!r[4],a=Op(r[1]),i=Op(r[2])-1,o=Op(r[3]),l=Op(r[4]),c=Op(r[5])-1;if(n)return Bne(s,l,c)?Rne(s,l,c):new Date(NaN);{const d=new Date(0);return!One(s,i,o)||!$ne(s,a)?new Date(NaN):(d.setUTCFullYear(s,i,Math.max(a,o)),d)}}function Op(t){return t?parseInt(t):1}function Dne(t){const s=t.match(Pne);if(!s)return NaN;const r=l2(s[1]),n=l2(s[2]),a=l2(s[3]);return Une(r,n,a)?r*BO+n*$O+a*1e3:NaN}function l2(t){return t&&parseFloat(t.replace(",","."))||0}function Ine(t){if(t==="Z")return 0;const s=t.match(Ene);if(!s)return 0;const r=s[1]==="+"?-1:1,n=parseInt(s[2]),a=s[3]&&parseInt(s[3])||0;return zne(n,a)?r*(n*BO+a*$O):NaN}function Rne(t,s,r){const n=new Date(0);n.setUTCFullYear(t,0,4);const a=n.getUTCDay()||7,i=(s-1)*7+r+1-a;return n.setUTCDate(n.getUTCDate()+i),n}const Fne=[31,null,31,30,31,30,31,31,30,31,30,31];function YO(t){return t%400===0||t%4===0&&t%100!==0}function One(t,s,r){return s>=0&&s<=11&&r>=1&&r<=(Fne[s]||(YO(t)?29:28))}function $ne(t,s){return s>=1&&s<=(YO(t)?366:365)}function Bne(t,s,r){return s>=1&&s<=53&&r>=0&&r<=6}function Une(t,s,r){return t===24?s===0&&r===0:r>=0&&r<60&&s>=0&&s<60&&t>=0&&t<25}function zne(t,s){return s>=0&&s<=59}function qne({memorialId:t,isOwner:s=!1}){var ke,G;const[r,n]=N.useState(null),[a,i]=N.useState(0),[o,l]=N.useState(""),[c,d]=N.useState(""),[u,m]=N.useState(""),[f,h]=N.useState(null),p=N.useRef(!1),{toast:g}=Ht(),{user:y}=fo();N.useEffect(()=>{console.log("MemorialGallery selectedMemory changed:",r?r.id:"null")},[r]);const{data:v=[],isLoading:j}=Xe({queryKey:["/api/memorials",t,"memories"]}),w=v.filter(I=>I.isApproved||s);N.useEffect(()=>{console.log("MemorialGallery memories loaded:",v.length,"approved:",w.length)},[v.length,w.length]);const{data:_=[]}=Xe({queryKey:["/api/memories",r==null?void 0:r.id,"comments"],enabled:!!r}),{data:P=[]}=Xe({queryKey:["/api/memories",r==null?void 0:r.id,"condolences"],enabled:!!r}),{data:E}=Xe({queryKey:["/api/memories",r==null?void 0:r.id,"reactions","count"],enabled:!!r}),L=(E==null?void 0:E.count)||0,{data:T}=Xe({queryKey:["/api/memories",r==null?void 0:r.id,"reactions","user"],enabled:!!r,queryFn:async()=>{const I=new URLSearchParams;return y!=null&&y.id?I.append("userId",y.id):y!=null&&y.email&&I.append("userEmail",y.email),await(await fetch(`/api/memories/${r==null?void 0:r.id}/reactions/user?${I}`)).json()}}),M=yt({mutationFn:async()=>{if(!r)return;const I=y?`${y.firstName||""} ${y.lastName||""}`.trim()||y.email||"User":c,Z=(y==null?void 0:y.email)||u||"";if(!I||!o)throw new Error("Name and comment are required");return await(await pt("POST",`/api/memories/${r.id}/comments`,{authorName:I,authorEmail:Z,comment:o,userId:y==null?void 0:y.id})).json()},onSuccess:()=>{xt.invalidateQueries({queryKey:["/api/memories",r==null?void 0:r.id,"comments"]}),l(""),d(""),m(""),g({title:"Comment Added",description:"Your comment has been posted."})},onError:I=>{g({variant:"destructive",title:"Error",description:I.message||"Failed to post comment."})}}),F=yt({mutationFn:async()=>{if(!r)return;const I=y?`${y.firstName||""} ${y.lastName||""}`.trim()||y.email||"User":c,Z=(y==null?void 0:y.email)||u||"";if(!I)throw new Error("Name is required");return await(await pt("POST",`/api/memories/${r.id}/condolences`,{authorName:I,authorEmail:Z,userId:y==null?void 0:y.id})).json()},onSuccess:()=>{xt.invalidateQueries({queryKey:["/api/memories",r==null?void 0:r.id,"condolences"]}),d(""),m(""),g({title:"Condolence Sent",description:"Your condolence has been added."})},onError:I=>{g({variant:"destructive",title:"Error",description:I.message||"Failed to send condolence."})}}),k=f!==null?f:(T==null?void 0:T.hasReacted)||!1,D=yt({mutationFn:async({shouldReact:I})=>{if(!r)return;const Z=y?`${y.firstName||""} ${y.lastName||""}`.trim()||y.email||"User":"Guest",J=(y==null?void 0:y.email)||"";I?await pt("POST",`/api/memories/${r.id}/reactions`,{userName:Z,userEmail:J,userId:y==null?void 0:y.id,reactionType:"heart"}):await pt("DELETE",`/api/memories/${r.id}/reactions`,{userId:y==null?void 0:y.id,userEmail:J})},onSuccess:()=>{p.current=!1,h(null),xt.invalidateQueries({queryKey:["/api/memories",r==null?void 0:r.id,"reactions"]}),xt.invalidateQueries({queryKey:["/api/memories",r==null?void 0:r.id,"reactions","count"]}),xt.invalidateQueries({queryKey:["/api/memories",r==null?void 0:r.id,"reactions","user"]})},onError:I=>{p.current=!1,h(null),g({variant:"destructive",title:"Error",description:I.message||"Failed to update reaction."})}}),z=I=>I?/\.(mp4|webm|ogg|mov)$/i.test(I)||I.includes("youtube.com")||I.includes("vimeo.com"):!1,W=()=>{M.mutate()},ue=()=>{F.mutate()},ae=()=>{if(p.current)return;p.current=!0;const I=!k;h(I),D.mutate({shouldReact:I})},Ne=async()=>{if(!r)return;const I=`${window.location.origin}${window.location.pathname}?memoryId=${r.id}`,Z=`Check out this memory from ${r.authorName}`;if(navigator.share)try{await navigator.share({title:"Memorial Memory",text:Z,url:I}),g({title:"Shared",description:"Memory shared successfully."})}catch{}else navigator.clipboard.writeText(I),g({title:"Link Copied",description:"Memory link copied to clipboard."})},K=async()=>{if(!(!r||z(r.mediaUrl)))try{const Z=await(await fetch(r.mediaUrl)).blob(),J=window.URL.createObjectURL(Z),se=document.createElement("a");se.href=J,se.download=`memory-${r.id}.jpg`,document.body.appendChild(se),se.click(),window.URL.revokeObjectURL(J),document.body.removeChild(se),g({title:"Downloaded",description:"Photo downloaded successfully."})}catch{g({variant:"destructive",title:"Error",description:"Failed to download photo."})}},Q=I=>{const Z=w.findIndex(se=>se.id===(r==null?void 0:r.id));let J=Z;I==="prev"&&Z>0?J=Z-1:I==="next"&&Z<w.length-1&&(J=Z+1),J!==Z&&(n(w[J]),i(J))};return N.useEffect(()=>{if(!r)return;const I=Z=>{Z.key==="ArrowLeft"?Q("prev"):Z.key==="ArrowRight"?Q("next"):Z.key==="Escape"&&n(null)};return window.addEventListener("keydown",I),()=>window.removeEventListener("keydown",I)},[r,w]),j?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(tn,{className:"w-8 h-8 animate-spin text-primary"})}):w.length===0?e.jsxs($,{className:"p-12 text-center",children:[e.jsx(vi,{className:"w-16 h-16 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Memories Yet"}),e.jsx("p",{className:"text-muted-foreground",children:"Be the first to share a photo or video memory"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4","data-testid":"container-gallery",children:w.map(I=>e.jsx("button",{className:"group relative overflow-hidden cursor-pointer bg-card rounded-lg border border-border hover-elevate active-elevate-2 transition-all text-left",onClick:Z=>{Z.preventDefault(),Z.stopPropagation(),console.log("Memory card clicked:",I.id,I.caption),n(I)},"data-testid":`card-memory-${I.id}`,type:"button",children:e.jsxs("div",{className:"aspect-square relative",children:[z(I.mediaUrl)?e.jsxs("div",{className:"absolute inset-0 bg-black flex items-center justify-center",children:[e.jsx(ta,{className:"w-12 h-12 text-white"}),e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx(ze,{variant:"secondary",className:"bg-black/70 text-white",children:"Video"})})]}):e.jsx("img",{src:I.mediaUrl,alt:I.caption,className:"w-full h-full object-cover rounded-t-lg","data-testid":`img-memory-${I.id}`,loading:"lazy",onError:Z=>{console.error("Image failed to load:",I.mediaUrl),Z.currentTarget.src="https://via.placeholder.com/400x400?text=Image+Not+Found"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none",children:e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-3 text-white",children:[e.jsx("p",{className:"text-sm font-medium line-clamp-2","data-testid":`text-memory-caption-${I.id}`,children:I.caption}),e.jsx("p",{className:"text-xs text-white/80 mt-1",children:I.authorName})]})}),!I.isApproved&&e.jsx("div",{className:"absolute top-2 left-2 pointer-events-none",children:e.jsx(ze,{variant:"outline",className:"bg-amber-500 text-white border-amber-600",children:"Pending"})})]})},I.id))}),e.jsx(Os,{open:!!r,onOpenChange:I=>{console.log("Dialog onOpenChange called:",I),I||n(null)},children:e.jsx(Ds,{className:"max-w-5xl max-h-[90vh] overflow-y-auto","data-testid":"dialog-memory-lightbox",children:r&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(Is,{children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Da,{children:e.jsx(Ia,{children:r.authorName.charAt(0)})}),e.jsxs("div",{children:[e.jsx(Rs,{"data-testid":"text-memory-author",children:r.authorName}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.jsx(ds,{className:"w-3 h-3 inline mr-1"}),Ph(new Date(r.createdAt),{addSuffix:!0})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(O,{variant:"ghost",size:"sm",onClick:ae,disabled:D.isPending,className:"gap-2","data-testid":"button-toggle-reaction",children:[e.jsx(_t,{className:`w-5 h-5 ${k?"fill-red-500 text-red-500":""}`}),e.jsx("span",{className:"text-sm font-medium",children:L})]}),e.jsx(O,{variant:"ghost",size:"sm",onClick:Ne,"data-testid":"button-share-memory",children:e.jsx(so,{className:"w-5 h-5"})}),!z(r.mediaUrl)&&e.jsx(O,{variant:"ghost",size:"sm",onClick:K,"data-testid":"button-download-photo",children:e.jsx(Al,{className:"w-5 h-5"})})]})]})}),e.jsxs("div",{className:"relative rounded-lg overflow-hidden bg-black",children:[z(r.mediaUrl)?e.jsx("video",{src:r.mediaUrl,controls:!0,className:"w-full max-h-[60vh]","data-testid":"video-memory"}):e.jsx("img",{src:r.mediaUrl,alt:r.caption,className:"w-full max-h-[60vh] object-contain mx-auto bg-black","data-testid":"img-memory-full",onError:I=>{console.error("Full image failed to load:",r.mediaUrl),I.currentTarget.src="https://via.placeholder.com/800x600?text=Image+Not+Found"}}),w.findIndex(I=>I.id===r.id)>0&&e.jsx(O,{variant:"ghost",size:"icon",className:"absolute left-2 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white",onClick:()=>Q("prev"),"data-testid":"button-prev-memory",children:e.jsx(zI,{className:"w-6 h-6"})}),w.findIndex(I=>I.id===r.id)<w.length-1&&e.jsx(O,{variant:"ghost",size:"icon",className:"absolute right-2 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white",onClick:()=>Q("next"),"data-testid":"button-next-memory",children:e.jsx(Fd,{className:"w-6 h-6"})})]}),e.jsx("div",{children:e.jsx("p",{className:"text-foreground leading-relaxed","data-testid":"text-memory-caption",children:r.caption})}),e.jsx(ls,{}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(_t,{className:"w-5 h-5 text-primary"}),"Condolences (",P.length,")"]}),e.jsxs(O,{size:"sm",variant:"outline",onClick:ue,disabled:F.isPending||!y&&!c,"data-testid":"button-send-condolence",children:[e.jsx(_t,{className:"w-4 h-4 mr-2"}),"Send Condolence"]})]}),P.length>0?e.jsx("div",{className:"space-y-3 max-h-32 overflow-y-auto",children:P.map(I=>e.jsxs("div",{className:"flex items-start gap-2 text-sm","data-testid":`condolence-${I.id}`,children:[e.jsx(_t,{className:"w-4 h-4 text-primary mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:I.authorName}),e.jsx("span",{className:"text-muted-foreground text-xs ml-2",children:Ph(new Date(I.createdAt),{addSuffix:!0})})]})]},I.id))}):e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Be the first to send a condolence"})]}),e.jsx(ls,{}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2 mb-4",children:[e.jsx(Pl,{className:"w-5 h-5 text-primary"}),"Comments (",_.length,")"]}),_.length>0&&e.jsx("div",{className:"space-y-4 mb-6 max-h-64 overflow-y-auto",children:_.map(I=>e.jsxs("div",{className:"flex items-start gap-3","data-testid":`comment-${I.id}`,children:[e.jsx(Da,{className:"w-8 h-8",children:e.jsx(Ia,{className:"text-xs",children:I.authorName.charAt(0)})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"bg-muted rounded-lg p-3",children:[e.jsx("p",{className:"font-medium text-sm",children:I.authorName}),e.jsx("p",{className:"text-sm mt-1",children:I.comment})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1 ml-3",children:Ph(new Date(I.createdAt),{addSuffix:!0})})]})]},I.id))}),e.jsxs("div",{className:"space-y-3",children:[!y&&e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(De,{htmlFor:"guest-name",children:"Your Name"}),e.jsx(re,{id:"guest-name",value:c,onChange:I=>d(I.target.value),placeholder:"John Doe","data-testid":"input-guest-name"})]}),e.jsxs("div",{children:[e.jsx(De,{htmlFor:"guest-email",children:"Email (optional)"}),e.jsx(re,{id:"guest-email",type:"email",value:u,onChange:I=>m(I.target.value),placeholder:"john@example.com","data-testid":"input-guest-email"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Da,{className:"w-8 h-8",children:e.jsx(Ia,{className:"text-xs",children:y?((ke=y.firstName)==null?void 0:ke.charAt(0))||((G=y.email)==null?void 0:G.charAt(0))||"U":c.charAt(0)||"?"})}),e.jsx(Gt,{value:o,onChange:I=>l(I.target.value),placeholder:"Write a comment...",className:"flex-1 min-h-[80px]","data-testid":"textarea-comment"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(O,{onClick:W,disabled:!o||M.isPending||!y&&!c,"data-testid":"button-submit-comment",children:M.isPending?e.jsxs(e.Fragment,{children:[e.jsx(tn,{className:"w-4 h-4 mr-2 animate-spin"}),"Posting..."]}):e.jsxs(e.Fragment,{children:[e.jsx($x,{className:"w-4 h-4 mr-2"}),"Post Comment"]})})})]})]})]})})})]})}function Vne({memorialId:t,currentUser:s,onLoginRequired:r}){const{toast:n}=Ht(),[a,i]=N.useState(""),[o,l]=N.useState(""),[c,d]=N.useState(""),[u,m]=N.useState(""),{data:f=[]}=Xe({queryKey:["/api/memorials",t,"likes"]}),{data:h}=Xe({queryKey:["/api/memorials",t,"likes","count"]}),{data:p=[]}=Xe({queryKey:["/api/memorials",t,"comments"]}),{data:g=[]}=Xe({queryKey:["/api/memorials",t,"condolences"]}),y=s?f.some(M=>M.userId===s.id||M.userEmail===s.email):!1,v=yt({mutationFn:async()=>{if(!s)throw r(),new Error("Login required");const M=s.firstName&&s.lastName?`${s.firstName} ${s.lastName}`:s.email;return pt("POST",`/api/memorials/${t}/likes`,{userId:s.id,userEmail:s.email,userName:M})},onSuccess:()=>{xt.invalidateQueries({queryKey:["/api/memorials",t,"likes"]}),xt.invalidateQueries({queryKey:["/api/memorials",t,"likes","count"]}),n({title:"Memorial liked",description:"Your like has been added."})},onError:M=>{M.message!=="Login required"&&n({title:"Error",description:"Failed to like memorial.",variant:"destructive"})}}),j=yt({mutationFn:async()=>{if(!s)throw r(),new Error("Login required");return pt("DELETE",`/api/memorials/${t}/likes`,{userId:s.id,userEmail:s.email})},onSuccess:()=>{xt.invalidateQueries({queryKey:["/api/memorials",t,"likes"]}),xt.invalidateQueries({queryKey:["/api/memorials",t,"likes","count"]}),n({title:"Like removed",description:"Your like has been removed."})},onError:M=>{M.message!=="Login required"&&n({title:"Error",description:"Failed to remove like.",variant:"destructive"})}}),w=yt({mutationFn:async M=>{if(!s)throw r(),new Error("Login required");const F=s.firstName&&s.lastName?`${s.firstName} ${s.lastName}`:s.email;return pt("POST",`/api/memorials/${t}/comments`,{userId:s.id,authorEmail:s.email,authorName:F,comment:M})},onSuccess:()=>{xt.invalidateQueries({queryKey:["/api/memorials",t,"comments"]}),i(""),n({title:"Comment added",description:"Your comment has been posted."})},onError:M=>{if(i(""),M.message!=="Login required"){const F=M.message||"Failed to post comment.";n({title:"Error",description:F,variant:"destructive"})}}}),_=yt({mutationFn:async M=>pt("POST",`/api/memorials/${t}/condolences`,M),onSuccess:()=>{xt.invalidateQueries({queryKey:["/api/memorials",t,"condolences"]}),l(""),d(""),m(""),n({title:"Condolence sent",description:"Your message of sympathy has been shared."})},onError:M=>{const F=M.message||"Failed to send condolence.";n({title:"Error",description:F,variant:"destructive"})}}),P=()=>{y?j.mutate():v.mutate()},E=()=>{a.trim()&&w.mutate(a)},L=()=>{if(!o.trim()||!c.trim()){n({title:"Missing information",description:"Please provide your name and message.",variant:"destructive"});return}_.mutate({authorName:c,authorEmail:u||void 0,message:o})},T=M=>M?M.split(" ").map(F=>F[0]).join("").toUpperCase().slice(0,2):"AN";return e.jsxs("div",{className:"space-y-4","data-testid":"memorial-engagement",children:[e.jsx($,{className:"bg-card/40 backdrop-blur-sm border-white/10",children:e.jsx(le,{className:"gap-2",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(O,{variant:y?"default":"outline",size:"sm",onClick:P,disabled:v.isPending||j.isPending,className:"gap-2","data-testid":"button-like-memorial",children:[e.jsx(_t,{className:`h-4 w-4 ${y?"fill-current":""}`}),e.jsx("span",{children:(h==null?void 0:h.count)||0})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(Pl,{className:"h-4 w-4"}),e.jsxs("span",{children:[p.length," comments"]})]})]})})}),e.jsxs(ba,{defaultValue:"comments",className:"w-full",children:[e.jsxs(ra,{className:"grid w-full grid-cols-2","data-testid":"engagement-tabs",children:[e.jsxs(qt,{value:"comments","data-testid":"tab-comments",children:["Comments (",p.length,")"]}),e.jsxs(qt,{value:"condolences","data-testid":"tab-condolences",children:["Condolences (",g.length,")"]})]}),e.jsxs(Vt,{value:"comments",className:"space-y-4",children:[e.jsx($,{className:"bg-card/40 backdrop-blur-sm border-white/10",children:e.jsx(V,{className:"pt-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(Gt,{placeholder:"Share your thoughts...",value:a,onChange:M=>i(M.target.value),className:"min-h-[100px] bg-background/50","data-testid":"input-comment"}),e.jsxs(O,{onClick:E,disabled:!a.trim()||w.isPending,className:"gap-2","data-testid":"button-post-comment",children:[e.jsx($x,{className:"h-4 w-4"}),"Post Comment"]})]})})}),e.jsxs("div",{className:"space-y-3",children:[p.map(M=>e.jsx($,{className:"bg-card/40 backdrop-blur-sm border-white/10","data-testid":`comment-${M.id}`,children:e.jsx(V,{className:"pt-6",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(Da,{className:"h-10 w-10",children:e.jsx(Ia,{className:"bg-primary/20",children:T(M.authorName)})}),e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"font-medium text-sm","data-testid":`text-comment-author-${M.id}`,children:M.authorName||"Anonymous"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:Ph(new Date(M.createdAt),{addSuffix:!0})})]}),e.jsx("p",{className:"text-sm text-foreground/90","data-testid":`text-comment-content-${M.id}`,children:M.comment})]})]})})},M.id)),p.length===0&&e.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No comments yet. Be the first to share your thoughts."})]})]}),e.jsxs(Vt,{value:"condolences",className:"space-y-4",children:[e.jsxs($,{className:"bg-card/40 backdrop-blur-sm border-white/10",children:[e.jsx(le,{children:e.jsx(ge,{className:"text-lg",children:"Send Condolences"})}),e.jsxs(V,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium",children:["Your Name ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx("input",{type:"text",placeholder:"John Doe",value:c,onChange:M=>d(M.target.value),className:"flex h-9 w-full rounded-md border border-input bg-background/50 px-3 py-1 text-sm shadow-sm transition-colors placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50","data-testid":"input-condolence-name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Your Email (optional)"}),e.jsx("input",{type:"email",placeholder:"john@example.com",value:u,onChange:M=>m(M.target.value),className:"flex h-9 w-full rounded-md border border-input bg-background/50 px-3 py-1 text-sm shadow-sm transition-colors placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50","data-testid":"input-condolence-email"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium",children:["Your Message ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(Gt,{placeholder:"Share your condolences and support...",value:o,onChange:M=>l(M.target.value),className:"min-h-[120px] bg-background/50","data-testid":"input-condolence-message"})]}),e.jsxs(O,{onClick:L,disabled:_.isPending,className:"w-full gap-2","data-testid":"button-send-condolence",children:[e.jsx($x,{className:"h-4 w-4"}),"Send Condolences"]})]})]}),e.jsxs("div",{className:"space-y-3",children:[g.map(M=>e.jsx($,{className:"bg-card/40 backdrop-blur-sm border-white/10","data-testid":`condolence-${M.id}`,children:e.jsx(V,{className:"pt-6",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(Da,{className:"h-10 w-10",children:e.jsx(Ia,{className:"bg-primary/20",children:T(M.authorName)})}),e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"font-medium text-sm","data-testid":`text-condolence-sender-${M.id}`,children:M.authorName}),e.jsx("p",{className:"text-xs text-muted-foreground",children:Ph(new Date(M.createdAt),{addSuffix:!0})})]}),e.jsx("p",{className:"text-sm text-foreground/90 italic","data-testid":`text-condolence-message-${M.id}`,children:M.message})]})]})})},M.id)),g.length===0&&e.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No condolences yet. Be the first to share your support."})]})]})]})]})}function Hne({memorialId:t,currentUser:s}){const{toast:r}=Ht(),[n,a]=N.useState(null),[i,o]=N.useState(null),l=N.useRef(null),{data:c=[]}=Xe({queryKey:["/api/memorials",t,"live-streams"]}),{data:d=[]}=Xe({queryKey:["/api/live-streams",n==null?void 0:n.id,"viewers"],enabled:!!n}),u=yt({mutationFn:async w=>{const _=s!=null&&s.firstName&&(s!=null&&s.lastName)?`${s.firstName} ${s.lastName}`:(s==null?void 0:s.email)||"Anonymous Viewer";return await(await pt("POST",`/api/live-streams/${w}/viewers`,{userId:s==null?void 0:s.id,userEmail:s==null?void 0:s.email,userName:_})).json()},onSuccess:w=>{o(w.id),l.current=new Date,r({title:"Joined live stream",description:"You are now viewing the memorial service."})},onError:()=>{r({title:"Error",description:"Failed to join live stream.",variant:"destructive"})}}),m=yt({mutationFn:async()=>{if(!i||!l.current)return;const w=new Date,_=Math.floor((w.getTime()-l.current.getTime())/6e4);await pt("PUT",`/api/live-stream-viewers/${i}/leave`,{leftAt:w.toISOString(),durationMinutes:_})},onSuccess:()=>{o(null),l.current=null}});N.useEffect(()=>()=>{i&&m.mutate()},[i]);const f=c.filter(w=>w.isActive),h=c.filter(w=>!w.isActive&&ny(new Date(w.scheduledStartTime))),p=c.filter(w=>!w.isActive&&kne(new Date(w.scheduledStartTime))),g=w=>w.isActive?{label:"Live Now",variant:"destructive"}:ny(new Date(w.scheduledStartTime))?{label:"Upcoming",variant:"secondary"}:{label:"Ended",variant:"outline"},y=w=>{a(w),w.isActive&&u.mutate(w.id)},v=()=>{m.mutate(),a(null)},j=w=>w?w.split(" ").map(_=>_[0]).join("").toUpperCase().slice(0,2):"AN";return c.length===0?null:e.jsxs("div",{className:"space-y-6","data-testid":"live-stream-viewer",children:[n&&e.jsxs($,{className:"bg-card/40 backdrop-blur-sm border-white/10",children:[e.jsx(le,{className:"gap-2",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-1 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ge,{className:"text-2xl","data-testid":"text-stream-title",children:n.title}),e.jsx(ze,{...g(n),"data-testid":"badge-stream-status",children:g(n).label})]}),n.description&&e.jsx($e,{className:"text-base","data-testid":"text-stream-description",children:n.description})]}),i&&e.jsx(O,{variant:"outline",size:"sm",onClick:v,"data-testid":"button-leave-stream",children:"Leave Stream"})]})}),e.jsxs(V,{className:"space-y-4",children:[e.jsx("div",{className:"aspect-video bg-background/50 rounded-md flex items-center justify-center relative overflow-hidden border border-white/10",children:n.isActive?e.jsx("div",{className:"w-full h-full",children:n.platform==="youtube"&&n.streamUrl.includes("youtube.com")?e.jsx("iframe",{className:"w-full h-full",src:n.streamUrl.replace("watch?v=","embed/"),allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,"data-testid":"iframe-youtube-stream"}):e.jsxs("div",{className:"flex flex-col items-center justify-center gap-4 p-8",children:[e.jsx(ta,{className:"h-16 w-16 text-muted-foreground"}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("p",{className:"text-lg font-medium",children:"External Stream"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["This stream is hosted on ",n.platform||"an external platform"]}),e.jsx(O,{asChild:!0,className:"gap-2","data-testid":"button-open-external-stream",children:e.jsxs("a",{href:n.streamUrl,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(pa,{className:"h-4 w-4"}),"Open Stream"]})})]})]})}):e.jsxs("div",{className:"flex flex-col items-center justify-center gap-4 p-8",children:[e.jsx(Bd,{className:"h-16 w-16 text-muted-foreground"}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("p",{className:"text-lg font-medium",children:ny(new Date(n.scheduledStartTime))?"Stream Not Started":"Stream Ended"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:ny(new Date(n.scheduledStartTime))?`Scheduled for ${Pr(new Date(n.scheduledStartTime),"PPp")}`:`Ended ${Ph(new Date(n.scheduledStartTime),{addSuffix:!0})}`})]})]})}),e.jsx("div",{className:"flex items-center justify-between text-sm",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ms,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{"data-testid":"text-viewer-count",children:[d.filter(w=>!w.leftAt).length," viewing"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Mr,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:Pr(new Date(n.scheduledStartTime),"PPp")})]})]})}),d.filter(w=>!w.leftAt).length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium",children:"Current Viewers"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[d.filter(w=>!w.leftAt).slice(0,10).map(w=>e.jsxs("div",{className:"flex items-center gap-2 bg-background/50 rounded-full px-3 py-1.5","data-testid":`viewer-${w.id}`,children:[e.jsx(Da,{className:"h-6 w-6",children:e.jsx(Ia,{className:"bg-primary/20 text-xs",children:j(w.userName||"A")})}),e.jsx("span",{className:"text-sm",children:w.userName||"Anonymous"})]},w.id)),d.filter(w=>!w.leftAt).length>10&&e.jsx("div",{className:"flex items-center gap-2 bg-background/50 rounded-full px-3 py-1.5",children:e.jsxs("span",{className:"text-sm text-muted-foreground",children:["+",d.filter(w=>!w.leftAt).length-10," more"]})})]})]})]})]}),!n&&e.jsxs("div",{className:"space-y-4",children:[f.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(ta,{className:"h-5 w-5"}),"Live Now"]}),f.map(w=>e.jsx($,{className:"bg-card/40 backdrop-blur-sm border-white/10 hover-elevate cursor-pointer",onClick:()=>y(w),"data-testid":`stream-card-${w.id}`,children:e.jsx(V,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h4",{className:"font-semibold","data-testid":`text-stream-title-${w.id}`,children:w.title}),e.jsx(ze,{variant:"destructive",children:"Live"})]}),w.description&&e.jsx("p",{className:"text-sm text-muted-foreground",children:w.description}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Mr,{className:"h-3 w-3"}),Pr(new Date(w.scheduledStartTime),"p")]}),w.platform&&e.jsx("span",{className:"capitalize",children:w.platform})]})]}),e.jsxs(O,{className:"gap-2","data-testid":`button-join-stream-${w.id}`,children:[e.jsx(Bd,{className:"h-4 w-4"}),"Join Stream"]})]})})},w.id))]}),h.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Upcoming Streams"}),h.map(w=>e.jsx($,{className:"bg-card/40 backdrop-blur-sm border-white/10","data-testid":`stream-card-${w.id}`,children:e.jsx(V,{className:"pt-6",children:e.jsx("div",{className:"flex items-start justify-between gap-4",children:e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h4",{className:"font-semibold","data-testid":`text-stream-title-${w.id}`,children:w.title}),e.jsx(ze,{variant:"secondary",children:"Upcoming"})]}),w.description&&e.jsx("p",{className:"text-sm text-muted-foreground",children:w.description}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Mr,{className:"h-3 w-3"}),Pr(new Date(w.scheduledStartTime),"PPp")]}),w.platform&&e.jsx("span",{className:"capitalize",children:w.platform})]})]})})})},w.id))]}),p.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Past Streams"}),p.slice(0,3).map(w=>e.jsx($,{className:"bg-card/40 backdrop-blur-sm border-white/10 opacity-75","data-testid":`stream-card-${w.id}`,children:e.jsx(V,{className:"pt-6",children:e.jsx("div",{className:"flex items-start justify-between gap-4",children:e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h4",{className:"font-semibold","data-testid":`text-stream-title-${w.id}`,children:w.title}),e.jsx(ze,{variant:"outline",children:"Ended"})]}),w.description&&e.jsx("p",{className:"text-sm text-muted-foreground",children:w.description}),e.jsx("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Mr,{className:"h-3 w-3"}),Pr(new Date(w.scheduledStartTime),"PPp")]})})]})})})},w.id))]})]})]})}function GO({memorialId:t,deceasedName:s}){const{toast:r}=Ht(),[n,a]=N.useState(!1),[i,o]=N.useState(!1),l=`${window.location.origin}/obituary/${t}`,c=async()=>{try{await navigator.clipboard.writeText(l),a(!0),r({title:"Link copied",description:"Obituary link has been copied to clipboard."}),setTimeout(()=>a(!1),2e3)}catch{r({title:"Error",description:"Failed to copy link to clipboard.",variant:"destructive"})}},d=async()=>{if(navigator.share)try{await navigator.share({title:`Obituary: ${s}`,text:`View the obituary for ${s}`,url:l})}catch(h){h.name!=="AbortError"&&r({title:"Error",description:"Failed to share obituary link.",variant:"destructive"})}else c()},u=()=>{const h=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(l)}`;window.open(h,"_blank","width=600,height=400")},m=()=>{const h=`Remembering ${s}`,p=`https://twitter.com/intent/tweet?text=${encodeURIComponent(h)}&url=${encodeURIComponent(l)}`;window.open(p,"_blank","width=600,height=400")},f=()=>{const h=`View the obituary for ${s}: ${l}`,p=`https://wa.me/?text=${encodeURIComponent(h)}`;window.open(p,"_blank")};return e.jsxs(Os,{open:i,onOpenChange:o,children:[e.jsx(si,{asChild:!0,children:e.jsxs(O,{variant:"outline",className:"gap-2","data-testid":"button-share-obituary",children:[e.jsx(so,{className:"h-4 w-4"}),"Share Obituary"]})}),e.jsxs(Ds,{className:"sm:max-w-md",children:[e.jsxs(Is,{children:[e.jsx(Rs,{children:"Share Obituary"}),e.jsxs(Lr,{children:["Share a direct link to ",s,"'s obituary. No login or invite code required."]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:l,readOnly:!0,className:"flex h-9 w-full rounded-md border border-input bg-background/50 px-3 py-1 text-sm shadow-sm transition-colors placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50","data-testid":"input-shareable-url"}),e.jsx(O,{size:"icon",variant:"outline",onClick:c,"data-testid":"button-copy-link",children:n?e.jsx($n,{className:"h-4 w-4 text-green-500"}):e.jsx(To,{className:"h-4 w-4"})})]}),navigator.share&&e.jsxs(e.Fragment,{children:[e.jsxs(O,{onClick:d,className:"w-full gap-2","data-testid":"button-share-via-native",children:[e.jsx(so,{className:"h-4 w-4"}),"Share"]}),e.jsx(ls,{})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium",children:"Share on social media"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs(O,{variant:"outline",onClick:u,className:"gap-2","data-testid":"button-share-facebook",children:[e.jsx(yG,{className:"h-4 w-4"}),"Facebook"]}),e.jsxs(O,{variant:"outline",onClick:m,className:"gap-2","data-testid":"button-share-twitter",children:[e.jsx(VG,{className:"h-4 w-4"}),"Twitter"]}),e.jsxs(O,{variant:"outline",onClick:f,className:"gap-2","data-testid":"button-share-whatsapp",children:[e.jsx(Pl,{className:"h-4 w-4"}),"WhatsApp"]})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"This link provides public access to the obituary only. The full memorial, photos, and fundraisers remain private and require an invite code."})]})]})]})}function og(t,[s,r]){return Math.min(r,Math.max(s,t))}var Wne=[" ","Enter","ArrowUp","ArrowDown"],Kne=[" ","Enter"],$g="Select",[dj,uj,Yne]=Mf($g),[$f,Hge]=Dn($g,[Yne,Ff]),mj=Ff(),[Gne,tu]=$f($g),[Qne,Zne]=$f($g),QO=t=>{const{__scopeSelect:s,children:r,open:n,defaultOpen:a,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:d,name:u,autoComplete:m,disabled:f,required:h,form:p}=t,g=mj(s),[y,v]=N.useState(null),[j,w]=N.useState(null),[_,P]=N.useState(!1),E=Nm(d),[L=!1,T]=Ii({prop:n,defaultProp:a,onChange:i}),[M,F]=Ii({prop:o,defaultProp:l,onChange:c}),k=N.useRef(null),D=y?p||!!y.closest("form"):!0,[z,W]=N.useState(new Set),ue=Array.from(z).map(ae=>ae.props.value).join(";");return e.jsx(MR,{...g,children:e.jsxs(Gne,{required:h,scope:s,trigger:y,onTriggerChange:v,valueNode:j,onValueNodeChange:w,valueNodeHasChildren:_,onValueNodeHasChildrenChange:P,contentId:io(),value:M,onValueChange:F,open:L,onOpenChange:T,dir:E,triggerPointerDownPosRef:k,disabled:f,children:[e.jsx(dj.Provider,{scope:s,children:e.jsx(Qne,{scope:t.__scopeSelect,onNativeOptionAdd:N.useCallback(ae=>{W(Ne=>new Set(Ne).add(ae))},[]),onNativeOptionRemove:N.useCallback(ae=>{W(Ne=>{const K=new Set(Ne);return K.delete(ae),K})},[]),children:r})}),D?e.jsxs(b9,{"aria-hidden":!0,required:h,tabIndex:-1,name:u,autoComplete:m,value:M,onChange:ae=>F(ae.target.value),disabled:f,form:p,children:[M===void 0?e.jsx("option",{value:""}):null,Array.from(z)]},ue):null]})})};QO.displayName=$g;var ZO="SelectTrigger",XO=N.forwardRef((t,s)=>{const{__scopeSelect:r,disabled:n=!1,...a}=t,i=mj(r),o=tu(ZO,r),l=o.disabled||n,c=us(s,o.onTriggerChange),d=uj(r),u=N.useRef("touch"),[m,f,h]=N9(g=>{const y=d().filter(w=>!w.disabled),v=y.find(w=>w.value===o.value),j=w9(y,g,v);j!==void 0&&o.onValueChange(j.value)}),p=g=>{l||(o.onOpenChange(!0),h()),g&&(o.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return e.jsx(q_,{asChild:!0,...i,children:e.jsx(Dt.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":j9(o.value)?"":void 0,...a,ref:c,onClick:ht(a.onClick,g=>{g.currentTarget.focus(),u.current!=="mouse"&&p(g)}),onPointerDown:ht(a.onPointerDown,g=>{u.current=g.pointerType;const y=g.target;y.hasPointerCapture(g.pointerId)&&y.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(p(g),g.preventDefault())}),onKeyDown:ht(a.onKeyDown,g=>{const y=m.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&f(g.key),!(y&&g.key===" ")&&Wne.includes(g.key)&&(p(),g.preventDefault())})})})});XO.displayName=ZO;var JO="SelectValue",e9=N.forwardRef((t,s)=>{const{__scopeSelect:r,className:n,style:a,children:i,placeholder:o="",...l}=t,c=tu(JO,r),{onValueNodeHasChildrenChange:d}=c,u=i!==void 0,m=us(s,c.onValueNodeChange);return gn(()=>{d(u)},[d,u]),e.jsx(Dt.span,{...l,ref:m,style:{pointerEvents:"none"},children:j9(c.value)?e.jsx(e.Fragment,{children:o}):i})});e9.displayName=JO;var Xne="SelectIcon",t9=N.forwardRef((t,s)=>{const{__scopeSelect:r,children:n,...a}=t;return e.jsx(Dt.span,{"aria-hidden":!0,...a,ref:s,children:n||""})});t9.displayName=Xne;var Jne="SelectPortal",s9=t=>e.jsx(Cg,{asChild:!0,...t});s9.displayName=Jne;var fm="SelectContent",r9=N.forwardRef((t,s)=>{const r=tu(fm,t.__scopeSelect),[n,a]=N.useState();if(gn(()=>{a(new DocumentFragment)},[]),!r.open){const i=n;return i?jm.createPortal(e.jsx(n9,{scope:t.__scopeSelect,children:e.jsx(dj.Slot,{scope:t.__scopeSelect,children:e.jsx("div",{children:t.children})})}),i):null}return e.jsx(a9,{...t,ref:s})});r9.displayName=fm;var So=10,[n9,su]=$f(fm),eae="SelectContentImpl",tae=om("SelectContent.RemoveScroll"),a9=N.forwardRef((t,s)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:m,collisionBoundary:f,collisionPadding:h,sticky:p,hideWhenDetached:g,avoidCollisions:y,...v}=t,j=tu(fm,r),[w,_]=N.useState(null),[P,E]=N.useState(null),L=us(s,be=>_(be)),[T,M]=N.useState(null),[F,k]=N.useState(null),D=uj(r),[z,W]=N.useState(!1),ue=N.useRef(!1);N.useEffect(()=>{if(w)return G_(w)},[w]),Y_();const ae=N.useCallback(be=>{const[q,...Te]=D().map(ct=>ct.ref.current),[Be]=Te.slice(-1),Ve=document.activeElement;for(const ct of be)if(ct===Ve||(ct==null||ct.scrollIntoView({block:"nearest"}),ct===q&&P&&(P.scrollTop=0),ct===Be&&P&&(P.scrollTop=P.scrollHeight),ct==null||ct.focus(),document.activeElement!==Ve))return},[D,P]),Ne=N.useCallback(()=>ae([T,w]),[ae,T,w]);N.useEffect(()=>{z&&Ne()},[z,Ne]);const{onOpenChange:K,triggerPointerDownPosRef:Q}=j;N.useEffect(()=>{if(w){let be={x:0,y:0};const q=Be=>{var Ve,ct;be={x:Math.abs(Math.round(Be.pageX)-(((Ve=Q.current)==null?void 0:Ve.x)??0)),y:Math.abs(Math.round(Be.pageY)-(((ct=Q.current)==null?void 0:ct.y)??0))}},Te=Be=>{be.x<=10&&be.y<=10?Be.preventDefault():w.contains(Be.target)||K(!1),document.removeEventListener("pointermove",q),Q.current=null};return Q.current!==null&&(document.addEventListener("pointermove",q),document.addEventListener("pointerup",Te,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",q),document.removeEventListener("pointerup",Te,{capture:!0})}}},[w,K,Q]),N.useEffect(()=>{const be=()=>K(!1);return window.addEventListener("blur",be),window.addEventListener("resize",be),()=>{window.removeEventListener("blur",be),window.removeEventListener("resize",be)}},[K]);const[ke,G]=N9(be=>{const q=D().filter(Ve=>!Ve.disabled),Te=q.find(Ve=>Ve.ref.current===document.activeElement),Be=w9(q,be,Te);Be&&setTimeout(()=>Be.ref.current.focus())}),I=N.useCallback((be,q,Te)=>{const Be=!ue.current&&!Te;(j.value!==void 0&&j.value===q||Be)&&(M(be),Be&&(ue.current=!0))},[j.value]),Z=N.useCallback(()=>w==null?void 0:w.focus(),[w]),J=N.useCallback((be,q,Te)=>{const Be=!ue.current&&!Te;(j.value!==void 0&&j.value===q||Be)&&k(be)},[j.value]),se=n==="popper"?Mw:i9,je=se===Mw?{side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:m,collisionBoundary:f,collisionPadding:h,sticky:p,hideWhenDetached:g,avoidCollisions:y}:{};return e.jsx(n9,{scope:r,content:w,viewport:P,onViewportChange:E,itemRefCallback:I,selectedItem:T,onItemLeave:Z,itemTextRefCallback:J,focusSelectedItem:Ne,selectedItemText:F,position:n,isPositioned:z,searchRef:ke,children:e.jsx(tj,{as:tae,allowPinchZoom:!0,children:e.jsx(Z1,{asChild:!0,trapped:j.open,onMountAutoFocus:be=>{be.preventDefault()},onUnmountAutoFocus:ht(a,be=>{var q;(q=j.trigger)==null||q.focus({preventScroll:!0}),be.preventDefault()}),children:e.jsx(Lf,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:be=>be.preventDefault(),onDismiss:()=>j.onOpenChange(!1),children:e.jsx(se,{role:"listbox",id:j.contentId,"data-state":j.open?"open":"closed",dir:j.dir,onContextMenu:be=>be.preventDefault(),...v,...je,onPlaced:()=>W(!0),ref:L,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:ht(v.onKeyDown,be=>{const q=be.ctrlKey||be.altKey||be.metaKey;if(be.key==="Tab"&&be.preventDefault(),!q&&be.key.length===1&&G(be.key),["ArrowUp","ArrowDown","Home","End"].includes(be.key)){let Be=D().filter(Ve=>!Ve.disabled).map(Ve=>Ve.ref.current);if(["ArrowUp","End"].includes(be.key)&&(Be=Be.slice().reverse()),["ArrowUp","ArrowDown"].includes(be.key)){const Ve=be.target,ct=Be.indexOf(Ve);Be=Be.slice(ct+1)}setTimeout(()=>ae(Be)),be.preventDefault()}})})})})})})});a9.displayName=eae;var sae="SelectItemAlignedPosition",i9=N.forwardRef((t,s)=>{const{__scopeSelect:r,onPlaced:n,...a}=t,i=tu(fm,r),o=su(fm,r),[l,c]=N.useState(null),[d,u]=N.useState(null),m=us(s,L=>u(L)),f=uj(r),h=N.useRef(!1),p=N.useRef(!0),{viewport:g,selectedItem:y,selectedItemText:v,focusSelectedItem:j}=o,w=N.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&d&&g&&y&&v){const L=i.trigger.getBoundingClientRect(),T=d.getBoundingClientRect(),M=i.valueNode.getBoundingClientRect(),F=v.getBoundingClientRect();if(i.dir!=="rtl"){const Ve=F.left-T.left,ct=M.left-Ve,vt=L.left-ct,qe=L.width+vt,pe=Math.max(qe,T.width),ps=window.innerWidth-So,ns=og(ct,[So,Math.max(So,ps-pe)]);l.style.minWidth=qe+"px",l.style.left=ns+"px"}else{const Ve=T.right-F.right,ct=window.innerWidth-M.right-Ve,vt=window.innerWidth-L.right-ct,qe=L.width+vt,pe=Math.max(qe,T.width),ps=window.innerWidth-So,ns=og(ct,[So,Math.max(So,ps-pe)]);l.style.minWidth=qe+"px",l.style.right=ns+"px"}const k=f(),D=window.innerHeight-So*2,z=g.scrollHeight,W=window.getComputedStyle(d),ue=parseInt(W.borderTopWidth,10),ae=parseInt(W.paddingTop,10),Ne=parseInt(W.borderBottomWidth,10),K=parseInt(W.paddingBottom,10),Q=ue+ae+z+K+Ne,ke=Math.min(y.offsetHeight*5,Q),G=window.getComputedStyle(g),I=parseInt(G.paddingTop,10),Z=parseInt(G.paddingBottom,10),J=L.top+L.height/2-So,se=D-J,je=y.offsetHeight/2,be=y.offsetTop+je,q=ue+ae+be,Te=Q-q;if(q<=J){const Ve=k.length>0&&y===k[k.length-1].ref.current;l.style.bottom="0px";const ct=d.clientHeight-g.offsetTop-g.offsetHeight,vt=Math.max(se,je+(Ve?Z:0)+ct+Ne),qe=q+vt;l.style.height=qe+"px"}else{const Ve=k.length>0&&y===k[0].ref.current;l.style.top="0px";const vt=Math.max(J,ue+g.offsetTop+(Ve?I:0)+je)+Te;l.style.height=vt+"px",g.scrollTop=q-J+g.offsetTop}l.style.margin=`${So}px 0`,l.style.minHeight=ke+"px",l.style.maxHeight=D+"px",n==null||n(),requestAnimationFrame(()=>h.current=!0)}},[f,i.trigger,i.valueNode,l,d,g,y,v,i.dir,n]);gn(()=>w(),[w]);const[_,P]=N.useState();gn(()=>{d&&P(window.getComputedStyle(d).zIndex)},[d]);const E=N.useCallback(L=>{L&&p.current===!0&&(w(),j==null||j(),p.current=!1)},[w,j]);return e.jsx(nae,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:h,onScrollButtonChange:E,children:e.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:_},children:e.jsx(Dt.div,{...a,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});i9.displayName=sae;var rae="SelectPopperPosition",Mw=N.forwardRef((t,s)=>{const{__scopeSelect:r,align:n="start",collisionPadding:a=So,...i}=t,o=mj(r);return e.jsx(V_,{...o,...i,ref:s,align:n,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Mw.displayName=rae;var[nae,C4]=$f(fm,{}),Lw="SelectViewport",o9=N.forwardRef((t,s)=>{const{__scopeSelect:r,nonce:n,...a}=t,i=su(Lw,r),o=C4(Lw,r),l=us(s,i.onViewportChange),c=N.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),e.jsx(dj.Slot,{scope:r,children:e.jsx(Dt.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:ht(a.onScroll,d=>{const u=d.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:f}=o;if(f!=null&&f.current&&m){const h=Math.abs(c.current-u.scrollTop);if(h>0){const p=window.innerHeight-So*2,g=parseFloat(m.style.minHeight),y=parseFloat(m.style.height),v=Math.max(g,y);if(v<p){const j=v+h,w=Math.min(p,j),_=j-w;m.style.height=w+"px",m.style.bottom==="0px"&&(u.scrollTop=_>0?_:0,m.style.justifyContent="flex-end")}}}c.current=u.scrollTop})})})]})});o9.displayName=Lw;var l9="SelectGroup",[aae,iae]=$f(l9),oae=N.forwardRef((t,s)=>{const{__scopeSelect:r,...n}=t,a=io();return e.jsx(aae,{scope:r,id:a,children:e.jsx(Dt.div,{role:"group","aria-labelledby":a,...n,ref:s})})});oae.displayName=l9;var c9="SelectLabel",d9=N.forwardRef((t,s)=>{const{__scopeSelect:r,...n}=t,a=iae(c9,r);return e.jsx(Dt.div,{id:a.id,...n,ref:s})});d9.displayName=c9;var t1="SelectItem",[lae,u9]=$f(t1),m9=N.forwardRef((t,s)=>{const{__scopeSelect:r,value:n,disabled:a=!1,textValue:i,...o}=t,l=tu(t1,r),c=su(t1,r),d=l.value===n,[u,m]=N.useState(i??""),[f,h]=N.useState(!1),p=us(s,j=>{var w;return(w=c.itemRefCallback)==null?void 0:w.call(c,j,n,a)}),g=io(),y=N.useRef("touch"),v=()=>{a||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(lae,{scope:r,value:n,disabled:a,textId:g,isSelected:d,onItemTextChange:N.useCallback(j=>{m(w=>w||((j==null?void 0:j.textContent)??"").trim())},[]),children:e.jsx(dj.ItemSlot,{scope:r,value:n,disabled:a,textValue:u,children:e.jsx(Dt.div,{role:"option","aria-labelledby":g,"data-highlighted":f?"":void 0,"aria-selected":d&&f,"data-state":d?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...o,ref:p,onFocus:ht(o.onFocus,()=>h(!0)),onBlur:ht(o.onBlur,()=>h(!1)),onClick:ht(o.onClick,()=>{y.current!=="mouse"&&v()}),onPointerUp:ht(o.onPointerUp,()=>{y.current==="mouse"&&v()}),onPointerDown:ht(o.onPointerDown,j=>{y.current=j.pointerType}),onPointerMove:ht(o.onPointerMove,j=>{var w;y.current=j.pointerType,a?(w=c.onItemLeave)==null||w.call(c):y.current==="mouse"&&j.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ht(o.onPointerLeave,j=>{var w;j.currentTarget===document.activeElement&&((w=c.onItemLeave)==null||w.call(c))}),onKeyDown:ht(o.onKeyDown,j=>{var _;((_=c.searchRef)==null?void 0:_.current)!==""&&j.key===" "||(Kne.includes(j.key)&&v(),j.key===" "&&j.preventDefault())})})})})});m9.displayName=t1;var Gp="SelectItemText",h9=N.forwardRef((t,s)=>{const{__scopeSelect:r,className:n,style:a,...i}=t,o=tu(Gp,r),l=su(Gp,r),c=u9(Gp,r),d=Zne(Gp,r),[u,m]=N.useState(null),f=us(s,v=>m(v),c.onItemTextChange,v=>{var j;return(j=l.itemTextRefCallback)==null?void 0:j.call(l,v,c.value,c.disabled)}),h=u==null?void 0:u.textContent,p=N.useMemo(()=>e.jsx("option",{value:c.value,disabled:c.disabled,children:h},c.value),[c.disabled,c.value,h]),{onNativeOptionAdd:g,onNativeOptionRemove:y}=d;return gn(()=>(g(p),()=>y(p)),[g,y,p]),e.jsxs(e.Fragment,{children:[e.jsx(Dt.span,{id:c.textId,...i,ref:f}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?jm.createPortal(i.children,o.valueNode):null]})});h9.displayName=Gp;var f9="SelectItemIndicator",p9=N.forwardRef((t,s)=>{const{__scopeSelect:r,...n}=t;return u9(f9,r).isSelected?e.jsx(Dt.span,{"aria-hidden":!0,...n,ref:s}):null});p9.displayName=f9;var Dw="SelectScrollUpButton",x9=N.forwardRef((t,s)=>{const r=su(Dw,t.__scopeSelect),n=C4(Dw,t.__scopeSelect),[a,i]=N.useState(!1),o=us(s,n.onScrollButtonChange);return gn(()=>{if(r.viewport&&r.isPositioned){let l=function(){const d=c.scrollTop>0;i(d)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?e.jsx(v9,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});x9.displayName=Dw;var Iw="SelectScrollDownButton",g9=N.forwardRef((t,s)=>{const r=su(Iw,t.__scopeSelect),n=C4(Iw,t.__scopeSelect),[a,i]=N.useState(!1),o=us(s,n.onScrollButtonChange);return gn(()=>{if(r.viewport&&r.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,u=Math.ceil(c.scrollTop)<d;i(u)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?e.jsx(v9,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});g9.displayName=Iw;var v9=N.forwardRef((t,s)=>{const{__scopeSelect:r,onAutoScroll:n,...a}=t,i=su("SelectScrollButton",r),o=N.useRef(null),l=uj(r),c=N.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return N.useEffect(()=>()=>c(),[c]),gn(()=>{var u;const d=l().find(m=>m.ref.current===document.activeElement);(u=d==null?void 0:d.ref.current)==null||u.scrollIntoView({block:"nearest"})},[l]),e.jsx(Dt.div,{"aria-hidden":!0,...a,ref:s,style:{flexShrink:0,...a.style},onPointerDown:ht(a.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(n,50))}),onPointerMove:ht(a.onPointerMove,()=>{var d;(d=i.onItemLeave)==null||d.call(i),o.current===null&&(o.current=window.setInterval(n,50))}),onPointerLeave:ht(a.onPointerLeave,()=>{c()})})}),cae="SelectSeparator",y9=N.forwardRef((t,s)=>{const{__scopeSelect:r,...n}=t;return e.jsx(Dt.div,{"aria-hidden":!0,...n,ref:s})});y9.displayName=cae;var Rw="SelectArrow",dae=N.forwardRef((t,s)=>{const{__scopeSelect:r,...n}=t,a=mj(r),i=tu(Rw,r),o=su(Rw,r);return i.open&&o.position==="popper"?e.jsx(H_,{...a,...n,ref:s}):null});dae.displayName=Rw;function j9(t){return t===""||t===void 0}var b9=N.forwardRef((t,s)=>{const{value:r,...n}=t,a=N.useRef(null),i=us(s,a),o=aj(r);return N.useEffect(()=>{const l=a.current,c=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==r&&u){const m=new Event("change",{bubbles:!0});u.call(l,r),l.dispatchEvent(m)}},[o,r]),e.jsx(kg,{asChild:!0,children:e.jsx("select",{...n,ref:i,defaultValue:r})})});b9.displayName="BubbleSelect";function N9(t){const s=Fr(t),r=N.useRef(""),n=N.useRef(0),a=N.useCallback(o=>{const l=r.current+o;s(l),function c(d){r.current=d,window.clearTimeout(n.current),d!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[s]),i=N.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return N.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,a,i]}function w9(t,s,r){const a=s.length>1&&Array.from(s).every(d=>d===s[0])?s[0]:s,i=r?t.indexOf(r):-1;let o=uae(t,Math.max(i,0));a.length===1&&(o=o.filter(d=>d!==r));const c=o.find(d=>d.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function uae(t,s){return t.map((r,n)=>t[(s+n)%t.length])}var mae=QO,_9=XO,hae=e9,fae=t9,pae=s9,S9=r9,xae=o9,C9=d9,k9=m9,gae=h9,vae=p9,A9=x9,P9=g9,E9=y9;const Rt=mae,Ft=hae,Mt=N.forwardRef(({className:t,children:s,...r},n)=>e.jsxs(_9,{ref:n,className:bt("flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...r,children:[s,e.jsx(fae,{asChild:!0,children:e.jsx(Fx,{className:"h-4 w-4 opacity-50"})})]}));Mt.displayName=_9.displayName;const T9=N.forwardRef(({className:t,...s},r)=>e.jsx(A9,{ref:r,className:bt("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(xG,{className:"h-4 w-4"})}));T9.displayName=A9.displayName;const M9=N.forwardRef(({className:t,...s},r)=>e.jsx(P9,{ref:r,className:bt("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(Fx,{className:"h-4 w-4"})}));M9.displayName=P9.displayName;const Lt=N.forwardRef(({className:t,children:s,position:r="popper",...n},a)=>e.jsx(pae,{children:e.jsxs(S9,{ref:a,className:bt("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...n,children:[e.jsx(T9,{}),e.jsx(xae,{className:bt("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),e.jsx(M9,{})]})}));Lt.displayName=S9.displayName;const yae=N.forwardRef(({className:t,...s},r)=>e.jsx(C9,{ref:r,className:bt("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...s}));yae.displayName=C9.displayName;const te=N.forwardRef(({className:t,children:s,...r},n)=>e.jsxs(k9,{ref:n,className:bt("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(vae,{children:e.jsx($n,{className:"h-4 w-4"})})}),e.jsx(gae,{children:s})]}));te.displayName=k9.displayName;const jae=N.forwardRef(({className:t,...s},r)=>e.jsx(E9,{ref:r,className:bt("-mx-1 my-1 h-px bg-muted",t),...s}));jae.displayName=E9.displayName;const n6=[{value:"family",label:"Family",icon:_t,description:"Family member"},{value:"friend",label:"Friend",icon:Ms,description:"Personal friend"},{value:"colleague",label:"Colleague",icon:Eg,description:"Work colleague"},{value:"police_officer",label:"Police Officer",icon:va,description:"Law enforcement"},{value:"firefighter",label:"Firefighter",icon:Nr,description:"Firefighter"},{value:"military",label:"Military",icon:Uo,description:"Military service member"},{value:"teacher",label:"Teacher",icon:Za,description:"Educator"},{value:"mentor",label:"Mentor",icon:GI,description:"Mentor or guide"},{value:"neighbor",label:"Neighbor",icon:lf,description:"Neighbor"},{value:"acquaintance",label:"Acquaintance",icon:eu,description:"Acquaintance"},{value:"other",label:"Other",icon:vG,description:"Other relationship"}];function bae({open:t,onOpenChange:s,memorialId:r,memorialName:n}){const[a,i]=N.useState(""),[o,l]=N.useState(""),[c,d]=N.useState(""),{toast:u}=Ht(),m=yt({mutationFn:async()=>pt("POST","/api/saved-memorials",{memorialId:r,relationshipCategory:a,customCategory:a==="other"?o:void 0,notes:c||void 0}),onSuccess:()=>{xt.invalidateQueries({queryKey:["/api/saved-memorials"]}),xt.invalidateQueries({queryKey:[`/api/saved-memorials/${r}`]}),u({title:"Memorial Saved",description:`${n} has been added to your saved memorials.`}),s(!1),i(""),l(""),d("")},onError:p=>{u({title:"Error",description:p.message||"Failed to save memorial",variant:"destructive"})}}),f=()=>{if(!a){u({title:"Missing Information",description:"Please select how you knew this person.",variant:"destructive"});return}if(a==="other"&&!o.trim()){u({title:"Missing Information",description:"Please specify your relationship.",variant:"destructive"});return}m.mutate()},h=n6.find(p=>p.value===a);return e.jsx(Os,{open:t,onOpenChange:s,children:e.jsxs(Ds,{className:"sm:max-w-[500px]","data-testid":"dialog-save-memorial",children:[e.jsxs(Is,{children:[e.jsx(Rs,{children:"Save Memorial"}),e.jsxs(Lr,{children:["Add ",n," to your saved memorials and specify your relationship."]})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"relationship",children:"How did you know this person? *"}),e.jsxs(Rt,{value:a,onValueChange:i,children:[e.jsx(Mt,{id:"relationship","data-testid":"select-relationship",children:e.jsx(Ft,{placeholder:"Select relationship"})}),e.jsx(Lt,{children:n6.map(p=>{const g=p.icon;return e.jsx(te,{value:p.value,"data-testid":`option-${p.value}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{className:"w-4 h-4"}),e.jsx("span",{children:p.label})]})},p.value)})})]}),h&&e.jsx("p",{className:"text-sm text-muted-foreground",children:h.description})]}),a==="other"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"custom-category",children:"Specify Relationship *"}),e.jsx(re,{id:"custom-category",value:o,onChange:p=>l(p.target.value),placeholder:"e.g., Church member, Coach, Doctor","data-testid":"input-custom-category"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"notes",children:"Personal Notes (Optional)"}),e.jsx(Gt,{id:"notes",value:c,onChange:p=>d(p.target.value),placeholder:"Add any personal notes or memories about your relationship...",className:"min-h-[100px] resize-none","data-testid":"input-notes"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(O,{variant:"outline",onClick:()=>s(!1),disabled:m.isPending,"data-testid":"button-cancel-save",children:"Cancel"}),e.jsx(O,{onClick:f,disabled:m.isPending,"data-testid":"button-confirm-save",children:m.isPending?"Saving...":"Save Memorial"})]})]})})}const Nae=[{id:"tshirts",icon:$G,title:"Memorial T-Shirts",description:"Custom t-shirts with photos and memorial text",features:["High-quality printing","Multiple sizes","Fast shipping"],externalUrl:"https://www.customink.com/",color:"from-blue-500/10 to-blue-600/10"},{id:"cutouts",icon:SG,title:"Life-Size Cardboard Cutouts",description:"Professional photo cutouts for memorial services",features:["Full-size or custom dimensions","Durable material","Stand included"],externalUrl:"https://www.cardboardcutoutstandees.com/",color:"from-purple-500/10 to-purple-600/10"},{id:"holograms",icon:Bs,title:"Hologram Memorials",description:"Interactive 3D holographic displays",features:["Cutting-edge technology","Customizable messages","Unforgettable tribute"],externalUrl:"https://www.vntana.com/",color:"from-amber-500/10 to-amber-600/10"}];function wae({memorialName:t,memorialId:s}){const r=(n,a)=>{window.open(n,"_blank","noopener,noreferrer"),typeof window<"u"&&window.gtag&&window.gtag("event","merchandise_click",{service_name:a,memorial_id:s,memorial_name:t})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("h2",{className:"text-2xl font-semibold text-foreground",children:"Memorial Merchandise & Services"}),e.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Create lasting tributes with custom merchandise and innovative memorial services"})]}),e.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:Nae.map(n=>{const a=n.icon;return e.jsxs($,{className:"hover-elevate active-elevate-2 transition-all","data-testid":`card-merchandise-${n.id}`,children:[e.jsxs(le,{children:[e.jsx("div",{className:`w-12 h-12 rounded-lg bg-gradient-to-br ${n.color} flex items-center justify-center mb-3`,children:e.jsx(a,{className:"w-6 h-6 text-foreground"})}),e.jsx(ge,{className:"text-lg",children:n.title}),e.jsx($e,{children:n.description})]}),e.jsxs(V,{className:"space-y-4",children:[e.jsx("ul",{className:"space-y-2",children:n.features.map((i,o)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm text-muted-foreground",children:[e.jsx("span",{className:"text-primary mt-0.5",children:""}),e.jsx("span",{children:i})]},o))}),e.jsxs(O,{className:"w-full",variant:"outline",onClick:()=>r(n.externalUrl,n.title),"data-testid":`button-view-${n.id}`,children:[e.jsx(pa,{className:"w-4 h-4 mr-2"}),"View Service"]})]})]},n.id)})}),e.jsx($,{className:"bg-muted/30",children:e.jsx(V,{className:"p-6",children:e.jsx("p",{className:"text-sm text-center text-muted-foreground",children:"These are third-party services. Opictuary partners with trusted providers to offer you the best memorial merchandise options. Contact the service provider directly for pricing and customization details."})})})]})}var k4="Switch",[_ae,Wge]=Dn(k4),[Sae,Cae]=_ae(k4),L9=N.forwardRef((t,s)=>{const{__scopeSwitch:r,name:n,checked:a,defaultChecked:i,required:o,disabled:l,value:c="on",onCheckedChange:d,form:u,...m}=t,[f,h]=N.useState(null),p=us(s,w=>h(w)),g=N.useRef(!1),y=f?u||!!f.closest("form"):!0,[v=!1,j]=Ii({prop:a,defaultProp:i,onChange:d});return e.jsxs(Sae,{scope:r,checked:v,disabled:l,children:[e.jsx(Dt.button,{type:"button",role:"switch","aria-checked":v,"aria-required":o,"data-state":R9(v),"data-disabled":l?"":void 0,disabled:l,value:c,...m,ref:p,onClick:ht(t.onClick,w=>{j(_=>!_),y&&(g.current=w.isPropagationStopped(),g.current||w.stopPropagation())})}),y&&e.jsx(kae,{control:f,bubbles:!g.current,name:n,value:c,checked:v,required:o,disabled:l,form:u,style:{transform:"translateX(-100%)"}})]})});L9.displayName=k4;var D9="SwitchThumb",I9=N.forwardRef((t,s)=>{const{__scopeSwitch:r,...n}=t,a=Cae(D9,r);return e.jsx(Dt.span,{"data-state":R9(a.checked),"data-disabled":a.disabled?"":void 0,...n,ref:s})});I9.displayName=D9;var kae=t=>{const{control:s,checked:r,bubbles:n=!0,...a}=t,i=N.useRef(null),o=aj(r),l=Y1(s);return N.useEffect(()=>{const c=i.current,d=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(d,"checked").set;if(o!==r&&m){const f=new Event("click",{bubbles:n});m.call(c,r),c.dispatchEvent(f)}},[o,r,n]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:i,style:{...t.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function R9(t){return t?"checked":"unchecked"}var F9=L9,Aae=I9;const ir=N.forwardRef(({className:t,...s},r)=>e.jsx(F9,{className:bt("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...s,ref:r,children:e.jsx(Aae,{className:bt("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));ir.displayName=F9.displayName;const A4=[{id:"birthday-1",name:"Birthday Wishes",eventType:"birthday",description:"Heartfelt birthday message from a loved one",message:`Happy Birthday, my dear!

Even though I can't be there in person, I want you to know that I'm celebrating with you in spirit. I hope this year brings you joy, success, and all the happiness you deserve.

Remember that you are loved beyond measure and that I'm always watching over you.

With all my love,
[Your Name]`},{id:"birthday-2",name:"Milestone Birthday",eventType:"birthday",description:"Special message for a milestone birthday",message:`To my beloved [Recipient],

Congratulations on reaching this incredible milestone! This is a special birthday, and I wish I could be there to celebrate with you.

I'm so proud of the person you've become and all that you've accomplished. Continue to chase your dreams and live life to the fullest.

Happy Birthday!
All my love, always`},{id:"graduation-1",name:"Graduation Celebration",eventType:"graduation",description:"Proud message for graduation day",message:`Congratulations on your graduation!

I am bursting with pride for all your hard work and dedication. This is just the beginning of an amazing journey.

As you step into this new chapter, remember that you have the strength and intelligence to achieve anything you set your mind to.

I'll always be cheering you on from above.

With immense pride and love,
[Your Name]`},{id:"graduation-2",name:"Graduate Encouragement",eventType:"graduation",description:"Encouraging message for new graduate",message:`My dearest [Recipient],

Today you graduate, and I couldn't be prouder! You've worked so hard to reach this moment, and you deserve every bit of success that comes your way.

The world is waiting for someone like you to make a difference. Go out there and shine!

Remember, I'm always with you in spirit.

Congratulations and all my love!`},{id:"wedding-1",name:"Wedding Day Blessing",eventType:"wedding",description:"Loving message for wedding day",message:`My darling [Recipient],

On your wedding day, I want you to know how happy I am for you. Though I can't be there to see you walk down the aisle, I'm there in spirit, smiling with joy.

May your marriage be filled with love, laughter, and endless happiness. Cherish each other, support one another, and never forget how special your love is.

Congratulations on finding your perfect match!

With all my love and blessings,
[Your Name]`},{id:"wedding-2",name:"Wedding Advice",eventType:"wedding",description:"Heartfelt wedding day wishes",message:`To my beloved [Recipient],

Today marks the beginning of your beautiful journey together. Marriage is an adventure filled with love, growth, and cherished moments.

Always communicate, laugh together, and hold each other close during both the good times and the challenges.

I'm so happy you've found your soulmate. May your love story be everything you've ever dreamed of.

All my love on your special day!`},{id:"anniversary-1",name:"Anniversary Wishes",eventType:"anniversary",description:"Celebrating years of love",message:`Happy Anniversary!

Seeing the love you and your partner share brings me such joy. Another year together is another year of beautiful memories.

May you continue to grow stronger together and create countless more moments of happiness.

I'm so proud of the life you've built together.

With all my love,
[Your Name]`},{id:"baby-1",name:"New Baby Congratulations",eventType:"baby_birth",description:"Welcoming a new baby",message:`Congratulations on your beautiful baby!

What an incredible blessing! I wish I could hold this precious little one in my arms, but I'll be watching over them from above.

May parenthood bring you immeasurable joy, and may your baby grow up healthy, happy, and surrounded by love.

Welcome to the world, little one!

With all my love,
[Your Name]`},{id:"baby-2",name:"First Birthday",eventType:"baby_birth",description:"Baby's first birthday message",message:`Happy First Birthday to your precious little one!

It's amazing how fast time flies! This first year has been filled with so many firsts and wonderful memories.

I may not be there to see your child blow out their first candle, but I'm celebrating with you in spirit.

May this beautiful child continue to grow and bring you endless joy.

All my love!`},{id:"mother-day",name:"Mother's Day Love",eventType:"mother_day",description:"Honoring mothers on Mother's Day",message:`Happy Mother's Day!

Today is a day to celebrate you and all the love you give. Being a mother is the most important job in the world, and you're doing an amazing job.

Thank you for your strength, your kindness, and your unconditional love. You mean the world to me.

With all my appreciation and love,
[Your Name]`},{id:"father-day",name:"Father's Day Appreciation",eventType:"father_day",description:"Celebrating fathers",message:`Happy Father's Day!

You are an incredible father, and I'm so grateful for everything you do. Your love, guidance, and support mean more than words can express.

Thank you for being such a wonderful role model and for all the sacrifices you make.

I love you and appreciate you more than you know!

With all my love,
[Your Name]`},{id:"christmas",name:"Christmas Blessings",eventType:"christmas",description:"Christmas holiday message",message:`Merry Christmas!

The holiday season is a time for family, love, and reflection. Though I can't be with you in person this Christmas, I'm with you in spirit.

May your holiday be filled with warmth, joy, and the magic of the season. Cherish the time with loved ones and create beautiful memories.

Wishing you peace and happiness this Christmas and always.

With all my love,
[Your Name]`},{id:"new-year",name:"New Year Message",eventType:"new_year",description:"New Year's wishes",message:`Happy New Year!

As you step into this new year, I want you to know how much I believe in you. This year holds so much promise and potential.

May you find success in all your endeavors, experience joy in the little things, and grow in ways you never imagined.

Here's to new beginnings and wonderful adventures ahead!

With all my love,
[Your Name]`},{id:"encouragement",name:"Words of Encouragement",eventType:"custom",description:"General encouragement message",message:`My dear [Recipient],

I wanted to send you this message to remind you how special and capable you are. Life may throw challenges your way, but I know you have the strength to overcome them.

Believe in yourself as much as I believe in you. You are loved, you are valued, and you are never alone.

Keep moving forward and know that I'm always cheering you on.

With all my love and support,
[Your Name]`},{id:"thinking-of-you",name:"Thinking of You",eventType:"custom",description:"Letting them know you're thinking of them",message:`Hello my dear,

I just wanted to reach out and let you know that you're in my thoughts today and every day.

No matter what you're going through, remember that you are loved beyond measure and that you have someone watching over you.

I hope this message brings you comfort and reminds you that you're never truly alone.

All my love, always,
[Your Name]`}];function O9(t){return A4.filter(s=>s.eventType===t)}function Pae(t){return A4.find(s=>s.id===t)}const Eae={birthday:"Birthday",graduation:"Graduation",wedding:"Wedding",anniversary:"Anniversary",baby_birth:"Baby Birth",mother_day:"Mother's Day",father_day:"Father's Day",christmas:"Christmas",new_year:"New Year",holiday:"Holiday",custom:"Custom Event"},a6={birthday:"bg-pink-500/20 text-pink-100 border-pink-500/30",graduation:"bg-blue-500/20 text-blue-100 border-blue-500/30",wedding:"bg-rose-500/20 text-rose-100 border-rose-500/30",anniversary:"bg-purple-500/20 text-purple-100 border-purple-500/30",baby_birth:"bg-cyan-500/20 text-cyan-100 border-cyan-500/30",mother_day:"bg-pink-400/20 text-pink-100 border-pink-400/30",father_day:"bg-blue-400/20 text-blue-100 border-blue-400/30",christmas:"bg-green-500/20 text-green-100 border-green-500/30",new_year:"bg-indigo-500/20 text-indigo-100 border-indigo-500/30",holiday:"bg-green-500/20 text-green-100 border-green-500/30",custom:"bg-gold-500/20 text-gold-100 border-gold-500/30"},i6={draft:{label:"Draft",color:"bg-gray-500/20 text-gray-100 border-gray-500/30",icon:Un},pending:{label:"Pending",color:"bg-purple-500/20 text-purple-100 border-purple-500/30",icon:Mr},sent:{label:"Sent",color:"bg-green-500/20 text-green-100 border-green-500/30",icon:Oo},failed:{label:"Failed",color:"bg-red-500/20 text-red-100 border-red-500/30",icon:bm}};function Fw({message:t,onEdit:s,onDelete:r}){const n=t.customEventName||Eae[t.eventType]||t.eventType,a=a6[t.eventType]||a6.custom,i=t.status||(t.isSent?"sent":"pending"),o=i6[i]||i6.pending,l=o.icon;return e.jsxs($,{className:"bg-purple-900/50 border-purple-700/50 hover-elevate","data-testid":`card-scheduled-message-${t.id}`,children:[e.jsx(le,{children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs(ge,{className:"text-purple-100 flex items-center gap-2 mb-2",children:[e.jsx(eu,{className:"w-4 h-4 text-gold-400"}),t.recipientName,t.isRecurring&&e.jsxs(ze,{variant:"outline",className:"bg-indigo-500/20 text-indigo-100 border-indigo-500/30 text-xs",children:[e.jsx(Ox,{className:"w-3 h-3 mr-1"}),t.recurrenceInterval==="yearly"?"Yearly":t.recurrenceInterval==="monthly"?"Monthly":t.recurrenceInterval||"Recurring"]})]}),e.jsx($e,{className:"text-purple-300 space-y-1",children:t.recipientEmail&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Ti,{className:"w-3 h-3"}),t.recipientEmail]})})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsxs(ze,{variant:"outline",className:o.color,children:[e.jsx(l,{className:"w-3 h-3 mr-1"}),o.label]}),e.jsx(ze,{variant:"outline",className:a,children:n})]})]})}),e.jsxs(V,{className:"space-y-4",children:[e.jsx("div",{className:"space-y-2",children:t.eventDate&&e.jsxs("div",{className:"flex items-center gap-2 text-purple-200",children:[e.jsx(ds,{className:"w-4 h-4 text-gold-400"}),e.jsxs("span",{className:"text-sm",children:[Pr(new Date(t.eventDate),"MMMM d, yyyy"),t.sendTime&&` at ${t.sendTime}`]})]})}),e.jsx("div",{className:"bg-purple-950/50 rounded-lg p-3 border border-purple-700/30",children:e.jsx("p",{className:"text-purple-200 text-sm line-clamp-3",children:t.message})}),e.jsx("div",{className:"flex flex-wrap gap-2 text-xs",children:t.mediaUrl&&e.jsxs("div",{className:"text-purple-400 flex items-center gap-1",children:[e.jsx("span",{className:"w-2 h-2 bg-gold-400 rounded-full"}),"Includes ",t.mediaType||"media"]})}),i!=="sent"&&e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsxs(O,{variant:"outline",size:"sm",onClick:()=>s(t),className:"flex-1","data-testid":`button-edit-message-${t.id}`,children:[e.jsx(Mg,{className:"w-3 h-3 mr-2"}),"Edit"]}),e.jsxs(O,{variant:"outline",size:"sm",onClick:()=>r(t.id),className:"flex-1 text-red-300 border-red-500/30 hover:bg-red-500/20","data-testid":`button-delete-message-${t.id}`,children:[e.jsx(jc,{className:"w-3 h-3 mr-2"}),"Delete"]})]}),t.isSent&&t.sentAt&&e.jsxs("div",{className:"text-xs text-purple-400 pt-2 border-t border-purple-700/30",children:["Sent on ",Pr(new Date(t.sentAt),"MMM d, yyyy 'at' h:mm a")]})]})]})}const Tae=Dr({recipientName:we().min(1,"Recipient name is required"),recipientEmail:we().email("Invalid email address").optional().or(wr("")),eventType:Xn(["birthday","graduation","wedding","anniversary","baby_birth","holiday","mother_day","father_day","christmas","new_year","custom"]),customEventName:we().optional(),eventDate:we().min(1,"Event date is required"),sendTime:we().optional(),message:we().min(10,"Message must be at least 10 characters"),mediaUrl:we().url("Invalid URL").optional().or(wr("")),isRecurring:xn().optional(),recurrenceInterval:Xn(["yearly","monthly","custom"]).optional(),status:Xn(["draft","pending","sent","failed"]).optional()}).refine(t=>!(t.isRecurring&&!t.recurrenceInterval),{message:"Please select a recurrence frequency",path:["recurrenceInterval"]}),Mae={birthday:{label:"Birthday",icon:lm,description:"Send wishes on their special day"},graduation:{label:"Graduation",icon:Bs,description:"Celebrate their achievement"},wedding:{label:"Wedding",icon:_t,description:"Bless their union"},anniversary:{label:"Anniversary",icon:_t,description:"Celebrate years together"},baby_birth:{label:"Baby Birth",icon:_t,description:"Welcome a new life"},mother_day:{label:"Mother's Day",icon:_t,description:"Honor mothers"},father_day:{label:"Father's Day",icon:_t,description:"Appreciate fathers"},christmas:{label:"Christmas",icon:Bs,description:"Holiday blessings"},new_year:{label:"New Year",icon:Bs,description:"New beginnings"},holiday:{label:"Holiday",icon:Bs,description:"Special occasions"},custom:{label:"Custom Event",icon:ds,description:"Your own occasion"}};function Lae({memorialId:t,memorialName:s,canCreate:r=!0}){const[n,a]=N.useState(!1),[i,o]=N.useState(""),[l,c]=N.useState(!0),{toast:d}=Ht(),{data:u=[]}=Xe({queryKey:["/api/memorials",t,"scheduled-messages"],enabled:!!t}),m=Or({resolver:$r(Tae),defaultValues:{recipientName:"",recipientEmail:"",eventType:"birthday",customEventName:"",eventDate:"",sendTime:"09:00",message:"",mediaUrl:"",isRecurring:!1,recurrenceInterval:void 0,status:"pending"}}),f=m.watch("eventType"),h=m.watch("isRecurring"),p=yt({mutationFn:P=>pt("POST",`/api/memorials/${t}/scheduled-messages`,P),onSuccess:()=>{xt.invalidateQueries({queryKey:["/api/memorials",t,"scheduled-messages"]}),d({title:"Future Message Created",description:"Your message has been scheduled successfully!"}),a(!1),m.reset(),o(""),c(!0)},onError:P=>{d({title:"Error",description:P.message||"Failed to create scheduled message",variant:"destructive"})}}),g=yt({mutationFn:P=>pt("DELETE",`/api/memorials/${t}/scheduled-messages/${P}`),onSuccess:()=>{xt.invalidateQueries({queryKey:["/api/memorials",t,"scheduled-messages"]}),d({title:"Message Deleted",description:"The scheduled message has been removed."})}}),y=P=>{const E=A4.find(L=>L.id===P);E&&(o(P),m.setValue("message",E.message),c(!1))},v=P=>{p.mutate(P)},j=O9(f),w=u.filter(P=>P.status==="pending"||!P.isSent&&!P.status),_=u.filter(P=>P.isSent||P.status==="sent");return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-3xl md:text-4xl font-serif font-bold text-foreground mb-2 flex items-center gap-3",children:[e.jsx(Mr,{className:"w-8 h-8 text-primary"}),"Future Messages"]}),e.jsx("p",{className:"text-muted-foreground",children:"Send heartfelt messages to loved ones on special occasions in the future"})]}),r&&e.jsxs(Os,{open:n,onOpenChange:a,children:[e.jsx(si,{asChild:!0,children:e.jsxs(O,{size:"lg",className:"shadow-md","data-testid":"button-create-future-message",children:[e.jsx(bs,{className:"w-5 h-5 mr-2"}),"Create Message"]})}),e.jsxs(Ds,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Is,{children:[e.jsxs(Rs,{className:"text-2xl font-serif flex items-center gap-2",children:[e.jsx(Bs,{className:"w-6 h-6 text-primary"}),"Create a Future Message"]}),e.jsx(Lr,{children:"Schedule a heartfelt message to be delivered to loved ones on special occasions"})]}),e.jsx(Wr,{...m,children:e.jsxs("form",{onSubmit:m.handleSubmit(v),className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(eu,{className:"w-5 h-5"}),"Recipient Information"]}),e.jsx(fe,{control:m.control,name:"recipientName",render:({field:P})=>e.jsxs(me,{children:[e.jsx(he,{children:"Recipient Name"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"e.g., My daughter Sarah",...P,"data-testid":"input-recipient-name"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:m.control,name:"recipientEmail",render:({field:P})=>e.jsxs(me,{children:[e.jsx(he,{children:"Recipient Email (Optional)"}),e.jsx(xe,{children:e.jsx(re,{type:"email",placeholder:"email@example.com",...P,"data-testid":"input-recipient-email"})}),e.jsx(Qt,{children:"If provided, the message will be emailed on the scheduled date"}),e.jsx(ye,{})]})})]}),e.jsx(ls,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(ds,{className:"w-5 h-5"}),"Event Details"]}),e.jsx(fe,{control:m.control,name:"eventType",render:({field:P})=>e.jsxs(me,{children:[e.jsx(he,{children:"Event Type"}),e.jsxs(Rt,{onValueChange:P.onChange,defaultValue:P.value,children:[e.jsx(xe,{children:e.jsx(Mt,{"data-testid":"select-event-type",children:e.jsx(Ft,{placeholder:"Select event type"})})}),e.jsx(Lt,{children:Object.entries(Mae).map(([E,{label:L,description:T}])=>e.jsx(te,{value:E,children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:L}),e.jsx("span",{className:"text-xs text-muted-foreground",children:T})]})},E))})]}),e.jsx(ye,{})]})}),f==="custom"&&e.jsx(fe,{control:m.control,name:"customEventName",render:({field:P})=>e.jsxs(me,{children:[e.jsx(he,{children:"Custom Event Name"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"e.g., First Day of College",...P,"data-testid":"input-custom-event"})}),e.jsx(ye,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsx(fe,{control:m.control,name:"eventDate",render:({field:P})=>e.jsxs(me,{children:[e.jsx(he,{children:"Event Date"}),e.jsx(xe,{children:e.jsx(re,{type:"date",...P,"data-testid":"input-event-date"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:m.control,name:"sendTime",render:({field:P})=>e.jsxs(me,{children:[e.jsx(he,{children:"Send Time"}),e.jsx(xe,{children:e.jsx(re,{type:"time",...P,"data-testid":"input-send-time"})}),e.jsx(Qt,{className:"text-xs",children:"When to send on that day"}),e.jsx(ye,{})]})})]}),e.jsx(fe,{control:m.control,name:"isRecurring",render:({field:P})=>e.jsxs(me,{className:"flex items-center justify-between rounded-lg border border-border/50 p-4 bg-muted/20",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsxs(he,{className:"text-base flex items-center gap-2",children:[e.jsx(Ox,{className:"w-4 h-4"}),"Recurring Message"]}),e.jsx(Qt,{children:"Send this message every year on this date"})]}),e.jsx(xe,{children:e.jsx(ir,{checked:P.value,onCheckedChange:P.onChange,"data-testid":"switch-recurring"})})]})}),h&&e.jsx(fe,{control:m.control,name:"recurrenceInterval",render:({field:P})=>e.jsxs(me,{children:[e.jsx(he,{children:"Recurrence Frequency"}),e.jsxs(Rt,{onValueChange:P.onChange,defaultValue:P.value,children:[e.jsx(xe,{children:e.jsx(Mt,{"data-testid":"select-recurrence",children:e.jsx(Ft,{placeholder:"Select frequency"})})}),e.jsxs(Lt,{children:[e.jsx(te,{value:"yearly",children:"Yearly"}),e.jsx(te,{value:"monthly",children:"Monthly"})]})]}),e.jsx(ye,{})]})})]}),e.jsx(ls,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(Nn,{className:"w-5 h-5"}),"Message Content"]}),!l&&j.length>0&&e.jsxs(O,{type:"button",variant:"ghost",size:"sm",onClick:()=>c(!0),"data-testid":"button-show-templates",children:[e.jsx(Un,{className:"w-4 h-4 mr-2"}),"Browse Templates"]})]}),l&&j.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose a template to get started:"}),e.jsx("div",{className:"grid gap-2",children:j.map(P=>e.jsx(O,{type:"button",variant:"outline",className:"justify-start h-auto py-3 px-4 text-left",onClick:()=>y(P.id),"data-testid":`button-template-${P.id}`,children:e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:P.name}),e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:P.description})]})},P.id))}),e.jsx(ls,{className:"my-4"})]}),e.jsx(fe,{control:m.control,name:"message",render:({field:P})=>e.jsxs(me,{children:[e.jsx(he,{children:"Your Message"}),e.jsx(xe,{children:e.jsx(Gt,{placeholder:"Write your heartfelt message here...",className:"min-h-[200px] resize-y",...P,"data-testid":"textarea-message"})}),e.jsx(Qt,{children:"Personalize the message or use it as-is"}),e.jsx(ye,{})]})}),e.jsx(fe,{control:m.control,name:"mediaUrl",render:({field:P})=>e.jsxs(me,{children:[e.jsx(he,{children:"Media URL (Optional)"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"https://example.com/video.mp4",...P,"data-testid":"input-media-url"})}),e.jsx(Qt,{children:"Include a video or image link with your message"}),e.jsx(ye,{})]})})]}),e.jsxs(Ra,{children:[e.jsx(O,{type:"button",variant:"outline",onClick:()=>{a(!1),m.reset(),o(""),c(!0)},"data-testid":"button-cancel",children:"Cancel"}),e.jsx(O,{type:"submit",disabled:p.isPending,"data-testid":"button-submit-message",children:p.isPending?"Creating...":"Create Message"})]})]})})]})]})]}),u.length>0?e.jsxs("div",{className:"space-y-8",children:[w.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-xl font-semibold flex items-center gap-2",children:[e.jsx(Mr,{className:"w-5 h-5 text-primary"}),"Scheduled Messages (",w.length,")"]}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2",children:w.map(P=>e.jsx(Fw,{message:P,onEdit:()=>{},onDelete:E=>g.mutate(E)},P.id))})]}),_.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-xl font-semibold flex items-center gap-2 text-muted-foreground",children:[e.jsx(Ti,{className:"w-5 h-5"}),"Delivered Messages (",_.length,")"]}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2",children:_.map(P=>e.jsx(Fw,{message:P,onEdit:()=>{},onDelete:()=>{}},P.id))})]})]}):e.jsx($,{className:"border-2 border-dashed border-border/50 bg-muted/20",children:e.jsxs(V,{className:"flex flex-col items-center justify-center py-16 px-6 text-center",children:[e.jsx("div",{className:"bg-primary/10 rounded-full p-6 mb-6",children:e.jsx(Mr,{className:"w-12 h-12 text-primary"})}),e.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:"No Future Messages Yet"}),e.jsx("p",{className:"text-muted-foreground mb-6 max-w-md",children:"Create heartfelt messages to be delivered to loved ones on birthdays, anniversaries, graduations, and other special occasions in the future."}),r&&e.jsxs(O,{size:"lg",onClick:()=>a(!0),"data-testid":"button-create-first-message",children:[e.jsx(bs,{className:"w-5 h-5 mr-2"}),"Create First Message"]})]})})]})}const Dae=[{type:"heart",icon:_t,label:"Send Love",testId:"heart"},{type:"prayer",icon:S_,label:"Send Prayers",testId:"prayer"},{type:"candle",icon:Nr,label:"Light a Candle",testId:"candle"},{type:"flower",icon:of,label:"Send Flowers",testId:"flower"}];function o6(){let t=localStorage.getItem("opictuary_session_id");return t||(t=`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,localStorage.setItem("opictuary_session_id",t)),t}function $9({memorialId:t}){const{toast:s}=Ht(),{user:r}=fo(),[n,a]=N.useState(new Set),{data:i}=Xe({queryKey:["/api/memorials",t,"condolence-reactions"],enabled:!!t});N.useEffect(()=>{if(i!=null&&i.userReactions){const u=new Set(i.userReactions);a(u),localStorage.setItem(`memorial_reactions_${t}`,JSON.stringify(Array.from(u)))}},[i==null?void 0:i.userReactions,t]);const o=yt({mutationFn:async u=>{const m={reactionType:u};return r!=null&&r.id?m.userId=r.id:m.sessionId=o6(),pt("POST",`/api/memorials/${t}/condolence-reactions`,m)},onMutate:async u=>{await xt.cancelQueries({queryKey:["/api/memorials",t,"condolence-reactions"]});const m=xt.getQueryData(["/api/memorials",t,"condolence-reactions"]);xt.setQueryData(["/api/memorials",t,"condolence-reactions"],h=>h&&{reactions:h.reactions.find(y=>y.reactionType===u)?h.reactions.map(y=>y.reactionType===u?{...y,count:y.count+1}:y):[...h.reactions,{reactionType:u,count:1}],userReactions:[...h.userReactions,u]});const f=new Set(n);return f.add(u),a(f),localStorage.setItem(`memorial_reactions_${t}`,JSON.stringify(Array.from(f))),{previousData:m}},onError:(u,m,f)=>{var p,g,y,v;if(((p=u==null?void 0:u.response)==null?void 0:p.status)===409||((g=u==null?void 0:u.message)==null?void 0:g.includes("already reacted")))xt.invalidateQueries({queryKey:["/api/memorials",t,"condolence-reactions"]}),s({title:"Already Reacted",description:"You've already sent this condolence",variant:"default"});else{f!=null&&f.previousData&&xt.setQueryData(["/api/memorials",t,"condolence-reactions"],f.previousData);const j=new Set(n);j.delete(m),a(j),localStorage.setItem(`memorial_reactions_${t}`,JSON.stringify(Array.from(j))),s({title:"Error",description:((v=(y=u==null?void 0:u.response)==null?void 0:y.data)==null?void 0:v.message)||"Failed to add reaction. Please try again.",variant:"destructive"})}},onSuccess:()=>{xt.invalidateQueries({queryKey:["/api/memorials",t,"condolence-reactions"]})}}),l=yt({mutationFn:async u=>{const m={};return r!=null&&r.id?m.userId=r.id:m.sessionId=o6(),pt("DELETE",`/api/memorials/${t}/condolence-reactions/${u}`,m)},onMutate:async u=>{await xt.cancelQueries({queryKey:["/api/memorials",t,"condolence-reactions"]});const m=xt.getQueryData(["/api/memorials",t,"condolence-reactions"]);xt.setQueryData(["/api/memorials",t,"condolence-reactions"],h=>h&&{reactions:h.reactions.map(g=>g.reactionType===u?{...g,count:Math.max(0,g.count-1)}:g).filter(g=>g.count>0),userReactions:h.userReactions.filter(g=>g!==u)});const f=new Set(n);return f.delete(u),a(f),localStorage.setItem(`memorial_reactions_${t}`,JSON.stringify(Array.from(f))),{previousData:m}},onError:(u,m,f)=>{f!=null&&f.previousData&&xt.setQueryData(["/api/memorials",t,"condolence-reactions"],f.previousData);const h=new Set(n);h.add(m),a(h),localStorage.setItem(`memorial_reactions_${t}`,JSON.stringify(Array.from(h))),s({title:"Error",description:"Failed to remove reaction. Please try again.",variant:"destructive"})},onSuccess:()=>{xt.invalidateQueries({queryKey:["/api/memorials",t,"condolence-reactions"]})}}),c=u=>{n.has(u)?l.mutate(u):o.mutate(u)},d=u=>{if(!(i!=null&&i.reactions))return 0;const m=i.reactions.find(f=>f.reactionType===u);return(m==null?void 0:m.count)||0};return e.jsx("div",{className:"flex flex-wrap gap-2 items-center justify-center",children:Dae.map(({type:u,icon:m,label:f,testId:h})=>{const p=d(u),g=n.has(u);return e.jsxs(O,{variant:g?"default":"outline",size:"sm",onClick:()=>c(u),disabled:o.isPending||l.isPending,className:"gap-2","data-testid":`button-condolence-${h}`,children:[e.jsx(m,{className:"w-4 h-4"}),e.jsx("span",{children:f}),p>0&&e.jsx("span",{className:"ml-1 px-2 py-0.5 rounded-full text-xs bg-primary/10","data-testid":`text-condolence-${h}-count`,children:p})]},u)})})}const l6=[{value:"christian",label:"Christianity"},{value:"islamic",label:"Islam"},{value:"jewish",label:"Judaism"},{value:"buddhist",label:"Buddhism"},{value:"hindu",label:"Hinduism"},{value:"spiritual",label:"Spiritual"},{value:"nature",label:"Nature"},{value:"universal",label:"Universal"},{value:"custom",label:"Custom"}];function B9({memorialId:t,canEdit:s=!1}){const{toast:r}=Ht(),[n,a]=N.useState(void 0),[i,o]=N.useState(!1),[l,c]=N.useState([]),{data:d=[]}=Xe({queryKey:["/api/religious-symbols",n],queryFn:async()=>{const y=n?`?category=${n}`:"",v=await fetch(`/api/religious-symbols${y}`);if(!v.ok)throw new Error("Failed to fetch symbols");return v.json()}}),{data:u=[]}=Xe({queryKey:[`/api/memorials/${t}/symbols`],enabled:!!t});N.useEffect(()=>{c(u.map(y=>y.symbolId))},[u]);const m=yt({mutationFn:async y=>pt(`/api/memorials/${t}/symbols`,{method:"POST",body:JSON.stringify({symbolId:y,displayOrder:l.length})}),onSuccess:()=>{xt.invalidateQueries({queryKey:[`/api/memorials/${t}/symbols`]}),r({title:"Symbol Added",description:"The symbol has been added to the memorial."})},onError:()=>{r({title:"Error",description:"Failed to add symbol. Please try again.",variant:"destructive"})}}),f=yt({mutationFn:async y=>pt(`/api/memorial-symbols/${y}`,{method:"DELETE"}),onSuccess:()=>{xt.invalidateQueries({queryKey:[`/api/memorials/${t}/symbols`]}),r({title:"Symbol Removed",description:"The symbol has been removed from the memorial."})},onError:()=>{r({title:"Error",description:"Failed to remove symbol. Please try again.",variant:"destructive"})}}),h=yt({mutationFn:async y=>pt("/api/religious-symbols",{method:"POST",body:JSON.stringify(y)}),onSuccess:()=>{xt.invalidateQueries({queryKey:["/api/religious-symbols"]}),o(!1),r({title:"Symbol Uploaded",description:"Your custom symbol has been added."})},onError:()=>{r({title:"Error",description:"Failed to upload symbol. Please try again.",variant:"destructive"})}}),p=y=>{const v=u.find(j=>j.symbolId===y.id);v?f.mutate(v.id):m.mutate(y.id)},g=y=>u.some(v=>v.symbolId===y);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Religious & Spiritual Symbols"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Select meaningful symbols to display on the memorial page"})]}),s&&e.jsxs(O,{onClick:()=>o(!0),size:"sm",variant:"outline","data-testid":"button-upload-symbol",children:[e.jsx(zd,{className:"w-4 h-4 mr-2"}),"Upload Custom"]})]}),e.jsxs(Rt,{value:n,onValueChange:a,children:[e.jsx(Mt,{className:"w-[200px]","data-testid":"select-symbol-category",children:e.jsx(Ft,{placeholder:"All Categories"})}),e.jsxs(Lt,{children:[e.jsx(te,{value:"all",children:"All Categories"}),l6.map(y=>e.jsx(te,{value:y.value,children:y.label},y.value))]})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4",children:d.map(y=>{const v=g(y.id);return e.jsx($,{className:`relative cursor-pointer transition-all hover-elevate ${v?"ring-2 ring-primary":""} ${s?"":"pointer-events-none"}`,onClick:()=>s&&p(y),"data-testid":`card-symbol-${y.id}`,children:e.jsxs("div",{className:"p-4 text-center",children:[v&&s&&e.jsx("div",{className:"absolute top-2 right-2 w-5 h-5 bg-primary rounded-full flex items-center justify-center",children:e.jsx($n,{className:"w-3 h-3 text-primary-foreground"})}),y.unicodeSymbol?e.jsx("div",{className:"text-3xl mb-2","data-testid":`text-symbol-${y.id}`,children:y.unicodeSymbol}):y.imageUrl?e.jsx("img",{src:y.imageUrl,alt:y.name,className:"w-12 h-12 mx-auto mb-2 object-contain","data-testid":`img-symbol-${y.id}`}):null,e.jsx("p",{className:"text-xs font-medium","data-testid":`text-symbol-name-${y.id}`,children:y.name})]})},y.id)})}),u.length>0&&!s&&e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-sm font-medium mb-3",children:"Selected Symbols"}),e.jsx("div",{className:"flex flex-wrap gap-3",children:u.sort((y,v)=>y.displayOrder-v.displayOrder).map(y=>{const v=d.find(j=>j.id===y.symbolId);return v?e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-muted rounded-full","data-testid":`selected-symbol-${y.id}`,children:[v.unicodeSymbol?e.jsx("span",{className:"text-lg",children:v.unicodeSymbol}):v.imageUrl?e.jsx("img",{src:v.imageUrl,alt:v.name,className:"w-5 h-5 object-contain"}):null,e.jsx("span",{className:"text-sm",children:v.name})]},y.id):null})})]}),e.jsx(Os,{open:i,onOpenChange:o,children:e.jsxs(Ds,{"data-testid":"dialog-upload-symbol",children:[e.jsxs(Is,{children:[e.jsx(Rs,{children:"Upload Custom Symbol"}),e.jsx(Lr,{children:"Add a custom religious or spiritual symbol to the library"})]}),e.jsxs("form",{onSubmit:y=>{y.preventDefault();const v=new FormData(y.currentTarget);h.mutate({name:v.get("name"),category:v.get("category"),unicodeSymbol:v.get("unicodeSymbol")||void 0,imageUrl:v.get("imageUrl")||void 0,description:v.get("description")||void 0})},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(De,{htmlFor:"name",children:"Symbol Name"}),e.jsx(re,{id:"name",name:"name",required:!0,placeholder:"e.g., Celtic Cross","data-testid":"input-symbol-name"})]}),e.jsxs("div",{children:[e.jsx(De,{htmlFor:"category",children:"Category"}),e.jsxs(Rt,{name:"category",required:!0,children:[e.jsx(Mt,{"data-testid":"select-upload-category",children:e.jsx(Ft,{placeholder:"Select category"})}),e.jsx(Lt,{children:l6.map(y=>e.jsx(te,{value:y.value,children:y.label},y.value))})]})]}),e.jsxs("div",{children:[e.jsx(De,{htmlFor:"unicodeSymbol",children:"Unicode Symbol (Optional)"}),e.jsx(re,{id:"unicodeSymbol",name:"unicodeSymbol",placeholder:"e.g., ","data-testid":"input-unicode"})]}),e.jsxs("div",{children:[e.jsx(De,{htmlFor:"imageUrl",children:"Image URL (Optional)"}),e.jsx(re,{id:"imageUrl",name:"imageUrl",type:"url",placeholder:"https://example.com/symbol.png","data-testid":"input-image-url"})]}),e.jsxs("div",{children:[e.jsx(De,{htmlFor:"description",children:"Description (Optional)"}),e.jsx(Gt,{id:"description",name:"description",placeholder:"Brief description of the symbol's meaning...",rows:3,"data-testid":"textarea-description"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(O,{type:"button",variant:"outline",onClick:()=>o(!1),"data-testid":"button-cancel-upload",children:"Cancel"}),e.jsx(O,{type:"submit",disabled:h.isPending,"data-testid":"button-submit-upload",children:h.isPending?"Uploading...":"Upload Symbol"})]})]})]})})]})}var P4="Progress",E4=100,[Iae,Kge]=Dn(P4),[Rae,Fae]=Iae(P4),U9=N.forwardRef((t,s)=>{const{__scopeProgress:r,value:n=null,max:a,getValueLabel:i=Oae,...o}=t;(a||a===0)&&!c6(a)&&console.error($ae(`${a}`,"Progress"));const l=c6(a)?a:E4;n!==null&&!d6(n,l)&&console.error(Bae(`${n}`,"Progress"));const c=d6(n,l)?n:null,d=s1(c)?i(c,l):void 0;return e.jsx(Rae,{scope:r,value:c,max:l,children:e.jsx(Dt.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":s1(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":V9(c,l),"data-value":c??void 0,"data-max":l,...o,ref:s})})});U9.displayName=P4;var z9="ProgressIndicator",q9=N.forwardRef((t,s)=>{const{__scopeProgress:r,...n}=t,a=Fae(z9,r);return e.jsx(Dt.div,{"data-state":V9(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...n,ref:s})});q9.displayName=z9;function Oae(t,s){return`${Math.round(t/s*100)}%`}function V9(t,s){return t==null?"indeterminate":t===s?"complete":"loading"}function s1(t){return typeof t=="number"}function c6(t){return s1(t)&&!isNaN(t)&&t>0}function d6(t,s){return s1(t)&&!isNaN(t)&&t<=s&&t>=0}function $ae(t,s){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${s}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${E4}\`.`}function Bae(t,s){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${s}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${E4} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var H9=U9,Uae=q9;const Sl=N.forwardRef(({className:t,value:s,...r},n)=>e.jsx(H9,{ref:n,className:bt("relative h-4 w-full overflow-hidden rounded-full bg-muted",t),...r,children:e.jsx(Uae,{className:"h-full w-full flex-1 bg-gradient-to-r from-primary via-accent to-secondary transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})}));Sl.displayName=H9.displayName;function W9({slideshow:t,memorialId:s,onClose:r}){const[n,a]=N.useState(t.autoplay||!1),[i,o]=N.useState(0),[l,c]=N.useState(0),[d,u]=N.useState(!1),[m,f]=N.useState(!1),h=N.useRef(),p=N.useRef(null),g=N.useRef(null),{data:y=[]}=Xe({queryKey:[`/api/memorials/${s}/memories`]}),v=t.photoIds.map(k=>y.find(D=>D.id===k)).filter(Boolean),{data:j}=Xe({queryKey:[`/api/playlists/${t.playlistId}`],enabled:!!t.playlistId}),w=yt({mutationFn:async()=>pt(`/api/slideshows/${t.id}/view`,{method:"POST"})});N.useEffect(()=>{w.mutate()},[t.id]),N.useEffect(()=>{if(n&&v.length>0){const k=t.photoDuration*1e3,D=100,z=setInterval(()=>{c(W=>{const ue=W+D/k*100;return ue>=100?0:ue})},D);return h.current=setTimeout(()=>{P(),c(0)},k),()=>{clearInterval(z),h.current&&clearTimeout(h.current)}}},[n,i,v.length,t.photoDuration]);const _=()=>{a(!n),g.current&&(n?g.current.pause():g.current.play().catch(()=>{}))},P=()=>{o(k=>(k+1)%v.length),c(0)},E=()=>{o(k=>(k-1+v.length)%v.length),c(0)},L=()=>{var k,D,z;m?(z=document.exitFullscreen)==null||z.call(document):(D=(k=p.current)==null?void 0:k.requestFullscreen)==null||D.call(k),f(!m)},T=()=>{u(!d),g.current&&(g.current.muted=!d)};if(v.length===0)return e.jsx($,{className:"p-8 text-center",children:e.jsx("p",{className:"text-muted-foreground",children:"No photos available for this slideshow"})});const M=v[i],F=t.transitionType==="fade"?"animate-fade-in":t.transitionType==="slide"?"animate-slide-in":t.transitionType==="zoom"?"animate-zoom-in":t.transitionType==="ken-burns"?"animate-ken-burns":"";return e.jsxs("div",{ref:p,className:"relative bg-black rounded-lg overflow-hidden","data-testid":"slideshow-player",children:[j&&j.songs.length>0&&e.jsx("audio",{ref:g,src:j.songs[0].url,loop:j.isLooped,muted:d,autoPlay:t.autoplay}),r&&e.jsx(O,{variant:"ghost",size:"icon",className:"absolute top-4 right-4 z-20 text-white hover:bg-white/20",onClick:r,"data-testid":"button-close-slideshow",children:e.jsx(Vo,{className:"w-5 h-5"})}),e.jsxs("div",{className:"relative aspect-video bg-black flex items-center justify-center",children:[e.jsx("img",{src:M.mediaUrl,alt:M.caption||"Memorial photo",className:`max-w-full max-h-full object-contain ${F}`,"data-testid":`slideshow-photo-${i}`},i),t.showCaptions&&M.caption&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-6",children:e.jsx("p",{className:"text-white text-lg","data-testid":"photo-caption",children:M.caption})})]}),e.jsx(Sl,{value:l,className:"absolute bottom-16 left-0 right-0 h-1 bg-white/20","data-testid":"slideshow-progress"}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/90 to-transparent p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20",onClick:_,"data-testid":"button-play-pause",children:n?e.jsx(RG,{className:"w-5 h-5"}):e.jsx(Bd,{className:"w-5 h-5"})}),e.jsx(O,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20",onClick:E,disabled:v.length<=1,"data-testid":"button-previous",children:e.jsx(BG,{className:"w-5 h-5"})}),e.jsx(O,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20",onClick:P,disabled:v.length<=1,"data-testid":"button-next",children:e.jsx(UG,{className:"w-5 h-5"})}),e.jsxs("span",{className:"text-white text-sm ml-2","data-testid":"photo-counter",children:[i+1," / ",v.length]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[j&&e.jsx(O,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20",onClick:T,"data-testid":"button-mute",children:d?e.jsx(WG,{className:"w-5 h-5"}):e.jsx(HG,{className:"w-5 h-5"})}),e.jsx(O,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20",onClick:L,"data-testid":"button-fullscreen",children:e.jsx(IG,{className:"w-5 h-5"})})]})]}),e.jsx("div",{className:"text-center mt-2",children:e.jsx("h3",{className:"text-white text-sm font-medium","data-testid":"slideshow-title",children:t.title})})]})]})}function zae(t,s){return N.useReducer((r,n)=>s[r][n]??r,t)}var T4="ScrollArea",[K9,Yge]=Dn(T4),[qae,po]=K9(T4),Y9=N.forwardRef((t,s)=>{const{__scopeScrollArea:r,type:n="hover",dir:a,scrollHideDelay:i=600,...o}=t,[l,c]=N.useState(null),[d,u]=N.useState(null),[m,f]=N.useState(null),[h,p]=N.useState(null),[g,y]=N.useState(null),[v,j]=N.useState(0),[w,_]=N.useState(0),[P,E]=N.useState(!1),[L,T]=N.useState(!1),M=us(s,k=>c(k)),F=Nm(a);return e.jsx(qae,{scope:r,type:n,dir:F,scrollHideDelay:i,scrollArea:l,viewport:d,onViewportChange:u,content:m,onContentChange:f,scrollbarX:h,onScrollbarXChange:p,scrollbarXEnabled:P,onScrollbarXEnabledChange:E,scrollbarY:g,onScrollbarYChange:y,scrollbarYEnabled:L,onScrollbarYEnabledChange:T,onCornerWidthChange:j,onCornerHeightChange:_,children:e.jsx(Dt.div,{dir:F,...o,ref:M,style:{position:"relative","--radix-scroll-area-corner-width":v+"px","--radix-scroll-area-corner-height":w+"px",...t.style}})})});Y9.displayName=T4;var G9="ScrollAreaViewport",Q9=N.forwardRef((t,s)=>{const{__scopeScrollArea:r,children:n,nonce:a,...i}=t,o=po(G9,r),l=N.useRef(null),c=us(s,l,o.onViewportChange);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),e.jsx(Dt.div,{"data-radix-scroll-area-viewport":"",...i,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...t.style},children:e.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});Q9.displayName=G9;var Rl="ScrollAreaScrollbar",M4=N.forwardRef((t,s)=>{const{forceMount:r,...n}=t,a=po(Rl,t.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=a,l=t.orientation==="horizontal";return N.useEffect(()=>(l?i(!0):o(!0),()=>{l?i(!1):o(!1)}),[l,i,o]),a.type==="hover"?e.jsx(Vae,{...n,ref:s,forceMount:r}):a.type==="scroll"?e.jsx(Hae,{...n,ref:s,forceMount:r}):a.type==="auto"?e.jsx(Z9,{...n,ref:s,forceMount:r}):a.type==="always"?e.jsx(L4,{...n,ref:s}):null});M4.displayName=Rl;var Vae=N.forwardRef((t,s)=>{const{forceMount:r,...n}=t,a=po(Rl,t.__scopeScrollArea),[i,o]=N.useState(!1);return N.useEffect(()=>{const l=a.scrollArea;let c=0;if(l){const d=()=>{window.clearTimeout(c),o(!0)},u=()=>{c=window.setTimeout(()=>o(!1),a.scrollHideDelay)};return l.addEventListener("pointerenter",d),l.addEventListener("pointerleave",u),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",d),l.removeEventListener("pointerleave",u)}}},[a.scrollArea,a.scrollHideDelay]),e.jsx(sa,{present:r||i,children:e.jsx(Z9,{"data-state":i?"visible":"hidden",...n,ref:s})})}),Hae=N.forwardRef((t,s)=>{const{forceMount:r,...n}=t,a=po(Rl,t.__scopeScrollArea),i=t.orientation==="horizontal",o=fj(()=>c("SCROLL_END"),100),[l,c]=zae("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return N.useEffect(()=>{if(l==="idle"){const d=window.setTimeout(()=>c("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(d)}},[l,a.scrollHideDelay,c]),N.useEffect(()=>{const d=a.viewport,u=i?"scrollLeft":"scrollTop";if(d){let m=d[u];const f=()=>{const h=d[u];m!==h&&(c("SCROLL"),o()),m=h};return d.addEventListener("scroll",f),()=>d.removeEventListener("scroll",f)}},[a.viewport,i,c,o]),e.jsx(sa,{present:r||l!=="hidden",children:e.jsx(L4,{"data-state":l==="hidden"?"hidden":"visible",...n,ref:s,onPointerEnter:ht(t.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:ht(t.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),Z9=N.forwardRef((t,s)=>{const r=po(Rl,t.__scopeScrollArea),{forceMount:n,...a}=t,[i,o]=N.useState(!1),l=t.orientation==="horizontal",c=fj(()=>{if(r.viewport){const d=r.viewport.offsetWidth<r.viewport.scrollWidth,u=r.viewport.offsetHeight<r.viewport.scrollHeight;o(l?d:u)}},10);return xf(r.viewport,c),xf(r.content,c),e.jsx(sa,{present:n||i,children:e.jsx(L4,{"data-state":i?"visible":"hidden",...a,ref:s})})}),L4=N.forwardRef((t,s)=>{const{orientation:r="vertical",...n}=t,a=po(Rl,t.__scopeScrollArea),i=N.useRef(null),o=N.useRef(0),[l,c]=N.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=s$(l.viewport,l.content),u={...n,sizes:l,onSizesChange:c,hasThumb:d>0&&d<1,onThumbChange:f=>i.current=f,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:f=>o.current=f};function m(f,h){return Zae(f,o.current,l,h)}return r==="horizontal"?e.jsx(Wae,{...u,ref:s,onThumbPositionChange:()=>{if(a.viewport&&i.current){const f=a.viewport.scrollLeft,h=u6(f,l,a.dir);i.current.style.transform=`translate3d(${h}px, 0, 0)`}},onWheelScroll:f=>{a.viewport&&(a.viewport.scrollLeft=f)},onDragScroll:f=>{a.viewport&&(a.viewport.scrollLeft=m(f,a.dir))}}):r==="vertical"?e.jsx(Kae,{...u,ref:s,onThumbPositionChange:()=>{if(a.viewport&&i.current){const f=a.viewport.scrollTop,h=u6(f,l);i.current.style.transform=`translate3d(0, ${h}px, 0)`}},onWheelScroll:f=>{a.viewport&&(a.viewport.scrollTop=f)},onDragScroll:f=>{a.viewport&&(a.viewport.scrollTop=m(f))}}):null}),Wae=N.forwardRef((t,s)=>{const{sizes:r,onSizesChange:n,...a}=t,i=po(Rl,t.__scopeScrollArea),[o,l]=N.useState(),c=N.useRef(null),d=us(s,c,i.onScrollbarXChange);return N.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),e.jsx(J9,{"data-orientation":"horizontal",...a,ref:d,sizes:r,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":hj(r)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.x),onDragScroll:u=>t.onDragScroll(u.x),onWheelScroll:(u,m)=>{if(i.viewport){const f=i.viewport.scrollLeft+u.deltaX;t.onWheelScroll(f),n$(f,m)&&u.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&n({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:n1(o.paddingLeft),paddingEnd:n1(o.paddingRight)}})}})}),Kae=N.forwardRef((t,s)=>{const{sizes:r,onSizesChange:n,...a}=t,i=po(Rl,t.__scopeScrollArea),[o,l]=N.useState(),c=N.useRef(null),d=us(s,c,i.onScrollbarYChange);return N.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),e.jsx(J9,{"data-orientation":"vertical",...a,ref:d,sizes:r,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":hj(r)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.y),onDragScroll:u=>t.onDragScroll(u.y),onWheelScroll:(u,m)=>{if(i.viewport){const f=i.viewport.scrollTop+u.deltaY;t.onWheelScroll(f),n$(f,m)&&u.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&n({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:n1(o.paddingTop),paddingEnd:n1(o.paddingBottom)}})}})}),[Yae,X9]=K9(Rl),J9=N.forwardRef((t,s)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:a,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:d,onWheelScroll:u,onResize:m,...f}=t,h=po(Rl,r),[p,g]=N.useState(null),y=us(s,M=>g(M)),v=N.useRef(null),j=N.useRef(""),w=h.viewport,_=n.content-n.viewport,P=Fr(u),E=Fr(c),L=fj(m,10);function T(M){if(v.current){const F=M.clientX-v.current.left,k=M.clientY-v.current.top;d({x:F,y:k})}}return N.useEffect(()=>{const M=F=>{const k=F.target;(p==null?void 0:p.contains(k))&&P(F,_)};return document.addEventListener("wheel",M,{passive:!1}),()=>document.removeEventListener("wheel",M,{passive:!1})},[w,p,_,P]),N.useEffect(E,[n,E]),xf(p,L),xf(h.content,L),e.jsx(Yae,{scope:r,scrollbar:p,hasThumb:a,onThumbChange:Fr(i),onThumbPointerUp:Fr(o),onThumbPositionChange:E,onThumbPointerDown:Fr(l),children:e.jsx(Dt.div,{...f,ref:y,style:{position:"absolute",...f.style},onPointerDown:ht(t.onPointerDown,M=>{M.button===0&&(M.target.setPointerCapture(M.pointerId),v.current=p.getBoundingClientRect(),j.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",h.viewport&&(h.viewport.style.scrollBehavior="auto"),T(M))}),onPointerMove:ht(t.onPointerMove,T),onPointerUp:ht(t.onPointerUp,M=>{const F=M.target;F.hasPointerCapture(M.pointerId)&&F.releasePointerCapture(M.pointerId),document.body.style.webkitUserSelect=j.current,h.viewport&&(h.viewport.style.scrollBehavior=""),v.current=null})})})}),r1="ScrollAreaThumb",e$=N.forwardRef((t,s)=>{const{forceMount:r,...n}=t,a=X9(r1,t.__scopeScrollArea);return e.jsx(sa,{present:r||a.hasThumb,children:e.jsx(Gae,{ref:s,...n})})}),Gae=N.forwardRef((t,s)=>{const{__scopeScrollArea:r,style:n,...a}=t,i=po(r1,r),o=X9(r1,r),{onThumbPositionChange:l}=o,c=us(s,m=>o.onThumbChange(m)),d=N.useRef(void 0),u=fj(()=>{d.current&&(d.current(),d.current=void 0)},100);return N.useEffect(()=>{const m=i.viewport;if(m){const f=()=>{if(u(),!d.current){const h=Xae(m,l);d.current=h,l()}};return l(),m.addEventListener("scroll",f),()=>m.removeEventListener("scroll",f)}},[i.viewport,u,l]),e.jsx(Dt.div,{"data-state":o.hasThumb?"visible":"hidden",...a,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:ht(t.onPointerDownCapture,m=>{const h=m.target.getBoundingClientRect(),p=m.clientX-h.left,g=m.clientY-h.top;o.onThumbPointerDown({x:p,y:g})}),onPointerUp:ht(t.onPointerUp,o.onThumbPointerUp)})});e$.displayName=r1;var D4="ScrollAreaCorner",t$=N.forwardRef((t,s)=>{const r=po(D4,t.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?e.jsx(Qae,{...t,ref:s}):null});t$.displayName=D4;var Qae=N.forwardRef((t,s)=>{const{__scopeScrollArea:r,...n}=t,a=po(D4,r),[i,o]=N.useState(0),[l,c]=N.useState(0),d=!!(i&&l);return xf(a.scrollbarX,()=>{var m;const u=((m=a.scrollbarX)==null?void 0:m.offsetHeight)||0;a.onCornerHeightChange(u),c(u)}),xf(a.scrollbarY,()=>{var m;const u=((m=a.scrollbarY)==null?void 0:m.offsetWidth)||0;a.onCornerWidthChange(u),o(u)}),d?e.jsx(Dt.div,{...n,ref:s,style:{width:i,height:l,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function n1(t){return t?parseInt(t,10):0}function s$(t,s){const r=t/s;return isNaN(r)?0:r}function hj(t){const s=s$(t.viewport,t.content),r=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,n=(t.scrollbar.size-r)*s;return Math.max(n,18)}function Zae(t,s,r,n="ltr"){const a=hj(r),i=a/2,o=s||i,l=a-o,c=r.scrollbar.paddingStart+o,d=r.scrollbar.size-r.scrollbar.paddingEnd-l,u=r.content-r.viewport,m=n==="ltr"?[0,u]:[u*-1,0];return r$([c,d],m)(t)}function u6(t,s,r="ltr"){const n=hj(s),a=s.scrollbar.paddingStart+s.scrollbar.paddingEnd,i=s.scrollbar.size-a,o=s.content-s.viewport,l=i-n,c=r==="ltr"?[0,o]:[o*-1,0],d=og(t,c);return r$([0,o],[0,l])(d)}function r$(t,s){return r=>{if(t[0]===t[1]||s[0]===s[1])return s[0];const n=(s[1]-s[0])/(t[1]-t[0]);return s[0]+n*(r-t[0])}}function n$(t,s){return t>0&&t<s}var Xae=(t,s=()=>{})=>{let r={left:t.scrollLeft,top:t.scrollTop},n=0;return function a(){const i={left:t.scrollLeft,top:t.scrollTop},o=r.left!==i.left,l=r.top!==i.top;(o||l)&&s(),r=i,n=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(n)};function fj(t,s){const r=Fr(t),n=N.useRef(0);return N.useEffect(()=>()=>window.clearTimeout(n.current),[]),N.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,s)},[r,s])}function xf(t,s){const r=Fr(s);gn(()=>{let n=0;if(t){const a=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return a.observe(t),()=>{window.cancelAnimationFrame(n),a.unobserve(t)}}},[t,r])}var a$=Y9,Jae=Q9,eie=t$;const Dl=N.forwardRef(({className:t,children:s,...r},n)=>e.jsxs(a$,{ref:n,className:bt("relative overflow-hidden",t),...r,children:[e.jsx(Jae,{className:"h-full w-full rounded-[inherit]",children:s}),e.jsx(i$,{}),e.jsx(eie,{})]}));Dl.displayName=a$.displayName;const i$=N.forwardRef(({className:t,orientation:s="vertical",...r},n)=>e.jsx(M4,{ref:n,orientation:s,className:bt("flex touch-none select-none transition-colors",s==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",s==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...r,children:e.jsx(e$,{className:"relative flex-1 rounded-full bg-border"})}));i$.displayName=M4.displayName;function o$({memorialId:t,canApprove:s=!1}){const{toast:r}=Ht(),[n,a]=N.useState(!1),[i,o]=N.useState(!1),[l,c]=N.useState(null),[d,u]=N.useState(null);N.useState(!1);const[m,f]=N.useState(null),h=N.useRef(null),p=N.useRef(null),g=N.useRef(null),y=N.useRef([]),[v,j]=N.useState(""),[w,_]=N.useState(""),[P,E]=N.useState(""),[L,T]=N.useState(""),[M,F]=N.useState(!1),{data:k=[],isLoading:D}=Xe({queryKey:[`/api/memorials/${t}/video-condolences`,s],queryFn:async()=>{const je=await fetch(`/api/memorials/${t}/video-condolences${s?"?includePrivate=true":""}`);if(!je.ok)throw new Error("Failed to fetch video condolences");return je.json()}}),z=yt({mutationFn:async se=>{const je="https://example.com/video.mp4";return pt(`/api/memorials/${t}/video-condolences`,{method:"POST",body:JSON.stringify({videoUrl:je,thumbnailUrl:je+".thumbnail.jpg",name:v,email:w,relationship:P,transcription:L,duration:60,isPrivate:M})})},onSuccess:()=>{xt.invalidateQueries({queryKey:[`/api/memorials/${t}/video-condolences`]}),a(!1),Q(),r({title:"Video Submitted",description:"Your video condolence has been submitted for approval."})},onError:()=>{r({title:"Error",description:"Failed to submit video. Please try again.",variant:"destructive"})}}),W=yt({mutationFn:async se=>pt(`/api/video-condolences/${se}/approve`,{method:"POST"}),onSuccess:()=>{xt.invalidateQueries({queryKey:[`/api/memorials/${t}/video-condolences`]}),r({title:"Video Approved",description:"The video condolence is now visible on the memorial."})}}),ue=yt({mutationFn:async se=>pt(`/api/video-condolences/${se}`,{method:"DELETE"}),onSuccess:()=>{xt.invalidateQueries({queryKey:[`/api/memorials/${t}/video-condolences`]}),r({title:"Video Removed",description:"The video condolence has been removed."})}}),ae=yt({mutationFn:async se=>pt(`/api/video-condolences/${se}/view`,{method:"POST"})}),Ne=async()=>{try{const se=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0});g.current=se,h.current&&(h.current.srcObject=se);const je=new MediaRecorder(se);p.current=je,y.current=[],je.ondataavailable=be=>{be.data.size>0&&y.current.push(be.data)},je.onstop=()=>{const be=new Blob(y.current,{type:"video/webm"});c(be),u(URL.createObjectURL(be))},je.start(),o(!0)}catch{r({title:"Permission Denied",description:"Please allow camera and microphone access to record a video.",variant:"destructive"})}},K=()=>{var se;p.current&&i&&(p.current.stop(),(se=g.current)==null||se.getTracks().forEach(je=>je.stop()),o(!1))},Q=()=>{j(""),_(""),E(""),T(""),F(!1),c(null),u(null)},ke=se=>{var be;const je=(be=se.target.files)==null?void 0:be[0];je&&(c(je),u(URL.createObjectURL(je)))},G=()=>{if(!l){r({title:"No Video",description:"Please record or upload a video first.",variant:"destructive"});return}const se=new FormData;se.append("video",l),z.mutate(se)},I=se=>{f(se),ae.mutate(se.id)};N.useEffect(()=>()=>{d&&URL.revokeObjectURL(d)},[d]);const Z=k.filter(se=>se.isApproved),J=k.filter(se=>!se.isApproved);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Video Condolences"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Share your memories and condolences through video messages"})]}),e.jsxs(O,{onClick:()=>a(!0),"data-testid":"button-add-video-condolence",children:[e.jsx(ta,{className:"w-4 h-4 mr-2"}),"Record Condolence"]})]}),s&&J.length>0&&e.jsxs($,{className:"p-4",children:[e.jsxs("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[e.jsx(Mr,{className:"w-4 h-4"}),"Pending Approval (",J.length,")"]}),e.jsx(Dl,{className:"h-[200px]",children:e.jsx("div",{className:"space-y-2",children:J.map(se=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg","data-testid":`pending-video-${se.id}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative w-20 h-12 bg-black rounded overflow-hidden",children:[e.jsx("img",{src:se.thumbnailUrl,alt:"",className:"w-full h-full object-cover"}),e.jsx(O,{size:"sm",variant:"ghost",className:"absolute inset-0 hover:bg-black/50",onClick:()=>I(se),"data-testid":`button-preview-${se.id}`,children:e.jsx(Bd,{className:"w-4 h-4 text-white"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:se.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:se.relationship})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(O,{size:"sm",variant:"outline",onClick:()=>W.mutate(se.id),"data-testid":`button-approve-${se.id}`,children:e.jsx($n,{className:"w-4 h-4"})}),e.jsx(O,{size:"sm",variant:"outline",onClick:()=>ue.mutate(se.id),"data-testid":`button-reject-${se.id}`,children:e.jsx(Vo,{className:"w-4 h-4"})})]})]},se.id))})})]}),Z.length>0?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:Z.map(se=>e.jsxs($,{className:"overflow-hidden hover-elevate cursor-pointer",onClick:()=>I(se),"data-testid":`video-card-${se.id}`,children:[e.jsxs("div",{className:"relative aspect-video bg-black",children:[e.jsx("img",{src:se.thumbnailUrl,alt:"",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-12 h-12 bg-black/60 rounded-full flex items-center justify-center",children:e.jsx(Bd,{className:"w-6 h-6 text-white ml-0.5"})})}),e.jsxs("div",{className:"absolute bottom-2 right-2 bg-black/60 px-2 py-1 rounded text-xs text-white",children:[Math.floor(se.duration/60),":",String(se.duration%60).padStart(2,"0")]})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("p",{className:"font-medium",children:se.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:se.relationship}),se.isPrivate&&e.jsxs(ze,{variant:"secondary",className:"mt-2",children:[e.jsx(VI,{className:"w-3 h-3 mr-1"}),"Private"]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-muted-foreground",children:[e.jsx(Ei,{className:"w-3 h-3"}),se.viewCount||0," views"]})]})]},se.id))}):e.jsxs($,{className:"p-8 text-center",children:[e.jsx(ta,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("p",{className:"text-muted-foreground",children:"No video condolences yet"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Be the first to share a video message"})]}),e.jsx(Os,{open:n,onOpenChange:a,children:e.jsxs(Ds,{className:"max-w-2xl","data-testid":"dialog-record-video",children:[e.jsxs(Is,{children:[e.jsx(Rs,{children:"Record Video Condolence"}),e.jsx(Lr,{children:"Record a personal video message to honor their memory"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative aspect-video bg-black rounded-lg overflow-hidden",children:[e.jsx("video",{ref:h,autoPlay:!0,playsInline:!0,muted:i,src:d||void 0,className:"w-full h-full object-cover","data-testid":"video-preview"}),i&&e.jsxs("div",{className:"absolute top-4 left-4 flex items-center gap-2 bg-red-600 text-white px-3 py-1 rounded-full",children:[e.jsx(dw,{className:"w-4 h-4 animate-pulse"}),e.jsx("span",{className:"text-sm",children:"Recording"})]})]}),e.jsx("div",{className:"flex justify-center gap-4",children:d?e.jsx(e.Fragment,{children:e.jsx(O,{variant:"outline",onClick:Q,"data-testid":"button-retake",children:"Retake"})}):e.jsxs(e.Fragment,{children:[e.jsx(O,{onClick:i?K:Ne,variant:i?"destructive":"default","data-testid":"button-record",children:i?e.jsxs(e.Fragment,{children:[e.jsx(q1,{className:"w-4 h-4 mr-2"}),"Stop Recording"]}):e.jsxs(e.Fragment,{children:[e.jsx(dw,{className:"w-4 h-4 mr-2"}),"Start Recording"]})}),e.jsxs(O,{variant:"outline",onClick:()=>{var se;return(se=document.getElementById("video-upload"))==null?void 0:se.click()},"data-testid":"button-upload-video",children:[e.jsx(zd,{className:"w-4 h-4 mr-2"}),"Upload Video"]}),e.jsx("input",{id:"video-upload",type:"file",accept:"video/*",className:"hidden",onChange:ke})]})}),d&&e.jsxs("div",{className:"space-y-4 border-t pt-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(De,{htmlFor:"name",children:"Your Name"}),e.jsx(re,{id:"name",value:v,onChange:se=>j(se.target.value),placeholder:"John Doe",required:!0,"data-testid":"input-condolence-name"})]}),e.jsxs("div",{children:[e.jsx(De,{htmlFor:"email",children:"Email"}),e.jsx(re,{id:"email",type:"email",value:w,onChange:se=>_(se.target.value),placeholder:"john@example.com",required:!0,"data-testid":"input-condolence-email"})]})]}),e.jsxs("div",{children:[e.jsx(De,{htmlFor:"relationship",children:"Relationship"}),e.jsx(re,{id:"relationship",value:P,onChange:se=>E(se.target.value),placeholder:"e.g., Friend, Colleague, Family","data-testid":"input-relationship"})]}),e.jsxs("div",{children:[e.jsx(De,{htmlFor:"message",children:"Message (Optional)"}),e.jsx(Gt,{id:"message",value:L,onChange:se=>T(se.target.value),placeholder:"Share a memory or message...",rows:3,"data-testid":"textarea-message"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(De,{htmlFor:"is-private",className:"flex-1",children:["Keep Private",e.jsx("p",{className:"text-xs text-muted-foreground",children:"Only memorial admins can view private messages"})]}),e.jsx(ir,{id:"is-private",checked:M,onCheckedChange:F,"data-testid":"switch-private"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[e.jsx(O,{variant:"outline",onClick:()=>a(!1),"data-testid":"button-cancel-video",children:"Cancel"}),d&&e.jsx(O,{onClick:G,disabled:!v||!w||z.isPending,"data-testid":"button-submit-video",children:z.isPending?"Submitting...":"Submit Video"})]})]})}),m&&e.jsx(Os,{open:!!m,onOpenChange:()=>f(null),children:e.jsxs(Ds,{className:"max-w-3xl","data-testid":"dialog-video-player",children:[e.jsxs(Is,{children:[e.jsxs(Rs,{children:[m.name,"'s Message"]}),e.jsx(Lr,{children:m.relationship})]}),e.jsx("div",{className:"aspect-video bg-black rounded-lg overflow-hidden",children:e.jsx("video",{src:m.videoUrl,controls:!0,autoPlay:!0,className:"w-full h-full","data-testid":"video-player"})}),m.transcription&&e.jsx("div",{className:"p-4 bg-muted rounded-lg",children:e.jsx("p",{className:"text-sm",children:m.transcription})})]})})]})}function m6(t,s,r){const n=Cne(),a=rie(t,r.timeZone,r.locale??n.locale);return"formatToParts"in a?tie(a,s):sie(a,s)}function tie(t,s){const r=t.formatToParts(s);for(let n=r.length-1;n>=0;--n)if(r[n].type==="timeZoneName")return r[n].value}function sie(t,s){const r=t.format(s).replace(/\u200E/g,""),n=/ [\w-+ ]+$/.exec(r);return n?n[0].substr(1):""}function rie(t,s,r){return new Intl.DateTimeFormat(r?[r.code,"en-US"]:void 0,{timeZone:s,timeZoneName:t})}function nie(t,s){const r=cie(s);return"formatToParts"in r?iie(r,t):oie(r,t)}const aie={year:0,month:1,day:2,hour:3,minute:4,second:5};function iie(t,s){try{const r=t.formatToParts(s),n=[];for(let a=0;a<r.length;a++){const i=aie[r[a].type];i!==void 0&&(n[i]=parseInt(r[a].value,10))}return n}catch(r){if(r instanceof RangeError)return[NaN];throw r}}function oie(t,s){const r=t.format(s),n=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(r);return[parseInt(n[3],10),parseInt(n[1],10),parseInt(n[2],10),parseInt(n[4],10),parseInt(n[5],10),parseInt(n[6],10)]}const c2={},h6=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:"America/New_York",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),lie=h6==="06/25/2014, 00:00:00"||h6==="06/25/2014 00:00:00";function cie(t){return c2[t]||(c2[t]=lie?new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:t,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})),c2[t]}function I4(t,s,r,n,a,i,o){const l=new Date(0);return l.setUTCFullYear(t,s,r),l.setUTCHours(n,a,i,o),l}const f6=36e5,die=6e4,d2={timezone:/([Z+-].*)$/,timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/};function pj(t,s,r){if(!t)return 0;let n=d2.timezoneZ.exec(t);if(n)return 0;let a,i;if(n=d2.timezoneHH.exec(t),n)return a=parseInt(n[1],10),p6(a)?-(a*f6):NaN;if(n=d2.timezoneHHMM.exec(t),n){a=parseInt(n[2],10);const o=parseInt(n[3],10);return p6(a,o)?(i=Math.abs(a)*f6+o*die,n[1]==="+"?-i:i):NaN}if(hie(t)){s=new Date(s||Date.now());const o=r?s:uie(s),l=Ow(o,t);return-(r?l:mie(s,l,t))}return NaN}function uie(t){return I4(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())}function Ow(t,s){const r=nie(t,s),n=I4(r[0],r[1]-1,r[2],r[3]%24,r[4],r[5],0).getTime();let a=t.getTime();const i=a%1e3;return a-=i>=0?i:1e3+i,n-a}function mie(t,s,r){let a=t.getTime()-s;const i=Ow(new Date(a),r);if(s===i)return s;a-=i-s;const o=Ow(new Date(a),r);return i===o?i:Math.max(i,o)}function p6(t,s){return-23<=t&&t<=23&&(s==null||0<=s&&s<=59)}const x6={};function hie(t){if(x6[t])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:t}),x6[t]=!0,!0}catch{return!1}}const fie=60*1e3,pie={X:function(t,s,r){const n=u2(r.timeZone,t);if(n===0)return"Z";switch(s){case"X":return g6(n);case"XXXX":case"XX":return Jm(n);case"XXXXX":case"XXX":default:return Jm(n,":")}},x:function(t,s,r){const n=u2(r.timeZone,t);switch(s){case"x":return g6(n);case"xxxx":case"xx":return Jm(n);case"xxxxx":case"xxx":default:return Jm(n,":")}},O:function(t,s,r){const n=u2(r.timeZone,t);switch(s){case"O":case"OO":case"OOO":return"GMT"+xie(n,":");case"OOOO":default:return"GMT"+Jm(n,":")}},z:function(t,s,r){switch(s){case"z":case"zz":case"zzz":return m6("short",t,r);case"zzzz":default:return m6("long",t,r)}}};function u2(t,s){const r=t?pj(t,s,!0)/fie:(s==null?void 0:s.getTimezoneOffset())??0;if(Number.isNaN(r))throw new RangeError("Invalid time zone specified: "+t);return r}function a1(t,s){const r=t<0?"-":"";let n=Math.abs(t).toString();for(;n.length<s;)n="0"+n;return r+n}function Jm(t,s=""){const r=t>0?"-":"+",n=Math.abs(t),a=a1(Math.floor(n/60),2),i=a1(Math.floor(n%60),2);return r+a+s+i}function g6(t,s){return t%60===0?(t>0?"-":"+")+a1(Math.abs(t)/60,2):Jm(t,s)}function xie(t,s=""){const r=t>0?"-":"+",n=Math.abs(t),a=Math.floor(n/60),i=n%60;return i===0?r+String(a):r+String(a)+s+a1(i,2)}function v6(t){const s=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return s.setUTCFullYear(t.getFullYear()),+t-+s}const l$=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,m2=36e5,y6=6e4,gie=2,Ta={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,plainTime:/:/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:l$};function i1(t,s={}){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(t===null)return new Date(NaN);const r=s.additionalDigits==null?gie:Number(s.additionalDigits);if(r!==2&&r!==1&&r!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]")return new Date(t.getTime());if(typeof t=="number"||Object.prototype.toString.call(t)==="[object Number]")return new Date(t);if(Object.prototype.toString.call(t)!=="[object String]")return new Date(NaN);const n=vie(t),{year:a,restDateString:i}=yie(n.date,r),o=jie(i,a);if(o===null||isNaN(o.getTime()))return new Date(NaN);if(o){const l=o.getTime();let c=0,d;if(n.time&&(c=bie(n.time),c===null||isNaN(c)))return new Date(NaN);if(n.timeZone||s.timeZone){if(d=pj(n.timeZone||s.timeZone,new Date(l+c)),isNaN(d))return new Date(NaN)}else d=v6(new Date(l+c)),d=v6(new Date(l+c+d));return new Date(l+c+d)}else return new Date(NaN)}function vie(t){const s={};let r=Ta.dateTimePattern.exec(t),n;if(r?(s.date=r[1],n=r[3]):(r=Ta.datePattern.exec(t),r?(s.date=r[1],n=r[2]):(s.date=null,n=t)),n){const a=Ta.timeZone.exec(n);a?(s.time=n.replace(a[1],""),s.timeZone=a[1].trim()):s.time=n}return s}function yie(t,s){if(t){const r=Ta.YYY[s],n=Ta.YYYYY[s];let a=Ta.YYYY.exec(t)||n.exec(t);if(a){const i=a[1];return{year:parseInt(i,10),restDateString:t.slice(i.length)}}if(a=Ta.YY.exec(t)||r.exec(t),a){const i=a[1];return{year:parseInt(i,10)*100,restDateString:t.slice(i.length)}}}return{year:null}}function jie(t,s){if(s===null)return null;let r,n,a;if(!t||!t.length)return r=new Date(0),r.setUTCFullYear(s),r;let i=Ta.MM.exec(t);if(i)return r=new Date(0),n=parseInt(i[1],10)-1,b6(s,n)?(r.setUTCFullYear(s,n),r):new Date(NaN);if(i=Ta.DDD.exec(t),i){r=new Date(0);const o=parseInt(i[1],10);return _ie(s,o)?(r.setUTCFullYear(s,0,o),r):new Date(NaN)}if(i=Ta.MMDD.exec(t),i){r=new Date(0),n=parseInt(i[1],10)-1;const o=parseInt(i[2],10);return b6(s,n,o)?(r.setUTCFullYear(s,n,o),r):new Date(NaN)}if(i=Ta.Www.exec(t),i)return a=parseInt(i[1],10)-1,N6(a)?j6(s,a):new Date(NaN);if(i=Ta.WwwD.exec(t),i){a=parseInt(i[1],10)-1;const o=parseInt(i[2],10)-1;return N6(a,o)?j6(s,a,o):new Date(NaN)}return null}function bie(t){let s,r,n=Ta.HH.exec(t);if(n)return s=parseFloat(n[1].replace(",",".")),h2(s)?s%24*m2:NaN;if(n=Ta.HHMM.exec(t),n)return s=parseInt(n[1],10),r=parseFloat(n[2].replace(",",".")),h2(s,r)?s%24*m2+r*y6:NaN;if(n=Ta.HHMMSS.exec(t),n){s=parseInt(n[1],10),r=parseInt(n[2],10);const a=parseFloat(n[3].replace(",","."));return h2(s,r,a)?s%24*m2+r*y6+a*1e3:NaN}return null}function j6(t,s,r){s=s||0,r=r||0;const n=new Date(0);n.setUTCFullYear(t,0,4);const a=n.getUTCDay()||7,i=s*7+r+1-a;return n.setUTCDate(n.getUTCDate()+i),n}const Nie=[31,28,31,30,31,30,31,31,30,31,30,31],wie=[31,29,31,30,31,30,31,31,30,31,30,31];function c$(t){return t%400===0||t%4===0&&t%100!==0}function b6(t,s,r){if(s<0||s>11)return!1;if(r!=null){if(r<1)return!1;const n=c$(t);if(n&&r>wie[s]||!n&&r>Nie[s])return!1}return!0}function _ie(t,s){if(s<1)return!1;const r=c$(t);return!(r&&s>366||!r&&s>365)}function N6(t,s){return!(t<0||t>52||s!=null&&(s<0||s>6))}function h2(t,s,r){return!(t<0||t>=25||s!=null&&(s<0||s>=60)||r!=null&&(r<0||r>=60))}const Sie=/([xXOz]+)|''|'(''|[^'])+('|$)/g;function Cie(t,s,r={}){s=String(s);const n=s.match(Sie);if(n){const a=i1(r.originalDate||t,r);s=n.reduce(function(i,o){if(o[0]==="'")return i;const l=i.indexOf(o),c=i[l-1]==="'",d=i.replace(o,"'"+pie[o[0]](a,o,r)+"'");return c?d.substring(0,l-1)+d.substring(l+1):d},s)}return Pr(t,s,r)}function kie(t,s,r){t=i1(t,r);const n=pj(s,t,!0),a=new Date(t.getTime()-n),i=new Date(0);return i.setFullYear(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()),i.setHours(a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds()),i}function d$(t,s,r,n){return n={...n,timeZone:s,originalDate:t},Cie(kie(t,s,{timeZone:n.timeZone}),r,n)}function u$(t,s,r){if(typeof t=="string"&&!t.match(l$))return i1(t,{...r,timeZone:s});t=i1(t,r);const n=I4(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()).getTime(),a=pj(s,new Date(n));return new Date(n+a)}const Aie={birthday:"Birthday",graduation:"Graduation",wedding:"Wedding",anniversary:"Anniversary",baby_birth:"Baby Birth",holiday:"Holiday",custom:"Special Milestone"};function Pie({capsule:t}){const s=N.useRef(null),[r,n]=N.useState(!1),[a,i]=N.useState(0),o=yt({mutationFn:async l=>await(await pt("POST",`/api/video-time-capsules/${t.id}/view`,{viewDuration:l.viewDuration,completedVideo:l.completedVideo,viewerName:null,viewerEmail:null})).json()});return N.useEffect(()=>{const l=s.current;if(!l)return;let c=0,d=0;const u=()=>{c=Date.now()},m=()=>{if(c>0){const p=(Date.now()-c)/1e3;d+=p,i(d),c=0}},f=()=>{if(c>0){const p=(Date.now()-c)/1e3;d+=p}r||(o.mutate({viewDuration:Math.round(d),completedVideo:!0}),n(!0))},h=()=>{l.currentTime>=3&&!r&&(o.mutate({viewDuration:Math.round(l.currentTime),completedVideo:!1}),n(!0))};return l.addEventListener("play",u),l.addEventListener("pause",m),l.addEventListener("ended",f),l.addEventListener("timeupdate",h),()=>{l.removeEventListener("play",u),l.removeEventListener("pause",m),l.removeEventListener("ended",f),l.removeEventListener("timeupdate",h)}},[t.id,r]),e.jsx("div",{className:"relative w-full aspect-video bg-black rounded-md overflow-hidden",children:e.jsxs("video",{ref:s,className:"w-full h-full",controls:!0,poster:t.thumbnailUrl,"data-testid":`video-player-${t.id}`,children:[e.jsx("source",{src:t.videoUrl,type:"video/mp4"}),e.jsx("source",{src:t.videoUrl,type:"video/webm"}),e.jsx("source",{src:t.videoUrl,type:"video/ogg"}),"Your browser does not support the video tag."]})})}function Eie({memorialId:t}){const{data:s}=Xe({queryKey:[`/api/memorials/${t}`]}),{data:r=[],isLoading:n}=Xe({queryKey:["/api/memorials",t,"video-time-capsules","released"]}),a=(i,o=!0)=>{if(!i)return"Not set";const l=(s==null?void 0:s.timezone)||"America/New_York";return d$(i,l,o?"MMM d, yyyy h:mm a zzz":"MMM d, yyyy")};return n?e.jsx("div",{className:"py-8",children:e.jsx("p",{className:"text-center text-muted-foreground","data-testid":"text-loading-capsules",children:"Loading video time capsules..."})}):r.length===0?null:e.jsxs("div",{className:"space-y-6","data-testid":"section-video-time-capsules",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground mb-2","data-testid":"heading-video-capsules",children:"Video Time Capsules"}),e.jsx("p",{className:"text-muted-foreground",children:"Pre-recorded video messages released on special milestones"})]}),e.jsx("div",{className:"grid gap-6",children:r.map(i=>e.jsxs($,{"data-testid":`card-video-capsule-${i.id}`,children:[e.jsx(le,{children:e.jsx("div",{className:"flex items-start justify-between gap-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ge,{className:"text-xl","data-testid":`title-video-capsule-${i.id}`,children:i.title}),e.jsx(ze,{className:"bg-green-600","data-testid":`badge-released-${i.id}`,children:"Released"})]}),i.description&&e.jsx($e,{"data-testid":`description-video-capsule-${i.id}`,children:i.description})]})})}),e.jsxs(V,{className:"space-y-4",children:[e.jsx(Pie,{capsule:i}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground mb-1",children:"Milestone"}),e.jsxs("p",{className:"font-medium flex items-center gap-2","data-testid":`milestone-video-${i.id}`,children:[e.jsx(ds,{className:"w-4 h-4"}),i.milestoneType==="custom"&&i.customMilestoneName?i.customMilestoneName:Aie[i.milestoneType]||i.milestoneType]})]}),i.recipientName&&e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground mb-1",children:"For"}),e.jsxs("p",{className:"font-medium flex items-center gap-2","data-testid":`recipient-video-${i.id}`,children:[e.jsx(eu,{className:"w-4 h-4"}),i.recipientName,i.recipientRelationship&&` (${i.recipientRelationship})`]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground mb-1",children:"Released"}),e.jsxs("p",{className:"font-medium flex items-center gap-2","data-testid":`released-date-${i.id}`,children:[e.jsx(Mr,{className:"w-4 h-4"}),i.releasedAt?a(i.releasedAt):a(u$(`${i.releaseDate}T${i.releaseTime||"00:00:00"}`,(s==null?void 0:s.timezone)||"America/New_York").toISOString())]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground mb-1",children:"Views"}),e.jsxs("p",{className:"font-medium flex items-center gap-2","data-testid":`views-video-${i.id}`,children:[e.jsx(Ei,{className:"w-4 h-4"}),i.viewCount]})]})]}),i.isRecurring&&e.jsx("div",{className:"p-3 bg-purple-50 dark:bg-purple-950 rounded-md",children:e.jsxs("p",{className:"text-sm font-medium text-purple-900 dark:text-purple-100",children:["This is a recurring video message released every year",i.releasedCount>1&&` (Released ${i.releasedCount} times)`]})})]})]},i.id))})]})}const m$=async t=>{try{await fetch("/api/analytics/pageview",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:t})})}catch(s){console.error("Failed to track page view:",s)}typeof window>"u"||window.gtag},iy=async(t,s,r,n,a)=>{try{await fetch("/api/analytics/event",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({eventName:t,eventCategory:s,eventLabel:r,eventValue:n,metadata:a})})}catch(i){console.error("Failed to track event:",i)}typeof window>"u"||!window.gtag||window.gtag("event",t,{event_category:s,event_label:r,value:n})};function Tie(){var be;const t=Ba(),[s,r]=N.useState(!1),[n,a]=N.useState(!1),[i,o]=N.useState(!1),[l,c]=N.useState(t.id||null),[d,u]=N.useState(!1),{toast:m}=Ht(),{user:f,isAuthenticated:h}=fo(),p=q=>{if(!q)return!1;const Te=q.split("?")[0].split("#")[0];return/\.(mp4|webm|ogg|mov|m4v)$/i.test(Te)},g=q=>q?q.includes("youtube.com")||q.includes("youtu.be"):!1,y=q=>q?q.includes("vimeo.com"):!1,v=q=>{if(!q)return!1;const Te=q.split("?")[0].split("#")[0];return/\.(m3u8|mpd|dash|f4m)$/i.test(Te)},j=q=>{const Te=q.match(/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/);return Te?`https://www.youtube.com/embed/${Te[1]}`:null},w=q=>{const Te=q.match(/vimeo\.com\/(\d+)/);return Te?`https://player.vimeo.com/video/${Te[1]}`:null},_=yt({mutationFn:async q=>await(await pt("POST","/api/memorials/validate-code",{inviteCode:q})).json(),onSuccess:q=>{c(q.id),u(!0),r(!1),m({title:"Access Granted",description:`Welcome to ${q.name}'s memorial.`})},onError:()=>{m({title:"Invalid Code",description:"The access code you entered is incorrect. Please try again.",variant:"destructive"})}}),{data:P,isLoading:E,isError:L,refetch:T}=Xe({queryKey:[`/api/memorials/${l}`],enabled:!!l,retry:2,retryDelay:1e3}),{data:M=[]}=Xe({queryKey:[`/api/memorials/${l}/memories`],enabled:!!l}),{data:F=[]}=Xe({queryKey:[`/api/memorials/${l}/condolences`],enabled:!!l}),{data:k=[]}=Xe({queryKey:[`/api/memorials/${l}/fundraisers`],enabled:!!l}),{data:D=[]}=Xe({queryKey:[`/api/memorials/${l}/legacy-events`],enabled:!!l}),{data:z}=Xe({queryKey:[`/api/memorials/${l}/playlist`],enabled:!!l}),{data:W}=Xe({queryKey:[`/api/memorials/${l}/funeral-program`],enabled:!!l,retry:!1}),ue=M.filter(q=>q.isApproved),ae=k[0],{data:Ne=[]}=Xe({queryKey:[`/api/memorials/${l}/live-streams`],enabled:!!l}),K=Ne.filter(q=>q.isActive);Xe({queryKey:[`/api/fundraisers/${ae==null?void 0:ae.id}/donations`],enabled:!!(ae!=null&&ae.id)}),Xe({queryKey:[`/api/memorials/${l}/symbols`],enabled:!!l});const{data:Q=[]}=Xe({queryKey:[`/api/memorials/${l}/slideshows`],enabled:!!l});Xe({queryKey:[`/api/memorials/${l}/video-condolences`],enabled:!!l}),N.useEffect(()=>{const q=new URLSearchParams(window.location.search),Te=q.get("code")||q.get("inviteCode");Te&&_.mutate(Te)},[]),N.useEffect(()=>{if(P&&!P.isPublic&&!d&&!s){const q=new URLSearchParams(window.location.search);q.get("code")||q.get("inviteCode")||r(!0)}},[P,d]),N.useEffect(()=>{P&&(m$(`/memorial/${P.id}`),iy("memorial_view","memorial",P.name,void 0,{memorialId:P.id,memorialName:P.name}))},[P]);const{data:ke}=Xe({queryKey:[`/api/saved-memorials/${l}`],enabled:!!l&&h,retry:!1}),G=(ke==null?void 0:ke.isSaved)||!1,I=async()=>{if(iy("memorial_share","memorial",P==null?void 0:P.name,void 0,{memorialId:P==null?void 0:P.id,memorialName:P==null?void 0:P.name}),navigator.share)try{await navigator.share({title:`Memorial for ${P==null?void 0:P.name}`,text:`Remember ${P==null?void 0:P.name} - ${je}`,url:window.location.href}),m({title:"Memorial Shared",description:"Thank you for sharing this memorial."})}catch{}else navigator.clipboard.writeText(window.location.href),m({title:"Link Copied",description:"Memorial link copied to clipboard."})},Z=()=>{m({title:"Login Required",description:"Please log in to interact with this memorial.",variant:"default"}),window.location.href="/api/login"},J=yt({mutationFn:async()=>pt("DELETE",`/api/saved-memorials/${l}`,{}),onSuccess:()=>{xt.invalidateQueries({queryKey:[`/api/saved-memorials/${l}`]}),xt.invalidateQueries({queryKey:["/api/saved-memorials"]}),m({title:"Memorial Removed",description:"Memorial removed from your saved list."}),iy("memorial_unsave","memorial",P==null?void 0:P.name,void 0,{memorialId:P==null?void 0:P.id,memorialName:P==null?void 0:P.name})}}),se=()=>{if(l){if(!h){m({title:"Login Required",description:"Please log in to save memorials.",variant:"default"}),window.location.href="/api/login";return}G?J.mutate():(o(!0),iy("memorial_save_initiated","memorial",P==null?void 0:P.name,void 0,{memorialId:P==null?void 0:P.id,memorialName:P==null?void 0:P.name}))}};if(l&&E)return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsxs("div",{className:"relative h-[600px] md:h-[700px] w-full overflow-hidden bg-gradient-to-br from-primary/20 to-primary/5",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/40 to-transparent"}),e.jsx("div",{className:"relative h-full flex flex-col justify-center items-center text-center px-4",children:e.jsxs("div",{className:"max-w-5xl mx-auto space-y-8 w-full",children:[e.jsx(tt,{className:"h-8 w-48 mx-auto rounded-full"}),e.jsx(tt,{className:"h-24 w-[500px] max-w-full mx-auto"}),e.jsx(tt,{className:"h-12 w-64 mx-auto rounded-full"}),e.jsxs("div",{className:"flex justify-center gap-8 mt-16",children:[e.jsx(tt,{className:"h-20 w-24"}),e.jsx(tt,{className:"h-20 w-24"}),e.jsx(tt,{className:"h-20 w-24"})]})]})})]}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-12",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-8",children:[e.jsx(tn,{className:"w-6 h-6 animate-spin text-primary"}),e.jsx("p",{className:"text-muted-foreground","data-testid":"text-loading",children:"Loading memorial..."})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-3 mb-8",children:[e.jsx(tt,{className:"h-32"}),e.jsx(tt,{className:"h-32"}),e.jsx(tt,{className:"h-32"})]}),e.jsx(tt,{className:"h-96 w-full"})]})]});if(l&&L)return e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-background",children:[e.jsx(n2,{open:s,onOpenChange:r,onSubmit:q=>{_.mutate(q)}}),e.jsxs($,{className:"max-w-lg mx-4","data-testid":"card-error",children:[e.jsxs(le,{className:"text-center",children:[e.jsx("div",{className:"mx-auto w-16 h-16 rounded-full bg-destructive/10 flex items-center justify-center mb-4",children:e.jsx(or,{className:"w-8 h-8 text-destructive"})}),e.jsx(ge,{className:"text-2xl","data-testid":"text-error-title",children:"Memorial Not Found"}),e.jsx($e,{className:"text-base","data-testid":"text-error-message",children:"We couldn't find this memorial. It may have been removed, made private, or you may need an access code to view it."})]}),e.jsxs(V,{className:"space-y-3",children:[e.jsxs(O,{className:"w-full",onClick:()=>T(),"data-testid":"button-retry",children:[e.jsx(A_,{className:"w-4 h-4 mr-2"}),"Try Again"]}),e.jsxs(O,{variant:"outline",className:"w-full",onClick:()=>r(!0),"data-testid":"button-enter-code",children:[e.jsx(or,{className:"w-4 h-4 mr-2"}),"Enter Access Code"]}),e.jsx(O,{variant:"ghost",className:"w-full",onClick:()=>window.history.back(),"data-testid":"button-go-back",children:"Go Back"})]})]})]});if(!l)return e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-background",children:[e.jsx(n2,{open:s,onOpenChange:r,onSubmit:q=>{_.mutate(q)}}),e.jsxs($,{className:"max-w-lg mx-4",children:[e.jsxs(le,{className:"text-center",children:[e.jsx("div",{className:"mx-auto w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center mb-4",children:e.jsx(or,{className:"w-8 h-8 text-primary"})}),e.jsx(ge,{className:"text-2xl",children:"Private Memorial"}),e.jsx($e,{className:"text-base",children:"This memorial is private. Please enter an access code to continue."})]}),e.jsx(V,{children:e.jsxs(O,{className:"w-full",onClick:()=>r(!0),"data-testid":"button-enter-code",children:[e.jsx(or,{className:"w-4 h-4 mr-2"}),"Enter Access Code"]})})]})]});if(!P)return null;const je=P.birthDate&&P.deathDate?`${new Date(P.birthDate).getFullYear()} - ${new Date(P.deathDate).getFullYear()}`:"";return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsxs("header",{className:"relative h-[600px] md:h-[700px] w-full overflow-hidden","aria-label":`Memorial hero for ${P.name}`,children:[e.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:P.backgroundImage?`url(${P.backgroundImage})`:"linear-gradient(135deg, hsl(280, 70%, 30%) 0%, hsl(280, 60%, 20%) 50%, hsl(280, 70%, 15%) 100%)"},role:"img","aria-label":P.backgroundImage?`Memorial background image for ${P.name}`:"Memorial background gradient"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/50 to-black/30"}),e.jsx("div",{className:"relative h-full flex flex-col justify-center items-center text-center px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-5xl mx-auto space-y-8",children:[e.jsx("div",{className:"inline-block px-6 py-2 bg-white/15 backdrop-blur-lg rounded-full border border-white/30 shadow-xl mb-6 hover-elevate",children:e.jsx("p",{className:"text-sm md:text-base text-white/95 tracking-widest font-medium uppercase",children:"In Loving Memory"})}),e.jsx("h1",{className:"text-6xl md:text-8xl font-serif font-bold text-white mb-6 tracking-tight drop-shadow-2xl","data-testid":"text-name",style:{textShadow:"0 4px 12px rgba(0,0,0,0.4)"},children:P.name}),je&&e.jsxs("div",{className:"inline-flex items-center gap-3 px-8 py-3 bg-white/10 backdrop-blur-md rounded-full border border-white/20",children:[e.jsx(ds,{className:"w-5 h-5 text-white/90"}),e.jsx("p",{className:"text-xl md:text-2xl text-white/95 font-light tracking-wide","data-testid":"text-years",children:je})]}),P.prefaceText&&e.jsxs("blockquote",{className:"text-xl md:text-2xl font-serif italic text-white/95 max-w-4xl mx-auto mt-8 leading-relaxed px-6 py-4 border-l-4 border-[hsl(45,80%,60%)]","data-testid":"text-quote",style:{textShadow:"0 2px 8px rgba(0,0,0,0.3)"},children:['"',P.prefaceText,'"']}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-8 mt-16 pt-8 border-t border-white/20",role:"region","aria-label":"Memorial statistics",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2 text-white/90 min-w-[100px]",children:[e.jsx("div",{className:"bg-white/15 backdrop-blur-md rounded-full p-3 border border-white/20",children:e.jsx(vi,{className:"w-6 h-6","aria-hidden":"true"})}),e.jsx("span",{className:"font-semibold text-lg","data-testid":"text-memory-count","aria-label":`${ue.length} ${ue.length===1?"memory":"memories"}`,children:ue.length}),e.jsx("span",{className:"text-sm text-white/70",children:"Memories"})]}),e.jsxs("div",{className:"flex flex-col items-center gap-2 text-white/90 min-w-[100px]",children:[e.jsx("div",{className:"bg-white/15 backdrop-blur-md rounded-full p-3 border border-white/20",children:e.jsx(Nn,{className:"w-6 h-6","aria-hidden":"true"})}),e.jsx("span",{className:"font-semibold text-lg","data-testid":"text-condolence-count","aria-label":`${F.length} ${F.length===1?"condolence":"condolences"}`,children:F.length}),e.jsx("span",{className:"text-sm text-white/70",children:"Condolences"})]}),D.length>0&&e.jsxs("div",{className:"flex flex-col items-center gap-2 text-white/90 min-w-[100px]",children:[e.jsx("div",{className:"bg-white/15 backdrop-blur-md rounded-full p-3 border border-white/20",children:e.jsx(ds,{className:"w-6 h-6","aria-hidden":"true"})}),e.jsx("span",{className:"font-semibold text-lg","data-testid":"text-event-count","aria-label":`${D.length} ${D.length===1?"event":"events"}`,children:D.length}),e.jsx("span",{className:"text-sm text-white/70",children:"Events"})]})]}),e.jsxs("nav",{className:"flex flex-wrap justify-center gap-4 mt-12 pt-4",role:"navigation","aria-label":"Memorial actions",children:[e.jsxs(O,{size:"lg",className:"bg-white hover:bg-white/95 text-foreground border-none shadow-2xl font-medium min-w-[160px]",onClick:()=>r(!0),"data-testid":"button-enter-code","aria-label":"Enter memorial invite code",children:[e.jsx(Nn,{className:"w-5 h-5 mr-2","aria-hidden":"true"}),"Enter Code"]}),W&&e.jsxs(O,{size:"lg",className:"bg-[hsl(45,80%,60%)] hover:bg-[hsl(45,80%,55%)] text-foreground border-none shadow-2xl font-medium min-w-[160px]",onClick:()=>window.location.href=`/memorial/${l}/program`,"data-testid":"button-view-program","aria-label":"View digital funeral program",children:[e.jsx(Un,{className:"w-5 h-5 mr-2","aria-hidden":"true"}),"View Program"]}),e.jsxs(O,{size:"lg",variant:"outline",className:"bg-white/10 backdrop-blur-md text-white border-white/50 hover-elevate active-elevate-2 shadow-lg font-medium min-w-[160px]",onClick:I,"data-testid":"button-share","aria-label":"Share memorial",children:[e.jsx(so,{className:"w-5 h-5 mr-2","aria-hidden":"true"}),"Share"]}),e.jsx(GO,{memorialId:l,deceasedName:P.name}),e.jsxs(O,{size:"lg",variant:"outline",className:"bg-white/10 backdrop-blur-md text-white border-white/50 hover-elevate active-elevate-2 shadow-lg font-medium min-w-[160px]",onClick:se,"data-testid":"button-save","aria-label":G?"Memorial already saved":"Save memorial","aria-pressed":G,children:[e.jsx(fh,{className:`w-5 h-5 mr-2 ${G?"fill-current":""}`,"aria-hidden":"true"}),G?"Saved":"Save"]}),e.jsx(rre,{memorialId:l||void 0,memorialName:P.name})]})]})})]}),!h&&e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 -mt-8 mb-8",children:e.jsx($,{className:"bg-gradient-to-br from-primary/10 via-primary/5 to-background border-2 border-primary/20 shadow-lg","data-testid":"card-engagement-cta",children:e.jsx(V,{className:"p-8",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"bg-primary/20 p-3 rounded-full",children:e.jsx(_t,{className:"w-8 h-8 text-primary"})})}),e.jsx("h3",{className:"text-2xl font-serif font-bold text-foreground",children:"Keep Their Memory Alive"}),e.jsx("p",{className:"text-muted-foreground text-lg max-w-2xl mx-auto",children:"Create your free account to save memorials, share with loved ones, and preserve precious memories forever."}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-4 pt-4",children:[e.jsxs(O,{size:"lg",onClick:()=>window.location.href="/api/login","data-testid":"button-cta-signup",className:"bg-primary hover:bg-primary/90",children:[e.jsx(V1,{className:"w-5 h-5 mr-2"}),"Create Free Account"]}),e.jsxs(O,{size:"lg",variant:"outline",onClick:I,"data-testid":"button-cta-share",children:[e.jsx(so,{className:"w-5 h-5 mr-2"}),"Share This Memorial"]}),e.jsxs(O,{size:"lg",variant:"outline",onClick:se,"data-testid":"button-cta-save",children:[e.jsx(fh,{className:`w-5 h-5 mr-2 ${G?"fill-current":""}`}),G?"Saved":"Save Memorial"]})]})]})})})}),h&&!G&&e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 -mt-8 mb-8",children:e.jsx($,{className:"bg-gradient-to-br from-accent/10 via-accent/5 to-background border-2 border-accent/20","data-testid":"card-save-reminder",children:e.jsx(V,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 text-center sm:text-left",children:[e.jsx("div",{className:"bg-accent/20 p-2 rounded-full flex-shrink-0",children:e.jsx(fh,{className:"w-5 h-5 text-accent-foreground"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-foreground",children:"Remember this memorial"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Save it to easily find and share later"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(O,{onClick:se,"data-testid":"button-reminder-save",children:[e.jsx(fh,{className:"w-4 h-4 mr-2"}),"Save Memorial"]}),e.jsxs(O,{variant:"outline",onClick:I,"data-testid":"button-reminder-share",children:[e.jsx(so,{className:"w-4 h-4 mr-2"}),"Share"]})]})]})})})}),K.length>0&&e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 -mt-8 mb-8 relative z-10",children:e.jsxs($,{className:"bg-gradient-to-r from-red-600/95 to-red-700/95 border-red-400/30 shadow-2xl overflow-hidden","data-testid":"card-live-now-banner",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-red-500/20 via-transparent to-red-500/20 animate-pulse"}),e.jsx(V,{className:"p-6 sm:p-8 relative",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6",children:[e.jsxs("div",{className:"flex items-center gap-4 text-center md:text-left",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-white/30 rounded-full animate-ping"}),e.jsx("div",{className:"relative bg-white rounded-full p-4",children:e.jsx("div",{className:"w-4 h-4 bg-red-600 rounded-full animate-pulse","aria-hidden":"true"})})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 justify-center md:justify-start",children:[e.jsx("h3",{className:"text-2xl sm:text-3xl font-bold text-white tracking-tight",children:"LIVE NOW"}),e.jsxs(ze,{variant:"secondary",className:"bg-white text-red-600 font-bold",children:[K.length," ",K.length===1?"Stream":"Streams"," Active"]})]}),e.jsx("p",{className:"text-white/90 text-base sm:text-lg",children:((be=K[0])==null?void 0:be.title)||"Memorial service in progress"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full md:w-auto",children:[e.jsxs(O,{size:"lg",className:"bg-white text-red-600 hover:bg-white/90 shadow-xl font-semibold min-w-[180px]",onClick:()=>{const q=document.getElementById("live-stream-section");q==null||q.scrollIntoView({behavior:"smooth",block:"start"})},"data-testid":"button-watch-live","aria-label":"Watch live memorial service",children:[e.jsx(Nn,{className:"w-5 h-5 mr-2","aria-hidden":"true"}),"Watch Live Stream"]}),e.jsxs(O,{size:"lg",variant:"outline",className:"bg-white/10 backdrop-blur-md text-white border-white/50 hover:bg-white/20 shadow-lg font-medium min-w-[160px]",onClick:I,"data-testid":"button-share-live","aria-label":"Share live stream with others",children:[e.jsx(so,{className:"w-5 h-5 mr-2","aria-hidden":"true"}),"Share Stream"]})]})]})})]})}),P.biography&&e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:e.jsxs("div",{className:"bg-gradient-to-br from-card/50 to-card/30 backdrop-blur-sm rounded-2xl p-8 md:p-12 border border-border/50 shadow-xl",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"h-1 w-12 bg-gradient-to-r from-primary to-accent rounded-full"}),e.jsx("h2",{className:"text-3xl md:text-4xl font-serif font-bold text-foreground",children:"Life Story"})]}),e.jsx("div",{className:"prose prose-lg max-w-none","data-testid":"text-biography",children:e.jsx("p",{className:"text-foreground/90 leading-relaxed whitespace-pre-wrap text-lg",children:P.biography})})]})}),e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsx("div",{className:"bg-gradient-to-br from-card/50 to-card/30 backdrop-blur-sm rounded-2xl p-8 border border-border/50 shadow-xl",children:e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-serif font-bold text-foreground",children:"Express Your Condolences"}),e.jsx("p",{className:"text-muted-foreground text-lg",children:"Share your love and support with a simple gesture"}),e.jsx($9,{memorialId:l})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[e.jsxs(ba,{defaultValue:"memories",className:"w-full","data-testid":"tabs-main",children:[e.jsxs(ra,{className:"grid w-full grid-cols-2 sm:grid-cols-4 lg:grid-cols-8 gap-2 mb-12 bg-muted/30 p-2 rounded-xl h-auto","data-testid":"tabs-list",children:[e.jsxs(qt,{value:"memories","data-testid":"tab-memories",className:"flex items-center justify-center gap-2 py-3 data-[state=active]:bg-card data-[state=active]:shadow-md rounded-lg transition-all",children:[e.jsx(vi,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Memories"})]}),e.jsxs(qt,{value:"photos","data-testid":"tab-photos",className:"flex items-center justify-center gap-2 py-3 data-[state=active]:bg-card data-[state=active]:shadow-md rounded-lg transition-all",children:[e.jsx(vi,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Photos"})]}),e.jsxs(qt,{value:"condolences","data-testid":"tab-condolences",className:"flex items-center justify-center gap-2 py-3 data-[state=active]:bg-card data-[state=active]:shadow-md rounded-lg transition-all",children:[e.jsx(Nn,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Condolences"})]}),e.jsxs(qt,{value:"videos","data-testid":"tab-videos",className:"flex items-center justify-center gap-2 py-3 data-[state=active]:bg-card data-[state=active]:shadow-md rounded-lg transition-all",children:[e.jsx(ta,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Videos"})]}),e.jsxs(qt,{value:"slideshows","data-testid":"tab-slideshows",className:"flex items-center justify-center gap-2 py-3 data-[state=active]:bg-card data-[state=active]:shadow-md rounded-lg transition-all",children:[e.jsx(_h,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Slideshows"})]}),e.jsxs(qt,{value:"symbols","data-testid":"tab-symbols",className:"flex items-center justify-center gap-2 py-3 data-[state=active]:bg-card data-[state=active]:shadow-md rounded-lg transition-all",children:[e.jsx(Bs,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Symbols"})]}),e.jsxs(qt,{value:"events","data-testid":"tab-events",className:"flex items-center justify-center gap-2 py-3 data-[state=active]:bg-card data-[state=active]:shadow-md rounded-lg transition-all",children:[e.jsx(ds,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Events"})]}),e.jsxs(qt,{value:"support","data-testid":"tab-support",className:"flex items-center justify-center gap-2 py-3 data-[state=active]:bg-card data-[state=active]:shadow-md rounded-lg transition-all",children:[e.jsx(_t,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Support"})]})]}),e.jsxs(Vt,{value:"memories",className:"space-y-8","data-testid":"content-memories",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-serif font-bold text-foreground mb-2",children:"Cherished Memories"}),e.jsxs("p",{className:"text-muted-foreground",children:["Precious moments shared with ",P.name]})]}),e.jsxs(O,{size:"lg","data-testid":"button-add-memory",className:"shadow-md",children:[e.jsx(vi,{className:"w-5 h-5 mr-2"}),"Add Memory"]})]}),e.jsx("div",{className:"grid gap-8 md:grid-cols-2 lg:grid-cols-3",children:ue.map(q=>e.jsxs($,{"data-testid":`card-memory-${q.id}`,className:"overflow-hidden hover-elevate border-border/50 shadow-lg group",children:[q.mediaUrl&&e.jsxs("div",{className:"aspect-video w-full overflow-hidden bg-muted relative",children:[p(q.mediaUrl)?e.jsx("video",{src:q.mediaUrl,controls:!0,className:"w-full h-full object-cover","data-testid":`video-memory-${q.id}`}):g(q.mediaUrl)&&j(q.mediaUrl)?e.jsx("iframe",{src:j(q.mediaUrl),className:"w-full h-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,"data-testid":`youtube-memory-${q.id}`}):y(q.mediaUrl)&&w(q.mediaUrl)?e.jsx("iframe",{src:w(q.mediaUrl),className:"w-full h-full",allow:"autoplay; fullscreen; picture-in-picture",allowFullScreen:!0,"data-testid":`vimeo-memory-${q.id}`}):v(q.mediaUrl)?e.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center bg-muted p-6 text-center",children:[e.jsx(vi,{className:"w-12 h-12 text-muted-foreground mb-3"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Video Format Not Supported"}),e.jsx("p",{className:"text-xs text-muted-foreground/80",children:"Please upload MP4/WebM files or share YouTube/Vimeo links"})]}):e.jsx("img",{src:q.mediaUrl,alt:q.caption||"",className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105","data-testid":`img-memory-${q.id}`}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/40 to-transparent opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none"})]}),e.jsx(le,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx(ge,{className:"text-lg font-semibold truncate","data-testid":`text-memory-author-${q.id}`,children:q.authorName}),e.jsxs($e,{className:"flex items-center gap-2 mt-1","data-testid":`text-memory-date-${q.id}`,children:[e.jsx(ds,{className:"w-3.5 h-3.5"}),new Date(q.createdAt||"").toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]}),e.jsx(_t,{className:"w-5 h-5 text-muted-foreground flex-shrink-0"})]})}),e.jsx(V,{children:e.jsx("p",{className:"text-foreground/90 leading-relaxed line-clamp-4","data-testid":`text-memory-caption-${q.id}`,children:q.caption})})]},q.id))}),ue.length===0&&e.jsx($,{className:"border-2 border-dashed border-border/50 bg-muted/20",children:e.jsxs(V,{className:"flex flex-col items-center justify-center py-16 px-6 text-center",children:[e.jsx("div",{className:"bg-muted/50 rounded-full p-6 mb-6",children:e.jsx(vi,{className:"w-12 h-12 text-muted-foreground"})}),e.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:"No memories shared yet"}),e.jsx("p",{className:"text-muted-foreground mb-6 max-w-md",children:"Be the first to share a cherished memory and keep their spirit alive."}),e.jsxs(O,{size:"lg","data-testid":"button-add-first-memory",children:[e.jsx(vi,{className:"w-5 h-5 mr-2"}),"Share First Memory"]})]})})]}),e.jsx(Vt,{value:"photos",className:"space-y-6","data-testid":"content-photos",children:e.jsx(qne,{memorialId:l||"",isOwner:(P==null?void 0:P.creatorEmail)===(f==null?void 0:f.email)})}),e.jsxs(Vt,{value:"condolences",className:"space-y-8","data-testid":"content-condolences",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-serif font-bold text-foreground mb-2",children:"Words of Comfort"}),e.jsx("p",{className:"text-muted-foreground",children:"Messages of love and support"})]}),e.jsxs(O,{size:"lg","data-testid":"button-leave-condolence",className:"shadow-md",children:[e.jsx(Nn,{className:"w-5 h-5 mr-2"}),"Leave Condolence"]})]}),e.jsx("div",{className:"space-y-6",children:F.map(q=>e.jsxs($,{"data-testid":`card-condolence-${q.id}`,className:"hover-elevate border-border/50 shadow-md",children:[e.jsx(le,{className:"pb-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(ge,{className:"text-lg font-semibold text-foreground mb-1","data-testid":`text-condolence-author-${q.id}`,children:q.authorName}),e.jsxs($e,{className:"flex items-center gap-2","data-testid":`text-condolence-date-${q.id}`,children:[e.jsx(ds,{className:"w-3.5 h-3.5"}),new Date(q.createdAt||"").toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})]})]}),e.jsx("div",{className:"bg-accent/10 rounded-full p-2",children:e.jsx(_t,{className:"w-5 h-5 text-accent"})})]})}),e.jsx(V,{children:e.jsx("p",{className:"text-foreground/90 leading-relaxed text-base","data-testid":`text-condolence-message-${q.id}`,children:q.message})})]},q.id))}),F.length===0&&e.jsx($,{className:"border-2 border-dashed border-border/50 bg-muted/20",children:e.jsxs(V,{className:"flex flex-col items-center justify-center py-16 px-6 text-center",children:[e.jsx("div",{className:"bg-muted/50 rounded-full p-6 mb-6",children:e.jsx(Nn,{className:"w-12 h-12 text-muted-foreground"})}),e.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:"No condolences yet"}),e.jsx("p",{className:"text-muted-foreground mb-6 max-w-md",children:"Share your thoughts and support for the family during this difficult time."}),e.jsxs(O,{size:"lg","data-testid":"button-leave-first-condolence",children:[e.jsx(Nn,{className:"w-5 h-5 mr-2"}),"Leave First Condolence"]})]})})]}),e.jsxs(Vt,{value:"events",className:"space-y-8","data-testid":"content-events",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-serif font-bold text-foreground mb-2",children:"Memorial Services & Events"}),e.jsxs("p",{className:"text-muted-foreground",children:["Upcoming and past events honoring ",P.name]})]}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:D.map(q=>{const Te=new Date(q.eventDate)>new Date;return e.jsxs($,{"data-testid":`card-event-${q.id}`,className:"hover-elevate border-border/50 shadow-lg",children:[e.jsxs(le,{className:"pb-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 mb-3",children:[e.jsx(ge,{className:"text-xl font-bold flex-1","data-testid":`text-event-title-${q.id}`,children:q.title}),Te&&e.jsx(ze,{className:"bg-primary text-primary-foreground","data-testid":`badge-upcoming-${q.id}`,children:"Upcoming"})]}),e.jsxs($e,{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-foreground/80","data-testid":`text-event-date-${q.id}`,children:[e.jsx("div",{className:"bg-muted rounded-full p-1.5",children:e.jsx(ds,{className:"w-4 h-4"})}),e.jsxs("span",{className:"font-medium",children:[new Date(q.eventDate).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}),q.eventTime&&` at ${q.eventTime}`]})]}),q.location&&e.jsxs("div",{className:"flex items-center gap-2 text-foreground/80","data-testid":`text-event-location-${q.id}`,children:[e.jsx("div",{className:"bg-muted rounded-full p-1.5",children:e.jsx(tr,{className:"w-4 h-4"})}),e.jsx("span",{children:q.location})]})]})]}),q.description&&e.jsxs(V,{className:"pt-0",children:[e.jsx("p",{className:"text-foreground/90 leading-relaxed mb-3","data-testid":`text-event-desc-${q.id}`,children:q.description}),Te&&q.attendeeCount!==void 0&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground pt-3 border-t","data-testid":`text-event-attendees-${q.id}`,children:[e.jsx(_t,{className:"w-4 h-4"}),e.jsxs("span",{className:"font-medium",children:[q.attendeeCount," attending"]})]})]})]},q.id)})}),D.length===0&&e.jsx($,{className:"border-2 border-dashed border-border/50 bg-muted/20",children:e.jsxs(V,{className:"flex flex-col items-center justify-center py-16 px-6 text-center",children:[e.jsx("div",{className:"bg-muted/50 rounded-full p-6 mb-6",children:e.jsx(ds,{className:"w-12 h-12 text-muted-foreground"})}),e.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:"No events scheduled"}),e.jsx("p",{className:"text-muted-foreground max-w-md",children:"Memorial services and celebration of life events will appear here."})]})})]}),e.jsxs(Vt,{value:"support",className:"space-y-8","data-testid":"content-support",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-serif font-bold text-foreground mb-2",children:"Support the Family"}),e.jsxs("p",{className:"text-muted-foreground",children:["Help honor ",P.name,"'s memory"]})]}),ae&&e.jsxs($,{className:"overflow-hidden border-border/50 shadow-xl bg-gradient-to-br from-card to-card/50","data-testid":"card-fundraiser",children:[e.jsx(le,{className:"pb-6",children:e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx("div",{className:"bg-primary/10 rounded-full p-3",children:e.jsx(Ga,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx(ge,{className:"text-2xl mb-2","data-testid":"text-fundraiser-title",children:ae.title}),ae.description&&e.jsx($e,{className:"text-base","data-testid":"text-fundraiser-desc",children:ae.description})]})]})}),e.jsxs(V,{className:"space-y-6",children:[e.jsxs("div",{className:"bg-muted/30 rounded-xl p-6",children:[e.jsxs("div",{className:"flex justify-between items-baseline mb-3",children:[e.jsx("span",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wide",children:"Progress"}),e.jsxs("span",{className:"text-2xl font-bold text-foreground","data-testid":"text-fundraiser-amount",children:["$",Number(ae.currentAmount).toLocaleString()]})]}),e.jsx("div",{className:"w-full bg-muted rounded-full h-4 overflow-hidden mb-2",children:e.jsx("div",{className:"bg-gradient-to-r from-primary to-accent h-4 rounded-full transition-all duration-500 ease-out",style:{width:`${Math.min(Number(ae.currentAmount)/Number(ae.goalAmount)*100,100)}%`},"data-testid":"progress-fundraiser"})}),e.jsxs("p",{className:"text-sm text-muted-foreground text-right",children:["of $",Number(ae.goalAmount).toLocaleString()," goal"]})]}),e.jsxs(O,{className:"w-full shadow-lg",size:"lg",onClick:()=>a(!0),"data-testid":"button-donate",children:[e.jsx(_t,{className:"w-5 h-5 mr-2"}),"Make a Donation"]})]})]}),P.cemeteryName&&e.jsxs($,{"data-testid":"card-cemetery",children:[e.jsx(le,{children:e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(tr,{className:"w-5 h-5"}),"Final Resting Place"]})}),e.jsxs(V,{children:[e.jsx("p",{className:"text-foreground/90","data-testid":"text-cemetery-name",children:P.cemeteryName}),P.cemeteryLocation&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1","data-testid":"text-cemetery-location",children:P.cemeteryLocation})]})]}),z&&z.tracks&&z.tracks.length>0&&e.jsxs($,{"data-testid":"card-playlist",children:[e.jsx(le,{children:e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(zn,{className:"w-5 h-5"}),"Memorial Playlist"]})}),e.jsx(V,{children:e.jsx("div",{className:"space-y-2",children:z.tracks.slice(0,5).map((q,Te)=>e.jsxs("div",{className:"flex items-center gap-3 text-sm","data-testid":`text-song-${Te}`,children:[e.jsx(zn,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:q.title}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[q.artist,"  ",q.duration]})]})]},q.id))})})]})]}),e.jsxs(Vt,{value:"videos",className:"space-y-8","data-testid":"content-videos",children:[e.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-serif font-bold text-foreground mb-2",children:"Video Condolences"}),e.jsx("p",{className:"text-muted-foreground",children:"Heartfelt video messages from friends and family"})]})}),e.jsx(o$,{memorialId:l||"",canApprove:!1})]}),e.jsxs(Vt,{value:"slideshows",className:"space-y-8","data-testid":"content-slideshows",children:[e.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-serif font-bold text-foreground mb-2",children:"Memorial Slideshows"}),e.jsx("p",{className:"text-muted-foreground",children:"Photo presentations celebrating their life journey"})]})}),Q.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Q.map(q=>e.jsxs($,{className:"hover-elevate",children:[e.jsxs(le,{children:[e.jsx(ge,{children:q.title}),q.description&&e.jsx($e,{children:q.description})]}),e.jsx(V,{children:e.jsx(W9,{slideshow:q,memorialId:l||"",onClose:()=>{}})})]},q.id))}):e.jsx($,{className:"border-2 border-dashed border-border/50 bg-muted/20",children:e.jsxs(V,{className:"flex flex-col items-center justify-center py-16 px-6 text-center",children:[e.jsx("div",{className:"bg-muted/50 rounded-full p-6 mb-6",children:e.jsx(_h,{className:"w-12 h-12 text-muted-foreground"})}),e.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:"No slideshows yet"}),e.jsx("p",{className:"text-muted-foreground max-w-md",children:"Beautiful memorial slideshows with photos and music will appear here."})]})})]}),e.jsxs(Vt,{value:"symbols",className:"space-y-8","data-testid":"content-symbols",children:[e.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-serif font-bold text-foreground mb-2",children:"Religious & Spiritual Symbols"}),e.jsx("p",{className:"text-muted-foreground",children:"Symbols of faith and spirituality honoring their beliefs"})]})}),e.jsx(B9,{memorialId:l||"",canEdit:!1})]})]}),e.jsxs("div",{className:"mt-16 pt-12 border-t border-border/30",role:"region","aria-label":"Memorial platform features",children:[e.jsxs("div",{className:"mb-8 text-center",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-serif font-bold text-foreground mb-3",children:"Memorial Platform Features"}),e.jsxs("p",{className:"text-muted-foreground text-lg",children:["Explore all the ways to honor and remember ",P.name]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[(f==null?void 0:f.email)===P.creatorEmail&&e.jsx($,{className:"hover-elevate","data-testid":"card-feature-qr",children:e.jsxs(V,{className:"p-6 text-center space-y-4",children:[e.jsx("div",{className:"mx-auto w-14 h-14 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(or,{className:"w-7 h-7 text-primary","aria-hidden":"true"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-xl font-semibold text-foreground",children:"QR Codes"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Generate printable QR codes for tombstones or memorial cards that link to this memorial"})]}),e.jsxs(O,{className:"w-full",variant:"outline",onClick:()=>window.location.href=`/memorials/${l}/manage`,"data-testid":"button-manage-qr","aria-label":"Manage QR codes for this memorial",children:[e.jsx(or,{className:"w-4 h-4 mr-2","aria-hidden":"true"}),"Manage QR Codes"]})]})}),(f==null?void 0:f.email)===P.creatorEmail&&e.jsx($,{className:"hover-elevate","data-testid":"card-feature-future-messages",children:e.jsxs(V,{className:"p-6 text-center space-y-4",children:[e.jsx("div",{className:"mx-auto w-14 h-14 rounded-full bg-accent/10 flex items-center justify-center",children:e.jsx(Nn,{className:"w-7 h-7 text-accent-foreground","aria-hidden":"true"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-xl font-semibold text-foreground",children:"Future Messages"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Schedule heartfelt messages to be delivered to loved ones on special occasions"})]}),e.jsxs(O,{className:"w-full",variant:"outline",onClick:()=>{const q=document.getElementById("future-messages-section");q==null||q.scrollIntoView({behavior:"smooth"})},"data-testid":"button-view-future-messages","aria-label":"View and create future messages",children:[e.jsx(ds,{className:"w-4 h-4 mr-2","aria-hidden":"true"}),"View Messages"]})]})}),W&&e.jsx($,{className:"hover-elevate","data-testid":"card-feature-program",children:e.jsxs(V,{className:"p-6 text-center space-y-4",children:[e.jsx("div",{className:"mx-auto w-14 h-14 rounded-full bg-[hsl(45,80%,60%)]/10 flex items-center justify-center",children:e.jsx(Un,{className:"w-7 h-7 text-[hsl(45,80%,50%)]","aria-hidden":"true"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-xl font-semibold text-foreground",children:"Funeral Program"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"View the beautifully designed digital funeral program for this memorial"})]}),e.jsxs(O,{className:"w-full bg-[hsl(45,80%,60%)] hover:bg-[hsl(45,80%,55%)] text-foreground",onClick:()=>window.location.href=`/memorial/${l}/program`,"data-testid":"button-view-program-card","aria-label":"View funeral program",children:[e.jsx(Un,{className:"w-4 h-4 mr-2","aria-hidden":"true"}),"View Program"]})]})}),Ne.length>0&&e.jsx($,{className:"hover-elevate","data-testid":"card-feature-livestream",children:e.jsxs(V,{className:"p-6 text-center space-y-4",children:[e.jsxs("div",{className:"mx-auto w-14 h-14 rounded-full bg-red-500/10 flex items-center justify-center relative",children:[K.length>0&&e.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-600 rounded-full animate-pulse","aria-hidden":"true"}),e.jsx(Nn,{className:"w-7 h-7 text-red-500","aria-hidden":"true"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h3",{className:"text-xl font-semibold text-foreground",children:["Live Streams",K.length>0&&e.jsx(ze,{variant:"destructive",className:"ml-2 text-xs",children:"LIVE"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:K.length>0?`${K.length} memorial service${K.length>1?"s":""} streaming now`:`${Ne.length} upcoming or past service${Ne.length>1?"s":""}`})]}),e.jsxs(O,{className:"w-full",variant:K.length>0?"default":"outline",onClick:()=>{const q=document.getElementById("live-stream-section");q==null||q.scrollIntoView({behavior:"smooth"})},"data-testid":"button-view-livestream-card","aria-label":K.length>0?"Watch live stream now":"View memorial live streams",children:[e.jsx(Nn,{className:"w-4 h-4 mr-2","aria-hidden":"true"}),K.length>0?"Watch Now":"View Streams"]})]})}),e.jsx($,{className:"hover-elevate","data-testid":"card-feature-birthday",children:e.jsxs(V,{className:"p-6 text-center space-y-4",children:[e.jsx("div",{className:"mx-auto w-14 h-14 rounded-full bg-pink-500/10 flex items-center justify-center",children:e.jsx(Pi,{className:"w-7 h-7 text-pink-500","aria-hidden":"true"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-xl font-semibold text-foreground",children:"Birthday Celebration"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Leave birthday wishes and celebrate their life on special anniversaries"})]}),e.jsxs(O,{className:"w-full",variant:"outline",onClick:()=>window.location.href=`/birthday-celebration/${l}`,"data-testid":"button-birthday-celebration","aria-label":"View birthday celebration page",children:[e.jsx(Pi,{className:"w-4 h-4 mr-2","aria-hidden":"true"}),"View Celebrations"]})]})}),e.jsx($,{className:"hover-elevate","data-testid":"card-feature-holiday",children:e.jsxs(V,{className:"p-6 text-center space-y-4",children:[e.jsx("div",{className:"mx-auto w-14 h-14 rounded-full bg-green-500/10 flex items-center justify-center",children:e.jsx(A0,{className:"w-7 h-7 text-green-500","aria-hidden":"true"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-xl font-semibold text-foreground",children:"Holiday Timeline"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Track important dates and holidays to remember and celebrate together"})]}),e.jsxs(O,{className:"w-full",variant:"outline",onClick:()=>window.location.href=`/holiday-timeline/${l}`,"data-testid":"button-holiday-timeline","aria-label":"View holiday timeline",children:[e.jsx(A0,{className:"w-4 h-4 mr-2","aria-hidden":"true"}),"View Timeline"]})]})}),e.jsx($,{className:"hover-elevate","data-testid":"card-feature-cemetery",children:e.jsxs(V,{className:"p-6 text-center space-y-4",children:[e.jsx("div",{className:"mx-auto w-14 h-14 rounded-full bg-blue-500/10 flex items-center justify-center",children:e.jsx(M0,{className:"w-7 h-7 text-blue-500","aria-hidden":"true"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-xl font-semibold text-foreground",children:"Cemetery Navigator"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Find directions to the gravesite and nearby memorial locations"})]}),e.jsxs(O,{className:"w-full",variant:"outline",onClick:()=>window.location.href=`/cemetery-navigator/${l}`,"data-testid":"button-cemetery-navigator","aria-label":"Navigate to cemetery",children:[e.jsx(M0,{className:"w-4 h-4 mr-2","aria-hidden":"true"}),"Get Directions"]})]})}),e.jsx($,{className:"hover-elevate","data-testid":"card-feature-family-tree",children:e.jsxs(V,{className:"p-6 text-center space-y-4",children:[e.jsx("div",{className:"mx-auto w-14 h-14 rounded-full bg-amber-500/10 flex items-center justify-center",children:e.jsx(Ms,{className:"w-7 h-7 text-amber-500","aria-hidden":"true"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-xl font-semibold text-foreground",children:"Family Tree"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Explore family connections and relationships across generations"})]}),e.jsxs(O,{className:"w-full",variant:"outline",onClick:()=>window.location.href=`/family-tree/${l}`,"data-testid":"button-family-tree","aria-label":"View family tree",children:[e.jsx(Ms,{className:"w-4 h-4 mr-2","aria-hidden":"true"}),"View Family Tree"]})]})})]})]}),e.jsx("div",{id:"live-stream-section",className:"mt-16 pt-16 border-t border-border/30",role:"region","aria-label":"Live stream memorial services",children:e.jsx(Hne,{memorialId:l,currentUser:f&&f.email?{id:f.id,email:f.email,firstName:f.firstName||void 0,lastName:f.lastName||void 0}:void 0})}),e.jsxs("div",{className:"mt-16 pt-16 border-t border-border/30",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-serif font-bold text-foreground mb-2",children:"Engage with this Memorial"}),e.jsx("p",{className:"text-muted-foreground",children:"Share your connection and keep their memory alive"})]}),e.jsx(Vne,{memorialId:l,currentUser:f&&f.email?{id:f.id,email:f.email,firstName:f.firstName||void 0,lastName:f.lastName||void 0}:void 0,onLoginRequired:Z})]}),e.jsx("div",{className:"mt-16 pt-16 border-t border-border/30",children:e.jsx(wae,{memorialName:P.name,memorialId:l})}),e.jsx("div",{id:"future-messages-section",className:"mt-16 pt-16 border-t border-border/30",role:"region","aria-label":"Future messages for loved ones",children:e.jsx(Lae,{memorialId:l,memorialName:P.name,canCreate:h&&P.creatorEmail===(f==null?void 0:f.email)})}),e.jsx("div",{id:"video-time-capsules-section",className:"mt-16 pt-16 border-t border-border/30",role:"region","aria-label":"Video time capsules",children:e.jsx(Eie,{memorialId:l})})]}),e.jsx(n2,{open:s,onOpenChange:r,onSubmit:q=>_.mutate(q)}),ae&&e.jsx(Mte,{open:n,onOpenChange:a,fundraiserId:ae.id,fundraiserTitle:ae.title,onSuccess:()=>{a(!1),xt.invalidateQueries({queryKey:[`/api/fundraisers/${ae.id}/donations`]}),xt.invalidateQueries({queryKey:[`/api/memorials/${l}/fundraisers`]})}}),e.jsx(bae,{open:i,onOpenChange:o,memorialId:l,memorialName:P.name})]})}const Mie="/assets/IMG_0164_1763131894014-CgjHEKFA.jpeg";function ro({variant:t="classic",showTagline:s=!0,className:r=""}){return e.jsxs("div",{className:`flex flex-col items-center gap-2 ${r}`,children:[e.jsx("div",{className:"relative w-12 h-12 rounded-lg overflow-hidden shadow-md",children:e.jsx("img",{src:Mie,alt:"Opictuary",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("h1",{className:"text-2xl font-serif font-bold text-foreground leading-tight",children:"Opictuary"}),s&&e.jsx("span",{className:"text-xs text-muted-foreground tracking-wide text-center",children:"Honoring Life  Preserving Legacy"})]})]})}function Lie(){return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsxs("div",{className:"relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/30 via-primary/20 to-background"}),e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_30%_20%,rgba(218,165,32,0.1),transparent_50%)]"}),e.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20 sm:py-32",children:e.jsxs("div",{className:"text-center space-y-8",children:[e.jsx("div",{className:"flex justify-center mb-8",children:e.jsx(ro,{variant:"classic",showTagline:!1,className:"scale-125 sm:scale-150"})}),e.jsxs("h1",{className:"text-4xl sm:text-5xl lg:text-6xl font-serif font-bold text-foreground tracking-tight","data-testid":"text-hero-title",children:["Honor every life,",e.jsx("br",{}),e.jsx("span",{className:"text-primary",children:"in every dimension."})]}),e.jsx("p",{className:"text-lg sm:text-xl text-muted-foreground max-w-3xl mx-auto leading-relaxed","data-testid":"text-hero-description",children:"The world's first continuum memorial platform. Create immersive memorial hubs with living achievements, AI-guided storytelling, scheduled future messages, and QR-activated touchpoints that honor every chapter of life."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center pt-6 w-full max-w-3xl mx-auto",children:[e.jsx(He,{href:"/self-obituary",className:"w-full sm:w-auto",children:e.jsxs(O,{size:"lg",className:"w-full sm:min-w-[200px]","data-testid":"button-create-memorial",children:[e.jsx(_t,{className:"w-5 h-5 mr-2"}),"Create a Memorial"]})}),e.jsx(He,{href:"/memorial/e94ee1f4-2506-4848-9c7e-97b6d473cf81",className:"w-full sm:w-auto",children:e.jsx(O,{size:"lg",variant:"outline",className:"w-full sm:min-w-[200px]","data-testid":"button-view-demo",children:"View Demo Memorial"})}),e.jsx(He,{href:"/about",className:"w-full sm:w-auto",children:e.jsx(O,{size:"lg",variant:"ghost",className:"w-full sm:min-w-[200px]","data-testid":"button-learn-more",children:"Learn More"})})]}),e.jsx("p",{className:"text-sm text-muted-foreground pt-4","data-testid":"text-free-notice",children:"Free to start  Works on all devices  Private or public options"}),e.jsx("div",{className:"mt-12 pt-8 border-t border-border/20",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-8 text-center",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-3xl font-bold text-primary","data-testid":"text-user-count",children:"160+"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Families Trust Opictuary"})]}),e.jsx("div",{className:"h-12 w-px bg-border hidden sm:block"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-3xl font-bold text-primary","data-testid":"text-growth-rate",children:"20+"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"New Users Daily"})]}),e.jsx("div",{className:"h-12 w-px bg-border hidden sm:block"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-3xl font-bold text-primary","data-testid":"text-memorials-created",children:"100%"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Free Forever"})]})]})})]})})]}),e.jsx("div",{className:"bg-gradient-to-br from-accent/10 via-primary/5 to-background py-20",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsxs(ze,{variant:"secondary",className:"mb-4","data-testid":"badge-celebrations-new",children:[e.jsx(ao,{className:"w-3 h-3 mr-1"}),"New Feature"]}),e.jsx("h2",{className:"text-3xl sm:text-4xl font-serif font-semibold text-foreground mb-4","data-testid":"text-celebrations-title",children:"Continuum Celebrations"}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Beyond memorials - celebrate birthdays, holidays, and life events with friends and family"})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6 max-w-5xl mx-auto",children:[e.jsx(He,{href:"/celebrations?tab=birthdays",className:"block","data-testid":"link-birthday-celebrations",children:e.jsx($,{className:"hover-elevate h-full border-2 border-accent/30","data-testid":"card-birthday-celebrations",children:e.jsxs(V,{className:"p-6 space-y-4",children:[e.jsx("div",{className:"w-14 h-14 rounded-full bg-accent/20 flex items-center justify-center mx-auto",children:e.jsx(Pi,{className:"w-7 h-7 text-accent-foreground"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:"Birthday Celebrations"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Bluetooth playlists, live streaming with friends, and shopping spree from donations"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 justify-center",children:[e.jsxs(ze,{variant:"outline",className:"text-xs",children:[e.jsx(zn,{className:"w-3 h-3 mr-1"}),"Playlists"]}),e.jsxs(ze,{variant:"outline",className:"text-xs",children:[e.jsx(ta,{className:"w-3 h-3 mr-1"}),"Live"]}),e.jsxs(ze,{variant:"outline",className:"text-xs",children:[e.jsx(Ud,{className:"w-3 h-3 mr-1"}),"Shopping"]})]})]})})}),e.jsx(He,{href:"/celebrations?tab=holidays",className:"block","data-testid":"link-holiday-celebrations",children:e.jsx($,{className:"hover-elevate h-full border-2 border-primary/20","data-testid":"card-holiday-celebrations",children:e.jsxs(V,{className:"p-6 space-y-4",children:[e.jsx("div",{className:"w-14 h-14 rounded-full bg-primary/10 flex items-center justify-center mx-auto",children:e.jsx(ds,{className:"w-7 h-7 text-primary"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:"All Holidays"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Multi-faith calendar with 50+ holidays from every tradition and culture"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 justify-center",children:[e.jsx(ze,{variant:"outline",className:"text-xs",children:"Global"}),e.jsx(ze,{variant:"outline",className:"text-xs",children:"Multi-Faith"}),e.jsx(ze,{variant:"outline",className:"text-xs",children:"Custom"})]})]})})}),e.jsx(He,{href:"/celebrations?tab=weddings",className:"block","data-testid":"link-wedding-gifts",children:e.jsx($,{className:"hover-elevate h-full border-2 border-primary/20","data-testid":"card-wedding-gifts",children:e.jsxs(V,{className:"p-6 space-y-4",children:[e.jsx("div",{className:"w-14 h-14 rounded-full bg-primary/10 flex items-center justify-center mx-auto",children:e.jsx(lm,{className:"w-7 h-7 text-primary"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:"Wedding Gifts"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Create gift registries, accept cash gifts, and share your special day"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 justify-center",children:[e.jsxs(ze,{variant:"outline",className:"text-xs",children:[e.jsx(lm,{className:"w-3 h-3 mr-1"}),"Registry"]}),e.jsxs(ze,{variant:"outline",className:"text-xs",children:[e.jsx(_t,{className:"w-3 h-3 mr-1"}),"Cash Gifts"]})]})]})})})]}),e.jsx("div",{className:"text-center mt-10",children:e.jsx(He,{href:"/celebrations",children:e.jsxs(O,{size:"lg","data-testid":"button-explore-celebrations",children:[e.jsx(ao,{className:"w-5 h-5 mr-2"}),"Explore Celebrations Hub"]})})})]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20",children:e.jsxs("div",{className:"max-w-4xl mx-auto text-center space-y-6",children:[e.jsx("h2",{className:"text-3xl sm:text-4xl font-serif font-semibold text-foreground","data-testid":"text-intro-title",children:"Beyond Obituaries: A Continuum of Remembrance"}),e.jsxs("div",{className:"text-base sm:text-lg text-muted-foreground space-y-4 leading-relaxed",children:[e.jsx("p",{"data-testid":"text-intro-p1",children:"Every life is a universe of moments, achievements, connections, and love. Traditional obituaries capture only a fraction. Opictuary captures the whole story."}),e.jsx("p",{"data-testid":"text-intro-p2",children:e.jsx("strong",{className:"text-foreground",children:"A memorial operating system that honors every dimension of life."})}),e.jsx("p",{"data-testid":"text-intro-p3",children:"From birthday celebrations to family trees, from Olympic achievements to community tributes, from scheduled future messages to GPS cemetery navigation - we've built the tools to preserve not just who someone was, but the ongoing impact they have on everyone they touched."})]})]})}),e.jsx("div",{className:"bg-card/50 py-20",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-3xl sm:text-4xl font-serif font-semibold text-foreground mb-4","data-testid":"text-features-title",children:"Core Platform Innovations"}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto","data-testid":"text-features-description",children:"22 patent-protected innovations powering the continuum memorial experience"})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-8 max-w-6xl mx-auto",children:[e.jsx(He,{href:"/upcoming-messages",className:"block","data-testid":"link-feature-future-messages",children:e.jsx($,{className:"hover-elevate h-full border-2 border-primary/20","data-testid":"card-feature-future-messages",children:e.jsxs(V,{className:"p-8 space-y-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center mx-auto",children:e.jsx(ds,{className:"w-8 h-8 text-primary"})}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{className:"inline-block px-3 py-1 rounded-full bg-primary/10 text-primary text-xs font-semibold mb-2",children:"PATENT PROTECTED"}),e.jsx("h3",{className:"text-2xl font-semibold text-foreground",children:"Future Messages"})]}),e.jsx("p",{className:"text-muted-foreground text-center leading-relaxed",children:"Schedule heartfelt messages to be delivered on birthdays, anniversaries, and special dates. Keep your love reaching loved ones for years to come  even after you're gone."}),e.jsx("div",{className:"pt-4 text-center",children:e.jsx(O,{variant:"outline",size:"sm",children:"Learn More "})})]})})}),e.jsx(He,{href:"/qr-code",className:"block","data-testid":"link-feature-qr-memorials",children:e.jsx($,{className:"hover-elevate h-full border-2 border-primary/20","data-testid":"card-feature-qr-memorials",children:e.jsxs(V,{className:"p-8 space-y-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center mx-auto",children:e.jsx(or,{className:"w-8 h-8 text-primary"})}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{className:"inline-block px-3 py-1 rounded-full bg-primary/10 text-primary text-xs font-semibold mb-2",children:"PATENT PROTECTED"}),e.jsx("h3",{className:"text-2xl font-semibold text-foreground",children:"QR Memorial System"})]}),e.jsx("p",{className:"text-muted-foreground text-center leading-relaxed",children:"Place QR codes on tombstones, memorial cards, or funeral programs. Anyone can scan to view the memorial, upload photos from the gravesite, or share memories  bridging physical and digital remembrance."}),e.jsx("div",{className:"pt-4 text-center",children:e.jsx(O,{variant:"outline",size:"sm",children:"Generate QR Code "})})]})})}),e.jsx(He,{href:"/memorial/e94ee1f4-2506-4848-9c7e-97b6d473cf81",className:"block","data-testid":"link-feature-galleries",children:e.jsx($,{className:"hover-elevate h-full border-2 border-primary/20","data-testid":"card-feature-galleries",children:e.jsxs(V,{className:"p-8 space-y-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center mx-auto",children:e.jsx(ta,{className:"w-8 h-8 text-primary"})}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{className:"inline-block px-3 py-1 rounded-full bg-primary/10 text-primary text-xs font-semibold mb-2",children:"INTERACTIVE & COMPASSIONATE"}),e.jsx("h3",{className:"text-2xl font-semibold text-foreground",children:"Memorial Galleries"})]}),e.jsx("p",{className:"text-muted-foreground text-center leading-relaxed",children:"Stunning photo and video galleries with heart reactions, comments, and easy sharing. Family and friends contribute memories together, creating a living tribute that grows over time."}),e.jsx("div",{className:"pt-4 text-center",children:e.jsx(O,{variant:"outline",size:"sm",children:"View Demo "})})]})})})]})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-3xl sm:text-4xl font-serif font-semibold text-foreground mb-4","data-testid":"text-specialized-title",children:"Life Dimensions: Every Story Deserves Its Canvas"}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto","data-testid":"text-specialized-description",children:"From celebrities to essential workers, athletes to alumni - specialized experiences for every legacy"})]}),e.jsxs("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-6 max-w-6xl mx-auto",children:[e.jsx(He,{href:"/celebrity-memorials",className:"block","data-testid":"link-celebrity-memorials",children:e.jsx($,{className:"hover-elevate h-full",children:e.jsxs(V,{className:"p-6 space-y-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(zo,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-xl font-semibold text-foreground",children:"Celebrity Memorials"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Honor icons and public figures with estate-managed content, charity integrations, and verified family submissions"})]}),e.jsx(O,{variant:"ghost",size:"sm",className:"w-full",children:"Explore Celebrities "})]})})}),e.jsx(He,{href:"/alumni-memorials",className:"block","data-testid":"link-alumni-memorials",children:e.jsx($,{className:"hover-elevate h-full",children:e.jsxs(V,{className:"p-6 space-y-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(Za,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-xl font-semibold text-foreground",children:"Alumni Memorials"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Remember classmates and fellow alumni with school-themed tributes, graduation year filters, and campus memories"})]}),e.jsx(O,{variant:"ghost",size:"sm",className:"w-full",children:"Browse Alumni "})]})})}),e.jsx(He,{href:"/essential-workers",className:"block","data-testid":"link-essential-workers",children:e.jsx($,{className:"hover-elevate h-full",children:e.jsxs(V,{className:"p-6 space-y-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(va,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-xl font-semibold text-foreground",children:"Essential Workers"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Honor first responders, healthcare heroes, and essential workers who served their communities with courage"})]}),e.jsx(O,{variant:"ghost",size:"sm",className:"w-full",children:"Honor Heroes "})]})})}),e.jsx(He,{href:"/hood-memorials",className:"block","data-testid":"link-hood-memorials",children:e.jsx($,{className:"hover-elevate h-full",children:e.jsxs(V,{className:"p-6 space-y-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(Ms,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-xl font-semibold text-foreground",children:"Hood Memorials"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Community-focused tributes celebrating local legends and neighbors who shaped their neighborhoods"})]}),e.jsx(O,{variant:"ghost",size:"sm",className:"w-full",children:"See Community "})]})})}),e.jsx(He,{href:"/neighborhoods",className:"block","data-testid":"link-neighborhoods",children:e.jsx($,{className:"hover-elevate h-full",children:e.jsxs(V,{className:"p-6 space-y-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(tr,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-xl font-semibold text-foreground",children:"Neighborhoods"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Organize memorials by location, connecting families and friends in specific communities and areas"})]}),e.jsx(O,{variant:"ghost",size:"sm",className:"w-full",children:"Explore Areas "})]})})}),e.jsx(He,{href:"/prison-access",className:"block","data-testid":"link-prison-access",children:e.jsx($,{className:"hover-elevate h-full",children:e.jsxs(V,{className:"p-6 space-y-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(Od,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-xl font-semibold text-foreground",children:"Prison Access"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Secure, monitored memorial access for incarcerated individuals to stay connected with loved ones' legacies"})]}),e.jsx(O,{variant:"ghost",size:"sm",className:"w-full",children:"Learn More "})]})})})]})]}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20",children:e.jsx("div",{className:"max-w-5xl mx-auto",children:e.jsx($,{className:"bg-gradient-to-br from-accent/10 to-accent/5 border-accent/20",children:e.jsxs(V,{className:"p-8 sm:p-12",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-8 items-center",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(or,{className:"w-8 h-8 text-primary"})}),e.jsx("h2",{className:"text-3xl sm:text-4xl font-serif font-semibold text-foreground","data-testid":"text-qr-title",children:"Bridge the Physical and Digital"}),e.jsxs("div",{className:"space-y-4 text-muted-foreground",children:[e.jsx("p",{className:"text-lg","data-testid":"text-qr-description",children:"Our memorial QR codes create a powerful connection between a physical resting place and a living digital memorial."}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-primary mt-2 flex-shrink-0"}),e.jsxs("p",{children:[e.jsx("strong",{className:"text-foreground",children:"For Tombstones & Headstones:"})," Place a QR code on the memorial marker so anyone visiting can instantly access the full life story, photos, and memories."]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-primary mt-2 flex-shrink-0"}),e.jsxs("p",{children:[e.jsx("strong",{className:"text-foreground",children:"For Memorial Cards:"})," Add QR codes to funeral programs or memorial cards so family and friends can easily visit and contribute memories."]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-primary mt-2 flex-shrink-0"}),e.jsxs("p",{children:[e.jsx("strong",{className:"text-foreground",children:"Share Photos Instantly:"})," Visitors can scan the code to upload photos and memories directly to the memorial, preserving moments from the service or graveside visits."]})]})]})]}),e.jsx("div",{className:"pt-4",children:e.jsx(He,{href:"/self-obituary",children:e.jsxs(O,{size:"lg",variant:"outline","data-testid":"button-create-qr",children:[e.jsx(or,{className:"w-5 h-5 mr-2"}),"Create Your Memorial QR Code"]})})})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-64 h-64 bg-background rounded-lg shadow-lg p-8 flex items-center justify-center border-2 border-primary/20",children:e.jsx(or,{className:"w-full h-full text-primary/20"})}),e.jsx("div",{className:"absolute -bottom-4 -right-4 bg-primary text-primary-foreground px-4 py-2 rounded-lg shadow-lg text-sm font-semibold",children:"Scan & Remember"})]})})]}),e.jsx("div",{className:"mt-8 pt-8 border-t border-border",children:e.jsxs("p",{className:"text-center text-sm text-muted-foreground","data-testid":"text-qr-importance",children:[e.jsx("strong",{className:"text-foreground",children:"Why QR codes matter:"})," They transform static memorials into living tributes, allowing future generations to discover and connect with your loved one's story for years to come. A simple scan unlocks a lifetime of memories."]})})]})})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx($,{className:"bg-gradient-to-br from-primary/10 to-primary/5 border-primary/20",children:e.jsxs(V,{className:"p-8 sm:p-12 space-y-6 text-center",children:[e.jsx("h2",{className:"text-3xl sm:text-4xl font-serif font-semibold text-foreground","data-testid":"text-promise-title",children:"Our Promise to You"}),e.jsxs("div",{className:"text-base sm:text-lg text-muted-foreground space-y-4 leading-relaxed",children:[e.jsx("p",{"data-testid":"text-promise-p1",children:"We promise to treat your memories with the care and dignity they deserve. We promise to keep this space safe, accessible, and always focused on honoring lives well-lived."}),e.jsx("p",{"data-testid":"text-promise-p2",children:"We know that grief is not linear. Some days are harder than others. But wherever you are in your journey, Opictuary is here  a gentle, steady place to remember, to share, and to heal."}),e.jsx("p",{className:"text-foreground font-semibold text-xl pt-4","data-testid":"text-promise-p3",children:"Because those we love never truly leave us. They live on in the stories we tell, the memories we share, and the love we continue to carry."})]}),e.jsx("div",{className:"pt-6",children:e.jsx(He,{href:"/self-obituary",children:e.jsxs(O,{size:"lg","data-testid":"button-start-memorial",children:[e.jsx(_t,{className:"w-5 h-5 mr-2"}),"Start Preserving Their Story"]})})})]})})})}),e.jsx("div",{className:"bg-card/50 py-20",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-3xl mx-auto text-center space-y-6",children:[e.jsx(T_,{className:"w-16 h-16 text-primary mx-auto"}),e.jsx("h2",{className:"text-3xl sm:text-4xl font-serif font-semibold text-foreground","data-testid":"text-mobile-title",children:"Take Opictuary Anywhere"}),e.jsx("p",{className:"text-lg text-muted-foreground","data-testid":"text-mobile-description",children:"Install Opictuary as an app on your phone for instant access, offline viewing, and notifications about new memories and messages."}),e.jsx("p",{className:"text-sm text-muted-foreground","data-testid":"text-mobile-instructions",children:'Visit Opictuary on your mobile device and tap "Add to Home Screen" to install'})]})})})]})}function Die(){return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("div",{className:"relative overflow-hidden bg-gradient-to-br from-primary/20 to-background py-20",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx("div",{className:"flex justify-center mb-8",children:e.jsx(ro,{variant:"classic",showTagline:!1,className:"scale-100 sm:scale-125"})}),e.jsx("h1",{className:"text-4xl sm:text-5xl font-serif font-bold text-foreground","data-testid":"text-about-title",children:"About Opictuary"}),e.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto","data-testid":"text-about-subtitle",children:"The world's first continuum memorial platform - honoring every life, in every dimension"})]})})}),e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-16 space-y-16",children:[e.jsxs("section",{className:"space-y-6",children:[e.jsx("h2",{className:"text-3xl font-serif font-semibold text-foreground","data-testid":"text-mission-title",children:"A Memorial Operating System for the Modern Age"}),e.jsxs("div",{className:"prose prose-lg max-w-none text-muted-foreground space-y-4",children:[e.jsx("p",{"data-testid":"text-mission-p1",children:"Traditional obituaries capture a fraction of a life. Opictuary captures the whole story - every achievement, every connection, every dimension of who someone truly was."}),e.jsx("p",{"data-testid":"text-mission-p2",children:e.jsx("strong",{className:"text-foreground",children:"We built the world's first continuum memorial platform."})}),e.jsx("p",{"data-testid":"text-mission-p3",children:"From immersive photo and video galleries to AI-powered storytelling, from scheduled future messages that keep your love reaching loved ones to GPS cemetery navigation, from birthday celebrations to Olympian legacy scores - we've reimagined what it means to honor a life in the digital age."})]})]}),e.jsxs("section",{className:"space-y-8",children:[e.jsx("h2",{className:"text-3xl font-serif font-semibold text-foreground","data-testid":"text-different-title",children:"What Makes Opictuary Different"}),e.jsxs("div",{className:"space-y-6",children:[e.jsx($,{"data-testid":"card-dignity",children:e.jsx(V,{className:"p-6 space-y-3",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(va,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:"Dignity First"}),e.jsx("p",{className:"text-muted-foreground",children:"Every memorial is designed with respect and grace. No intrusive ads, no distractions  just a beautiful space to honor your loved one."})]})]})})}),e.jsx($,{"data-testid":"card-inclusive",children:e.jsx(V,{className:"p-6 space-y-3",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(_t,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:"Made for Everyone"}),e.jsx("p",{className:"text-muted-foreground",children:"Whether you're creating a memorial for a parent, child, friend, or partner  whether they passed recently or years ago  Opictuary provides a space that adapts to your needs and beliefs. We honor all faiths and traditions."})]})]})})}),e.jsx($,{"data-testid":"card-accessible",children:e.jsx(V,{className:"p-6 space-y-3",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(T_,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:"Accessible Anywhere"}),e.jsx("p",{className:"text-muted-foreground",children:"Desktop, phone, tablet  even offline. Your loved one's memorial is always there when you need to feel close to them. Install as a mobile app for instant access."})]})]})})}),e.jsx($,{"data-testid":"card-community",children:e.jsx(V,{className:"p-6 space-y-3",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(Ms,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:"Community Support"}),e.jsx("p",{className:"text-muted-foreground",children:"You're not alone. Friends and family can contribute memories, share condolences, and rally together to support one another during difficult times."})]})]})})}),e.jsx($,{"data-testid":"card-practical",children:e.jsx(V,{className:"p-6 space-y-3",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(Ga,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:"Practical Help"}),e.jsx("p",{className:"text-muted-foreground",children:"Beyond memories, Opictuary helps with the practical side of loss  organizing fundraisers for funeral costs or causes, planning memorial events, and accessing professional grief resources."})]})]})})})]})]}),e.jsxs("section",{className:"space-y-8",children:[e.jsx("h2",{className:"text-3xl font-serif font-semibold text-foreground","data-testid":"text-features-overview-title",children:"Platform Features"}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"flex gap-3","data-testid":"feature-memories",children:[e.jsx(Nn,{className:"w-5 h-5 text-primary flex-shrink-0 mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-foreground mb-1",children:"Memories & Condolences"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Share stories, photos, and messages of comfort"})]})]}),e.jsxs("div",{className:"flex gap-3","data-testid":"feature-fundraising",children:[e.jsx(Ga,{className:"w-5 h-5 text-primary flex-shrink-0 mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-foreground mb-1",children:"Fundraising"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Support families with memorial and funeral costs"})]})]}),e.jsxs("div",{className:"flex gap-3","data-testid":"feature-events",children:[e.jsx(ds,{className:"w-5 h-5 text-primary flex-shrink-0 mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-foreground mb-1",children:"Legacy Events"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Plan gatherings and memorial services"})]})]}),e.jsxs("div",{className:"flex gap-3","data-testid":"feature-music",children:[e.jsx(zn,{className:"w-5 h-5 text-primary flex-shrink-0 mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-foreground mb-1",children:"Music Playlists"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Create soundtracks of their favorite songs"})]})]}),e.jsxs("div",{className:"flex gap-3","data-testid":"feature-celebrity",children:[e.jsx(Ks,{className:"w-5 h-5 text-primary flex-shrink-0 mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-foreground mb-1",children:"Celebrity Memorials"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Honor public figures with charitable donations"})]})]}),e.jsxs("div",{className:"flex gap-3","data-testid":"feature-workers",children:[e.jsx(JI,{className:"w-5 h-5 text-primary flex-shrink-0 mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-foreground mb-1",children:"Essential Workers"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Recognize frontline heroes who gave their lives"})]})]})]})]}),e.jsxs("section",{className:"space-y-6",children:[e.jsx("h2",{className:"text-3xl font-serif font-semibold text-foreground","data-testid":"text-promise-title",children:"Our Promise to You"}),e.jsx($,{className:"bg-gradient-to-br from-primary/10 to-primary/5 border-primary/20",children:e.jsxs(V,{className:"p-8 space-y-4",children:[e.jsx("p",{className:"text-lg text-muted-foreground","data-testid":"text-promise-p1",children:"We promise to treat your memories with the care and dignity they deserve. We promise to keep this space safe, accessible, and always focused on honoring lives well-lived."}),e.jsx("p",{className:"text-lg text-muted-foreground","data-testid":"text-promise-p2",children:"We know that grief is not linear. Some days are harder than others. But wherever you are in your journey, Opictuary is here  a gentle, steady place to remember, to share, and to heal."}),e.jsx("p",{className:"text-xl font-semibold text-foreground pt-4","data-testid":"text-promise-closing",children:"Because those we love never truly leave us. They live on in the stories we tell, the memories we share, and the love we continue to carry."})]})})]}),e.jsxs("section",{className:"text-center space-y-6 pt-8",children:[e.jsx("h2",{className:"text-3xl font-serif font-semibold text-foreground","data-testid":"text-cta-title",children:"Ready to Honor Their Memory?"}),e.jsx("p",{className:"text-lg text-muted-foreground","data-testid":"text-cta-description",children:"Start preserving their story today"}),e.jsx(He,{href:"/self-obituary",children:e.jsxs(O,{size:"lg","data-testid":"button-create-memorial",children:[e.jsx(_t,{className:"w-5 h-5 mr-2"}),"Create a Memorial"]})})]})]})]})}function Iie({name:t,title:s,imageUrl:r,charityName:n,donationAmount:a,fanCount:i,isUnlocked:o=!1,onDonate:l,onView:c}){return e.jsxs($,{className:"overflow-hidden hover-elevate active-elevate-2 transition-all","data-testid":"card-celebrity-memorial",children:[e.jsxs("div",{className:"relative h-48 bg-gradient-to-br from-primary/20 to-accent/20",children:[r&&e.jsx("img",{src:r,alt:t,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),e.jsx("div",{className:"absolute top-3 right-3",children:e.jsxs(ze,{className:"bg-amber-500 text-white border-amber-600","data-testid":"badge-celebrity",children:[e.jsx(Ks,{className:"w-3 h-3 mr-1"}),"Celebrity"]})}),!o&&e.jsx("div",{className:"absolute inset-0 backdrop-blur-sm bg-black/20 flex items-center justify-center",children:e.jsx(Od,{className:"w-12 h-12 text-white/80"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-2xl font-serif font-semibold text-foreground mb-1","data-testid":"text-celebrity-name",children:t}),e.jsx("p",{className:"text-muted-foreground mb-4","data-testid":"text-celebrity-title",children:s}),e.jsx("div",{className:"bg-accent/10 rounded-lg p-4 mb-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(_t,{className:"w-5 h-5 text-chart-3 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-sm text-foreground font-medium mb-1",children:["Support ",n]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Donate $",a," to unlock this memorial and support their favorite charity"]})]})]})}),e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("span",{className:"text-sm text-muted-foreground","data-testid":"text-fan-count",children:[i.toLocaleString()," fans have donated"]})}),o?e.jsx(O,{className:"w-full",onClick:c,"data-testid":"button-view-memorial",children:"View Memorial"}):e.jsxs(O,{className:"w-full bg-chart-3 hover:bg-chart-3 text-white",onClick:l,"data-testid":"button-unlock-memorial",children:[e.jsx(_t,{className:"w-4 h-4 mr-2"}),"Donate $",a," to Unlock"]})]})]})}function Rie({open:t,onOpenChange:s,celebrityName:r,charityName:n,donationAmount:a,platformPercentage:i=5,onSubmit:o}){const[l,c]=N.useState(""),d=a*((100-i)/100),u=a*(i/100),m=()=>{l.trim()&&o(a,l)};return e.jsx(Os,{open:t,onOpenChange:s,children:e.jsxs(Ds,{className:"sm:max-w-md","data-testid":"modal-donation-gate",children:[e.jsxs(Is,{children:[e.jsx(Rs,{className:"font-serif text-2xl",children:"Unlock Memorial"}),e.jsxs(Lr,{children:["Support ",n," and gain access to ",r,"'s memorial"]})]}),e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"bg-accent/10 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"font-medium text-foreground",children:"Donation Breakdown"}),e.jsxs("span",{className:"text-2xl font-bold text-foreground","data-testid":"text-total-amount",children:["$",a]})]}),e.jsx(ls,{className:"mb-3"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-muted-foreground",children:["To ",n]}),e.jsxs("span",{className:"font-medium text-foreground","data-testid":"text-charity-amount",children:["$",d.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-muted-foreground",children:["Platform fee (",i,"%)"]}),e.jsxs("span",{className:"font-medium text-foreground","data-testid":"text-platform-amount",children:["$",u.toFixed(2)]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"email",children:"Email Address"}),e.jsx(re,{id:"email",type:"email",placeholder:"your@email.com",value:l,onChange:f=>c(f.target.value),onKeyDown:f=>f.key==="Enter"&&m(),"data-testid":"input-donation-email"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Receive access confirmation and donation receipt"})]}),e.jsxs(O,{className:"w-full bg-chart-3 hover:bg-chart-3 text-white",size:"lg",onClick:m,disabled:!l.trim(),"data-testid":"button-complete-donation",children:[e.jsx(_t,{className:"w-5 h-5 mr-2"}),"Complete Donation"]}),e.jsx("p",{className:"text-xs text-center text-muted-foreground",children:"Secure payment powered by Stripe"})]})]})})}const f2=[{id:"sports",name:"Sports & Athletics",icon:Ni,color:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",subCategories:["Basketball","Football","Baseball","Soccer","Tennis","Boxing","Golf","Track & Field","Swimming","Other Sports"]},{id:"entertainment",name:"Actors & Actresses",icon:HI,color:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300",subCategories:["Film","Television","Theater","Voice Acting","Stunt Performers"]},{id:"music",name:"Musicians & Artists",icon:zn,color:"bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-300",subCategories:["Pop","Rock","Hip-Hop/Rap","R&B/Soul","Country","Jazz","Classical","Gospel","Producers","Songwriters"]},{id:"royalty",name:"Royalty & Nobility",icon:zo,color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",subCategories:["Kings","Queens","Princes","Princesses","Dukes","Duchesses","Other Nobility"]},{id:"philanthropy",name:"Philanthropists",icon:_t,color:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",subCategories:["Humanitarian","Charity Founders","Social Activists","Environmental"]},{id:"business",name:"Business Leaders",icon:Eg,color:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",subCategories:["CEOs","Entrepreneurs","Investors","Innovators"]},{id:"politics",name:"Political Figures",icon:Ms,color:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-300",subCategories:["Presidents","Prime Ministers","Senators","Governors","Ambassadors","Activists"]},{id:"arts",name:"Artists & Writers",icon:Uo,color:"bg-teal-100 text-teal-800 dark:bg-teal-900 dark:text-teal-300",subCategories:["Painters","Sculptors","Novelists","Poets","Playwrights","Journalists","Critics"]},{id:"comedy",name:"Comedians",icon:QI,color:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-300",subCategories:["Stand-up","Improv","Sketch Comedy","Comedy Writers"]},{id:"science",name:"Scientists & Educators",icon:Ks,color:"bg-cyan-100 text-cyan-800 dark:bg-cyan-900 dark:text-cyan-300",subCategories:["Physicists","Biologists","Chemists","Astronomers","Professors","Researchers"]}];function Fie(){const[t,s]=N.useState(""),[r,n]=N.useState(""),[a,i]=N.useState(null),[o,l]=N.useState(!1),{data:c=[],isLoading:d}=Xe({queryKey:["/api/celebrity-memorials"]}),u=[...c].sort((p,g)=>(g.fanCount||0)-(p.fanCount||0)).slice(0,3),m=c.filter(p=>{const g=p.name.toLowerCase().includes(t.toLowerCase())||p.title.toLowerCase().includes(t.toLowerCase()),y=!r||p.professionCategory===r;return g&&y}),f=p=>{i(p),l(!0)},h=async(p,g)=>{a&&(console.log("Donation completed:",{celebrity:a.name,amount:p,email:g}),l(!1))};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("div",{className:"bg-gradient-to-br from-primary/15 to-accent/15 py-16",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"text-primary drop-shadow-md",children:[e.jsx("path",{d:"M16 2L18 8H14L16 2Z",fill:"currentColor",opacity:"0.9"}),e.jsx("rect",{x:"14",y:"8",width:"4",height:"16",fill:"currentColor",opacity:"0.8"}),e.jsx("path",{d:"M16 24C16 24 20 22 20 18V12H12V18C12 22 16 24 16 24Z",fill:"currentColor",opacity:"0.6"}),e.jsx("circle",{cx:"8",cy:"8",r:"2",fill:"currentColor",opacity:"0.7"}),e.jsx("circle",{cx:"24",cy:"8",r:"2",fill:"currentColor",opacity:"0.7"}),e.jsx("path",{d:"M8 8C8 8 10 6 12 8",stroke:"currentColor",strokeWidth:"1",opacity:"0.7"}),e.jsx("path",{d:"M24 8C24 8 22 6 20 8",stroke:"currentColor",strokeWidth:"1",opacity:"0.7"}),e.jsx("ellipse",{cx:"16",cy:"28",rx:"12",ry:"2",fill:"currentColor",opacity:"0.3"})]}),e.jsx("div",{children:e.jsx("h1",{className:"text-4xl md:text-5xl font-serif font-semibold bg-gradient-to-r from-primary via-accent to-secondary bg-clip-text text-transparent",children:"Celebrity & Influencer Memorials"})})]}),e.jsxs(O,{size:"lg",onClick:()=>window.location.href="/create-celebrity-memorial","data-testid":"button-create-celebrity-memorial",className:"bg-[hsl(45,80%,60%)] hover:bg-[hsl(45,80%,55%)] text-foreground border-none shadow-lg font-medium",children:[e.jsx(bs,{className:"w-5 h-5 mr-2"}),"Create Memorial"]})]}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-3xl mb-6",children:"Honor iconic figures and support their favorite charities. Each memorial unlocks with a $10 donation, with 95% going directly to the charity."}),e.jsx(ze,{variant:"outline",className:"text-sm",children:"Verified by family, lawyers, or authorized representatives"})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[u.length>0&&!d&&e.jsxs("div",{className:"mb-16",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-serif font-semibold bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"Featured Memorials"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Most visited and celebrated figures"})]}),e.jsxs(ze,{variant:"secondary",className:"bg-[hsl(45,80%,15%)] text-[hsl(45,80%,60%)]",children:[e.jsx(Ks,{className:"w-4 h-4 mr-1"}),"Top Tributes"]})]}),e.jsx("div",{className:"grid gap-6 md:grid-cols-3",children:u.map(p=>{var y;const g=f2.find(v=>v.id===p.professionCategory);return e.jsxs($,{className:"group cursor-pointer overflow-hidden hover-elevate",children:[e.jsxs("div",{className:"relative h-48 bg-gradient-to-br from-primary/20 to-accent/20",children:[p.imageUrl?e.jsx("img",{src:p.imageUrl,alt:p.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ks,{className:"w-16 h-16 mx-auto mb-2 text-primary/50"}),e.jsx("p",{className:"text-lg font-serif text-foreground/80",children:p.name})]})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4",children:[e.jsx("h3",{className:"text-xl font-semibold text-white",children:p.name}),e.jsx("p",{className:"text-white/90 text-sm",children:p.title})]}),g&&e.jsx("div",{className:`absolute top-3 right-3 w-10 h-10 rounded-full ${g.color} flex items-center justify-center`,children:e.jsx(g.icon,{className:"w-5 h-5"})})]}),e.jsxs(V,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs(ze,{variant:"outline",className:"text-xs",children:[e.jsx(_t,{className:"w-3 h-3 mr-1"}),((y=p.fanCount)==null?void 0:y.toLocaleString())||0," fans"]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[p.birthDate," - ",p.deathDate]})]}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-3",children:["Supporting: ",e.jsx("span",{className:"font-medium text-foreground",children:p.charityName})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(O,{variant:"default",size:"sm",className:"flex-1 bg-[hsl(45,80%,60%)] hover:bg-[hsl(45,80%,55%)] text-foreground border-none",onClick:v=>{v.stopPropagation(),f(p)},"data-testid":`button-donate-${p.id}`,children:[e.jsx(_t,{className:"w-4 h-4 mr-1"}),"Support $",p.donationAmount]}),e.jsx(O,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>window.location.href=`/celebrity-memorial/${p.id}`,"data-testid":`button-view-${p.id}`,children:"View Memorial"})]})]})]},p.id)})})]}),e.jsxs("div",{className:"mb-12",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Browse by Profession"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-4 mb-8",children:f2.map(p=>{const g=p.icon,y=r===p.id;return e.jsx($,{className:`cursor-pointer transition-all hover-elevate ${y?"ring-2 ring-primary shadow-lg":""}`,onClick:()=>n(y?"":p.id),"data-testid":`card-category-${p.id}`,children:e.jsxs(V,{className:"p-6 text-center",children:[e.jsx("div",{className:`w-12 h-12 mx-auto mb-3 rounded-full ${p.color} flex items-center justify-center`,children:e.jsx(g,{className:"w-6 h-6"})}),e.jsx("p",{className:"font-semibold text-sm",children:p.name}),y&&e.jsx(ze,{variant:"secondary",className:"mt-2 text-xs",children:"Active"})]})},p.id)})})]}),e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"relative max-w-xl",children:[e.jsx(Cc,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),e.jsx(re,{placeholder:"Search celebrities...",value:t,onChange:p=>s(p.target.value),className:"pl-10","data-testid":"input-search-celebrities"})]})}),r&&e.jsxs("div",{className:"flex items-center justify-between mb-6 bg-muted/50 p-4 rounded-lg",children:[e.jsx("div",{className:"flex items-center gap-3",children:(()=>{const p=f2.find(y=>y.id===r),g=(p==null?void 0:p.icon)||Ks;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`w-8 h-8 rounded-full ${p==null?void 0:p.color} flex items-center justify-center`,children:e.jsx(g,{className:"w-4 h-4"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold",children:["Showing ",p==null?void 0:p.name]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[m.length," memorial",m.length!==1?"s":""," found"]})]})]})})()}),e.jsx(O,{variant:"outline",size:"sm",onClick:()=>n(""),"data-testid":"button-clear-category-filter",children:"Show All"})]}),d?e.jsxs("div",{className:"space-y-8","data-testid":"loading-skeletons",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 text-muted-foreground",children:[e.jsx(tn,{className:"w-5 h-5 animate-spin"}),e.jsx("p",{children:"Loading celebrity memorials..."})]}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[1,2,3,4,5,6].map(p=>e.jsxs($,{className:"overflow-hidden",children:[e.jsxs("div",{className:"relative",children:[e.jsx(tt,{className:"h-64 w-full"}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black/80 to-transparent",children:[e.jsx(tt,{className:"h-6 w-3/4 bg-white/20 mb-2"}),e.jsx(tt,{className:"h-4 w-1/2 bg-white/20"})]})]}),e.jsxs(V,{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(tt,{className:"h-4 w-4 rounded-full"}),e.jsx(tt,{className:"h-4 w-32"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(tt,{className:"h-9 flex-1 rounded"}),e.jsx(tt,{className:"h-9 flex-1 rounded"})]})]})]},p))})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:m.map(p=>e.jsx(Iie,{name:p.name,title:p.title,imageUrl:p.imageUrl||void 0,charityName:p.charityName,donationAmount:Number(p.donationAmount),fanCount:p.fanCount||0,isUnlocked:!1,onDonate:()=>f(p),onView:()=>console.log("View memorial:",p.name)},p.id))}),m.length===0&&!d&&e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-muted-foreground",children:c.length===0?"No celebrity memorials available yet.":"No celebrities found matching your search."})})]})]}),a&&e.jsx(Rie,{open:o,onOpenChange:l,celebrityName:a.name,charityName:a.charityName,donationAmount:Number(a.donationAmount),platformPercentage:a.platformPercentage||5,onSubmit:h})]})}const w6=[{id:"sports",name:"Sports & Athletics",icon:Ni,subCategories:["Basketball","Football","Baseball","Soccer","Tennis","Boxing","Golf","Track & Field","Swimming","Other Sports"]},{id:"entertainment",name:"Actors & Actresses",icon:HI,subCategories:["Film","Television","Theater","Voice Acting","Stunt Performers"]},{id:"music",name:"Musicians & Artists",icon:zn,subCategories:["Pop","Rock","Hip-Hop/Rap","R&B/Soul","Country","Jazz","Classical","Gospel","Producers","Songwriters"]},{id:"royalty",name:"Royalty & Nobility",icon:zo,subCategories:["Kings","Queens","Princes","Princesses","Dukes","Duchesses","Other Nobility"]},{id:"philanthropy",name:"Philanthropists",icon:_t,subCategories:["Humanitarian","Charity Founders","Social Activists","Environmental"]},{id:"business",name:"Business Leaders",icon:Eg,subCategories:["CEOs","Entrepreneurs","Investors","Innovators"]},{id:"politics",name:"Political Figures",icon:Ms,subCategories:["Presidents","Prime Ministers","Senators","Governors","Ambassadors","Activists"]},{id:"arts",name:"Artists & Writers",icon:Uo,subCategories:["Painters","Sculptors","Novelists","Poets","Playwrights","Journalists","Critics"]},{id:"comedy",name:"Comedians",icon:QI,subCategories:["Stand-up","Improv","Sketch Comedy","Comedy Writers"]},{id:"science",name:"Scientists & Educators",icon:Ks,subCategories:["Physicists","Biologists","Chemists","Astronomers","Professors","Researchers"]}],Oie=Dr({name:we().min(2,"Name is required"),title:we().min(2,"Title/profession is required"),biography:we().min(20,"Please write at least a brief biography"),imageUrl:we().url("Please enter a valid image URL").optional().or(wr("")),charityName:we().min(2,"Charity name is required"),donationAmount:we().min(1,"Donation amount is required"),platformPercentage:we().optional(),birthDate:we().optional().or(wr("")),deathDate:we().optional().or(wr("")),professionCategory:we().min(1,"Please select a profession category"),subProfession:we().optional().or(wr("")),submitterName:we().min(2,"Submitter name is required"),submitterEmail:we().email("Please enter a valid email"),submitterRelationship:we().min(2,"Relationship is required"),submitterPhone:we().optional().or(wr("")),memorialTemplate:we().optional(),primaryColor:we().optional().or(wr("")),secondaryColor:we().optional().or(wr("")),accentColor:we().optional().or(wr(""))});function $ie(){const[,t]=ja(),{toast:s}=Ht(),[r,n]=N.useState(1),[a,i]=N.useState([]),[o,l]=N.useState([]),[c,d]=N.useState({title:"",year:"",description:""}),[u,m]=N.useState({name:"",year:"",category:""}),f=Or({resolver:$r(Oie),defaultValues:{name:"",title:"",biography:"",imageUrl:"",charityName:"",donationAmount:"10",platformPercentage:"5",birthDate:"",deathDate:"",professionCategory:"",subProfession:"",submitterName:"",submitterEmail:"",submitterRelationship:"",submitterPhone:"",memorialTemplate:"classic",primaryColor:"",secondaryColor:"",accentColor:""}}),h=f.watch("professionCategory"),p=w6.find(L=>L.id===h),g=yt({mutationFn:async L=>{const T={...L,donationAmount:L.donationAmount,platformPercentage:parseInt(L.platformPercentage||"5"),achievements:a.length>0?a:void 0,awards:o.length>0?o:void 0,themeColors:L.primaryColor||L.secondaryColor||L.accentColor?{primary:L.primaryColor||"#9333ea",secondary:L.secondaryColor||"#f59e0b",accent:L.accentColor||"#06b6d4"}:void 0};return await pt("POST","/api/celebrity-memorials",T)},onSuccess:()=>{s({title:"Memorial submitted successfully",description:"Your celebrity memorial has been submitted for verification. You'll be notified once it's approved."}),xt.invalidateQueries({queryKey:["/api/celebrity-memorials"]}),t("/celebrity-memorials")},onError:L=>{s({title:"Failed to create memorial",description:L.message,variant:"destructive"})}}),y=L=>{g.mutate(L)},v=()=>{c.title&&c.year&&(i([...a,c]),d({title:"",year:"",description:""}))},j=L=>{i(a.filter((T,M)=>M!==L))},w=()=>{u.name&&u.year&&(l([...o,u]),m({name:"",year:"",category:""}))},_=L=>{l(o.filter((T,M)=>M!==L))},P=()=>{r===1?f.trigger(["name","title","biography","professionCategory"]).then(L=>{L&&n(2)}):r===2?f.trigger(["charityName","donationAmount"]).then(L=>{L&&n(3)}):r===3&&n(4)},E=()=>{r>1&&n(r-1)};return e.jsx("div",{className:"min-h-screen bg-background py-12",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs(O,{variant:"ghost",onClick:()=>t("/celebrity-memorials"),className:"mb-4","data-testid":"button-back",children:[e.jsx(Sr,{className:"w-4 h-4 mr-2"}),"Back to Celebrity Memorials"]}),e.jsx("h1",{className:"text-4xl font-serif font-semibold mb-2",children:"Create Celebrity Memorial"}),e.jsx("p",{className:"text-muted-foreground",children:"Submit a memorial for verification by family members, lawyers, or authorized representatives"})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"flex items-center justify-between",children:[1,2,3,4].map(L=>e.jsxs("div",{className:"flex items-center flex-1",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-semibold ${r>=L?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"}`,children:r>L?e.jsx(Oo,{className:"w-6 h-6"}):L}),L<4&&e.jsx("div",{className:`flex-1 h-1 mx-2 ${r>L?"bg-primary":"bg-muted"}`})]},L))}),e.jsxs("div",{className:"flex justify-between mt-2 text-xs text-muted-foreground",children:[e.jsx("span",{children:"Basic Info"}),e.jsx("span",{children:"Charity"}),e.jsx("span",{children:"Achievements"}),e.jsx("span",{children:"Verification"})]})]}),e.jsx(Wr,{...f,children:e.jsxs("form",{onSubmit:f.handleSubmit(y),className:"space-y-6",children:[r===1&&e.jsxs($,{children:[e.jsxs(le,{children:[e.jsx(ge,{children:"Basic Information"}),e.jsx($e,{children:"Enter the celebrity's basic details and profession"})]}),e.jsxs(V,{className:"space-y-4",children:[e.jsx(fe,{control:f.control,name:"name",render:({field:L})=>e.jsxs(me,{children:[e.jsx(he,{children:"Full Name *"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"e.g., Michael Jordan",...L,"data-testid":"input-name"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:f.control,name:"title",render:({field:L})=>e.jsxs(me,{children:[e.jsx(he,{children:"Title/Profession *"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"e.g., Professional Basketball Player",...L,"data-testid":"input-title"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:f.control,name:"professionCategory",render:({field:L})=>e.jsxs(me,{children:[e.jsx(he,{children:"Profession Category *"}),e.jsxs(Rt,{onValueChange:L.onChange,defaultValue:L.value,children:[e.jsx(xe,{children:e.jsx(Mt,{"data-testid":"select-profession-category",children:e.jsx(Ft,{placeholder:"Select a profession category"})})}),e.jsx(Lt,{children:w6.map(T=>e.jsx(te,{value:T.id,children:T.name},T.id))})]}),e.jsx(ye,{})]})}),p&&e.jsx(fe,{control:f.control,name:"subProfession",render:({field:L})=>e.jsxs(me,{children:[e.jsx(he,{children:"Specific Field"}),e.jsxs(Rt,{onValueChange:L.onChange,defaultValue:L.value,children:[e.jsx(xe,{children:e.jsx(Mt,{"data-testid":"select-sub-profession",children:e.jsx(Ft,{placeholder:"Select specific field"})})}),e.jsx(Lt,{children:p.subCategories.map(T=>e.jsx(te,{value:T,children:T},T))})]}),e.jsx(ye,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(fe,{control:f.control,name:"birthDate",render:({field:L})=>e.jsxs(me,{children:[e.jsx(he,{children:"Birth Date"}),e.jsx(xe,{children:e.jsx(re,{type:"date",...L,"data-testid":"input-birth-date"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:f.control,name:"deathDate",render:({field:L})=>e.jsxs(me,{children:[e.jsx(he,{children:"Death Date"}),e.jsx(xe,{children:e.jsx(re,{type:"date",...L,"data-testid":"input-death-date"})}),e.jsx(ye,{})]})})]}),e.jsx(fe,{control:f.control,name:"imageUrl",render:({field:L})=>e.jsxs(me,{children:[e.jsx(he,{children:"Photo URL"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"https://example.com/photo.jpg",...L,"data-testid":"input-image-url"})}),e.jsx(Qt,{children:"Enter a direct link to the celebrity's photo"}),e.jsx(ye,{})]})}),e.jsx(fe,{control:f.control,name:"biography",render:({field:L})=>e.jsxs(me,{children:[e.jsx(he,{children:"Biography *"}),e.jsx(xe,{children:e.jsx(Gt,{placeholder:"Write a brief biography about this person's life and contributions...",className:"min-h-32",...L,"data-testid":"textarea-biography"})}),e.jsx(ye,{})]})}),e.jsx("div",{className:"flex justify-end gap-2 pt-4",children:e.jsx(O,{type:"button",onClick:P,"data-testid":"button-next-step1",children:"Next Step"})})]})]}),r===2&&e.jsxs($,{children:[e.jsxs(le,{children:[e.jsx(ge,{children:"Charity Information"}),e.jsx($e,{children:"Specify the charity and donation details"})]}),e.jsxs(V,{className:"space-y-4",children:[e.jsx(fe,{control:f.control,name:"charityName",render:({field:L})=>e.jsxs(me,{children:[e.jsx(he,{children:"Charity Name *"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"e.g., American Red Cross",...L,"data-testid":"input-charity-name"})}),e.jsx(Qt,{children:"The charity that will receive donations"}),e.jsx(ye,{})]})}),e.jsx(fe,{control:f.control,name:"donationAmount",render:({field:L})=>e.jsxs(me,{children:[e.jsx(he,{children:"Donation Amount (USD) *"}),e.jsx(xe,{children:e.jsx(re,{type:"number",min:"1",step:"0.01",placeholder:"10",...L,"data-testid":"input-donation-amount"})}),e.jsx(Qt,{children:"Minimum donation required to view the memorial"}),e.jsx(ye,{})]})}),e.jsx(fe,{control:f.control,name:"platformPercentage",render:({field:L})=>e.jsxs(me,{children:[e.jsx(he,{children:"Platform Fee (%)"}),e.jsx(xe,{children:e.jsx(re,{type:"number",min:"0",max:"15",step:"1",...L,"data-testid":"input-platform-percentage"})}),e.jsx(Qt,{children:"Percentage retained by the platform (default: 5%)"}),e.jsx(ye,{})]})}),e.jsxs("div",{className:"flex justify-between gap-2 pt-4",children:[e.jsx(O,{type:"button",variant:"outline",onClick:E,"data-testid":"button-prev-step2",children:"Back"}),e.jsx(O,{type:"button",onClick:P,"data-testid":"button-next-step2",children:"Next Step"})]})]})]}),r===3&&e.jsxs($,{children:[e.jsxs(le,{children:[e.jsx(ge,{children:"Achievements & Awards"}),e.jsx($e,{children:"Add notable achievements and awards (optional)"})]}),e.jsxs(V,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Achievements"}),e.jsxs("div",{className:"space-y-2 mb-3",children:[e.jsx(re,{placeholder:"Achievement title",value:c.title,onChange:L=>d({...c,title:L.target.value}),"data-testid":"input-achievement-title"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(re,{placeholder:"Year",value:c.year,onChange:L=>d({...c,year:L.target.value}),"data-testid":"input-achievement-year"}),e.jsx(re,{placeholder:"Description (optional)",value:c.description,onChange:L=>d({...c,description:L.target.value}),"data-testid":"input-achievement-description"})]}),e.jsxs(O,{type:"button",size:"sm",onClick:v,"data-testid":"button-add-achievement",children:[e.jsx(bs,{className:"w-4 h-4 mr-1"}),"Add Achievement"]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.map((L,T)=>e.jsxs(ze,{variant:"secondary",className:"text-sm",children:[L.title," (",L.year,")",e.jsx(Vo,{className:"w-3 h-3 ml-1 cursor-pointer",onClick:()=>j(T)})]},T))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Awards"}),e.jsxs("div",{className:"space-y-2 mb-3",children:[e.jsx(re,{placeholder:"Award name",value:u.name,onChange:L=>m({...u,name:L.target.value}),"data-testid":"input-award-name"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(re,{placeholder:"Year",value:u.year,onChange:L=>m({...u,year:L.target.value}),"data-testid":"input-award-year"}),e.jsx(re,{placeholder:"Category (optional)",value:u.category,onChange:L=>m({...u,category:L.target.value}),"data-testid":"input-award-category"})]}),e.jsxs(O,{type:"button",size:"sm",onClick:w,"data-testid":"button-add-award",children:[e.jsx(bs,{className:"w-4 h-4 mr-1"}),"Add Award"]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:o.map((L,T)=>e.jsxs(ze,{variant:"secondary",className:"text-sm",children:[L.name," (",L.year,")",e.jsx(Vo,{className:"w-3 h-3 ml-1 cursor-pointer",onClick:()=>_(T)})]},T))})]}),e.jsxs("div",{className:"flex justify-between gap-2 pt-4",children:[e.jsx(O,{type:"button",variant:"outline",onClick:E,"data-testid":"button-prev-step3",children:"Back"}),e.jsx(O,{type:"button",onClick:P,"data-testid":"button-next-step3",children:"Next Step"})]})]})]}),r===4&&e.jsxs($,{children:[e.jsxs(le,{children:[e.jsx(ge,{children:"Verification Information"}),e.jsx($e,{children:"Provide your contact information for verification. We'll review your submission and contact you if needed."})]}),e.jsxs(V,{className:"space-y-4",children:[e.jsx(fe,{control:f.control,name:"submitterName",render:({field:L})=>e.jsxs(me,{children:[e.jsx(he,{children:"Your Full Name *"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"e.g., John Smith",...L,"data-testid":"input-submitter-name"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:f.control,name:"submitterEmail",render:({field:L})=>e.jsxs(me,{children:[e.jsx(he,{children:"Email Address *"}),e.jsx(xe,{children:e.jsx(re,{type:"email",placeholder:"john@example.com",...L,"data-testid":"input-submitter-email"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:f.control,name:"submitterPhone",render:({field:L})=>e.jsxs(me,{children:[e.jsx(he,{children:"Phone Number"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"+1 (555) 123-4567",...L,"data-testid":"input-submitter-phone"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:f.control,name:"submitterRelationship",render:({field:L})=>e.jsxs(me,{children:[e.jsx(he,{children:"Relationship to Deceased *"}),e.jsxs(Rt,{onValueChange:L.onChange,defaultValue:L.value,children:[e.jsx(xe,{children:e.jsx(Mt,{"data-testid":"select-relationship",children:e.jsx(Ft,{placeholder:"Select relationship"})})}),e.jsxs(Lt,{children:[e.jsx(te,{value:"family",children:"Family Member"}),e.jsx(te,{value:"lawyer",children:"Lawyer/Attorney"}),e.jsx(te,{value:"power_of_attorney",children:"Power of Attorney"}),e.jsx(te,{value:"estate_executor",children:"Estate Executor"}),e.jsx(te,{value:"publicist",children:"Publicist/Agent"}),e.jsx(te,{value:"foundation",children:"Foundation Representative"}),e.jsx(te,{value:"other",children:"Other Authorized Representative"})]})]}),e.jsx(Qt,{children:"We'll verify your authorization to create this memorial"}),e.jsx(ye,{})]})}),e.jsxs("div",{className:"bg-muted/50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Verification Process"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"After submission, our team will:"}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Review your relationship to the deceased"}),e.jsx("li",{children:"Verify the accuracy of the information provided"}),e.jsx("li",{children:"Contact you if additional documentation is needed"}),e.jsx("li",{children:"Approve and publish the memorial once verified"})]})]}),e.jsxs("div",{className:"flex justify-between gap-2 pt-4",children:[e.jsx(O,{type:"button",variant:"outline",onClick:E,"data-testid":"button-prev-step4",children:"Back"}),e.jsx(O,{type:"submit",disabled:g.isPending,"data-testid":"button-submit",children:g.isPending?"Submitting...":"Submit for Verification"})]})]})]})]})})]})})}const Bie=Dr({memorialId:we().min(1,"Please select a memorial"),facilityId:we().min(1,"Please select a facility"),inmateFirstName:we().min(1,"First name is required"),inmateLastName:we().min(1,"Last name is required"),inmateDocNumber:we().min(1,"DOC number is required"),relationshipToDeceased:we().min(1,"Relationship is required"),requestedByName:we().min(1,"Your name is required"),requestedByEmail:we().email("Valid email is required"),requestedByPhone:we().optional(),relationshipProofUrl:we().url().optional().or(wr("")),additionalNotes:we().optional()});function Uie(){const{toast:t}=Ht(),[s,r]=N.useState(1),[n,a]=N.useState(null),{data:i,isLoading:o}=Xe({queryKey:["/api/prison-facilities"]}),{data:l,isLoading:c}=Xe({queryKey:["/api/memorials"]}),d=Or({resolver:$r(Bie),defaultValues:{memorialId:"",facilityId:"",inmateFirstName:"",inmateLastName:"",inmateDocNumber:"",relationshipToDeceased:"",requestedByName:"",requestedByEmail:"",requestedByPhone:"",relationshipProofUrl:"",additionalNotes:""}}),u=yt({mutationFn:async p=>await(await pt("POST","/api/prison-access-requests",p)).json(),onSuccess:p=>{xt.invalidateQueries({queryKey:["/api/prison-access-requests"]}),a(p.id),r(5),t({title:"Request Submitted",description:"Your prison access request has been submitted for review."})},onError:p=>{t({title:"Error",description:p.message,variant:"destructive"})}}),m=p=>{u.mutate(p)},f=async(p,g)=>{await d.trigger(g)&&r(p)},h=()=>e.jsx("div",{className:"flex items-center justify-center gap-4 mb-8",children:[1,2,3,4].map(p=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full border-2 ${p===s?"border-primary bg-primary text-primary-foreground":p<s?"border-primary bg-primary/10 text-primary":"border-muted-foreground/30 text-muted-foreground"}`,children:p<s?e.jsx(Oo,{className:"w-5 h-5"}):p}),p<4&&e.jsx("div",{className:`w-16 h-0.5 ${p<s?"bg-primary":"bg-muted-foreground/30"}`})]},p))});return n?e.jsx("div",{className:"container max-w-4xl mx-auto px-4 py-12",children:e.jsxs($,{children:[e.jsxs(le,{className:"text-center",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mb-4",children:e.jsx(Oo,{className:"w-8 h-8 text-primary"})}),e.jsx(ge,{className:"text-2xl",children:"Request Submitted Successfully"}),e.jsx($e,{children:"Your prison access request has been submitted and is now under review."})]}),e.jsxs(V,{className:"space-y-6",children:[e.jsxs("div",{className:"bg-muted/50 p-6 rounded-lg space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Request ID:"}),e.jsx("span",{className:"text-sm font-mono text-muted-foreground","data-testid":"text-request-id",children:n})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Status:"}),e.jsx("span",{className:"text-sm text-amber-600 font-medium","data-testid":"text-request-status",children:"Pending Review"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"font-semibold",children:"What Happens Next?"}),e.jsxs("ol",{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsxs("li",{className:"flex gap-2",children:[e.jsx("span",{className:"text-primary font-semibold",children:"1."}),e.jsx("span",{children:"The correctional facility will verify the inmate's identity using the provided DOC number."})]}),e.jsxs("li",{className:"flex gap-2",children:[e.jsx("span",{className:"text-primary font-semibold",children:"2."}),e.jsx("span",{children:"Your relationship to the deceased will be verified through the documentation provided."})]}),e.jsxs("li",{className:"flex gap-2",children:[e.jsx("span",{className:"text-primary font-semibold",children:"3."}),e.jsx("span",{children:"You'll receive payment instructions for the facility access fees (typically $0.15/minute)."})]}),e.jsxs("li",{className:"flex gap-2",children:[e.jsx("span",{className:"text-primary font-semibold",children:"4."}),e.jsx("span",{children:"Once approved and paid, a secure access token will be provided to the inmate."})]})]})]}),e.jsx("div",{className:"pt-4",children:e.jsx(O,{onClick:()=>{a(null),r(1),d.reset()},className:"w-full","data-testid":"button-new-request",children:"Submit Another Request"})})]})]})}):e.jsxs("div",{className:"container max-w-4xl mx-auto px-4 py-12",children:[e.jsxs("div",{className:"mb-8 text-center",children:[e.jsx("h1",{className:"text-3xl font-serif font-bold mb-2",children:"Prison Access Request"}),e.jsx("p",{className:"text-muted-foreground",children:"Request memorial access for an incarcerated loved one through a secure, verified process."})]}),h(),e.jsx(Wr,{...d,children:e.jsxs("form",{onSubmit:d.handleSubmit(m),children:[s===1&&e.jsxs($,{children:[e.jsx(le,{children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center",children:e.jsx(Ms,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{children:[e.jsx(ge,{children:"Select Memorial & Facility"}),e.jsx($e,{children:"Choose which memorial to access and the correctional facility"})]})]})}),e.jsxs(V,{className:"space-y-6",children:[e.jsx(fe,{control:d.control,name:"memorialId",render:({field:p})=>e.jsxs(me,{children:[e.jsx(he,{children:"Memorial"}),e.jsxs(Rt,{onValueChange:p.onChange,value:p.value,children:[e.jsx(xe,{children:e.jsx(Mt,{"data-testid":"select-memorial",children:e.jsx(Ft,{placeholder:"Select a memorial"})})}),e.jsx(Lt,{children:c?e.jsx(te,{value:"loading",children:"Loading..."}):l==null?void 0:l.map(g=>e.jsx(te,{value:g.id,children:g.fullName},g.id))})]}),e.jsx(ye,{})]})}),e.jsx(fe,{control:d.control,name:"facilityId",render:({field:p})=>e.jsxs(me,{children:[e.jsx(he,{children:"Correctional Facility"}),e.jsxs(Rt,{onValueChange:p.onChange,value:p.value,children:[e.jsx(xe,{children:e.jsx(Mt,{"data-testid":"select-facility",children:e.jsx(Ft,{placeholder:"Select a facility"})})}),e.jsx(Lt,{children:o?e.jsx(te,{value:"loading",children:"Loading..."}):i==null?void 0:i.map(g=>e.jsxs(te,{value:g.id,children:[g.name," - ",g.state]},g.id))})]}),e.jsx(ye,{})]})}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx(O,{type:"button",onClick:()=>f(2,["memorialId","facilityId"]),"data-testid":"button-next-step-1",children:"Next Step"})})]})]}),s===2&&e.jsxs($,{children:[e.jsx(le,{children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center",children:e.jsx(va,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{children:[e.jsx(ge,{children:"Inmate Information"}),e.jsx($e,{children:"Provide details for identity verification"})]})]})}),e.jsxs(V,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(fe,{control:d.control,name:"inmateFirstName",render:({field:p})=>e.jsxs(me,{children:[e.jsx(he,{children:"First Name"}),e.jsx(xe,{children:e.jsx(re,{...p,"data-testid":"input-inmate-firstname"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:d.control,name:"inmateLastName",render:({field:p})=>e.jsxs(me,{children:[e.jsx(he,{children:"Last Name"}),e.jsx(xe,{children:e.jsx(re,{...p,"data-testid":"input-inmate-lastname"})}),e.jsx(ye,{})]})})]}),e.jsx(fe,{control:d.control,name:"inmateDocNumber",render:({field:p})=>e.jsxs(me,{children:[e.jsx(he,{children:"DOC Number"}),e.jsx(xe,{children:e.jsx(re,{...p,placeholder:"Department of Corrections ID number","data-testid":"input-doc-number"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:d.control,name:"relationshipToDeceased",render:({field:p})=>e.jsxs(me,{children:[e.jsx(he,{children:"Relationship to Deceased"}),e.jsx(xe,{children:e.jsx(re,{...p,placeholder:"e.g., Son, Daughter, Friend","data-testid":"input-relationship"})}),e.jsx(ye,{})]})}),e.jsxs("div",{className:"flex justify-between pt-4",children:[e.jsx(O,{type:"button",variant:"outline",onClick:()=>r(1),"data-testid":"button-back-step-2",children:"Back"}),e.jsx(O,{type:"button",onClick:()=>f(3,["inmateFirstName","inmateLastName","inmateDocNumber","relationshipToDeceased"]),"data-testid":"button-next-step-2",children:"Next Step"})]})]})]}),s===3&&e.jsxs($,{children:[e.jsx(le,{children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center",children:e.jsx(NG,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{children:[e.jsx(ge,{children:"Your Information"}),e.jsx($e,{children:"We need your contact details to process this request"})]})]})}),e.jsxs(V,{className:"space-y-6",children:[e.jsx(fe,{control:d.control,name:"requestedByName",render:({field:p})=>e.jsxs(me,{children:[e.jsx(he,{children:"Your Full Name"}),e.jsx(xe,{children:e.jsx(re,{...p,"data-testid":"input-requestor-name"})}),e.jsx(ye,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(fe,{control:d.control,name:"requestedByEmail",render:({field:p})=>e.jsxs(me,{children:[e.jsx(he,{children:"Email Address"}),e.jsx(xe,{children:e.jsx(re,{...p,type:"email","data-testid":"input-requestor-email"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:d.control,name:"requestedByPhone",render:({field:p})=>e.jsxs(me,{children:[e.jsx(he,{children:"Phone Number (Optional)"}),e.jsx(xe,{children:e.jsx(re,{...p,type:"tel","data-testid":"input-requestor-phone"})}),e.jsx(ye,{})]})})]}),e.jsxs("div",{className:"flex justify-between pt-4",children:[e.jsx(O,{type:"button",variant:"outline",onClick:()=>r(2),"data-testid":"button-back-step-3",children:"Back"}),e.jsx(O,{type:"button",onClick:()=>f(4,["requestedByName","requestedByEmail"]),"data-testid":"button-next-step-3",children:"Next Step"})]})]})]}),s===4&&e.jsxs($,{children:[e.jsx(le,{children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center",children:e.jsx(N_,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{children:[e.jsx(ge,{children:"Verification & Documentation"}),e.jsx($e,{children:"Provide relationship proof to complete the request"})]})]})}),e.jsxs(V,{className:"space-y-6",children:[e.jsx(fe,{control:d.control,name:"relationshipProofUrl",render:({field:p})=>e.jsxs(me,{children:[e.jsx(he,{children:"Relationship Proof Document URL (Optional)"}),e.jsx(xe,{children:e.jsx(re,{...p,placeholder:"https://...","data-testid":"input-proof-url"})}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Upload your document to a file sharing service and paste the link here. Accepted: birth certificates, legal documents, letters from family."}),e.jsx(ye,{})]})}),e.jsx(fe,{control:d.control,name:"additionalNotes",render:({field:p})=>e.jsxs(me,{children:[e.jsx(he,{children:"Additional Notes (Optional)"}),e.jsx(xe,{children:e.jsx(Gt,{...p,rows:4,"data-testid":"input-notes"})}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Any additional information to help with the verification process."}),e.jsx(ye,{})]})}),e.jsxs("div",{className:"bg-amber-50 dark:bg-amber-950/20 border border-amber-200 dark:border-amber-800 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-sm mb-2 text-amber-900 dark:text-amber-100",children:"Important Information"}),e.jsxs("ul",{className:"text-sm text-amber-800 dark:text-amber-200 space-y-1",children:[e.jsx("li",{children:" Access fees are typically $0.15 per minute"}),e.jsx("li",{children:" Verification can take 2-5 business days"}),e.jsx("li",{children:" You'll receive payment instructions via email"}),e.jsx("li",{children:" Access tokens are time-limited for security"})]})]}),e.jsxs("div",{className:"flex justify-between pt-4",children:[e.jsx(O,{type:"button",variant:"outline",onClick:()=>r(3),"data-testid":"button-back-step-4",children:"Back"}),e.jsx(O,{type:"submit",disabled:u.isPending,"data-testid":"button-submit-request",children:u.isPending?"Submitting...":"Submit Request"})]})]})]})]})})]})}const o1=[{value:"inter",label:"Inter (Clean & Modern)",family:"Inter, sans-serif"},{value:"crimson",label:"Crimson Text (Elegant Serif)",family:"'Crimson Text', serif"},{value:"playfair",label:"Playfair Display (Classic)",family:"'Playfair Display', serif"},{value:"lora",label:"Lora (Traditional)",family:"'Lora', serif"},{value:"merriweather",label:"Merriweather (Warm)",family:"'Merriweather', serif"},{value:"montserrat",label:"Montserrat (Contemporary)",family:"'Montserrat', sans-serif"},{value:"raleway",label:"Raleway (Refined)",family:"'Raleway', sans-serif"},{value:"roboto",label:"Roboto (Simple)",family:"'Roboto', sans-serif"},{value:"opensans",label:"Open Sans (Friendly)",family:"'Open Sans', sans-serif"}];function zie({value:t,onChange:s,testId:r}){const n=o1.find(a=>a.value===t);return e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{children:"Typography Style"}),e.jsxs(Rt,{value:t,onValueChange:s,children:[e.jsx(Mt,{"data-testid":r,children:e.jsx(Ft,{placeholder:"Choose a font style"})}),e.jsx(Lt,{children:o1.map(a=>e.jsx(te,{value:a.value,children:e.jsx("span",{style:{fontFamily:a.family},children:a.label})},a.value))})]}),n&&e.jsxs("div",{className:"p-4 bg-muted rounded-lg border text-center",style:{fontFamily:n.family},children:[e.jsx("p",{className:"text-lg",children:"Preview: In loving memory"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"1950 - 2024"})]})]})}const l1=[{value:"cross",label:"Cross (Christian)",icon:Tg},{value:"heart",label:"Heart (Love)",icon:_t},{value:"star",label:"Star of David (Jewish)",icon:Ks},{value:"moon",label:"Crescent Moon (Islamic)",icon:Ka},{value:"ankh",label:"Ankh (Kemetic/Egyptian)",icon:pG},{value:"dharma-wheel",label:"Dharma Wheel (Buddhist)",icon:dw},{value:"om",label:"Om Symbol (Hindu)",icon:Bs},{value:"lotus",label:"Lotus (Buddhist/Hindu)",icon:of},{value:"hamsa",label:"Hamsa (Protection)",icon:CG},{value:"eye-horus",label:"Eye of Horus (Egyptian)",icon:Ei},{value:"yin-yang",label:"Yin Yang (Taoist)",icon:YG},{value:"tree-life",label:"Tree of Life (Universal)",icon:Bx},{value:"mountain",label:"Sacred Mountain (Spiritual)",icon:ZI},{value:"water",label:"Water (Life & Renewal)",icon:eR},{value:"wind",label:"Spirit Wind (Indigenous)",icon:KG},{value:"flame",label:"Eternal Flame (Memorial)",icon:Nr},{value:"sun",label:"Sun (Life & Energy)",icon:Yi},{value:"bird",label:"Bird (Freedom & Ascension)",icon:Pg},{value:"infinity",label:"Infinity (Eternal Love)",icon:kG},{value:"handheart",label:"Hand & Heart (Compassion)",icon:S_},{value:"feather",label:"Feather (Peace & Journey)",icon:bG}];function qie({value:t,onChange:s,testId:r}){const n=l1.find(i=>i.value===t),a=n==null?void 0:n.icon;return e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{children:"Memorial Symbol"}),e.jsxs(Rt,{value:t,onValueChange:s,children:[e.jsx(Mt,{"data-testid":r,children:e.jsx(Ft,{placeholder:"Choose a meaningful symbol"})}),e.jsx(Lt,{children:l1.map(i=>{const o=i.icon;return e.jsx(te,{value:i.value,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(o,{className:"w-4 h-4"}),e.jsx("span",{children:i.label})]})},i.value)})})]}),a&&e.jsxs("div",{className:"p-4 bg-muted rounded-lg border flex flex-col items-center justify-center gap-2",children:[e.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center",children:e.jsx(a,{className:"w-6 h-6 text-primary"})}),e.jsx("p",{className:"text-sm text-muted-foreground",children:n.label})]})]})}function Vie(t){if(!t)return;const s=o1.find(r=>r.value===t);return s==null?void 0:s.family}function Hie(t){if(!t)return;const s=l1.find(r=>r.value===t);return s==null?void 0:s.icon}function Wie({category:t,maxAds:s=2,className:r}){const{data:n}=Xe({queryKey:["/api/advertisements",t],queryFn:async()=>{const o=t?`/api/advertisements?category=${t}`:"/api/advertisements",l=await fetch(o);if(!l.ok)throw new Error("Failed to fetch");return l.json()}}),a=(n==null?void 0:n.slice(0,s))||[];N.useEffect(()=>{a.forEach(o=>{fetch(`/api/advertisements/${o.id}/impression`,{method:"POST"})})},[a.map(o=>o.id).join(",")]);const i=async o=>{await fetch(`/api/advertisements/${o.id}/click`,{method:"POST"}),o.websiteUrl&&window.open(o.websiteUrl,"_blank","noopener,noreferrer")};return a.length?e.jsxs("div",{className:r,children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-2 text-center",children:"Memorial Services & Products"}),e.jsx("div",{className:"space-y-3",children:a.map(o=>e.jsxs($,{className:"hover-elevate cursor-pointer transition-all",onClick:()=>i(o),"data-testid":`ad-${o.id}`,children:[e.jsx(le,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(ge,{className:"text-sm",children:o.productName}),o.pricing&&e.jsx(ze,{variant:"secondary",className:"text-xs",children:o.pricing})]}),e.jsx($e,{className:"text-xs",children:o.companyName})]}),e.jsx(pa,{className:"w-4 h-4 text-muted-foreground flex-shrink-0"})]})}),(o.description||o.imageUrl)&&e.jsxs(V,{className:"pt-0",children:[o.imageUrl&&e.jsx("div",{className:"mb-2 h-24 rounded-md overflow-hidden bg-muted",children:e.jsx("img",{src:o.imageUrl,alt:o.productName,className:"w-full h-full object-cover"})}),e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:o.description}),o.contactPhone&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Call: ",o.contactPhone]})]})]},o.id))}),e.jsx("div",{className:"text-xs text-muted-foreground text-center mt-2",children:"Sponsored"})]}):null}const Kie={police:va,fire:Nr,medical:y_,military:va,other:_t},Yie={police:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",fire:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",medical:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",military:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300",other:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300"};function Gie(){const[t,s]=N.useState(""),{data:r,isLoading:n}=Xe({queryKey:["/api/essential-workers",t],queryFn:async()=>{const i=t?`/api/essential-workers?category=${t}`:"/api/essential-workers",o=await fetch(i);if(!o.ok)throw new Error("Failed to fetch");return o.json()}}),a=i=>{const o=Kie[i]||_t;return e.jsx(o,{className:"w-5 h-5"})};return e.jsxs("div",{className:"container max-w-7xl mx-auto px-4 py-12",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center",children:e.jsx(Tg,{className:"w-6 h-6 text-primary"})}),e.jsx("h1",{className:"text-4xl font-serif font-bold",children:"Honoring Essential Workers"})]}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto mb-6",children:"In grateful memory of the brave men and women who dedicated their lives to serving and protecting our communities."}),e.jsxs(O,{size:"lg",onClick:()=>window.location.href="/create-essential-worker","data-testid":"button-create-essential-worker-memorial",className:"bg-[hsl(45,80%,60%)] hover:bg-[hsl(45,80%,55%)] text-foreground border-none shadow-lg font-medium",children:[e.jsx(bs,{className:"w-5 h-5 mr-2"}),"Create Essential Worker Memorial"]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-12",children:[e.jsx($,{className:"hover-elevate overflow-hidden group","data-testid":"card-category-police",children:e.jsx(V,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col items-center text-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center group-hover:scale-110 transition-transform",children:e.jsx(va,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg mb-1",children:"Police Officers"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Protect & Serve"})]}),e.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[e.jsx(O,{size:"sm",variant:t==="police"?"default":"outline",onClick:()=>s("police"),"data-testid":"button-view-police",className:"w-full",children:"View Memorials"}),e.jsxs(O,{size:"sm",onClick:()=>window.location.href="/create-essential-worker?category=police","data-testid":"button-create-police",className:"w-full bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx(bs,{className:"w-4 h-4 mr-1"}),"Create Police Memorial"]})]})]})})}),e.jsx($,{className:"hover-elevate overflow-hidden group","data-testid":"card-category-fire",children:e.jsx(V,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col items-center text-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center group-hover:scale-110 transition-transform",children:e.jsx(Nr,{className:"w-8 h-8 text-red-600 dark:text-red-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg mb-1",children:"Firefighters"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Courage & Honor"})]}),e.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[e.jsx(O,{size:"sm",variant:t==="fire"?"default":"outline",onClick:()=>s("fire"),"data-testid":"button-view-fire",className:"w-full",children:"View Memorials"}),e.jsxs(O,{size:"sm",onClick:()=>window.location.href="/create-essential-worker?category=fire","data-testid":"button-create-fire",className:"w-full bg-red-600 hover:bg-red-700 text-white",children:[e.jsx(bs,{className:"w-4 h-4 mr-1"}),"Create Fire Memorial"]})]})]})})}),e.jsx($,{className:"hover-elevate overflow-hidden group","data-testid":"card-category-medical",children:e.jsx(V,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col items-center text-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center group-hover:scale-110 transition-transform",children:e.jsx(y_,{className:"w-8 h-8 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg mb-1",children:"Medical Workers"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Heal & Care"})]}),e.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[e.jsx(O,{size:"sm",variant:t==="medical"?"default":"outline",onClick:()=>s("medical"),"data-testid":"button-view-medical",className:"w-full",children:"View Memorials"}),e.jsxs(O,{size:"sm",onClick:()=>window.location.href="/create-essential-worker?category=medical","data-testid":"button-create-medical",className:"w-full bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(bs,{className:"w-4 h-4 mr-1"}),"Create Medical Memorial"]})]})]})})}),e.jsx($,{className:"hover-elevate overflow-hidden group","data-testid":"card-category-military",children:e.jsx(V,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col items-center text-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-purple-100 dark:bg-purple-900/30 rounded-full flex items-center justify-center group-hover:scale-110 transition-transform",children:e.jsx(va,{className:"w-8 h-8 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg mb-1",children:"Military"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Duty & Sacrifice"})]}),e.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[e.jsx(O,{size:"sm",variant:t==="military"?"default":"outline",onClick:()=>s("military"),"data-testid":"button-view-military",className:"w-full",children:"View Memorials"}),e.jsxs(O,{size:"sm",onClick:()=>window.location.href="/create-essential-worker?category=military","data-testid":"button-create-military",className:"w-full bg-purple-600 hover:bg-purple-700 text-white",children:[e.jsx(bs,{className:"w-4 h-4 mr-1"}),"Create Military Memorial"]})]})]})})})]}),t&&e.jsxs("div",{className:"flex items-center justify-between mb-6 bg-muted/50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-primary/20 rounded-full flex items-center justify-center",children:a(t)}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold",children:["Showing ",t.charAt(0).toUpperCase()+t.slice(1)," Memorials"]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[(r==null?void 0:r.length)||0," memorial",(r==null?void 0:r.length)!==1?"s":""," found"]})]})]}),e.jsx(O,{variant:"outline",size:"sm",onClick:()=>s(""),"data-testid":"button-clear-filter",children:"Show All Heroes"})]}),n?e.jsxs("div",{className:"space-y-8","data-testid":"loading-skeletons",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 text-muted-foreground",children:[e.jsx(tn,{className:"w-5 h-5 animate-spin"}),e.jsx("p",{children:"Loading essential worker memorials..."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[1,2,3,4,5,6].map(i=>e.jsxs($,{className:"overflow-hidden",children:[e.jsx(tt,{className:"h-48 w-full"}),e.jsxs(le,{children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[e.jsx(tt,{className:"h-6 w-2/3"}),e.jsx(tt,{className:"h-10 w-10 rounded-lg"})]}),e.jsx(tt,{className:"h-4 w-1/2"})]}),e.jsxs(V,{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(tt,{className:"h-5 w-20 rounded-full"}),e.jsx(tt,{className:"h-5 w-24 rounded-full"}),e.jsx(tt,{className:"h-5 w-16 rounded-full"})]}),e.jsx(tt,{className:"h-4 w-full"}),e.jsx(tt,{className:"h-4 w-3/4"}),e.jsx(tt,{className:"h-9 w-full rounded"})]})]},i))})]}):r&&r.length>0?e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"lg:col-span-3 grid grid-cols-1 md:grid-cols-2 gap-6",children:r.map(i=>{const o=Vie(i.fontFamily??void 0),l=Hie(i.symbol??void 0);return e.jsxs($,{className:"overflow-hidden hover-elevate","data-testid":`card-memorial-${i.id}`,children:[i.imageUrl&&e.jsx("div",{className:"h-48 overflow-hidden bg-muted",children:e.jsx("img",{src:i.imageUrl,alt:i.fullName,className:"w-full h-full object-cover"})}),e.jsxs(le,{children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[e.jsxs(ge,{className:"text-xl",style:o?{fontFamily:o}:void 0,children:[l&&e.jsx(l,{className:"inline-block w-5 h-5 mr-2 text-primary"}),i.fullName]}),e.jsx("div",{className:`p-2 rounded-lg ${Yie[i.category]}`,children:a(i.category)})]}),e.jsxs($e,{children:[i.profession,i.department&&`  ${i.department}`]})]}),e.jsxs(V,{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.rank&&e.jsx(ze,{variant:"secondary",className:"text-xs",children:i.rank}),i.badgeNumber&&e.jsxs(ze,{variant:"outline",className:"text-xs",children:["Badge #",i.badgeNumber]}),i.serviceBranch&&e.jsx(ze,{variant:"secondary",className:"text-xs",children:i.serviceBranch}),i.unit&&e.jsx(ze,{variant:"outline",className:"text-xs",children:i.unit}),i.specialization&&e.jsx(ze,{variant:"secondary",className:"text-xs",children:i.specialization}),i.precinct&&e.jsxs(ze,{variant:"outline",className:"text-xs",children:["Precinct ",i.precinct]}),i.station&&e.jsxs(ze,{variant:"outline",className:"text-xs",children:["Station ",i.station]})]}),i.yearsOfService&&e.jsx("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:e.jsxs(ze,{variant:"secondary",children:[i.yearsOfService," Years of Service"]})}),i.lineOfDutyDeath&&e.jsx("div",{className:"flex items-center gap-2 text-sm",children:e.jsx(ze,{className:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",children:"Line of Duty"})}),i.deployments&&i.deployments.length>0&&e.jsxs("div",{className:"pt-2 border-t",children:[e.jsx("p",{className:"text-xs font-semibold mb-1",children:"Deployments:"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[i.deployments.slice(0,2).map((c,d)=>e.jsxs(ze,{variant:"outline",className:"text-xs",children:[c.location," (",c.years,")"]},d)),i.deployments.length>2&&e.jsxs(ze,{variant:"outline",className:"text-xs",children:["+",i.deployments.length-2," more"]})]})]}),i.certifications&&i.certifications.length>0&&e.jsxs("div",{className:"pt-2 border-t",children:[e.jsx("p",{className:"text-xs font-semibold mb-1",children:"Certifications:"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[i.certifications.slice(0,2).map((c,d)=>e.jsx(ze,{variant:"outline",className:"text-xs",children:c},d)),i.certifications.length>2&&e.jsxs(ze,{variant:"outline",className:"text-xs",children:["+",i.certifications.length-2," more"]})]})]}),i.biography&&e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-3",style:o?{fontFamily:o}:void 0,children:i.biography}),i.honors&&i.honors.length>0&&e.jsxs("div",{className:"pt-2 border-t",children:[e.jsx("p",{className:"text-xs font-semibold mb-1",children:"Honors & Awards:"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[i.honors.slice(0,2).map((c,d)=>e.jsx(ze,{variant:"outline",className:"text-xs",children:c.award},d)),i.honors.length>2&&e.jsxs(ze,{variant:"outline",className:"text-xs",children:["+",i.honors.length-2," more"]})]})]}),i.birthDate&&i.deathDate&&e.jsxs("p",{className:"text-xs text-muted-foreground pt-2 border-t",children:[i.birthDate," - ",i.deathDate]})]})]},i.id)})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsx("div",{className:"sticky top-4",children:e.jsx(Wie,{category:"memorials",maxAds:3})})})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 bg-muted rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(_t,{className:"w-8 h-8 text-muted-foreground"})}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No memorials found"}),e.jsx("p",{className:"text-muted-foreground",children:t?`No memorials in the ${t} category yet.`:"No essential worker memorials have been created yet."})]})]})}const Qie=Dr({fullName:we().min(2,"Full name is required"),profession:we().min(2,"Profession is required"),category:Xn(["police","fire","medical","military","other"]),department:we().optional(),yearsOfService:Ll().int().min(0).optional().or(wr("")),biography:we().min(10,"Please write at least a brief biography"),imageUrl:we().url("Please enter a valid image URL").optional().or(wr("")),lineOfDutyDeath:xn().default(!1),birthDate:we().optional(),deathDate:we().optional(),rank:we().optional(),badgeNumber:we().optional(),unit:we().optional(),serviceBranch:we().optional(),specialization:we().optional(),precinct:we().optional(),station:we().optional()});function Zie(){const{toast:t}=Ht(),[,s]=ja(),[r,n]=N.useState(1),[a,i]=N.useState([]),[o,l]=N.useState(""),[c,d]=N.useState([]),[u,m]=N.useState([]),h=new URLSearchParams(window.location.search).get("category"),p=Or({resolver:$r(Qie),defaultValues:{fullName:"",profession:"",category:h||"police",department:"",yearsOfService:"",biography:"",imageUrl:"",lineOfDutyDeath:!1,birthDate:"",deathDate:"",rank:"",badgeNumber:"",unit:"",serviceBranch:"",specialization:"",precinct:"",station:""}}),g=p.watch("category"),y=yt({mutationFn:async E=>{const L={...E,yearsOfService:E.yearsOfService===""?void 0:Number(E.yearsOfService),certifications:a.length>0?a:void 0,honors:c.length>0?c:void 0,deployments:u.length>0?u:void 0};return await pt("POST","/api/essential-workers",L)},onSuccess:()=>{t({title:"Memorial created successfully",description:"The essential worker memorial has been published."}),xt.invalidateQueries({queryKey:["/api/essential-workers"]}),s("/essential-workers")},onError:E=>{t({title:"Failed to create memorial",description:E.message,variant:"destructive"})}}),v=E=>{y.mutate(E)},j=()=>{o.trim()&&(i([...a,o.trim()]),l(""))},w=E=>{i(a.filter((L,T)=>T!==E))},_=()=>{switch(g){case"police":return e.jsx(va,{className:"w-6 h-6 text-blue-600"});case"fire":return e.jsx(Nr,{className:"w-6 h-6 text-red-600"});case"medical":return e.jsx(y_,{className:"w-6 h-6 text-green-600"});case"military":return e.jsx(va,{className:"w-6 h-6 text-purple-600"});default:return e.jsx(_t,{className:"w-6 h-6 text-primary"})}},P=()=>{switch(g){case"police":return"bg-blue-100 dark:bg-blue-900/30 border-blue-300";case"fire":return"bg-red-100 dark:bg-red-900/30 border-red-300";case"medical":return"bg-green-100 dark:bg-green-900/30 border-green-300";case"military":return"bg-purple-100 dark:bg-purple-900/30 border-purple-300";default:return"bg-muted border-border"}};return e.jsxs("div",{className:"container max-w-4xl mx-auto px-4 py-12",children:[e.jsxs(O,{variant:"ghost",onClick:()=>s("/essential-workers"),className:"mb-6","data-testid":"button-back",children:[e.jsx(Sr,{className:"w-4 h-4 mr-2"}),"Back to Essential Workers"]}),e.jsxs($,{children:[e.jsx(le,{children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${P()}`,children:_()}),e.jsxs("div",{children:[e.jsx(ge,{className:"text-3xl",children:"Create Essential Worker Memorial"}),e.jsx($e,{children:"Honor a hero who served their community"})]})]})}),e.jsx(V,{children:e.jsx(Wr,{...p,children:e.jsxs("form",{onSubmit:p.handleSubmit(v),className:"space-y-8",children:[r===1&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-primary/5 p-4 rounded-lg border border-primary/20",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Step 1: Basic Information"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Tell us about the essential worker you're honoring"})]}),e.jsx(fe,{control:p.control,name:"category",render:({field:E})=>e.jsxs(me,{children:[e.jsx(he,{children:"Service Category *"}),e.jsxs(Rt,{onValueChange:E.onChange,defaultValue:E.value,children:[e.jsx(xe,{children:e.jsx(Mt,{"data-testid":"select-category",children:e.jsx(Ft,{placeholder:"Select a category"})})}),e.jsxs(Lt,{children:[e.jsx(te,{value:"police",children:"Police Officer"}),e.jsx(te,{value:"fire",children:"Firefighter"}),e.jsx(te,{value:"medical",children:"Medical Worker"}),e.jsx(te,{value:"military",children:"Military"}),e.jsx(te,{value:"other",children:"Other Essential Worker"})]})]}),e.jsx(ye,{})]})}),e.jsx(fe,{control:p.control,name:"fullName",render:({field:E})=>e.jsxs(me,{children:[e.jsx(he,{children:"Full Name *"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"John Doe",...E,"data-testid":"input-fullname"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:p.control,name:"profession",render:({field:E})=>e.jsxs(me,{children:[e.jsx(he,{children:"Profession/Title *"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"e.g., Police Officer, Firefighter, ER Nurse, Army Sergeant",...E,"data-testid":"input-profession"})}),e.jsx(ye,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(fe,{control:p.control,name:"birthDate",render:({field:E})=>e.jsxs(me,{children:[e.jsx(he,{children:"Birth Date"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"MM/DD/YYYY",...E,"data-testid":"input-birthdate"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:p.control,name:"deathDate",render:({field:E})=>e.jsxs(me,{children:[e.jsx(he,{children:"Death Date"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"MM/DD/YYYY",...E,"data-testid":"input-deathdate"})}),e.jsx(ye,{})]})})]}),e.jsx(fe,{control:p.control,name:"biography",render:({field:E})=>e.jsxs(me,{children:[e.jsx(he,{children:"Biography *"}),e.jsx(xe,{children:e.jsx(Gt,{placeholder:"Tell their story, their service, and their impact on the community...",className:"min-h-[150px]",...E,"data-testid":"input-biography"})}),e.jsx(Qt,{children:"Share their dedication, sacrifices, and the lives they touched"}),e.jsx(ye,{})]})}),e.jsx(fe,{control:p.control,name:"imageUrl",render:({field:E})=>e.jsxs(me,{children:[e.jsx(he,{children:"Photo URL"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"https://example.com/photo.jpg",...E,"data-testid":"input-imageurl"})}),e.jsx(Qt,{children:"Enter a URL to a photo (in uniform preferred)"}),e.jsx(ye,{})]})}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx(O,{type:"button",onClick:()=>n(2),"data-testid":"button-next-step1",children:"Next: Professional Details"})})]}),r===2&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-primary/5 p-4 rounded-lg border border-primary/20",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Step 2: Professional Details"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Add specific details about their service"})]}),g==="police"&&e.jsxs(e.Fragment,{children:[e.jsx(fe,{control:p.control,name:"rank",render:({field:E})=>e.jsxs(me,{children:[e.jsx(he,{children:"Rank"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"e.g., Officer, Sergeant, Lieutenant, Captain",...E,"data-testid":"input-rank"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:p.control,name:"badgeNumber",render:({field:E})=>e.jsxs(me,{children:[e.jsx(he,{children:"Badge Number"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"12345",...E,"data-testid":"input-badge"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:p.control,name:"precinct",render:({field:E})=>e.jsxs(me,{children:[e.jsx(he,{children:"Precinct/District"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"e.g., 5th Precinct",...E,"data-testid":"input-precinct"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:p.control,name:"department",render:({field:E})=>e.jsxs(me,{children:[e.jsx(he,{children:"Department"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"e.g., NYPD, LAPD",...E,"data-testid":"input-department"})}),e.jsx(ye,{})]})})]}),g==="fire"&&e.jsxs(e.Fragment,{children:[e.jsx(fe,{control:p.control,name:"rank",render:({field:E})=>e.jsxs(me,{children:[e.jsx(he,{children:"Rank"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"e.g., Firefighter, Lieutenant, Captain, Chief",...E,"data-testid":"input-rank"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:p.control,name:"badgeNumber",render:({field:E})=>e.jsxs(me,{children:[e.jsx(he,{children:"Badge Number"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"12345",...E,"data-testid":"input-badge"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:p.control,name:"station",render:({field:E})=>e.jsxs(me,{children:[e.jsx(he,{children:"Fire Station"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"e.g., Station 5, Engine Company 1",...E,"data-testid":"input-station"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:p.control,name:"department",render:({field:E})=>e.jsxs(me,{children:[e.jsx(he,{children:"Fire Department"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"e.g., FDNY, LA Fire Department",...E,"data-testid":"input-department"})}),e.jsx(ye,{})]})})]}),g==="medical"&&e.jsxs(e.Fragment,{children:[e.jsx(fe,{control:p.control,name:"specialization",render:({field:E})=>e.jsxs(me,{children:[e.jsx(he,{children:"Specialization"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"e.g., Emergency Medicine, ICU Nurse, Paramedic",...E,"data-testid":"input-specialization"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:p.control,name:"unit",render:({field:E})=>e.jsxs(me,{children:[e.jsx(he,{children:"Hospital/Unit"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"e.g., St. Mary's Hospital - ER",...E,"data-testid":"input-unit"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:p.control,name:"department",render:({field:E})=>e.jsxs(me,{children:[e.jsx(he,{children:"Medical Facility/Organization"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"e.g., Johns Hopkins Hospital",...E,"data-testid":"input-department"})}),e.jsx(ye,{})]})})]}),g==="military"&&e.jsxs(e.Fragment,{children:[e.jsx(fe,{control:p.control,name:"rank",render:({field:E})=>e.jsxs(me,{children:[e.jsx(he,{children:"Rank"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"e.g., Private, Sergeant, Lieutenant Colonel, General",...E,"data-testid":"input-rank"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:p.control,name:"serviceBranch",render:({field:E})=>e.jsxs(me,{children:[e.jsx(he,{children:"Service Branch"}),e.jsxs(Rt,{onValueChange:E.onChange,value:E.value,children:[e.jsx(xe,{children:e.jsx(Mt,{"data-testid":"select-branch",children:e.jsx(Ft,{placeholder:"Select branch"})})}),e.jsxs(Lt,{children:[e.jsx(te,{value:"Army",children:"U.S. Army"}),e.jsx(te,{value:"Navy",children:"U.S. Navy"}),e.jsx(te,{value:"Air Force",children:"U.S. Air Force"}),e.jsx(te,{value:"Marines",children:"U.S. Marine Corps"}),e.jsx(te,{value:"Coast Guard",children:"U.S. Coast Guard"}),e.jsx(te,{value:"Space Force",children:"U.S. Space Force"})]})]}),e.jsx(ye,{})]})}),e.jsx(fe,{control:p.control,name:"unit",render:({field:E})=>e.jsxs(me,{children:[e.jsx(he,{children:"Military Unit"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"e.g., 101st Airborne Division",...E,"data-testid":"input-unit"})}),e.jsx(ye,{})]})})]}),e.jsx(fe,{control:p.control,name:"yearsOfService",render:({field:E})=>e.jsxs(me,{children:[e.jsx(he,{children:"Years of Service"}),e.jsx(xe,{children:e.jsx(re,{type:"number",placeholder:"20",...E,onChange:L=>E.onChange(L.target.value===""?"":Number(L.target.value)),"data-testid":"input-years"})}),e.jsx(ye,{})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(he,{children:"Professional Certifications"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(re,{value:o,onChange:E=>l(E.target.value),placeholder:"e.g., EMT-P, CPR Instructor",onKeyPress:E=>E.key==="Enter"&&(E.preventDefault(),j()),"data-testid":"input-new-certification"}),e.jsx(O,{type:"button",onClick:j,size:"icon","data-testid":"button-add-certification",children:e.jsx(bs,{className:"w-4 h-4"})})]}),a.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:a.map((E,L)=>e.jsxs(ze,{variant:"secondary",children:[E,e.jsx("button",{type:"button",onClick:()=>w(L),className:"ml-2","data-testid":`button-remove-cert-${L}`,children:e.jsx(Vo,{className:"w-3 h-3"})})]},L))})]}),e.jsx(fe,{control:p.control,name:"lineOfDutyDeath",render:({field:E})=>e.jsxs(me,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(xe,{children:e.jsx(Rg,{checked:E.value,onCheckedChange:E.onChange,"data-testid":"checkbox-line-of-duty"})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(he,{children:"Line of Duty Death"}),e.jsx(Qt,{children:"This person died while serving their community"})]})]})}),e.jsxs("div",{className:"flex justify-between pt-4",children:[e.jsx(O,{type:"button",variant:"outline",onClick:()=>n(1),"data-testid":"button-back-step2",children:"Back"}),e.jsxs(O,{type:"submit",disabled:y.isPending,"data-testid":"button-submit",children:[y.isPending?"Creating Memorial...":"Create Memorial",e.jsx(_t,{className:"w-4 h-4 ml-2"})]})]})]})]})})})]})]})}function Xie(){const[t,s]=N.useState("all"),[r,n]=N.useState(""),{data:a,isLoading:i}=Xe({queryKey:["/api/hood-memorials",t,r],queryFn:async()=>{const l=new URLSearchParams;t&&t!=="all"&&l.append("state",t),r&&l.append("city",r);const c=l.toString()?`/api/hood-memorials?${l.toString()}`:"/api/hood-memorials",d=await fetch(c);if(!d.ok)throw new Error("Failed to fetch");return d.json()}}),o=(a==null?void 0:a.memorials)||[];return e.jsxs("div",{className:"container max-w-7xl mx-auto px-4 py-12",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center",children:e.jsx(lf,{className:"w-6 h-6 text-primary"})}),e.jsx("h1",{className:"text-4xl font-serif font-bold",children:"Hood Memorials"})]}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto mb-6",children:"Honoring neighborhood legends, community leaders, and those who made their mark on the streets they called home."}),e.jsx(He,{href:"/create-hood-memorial",children:e.jsxs(O,{size:"lg","data-testid":"button-create-hood-memorial",className:"bg-[hsl(45,80%,60%)] hover:bg-[hsl(45,80%,55%)] text-foreground border-none shadow-lg font-medium",children:[e.jsx(bs,{className:"w-5 h-5 mr-2"}),"Create Hood Memorial"]})})]}),e.jsxs("div",{className:"max-w-2xl mx-auto mb-8 flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs(Rt,{value:t,onValueChange:l=>{s(l==="all"?"":l),(l==="all"||!l)&&n("")},children:[e.jsx(Mt,{"data-testid":"select-state-filter",children:e.jsx(Ft,{placeholder:"Filter by State (All States)"})}),e.jsxs(Lt,{children:[e.jsx(te,{value:"all",children:"All States"}),e.jsx(te,{value:"AL",children:"Alabama"}),e.jsx(te,{value:"AK",children:"Alaska"}),e.jsx(te,{value:"AZ",children:"Arizona"}),e.jsx(te,{value:"AR",children:"Arkansas"}),e.jsx(te,{value:"CA",children:"California"}),e.jsx(te,{value:"CO",children:"Colorado"}),e.jsx(te,{value:"CT",children:"Connecticut"}),e.jsx(te,{value:"FL",children:"Florida"}),e.jsx(te,{value:"GA",children:"Georgia"}),e.jsx(te,{value:"IL",children:"Illinois"}),e.jsx(te,{value:"IN",children:"Indiana"}),e.jsx(te,{value:"LA",children:"Louisiana"}),e.jsx(te,{value:"MD",children:"Maryland"}),e.jsx(te,{value:"MA",children:"Massachusetts"}),e.jsx(te,{value:"MI",children:"Michigan"}),e.jsx(te,{value:"MN",children:"Minnesota"}),e.jsx(te,{value:"MS",children:"Mississippi"}),e.jsx(te,{value:"MO",children:"Missouri"}),e.jsx(te,{value:"NV",children:"Nevada"}),e.jsx(te,{value:"NJ",children:"New Jersey"}),e.jsx(te,{value:"NM",children:"New Mexico"}),e.jsx(te,{value:"NY",children:"New York"}),e.jsx(te,{value:"NC",children:"North Carolina"}),e.jsx(te,{value:"OH",children:"Ohio"}),e.jsx(te,{value:"OK",children:"Oklahoma"}),e.jsx(te,{value:"OR",children:"Oregon"}),e.jsx(te,{value:"PA",children:"Pennsylvania"}),e.jsx(te,{value:"SC",children:"South Carolina"}),e.jsx(te,{value:"TN",children:"Tennessee"}),e.jsx(te,{value:"TX",children:"Texas"}),e.jsx(te,{value:"VA",children:"Virginia"}),e.jsx(te,{value:"WA",children:"Washington"}),e.jsx(te,{value:"WI",children:"Wisconsin"})]})]})}),e.jsx("div",{className:"flex-1",children:e.jsx(re,{placeholder:"Filter by City (e.g., Chicago)",value:r,onChange:l=>n(l.target.value),"data-testid":"input-city-filter",className:"h-10"})})]}),i?e.jsxs("div",{className:"space-y-8","data-testid":"loading-skeletons",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 text-muted-foreground",children:[e.jsx(tn,{className:"w-5 h-5 animate-spin"}),e.jsx("p",{children:"Loading hood memorials..."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(l=>e.jsxs($,{className:"overflow-hidden",children:[e.jsxs(le,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 mb-3",children:[e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(tt,{className:"h-6 w-3/4"}),e.jsx(tt,{className:"h-4 w-1/2"})]}),e.jsx(tt,{className:"w-20 h-20 rounded-lg"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(tt,{className:"h-4 w-full"}),e.jsx(tt,{className:"h-5 w-24 rounded-full"})]})]}),e.jsxs(V,{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx(tt,{className:"w-12 h-12 rounded"}),e.jsx(tt,{className:"w-12 h-12 rounded"})]}),e.jsx(tt,{className:"h-4 w-full"}),e.jsx(tt,{className:"h-4 w-3/4"}),e.jsx(tt,{className:"h-3 w-1/2"}),e.jsx(tt,{className:"h-9 w-full rounded"})]})]},l))})]}):o.length===0?e.jsx($,{className:"text-center py-12",children:e.jsxs(V,{className:"pt-6",children:[e.jsx(lf,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No Hood Memorials Found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:t?"No memorials in this state yet.":"Be the first to create a hood memorial."}),e.jsx(He,{href:"/create-hood-memorial",children:e.jsxs(O,{"data-testid":"button-create-first-memorial",children:[e.jsx(bs,{className:"w-4 h-4 mr-2"}),"Create First Hood Memorial"]})})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(l=>e.jsxs($,{className:"hover-elevate overflow-hidden","data-testid":`card-hood-memorial-${l.id}`,children:[e.jsxs(le,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(ge,{className:"text-xl mb-1",children:l.name}),l.nickname&&e.jsxs("p",{className:"text-sm text-muted-foreground italic",children:['"',l.nickname,'"']})]}),l.imageUrl&&e.jsx("img",{src:l.imageUrl,alt:l.name,className:"w-20 h-20 rounded-lg object-cover border-2 border-border"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(tr,{className:"w-4 h-4"}),e.jsxs("span",{children:[l.neighborhoodName,", ",l.city,", ",l.state]})]}),l.legendStatus&&e.jsx(ze,{variant:"secondary",className:"bg-[hsl(45,80%,60%)] text-foreground",children:l.legendStatus})]})]}),e.jsxs(V,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[l.neighborhoodLogoUrl&&e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:l.neighborhoodLogoUrl,alt:`${l.neighborhoodName} logo`,className:"w-12 h-12 rounded object-contain"})}),l.clubLogoUrl&&e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:l.clubLogoUrl,alt:`${l.clubName} logo`,className:"w-12 h-12 rounded object-contain"})})]}),l.role&&e.jsx("p",{className:"text-sm font-medium",children:l.role}),l.epitaph&&e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:l.epitaph}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[l.birthDate," - ",l.deathDate]}),e.jsxs(O,{className:"w-full",variant:"outline",size:"sm","data-testid":`button-view-memorial-${l.id}`,children:[e.jsx(_t,{className:"w-4 h-4 mr-2"}),"View Memorial"]})]})]},l.id))}),e.jsx("div",{className:"max-w-4xl mx-auto mt-20",children:e.jsx($,{className:"bg-gradient-to-br from-accent/10 to-accent/5 border-accent/20",children:e.jsx(V,{className:"p-8",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-14 h-14 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0",children:e.jsx(or,{className:"w-7 h-7 text-primary"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-serif font-semibold text-foreground",children:"Memorial QR Codes"}),e.jsx("p",{className:"text-muted-foreground",children:"Connect physical tributes to digital memories"})]})]}),e.jsxs("div",{className:"space-y-4 text-muted-foreground",children:[e.jsx("p",{className:"text-base",children:"Create QR codes that link to hood memorials, making it easy for the community to pay respects and share memories."}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-primary mt-2 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-foreground font-medium",children:"For Murals & Street Art"}),e.jsx("p",{className:"text-sm",children:"Place QR codes on memorial murals so visitors can access the full story and contribute memories."})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-primary mt-2 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-foreground font-medium",children:"For Memorial Cards"}),e.jsx("p",{className:"text-sm",children:"Add to funeral programs or memorial cards for easy access and photo sharing."})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-primary mt-2 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-foreground font-medium",children:"For Community Events"}),e.jsx("p",{className:"text-sm",children:"Display at candlelight vigils and memorial gatherings for instant photo uploads."})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-primary mt-2 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-foreground font-medium",children:"For Neighborhood Markers"}),e.jsx("p",{className:"text-sm",children:"Place on benches, trees, or community spots dedicated to local legends."})]})]})]})]}),e.jsx("div",{className:"pt-4",children:e.jsx(He,{href:"/about",children:e.jsxs(O,{variant:"default",className:"bg-primary/90 hover:bg-primary","data-testid":"button-learn-more-qr",children:[e.jsx(or,{className:"w-4 h-4 mr-2"}),"Learn More About QR Codes"]})})})]})})})}),a&&a.count>0&&e.jsxs("div",{className:"text-center mt-12 text-sm text-muted-foreground",children:["Honoring ",a.count," neighborhood ",a.count===1?"legend":"legends"]})]})}const nt=Symbol.for("drizzle:entityKind");function bn(t,s){if(!t||typeof t!="object")return!1;if(t instanceof s)return!0;if(!Object.prototype.hasOwnProperty.call(s,nt))throw new Error(`Class "${s.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let r=Object.getPrototypeOf(t).constructor;if(r)for(;r;){if(nt in r&&r[nt]===s[nt])return!0;r=Object.getPrototypeOf(r)}return!1}var FP;FP=nt;class gf{constructor(s,r){_e(this,"name");_e(this,"keyAsName");_e(this,"primary");_e(this,"notNull");_e(this,"default");_e(this,"defaultFn");_e(this,"onUpdateFn");_e(this,"hasDefault");_e(this,"isUnique");_e(this,"uniqueName");_e(this,"uniqueType");_e(this,"dataType");_e(this,"columnType");_e(this,"enumValues");_e(this,"generated");_e(this,"generatedIdentity");_e(this,"config");this.table=s,this.config=r,this.name=r.name,this.keyAsName=r.keyAsName,this.notNull=r.notNull,this.default=r.default,this.defaultFn=r.defaultFn,this.onUpdateFn=r.onUpdateFn,this.hasDefault=r.hasDefault,this.primary=r.primaryKey,this.isUnique=r.isUnique,this.uniqueName=r.uniqueName,this.uniqueType=r.uniqueType,this.dataType=r.dataType,this.columnType=r.columnType,this.generated=r.generated,this.generatedIdentity=r.generatedIdentity}mapFromDriverValue(s){return s}mapToDriverValue(s){return s}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}}_e(gf,FP,"Column");var OP;OP=nt;class h${constructor(s,r,n){_e(this,"config");_e(this,"$default",this.$defaultFn);_e(this,"$onUpdate",this.$onUpdateFn);this.config={name:s,keyAsName:s==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:r,columnType:n,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(s){return this.config.default=s,this.config.hasDefault=!0,this}$defaultFn(s){return this.config.defaultFn=s,this.config.hasDefault=!0,this}$onUpdateFn(s){return this.config.onUpdateFn=s,this.config.hasDefault=!0,this}primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(s){this.config.name===""&&(this.config.name=s)}}_e(h$,OP,"ColumnBuilder");const Eh=Symbol.for("drizzle:Name");var $P;$P=nt;class f${constructor(s,r){_e(this,"reference");_e(this,"_onUpdate","no action");_e(this,"_onDelete","no action");this.reference=()=>{const{name:n,columns:a,foreignColumns:i}=s();return{name:n,columns:a,foreignTable:i[0].table,foreignColumns:i}},r&&(this._onUpdate=r.onUpdate,this._onDelete=r.onDelete)}onUpdate(s){return this._onUpdate=s===void 0?"no action":s,this}onDelete(s){return this._onDelete=s===void 0?"no action":s,this}build(s){return new p$(s,this)}}_e(f$,$P,"PgForeignKeyBuilder");var BP;BP=nt;class p${constructor(s,r){_e(this,"reference");_e(this,"onUpdate");_e(this,"onDelete");this.table=s,this.reference=r.reference,this.onUpdate=r._onUpdate,this.onDelete=r._onDelete}getName(){const{name:s,columns:r,foreignColumns:n}=this.reference(),a=r.map(l=>l.name),i=n.map(l=>l.name),o=[this.table[Eh],...a,n[0].table[Eh],...i];return s??`${o.join("_")}_fk`}}_e(p$,BP,"PgForeignKey");function Jie(t,...s){return t(...s)}function eoe(t,s){return`${t[Eh]}_${s.join("_")}_unique`}function _6(t,s,r){for(let n=s;n<t.length;n++){const a=t[n];if(a==="\\"){n++;continue}if(a==='"')return[t.slice(s,n).replace(/\\/g,""),n+1];if(!r&&(a===","||a==="}"))return[t.slice(s,n).replace(/\\/g,""),n]}return[t.slice(s).replace(/\\/g,""),t.length]}function x$(t,s=0){const r=[];let n=s,a=!1;for(;n<t.length;){const i=t[n];if(i===","){(a||n===s)&&r.push(""),a=!0,n++;continue}if(a=!1,i==="\\"){n+=2;continue}if(i==='"'){const[c,d]=_6(t,n+1,!0);r.push(c),n=d;continue}if(i==="}")return[r,n+1];if(i==="{"){const[c,d]=x$(t,n+1);r.push(c),n=d;continue}const[o,l]=_6(t,n,!1);r.push(o),n=l}return[r,n]}function toe(t){const[s]=x$(t,1);return s}function g$(t){return`{${t.map(s=>Array.isArray(s)?g$(s):typeof s=="string"?`"${s.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${s}`).join(",")}}`}var UP,zP;class Qs extends(zP=h$,UP=nt,zP){constructor(){super(...arguments);_e(this,"foreignKeyConfigs",[])}array(r){return new y$(this.config.name,this,r)}references(r,n={}){return this.foreignKeyConfigs.push({ref:r,actions:n}),this}unique(r,n){return this.config.isUnique=!0,this.config.uniqueName=r,this.config.uniqueType=n==null?void 0:n.nulls,this}generatedAlwaysAs(r){return this.config.generated={as:r,type:"always",mode:"stored"},this}buildForeignKeys(r,n){return this.foreignKeyConfigs.map(({ref:a,actions:i})=>Jie((o,l)=>{const c=new f$(()=>{const d=o();return{columns:[r],foreignColumns:[d]}});return l.onUpdate&&c.onUpdate(l.onUpdate),l.onDelete&&c.onDelete(l.onDelete),c.build(n)},a,i))}buildExtraConfigColumn(r){return new v$(r,this.config)}}_e(Qs,UP,"PgColumnBuilder");var qP,VP;class Ss extends(VP=gf,qP=nt,VP){constructor(s,r){r.uniqueName||(r.uniqueName=eoe(s,[r.name])),super(s,r),this.table=s}}_e(Ss,qP,"PgColumn");var HP,WP;class v$ extends(WP=Ss,HP=nt,WP){constructor(){super(...arguments);_e(this,"indexConfig",{order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass});_e(this,"defaultConfig",{order:"asc",nulls:"last",opClass:void 0})}getSQLType(){return this.getSQLType()}asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(r){return this.indexConfig.opClass=r,this}}_e(v$,HP,"ExtraConfigColumn");var KP;KP=nt;class Ky{constructor(s,r,n,a){_e(this,"name");_e(this,"keyAsName");_e(this,"type");_e(this,"indexConfig");this.name=s,this.keyAsName=r,this.type=n,this.indexConfig=a}}_e(Ky,KP,"IndexedColumn");var YP,GP;class y$ extends(GP=Qs,YP=nt,GP){constructor(s,r,n){super(s,"array","PgArray"),this.config.baseBuilder=r,this.config.size=n}build(s){const r=this.config.baseBuilder.build(s);return new $w(s,this.config,r)}}_e(y$,YP,"PgArrayBuilder");var QP,ZP;const N1=class N1 extends(ZP=Ss,QP=nt,ZP){constructor(r,n,a,i){super(r,n);_e(this,"size");this.baseColumn=a,this.range=i,this.size=n.size}getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(r){return typeof r=="string"&&(r=toe(r)),r.map(n=>this.baseColumn.mapFromDriverValue(n))}mapToDriverValue(r,n=!1){const a=r.map(i=>i===null?null:bn(this.baseColumn,N1)?this.baseColumn.mapToDriverValue(i,!0):this.baseColumn.mapToDriverValue(i));return n?a:g$(a)}};_e(N1,QP,"PgArray");let $w=N1;const S6=Symbol.for("drizzle:isPgEnum");function soe(t){return!!t&&typeof t=="function"&&S6 in t&&t[S6]===!0}var XP;XP=nt;class R4{constructor(s,r,n,a=!1){this._={brand:"Subquery",sql:s,selectedFields:r,alias:n,isWith:a}}}_e(R4,XP,"Subquery");const roe={startActiveSpan(t,s){return s()}},Th=Symbol.for("drizzle:ViewBaseConfig"),p2=Symbol.for("drizzle:Schema"),C6=Symbol.for("drizzle:Columns"),k6=Symbol.for("drizzle:ExtraConfigColumns"),x2=Symbol.for("drizzle:OriginalName"),g2=Symbol.for("drizzle:BaseName"),c1=Symbol.for("drizzle:IsAlias"),A6=Symbol.for("drizzle:ExtraConfigBuilder"),j$=Symbol.for("drizzle:IsDrizzleTable");var JP,eE,tE,sE,rE,nE,aE,iE,oE,lE,by;let bi=(lE=nt,oE=Eh,iE=x2,aE=p2,nE=C6,rE=k6,sE=g2,tE=c1,eE=j$,JP=A6,by=class{constructor(s,r,n){_e(this,oE);_e(this,iE);_e(this,aE);_e(this,nE);_e(this,rE);_e(this,sE);_e(this,tE,!1);_e(this,eE,!0);_e(this,JP);this[Eh]=this[x2]=s,this[p2]=r,this[g2]=n}},_e(by,lE,"Table"),_e(by,"Symbol",{Name:Eh,Schema:p2,OriginalName:x2,Columns:C6,ExtraConfigColumns:k6,BaseName:g2,IsAlias:c1,ExtraConfigBuilder:A6}),by);function b$(t){return typeof t=="object"&&t!==null&&j$ in t}function noe(t){return t!=null&&typeof t.getSQL=="function"}function aoe(t){var r;const s={sql:"",params:[]};for(const n of t)s.sql+=n.sql,s.params.push(...n.params),(r=n.typings)!=null&&r.length&&(s.typings||(s.typings=[]),s.typings.push(...n.typings));return s}var cE;cE=nt;class Zi{constructor(s){_e(this,"value");this.value=Array.isArray(s)?s:[s]}getSQL(){return new en([this])}}_e(Zi,cE,"StringChunk");var dE;dE=nt;const Du=class Du{constructor(s){_e(this,"decoder",N$);_e(this,"shouldInlineParams",!1);this.queryChunks=s}append(s){return this.queryChunks.push(...s.queryChunks),this}toQuery(s){return roe.startActiveSpan("drizzle.buildSQL",r=>{const n=this.buildQueryFromSourceParams(this.queryChunks,s);return r==null||r.setAttributes({"drizzle.query.text":n.sql,"drizzle.query.params":JSON.stringify(n.params)}),n})}buildQueryFromSourceParams(s,r){const n=Object.assign({},r,{inlineParams:r.inlineParams||this.shouldInlineParams,paramStartIndex:r.paramStartIndex||{value:0}}),{casing:a,escapeName:i,escapeParam:o,prepareTyping:l,inlineParams:c,paramStartIndex:d}=n;return aoe(s.map(u=>{var m;if(bn(u,Zi))return{sql:u.value.join(""),params:[]};if(bn(u,d1))return{sql:i(u.value),params:[]};if(u===void 0)return{sql:"",params:[]};if(Array.isArray(u)){const f=[new Zi("(")];for(const[h,p]of u.entries())f.push(p),h<u.length-1&&f.push(new Zi(", "));return f.push(new Zi(")")),this.buildQueryFromSourceParams(f,n)}if(bn(u,Du))return this.buildQueryFromSourceParams(u.queryChunks,{...n,inlineParams:c||u.shouldInlineParams});if(bn(u,bi)){const f=u[bi.Symbol.Schema],h=u[bi.Symbol.Name];return{sql:f===void 0||u[c1]?i(h):i(f)+"."+i(h),params:[]}}if(bn(u,gf)){const f=a.getColumnCasing(u);if(r.invokeSource==="indexes")return{sql:i(f),params:[]};const h=u.table[bi.Symbol.Schema];return{sql:u.table[c1]||h===void 0?i(u.table[bi.Symbol.Name])+"."+i(f):i(h)+"."+i(u.table[bi.Symbol.Name])+"."+i(f),params:[]}}if(bn(u,S$)){const f=u[Th].schema,h=u[Th].name;return{sql:f===void 0||u[Th].isAlias?i(h):i(f)+"."+i(h),params:[]}}if(bn(u,F4)){if(bn(u.value,u1))return{sql:o(d.value++,u),params:[u],typings:["none"]};const f=u.value===null?null:u.encoder.mapToDriverValue(u.value);if(bn(f,Du))return this.buildQueryFromSourceParams([f],n);if(c)return{sql:this.mapInlineParam(f,n),params:[]};let h=["none"];return l&&(h=[l(u.encoder)]),{sql:o(d.value++,f),params:[f],typings:h}}return bn(u,u1)?{sql:o(d.value++,u),params:[u],typings:["none"]}:bn(u,Du.Aliased)&&u.fieldAlias!==void 0?{sql:i(u.fieldAlias),params:[]}:bn(u,R4)?u._.isWith?{sql:i(u._.alias),params:[]}:this.buildQueryFromSourceParams([new Zi("("),u._.sql,new Zi(") "),new d1(u._.alias)],n):soe(u)?u.schema?{sql:i(u.schema)+"."+i(u.enumName),params:[]}:{sql:i(u.enumName),params:[]}:noe(u)?(m=u.shouldOmitSQLParens)!=null&&m.call(u)?this.buildQueryFromSourceParams([u.getSQL()],n):this.buildQueryFromSourceParams([new Zi("("),u.getSQL(),new Zi(")")],n):c?{sql:this.mapInlineParam(u,n),params:[]}:{sql:o(d.value++,u),params:[u],typings:["none"]}}))}mapInlineParam(s,{escapeString:r}){if(s===null)return"null";if(typeof s=="number"||typeof s=="boolean")return s.toString();if(typeof s=="string")return r(s);if(typeof s=="object"){const n=s.toString();return r(n==="[object Object]"?JSON.stringify(s):n)}throw new Error("Unexpected param value: "+s)}getSQL(){return this}as(s){return s===void 0?this:new Du.Aliased(this,s)}mapWith(s){return this.decoder=typeof s=="function"?{mapFromDriverValue:s}:s,this}inlineParams(){return this.shouldInlineParams=!0,this}if(s){return s?this:void 0}};_e(Du,dE,"SQL");let en=Du;var uE;uE=nt;class d1{constructor(s){_e(this,"brand");this.value=s}getSQL(){return new en([this])}}_e(d1,uE,"Name");const N$={mapFromDriverValue:t=>t},w$={mapToDriverValue:t=>t};({...N$,...w$});var mE;mE=nt;class F4{constructor(s,r=w$){_e(this,"brand");this.value=s,this.encoder=r}getSQL(){return new en([this])}}_e(F4,mE,"Param");function Ke(t,...s){const r=[];(s.length>0||t.length>0&&t[0]!=="")&&r.push(new Zi(t[0]));for(const[n,a]of s.entries())r.push(a,new Zi(t[n+1]));return new en(r)}(t=>{function s(){return new en([])}t.empty=s;function r(c){return new en(c)}t.fromList=r;function n(c){return new en([new Zi(c)])}t.raw=n;function a(c,d){const u=[];for(const[m,f]of c.entries())m>0&&d!==void 0&&u.push(d),u.push(f);return new en(u)}t.join=a;function i(c){return new d1(c)}t.identifier=i;function o(c){return new u1(c)}t.placeholder=o;function l(c,d){return new F4(c,d)}t.param=l})(Ke||(Ke={}));(t=>{var r;r=nt;const n=class n{constructor(i,o){_e(this,"isSelectionField",!1);this.sql=i,this.fieldAlias=o}getSQL(){return this.sql}clone(){return new n(this.sql,this.fieldAlias)}};_e(n,r,"SQL.Aliased");let s=n;t.Aliased=s})(en||(en={}));var hE;hE=nt;class u1{constructor(s){this.name=s}getSQL(){return new en([this])}}_e(u1,hE,"Placeholder");const _$=Symbol.for("drizzle:IsDrizzleView");var fE,pE,xE;xE=nt,pE=Th,fE=_$;class S${constructor({name:s,schema:r,selectedFields:n,query:a}){_e(this,pE);_e(this,fE,!0);this[Th]={name:s,originalName:s,schema:r,selectedFields:n,query:a,isExisting:!a,isAlias:!1}}getSQL(){return new en([this])}}_e(S$,xE,"View");function ioe(t){return typeof t=="object"&&t!==null&&_$ in t}gf.prototype.getSQL=function(){return new en([this])};bi.prototype.getSQL=function(){return new en([this])};R4.prototype.getSQL=function(){return new en([this])};function ooe(t){return t[bi.Symbol.Columns]}function loe(t){return t[Th].selectedFields}function qn(t,s){return{name:typeof t=="string"&&t.length>0?t:"",config:typeof t=="object"?t:s}}var gE,vE;class Bg extends(vE=Qs,gE=nt,vE){generatedAlwaysAsIdentity(s){if(s){const{name:r,...n}=s;this.config.generatedIdentity={type:"always",sequenceName:r,sequenceOptions:n}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(s){if(s){const{name:r,...n}=s;this.config.generatedIdentity={type:"byDefault",sequenceName:r,sequenceOptions:n}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}_e(Bg,gE,"PgIntColumnBaseBuilder");var yE,jE;class C$ extends(jE=Bg,yE=nt,jE){constructor(s){super(s,"number","PgBigInt53")}build(s){return new k$(s,this.config)}}_e(C$,yE,"PgBigInt53Builder");var bE,NE;class k$ extends(NE=Ss,bE=nt,NE){getSQLType(){return"bigint"}mapFromDriverValue(s){return typeof s=="number"?s:Number(s)}}_e(k$,bE,"PgBigInt53");var wE,_E;class A$ extends(_E=Bg,wE=nt,_E){constructor(s){super(s,"bigint","PgBigInt64")}build(s){return new P$(s,this.config)}}_e(A$,wE,"PgBigInt64Builder");var SE,CE;class P$ extends(CE=Ss,SE=nt,CE){getSQLType(){return"bigint"}mapFromDriverValue(s){return BigInt(s)}}_e(P$,SE,"PgBigInt64");function coe(t,s){const{name:r,config:n}=qn(t,s);return n.mode==="number"?new C$(r):new A$(r)}var kE,AE;class E$ extends(AE=Qs,kE=nt,AE){constructor(s){super(s,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(s){return new T$(s,this.config)}}_e(E$,kE,"PgBigSerial53Builder");var PE,EE;class T$ extends(EE=Ss,PE=nt,EE){getSQLType(){return"bigserial"}mapFromDriverValue(s){return typeof s=="number"?s:Number(s)}}_e(T$,PE,"PgBigSerial53");var TE,ME;class M$ extends(ME=Qs,TE=nt,ME){constructor(s){super(s,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(s){return new L$(s,this.config)}}_e(M$,TE,"PgBigSerial64Builder");var LE,DE;class L$ extends(DE=Ss,LE=nt,DE){getSQLType(){return"bigserial"}mapFromDriverValue(s){return BigInt(s)}}_e(L$,LE,"PgBigSerial64");function doe(t,s){const{name:r,config:n}=qn(t,s);return n.mode==="number"?new E$(r):new M$(r)}var IE,RE;class D$ extends(RE=Qs,IE=nt,RE){constructor(s){super(s,"boolean","PgBoolean")}build(s){return new I$(s,this.config)}}_e(D$,IE,"PgBooleanBuilder");var FE,OE;class I$ extends(OE=Ss,FE=nt,OE){getSQLType(){return"boolean"}}_e(I$,FE,"PgBoolean");function lt(t){return new D$(t??"")}var $E,BE;class R$ extends(BE=Qs,$E=nt,BE){constructor(s,r){super(s,"string","PgChar"),this.config.length=r.length,this.config.enumValues=r.enum}build(s){return new F$(s,this.config)}}_e(R$,$E,"PgCharBuilder");var UE,zE;class F$ extends(zE=Ss,UE=nt,zE){constructor(){super(...arguments);_e(this,"length",this.config.length);_e(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"char":`char(${this.length})`}}_e(F$,UE,"PgChar");function uoe(t,s={}){const{name:r,config:n}=qn(t,s);return new R$(r,n)}var qE,VE;class O$ extends(VE=Qs,qE=nt,VE){constructor(s){super(s,"string","PgCidr")}build(s){return new $$(s,this.config)}}_e(O$,qE,"PgCidrBuilder");var HE,WE;class $$ extends(WE=Ss,HE=nt,WE){getSQLType(){return"cidr"}}_e($$,HE,"PgCidr");function moe(t){return new O$(t??"")}var KE,YE;class B$ extends(YE=Qs,KE=nt,YE){constructor(s,r,n){super(s,"custom","PgCustomColumn"),this.config.fieldConfig=r,this.config.customTypeParams=n}build(s){return new U$(s,this.config)}}_e(B$,KE,"PgCustomColumnBuilder");var GE,QE;class U$ extends(QE=Ss,GE=nt,QE){constructor(r,n){super(r,n);_e(this,"sqlName");_e(this,"mapTo");_e(this,"mapFrom");this.sqlName=n.customTypeParams.dataType(n.fieldConfig),this.mapTo=n.customTypeParams.toDriver,this.mapFrom=n.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(r){return typeof this.mapFrom=="function"?this.mapFrom(r):r}mapToDriverValue(r){return typeof this.mapTo=="function"?this.mapTo(r):r}}_e(U$,GE,"PgCustomColumn");function hoe(t){return(s,r)=>{const{name:n,config:a}=qn(s,r);return new B$(n,a,t)}}var ZE,XE;class Bf extends(XE=Qs,ZE=nt,XE){defaultNow(){return this.default(Ke`now()`)}}_e(Bf,ZE,"PgDateColumnBaseBuilder");var JE,e8;class z$ extends(e8=Bf,JE=nt,e8){constructor(s){super(s,"date","PgDate")}build(s){return new q$(s,this.config)}}_e(z$,JE,"PgDateBuilder");var t8,s8;class q$ extends(s8=Ss,t8=nt,s8){getSQLType(){return"date"}mapFromDriverValue(s){return new Date(s)}mapToDriverValue(s){return s.toISOString()}}_e(q$,t8,"PgDate");var r8,n8;class V$ extends(n8=Bf,r8=nt,n8){constructor(s){super(s,"string","PgDateString")}build(s){return new H$(s,this.config)}}_e(V$,r8,"PgDateStringBuilder");var a8,i8;class H$ extends(i8=Ss,a8=nt,i8){getSQLType(){return"date"}}_e(H$,a8,"PgDateString");function foe(t,s){const{name:r,config:n}=qn(t,s);return(n==null?void 0:n.mode)==="date"?new z$(r):new V$(r)}var o8,l8;class W$ extends(l8=Qs,o8=nt,l8){constructor(s){super(s,"number","PgDoublePrecision")}build(s){return new K$(s,this.config)}}_e(W$,o8,"PgDoublePrecisionBuilder");var c8,d8;class K$ extends(d8=Ss,c8=nt,d8){getSQLType(){return"double precision"}mapFromDriverValue(s){return typeof s=="string"?Number.parseFloat(s):s}}_e(K$,c8,"PgDoublePrecision");function poe(t){return new W$(t??"")}var u8,m8;class Y$ extends(m8=Qs,u8=nt,m8){constructor(s){super(s,"string","PgInet")}build(s){return new G$(s,this.config)}}_e(Y$,u8,"PgInetBuilder");var h8,f8;class G$ extends(f8=Ss,h8=nt,f8){getSQLType(){return"inet"}}_e(G$,h8,"PgInet");function xoe(t){return new Y$(t??"")}var p8,x8;class Q$ extends(x8=Bg,p8=nt,x8){constructor(s){super(s,"number","PgInteger")}build(s){return new Z$(s,this.config)}}_e(Q$,p8,"PgIntegerBuilder");var g8,v8;class Z$ extends(v8=Ss,g8=nt,v8){getSQLType(){return"integer"}mapFromDriverValue(s){return typeof s=="string"?Number.parseInt(s):s}}_e(Z$,g8,"PgInteger");function jt(t){return new Q$(t??"")}var y8,j8;class X$ extends(j8=Qs,y8=nt,j8){constructor(s,r){super(s,"string","PgInterval"),this.config.intervalConfig=r}build(s){return new J$(s,this.config)}}_e(X$,y8,"PgIntervalBuilder");var b8,N8;class J$ extends(N8=Ss,b8=nt,N8){constructor(){super(...arguments);_e(this,"fields",this.config.intervalConfig.fields);_e(this,"precision",this.config.intervalConfig.precision)}getSQLType(){const r=this.fields?` ${this.fields}`:"",n=this.precision?`(${this.precision})`:"";return`interval${r}${n}`}}_e(J$,b8,"PgInterval");function goe(t,s={}){const{name:r,config:n}=qn(t,s);return new X$(r,n)}var w8,_8;class eB extends(_8=Qs,w8=nt,_8){constructor(s){super(s,"json","PgJson")}build(s){return new tB(s,this.config)}}_e(eB,w8,"PgJsonBuilder");var S8,C8;class tB extends(C8=Ss,S8=nt,C8){constructor(s,r){super(s,r)}getSQLType(){return"json"}mapToDriverValue(s){return JSON.stringify(s)}mapFromDriverValue(s){if(typeof s=="string")try{return JSON.parse(s)}catch{return s}return s}}_e(tB,S8,"PgJson");function hs(t){return new eB(t??"")}var k8,A8;class sB extends(A8=Qs,k8=nt,A8){constructor(s){super(s,"json","PgJsonb")}build(s){return new rB(s,this.config)}}_e(sB,k8,"PgJsonbBuilder");var P8,E8;class rB extends(E8=Ss,P8=nt,E8){constructor(s,r){super(s,r)}getSQLType(){return"jsonb"}mapToDriverValue(s){return JSON.stringify(s)}mapFromDriverValue(s){if(typeof s=="string")try{return JSON.parse(s)}catch{return s}return s}}_e(rB,P8,"PgJsonb");function xa(t){return new sB(t??"")}var T8,M8;class nB extends(M8=Qs,T8=nt,M8){constructor(s){super(s,"array","PgLine")}build(s){return new aB(s,this.config)}}_e(nB,T8,"PgLineBuilder");var L8,D8;class aB extends(D8=Ss,L8=nt,D8){getSQLType(){return"line"}mapFromDriverValue(s){const[r,n,a]=s.slice(1,-1).split(",");return[Number.parseFloat(r),Number.parseFloat(n),Number.parseFloat(a)]}mapToDriverValue(s){return`{${s[0]},${s[1]},${s[2]}}`}}_e(aB,L8,"PgLine");var I8,R8;class iB extends(R8=Qs,I8=nt,R8){constructor(s){super(s,"json","PgLineABC")}build(s){return new oB(s,this.config)}}_e(iB,I8,"PgLineABCBuilder");var F8,O8;class oB extends(O8=Ss,F8=nt,O8){getSQLType(){return"line"}mapFromDriverValue(s){const[r,n,a]=s.slice(1,-1).split(",");return{a:Number.parseFloat(r),b:Number.parseFloat(n),c:Number.parseFloat(a)}}mapToDriverValue(s){return`{${s.a},${s.b},${s.c}}`}}_e(oB,F8,"PgLineABC");function voe(t,s){const{name:r,config:n}=qn(t,s);return!(n!=null&&n.mode)||n.mode==="tuple"?new nB(r):new iB(r)}var $8,B8;class lB extends(B8=Qs,$8=nt,B8){constructor(s){super(s,"string","PgMacaddr")}build(s){return new cB(s,this.config)}}_e(lB,$8,"PgMacaddrBuilder");var U8,z8;class cB extends(z8=Ss,U8=nt,z8){getSQLType(){return"macaddr"}}_e(cB,U8,"PgMacaddr");function yoe(t){return new lB(t??"")}var q8,V8;class dB extends(V8=Qs,q8=nt,V8){constructor(s){super(s,"string","PgMacaddr8")}build(s){return new uB(s,this.config)}}_e(dB,q8,"PgMacaddr8Builder");var H8,W8;class uB extends(W8=Ss,H8=nt,W8){getSQLType(){return"macaddr8"}}_e(uB,H8,"PgMacaddr8");function joe(t){return new dB(t??"")}var K8,Y8;class mB extends(Y8=Qs,K8=nt,Y8){constructor(s,r,n){super(s,"string","PgNumeric"),this.config.precision=r,this.config.scale=n}build(s){return new hB(s,this.config)}}_e(mB,K8,"PgNumericBuilder");var G8,Q8;class hB extends(Q8=Ss,G8=nt,Q8){constructor(r,n){super(r,n);_e(this,"precision");_e(this,"scale");this.precision=n.precision,this.scale=n.scale}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}}_e(hB,G8,"PgNumeric");function fB(t,s){const{name:r,config:n}=qn(t,s);return new mB(r,n==null?void 0:n.precision,n==null?void 0:n.scale)}const Xt=fB;var Z8,X8;class pB extends(X8=Qs,Z8=nt,X8){constructor(s){super(s,"array","PgPointTuple")}build(s){return new xB(s,this.config)}}_e(pB,Z8,"PgPointTupleBuilder");var J8,eT;class xB extends(eT=Ss,J8=nt,eT){getSQLType(){return"point"}mapFromDriverValue(s){if(typeof s=="string"){const[r,n]=s.slice(1,-1).split(",");return[Number.parseFloat(r),Number.parseFloat(n)]}return[s.x,s.y]}mapToDriverValue(s){return`(${s[0]},${s[1]})`}}_e(xB,J8,"PgPointTuple");var tT,sT;class gB extends(sT=Qs,tT=nt,sT){constructor(s){super(s,"json","PgPointObject")}build(s){return new vB(s,this.config)}}_e(gB,tT,"PgPointObjectBuilder");var rT,nT;class vB extends(nT=Ss,rT=nt,nT){getSQLType(){return"point"}mapFromDriverValue(s){if(typeof s=="string"){const[r,n]=s.slice(1,-1).split(",");return{x:Number.parseFloat(r),y:Number.parseFloat(n)}}return s}mapToDriverValue(s){return`(${s.x},${s.y})`}}_e(vB,rT,"PgPointObject");function boe(t,s){const{name:r,config:n}=qn(t,s);return!(n!=null&&n.mode)||n.mode==="tuple"?new pB(r):new gB(r)}function Noe(t){const s=[];for(let r=0;r<t.length;r+=2)s.push(Number.parseInt(t.slice(r,r+2),16));return new Uint8Array(s)}function P6(t,s){const r=new ArrayBuffer(8),n=new DataView(r);for(let a=0;a<8;a++)n.setUint8(a,t[s+a]);return n.getFloat64(0,!0)}function yB(t){const s=Noe(t);let r=0;const n=s[r];r+=1;const a=new DataView(s.buffer),i=a.getUint32(r,n===1);if(r+=4,i&536870912&&(a.getUint32(r,n===1),r+=4),(i&65535)===1){const o=P6(s,r);r+=8;const l=P6(s,r);return r+=8,[o,l]}throw new Error("Unsupported geometry type")}var aT,iT;class jB extends(iT=Qs,aT=nt,iT){constructor(s){super(s,"array","PgGeometry")}build(s){return new bB(s,this.config)}}_e(jB,aT,"PgGeometryBuilder");var oT,lT;class bB extends(lT=Ss,oT=nt,lT){getSQLType(){return"geometry(point)"}mapFromDriverValue(s){return yB(s)}mapToDriverValue(s){return`point(${s[0]} ${s[1]})`}}_e(bB,oT,"PgGeometry");var cT,dT;class NB extends(dT=Qs,cT=nt,dT){constructor(s){super(s,"json","PgGeometryObject")}build(s){return new wB(s,this.config)}}_e(NB,cT,"PgGeometryObjectBuilder");var uT,mT;class wB extends(mT=Ss,uT=nt,mT){getSQLType(){return"geometry(point)"}mapFromDriverValue(s){const r=yB(s);return{x:r[0],y:r[1]}}mapToDriverValue(s){return`point(${s.x} ${s.y})`}}_e(wB,uT,"PgGeometryObject");function woe(t,s){const{name:r,config:n}=qn(t,s);return!(n!=null&&n.mode)||n.mode==="tuple"?new jB(r):new NB(r)}var hT,fT;class _B extends(fT=Qs,hT=nt,fT){constructor(s,r){super(s,"number","PgReal"),this.config.length=r}build(s){return new SB(s,this.config)}}_e(_B,hT,"PgRealBuilder");var pT,xT;class SB extends(xT=Ss,pT=nt,xT){constructor(r,n){super(r,n);_e(this,"mapFromDriverValue",r=>typeof r=="string"?Number.parseFloat(r):r)}getSQLType(){return"real"}}_e(SB,pT,"PgReal");function _oe(t){return new _B(t??"")}var gT,vT;class CB extends(vT=Qs,gT=nt,vT){constructor(s){super(s,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(s){return new kB(s,this.config)}}_e(CB,gT,"PgSerialBuilder");var yT,jT;class kB extends(jT=Ss,yT=nt,jT){getSQLType(){return"serial"}}_e(kB,yT,"PgSerial");function Soe(t){return new CB(t??"")}var bT,NT;class AB extends(NT=Bg,bT=nt,NT){constructor(s){super(s,"number","PgSmallInt")}build(s){return new PB(s,this.config)}}_e(AB,bT,"PgSmallIntBuilder");var wT,_T;class PB extends(_T=Ss,wT=nt,_T){constructor(){super(...arguments);_e(this,"mapFromDriverValue",r=>typeof r=="string"?Number(r):r)}getSQLType(){return"smallint"}}_e(PB,wT,"PgSmallInt");function Coe(t){return new AB(t??"")}var ST,CT;class EB extends(CT=Qs,ST=nt,CT){constructor(s){super(s,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(s){return new TB(s,this.config)}}_e(EB,ST,"PgSmallSerialBuilder");var kT,AT;class TB extends(AT=Ss,kT=nt,AT){getSQLType(){return"smallserial"}}_e(TB,kT,"PgSmallSerial");function koe(t){return new EB(t??"")}var PT,ET;class MB extends(ET=Qs,PT=nt,ET){constructor(s,r){super(s,"string","PgText"),this.config.enumValues=r.enum}build(s){return new LB(s,this.config)}}_e(MB,PT,"PgTextBuilder");var TT,MT;class LB extends(MT=Ss,TT=nt,MT){constructor(){super(...arguments);_e(this,"enumValues",this.config.enumValues)}getSQLType(){return"text"}}_e(LB,TT,"PgText");function C(t,s={}){const{name:r,config:n}=qn(t,s);return new MB(r,n)}var LT,DT;class DB extends(DT=Bf,LT=nt,DT){constructor(s,r,n){super(s,"string","PgTime"),this.withTimezone=r,this.precision=n,this.config.withTimezone=r,this.config.precision=n}build(s){return new IB(s,this.config)}}_e(DB,LT,"PgTimeBuilder");var IT,RT;class IB extends(RT=Ss,IT=nt,RT){constructor(r,n){super(r,n);_e(this,"withTimezone");_e(this,"precision");this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}_e(IB,IT,"PgTime");function Aoe(t,s={}){const{name:r,config:n}=qn(t,s);return new DB(r,n.withTimezone??!1,n.precision)}var FT,OT;class RB extends(OT=Bf,FT=nt,OT){constructor(s,r,n){super(s,"date","PgTimestamp"),this.config.withTimezone=r,this.config.precision=n}build(s){return new FB(s,this.config)}}_e(RB,FT,"PgTimestampBuilder");var $T,BT;class FB extends(BT=Ss,$T=nt,BT){constructor(r,n){super(r,n);_e(this,"withTimezone");_e(this,"precision");_e(this,"mapFromDriverValue",r=>new Date(this.withTimezone?r:r+"+0000"));_e(this,"mapToDriverValue",r=>r.toISOString());this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}}_e(FB,$T,"PgTimestamp");var UT,zT;class OB extends(zT=Bf,UT=nt,zT){constructor(s,r,n){super(s,"string","PgTimestampString"),this.config.withTimezone=r,this.config.precision=n}build(s){return new $B(s,this.config)}}_e(OB,UT,"PgTimestampStringBuilder");var qT,VT;class $B extends(VT=Ss,qT=nt,VT){constructor(r,n){super(r,n);_e(this,"withTimezone");_e(this,"precision");this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}_e($B,qT,"PgTimestampString");function Ce(t,s={}){const{name:r,config:n}=qn(t,s);return(n==null?void 0:n.mode)==="string"?new OB(r,n.withTimezone??!1,n.precision):new RB(r,(n==null?void 0:n.withTimezone)??!1,n==null?void 0:n.precision)}var HT,WT;class BB extends(WT=Qs,HT=nt,WT){constructor(s){super(s,"string","PgUUID")}defaultRandom(){return this.default(Ke`gen_random_uuid()`)}build(s){return new UB(s,this.config)}}_e(BB,HT,"PgUUIDBuilder");var KT,YT;class UB extends(YT=Ss,KT=nt,YT){getSQLType(){return"uuid"}}_e(UB,KT,"PgUUID");function Poe(t){return new BB(t??"")}var GT,QT;class zB extends(QT=Qs,GT=nt,QT){constructor(s,r){super(s,"string","PgVarchar"),this.config.length=r.length,this.config.enumValues=r.enum}build(s){return new qB(s,this.config)}}_e(zB,GT,"PgVarcharBuilder");var ZT,XT;class qB extends(XT=Ss,ZT=nt,XT){constructor(){super(...arguments);_e(this,"length",this.config.length);_e(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}}_e(qB,ZT,"PgVarchar");function ne(t,s={}){const{name:r,config:n}=qn(t,s);return new zB(r,n)}var JT,eM;class VB extends(eM=Qs,JT=nt,eM){constructor(s,r){super(s,"string","PgBinaryVector"),this.config.dimensions=r.dimensions}build(s){return new HB(s,this.config)}}_e(VB,JT,"PgBinaryVectorBuilder");var tM,sM;class HB extends(sM=Ss,tM=nt,sM){constructor(){super(...arguments);_e(this,"dimensions",this.config.dimensions)}getSQLType(){return`bit(${this.dimensions})`}}_e(HB,tM,"PgBinaryVector");function Eoe(t,s){const{name:r,config:n}=qn(t,s);return new VB(r,n)}var rM,nM;class WB extends(nM=Qs,rM=nt,nM){constructor(s,r){super(s,"array","PgHalfVector"),this.config.dimensions=r.dimensions}build(s){return new KB(s,this.config)}}_e(WB,rM,"PgHalfVectorBuilder");var aM,iM;class KB extends(iM=Ss,aM=nt,iM){constructor(){super(...arguments);_e(this,"dimensions",this.config.dimensions)}getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(r){return JSON.stringify(r)}mapFromDriverValue(r){return r.slice(1,-1).split(",").map(n=>Number.parseFloat(n))}}_e(KB,aM,"PgHalfVector");function Toe(t,s){const{name:r,config:n}=qn(t,s);return new WB(r,n)}var oM,lM;class YB extends(lM=Qs,oM=nt,lM){constructor(s,r){super(s,"string","PgSparseVector"),this.config.dimensions=r.dimensions}build(s){return new GB(s,this.config)}}_e(YB,oM,"PgSparseVectorBuilder");var cM,dM;class GB extends(dM=Ss,cM=nt,dM){constructor(){super(...arguments);_e(this,"dimensions",this.config.dimensions)}getSQLType(){return`sparsevec(${this.dimensions})`}}_e(GB,cM,"PgSparseVector");function Moe(t,s){const{name:r,config:n}=qn(t,s);return new YB(r,n)}var uM,mM;class QB extends(mM=Qs,uM=nt,mM){constructor(s,r){super(s,"array","PgVector"),this.config.dimensions=r.dimensions}build(s){return new ZB(s,this.config)}}_e(QB,uM,"PgVectorBuilder");var hM,fM;class ZB extends(fM=Ss,hM=nt,fM){constructor(){super(...arguments);_e(this,"dimensions",this.config.dimensions)}getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(r){return JSON.stringify(r)}mapFromDriverValue(r){return r.slice(1,-1).split(",").map(n=>Number.parseFloat(n))}}_e(ZB,hM,"PgVector");function Loe(t,s){const{name:r,config:n}=qn(t,s);return new QB(r,n)}function Doe(){return{bigint:coe,bigserial:doe,boolean:lt,char:uoe,cidr:moe,customType:hoe,date:foe,doublePrecision:poe,inet:xoe,integer:jt,interval:goe,json:hs,jsonb:xa,line:voe,macaddr:yoe,macaddr8:joe,numeric:fB,point:boe,geometry:woe,real:_oe,serial:Soe,smallint:Coe,smallserial:koe,text:C,time:Aoe,timestamp:Ce,uuid:Poe,varchar:ne,bit:Eoe,halfvec:Toe,sparsevec:Moe,vector:Loe}}const Bw=Symbol.for("drizzle:PgInlineForeignKeys"),E6=Symbol.for("drizzle:EnableRLS");var pM,xM,gM,vM,yM;class mx extends(yM=bi,vM=nt,gM=Bw,xM=E6,pM=bi.Symbol.ExtraConfigBuilder,yM){constructor(){super(...arguments);_e(this,gM,[]);_e(this,xM,!1);_e(this,pM)}}_e(mx,vM,"PgTable"),_e(mx,"Symbol",Object.assign({},bi.Symbol,{InlineForeignKeys:Bw,EnableRLS:E6}));function Ioe(t,s,r,n,a=t){const i=new mx(t,n,a),o=typeof s=="function"?s(Doe()):s,l=Object.fromEntries(Object.entries(o).map(([u,m])=>{const f=m;f.setName(u);const h=f.build(i);return i[Bw].push(...f.buildForeignKeys(h,i)),[u,h]})),c=Object.fromEntries(Object.entries(o).map(([u,m])=>{const f=m;f.setName(u);const h=f.buildExtraConfigColumn(i);return[u,h]})),d=Object.assign(i,l);return d[bi.Symbol.Columns]=l,d[bi.Symbol.ExtraConfigColumns]=c,r&&(d[mx.Symbol.ExtraConfigBuilder]=r),Object.assign(d,{enableRLS:()=>(d[mx.Symbol.EnableRLS]=!0,d)})}const et=(t,s,r)=>Ioe(t,s,r,void 0);var jM;jM=nt;class XB{constructor(s,r){_e(this,"brand");this.name=s,this.value=r}build(s){return new JB(s,this)}}_e(XB,jM,"PgCheckBuilder");var bM;bM=nt;class JB{constructor(s,r){_e(this,"name");_e(this,"value");this.table=s,this.name=r.name,this.value=r.value}}_e(JB,bM,"PgCheck");function vf(t,s){return new XB(t,s)}var NM;NM=nt;class O4{constructor(s,r){this.unique=s,this.name=r}on(...s){return new Yy(s.map(r=>{if(bn(r,en))return r;r=r;const n=new Ky(r.name,!!r.keyAsName,r.columnType,r.indexConfig);return r.indexConfig=JSON.parse(JSON.stringify(r.defaultConfig)),n}),this.unique,!1,this.name)}onOnly(...s){return new Yy(s.map(r=>{if(bn(r,en))return r;r=r;const n=new Ky(r.name,!!r.keyAsName,r.columnType,r.indexConfig);return r.indexConfig=r.defaultConfig,n}),this.unique,!0,this.name)}using(s,...r){return new Yy(r.map(n=>{if(bn(n,en))return n;n=n;const a=new Ky(n.name,!!n.keyAsName,n.columnType,n.indexConfig);return n.indexConfig=JSON.parse(JSON.stringify(n.defaultConfig)),a}),this.unique,!0,this.name,s)}}_e(O4,NM,"PgIndexBuilderOn");var wM;wM=nt;class Yy{constructor(s,r,n,a,i="btree"){_e(this,"config");this.config={name:a,columns:s,unique:r,only:n,method:i}}concurrently(){return this.config.concurrently=!0,this}with(s){return this.config.with=s,this}where(s){return this.config.where=s,this}build(s){return new eU(this.config,s)}}_e(Yy,wM,"PgIndexBuilder");var _M;_M=nt;class eU{constructor(s,r){_e(this,"config");this.config={...s,table:r}}}_e(eU,_M,"PgIndex");function de(t){return new O4(!1,t)}function m1(t){return new O4(!0,t)}const Ur={INT8_MIN:-128,INT8_MAX:127,INT8_UNSIGNED_MAX:255,INT16_MIN:-32768,INT16_MAX:32767,INT16_UNSIGNED_MAX:65535,INT24_MIN:-8388608,INT24_MAX:8388607,INT24_UNSIGNED_MAX:16777215,INT32_MIN:-2147483648,INT32_MAX:2147483647,INT32_UNSIGNED_MAX:4294967295,INT48_MIN:-0x800000000000,INT48_MAX:0x7fffffffffff,INT48_UNSIGNED_MAX:0xffffffffffff,INT64_MIN:-9223372036854775808n,INT64_MAX:9223372036854775807n,INT64_UNSIGNED_MAX:18446744073709551615n};function cn(t,s){return s.includes(t.columnType)}function Roe(t){return"enumValues"in t&&Array.isArray(t.enumValues)&&t.enumValues.length>0}const Foe=_4([we(),Ll(),xn(),_O()]),Ooe=_4([Foe,SO(Z0()),ag(Z0())]),$oe=w4(t=>t instanceof Buffer);function tU(t,s){const r=(s==null?void 0:s.zodInstance)??tre,n=(s==null?void 0:s.coerce)??{};let a;return Roe(t)&&(a=t.enumValues.length?r.enum(t.enumValues):r.string()),a||(cn(t,["PgGeometry","PgPointTuple"])?a=r.tuple([r.number(),r.number()]):cn(t,["PgGeometryObject","PgPointObject"])?a=r.object({x:r.number(),y:r.number()}):cn(t,["PgHalfVector","PgVector"])?(a=r.array(r.number()),a=t.dimensions?a.length(t.dimensions):a):cn(t,["PgLine"])?a=r.tuple([r.number(),r.number(),r.number()]):cn(t,["PgLineABC"])?a=r.object({a:r.number(),b:r.number(),c:r.number()}):cn(t,["PgArray"])?(a=r.array(tU(t.baseColumn,r)),a=t.size?a.length(t.size):a):t.dataType==="array"?a=r.array(r.any()):t.dataType==="number"?a=Boe(t,r,n):t.dataType==="bigint"?a=Uoe(t,r,n):t.dataType==="boolean"?a=n===!0||n.boolean?r.coerce.boolean():r.boolean():t.dataType==="date"?a=n===!0||n.date?r.coerce.date():r.date():t.dataType==="string"?a=zoe(t,r,n):t.dataType==="json"?a=Ooe:t.dataType==="custom"?a=r.any():t.dataType==="buffer"&&(a=$oe)),a||(a=r.any()),a}function Boe(t,s,r){let n=t.getSQLType().includes("unsigned"),a,i,o=!1;cn(t,["MySqlTinyInt","SingleStoreTinyInt"])?(a=n?0:Ur.INT8_MIN,i=n?Ur.INT8_UNSIGNED_MAX:Ur.INT8_MAX,o=!0):cn(t,["PgSmallInt","PgSmallSerial","MySqlSmallInt","SingleStoreSmallInt"])?(a=n?0:Ur.INT16_MIN,i=n?Ur.INT16_UNSIGNED_MAX:Ur.INT16_MAX,o=!0):cn(t,["PgReal","MySqlFloat","MySqlMediumInt","SingleStoreMediumInt","SingleStoreFloat"])?(a=n?0:Ur.INT24_MIN,i=n?Ur.INT24_UNSIGNED_MAX:Ur.INT24_MAX,o=cn(t,["MySqlMediumInt","SingleStoreMediumInt"])):cn(t,["PgInteger","PgSerial","MySqlInt","SingleStoreInt"])?(a=n?0:Ur.INT32_MIN,i=n?Ur.INT32_UNSIGNED_MAX:Ur.INT32_MAX,o=!0):cn(t,["PgDoublePrecision","MySqlReal","MySqlDouble","SingleStoreReal","SingleStoreDouble","SQLiteReal"])?(a=n?0:Ur.INT48_MIN,i=n?Ur.INT48_UNSIGNED_MAX:Ur.INT48_MAX):cn(t,["PgBigInt53","PgBigSerial53","MySqlBigInt53","MySqlSerial","SingleStoreBigInt53","SingleStoreSerial","SQLiteInteger"])?(n=n||cn(t,["MySqlSerial","SingleStoreSerial"]),a=n?0:Number.MIN_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER,o=!0):cn(t,["MySqlYear","SingleStoreYear"])?(a=1901,i=2155,o=!0):(a=Number.MIN_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER);let l=r===!0||r!=null&&r.number?s.coerce.number():s.number();return l=l.min(a).max(i),o?l.int():l}function Uoe(t,s,r){const n=t.getSQLType().includes("unsigned"),a=n?0n:Ur.INT64_MIN,i=n?Ur.INT64_UNSIGNED_MAX:Ur.INT64_MAX;return(r===!0||r!=null&&r.bigint?s.coerce.bigint():s.bigint()).min(a).max(i)}function zoe(t,s,r){if(cn(t,["PgUUID"]))return s.string().uuid();let n,a,i=!1;cn(t,["PgVarchar","SQLiteText"])?n=t.length:cn(t,["MySqlVarChar","SingleStoreVarChar"])?n=t.length??Ur.INT16_UNSIGNED_MAX:cn(t,["MySqlText","SingleStoreText"])&&(t.textType==="longtext"?n=Ur.INT32_UNSIGNED_MAX:t.textType==="mediumtext"?n=Ur.INT24_UNSIGNED_MAX:t.textType==="text"?n=Ur.INT16_UNSIGNED_MAX:n=Ur.INT8_UNSIGNED_MAX),cn(t,["PgChar","MySqlChar","SingleStoreChar"])&&(n=t.length,i=!0),cn(t,["PgBinaryVector"])&&(a=/^[01]+$/,n=t.dimensions);let o=r===!0||r!=null&&r.string?s.coerce.string():s.string();return o=a?o.regex(a):o,n&&i?o.length(n):n?o.max(n):o}function sU(t){return b$(t)?ooe(t):loe(t)}function rU(t,s,r,n){const a={};for(const[i,o]of Object.entries(t)){if(!bn(o,gf)&&!bn(o,en)&&!bn(o,en.Aliased)&&typeof o=="object"){const m=b$(o)||ioe(o)?sU(o):o;a[i]=rU(m,s[i]??{},r,n);continue}const l=s[i];if(l!==void 0&&typeof l!="function"){a[i]=l;continue}const c=bn(o,gf)?o:void 0,d=c?tU(c,n):Z0(),u=typeof l=="function"?l(d):d;r.never(c)||(a[i]=u,c&&(r.nullable(c)&&(a[i]=a[i].nullable()),r.optional(c)&&(a[i]=a[i].optional())))}return Dr(a)}const qoe={never:t=>{var s,r;return((s=t==null?void 0:t.generated)==null?void 0:s.type)==="always"||((r=t==null?void 0:t.generatedIdentity)==null?void 0:r.type)==="always"},optional:t=>!t.notNull||t.notNull&&t.hasDefault,nullable:t=>!t.notNull},st=(t,s)=>{const r=sU(t);return rU(r,{},qoe)};et("sessions",{sid:ne("sid").primaryKey(),sess:xa("sess").notNull(),expire:Ce("expire").notNull()},t=>[de("IDX_session_expire").on(t.expire)]);const Gs=et("users",{id:ne("id").primaryKey(),email:ne("email").unique("users_email_key"),firstName:ne("first_name"),lastName:ne("last_name"),profileImageUrl:ne("profile_image_url"),phone:ne("phone"),bio:C("bio"),timezone:ne("timezone").default("America/New_York"),language:ne("language",{length:10}).default("en"),isAdmin:lt("is_admin").default(!1),createdAt:Ce("created_at").defaultNow(),updatedAt:Ce("updated_at").defaultNow()}),Voe=et("user_settings",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),userId:ne("user_id").notNull().references(()=>Gs.id,{onDelete:"cascade"}).unique(),emailNotifications:lt("email_notifications").default(!0),pushNotifications:lt("push_notifications").default(!0),memorialUpdates:lt("memorial_updates").default(!0),donationReceipts:lt("donation_receipts").default(!0),scheduledMessageReminders:lt("scheduled_message_reminders").default(!0),shareActivityWithCreators:lt("share_activity_with_creators").default(!0),publicProfile:lt("public_profile").default(!0),createdAt:Ce("created_at").defaultNow(),updatedAt:Ce("updated_at").defaultNow()}),Ps=et("memorials",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),name:C("name").notNull(),birthDate:C("birth_date").notNull(),deathDate:C("death_date").notNull(),biography:C("biography"),epitaph:C("epitaph"),prefaceText:C("preface_text"),backgroundImage:C("background_image"),inviteCode:ne("invite_code",{length:20}).notNull().unique(),religion:C("religion"),cemeteryName:C("cemetery_name"),cemeteryLocation:C("cemetery_location"),cemeteryCoordinates:hs("cemetery_coordinates").$type(),fontFamily:C("font_family"),symbol:C("symbol"),timezone:ne("timezone").default("America/New_York"),isPublic:lt("is_public").default(!1),creatorEmail:C("creator_email"),ownershipType:C("ownership_type").default("family_created"),createdAt:Ce("created_at").defaultNow()},t=>[de("idx_memorials_creator_email").on(t.creatorEmail),de("idx_memorials_created_at").on(t.createdAt),de("idx_memorials_is_public").on(t.isPublic)]),Hoe=et("memorial_admins",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),memorialId:ne("memorial_id").notNull().references(()=>Ps.id,{onDelete:"cascade"}),email:C("email").notNull(),role:C("role").notNull().default("admin"),canManageQR:lt("can_manage_qr").default(!0),canEditMemorial:lt("can_edit_memorial").default(!0),canApproveContent:lt("can_approve_content").default(!0),createdAt:Ce("created_at").defaultNow()},t=>[de("idx_memorial_admins_memorial_id").on(t.memorialId),de("idx_memorial_admins_email").on(t.email)]),xj=et("qr_codes",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),memorialId:ne("memorial_id").notNull().references(()=>Ps.id,{onDelete:"cascade"}),code:C("code").notNull(),purpose:C("purpose").notNull().default("tombstone"),qrType:C("qr_type").default("standard"),issuedToEmail:C("issued_to_email"),expiresAt:Ce("expires_at"),status:C("status").notNull().default("active"),title:C("title"),description:C("description"),videoUrl:C("video_url"),imageUrl:C("image_url"),mediaType:C("media_type"),totalScans:jt("total_scans").default(0),lastScannedAt:Ce("last_scanned_at"),createdAt:Ce("created_at").defaultNow()},t=>[de("idx_qr_codes_memorial_id").on(t.memorialId),de("idx_qr_codes_status").on(t.status),de("idx_qr_codes_purpose").on(t.purpose)]),Ug=et("memories",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),memorialId:ne("memorial_id").notNull().references(()=>Ps.id,{onDelete:"cascade"}),authorName:C("author_name").notNull(),caption:C("caption").notNull(),mediaUrl:C("media_url"),isApproved:lt("is_approved").default(!1),createdAt:Ce("created_at").defaultNow()},t=>[de("idx_memories_memorial_id").on(t.memorialId),de("idx_memories_is_approved").on(t.isApproved)]),Woe=et("qr_scans",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),qrCodeId:ne("qr_code_id").notNull().references(()=>xj.id,{onDelete:"cascade"}),memorialId:ne("memorial_id").notNull().references(()=>Ps.id,{onDelete:"cascade"}),userId:ne("user_id").references(()=>Gs.id,{onDelete:"set null"}),scannerType:C("scanner_type").default("visitor"),latitude:Xt("latitude",{precision:10,scale:7}),longitude:Xt("longitude",{precision:10,scale:7}),city:C("city"),region:C("region"),country:C("country"),geolocationConsent:lt("geolocation_consent").default(!1).notNull(),userAgent:C("user_agent"),deviceType:C("device_type"),browser:C("browser"),operatingSystem:C("operating_system"),ipAddress:C("ip_address"),action:C("action"),uploadedMediaId:ne("uploaded_media_id").references(()=>Ug.id,{onDelete:"set null"}),sessionDuration:jt("session_duration"),scannedAt:Ce("scanned_at").defaultNow()},t=>[de("idx_qr_scans_qr_code_id").on(t.qrCodeId),de("idx_qr_scans_memorial_id").on(t.memorialId),de("idx_qr_scans_scanned_at").on(t.scannedAt),de("idx_qr_scans_scanner_type").on(t.scannerType)]),nU=et("religious_symbols",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),name:C("name").notNull(),category:C("category").notNull(),symbolUrl:C("symbol_url").notNull(),symbolUnicode:C("symbol_unicode"),description:C("description"),isCustom:lt("is_custom").default(!1),uploadedBy:ne("uploaded_by").references(()=>Gs.id,{onDelete:"set null"}),createdAt:Ce("created_at").defaultNow()},t=>[de("idx_religious_symbols_category").on(t.category),de("idx_religious_symbols_is_custom").on(t.isCustom)]),Koe=et("memorial_symbols",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),memorialId:ne("memorial_id").notNull().references(()=>Ps.id,{onDelete:"cascade"}),symbolId:ne("symbol_id").notNull().references(()=>nU.id,{onDelete:"cascade"}),position:jt("position").default(0),size:C("size").default("medium"),createdAt:Ce("created_at").defaultNow()},t=>[de("idx_memorial_symbols_memorial_id").on(t.memorialId)]),$4=et("memorial_playlists",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),memorialId:ne("memorial_id").notNull().references(()=>Ps.id,{onDelete:"cascade"}),name:C("name").notNull(),description:C("description"),songs:xa("songs").notNull().$type().default([]),isDefault:lt("is_default").default(!1),createdBy:ne("created_by").references(()=>Gs.id,{onDelete:"set null"}),createdAt:Ce("created_at").defaultNow(),updatedAt:Ce("updated_at").defaultNow()},t=>[de("idx_memorial_playlists_memorial_id").on(t.memorialId),de("idx_memorial_playlists_is_default").on(t.isDefault)]),Yoe=et("memorial_slideshows",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),memorialId:ne("memorial_id").notNull().references(()=>Ps.id,{onDelete:"cascade"}),playlistId:ne("playlist_id").references(()=>$4.id,{onDelete:"set null"}),title:C("title").notNull(),description:C("description"),photoIds:xa("photo_ids").notNull().$type().default([]),transitionEffect:C("transition_effect").default("fade"),photoDuration:jt("photo_duration").default(5e3),syncToBeats:lt("sync_to_beats").default(!1),autoplay:lt("autoplay").default(!0),loop:lt("loop").default(!0),createdBy:ne("created_by").references(()=>Gs.id,{onDelete:"set null"}),views:jt("views").default(0),createdAt:Ce("created_at").defaultNow(),updatedAt:Ce("updated_at").defaultNow()},t=>[de("idx_memorial_slideshows_memorial_id").on(t.memorialId)]),Goe=et("video_condolences",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),memorialId:ne("memorial_id").notNull().references(()=>Ps.id,{onDelete:"cascade"}),authorName:C("author_name").notNull(),authorEmail:C("author_email"),relationship:C("relationship"),videoUrl:C("video_url").notNull(),thumbnailUrl:C("thumbnail_url"),duration:jt("duration"),transcription:C("transcription"),isApproved:lt("is_approved").default(!1),isPrivate:lt("is_private").default(!1),deliveryDate:Ce("delivery_date"),location:C("location"),deviceType:C("device_type"),views:jt("views").default(0),createdAt:Ce("created_at").defaultNow()},t=>[de("idx_video_condolences_memorial_id").on(t.memorialId),de("idx_video_condolences_is_approved").on(t.isApproved),de("idx_video_condolences_delivery_date").on(t.deliveryDate)]),Qoe=et("memory_comments",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),memoryId:ne("memory_id").notNull().references(()=>Ug.id,{onDelete:"cascade"}),userId:ne("user_id").references(()=>Gs.id,{onDelete:"cascade"}),authorName:C("author_name").notNull(),authorEmail:C("author_email"),comment:C("comment").notNull(),isApproved:lt("is_approved").default(!0),createdAt:Ce("created_at").defaultNow()},t=>[de("idx_memory_comments_memory_id").on(t.memoryId),de("idx_memory_comments_user_id").on(t.userId)]),Zoe=et("memory_condolences",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),memoryId:ne("memory_id").notNull().references(()=>Ug.id,{onDelete:"cascade"}),userId:ne("user_id").references(()=>Gs.id,{onDelete:"cascade"}),authorName:C("author_name").notNull(),authorEmail:C("author_email"),createdAt:Ce("created_at").defaultNow()},t=>[de("idx_memory_condolences_memory_id").on(t.memoryId),de("idx_memory_condolences_user_id").on(t.userId)]),Xoe=et("memory_reactions",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),memoryId:ne("memory_id").notNull().references(()=>Ug.id,{onDelete:"cascade"}),userId:ne("user_id").references(()=>Gs.id,{onDelete:"cascade"}),userName:C("user_name").notNull(),userEmail:C("user_email"),reactionType:C("reaction_type").notNull().default("heart"),createdAt:Ce("created_at").defaultNow()},t=>[de("idx_memory_reactions_memory_id").on(t.memoryId),de("idx_memory_reactions_user_id").on(t.userId),m1("idx_memory_reactions_unique_user").on(t.memoryId,t.userId,t.userEmail)]),Joe=et("condolences",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),memorialId:ne("memorial_id").notNull().references(()=>Ps.id,{onDelete:"cascade"}),authorName:C("author_name").notNull(),authorEmail:C("author_email"),message:C("message").notNull(),createdAt:Ce("created_at").defaultNow()},t=>[de("idx_condolences_memorial_id").on(t.memorialId)]),ele=et("memorial_likes",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),memorialId:ne("memorial_id").notNull().references(()=>Ps.id,{onDelete:"cascade"}),userId:ne("user_id").references(()=>Gs.id,{onDelete:"cascade"}),userName:C("user_name").notNull(),userEmail:C("user_email"),createdAt:Ce("created_at").defaultNow()},t=>[de("idx_memorial_likes_memorial_id").on(t.memorialId),de("idx_memorial_likes_user_id").on(t.userId)]),tle=et("memorial_comments",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),memorialId:ne("memorial_id").notNull().references(()=>Ps.id,{onDelete:"cascade"}),userId:ne("user_id").references(()=>Gs.id,{onDelete:"cascade"}),authorName:C("author_name").notNull(),authorEmail:C("author_email"),comment:C("comment").notNull(),parentCommentId:ne("parent_comment_id"),isApproved:lt("is_approved").default(!0),createdAt:Ce("created_at").defaultNow(),updatedAt:Ce("updated_at").defaultNow()},t=>[de("idx_memorial_comments_memorial_id").on(t.memorialId),de("idx_memorial_comments_user_id").on(t.userId),de("idx_memorial_comments_parent_id").on(t.parentCommentId)]),sle=et("memorial_condolence_reactions",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),memorialId:ne("memorial_id").notNull().references(()=>Ps.id,{onDelete:"cascade"}),reactionType:C("reaction_type").notNull(),userId:ne("user_id").references(()=>Gs.id,{onDelete:"set null"}),sessionId:ne("session_id"),userEmail:C("user_email"),userName:C("user_name"),createdAt:Ce("created_at").defaultNow()},t=>({memorialIdIndex:de("idx_memorial_condolence_reactions_memorial_id").on(t.memorialId),reactionTypeIndex:de("idx_memorial_condolence_reactions_type").on(t.reactionType),authenticatedUserUnique:m1("authenticated_user_reaction_unique").on(t.memorialId,t.reactionType,t.userId).where(Ke`${t.userId} IS NOT NULL`),anonymousUserUnique:m1("anonymous_user_reaction_unique").on(t.memorialId,t.reactionType,t.sessionId).where(Ke`${t.sessionId} IS NOT NULL`),identityCheck:vf("identity_check",Ke`(
      (user_id IS NOT NULL AND session_id IS NULL) OR
      (user_id IS NULL AND session_id IS NOT NULL)
    )`)})),rle=et("saved_memorials",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),userId:ne("user_id").notNull().references(()=>Gs.id,{onDelete:"cascade"}),memorialId:ne("memorial_id").notNull().references(()=>Ps.id,{onDelete:"cascade"}),relationshipCategory:C("relationship_category").notNull(),customCategory:C("custom_category"),notes:C("notes"),createdAt:Ce("created_at").defaultNow()},t=>[de("idx_saved_memorials_user_id").on(t.userId),de("idx_saved_memorials_memorial_id").on(t.memorialId),de("idx_saved_memorials_relationship").on(t.relationshipCategory)]),aU=et("memorial_live_streams",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),memorialId:ne("memorial_id").notNull().references(()=>Ps.id,{onDelete:"cascade"}),title:C("title").notNull(),description:C("description"),streamUrl:C("stream_url").notNull(),streamType:C("stream_type").notNull(),scheduledStartTime:Ce("scheduled_start_time").notNull(),scheduledEndTime:Ce("scheduled_end_time"),isLive:lt("is_live").default(!1),viewerCount:jt("viewer_count").default(0),recordingUrl:C("recording_url"),isPublic:lt("is_public").default(!0),requiresPassword:lt("requires_password").default(!1),password:C("password"),createdAt:Ce("created_at").defaultNow(),updatedAt:Ce("updated_at").defaultNow()},t=>[de("idx_memorial_live_streams_memorial_id").on(t.memorialId),de("idx_memorial_live_streams_start_time").on(t.scheduledStartTime)]),nle=et("memorial_live_stream_viewers",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),streamId:ne("stream_id").notNull().references(()=>aU.id,{onDelete:"cascade"}),userId:ne("user_id").references(()=>Gs.id,{onDelete:"set null"}),viewerName:C("viewer_name").notNull(),viewerEmail:C("viewer_email"),joinedAt:Ce("joined_at").defaultNow(),leftAt:Ce("left_at"),durationMinutes:jt("duration_minutes")},t=>[de("idx_memorial_live_stream_viewers_stream_id").on(t.streamId),de("idx_memorial_live_stream_viewers_user_id").on(t.userId)]),ale=et("scheduled_messages",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),memorialId:ne("memorial_id").notNull().references(()=>Ps.id,{onDelete:"cascade"}),recipientName:C("recipient_name").notNull(),recipientEmail:C("recipient_email"),eventType:C("event_type").notNull(),customEventName:C("custom_event_name"),eventDate:C("event_date"),sendTime:C("send_time").default("09:00"),message:C("message").notNull(),mediaUrl:C("media_url"),mediaType:C("media_type").default("text"),attachmentUrls:C("attachment_urls").array(),isRecurring:lt("is_recurring").default(!1),recurrenceInterval:C("recurrence_interval"),recurrenceCount:jt("recurrence_count"),recurrenceEndDate:Ce("recurrence_end_date"),nextSendDate:Ce("next_send_date"),lastSentAt:Ce("last_sent_at"),sentCount:jt("sent_count").default(0),status:C("status").default("pending"),isSent:lt("is_sent").default(!1),sentAt:Ce("sent_at"),deliveryStatus:C("delivery_status").default("pending"),deliveryError:C("delivery_error"),deliveryAttempts:jt("delivery_attempts").default(0),lastDeliveryAttempt:Ce("last_delivery_attempt"),createdAt:Ce("created_at").defaultNow(),updatedAt:Ce("updated_at").defaultNow()},t=>[de("idx_scheduled_messages_memorial_id").on(t.memorialId),de("idx_scheduled_messages_status").on(t.status),de("idx_scheduled_messages_event_date").on(t.eventDate),de("idx_scheduled_messages_next_send_date").on(t.nextSendDate),de("idx_scheduled_messages_delivery_status").on(t.deliveryStatus)]),iU=et("video_time_capsules",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),memorialId:ne("memorial_id").notNull().references(()=>Ps.id,{onDelete:"cascade"}),qrCodeId:ne("qr_code_id").references(()=>xj.id,{onDelete:"set null"}),title:C("title").notNull(),description:C("description"),videoUrl:C("video_url").notNull(),thumbnailUrl:C("thumbnail_url"),recipientName:C("recipient_name"),recipientRelationship:C("recipient_relationship"),milestoneType:C("milestone_type").notNull(),customMilestoneName:C("custom_milestone_name"),releaseDate:C("release_date").notNull(),releaseTime:C("release_time").default("00:00"),isRecurring:lt("is_recurring").default(!1),recurrenceInterval:C("recurrence_interval"),recurrenceEndDate:Ce("recurrence_end_date"),nextReleaseDate:Ce("next_release_date"),releasedCount:jt("released_count").default(0),status:C("status").default("scheduled"),isReleased:lt("is_released").default(!1),releasedAt:Ce("released_at"),isPublic:lt("is_public").default(!1),requiresQRScan:lt("requires_qr_scan").default(!1),viewCount:jt("view_count").default(0),uniqueViewers:jt("unique_viewers").default(0),lastViewedAt:Ce("last_viewed_at"),createdAt:Ce("created_at").defaultNow(),updatedAt:Ce("updated_at").defaultNow()},t=>[de("idx_video_time_capsules_memorial_id").on(t.memorialId),de("idx_video_time_capsules_qr_code_id").on(t.qrCodeId),de("idx_video_time_capsules_status").on(t.status),de("idx_video_time_capsules_release_date").on(t.releaseDate),de("idx_video_time_capsules_next_release_date").on(t.nextReleaseDate),de("idx_video_time_capsules_is_released").on(t.isReleased)]),ile=et("video_time_capsule_views",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),capsuleId:ne("capsule_id").notNull().references(()=>iU.id,{onDelete:"cascade"}),userId:ne("user_id").references(()=>Gs.id,{onDelete:"set null"}),viewerName:C("viewer_name"),viewerEmail:C("viewer_email"),viewDuration:jt("view_duration"),completedVideo:lt("completed_video").default(!1),viewedAt:Ce("viewed_at").defaultNow()},t=>[de("idx_video_time_capsule_views_capsule_id").on(t.capsuleId),de("idx_video_time_capsule_views_user_id").on(t.userId),de("idx_video_time_capsule_views_viewed_at").on(t.viewedAt)]),oU=et("fundraisers",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),memorialId:ne("memorial_id").notNull().references(()=>Ps.id,{onDelete:"cascade"}),title:C("title").notNull(),description:C("description"),goalAmount:Xt("goal_amount",{precision:10,scale:2}).notNull(),currentAmount:Xt("current_amount",{precision:10,scale:2}).default("0"),charityName:C("charity_name"),platformFeePercentage:Xt("platform_fee_percentage",{precision:5,scale:2}).notNull().default("3.00"),expenseBreakdown:xa("expense_breakdown").$type(),createdAt:Ce("created_at").defaultNow()},t=>[de("idx_fundraisers_memorial_id").on(t.memorialId)]),ole=et("donations",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),fundraiserId:ne("fundraiser_id").notNull().references(()=>oU.id,{onDelete:"cascade"}),donorName:C("donor_name").notNull(),amount:Xt("amount",{precision:10,scale:2}).notNull(),platformFeeAmount:Xt("platform_fee_amount",{precision:10,scale:2}).notNull().default("0"),isAnonymous:lt("is_anonymous").default(!1),stripePaymentId:C("stripe_payment_id"),createdAt:Ce("created_at").defaultNow()},t=>[de("idx_donations_fundraiser_id").on(t.fundraiserId),de("idx_donations_created_at").on(t.createdAt)]),B4=et("celebrity_memorials",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),name:C("name").notNull(),title:C("title").notNull(),biography:C("biography"),imageUrl:C("image_url"),charityName:C("charity_name").notNull(),donationAmount:Xt("donation_amount",{precision:10,scale:2}).notNull().default("10"),platformPercentage:jt("platform_percentage").notNull().default(5),fanCount:jt("fan_count").default(0),professionCategory:C("profession_category"),subProfession:C("sub_profession"),achievements:hs("achievements").$type(),awards:hs("awards").$type(),verificationStatus:C("verification_status").default("pending"),verifiedBy:C("verified_by"),verificationDate:Ce("verification_date"),verificationDocuments:hs("verification_documents").$type(),submitterName:C("submitter_name"),submitterEmail:C("submitter_email"),submitterRelationship:C("submitter_relationship"),submitterPhone:C("submitter_phone"),memorialTemplate:C("memorial_template"),customStickers:hs("custom_stickers").$type(),themeColors:hs("theme_colors").$type(),birthDate:C("birth_date"),deathDate:C("death_date"),createdAt:Ce("created_at").defaultNow()}),lle=et("celebrity_donations",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),celebrityMemorialId:ne("celebrity_memorial_id").notNull().references(()=>B4.id,{onDelete:"cascade"}),email:C("email").notNull(),amount:Xt("amount",{precision:10,scale:2}).notNull(),charityAmount:Xt("charity_amount",{precision:10,scale:2}).notNull(),platformAmount:Xt("platform_amount",{precision:10,scale:2}).notNull(),stripePaymentId:C("stripe_payment_id"),createdAt:Ce("created_at").defaultNow()},t=>[de("idx_celebrity_donations_memorial_id").on(t.celebrityMemorialId),de("idx_celebrity_donations_created_at").on(t.createdAt)]),cle=et("celebrity_fan_content",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),celebrityMemorialId:ne("celebrity_memorial_id").notNull().references(()=>B4.id,{onDelete:"cascade"}),contentType:C("content_type").notNull(),title:C("title").notNull(),description:C("description"),mediaUrl:C("media_url").notNull(),thumbnailUrl:C("thumbnail_url"),isVideoMessage:lt("is_video_message").default(!1),uploadedByEstate:lt("uploaded_by_estate").default(!0),uploaderName:C("uploader_name"),uploaderEmail:C("uploader_email"),viewCount:jt("view_count").default(0),isPublished:lt("is_published").default(!1),createdAt:Ce("created_at").defaultNow()},t=>[de("idx_celebrity_fan_content_memorial_id").on(t.celebrityMemorialId),de("idx_celebrity_fan_content_is_published").on(t.isPublished),de("idx_celebrity_fan_content_content_type").on(t.contentType)]),dle=et("grief_support",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),memorialId:ne("memorial_id").notNull().unique().references(()=>Ps.id,{onDelete:"cascade"}),familyContact:C("family_contact"),pastoralContact:C("pastoral_contact"),customContacts:hs("custom_contacts").$type()}),ule=et("legacy_events",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),memorialId:ne("memorial_id").notNull().references(()=>Ps.id,{onDelete:"cascade"}),title:C("title").notNull(),eventType:C("event_type").notNull(),description:C("description"),eventDate:C("event_date").notNull(),eventTime:C("event_time"),location:C("location"),attendeeCount:jt("attendee_count").default(0),createdAt:Ce("created_at").defaultNow()},t=>[de("idx_legacy_events_memorial_id").on(t.memorialId)]),mle=et("music_playlists",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),memorialId:ne("memorial_id").notNull().unique().references(()=>Ps.id,{onDelete:"cascade"}),tracks:hs("tracks").$type().notNull()}),hle=et("essential_workers_memorials",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),fullName:C("full_name").notNull(),profession:C("profession").notNull(),category:C("category").notNull(),department:C("department"),yearsOfService:jt("years_of_service"),biography:C("biography"),imageUrl:C("image_url"),lineOfDutyDeath:lt("line_of_duty_death").default(!1),honors:hs("honors").$type(),birthDate:C("birth_date"),deathDate:C("death_date"),fontFamily:C("font_family"),symbol:C("symbol"),isPublic:lt("is_public").default(!0),rank:C("rank"),badgeNumber:C("badge_number"),unit:C("unit"),serviceBranch:C("service_branch"),specialization:C("specialization"),precinct:C("precinct"),station:C("station"),deployments:hs("deployments").$type(),certifications:C("certifications").array(),createdAt:Ce("created_at").defaultNow()},t=>[de("idx_essential_workers_category").on(t.category),de("idx_essential_workers_is_public").on(t.isPublic),de("idx_essential_workers_created_at").on(t.createdAt)]),fle=et("hood_memorials",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),name:C("name").notNull(),nickname:C("nickname"),birthDate:C("birth_date").notNull(),deathDate:C("death_date").notNull(),biography:C("biography"),epitaph:C("epitaph"),imageUrl:C("image_url"),neighborhoodName:C("neighborhood_name").notNull(),neighborhoodLogoUrl:C("neighborhood_logo_url"),clubName:C("club_name"),clubLogoUrl:C("club_logo_url"),city:C("city").notNull(),state:C("state").notNull(),role:C("role"),communityImpact:C("community_impact"),legendStatus:C("legend_status"),fontFamily:C("font_family"),symbol:C("symbol"),isPublic:lt("is_public").default(!0),creatorEmail:C("creator_email"),createdAt:Ce("created_at").defaultNow()},t=>[de("idx_hood_memorials_neighborhood").on(t.neighborhoodName),de("idx_hood_memorials_city_state").on(t.city,t.state),de("idx_hood_memorials_is_public").on(t.isPublic),de("idx_hood_memorials_created_at").on(t.createdAt)]),ple=et("self_written_obituaries",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),userEmail:C("user_email").notNull().unique(),fullName:C("full_name").notNull(),birthDate:C("birth_date"),biography:C("biography"),epitaph:C("epitaph"),finalWordsText:C("final_words_text"),finalWordsVideoUrl:C("final_words_video_url"),fontFamily:C("font_family"),symbol:C("symbol"),emergencyContactName:C("emergency_contact_name"),emergencyContactEmail:C("emergency_contact_email"),emergencyContactPhone:C("emergency_contact_phone"),releaseInstructions:C("release_instructions"),isActivated:lt("is_activated").default(!1),activatedAt:Ce("activated_at"),createdAt:Ce("created_at").defaultNow(),updatedAt:Ce("updated_at").defaultNow()}),xle=et("neighborhoods",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),name:C("name").notNull(),city:C("city").notNull(),state:C("state").notNull(),description:C("description"),logoUrl:C("logo_url"),backgroundImage:C("background_image"),foundedYear:C("founded_year"),population:jt("population"),landmarks:C("landmarks").array(),notableFeatures:C("notable_features"),isPublic:lt("is_public").default(!0),creatorEmail:C("creator_email"),createdAt:Ce("created_at").defaultNow(),updatedAt:Ce("updated_at").defaultNow()},t=>[de("idx_neighborhoods_state").on(t.state),de("idx_neighborhoods_city").on(t.city),de("idx_neighborhoods_creator_email").on(t.creatorEmail),m1("idx_neighborhoods_unique_name").on(t.name,t.city,t.state)]),gle=et("alumni_memorials",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),memorialId:ne("memorial_id").references(()=>Ps.id,{onDelete:"cascade"}).unique(),fullName:C("full_name").notNull(),preferredName:C("preferred_name"),birthDate:C("birth_date").notNull(),deathDate:C("death_date").notNull(),biography:C("biography"),epitaph:C("epitaph"),heroImageUrl:C("hero_image_url"),schoolName:C("school_name").notNull(),campusLocation:C("campus_location"),graduationYear:C("graduation_year"),degreeType:C("degree_type"),major:C("major"),schoolLogoUrl:C("school_logo_url"),activities:hs("activities").$type(),notableAchievements:hs("notable_achievements").$type(),classNotes:C("class_notes"),isPublic:lt("is_public").default(!0),creatorEmail:C("creator_email"),createdAt:Ce("created_at").defaultNow()},t=>[de("idx_alumni_memorials_school_name").on(t.schoolName),de("idx_alumni_memorials_graduation_year").on(t.graduationYear),de("idx_alumni_memorials_major").on(t.major),de("idx_alumni_memorials_is_public").on(t.isPublic),de("idx_alumni_memorials_created_at").on(t.createdAt)]),lU=et("prison_facilities",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),name:C("name").notNull(),state:C("state").notNull(),facilityCode:C("facility_code").notNull().unique(),serviceProvider:C("service_provider"),feePerSession:Xt("fee_per_session",{precision:10,scale:2}),contactEmail:C("contact_email"),contactPhone:C("contact_phone"),isActive:lt("is_active").default(!0),createdAt:Ce("created_at").defaultNow()},t=>[de("idx_prison_facilities_is_active").on(t.isActive),de("idx_prison_facilities_state").on(t.state)]),zg=et("prison_access_requests",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),memorialId:ne("memorial_id").notNull().references(()=>Ps.id,{onDelete:"cascade"}),facilityId:ne("facility_id").notNull().references(()=>lU.id),inmateFirstName:C("inmate_first_name").notNull(),inmateLastName:C("inmate_last_name").notNull(),inmateDocNumber:C("inmate_doc_number").notNull(),relationshipToDeceased:C("relationship_to_deceased").notNull(),requestedByName:C("requested_by_name").notNull(),requestedByEmail:C("requested_by_email").notNull(),requestedByPhone:C("requested_by_phone"),relationshipProofUrl:C("relationship_proof_url"),status:C("status").notNull().default("pending"),adminNotes:C("admin_notes"),createdAt:Ce("created_at").defaultNow(),updatedAt:Ce("updated_at").defaultNow()},t=>[de("idx_prison_access_memorial_id").on(t.memorialId),de("idx_prison_access_status").on(t.status),de("idx_prison_access_facility_id").on(t.facilityId),de("idx_prison_access_created_at").on(t.createdAt)]),vle=et("prison_verifications",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),requestId:ne("request_id").notNull().references(()=>zg.id,{onDelete:"cascade"}),verificationType:C("verification_type").notNull(),verifiedBy:C("verified_by").notNull(),verificationData:hs("verification_data").$type(),status:C("status").notNull(),notes:C("notes"),createdAt:Ce("created_at").defaultNow()},t=>[de("idx_prison_verifications_request_id").on(t.requestId)]),yle=et("prison_payments",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),requestId:ne("request_id").notNull().references(()=>zg.id,{onDelete:"cascade"}),amount:Xt("amount",{precision:10,scale:2}).notNull(),paymentMethod:C("payment_method").notNull(),transactionId:C("transaction_id"),payerName:C("payer_name").notNull(),payerEmail:C("payer_email").notNull(),status:C("status").notNull().default("pending"),paidAt:Ce("paid_at"),createdAt:Ce("created_at").defaultNow()},t=>[de("idx_prison_payments_request_id").on(t.requestId),de("idx_prison_payments_status").on(t.status)]),cU=et("prison_access_sessions",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),requestId:ne("request_id").notNull().references(()=>zg.id,{onDelete:"cascade"}),memorialId:ne("memorial_id").notNull().references(()=>Ps.id,{onDelete:"cascade"}),accessToken:C("access_token").notNull().unique(),expiresAt:Ce("expires_at").notNull(),isActive:lt("is_active").default(!0),lastAccessedAt:Ce("last_accessed_at"),createdAt:Ce("created_at").defaultNow()},t=>[de("idx_prison_sessions_request_id").on(t.requestId),de("idx_prison_sessions_memorial_id").on(t.memorialId),de("idx_prison_sessions_expires_at").on(t.expiresAt)]),jle=et("prison_audit_logs",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),requestId:ne("request_id").references(()=>zg.id,{onDelete:"set null"}),sessionId:ne("session_id").references(()=>cU.id,{onDelete:"set null"}),action:C("action").notNull(),performedBy:C("performed_by").notNull(),ipAddress:C("ip_address"),userAgent:C("user_agent"),metadata:hs("metadata").$type(),createdAt:Ce("created_at").defaultNow()}),Uf=et("byus_users",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),email:ne("email").notNull().unique(),passwordHash:C("password_hash").notNull(),firstName:C("first_name").notNull(),lastName:C("last_name").notNull(),phone:ne("phone"),organization:C("organization"),role:C("role").default("user"),isVerified:lt("is_verified").default(!1),verificationToken:C("verification_token"),resetToken:C("reset_token"),resetTokenExpiry:Ce("reset_token_expiry"),createdAt:Ce("created_at").defaultNow(),updatedAt:Ce("updated_at").defaultNow()},t=>[de("idx_byus_users_email").on(t.email),de("idx_byus_users_role").on(t.role)]),zf=et("byus_mediations",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),creatorId:ne("creator_id").notNull().references(()=>Uf.id,{onDelete:"cascade"}),title:C("title").notNull(),description:C("description").notNull(),category:C("category").notNull(),status:C("status").notNull().default("draft"),party1Name:C("party1_name").notNull(),party1Email:C("party1_email"),party1Perspective:C("party1_perspective"),party2Name:C("party2_name").notNull(),party2Email:C("party2_email"),party2Perspective:C("party2_perspective"),desiredOutcome:C("desired_outcome"),additionalContext:C("additional_context"),aiAnalysisRequested:lt("ai_analysis_requested").default(!1),aiAnalysisCompleted:lt("ai_analysis_completed").default(!1),confidentialityLevel:C("confidentiality_level").default("standard"),professionalReviewStatus:C("professional_review_status"),createdAt:Ce("created_at").defaultNow(),updatedAt:Ce("updated_at").defaultNow()},t=>[de("idx_byus_mediations_creator_id").on(t.creatorId),de("idx_byus_mediations_status").on(t.status),de("idx_byus_mediations_category").on(t.category),de("idx_byus_mediations_review_status").on(t.professionalReviewStatus)]),ble=et("byus_analysis",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),mediationId:ne("mediation_id").notNull().references(()=>zf.id,{onDelete:"cascade"}),aiProvider:C("ai_provider").default("openai"),fairnessScore:jt("fairness_score"),party1BiasScore:jt("party1_bias_score"),party2BiasScore:jt("party2_bias_score"),suggestedSolution:C("suggested_solution"),keyPoints:xa("key_points").$type().default([]),compromiseAreas:xa("compromise_areas").$type().default([]),legalConsiderations:C("legal_considerations"),emotionalFactors:xa("emotional_factors").$type().default([]),nextSteps:xa("next_steps").$type().default([]),confidence:jt("confidence"),analysisVersion:jt("analysis_version").default(1),createdAt:Ce("created_at").defaultNow()},t=>[de("idx_byus_analysis_mediation_id").on(t.mediationId),de("idx_byus_analysis_fairness_score").on(t.fairnessScore)]),Nle=et("byus_mediation_history",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),mediationId:ne("mediation_id").notNull().references(()=>zf.id,{onDelete:"cascade"}),userId:ne("user_id").references(()=>Uf.id,{onDelete:"set null"}),action:C("action").notNull(),description:C("description"),metadata:xa("metadata").$type().default({}),createdAt:Ce("created_at").defaultNow()},t=>[de("idx_byus_history_mediation_id").on(t.mediationId),de("idx_byus_history_user_id").on(t.userId),de("idx_byus_history_action").on(t.action)]),wle=et("byus_mediation_comments",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),mediationId:ne("mediation_id").notNull().references(()=>zf.id,{onDelete:"cascade"}),userId:ne("user_id").notNull().references(()=>Uf.id,{onDelete:"cascade"}),comment:C("comment").notNull(),isPrivate:lt("is_private").default(!1),createdAt:Ce("created_at").defaultNow()},t=>[de("idx_byus_comments_mediation_id").on(t.mediationId),de("idx_byus_comments_user_id").on(t.userId)]),gj=et("byus_health_profiles",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),pseudonymousId:ne("pseudonymous_id").notNull().unique(),demographicHash:C("demographic_hash").notNull(),ageGroup:C("age_group").notNull(),region:C("region"),createdAt:Ce("created_at").defaultNow(),updatedAt:Ce("updated_at").defaultNow()},t=>[de("idx_byus_health_profiles_pseudonymous_id").on(t.pseudonymousId),de("idx_byus_health_profiles_age_group").on(t.ageGroup),de("idx_byus_health_profiles_region").on(t.region),de("idx_byus_health_profiles_created_at").on(t.createdAt)]),_le=et("byus_diagnoses",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),healthProfileId:ne("health_profile_id").notNull().references(()=>gj.id,{onDelete:"cascade"}),diagnosisCode:C("diagnosis_code").notNull(),severity:C("severity").notNull(),reportedDate:Ce("reported_date").notNull(),isActive:lt("is_active").default(!0),createdAt:Ce("created_at").defaultNow()},t=>[de("idx_byus_diagnoses_health_profile_id").on(t.healthProfileId),de("idx_byus_diagnoses_diagnosis_code").on(t.diagnosisCode),de("idx_byus_diagnoses_severity").on(t.severity),de("idx_byus_diagnoses_is_active").on(t.isActive),de("idx_byus_diagnoses_reported_date").on(t.reportedDate)]),Sle=et("byus_prescriptions",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),healthProfileId:ne("health_profile_id").notNull().references(()=>gj.id,{onDelete:"cascade"}),medicationCategory:C("medication_category").notNull(),startDate:Ce("start_date").notNull(),endDate:Ce("end_date"),effectiveness:jt("effectiveness"),sideEffectsSeverity:jt("side_effects_severity"),createdAt:Ce("created_at").defaultNow()},t=>[de("idx_byus_prescriptions_health_profile_id").on(t.healthProfileId),de("idx_byus_prescriptions_medication_category").on(t.medicationCategory),de("idx_byus_prescriptions_start_date").on(t.startDate),de("idx_byus_prescriptions_end_date").on(t.endDate),vf("effectiveness_range",Ke`effectiveness >= 0 AND effectiveness <= 100`),vf("side_effects_severity_range",Ke`side_effects_severity >= 0 AND side_effects_severity <= 100`)]),dU=et("byus_crisis_events",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),healthProfileId:ne("health_profile_id").notNull().references(()=>gj.id,{onDelete:"cascade"}),eventType:C("event_type").notNull(),severity:jt("severity").notNull(),triggerCategory:C("trigger_category"),interventionUsed:C("intervention_used"),outcome:C("outcome").notNull(),safeWordUsed:lt("safe_word_used").default(!1),createdAt:Ce("created_at").defaultNow()},t=>[de("idx_byus_crisis_events_health_profile_id").on(t.healthProfileId),de("idx_byus_crisis_events_event_type").on(t.eventType),de("idx_byus_crisis_events_severity").on(t.severity),de("idx_byus_crisis_events_outcome").on(t.outcome),de("idx_byus_crisis_events_created_at").on(t.createdAt),vf("severity_range",Ke`severity >= 1 AND severity <= 10`)]),Cle=et("byus_crisis_companion",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),title:C("title").notNull(),message:C("message").notNull(),category:C("category").notNull(),audioUrl:C("audio_url"),priority:jt("priority").notNull().default(0),isActive:lt("is_active").default(!0),createdAt:Ce("created_at").defaultNow()},t=>[de("idx_byus_crisis_companion_category").on(t.category),de("idx_byus_crisis_companion_priority").on(t.priority),de("idx_byus_crisis_companion_is_active").on(t.isActive)]),uU=et("byus_therapists",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),userId:ne("user_id").notNull().references(()=>Uf.id,{onDelete:"cascade"}),licenseNumber:C("license_number").notNull(),specializations:xa("specializations").$type().notNull().default([]),availability:xa("availability").$type().default({}),isVerified:lt("is_verified").default(!1),canReviewCrisis:lt("can_review_crisis").default(!1),responseTime:C("response_time").notNull().default("24hour"),createdAt:Ce("created_at").defaultNow()},t=>[de("idx_byus_therapists_user_id").on(t.userId),de("idx_byus_therapists_is_verified").on(t.isVerified),de("idx_byus_therapists_can_review_crisis").on(t.canReviewCrisis),de("idx_byus_therapists_response_time").on(t.responseTime)]),kle=et("byus_professional_reviews",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),mediationId:ne("mediation_id").references(()=>zf.id,{onDelete:"cascade"}),crisisEventId:ne("crisis_event_id").references(()=>dU.id,{onDelete:"cascade"}),therapistId:ne("therapist_id").notNull().references(()=>uU.id,{onDelete:"cascade"}),reviewType:C("review_type").notNull(),originalContent:C("original_content").notNull(),professionalNotes:C("professional_notes").notNull(),recommendations:xa("recommendations").$type().default({}),approvalStatus:C("approval_status").notNull().default("pending"),reviewedAt:Ce("reviewed_at"),createdAt:Ce("created_at").defaultNow()},t=>[de("idx_byus_professional_reviews_mediation_id").on(t.mediationId),de("idx_byus_professional_reviews_crisis_event_id").on(t.crisisEventId),de("idx_byus_professional_reviews_therapist_id").on(t.therapistId),de("idx_byus_professional_reviews_review_type").on(t.reviewType),de("idx_byus_professional_reviews_approval_status").on(t.approvalStatus),vf("review_target_check",Ke`
    (mediation_id IS NOT NULL AND crisis_event_id IS NULL) OR
    (mediation_id IS NULL AND crisis_event_id IS NOT NULL) OR
    (review_type = 'diagnosis')
  `)]),mU=et("advertisements",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),companyName:C("company_name").notNull(),productName:C("product_name").notNull(),category:C("category").notNull(),description:C("description").notNull(),imageUrl:C("image_url"),contactEmail:C("contact_email").notNull(),contactPhone:C("contact_phone"),websiteUrl:C("website_url"),pricing:C("pricing"),commissionPercentage:jt("commission_percentage"),referralCode:C("referral_code").unique(),status:C("status").notNull().default("pending"),isActive:lt("is_active").default(!0),impressions:jt("impressions").default(0),clicks:jt("clicks").default(0),totalSales:jt("total_sales").default(0),totalRevenue:Xt("total_revenue",{precision:10,scale:2}).default("0"),totalPlatformFees:Xt("total_platform_fees",{precision:10,scale:2}).default("0"),createdAt:Ce("created_at").defaultNow(),expiresAt:Ce("expires_at")},t=>[de("idx_advertisements_category").on(t.category),de("idx_advertisements_status").on(t.status),de("idx_advertisements_is_active").on(t.isActive),de("idx_advertisements_created_at").on(t.createdAt)]),Ale=et("advertisement_sales",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),advertisementId:ne("advertisement_id").notNull().references(()=>mU.id,{onDelete:"cascade"}),referralCode:C("referral_code").notNull(),saleAmount:Xt("sale_amount",{precision:10,scale:2}).notNull(),platformFeePercentage:jt("platform_fee_percentage").notNull(),platformFeeAmount:Xt("platform_fee_amount",{precision:10,scale:2}).notNull(),customerEmail:C("customer_email"),orderReference:C("order_reference"),createdAt:Ce("created_at").defaultNow()},t=>[de("idx_advertisement_sales_ad_id").on(t.advertisementId),de("idx_advertisement_sales_created_at").on(t.createdAt)]),vj=et("funeral_home_partners",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),businessName:C("business_name").notNull(),contactName:C("contact_name").notNull(),email:C("email").notNull().unique(),phone:C("phone").notNull(),address:C("address"),city:C("city"),state:C("state"),zipCode:C("zip_code"),commissionRate:Xt("commission_rate",{precision:5,scale:2}).notNull().default("3.00"),referralCode:C("referral_code").notNull().unique(),bankAccountName:C("bank_account_name"),bankAccountNumber:C("bank_account_number"),bankRoutingNumber:C("bank_routing_number"),isActive:lt("is_active").default(!0),createdAt:Ce("created_at").defaultNow()},t=>[de("idx_funeral_partners_is_active").on(t.isActive),de("idx_funeral_partners_state").on(t.state)]),hU=et("partner_referrals",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),partnerId:ne("partner_id").notNull().references(()=>vj.id,{onDelete:"cascade"}),memorialId:ne("memorial_id").notNull().references(()=>Ps.id,{onDelete:"cascade"}),referralCode:C("referral_code").notNull(),createdAt:Ce("created_at").defaultNow()},t=>[de("idx_partner_referrals_partner_id").on(t.partnerId),de("idx_partner_referrals_memorial_id").on(t.memorialId)]),Ple=et("partner_commissions",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),partnerId:ne("partner_id").notNull().references(()=>vj.id,{onDelete:"cascade"}),referralId:ne("referral_id").notNull().references(()=>hU.id,{onDelete:"cascade"}),transactionType:C("transaction_type").notNull(),transactionId:ne("transaction_id").notNull(),transactionAmount:Xt("transaction_amount",{precision:10,scale:2}).notNull(),commissionAmount:Xt("commission_amount",{precision:10,scale:2}).notNull(),status:C("status").notNull().default("pending"),createdAt:Ce("created_at").defaultNow()},t=>[de("idx_partner_commissions_partner_id").on(t.partnerId),de("idx_partner_commissions_status").on(t.status)]),Ele=et("partner_payouts",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),partnerId:ne("partner_id").notNull().references(()=>vj.id,{onDelete:"cascade"}),amount:Xt("amount",{precision:10,scale:2}).notNull(),periodStart:Ce("period_start").notNull(),periodEnd:Ce("period_end").notNull(),status:C("status").notNull().default("pending"),paidAt:Ce("paid_at"),paymentMethod:C("payment_method"),transactionId:C("transaction_id"),notes:C("notes"),createdAt:Ce("created_at").defaultNow()},t=>[de("idx_partner_payouts_partner_id").on(t.partnerId),de("idx_partner_payouts_status").on(t.status)]),yj=et("flower_shop_partners",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),businessName:C("business_name").notNull(),contactName:C("contact_name").notNull(),email:C("email").notNull().unique(),phone:C("phone").notNull(),address:C("address").notNull(),city:C("city").notNull(),state:C("state").notNull(),zipCode:C("zip_code").notNull(),websiteUrl:C("website_url"),commissionRate:Xt("commission_rate",{precision:5,scale:2}).notNull().default("20.00"),specialties:C("specialties").array().default(Ke`ARRAY[]::text[]`),rating:Xt("rating",{precision:3,scale:2}).default("0.00"),bankAccountName:C("bank_account_name"),bankAccountNumber:C("bank_account_number"),bankRoutingNumber:C("bank_routing_number"),isActive:lt("is_active").default(!0),latitude:Xt("latitude",{precision:10,scale:8}),longitude:Xt("longitude",{precision:11,scale:8}),createdAt:Ce("created_at").defaultNow()},t=>[de("idx_flower_shops_city").on(t.city),de("idx_flower_shops_state").on(t.state),de("idx_flower_shops_is_active").on(t.isActive)]),fU=et("flower_orders",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),shopId:ne("shop_id").notNull().references(()=>yj.id,{onDelete:"cascade"}),memorialId:ne("memorial_id").references(()=>Ps.id,{onDelete:"set null"}),customerName:C("customer_name").notNull(),customerEmail:C("customer_email"),customerPhone:C("customer_phone"),recipientName:C("recipient_name").notNull(),deliveryAddress:C("delivery_address").notNull(),deliveryDate:C("delivery_date"),deliveryTime:C("delivery_time"),arrangementType:C("arrangement_type"),specialInstructions:C("special_instructions"),orderAmount:Xt("order_amount",{precision:10,scale:2}).notNull(),commissionAmount:Xt("commission_amount",{precision:10,scale:2}).notNull(),status:C("status").notNull().default("pending"),orderMethod:C("order_method").notNull().default("referral"),externalOrderId:C("external_order_id"),completedAt:Ce("completed_at"),createdAt:Ce("created_at").defaultNow()},t=>[de("idx_flower_orders_shop_id").on(t.shopId),de("idx_flower_orders_memorial_id").on(t.memorialId),de("idx_flower_orders_status").on(t.status),de("idx_flower_orders_created_at").on(t.createdAt)]),Tle=et("flower_commissions",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),shopId:ne("shop_id").notNull().references(()=>yj.id,{onDelete:"cascade"}),orderId:ne("order_id").notNull().references(()=>fU.id,{onDelete:"cascade"}),orderAmount:Xt("order_amount",{precision:10,scale:2}).notNull(),commissionAmount:Xt("commission_amount",{precision:10,scale:2}).notNull(),commissionRate:Xt("commission_rate",{precision:5,scale:2}).notNull(),status:C("status").notNull().default("pending"),approvedAt:Ce("approved_at"),createdAt:Ce("created_at").defaultNow()},t=>[de("idx_flower_commissions_shop_id").on(t.shopId),de("idx_flower_commissions_status").on(t.status)]),Mle=et("flower_payouts",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),shopId:ne("shop_id").notNull().references(()=>yj.id,{onDelete:"cascade"}),amount:Xt("amount",{precision:10,scale:2}).notNull(),periodStart:Ce("period_start").notNull(),periodEnd:Ce("period_end").notNull(),status:C("status").notNull().default("pending"),paidAt:Ce("paid_at"),paymentMethod:C("payment_method"),transactionId:C("transaction_id"),notes:C("notes"),createdAt:Ce("created_at").defaultNow()},t=>[de("idx_flower_payouts_shop_id").on(t.shopId),de("idx_flower_payouts_status").on(t.status)]),pU=et("funeral_programs",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),memorialId:ne("memorial_id").notNull().references(()=>Ps.id,{onDelete:"cascade"}).unique(),serviceDate:C("service_date"),serviceTime:C("service_time"),serviceName:C("service_name").default("Celebration of Life"),serviceLocation:C("service_location"),serviceAddress:C("service_address"),welcomeMessage:C("welcome_message"),closingMessage:C("closing_message"),survivedBy:C("survived_by"),predeceased:C("predeceased"),pallbearers:C("pallbearers"),honoraryPallbearers:C("honorary_pallbearers"),acknowledgments:C("acknowledgments"),specialThanks:C("special_thanks"),repastLocation:C("repast_location"),repastAddress:C("repast_address"),coverImageUrl:C("cover_image_url"),themeColor:C("theme_color"),backgroundAudioUrl:C("background_audio_url"),enableBluetoothAudio:lt("enable_bluetooth_audio").default(!1),bluetoothDeviceName:C("bluetooth_device_name"),createdAt:Ce("created_at").defaultNow(),updatedAt:Ce("updated_at").defaultNow()},t=>[de("idx_funeral_programs_memorial_id").on(t.memorialId)]),Lle=et("program_items",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),programId:ne("program_id").notNull().references(()=>pU.id,{onDelete:"cascade"}),orderIndex:jt("order_index").notNull(),itemType:C("item_type").notNull(),title:C("title").notNull(),description:C("description"),performedBy:C("performed_by"),lyrics:C("lyrics"),content:C("content"),duration:C("duration"),audioUrl:C("audio_url"),audioType:C("audio_type"),createdAt:Ce("created_at").defaultNow()},t=>[de("idx_program_items_program_id").on(t.programId),de("idx_program_items_order").on(t.orderIndex)]),Dle=et("page_views",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),path:C("path").notNull(),userId:ne("user_id"),sessionId:C("session_id"),userAgent:C("user_agent"),referrer:C("referrer"),createdAt:Ce("created_at").defaultNow()},t=>[de("idx_page_views_path").on(t.path),de("idx_page_views_user_id").on(t.userId),de("idx_page_views_created_at").on(t.createdAt)]),Ile=et("analytics_events",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),eventName:C("event_name").notNull(),eventCategory:C("event_category"),eventLabel:C("event_label"),eventValue:jt("event_value"),userId:ne("user_id"),sessionId:C("session_id"),metadata:hs("metadata"),createdAt:Ce("created_at").defaultNow()},t=>[de("idx_analytics_events_name").on(t.eventName),de("idx_analytics_events_category").on(t.eventCategory),de("idx_analytics_events_user_id").on(t.userId),de("idx_analytics_events_created_at").on(t.createdAt)]),Rle=et("push_tokens",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),memorialId:ne("memorial_id").notNull().references(()=>Ps.id,{onDelete:"cascade"}),token:C("token").notNull().unique(),platform:C("platform").notNull(),createdAt:Ce("created_at").defaultNow()}),xU=et("memorial_events",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),memorialId:ne("memorial_id").notNull().references(()=>Ps.id,{onDelete:"cascade"}),eventType:C("event_type").notNull(),title:C("title").notNull(),description:C("description"),eventDate:Ce("event_date").notNull(),eventTime:C("event_time"),location:C("location"),address:C("address"),coordinates:hs("coordinates").$type(),organizer:C("organizer"),contactEmail:C("contact_email"),contactPhone:C("contact_phone"),isPublic:lt("is_public").default(!0),sendReminders:lt("send_reminders").default(!0),createdAt:Ce("created_at").defaultNow(),updatedAt:Ce("updated_at").defaultNow()},t=>[de("idx_memorial_events_memorial_id").on(t.memorialId),de("idx_memorial_events_event_date").on(t.eventDate),de("idx_memorial_events_event_type").on(t.eventType)]),Fle=et("memorial_event_rsvps",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),eventId:ne("event_id").notNull().references(()=>xU.id,{onDelete:"cascade"}),name:C("name").notNull(),email:C("email"),phone:C("phone"),attendeeCount:jt("attendee_count").default(1),response:C("response").notNull(),message:C("message"),createdAt:Ce("created_at").defaultNow()},t=>[de("idx_memorial_event_rsvps_event_id").on(t.eventId)]),Ole=et("memorial_documentaries",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),memorialId:ne("memorial_id").notNull().references(()=>Ps.id,{onDelete:"cascade"}),title:C("title").notNull(),description:C("description"),videoUrl:C("video_url").notNull(),thumbnailUrl:C("thumbnail_url"),duration:jt("duration"),chapters:hs("chapters").$type(),captions:C("captions"),isPublic:lt("is_public").default(!0),viewCount:jt("view_count").default(0),createdBy:ne("created_by").references(()=>Gs.id),createdAt:Ce("created_at").defaultNow(),updatedAt:Ce("updated_at").defaultNow()},t=>[de("idx_documentaries_memorial_id").on(t.memorialId),de("idx_documentaries_created_by").on(t.createdBy)]),$le=et("support_articles",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),category:C("category").notNull(),title:C("title").notNull(),content:C("content").notNull(),tags:C("tags").array(),isPublished:lt("is_published").default(!0),viewCount:jt("view_count").default(0),helpfulCount:jt("helpful_count").default(0),sortOrder:jt("sort_order").default(0),createdAt:Ce("created_at").defaultNow(),updatedAt:Ce("updated_at").defaultNow()}),Ble=et("support_requests",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),userId:ne("user_id").references(()=>Gs.id,{onDelete:"set null"}),category:C("category").notNull(),subject:C("subject").notNull(),description:C("description").notNull(),status:C("status").default("open"),priority:C("priority").default("normal"),assignedTo:ne("assigned_to").references(()=>Gs.id,{onDelete:"set null"}),email:C("email").notNull(),name:C("name").notNull(),phone:C("phone"),memorialId:ne("memorial_id").references(()=>Ps.id,{onDelete:"set null"}),isPartnerRequest:lt("is_partner_request").default(!1),partnerType:C("partner_type"),partnerAccountId:C("partner_account_id"),resolution:C("resolution"),resolvedAt:Ce("resolved_at"),createdAt:Ce("created_at").defaultNow(),updatedAt:Ce("updated_at").defaultNow()}),Ule=et("grief_resources",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),title:C("title").notNull(),description:C("description").notNull(),resourceType:C("resource_type").notNull(),category:C("category").notNull(),url:C("url"),phoneNumber:C("phone_number"),availability:C("availability"),isVerified:lt("is_verified").default(!0),isEmergency:lt("is_emergency").default(!1),sortOrder:jt("sort_order").default(0),createdAt:Ce("created_at").defaultNow()});st(Gs).omit({createdAt:!0,updatedAt:!0});st(Voe).omit({id:!0,createdAt:!0,updatedAt:!0});st(Ps).omit({id:!0,createdAt:!0});st(Ug).omit({id:!0,createdAt:!0});st(Qoe).omit({id:!0,createdAt:!0});st(Zoe).omit({id:!0,createdAt:!0});st(Xoe).omit({id:!0,createdAt:!0});st(Joe).omit({id:!0,createdAt:!0});st(ele).omit({id:!0,createdAt:!0});st(tle).omit({id:!0,createdAt:!0,updatedAt:!0});st(sle).omit({id:!0,createdAt:!0}).refine(t=>{const s=!!t.userId,r=!!t.sessionId;return s&&!r||!s&&r},{message:"Exactly one of userId or sessionId must be provided (not both, not neither)"});Dr({memorialId:we(),reactionType:Xn(["heart","prayer","candle","flower","dove"]),userId:we().optional(),sessionId:we().optional()}).refine(t=>{const s=!!t.userId,r=!!t.sessionId;return s&&!r||!s&&r},{message:"Exactly one of userId or sessionId must be provided for deletion (not both, not neither)"});st(rle).omit({id:!0,createdAt:!0});st(aU).omit({id:!0,createdAt:!0,updatedAt:!0});st(nle).omit({id:!0,joinedAt:!0});st(ale).omit({id:!0,createdAt:!0,updatedAt:!0,isSent:!0,sentAt:!0}).extend({customEventName:we().optional(),sendTime:we().regex(/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/,"Invalid time format (use HH:MM)").optional(),attachmentUrls:ag(we().url()).optional(),isRecurring:xn().optional(),recurrenceInterval:Xn(["yearly","monthly","custom"]).optional(),status:Xn(["draft","pending","sent","failed"]).optional()});st(iU).omit({id:!0,createdAt:!0,updatedAt:!0,isReleased:!0,releasedAt:!0,viewCount:!0,uniqueViewers:!0,lastViewedAt:!0,releasedCount:!0}).extend({customMilestoneName:we().optional(),releaseTime:we().regex(/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/,"Invalid time format (use HH:MM)").optional(),isRecurring:xn().optional(),recurrenceInterval:Xn(["yearly"]).optional(),status:Xn(["scheduled","released","viewed","expired"]).optional()});st(ile).omit({id:!0,viewedAt:!0});st(oU).omit({id:!0,createdAt:!0,currentAmount:!0}).refine(t=>{const s=Number(t.platformFeePercentage||3);return s>=2.5&&s<=5},{message:"Platform fee must be between 2.5% and 5%",path:["platformFeePercentage"]});st(ole).omit({id:!0,createdAt:!0});st(B4).omit({id:!0,createdAt:!0,fanCount:!0,verificationStatus:!0,verifiedBy:!0,verificationDate:!0});st(lle).omit({id:!0,createdAt:!0});st(cle).omit({id:!0,createdAt:!0,viewCount:!0,isPublished:!0});st(dle).omit({id:!0});st(ule).omit({id:!0,createdAt:!0,attendeeCount:!0});st(mle).omit({id:!0});st(hle).omit({id:!0,createdAt:!0});const zle=st(fle).omit({id:!0,createdAt:!0}),qle=st(xle).omit({id:!0,createdAt:!0,updatedAt:!0}),Vle=st(gle).omit({id:!0,createdAt:!0});st(ple).omit({id:!0,createdAt:!0,updatedAt:!0,activatedAt:!0});st(lU).omit({id:!0,createdAt:!0});st(zg).omit({id:!0,createdAt:!0,updatedAt:!0,status:!0});st(vle).omit({id:!0,createdAt:!0});st(yle).omit({id:!0,createdAt:!0,status:!0});st(cU).omit({id:!0,createdAt:!0,isActive:!0});st(jle).omit({id:!0,createdAt:!0});st(mU).omit({id:!0,createdAt:!0,impressions:!0,clicks:!0,totalSales:!0,totalRevenue:!0,totalPlatformFees:!0});st(Ale).omit({id:!0,createdAt:!0});st(vj).omit({id:!0,createdAt:!0,referralCode:!0});st(hU).omit({id:!0,createdAt:!0});st(Ple).omit({id:!0,createdAt:!0});st(Ele).omit({id:!0,createdAt:!0});st(yj).omit({id:!0,createdAt:!0});st(fU).omit({id:!0,createdAt:!0});st(Tle).omit({id:!0,createdAt:!0});st(Mle).omit({id:!0,createdAt:!0});st(Rle).omit({id:!0,createdAt:!0});st(Hoe).omit({id:!0,createdAt:!0});st(xj).omit({id:!0,createdAt:!0,totalScans:!0,lastScannedAt:!0});st(Woe).omit({id:!0,scannedAt:!0});Dr({geolocationConsent:CO.boolean().default(!1),latitude:Ll().min(-90).max(90).optional().nullable(),longitude:Ll().min(-180).max(180).optional().nullable(),city:we().optional().nullable(),region:we().optional().nullable(),country:we().optional().nullable(),deviceType:Xn(["mobile","tablet","desktop"]).optional().nullable(),browser:we().optional().nullable(),operatingSystem:we().optional().nullable(),action:we().default("view_memorial")});st(Dle).omit({id:!0,createdAt:!0});st(Ile).omit({id:!0,createdAt:!0});st($le).omit({id:!0,createdAt:!0,updatedAt:!0,viewCount:!0,helpfulCount:!0});st(Ble).omit({id:!0,createdAt:!0,updatedAt:!0,status:!0,priority:!0});st(Ule).omit({id:!0,createdAt:!0});st(xU).omit({id:!0,createdAt:!0,updatedAt:!0});st(Fle).omit({id:!0,createdAt:!0});st(Ole).omit({id:!0,createdAt:!0,updatedAt:!0});st(nU).omit({id:!0,createdAt:!0});st(Koe).omit({id:!0,createdAt:!0});st($4).omit({id:!0,createdAt:!0,updatedAt:!0});st(Yoe).omit({id:!0,createdAt:!0,updatedAt:!0,views:!0});st(Goe).omit({id:!0,createdAt:!0,views:!0});st(pU).omit({id:!0,createdAt:!0,updatedAt:!0});st(Lle).omit({id:!0,createdAt:!0});const Hle=et("byus_feedback",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),mediationId:ne("mediation_id").notNull().references(()=>zf.id,{onDelete:"cascade"}),userId:ne("user_id").notNull().references(()=>Uf.id,{onDelete:"cascade"}),rating:jt("rating").notNull(),feedbackText:C("feedback_text"),helpful:lt("helpful"),createdAt:Ce("created_at").defaultNow()},t=>[de("idx_byus_feedback_mediation_id").on(t.mediationId),de("idx_byus_feedback_user_id").on(t.userId),de("idx_byus_feedback_rating").on(t.rating),de("idx_byus_feedback_created_at").on(t.createdAt),vf("rating_range",Ke`rating >= 1 AND rating <= 5`)]);st(Uf).omit({id:!0,createdAt:!0,updatedAt:!0});st(zf).omit({id:!0,createdAt:!0,updatedAt:!0});st(ble).omit({id:!0,createdAt:!0});st(Nle).omit({id:!0,createdAt:!0});st(wle).omit({id:!0,createdAt:!0});st(Hle).omit({id:!0,createdAt:!0});st(gj).omit({id:!0,createdAt:!0,updatedAt:!0});st(_le).omit({id:!0,createdAt:!0});st(Sle).omit({id:!0,createdAt:!0});st(dU).omit({id:!0,createdAt:!0});st(Cle).omit({id:!0,createdAt:!0});st(uU).omit({id:!0,createdAt:!0});st(kle).omit({id:!0,createdAt:!0,reviewedAt:!0});const gU=et("products",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),name:C("name").notNull(),description:C("description").notNull(),category:C("category").notNull(),basePrice:Xt("base_price",{precision:10,scale:2}).notNull(),images:hs("images").$type().default([]),customizationOptions:hs("customization_options").$type(),dimensions:C("dimensions"),material:C("material"),isActive:lt("is_active").default(!0),stockStatus:C("stock_status").default("in_stock"),estimatedDeliveryDays:jt("estimated_delivery_days").default(14),createdAt:Ce("created_at").defaultNow(),updatedAt:Ce("updated_at").defaultNow()},t=>[de("idx_products_category").on(t.category),de("idx_products_is_active").on(t.isActive)]),Wle=et("product_orders",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),orderNumber:C("order_number").notNull().unique(),userId:ne("user_id").notNull().references(()=>Gs.id),memorialId:ne("memorial_id").references(()=>Ps.id),productId:ne("product_id").notNull().references(()=>gU.id),quantity:jt("quantity").default(1),customization:hs("customization").$type(),subtotal:Xt("subtotal",{precision:10,scale:2}).notNull(),shipping:Xt("shipping",{precision:10,scale:2}).default("0"),tax:Xt("tax",{precision:10,scale:2}).default("0"),total:Xt("total",{precision:10,scale:2}).notNull(),shippingAddress:hs("shipping_address").$type().notNull(),status:C("status").default("pending"),paymentStatus:C("payment_status").default("pending"),paymentIntentId:C("payment_intent_id"),trackingNumber:C("tracking_number"),carrier:C("carrier"),estimatedDelivery:Ce("estimated_delivery"),deliveredAt:Ce("delivered_at"),qrCodeId:ne("qr_code_id").references(()=>xj.id),aiDesignPrompt:C("ai_design_prompt"),aiDesignStyle:C("ai_design_style"),aiDesignImageUrl:C("ai_design_image_url"),aiDesignPremium:Xt("ai_design_premium",{precision:10,scale:2}).default("0"),customerNotes:C("customer_notes"),internalNotes:C("internal_notes"),createdAt:Ce("created_at").defaultNow(),updatedAt:Ce("updated_at").defaultNow()},t=>[de("idx_product_orders_user_id").on(t.userId),de("idx_product_orders_memorial_id").on(t.memorialId),de("idx_product_orders_status").on(t.status),de("idx_product_orders_created_at").on(t.createdAt)]);st(gU).omit({id:!0,createdAt:!0,updatedAt:!0});st(Wle).omit({id:!0,createdAt:!0,updatedAt:!0});const Kle=et("chat_messages",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),userId:ne("user_id").notNull().references(()=>Gs.id,{onDelete:"cascade"}),role:C("role").notNull(),content:C("content").notNull(),createdAt:Ce("created_at").defaultNow()},t=>[de("idx_chat_messages_user_id").on(t.userId),de("idx_chat_messages_created_at").on(t.createdAt)]);st(Kle).omit({id:!0,createdAt:!0});const U4=et("event_templates",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),name:C("name").notNull(),description:C("description"),category:C("category").notNull(),defaultDuration:jt("default_duration"),suggestedTimeline:hs("suggested_timeline").$type(),defaultBudgetRange:hs("default_budget_range").$type(),culturalConsiderations:hs("cultural_considerations").$type(),isActive:lt("is_active").default(!0),createdAt:Ce("created_at").defaultNow()},t=>[de("idx_event_templates_category").on(t.category)]),vU=et("event_checklists",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),templateId:ne("template_id").references(()=>U4.id,{onDelete:"cascade"}),category:C("category").notNull(),itemName:C("item_name").notNull(),description:C("description"),isRequired:lt("is_required").default(!1),estimatedCost:Xt("estimated_cost",{precision:10,scale:2}),sortOrder:jt("sort_order").default(0),tips:C("tips"),createdAt:Ce("created_at").defaultNow()},t=>[de("idx_event_checklists_template_id").on(t.templateId),de("idx_event_checklists_category").on(t.category)]),z4=et("memorial_event_plans",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),memorialId:ne("memorial_id").references(()=>Ps.id,{onDelete:"cascade"}),templateId:ne("template_id").references(()=>U4.id),userId:ne("user_id").notNull().references(()=>Gs.id),eventName:C("event_name").notNull(),eventType:C("event_type").notNull(),eventDate:Ce("event_date").notNull(),eventTime:C("event_time"),venue:hs("venue").$type(),expectedAttendees:jt("expected_attendees"),budget:Xt("budget",{precision:10,scale:2}),status:C("status").default("planning"),isLiveStreaming:lt("is_live_streaming").default(!1),streamingUrl:C("streaming_url"),streamingPlatform:C("streaming_platform"),rsvpEnabled:lt("rsvp_enabled").default(!0),guestListPublic:lt("guest_list_public").default(!1),notes:C("notes"),createdAt:Ce("created_at").defaultNow(),updatedAt:Ce("updated_at").defaultNow()},t=>[de("idx_memorial_event_plans_memorial_id").on(t.memorialId),de("idx_memorial_event_plans_user_id").on(t.userId),de("idx_memorial_event_plans_event_date").on(t.eventDate),de("idx_memorial_event_plans_status").on(t.status)]),yU=et("event_tasks",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),eventId:ne("event_id").notNull().references(()=>z4.id,{onDelete:"cascade"}),checklistId:ne("checklist_id").references(()=>vU.id),taskName:C("task_name").notNull(),description:C("description"),category:C("category"),dueDate:Ce("due_date"),assignedTo:ne("assigned_to").references(()=>Gs.id),status:C("status").default("pending"),priority:C("priority").default("medium"),estimatedCost:Xt("estimated_cost",{precision:10,scale:2}),actualCost:Xt("actual_cost",{precision:10,scale:2}),vendorId:ne("vendor_id").references(()=>q4.id),notes:C("notes"),completedAt:Ce("completed_at"),createdAt:Ce("created_at").defaultNow()},t=>[de("idx_event_tasks_event_id").on(t.eventId),de("idx_event_tasks_status").on(t.status),de("idx_event_tasks_due_date").on(t.dueDate)]),q4=et("vendor_listings",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),businessName:C("business_name").notNull(),category:C("category").notNull(),description:C("description"),contactName:C("contact_name"),email:C("email"),phone:C("phone"),website:C("website"),address:hs("address").$type(),serviceArea:hs("service_area").$type(),pricing:hs("pricing").$type(),rating:Xt("rating",{precision:2,scale:1}),reviewCount:jt("review_count").default(0),certifications:hs("certifications").$type(),specializations:hs("specializations").$type(),isVerified:lt("is_verified").default(!1),isActive:lt("is_active").default(!0),partnerSince:Ce("partner_since"),commissionRate:Xt("commission_rate",{precision:4,scale:2}),createdAt:Ce("created_at").defaultNow(),updatedAt:Ce("updated_at").defaultNow()},t=>[de("idx_vendor_listings_category").on(t.category),de("idx_vendor_listings_is_active").on(t.isActive)]),Yle=et("vendor_bookings",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),eventId:ne("event_id").notNull().references(()=>z4.id,{onDelete:"cascade"}),vendorId:ne("vendor_id").notNull().references(()=>q4.id),taskId:ne("task_id").references(()=>yU.id),serviceType:C("service_type").notNull(),bookingDate:Ce("booking_date").notNull(),serviceDetails:hs("service_details").$type(),quotedPrice:Xt("quoted_price",{precision:10,scale:2}),finalPrice:Xt("final_price",{precision:10,scale:2}),status:C("status").default("requested"),paymentStatus:C("payment_status").default("pending"),depositAmount:Xt("deposit_amount",{precision:10,scale:2}),contractUrl:C("contract_url"),notes:C("notes"),confirmedAt:Ce("confirmed_at"),completedAt:Ce("completed_at"),createdAt:Ce("created_at").defaultNow(),updatedAt:Ce("updated_at").defaultNow()},t=>[de("idx_vendor_bookings_event_id").on(t.eventId),de("idx_vendor_bookings_vendor_id").on(t.vendorId),de("idx_vendor_bookings_status").on(t.status)]),jj=et("athlete_profiles",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),memorialId:ne("memorial_id").notNull().references(()=>Ps.id,{onDelete:"cascade"}).unique(),sport:C("sport").notNull(),level:C("level").notNull(),position:C("position"),jerseyNumber:C("jersey_number"),teams:hs("teams").$type(),careerHighlights:hs("career_highlights").$type(),awards:hs("awards").$type(),hallOfFameInductions:hs("hall_of_fame_inductions").$type(),nicknames:hs("nicknames").$type(),rivalries:hs("rivalries").$type(),coachingCareer:hs("coaching_career").$type(),mediaLinks:hs("media_links").$type(),createdAt:Ce("created_at").defaultNow(),updatedAt:Ce("updated_at").defaultNow()},t=>[de("idx_athlete_profiles_sport").on(t.sport),de("idx_athlete_profiles_level").on(t.level)]),Gle=et("athlete_stats",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),athleteProfileId:ne("athlete_profile_id").notNull().references(()=>jj.id,{onDelete:"cascade"}),season:C("season"),team:C("team"),league:C("league"),category:C("category").notNull(),statType:C("stat_type").notNull(),stats:hs("stats").$type().notNull(),gamesPlayed:jt("games_played"),isCareerTotal:lt("is_career_total").default(!1),source:C("source"),verifiedAt:Ce("verified_at"),createdAt:Ce("created_at").defaultNow()},t=>[de("idx_athlete_stats_athlete_profile_id").on(t.athleteProfileId),de("idx_athlete_stats_category").on(t.category),de("idx_athlete_stats_season").on(t.season)]),jU=et("team_memorials",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),teamName:C("team_name").notNull(),sport:C("sport").notNull(),level:C("level").notNull(),league:C("league"),season:C("season"),description:C("description"),bannerImageUrl:C("banner_image_url"),logoUrl:C("logo_url"),achievements:hs("achievements").$type(),roster:hs("roster").$type(),coaches:hs("coaches").$type(),championshipDetails:hs("championship_details").$type(),isPublic:lt("is_public").default(!0),creatorId:ne("creator_id").references(()=>Gs.id),organizationApproved:lt("organization_approved").default(!1),createdAt:Ce("created_at").defaultNow(),updatedAt:Ce("updated_at").defaultNow()},t=>[de("idx_team_memorials_sport").on(t.sport),de("idx_team_memorials_team_name").on(t.teamName),de("idx_team_memorials_season").on(t.season)]),Qle=et("athletic_legacy_scores",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),athleteProfileId:ne("athlete_profile_id").notNull().references(()=>jj.id,{onDelete:"cascade"}).unique(),statisticalScore:jt("statistical_score").default(0),achievementScore:jt("achievement_score").default(0),impactScore:jt("impact_score").default(0),fanEngagementScore:jt("fan_engagement_score").default(0),mediaPresenceScore:jt("media_presence_score").default(0),overallScore:jt("overall_score").default(0),scoreHistory:hs("score_history").$type().default([]),lastCalculated:Ce("last_calculated"),createdAt:Ce("created_at").defaultNow(),updatedAt:Ce("updated_at").defaultNow()},t=>[de("idx_athletic_legacy_scores_overall_score").on(t.overallScore)]),Zle=et("jersey_retirements",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),athleteProfileId:ne("athlete_profile_id").notNull().references(()=>jj.id,{onDelete:"cascade"}),teamMemorialId:ne("team_memorial_id").references(()=>jU.id),organization:C("organization").notNull(),jerseyNumber:C("jersey_number").notNull(),retirementDate:Ce("retirement_date"),ceremonyDetails:hs("ceremony_details").$type(),isVirtual:lt("is_virtual").default(!1),bannerLocation:C("banner_location"),createdAt:Ce("created_at").defaultNow()},t=>[de("idx_jersey_retirements_athlete_profile_id").on(t.athleteProfileId),de("idx_jersey_retirements_organization").on(t.organization)]),bj=et("pet_memorials",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),creatorEmail:C("creator_email").notNull(),name:C("name").notNull(),species:C("species").notNull(),breed:C("breed"),color:C("color"),birthDate:C("birth_date"),passingDate:C("passing_date").notNull(),age:C("age"),personality:C("personality").array(),favoriteActivities:C("favorite_activities").array(),favoriteFood:C("favorite_food"),favoriteToy:C("favorite_toy"),specialTraits:C("special_traits"),biography:C("biography"),epitaph:C("epitaph"),rainbowBridgeMessage:C("rainbow_bridge_message"),profilePhoto:C("profile_photo"),coverPhoto:C("cover_photo"),galleryPhotos:C("gallery_photos").array(),theme:C("theme").default("rainbow_bridge"),primaryColor:C("primary_color"),vetClinic:C("vet_clinic"),microchipId:C("microchip_id"),causeOfPassing:C("cause_of_passing"),isPublic:lt("is_public").default(!0),allowCondolences:lt("allow_condolences").default(!0),inviteCode:ne("invite_code",{length:20}).notNull().unique(),viewCount:jt("view_count").default(0),candleLitCount:jt("candle_lit_count").default(0),createdAt:Ce("created_at").defaultNow(),updatedAt:Ce("updated_at").defaultNow()},t=>[de("idx_pet_memorials_creator_email").on(t.creatorEmail),de("idx_pet_memorials_species").on(t.species),de("idx_pet_memorials_is_public").on(t.isPublic)]),Xle=et("pet_memorial_photos",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),petMemorialId:ne("pet_memorial_id").notNull().references(()=>bj.id,{onDelete:"cascade"}),photoUrl:C("photo_url").notNull(),caption:C("caption"),dateTaken:C("date_taken"),location:C("location"),isFavorite:lt("is_favorite").default(!1),uploadedBy:C("uploaded_by"),createdAt:Ce("created_at").defaultNow()},t=>[de("idx_pet_memorial_photos_pet_memorial_id").on(t.petMemorialId)]),Jle=et("pet_memorial_condolences",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),petMemorialId:ne("pet_memorial_id").notNull().references(()=>bj.id,{onDelete:"cascade"}),authorName:C("author_name").notNull(),authorEmail:C("author_email"),message:C("message").notNull(),relationship:C("relationship"),isApproved:lt("is_approved").default(!0),createdAt:Ce("created_at").defaultNow()},t=>[de("idx_pet_memorial_condolences_pet_memorial_id").on(t.petMemorialId)]),ece=et("pet_memorial_candles",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),petMemorialId:ne("pet_memorial_id").notNull().references(()=>bj.id,{onDelete:"cascade"}),litBy:C("lit_by").notNull(),litByEmail:C("lit_by_email"),message:C("message"),candleType:C("candle_type").default("standard"),createdAt:Ce("created_at").defaultNow()},t=>[de("idx_pet_memorial_candles_pet_memorial_id").on(t.petMemorialId)]),yf=et("living_legacies",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),userId:ne("user_id").notNull().references(()=>Gs.id,{onDelete:"cascade"}),fullName:C("full_name").notNull(),birthDate:C("birth_date"),currentAge:jt("current_age"),location:C("location"),occupation:C("occupation"),biography:C("biography"),lifePhilosophy:C("life_philosophy"),favoriteQuote:C("favorite_quote"),profilePhoto:C("profile_photo"),coverPhoto:C("cover_photo"),isPublic:lt("is_public").default(!1),publishAfterPassing:lt("publish_after_passing").default(!0),designatedExecutorEmail:C("designated_executor_email"),completionPercentage:jt("completion_percentage").default(0),lastUpdatedSection:C("last_updated_section"),createdAt:Ce("created_at").defaultNow(),updatedAt:Ce("updated_at").defaultNow()},t=>[de("idx_living_legacies_user_id").on(t.userId)]),tce=et("living_legacy_achievements",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),livingLegacyId:ne("living_legacy_id").notNull().references(()=>yf.id,{onDelete:"cascade"}),category:C("category").notNull(),title:C("title").notNull(),description:C("description"),date:C("date"),location:C("location"),photoUrl:C("photo_url"),importance:jt("importance").default(5),isHighlight:lt("is_highlight").default(!1),createdAt:Ce("created_at").defaultNow()},t=>[de("idx_living_legacy_achievements_living_legacy_id").on(t.livingLegacyId),de("idx_living_legacy_achievements_category").on(t.category)]),sce=et("living_legacy_bucket_list",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),livingLegacyId:ne("living_legacy_id").notNull().references(()=>yf.id,{onDelete:"cascade"}),item:C("item").notNull(),category:C("category"),isCompleted:lt("is_completed").default(!1),completedDate:C("completed_date"),completionNotes:C("completion_notes"),photoUrl:C("photo_url"),priority:jt("priority").default(3),createdAt:Ce("created_at").defaultNow(),updatedAt:Ce("updated_at").defaultNow()},t=>[de("idx_living_legacy_bucket_list_living_legacy_id").on(t.livingLegacyId)]),rce=et("living_legacy_messages",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),livingLegacyId:ne("living_legacy_id").notNull().references(()=>yf.id,{onDelete:"cascade"}),recipientName:C("recipient_name").notNull(),recipientEmail:C("recipient_email"),recipientRelationship:C("recipient_relationship"),subject:C("subject"),message:C("message").notNull(),videoUrl:C("video_url"),deliveryTrigger:C("delivery_trigger").default("after_passing"),deliveryDate:C("delivery_date"),deliveryMilestone:C("delivery_milestone"),isDelivered:lt("is_delivered").default(!1),deliveredAt:Ce("delivered_at"),createdAt:Ce("created_at").defaultNow(),updatedAt:Ce("updated_at").defaultNow()},t=>[de("idx_living_legacy_messages_living_legacy_id").on(t.livingLegacyId)]),nce=et("family_tree_connections",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),primaryMemorialId:ne("primary_memorial_id").references(()=>Ps.id,{onDelete:"cascade"}),primaryLivingLegacyId:ne("primary_living_legacy_id").references(()=>yf.id,{onDelete:"cascade"}),relatedMemorialId:ne("related_memorial_id").references(()=>Ps.id,{onDelete:"set null"}),relatedLivingLegacyId:ne("related_living_legacy_id").references(()=>yf.id,{onDelete:"set null"}),relatedPersonName:C("related_person_name"),relationship:C("relationship").notNull(),relationshipDetail:C("relationship_detail"),isBloodRelative:lt("is_blood_relative").default(!0),marriageDate:C("marriage_date"),marriageLocation:C("marriage_location"),isVerified:lt("is_verified").default(!1),verifiedBy:ne("verified_by").references(()=>Gs.id,{onDelete:"set null"}),createdAt:Ce("created_at").defaultNow()},t=>[de("idx_family_tree_primary_memorial").on(t.primaryMemorialId),de("idx_family_tree_primary_living_legacy").on(t.primaryLivingLegacyId),de("idx_family_tree_related_memorial").on(t.relatedMemorialId),de("idx_family_tree_relationship").on(t.relationship)]),ace=et("holiday_events",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),memorialId:ne("memorial_id").notNull().references(()=>Ps.id,{onDelete:"cascade"}),name:C("name").notNull(),date:C("date").notNull(),eventType:C("event_type").notNull().default("custom"),description:C("description"),reminderEnabled:lt("reminder_enabled").default(!0),reminderDaysBefore:jt("reminder_days_before").default(7),celebrationPlan:C("celebration_plan"),traditions:C("traditions").array(),isRecurring:lt("is_recurring").default(!0),createdAt:Ce("created_at").defaultNow(),updatedAt:Ce("updated_at").defaultNow()},t=>[de("idx_holiday_events_memorial_id").on(t.memorialId),de("idx_holiday_events_date").on(t.date),de("idx_holiday_events_type").on(t.eventType)]);st(ace).omit({id:!0,createdAt:!0,updatedAt:!0});const ice=et("birthday_wishes",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),memorialId:ne("memorial_id").notNull().references(()=>Ps.id,{onDelete:"cascade"}),authorName:C("author_name").notNull(),authorEmail:C("author_email"),message:C("message").notNull(),relationship:C("relationship"),year:jt("year").notNull(),createdAt:Ce("created_at").defaultNow()},t=>[de("idx_birthday_wishes_memorial_id").on(t.memorialId),de("idx_birthday_wishes_year").on(t.year)]);st(ice).omit({id:!0,createdAt:!0});const oce=et("holiday_catalog",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),name:C("name").notNull(),description:C("description"),category:C("category").notNull(),faithTradition:C("faith_tradition"),region:C("region"),country:C("country"),dateType:C("date_type").notNull().default("fixed"),fixedMonth:jt("fixed_month"),fixedDay:jt("fixed_day"),calculationRule:C("calculation_rule"),iconName:C("icon_name"),primaryColor:C("primary_color"),secondaryColor:C("secondary_color"),bannerImageUrl:C("banner_image_url"),traditions:C("traditions").array(),greetings:C("greetings").array(),symbolism:C("symbolism"),isActive:lt("is_active").default(!0),sortOrder:jt("sort_order").default(0),createdAt:Ce("created_at").defaultNow(),updatedAt:Ce("updated_at").defaultNow()},t=>[de("idx_holiday_catalog_category").on(t.category),de("idx_holiday_catalog_faith").on(t.faithTradition),de("idx_holiday_catalog_region").on(t.region)]),Nj=et("celebration_wallets",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),memorialId:ne("memorial_id").references(()=>Ps.id,{onDelete:"cascade"}),userId:ne("user_id").references(()=>Gs.id,{onDelete:"cascade"}),walletType:C("wallet_type").notNull(),walletName:C("wallet_name").notNull(),totalReceived:Xt("total_received",{precision:10,scale:2}).default("0.00"),totalSpent:Xt("total_spent",{precision:10,scale:2}).default("0.00"),currentBalance:Xt("current_balance",{precision:10,scale:2}).default("0.00"),spendingLimit:Xt("spending_limit",{precision:10,scale:2}),requiresApproval:lt("requires_approval").default(!1),approverEmail:C("approver_email"),status:C("status").notNull().default("active"),createdAt:Ce("created_at").defaultNow(),updatedAt:Ce("updated_at").defaultNow()},t=>[de("idx_celebration_wallets_memorial").on(t.memorialId),de("idx_celebration_wallets_user").on(t.userId),de("idx_celebration_wallets_type").on(t.walletType)]),lce=et("wallet_transactions",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),walletId:ne("wallet_id").notNull().references(()=>Nj.id,{onDelete:"cascade"}),transactionType:C("transaction_type").notNull(),amount:Xt("amount",{precision:10,scale:2}).notNull(),sourceType:C("source_type"),sourceId:ne("source_id"),donorName:C("donor_name"),donorEmail:C("donor_email"),merchantName:C("merchant_name"),orderReference:C("order_reference"),itemDescription:C("item_description"),balanceAfter:Xt("balance_after",{precision:10,scale:2}).notNull(),notes:C("notes"),createdAt:Ce("created_at").defaultNow()},t=>[de("idx_wallet_transactions_wallet").on(t.walletId),de("idx_wallet_transactions_type").on(t.transactionType),de("idx_wallet_transactions_date").on(t.createdAt)]),cce=et("shopping_spree_orders",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),walletId:ne("wallet_id").notNull().references(()=>Nj.id,{onDelete:"cascade"}),userId:ne("user_id").references(()=>Gs.id,{onDelete:"set null"}),orderNumber:C("order_number").notNull(),merchantName:C("merchant_name").notNull(),merchantUrl:C("merchant_url"),items:xa("items").notNull().$type().default([]),subtotal:Xt("subtotal",{precision:10,scale:2}).notNull(),shippingCost:Xt("shipping_cost",{precision:10,scale:2}).default("0.00"),taxAmount:Xt("tax_amount",{precision:10,scale:2}).default("0.00"),totalAmount:Xt("total_amount",{precision:10,scale:2}).notNull(),shippingAddress:xa("shipping_address").$type(),status:C("status").notNull().default("pending"),trackingNumber:C("tracking_number"),trackingUrl:C("tracking_url"),approvalStatus:C("approval_status").default("pending"),approvedBy:ne("approved_by").references(()=>Gs.id,{onDelete:"set null"}),approvedAt:Ce("approved_at"),rejectionReason:C("rejection_reason"),createdAt:Ce("created_at").defaultNow(),updatedAt:Ce("updated_at").defaultNow()},t=>[de("idx_shopping_spree_orders_wallet").on(t.walletId),de("idx_shopping_spree_orders_user").on(t.userId),de("idx_shopping_spree_orders_status").on(t.status)]),V4=et("wedding_registries",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),userId:ne("user_id").notNull().references(()=>Gs.id,{onDelete:"cascade"}),eventType:C("event_type").notNull().default("wedding"),eventName:C("event_name").notNull(),eventDate:C("event_date"),eventLocation:C("event_location"),primaryPersonName:C("primary_person_name").notNull(),secondaryPersonName:C("secondary_person_name"),coverImageUrl:C("cover_image_url"),themeColor:C("theme_color"),message:C("message"),shareCode:ne("share_code",{length:20}).notNull().unique(),isPublic:lt("is_public").default(!1),walletId:ne("wallet_id").references(()=>Nj.id,{onDelete:"set null"}),status:C("status").notNull().default("active"),createdAt:Ce("created_at").defaultNow(),updatedAt:Ce("updated_at").defaultNow()},t=>[de("idx_wedding_registries_user").on(t.userId),de("idx_wedding_registries_event_type").on(t.eventType),de("idx_wedding_registries_share_code").on(t.shareCode)]),bU=et("registry_items",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),registryId:ne("registry_id").notNull().references(()=>V4.id,{onDelete:"cascade"}),productName:C("product_name").notNull(),productDescription:C("product_description"),productUrl:C("product_url"),productImageUrl:C("product_image_url"),retailerName:C("retailer_name"),price:Xt("price",{precision:10,scale:2}).notNull(),quantityRequested:jt("quantity_requested").notNull().default(1),quantityPurchased:jt("quantity_purchased").default(0),category:C("category"),priority:C("priority").default("normal"),personalNote:C("personal_note"),isActive:lt("is_active").default(!0),sortOrder:jt("sort_order").default(0),createdAt:Ce("created_at").defaultNow(),updatedAt:Ce("updated_at").defaultNow()},t=>[de("idx_registry_items_registry").on(t.registryId),de("idx_registry_items_category").on(t.category)]),dce=et("registry_gifts",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),registryItemId:ne("registry_item_id").notNull().references(()=>bU.id,{onDelete:"cascade"}),registryId:ne("registry_id").notNull().references(()=>V4.id,{onDelete:"cascade"}),gifterName:C("gifter_name").notNull(),gifterEmail:C("gifter_email"),gifterUserId:ne("gifter_user_id").references(()=>Gs.id,{onDelete:"set null"}),quantity:jt("quantity").notNull().default(1),amount:Xt("amount",{precision:10,scale:2}),giftMessage:C("gift_message"),status:C("status").notNull().default("purchased"),isAnonymous:lt("is_anonymous").default(!1),thankYouSent:lt("thank_you_sent").default(!1),thankYouSentAt:Ce("thank_you_sent_at"),createdAt:Ce("created_at").defaultNow()},t=>[de("idx_registry_gifts_item").on(t.registryItemId),de("idx_registry_gifts_registry").on(t.registryId),de("idx_registry_gifts_gifter").on(t.gifterUserId)]),NU=et("bluetooth_playlist_sessions",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),memorialId:ne("memorial_id").references(()=>Ps.id,{onDelete:"cascade"}),eventId:ne("event_id"),hostUserId:ne("host_user_id").references(()=>Gs.id,{onDelete:"set null"}),hostDeviceName:C("host_device_name"),sessionName:C("session_name").notNull(),sessionCode:ne("session_code",{length:8}).notNull().unique(),playlistId:ne("playlist_id").references(()=>$4.id,{onDelete:"set null"}),currentTrackIndex:jt("current_track_index").default(0),isPlaying:lt("is_playing").default(!1),connectedDevices:xa("connected_devices").$type().default([]),maxDevices:jt("max_devices").default(20),status:C("status").notNull().default("active"),startedAt:Ce("started_at").defaultNow(),endedAt:Ce("ended_at"),createdAt:Ce("created_at").defaultNow()},t=>[de("idx_bluetooth_sessions_memorial").on(t.memorialId),de("idx_bluetooth_sessions_host").on(t.hostUserId),de("idx_bluetooth_sessions_code").on(t.sessionCode)]),wU=et("live_celebration_sessions",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),celebrationType:C("celebration_type").notNull(),memorialId:ne("memorial_id").references(()=>Ps.id,{onDelete:"cascade"}),hostUserId:ne("host_user_id").notNull().references(()=>Gs.id,{onDelete:"cascade"}),hostName:C("host_name").notNull(),title:C("title").notNull(),description:C("description"),scheduledStart:Ce("scheduled_start").notNull(),scheduledEnd:Ce("scheduled_end"),joinCode:ne("join_code",{length:10}).notNull().unique(),password:C("password"),maxParticipants:jt("max_participants").default(50),streamUrl:C("stream_url"),streamType:C("stream_type").default("video"),isRecordingEnabled:lt("is_recording_enabled").default(!1),recordingUrl:C("recording_url"),chatEnabled:lt("chat_enabled").default(!0),reactionsEnabled:lt("reactions_enabled").default(!0),photosEnabled:lt("photos_enabled").default(!0),playlistSessionId:ne("playlist_session_id").references(()=>NU.id,{onDelete:"set null"}),status:C("status").notNull().default("scheduled"),actualStartedAt:Ce("actual_started_at"),actualEndedAt:Ce("actual_ended_at"),peakViewers:jt("peak_viewers").default(0),totalViews:jt("total_views").default(0),createdAt:Ce("created_at").defaultNow(),updatedAt:Ce("updated_at").defaultNow()},t=>[de("idx_live_celebrations_host").on(t.hostUserId),de("idx_live_celebrations_memorial").on(t.memorialId),de("idx_live_celebrations_type").on(t.celebrationType),de("idx_live_celebrations_scheduled").on(t.scheduledStart),de("idx_live_celebrations_code").on(t.joinCode)]),uce=et("live_celebration_participants",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),sessionId:ne("session_id").notNull().references(()=>wU.id,{onDelete:"cascade"}),userId:ne("user_id").references(()=>Gs.id,{onDelete:"set null"}),participantName:C("participant_name").notNull(),participantEmail:C("participant_email"),role:C("role").notNull().default("viewer"),joinedAt:Ce("joined_at").defaultNow(),leftAt:Ce("left_at"),durationMinutes:jt("duration_minutes"),reactionsCount:jt("reactions_count").default(0),messagesCount:jt("messages_count").default(0),photosShared:jt("photos_shared").default(0)},t=>[de("idx_live_participants_session").on(t.sessionId),de("idx_live_participants_user").on(t.userId)]);st(oce).omit({id:!0,createdAt:!0,updatedAt:!0});st(Nj).omit({id:!0,createdAt:!0,updatedAt:!0});st(lce).omit({id:!0,createdAt:!0});st(cce).omit({id:!0,createdAt:!0,updatedAt:!0});st(V4).omit({id:!0,createdAt:!0,updatedAt:!0});st(bU).omit({id:!0,createdAt:!0,updatedAt:!0});st(dce).omit({id:!0,createdAt:!0});st(NU).omit({id:!0,createdAt:!0});st(wU).omit({id:!0,createdAt:!0,updatedAt:!0});st(uce).omit({id:!0});const mce=et("multi_faith_templates",{id:ne("id").primaryKey().default(Ke`gen_random_uuid()`),faith:C("faith").notNull(),category:C("category").notNull(),title:C("title").notNull(),content:C("content").notNull(),source:C("source"),language:C("language").default("en"),suitableFor:C("suitable_for").array(),tone:C("tone"),isCustomizable:lt("is_customizable").default(!0),placeholders:C("placeholders").array(),isPublic:lt("is_public").default(!0),createdBy:ne("created_by").references(()=>Gs.id,{onDelete:"set null"}),usageCount:jt("usage_count").default(0),rating:Xt("rating",{precision:3,scale:2}),createdAt:Ce("created_at").defaultNow(),updatedAt:Ce("updated_at").defaultNow()},t=>[de("idx_multi_faith_templates_faith").on(t.faith),de("idx_multi_faith_templates_category").on(t.category)]);st(bj).omit({id:!0,createdAt:!0,updatedAt:!0,viewCount:!0,candleLitCount:!0});st(Xle).omit({id:!0,createdAt:!0});st(Jle).omit({id:!0,createdAt:!0});st(ece).omit({id:!0,createdAt:!0});st(yf).omit({id:!0,createdAt:!0,updatedAt:!0,completionPercentage:!0});st(tce).omit({id:!0,createdAt:!0});st(sce).omit({id:!0,createdAt:!0,updatedAt:!0});st(rce).omit({id:!0,createdAt:!0,updatedAt:!0,isDelivered:!0,deliveredAt:!0});st(nce).omit({id:!0,createdAt:!0});st(mce).omit({id:!0,createdAt:!0,updatedAt:!0,usageCount:!0});st(U4).omit({id:!0,createdAt:!0});st(vU).omit({id:!0,createdAt:!0});st(z4).omit({id:!0,createdAt:!0,updatedAt:!0});st(yU).omit({id:!0,createdAt:!0});st(q4).omit({id:!0,createdAt:!0,updatedAt:!0});st(Yle).omit({id:!0,createdAt:!0,updatedAt:!0});st(jj).omit({id:!0,createdAt:!0,updatedAt:!0});st(Gle).omit({id:!0,createdAt:!0});st(jU).omit({id:!0,createdAt:!0,updatedAt:!0});st(Qle).omit({id:!0,createdAt:!0,updatedAt:!0});st(Zle).omit({id:!0,createdAt:!0});function hce(){const[,t]=ja(),{toast:s}=Ht(),r=Or({resolver:$r(zle),defaultValues:{name:"",nickname:"",birthDate:"",deathDate:"",biography:"",epitaph:"",imageUrl:"",neighborhoodName:"",neighborhoodLogoUrl:"",clubName:"",clubLogoUrl:"",city:"",state:"",role:"",communityImpact:"",legendStatus:"",isPublic:!0}}),n=yt({mutationFn:i=>pt("/api/hood-memorials","POST",i),onSuccess:()=>{s({title:"Hood Memorial Created",description:"The memorial has been created successfully."}),t("/hood-memorials")},onError:i=>{s({title:"Error",description:i.message||"Failed to create hood memorial",variant:"destructive"})}}),a=i=>{n.mutate(i)};return e.jsxs("div",{className:"container max-w-4xl mx-auto px-4 py-12",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center",children:e.jsx(lf,{className:"w-6 h-6 text-primary"})}),e.jsx("h1",{className:"text-4xl font-serif font-bold",children:"Create Hood Memorial"})]}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Honor a neighborhood legend, community leader, or someone who left their mark on the streets they called home."})]}),e.jsx(Wr,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(a),className:"space-y-6",children:[e.jsxs($,{children:[e.jsxs(le,{children:[e.jsx(ge,{children:"Personal Information"}),e.jsx($e,{children:"Basic details about the deceased"})]}),e.jsxs(V,{className:"space-y-4",children:[e.jsx(fe,{control:r.control,name:"name",render:({field:i})=>e.jsxs(me,{children:[e.jsx(he,{children:"Full Name *"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"Enter full name",...i,"data-testid":"input-name"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:r.control,name:"nickname",render:({field:i})=>e.jsxs(me,{children:[e.jsx(he,{children:"Nickname / Street Name"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"e.g., Big Mike, T-Mac, etc.",...i,value:i.value||"","data-testid":"input-nickname"})}),e.jsx(ye,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(fe,{control:r.control,name:"birthDate",render:({field:i})=>e.jsxs(me,{children:[e.jsx(he,{children:"Birth Date *"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"e.g., January 15, 1985",...i,"data-testid":"input-birth-date"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:r.control,name:"deathDate",render:({field:i})=>e.jsxs(me,{children:[e.jsx(he,{children:"Death Date *"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"e.g., March 10, 2024",...i,"data-testid":"input-death-date"})}),e.jsx(ye,{})]})})]}),e.jsx(fe,{control:r.control,name:"imageUrl",render:({field:i})=>e.jsxs(me,{children:[e.jsx(he,{children:"Photo URL"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"https://example.com/photo.jpg",...i,value:i.value||"","data-testid":"input-image-url"})}),e.jsx(ye,{})]})})]})]}),e.jsxs($,{children:[e.jsxs(le,{children:[e.jsxs(ge,{children:[e.jsx(tr,{className:"w-5 h-5 inline mr-2"}),"Neighborhood & Community Details"]}),e.jsx($e,{children:"Where they repped and what they meant to the community"})]}),e.jsxs(V,{className:"space-y-4",children:[e.jsx(fe,{control:r.control,name:"neighborhoodName",render:({field:i})=>e.jsxs(me,{children:[e.jsx(he,{children:"Neighborhood Name *"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"e.g., South Side, Uptown, The Heights",...i,"data-testid":"input-neighborhood"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:r.control,name:"neighborhoodLogoUrl",render:({field:i})=>e.jsxs(me,{children:[e.jsxs(he,{children:[e.jsx(zd,{className:"w-4 h-4 inline mr-1"}),"Neighborhood Logo (Image URL)"]}),e.jsx(xe,{children:e.jsx(re,{placeholder:"Paste logo image URL (e.g., https://i.imgur.com/logo.png)",...i,value:i.value||"","data-testid":"input-neighborhood-logo"})}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Upload your logo to imgur.com, imgbb.com, or similar and paste the URL here"}),e.jsx(ye,{})]})}),e.jsx(fe,{control:r.control,name:"clubName",render:({field:i})=>e.jsxs(me,{children:[e.jsx(he,{children:"Club / Crew Name (Optional)"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"e.g., Street Kings MC, Block Boys, etc.",...i,value:i.value||"","data-testid":"input-club-name"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:r.control,name:"clubLogoUrl",render:({field:i})=>e.jsxs(me,{children:[e.jsxs(he,{children:[e.jsx(zd,{className:"w-4 h-4 inline mr-1"}),"Club Logo (Image URL - Optional)"]}),e.jsx(xe,{children:e.jsx(re,{placeholder:"Paste club logo image URL (e.g., https://i.imgur.com/club-logo.png)",...i,value:i.value||"","data-testid":"input-club-logo"})}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Upload your logo to imgur.com, imgbb.com, or similar and paste the URL here"}),e.jsx(ye,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(fe,{control:r.control,name:"city",render:({field:i})=>e.jsxs(me,{children:[e.jsx(he,{children:"City *"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"Chicago",...i,"data-testid":"input-city"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:r.control,name:"state",render:({field:i})=>e.jsxs(me,{children:[e.jsx(he,{children:"State *"}),e.jsxs(Rt,{onValueChange:i.onChange,value:i.value,children:[e.jsx(xe,{children:e.jsx(Mt,{"data-testid":"select-state",children:e.jsx(Ft,{placeholder:"Select state"})})}),e.jsxs(Lt,{children:[e.jsx(te,{value:"AL",children:"Alabama"}),e.jsx(te,{value:"AK",children:"Alaska"}),e.jsx(te,{value:"AZ",children:"Arizona"}),e.jsx(te,{value:"AR",children:"Arkansas"}),e.jsx(te,{value:"CA",children:"California"}),e.jsx(te,{value:"CO",children:"Colorado"}),e.jsx(te,{value:"CT",children:"Connecticut"}),e.jsx(te,{value:"FL",children:"Florida"}),e.jsx(te,{value:"GA",children:"Georgia"}),e.jsx(te,{value:"IL",children:"Illinois"}),e.jsx(te,{value:"IN",children:"Indiana"}),e.jsx(te,{value:"LA",children:"Louisiana"}),e.jsx(te,{value:"MD",children:"Maryland"}),e.jsx(te,{value:"MA",children:"Massachusetts"}),e.jsx(te,{value:"MI",children:"Michigan"}),e.jsx(te,{value:"MN",children:"Minnesota"}),e.jsx(te,{value:"MS",children:"Mississippi"}),e.jsx(te,{value:"MO",children:"Missouri"}),e.jsx(te,{value:"NV",children:"Nevada"}),e.jsx(te,{value:"NJ",children:"New Jersey"}),e.jsx(te,{value:"NM",children:"New Mexico"}),e.jsx(te,{value:"NY",children:"New York"}),e.jsx(te,{value:"NC",children:"North Carolina"}),e.jsx(te,{value:"OH",children:"Ohio"}),e.jsx(te,{value:"OK",children:"Oklahoma"}),e.jsx(te,{value:"OR",children:"Oregon"}),e.jsx(te,{value:"PA",children:"Pennsylvania"}),e.jsx(te,{value:"SC",children:"South Carolina"}),e.jsx(te,{value:"TN",children:"Tennessee"}),e.jsx(te,{value:"TX",children:"Texas"}),e.jsx(te,{value:"VA",children:"Virginia"}),e.jsx(te,{value:"WA",children:"Washington"}),e.jsx(te,{value:"WI",children:"Wisconsin"})]})]}),e.jsx(ye,{})]})})]}),e.jsx(fe,{control:r.control,name:"role",render:({field:i})=>e.jsxs(me,{children:[e.jsx(he,{children:"Role in Community"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"e.g., Community Leader, Youth Mentor, Block Captain",...i,value:i.value||"","data-testid":"input-role"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:r.control,name:"legendStatus",render:({field:i})=>e.jsxs(me,{children:[e.jsx(he,{children:"Legend Status"}),e.jsxs(Rt,{onValueChange:i.onChange,value:i.value||"",children:[e.jsx(xe,{children:e.jsx(Mt,{"data-testid":"select-legend-status",children:e.jsx(Ft,{placeholder:"Select status (optional)"})})}),e.jsxs(Lt,{children:[e.jsx(te,{value:"",children:"None"}),e.jsx(te,{value:"Hood Legend",children:"Hood Legend"}),e.jsx(te,{value:"Community Icon",children:"Community Icon"}),e.jsx(te,{value:"Neighborhood OG",children:"Neighborhood OG"}),e.jsx(te,{value:"Street Legend",children:"Street Legend"}),e.jsx(te,{value:"Block Hero",children:"Block Hero"})]})]}),e.jsx(ye,{})]})})]})]}),e.jsxs($,{children:[e.jsxs(le,{children:[e.jsx(ge,{children:"Their Story"}),e.jsx($e,{children:"Share their life story and impact on the community"})]}),e.jsxs(V,{className:"space-y-4",children:[e.jsx(fe,{control:r.control,name:"biography",render:({field:i})=>e.jsxs(me,{children:[e.jsx(he,{children:"Biography"}),e.jsx(xe,{children:e.jsx(Gt,{placeholder:"Share their life story, what they meant to the neighborhood, and how they impacted the community...",className:"min-h-[150px]",...i,value:i.value||"","data-testid":"textarea-biography"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:r.control,name:"communityImpact",render:({field:i})=>e.jsxs(me,{children:[e.jsx(he,{children:"Community Impact"}),e.jsx(xe,{children:e.jsx(Gt,{placeholder:"Describe how they impacted the community, what they did for others, programs they started, people they helped...",className:"min-h-[100px]",...i,value:i.value||"","data-testid":"textarea-community-impact"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:r.control,name:"epitaph",render:({field:i})=>e.jsxs(me,{children:[e.jsx(he,{children:"Epitaph / Final Words"}),e.jsx(xe,{children:e.jsx(Gt,{placeholder:"A final tribute or words to remember them by...",className:"min-h-[80px]",...i,value:i.value||"","data-testid":"textarea-epitaph"})}),e.jsx(ye,{})]})})]})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(O,{type:"button",variant:"outline",onClick:()=>t("/hood-memorials"),"data-testid":"button-cancel",children:"Cancel"}),e.jsx(O,{type:"submit",disabled:n.isPending,"data-testid":"button-create-memorial",className:"bg-[hsl(45,80%,60%)] hover:bg-[hsl(45,80%,55%)] text-foreground",children:n.isPending?"Creating...":"Create Hood Memorial"})]})]})})]})}function fce(){const[t,s]=N.useState(""),[r,n]=N.useState(""),{data:a,isLoading:i}=Xe({queryKey:["/api/neighborhoods",t,r],queryFn:async()=>{const l=new URLSearchParams;t&&l.append("state",t),r&&l.append("city",r);const c=l.toString()?`/api/neighborhoods?${l.toString()}`:"/api/neighborhoods",d=await fetch(c);if(!d.ok)throw new Error("Failed to fetch");return d.json()}}),o=(a==null?void 0:a.neighborhoods)||[];return e.jsxs("div",{className:"container max-w-7xl mx-auto px-4 py-12",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center",children:e.jsx(Rx,{className:"w-6 h-6 text-primary"})}),e.jsx("h1",{className:"text-4xl font-serif font-bold",children:"Neighborhoods"})]}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto mb-6",children:"Explore communities across America. Each neighborhood has its own story, legends, and heroes worth remembering."}),e.jsx(He,{href:"/create-neighborhood",children:e.jsxs(O,{size:"lg","data-testid":"button-create-neighborhood",className:"bg-[hsl(45,80%,60%)] hover:bg-[hsl(45,80%,55%)] text-foreground border-none shadow-lg font-medium",children:[e.jsx(bs,{className:"w-5 h-5 mr-2"}),"Add Neighborhood"]})})]}),e.jsxs("div",{className:"max-w-2xl mx-auto mb-8 flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs(Rt,{value:t||void 0,onValueChange:l=>{s(l),l||n("")},children:[e.jsx(Mt,{"data-testid":"select-state-filter",children:e.jsx(Ft,{placeholder:"All States"})}),e.jsxs(Lt,{children:[e.jsx(te,{value:"CA",children:"California"}),e.jsx(te,{value:"IL",children:"Illinois"}),e.jsx(te,{value:"NY",children:"New York"}),e.jsx(te,{value:"TX",children:"Texas"}),e.jsx(te,{value:"FL",children:"Florida"}),e.jsx(te,{value:"GA",children:"Georgia"}),e.jsx(te,{value:"PA",children:"Pennsylvania"}),e.jsx(te,{value:"MI",children:"Michigan"}),e.jsx(te,{value:"OH",children:"Ohio"})]})]})}),e.jsx("div",{className:"flex-1",children:e.jsx(re,{placeholder:"Filter by City (e.g., Chicago)",value:r,onChange:l=>n(l.target.value),"data-testid":"input-city-filter",className:"h-10"})})]}),i?e.jsxs("div",{className:"space-y-8","data-testid":"loading-skeletons",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 text-muted-foreground",children:[e.jsx(tn,{className:"w-5 h-5 animate-spin"}),e.jsx("p",{children:"Loading neighborhoods..."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(l=>e.jsxs($,{className:"h-full",children:[e.jsx(tt,{className:"h-32 w-full rounded-t-lg"}),e.jsxs(le,{className:"pb-3",children:[e.jsx("div",{className:"flex items-start justify-between gap-2",children:e.jsx(tt,{className:"h-6 w-3/4"})}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(tt,{className:"h-4 w-4"}),e.jsx(tt,{className:"h-4 w-32"})]})]}),e.jsxs(V,{className:"space-y-3",children:[e.jsx(tt,{className:"h-4 w-full"}),e.jsx(tt,{className:"h-4 w-5/6"}),e.jsx(tt,{className:"h-4 w-4/6"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(tt,{className:"h-3 w-3"}),e.jsx(tt,{className:"h-3 w-24"})]})]})]},l))})]}):o.length===0?e.jsx($,{className:"text-center py-12",children:e.jsxs(V,{className:"pt-6",children:[e.jsx(Rx,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No Neighborhoods Found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:t||r?"No neighborhoods match your filters.":"Be the first to add a neighborhood."}),e.jsx(He,{href:"/create-neighborhood",children:e.jsxs(O,{"data-testid":"button-create-first-neighborhood",children:[e.jsx(bs,{className:"w-4 h-4 mr-2"}),"Add First Neighborhood"]})})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(l=>e.jsx(He,{href:`/neighborhood/${l.id}`,children:e.jsxs($,{className:"hover-elevate h-full","data-testid":`card-neighborhood-${l.id}`,children:[l.logoUrl&&e.jsx("div",{className:"h-32 bg-gradient-to-br from-primary/5 to-primary/10 flex items-center justify-center overflow-hidden rounded-t-lg",children:e.jsx("img",{src:l.logoUrl,alt:`${l.name} logo`,className:"max-h-full max-w-full object-contain p-4"})}),e.jsxs(le,{className:"pb-3",children:[e.jsx("div",{className:"flex items-start justify-between gap-2",children:e.jsx(ge,{className:"text-xl",children:l.name})}),e.jsxs($e,{className:"flex items-center gap-1 text-sm",children:[e.jsx(tr,{className:"w-4 h-4"}),l.city,", ",l.state]})]}),e.jsxs(V,{className:"space-y-3",children:[l.description&&e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-3",children:l.description}),l.foundedYear&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(lf,{className:"w-3 h-3"}),"Founded ",l.foundedYear]})]})]})},l.id))}),a&&a.count>0&&e.jsxs("div",{className:"text-center mt-12 text-sm text-muted-foreground",children:["Showing ",o.length," of ",a.count," neighborhood",a.count===1?"":"s"]})]})}function pce(){const[,t]=ja(),{toast:s}=Ht(),r=Or({resolver:$r(qle),defaultValues:{name:"",city:"",state:"",description:"",logoUrl:"",backgroundImage:"",foundedYear:"",population:void 0,landmarks:[],notableFeatures:"",isPublic:!0}}),n=yt({mutationFn:i=>pt("POST","/api/neighborhoods",i),onSuccess:()=>{xt.invalidateQueries({queryKey:["/api/neighborhoods"]}),s({title:"Neighborhood Created",description:"The neighborhood has been created successfully."}),t("/neighborhoods")},onError:i=>{s({title:"Error",description:i.message||"Failed to create neighborhood",variant:"destructive"})}}),a=i=>{n.mutate(i)};return e.jsxs("div",{className:"container max-w-4xl mx-auto px-4 py-12",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center",children:e.jsx(Rx,{className:"w-6 h-6 text-primary"})}),e.jsx("h1",{className:"text-4xl font-serif font-bold",children:"Add Neighborhood"})]}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Add your community to the platform. Share its story, celebrate its legends, and connect with others who call it home."})]}),e.jsx(Wr,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(a),className:"space-y-6",children:[e.jsxs($,{children:[e.jsxs(le,{children:[e.jsx(ge,{children:"Basic Information"}),e.jsx($e,{children:"Essential details about the neighborhood"})]}),e.jsxs(V,{className:"space-y-4",children:[e.jsx(fe,{control:r.control,name:"name",render:({field:i})=>e.jsxs(me,{children:[e.jsx(he,{children:"Neighborhood Name *"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"e.g., South Side, Bronzeville, Harlem",...i,"data-testid":"input-name"})}),e.jsx(ye,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(fe,{control:r.control,name:"city",render:({field:i})=>e.jsxs(me,{children:[e.jsx(he,{children:"City *"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"Chicago",...i,"data-testid":"input-city"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:r.control,name:"state",render:({field:i})=>e.jsxs(me,{children:[e.jsx(he,{children:"State *"}),e.jsxs(Rt,{onValueChange:i.onChange,value:i.value,children:[e.jsx(xe,{children:e.jsx(Mt,{"data-testid":"select-state",children:e.jsx(Ft,{placeholder:"Select state"})})}),e.jsxs(Lt,{children:[e.jsx(te,{value:"CA",children:"California"}),e.jsx(te,{value:"IL",children:"Illinois"}),e.jsx(te,{value:"NY",children:"New York"}),e.jsx(te,{value:"TX",children:"Texas"}),e.jsx(te,{value:"FL",children:"Florida"}),e.jsx(te,{value:"GA",children:"Georgia"}),e.jsx(te,{value:"PA",children:"Pennsylvania"}),e.jsx(te,{value:"MI",children:"Michigan"}),e.jsx(te,{value:"OH",children:"Ohio"})]})]}),e.jsx(ye,{})]})})]}),e.jsx(fe,{control:r.control,name:"description",render:({field:i})=>e.jsxs(me,{children:[e.jsx(he,{children:"Description"}),e.jsx(xe,{children:e.jsx(Gt,{placeholder:"Share what makes this neighborhood special - its history, culture, and community...",className:"min-h-[120px]",...i,value:i.value||"","data-testid":"textarea-description"})}),e.jsx(ye,{})]})})]})]}),e.jsxs($,{children:[e.jsxs(le,{children:[e.jsxs(ge,{children:[e.jsx(zd,{className:"w-5 h-5 inline mr-2"}),"Visual Identity"]}),e.jsx($e,{children:"Logo and background image for the neighborhood"})]}),e.jsxs(V,{className:"space-y-4",children:[e.jsx(fe,{control:r.control,name:"logoUrl",render:({field:i})=>e.jsxs(me,{children:[e.jsx(he,{children:"Neighborhood Logo (Image URL)"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"Paste logo image URL (e.g., https://i.imgur.com/logo.png)",...i,value:i.value||"","data-testid":"input-logo-url"})}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Upload your logo to imgur.com, imgbb.com, or similar and paste the URL here"}),e.jsx(ye,{})]})}),e.jsx(fe,{control:r.control,name:"backgroundImage",render:({field:i})=>e.jsxs(me,{children:[e.jsx(he,{children:"Background Image (Optional)"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"Paste background image URL",...i,value:i.value||"","data-testid":"input-background-image"})}),e.jsx(ye,{})]})})]})]}),e.jsxs($,{children:[e.jsxs(le,{children:[e.jsx(ge,{children:"Additional Details"}),e.jsx($e,{children:"Optional information about the neighborhood"})]}),e.jsxs(V,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(fe,{control:r.control,name:"foundedYear",render:({field:i})=>e.jsxs(me,{children:[e.jsx(he,{children:"Founded Year"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"e.g., 1920",...i,value:i.value||"","data-testid":"input-founded-year"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:r.control,name:"population",render:({field:i})=>e.jsxs(me,{children:[e.jsx(he,{children:"Population"}),e.jsx(xe,{children:e.jsx(re,{type:"number",placeholder:"e.g., 25000",...i,value:i.value??"",onChange:o=>i.onChange(o.target.value?parseInt(o.target.value):void 0),"data-testid":"input-population"})}),e.jsx(ye,{})]})})]}),e.jsx(fe,{control:r.control,name:"notableFeatures",render:({field:i})=>e.jsxs(me,{children:[e.jsx(he,{children:"Notable Features"}),e.jsx(xe,{children:e.jsx(Gt,{placeholder:"What makes this neighborhood unique? Famous spots, cultural significance, etc...",className:"min-h-[100px]",...i,value:i.value||"","data-testid":"textarea-notable-features"})}),e.jsx(ye,{})]})})]})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(O,{type:"button",variant:"outline",onClick:()=>t("/neighborhoods"),"data-testid":"button-cancel",children:"Cancel"}),e.jsx(O,{type:"submit",disabled:n.isPending,"data-testid":"button-create-neighborhood",className:"bg-[hsl(45,80%,60%)] hover:bg-[hsl(45,80%,55%)] text-foreground",children:n.isPending?"Creating...":"Create Neighborhood"})]})]})})]})}function xce(){var i;const{id:t}=Ba(),{data:s,isLoading:r}=Xe({queryKey:["/api/neighborhoods",t],queryFn:async()=>{const o=await fetch(`/api/neighborhoods/${t}`);if(!o.ok)throw new Error("Failed to fetch neighborhood");return o.json()}}),{data:n}=Xe({queryKey:["/api/hood-memorials",s==null?void 0:s.city,s==null?void 0:s.state],enabled:!!s,queryFn:async()=>{const o=new URLSearchParams;s!=null&&s.city&&o.append("city",s.city),s!=null&&s.state&&o.append("state",s.state);const l=await fetch(`/api/hood-memorials?${o.toString()}`);if(!l.ok)throw new Error("Failed to fetch");return l.json()}}),a=((i=n==null?void 0:n.memorials)==null?void 0:i.filter(o=>{var l,c;return((l=o.neighborhoodName)==null?void 0:l.toLowerCase())===((c=s==null?void 0:s.name)==null?void 0:c.toLowerCase())}))||[];return r?e.jsxs("div",{className:"min-h-screen","data-testid":"loading-skeletons",children:[e.jsx("div",{className:"h-64 bg-gradient-to-br from-primary/10 to-primary/5 relative",children:e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx(tt,{className:"w-24 h-24 mx-auto rounded-lg"}),e.jsx(tt,{className:"h-10 w-64 mx-auto"}),e.jsx(tt,{className:"h-6 w-48 mx-auto"})]})})}),e.jsxs("div",{className:"container max-w-6xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-6 text-muted-foreground",children:[e.jsx(tn,{className:"w-5 h-5 animate-spin"}),e.jsx("p",{children:"Loading neighborhood details..."})]}),e.jsx(tt,{className:"h-9 w-48 mb-6"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs($,{children:[e.jsx(le,{children:e.jsx(tt,{className:"h-6 w-48"})}),e.jsxs(V,{className:"space-y-3",children:[e.jsx(tt,{className:"h-4 w-full"}),e.jsx(tt,{className:"h-4 w-full"}),e.jsx(tt,{className:"h-4 w-3/4"})]})]}),e.jsxs($,{children:[e.jsx(le,{children:e.jsx(tt,{className:"h-6 w-48"})}),e.jsxs(V,{className:"space-y-3",children:[e.jsx(tt,{className:"h-4 w-full"}),e.jsx(tt,{className:"h-4 w-5/6"})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs($,{children:[e.jsx(le,{children:e.jsx(tt,{className:"h-5 w-32"})}),e.jsxs(V,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(tt,{className:"h-4 w-4"}),e.jsx(tt,{className:"h-4 w-32"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(tt,{className:"h-4 w-4"}),e.jsx(tt,{className:"h-4 w-40"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(tt,{className:"h-4 w-4"}),e.jsx(tt,{className:"h-4 w-28"})]})]})]}),e.jsx(tt,{className:"h-10 w-full rounded"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(tt,{className:"h-8 w-64"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(o=>e.jsxs($,{children:[e.jsxs(le,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 mb-3",children:[e.jsx(tt,{className:"h-6 w-2/3"}),e.jsx(tt,{className:"w-20 h-20 rounded-lg"})]}),e.jsx(tt,{className:"h-4 w-full"})]}),e.jsxs(V,{className:"space-y-3",children:[e.jsx(tt,{className:"h-4 w-full"}),e.jsx(tt,{className:"h-4 w-3/4"}),e.jsx(tt,{className:"h-9 w-full rounded"})]})]},o))})]})]})]}):s?e.jsxs("div",{className:"min-h-screen",children:[s.backgroundImage&&e.jsx("div",{className:"h-64 bg-cover bg-center relative",style:{backgroundImage:`linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url(${s.backgroundImage})`},children:e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[s.logoUrl&&e.jsx("img",{src:s.logoUrl,alt:s.name,className:"w-24 h-24 mx-auto mb-4 object-contain bg-white/10 backdrop-blur-sm rounded-lg p-2"}),e.jsx("h1",{className:"text-4xl font-serif font-bold text-white",children:s.name}),e.jsxs("p",{className:"text-xl text-white/90 flex items-center justify-center gap-2 mt-2",children:[e.jsx(tr,{className:"w-5 h-5"}),s.city,", ",s.state]})]})})}),e.jsxs("div",{className:"container max-w-6xl mx-auto px-4 py-8",children:[e.jsx(He,{href:"/neighborhoods",children:e.jsxs(O,{variant:"ghost",size:"sm",className:"mb-6","data-testid":"button-back",children:[e.jsx(Sr,{className:"w-4 h-4 mr-2"}),"Back to Neighborhoods"]})}),!s.backgroundImage&&e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[s.logoUrl?e.jsx("img",{src:s.logoUrl,alt:s.name,className:"w-16 h-16 object-contain"}):e.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center",children:e.jsx(Rx,{className:"w-8 h-8 text-primary"})}),e.jsx("h1",{className:"text-4xl font-serif font-bold",children:s.name})]}),e.jsxs("p",{className:"text-xl text-muted-foreground flex items-center justify-center gap-2",children:[e.jsx(tr,{className:"w-5 h-5"}),s.city,", ",s.state]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.description&&e.jsxs($,{children:[e.jsx(le,{children:e.jsxs(ge,{children:["About ",s.name]})}),e.jsx(V,{children:e.jsx("p",{className:"text-muted-foreground whitespace-pre-line",children:s.description})})]}),s.notableFeatures&&e.jsxs($,{children:[e.jsx(le,{children:e.jsx(ge,{children:"Notable Features"})}),e.jsx(V,{children:e.jsx("p",{className:"text-muted-foreground whitespace-pre-line",children:s.notableFeatures})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs($,{children:[e.jsx(le,{children:e.jsx(ge,{className:"text-lg",children:"Quick Facts"})}),e.jsxs(V,{className:"space-y-3",children:[s.foundedYear&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(lf,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Founded:"})," ",s.foundedYear]})]}),s.population&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ms,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Population:"})," ",s.population.toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_t,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Memorials:"})," ",a.length]})]})]})]}),e.jsx(He,{href:"/create-hood-memorial",children:e.jsxs(O,{className:"w-full","data-testid":"button-create-memorial",children:[e.jsx(_t,{className:"w-4 h-4 mr-2"}),"Create Hood Memorial"]})})]})]}),e.jsxs($,{children:[e.jsxs(le,{children:[e.jsxs(ge,{children:["Hood Memorials from ",s.name]}),e.jsx($e,{children:"Honoring the legends and community leaders from this neighborhood"})]}),e.jsx(V,{children:a.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(_t,{className:"w-12 h-12 text-muted-foreground mx-auto mb-3"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"No memorials yet for this neighborhood"}),e.jsx(He,{href:"/create-hood-memorial",children:e.jsx(O,{size:"sm",children:"Create First Memorial"})})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.map(o=>e.jsxs($,{className:"hover-elevate","data-testid":`memorial-${o.id}`,children:[e.jsxs(le,{className:"pb-3",children:[e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{children:[e.jsx(ge,{className:"text-lg",children:o.name}),o.nickname&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:['"',o.nickname,'"']})]})}),o.legendStatus&&e.jsx(ze,{variant:"secondary",className:"w-fit",children:o.legendStatus})]}),e.jsxs(V,{className:"space-y-2",children:[o.role&&e.jsx("p",{className:"text-sm font-medium",children:o.role}),o.epitaph&&e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:o.epitaph}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[o.birthDate," - ",o.deathDate]})]})]},o.id))})})]})]})]}):e.jsxs("div",{className:"container max-w-4xl mx-auto px-4 py-12 text-center",children:[e.jsx(Rx,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Neighborhood Not Found"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"This neighborhood doesn't exist or has been removed."}),e.jsx(He,{href:"/neighborhoods",children:e.jsx(O,{children:"View All Neighborhoods"})})]})}function gce(){const[t,s]=N.useState({schoolName:"",graduationYear:"",major:""}),[r,n]=N.useState({schoolName:"",graduationYear:"",major:""}),[a,i]=N.useState(0),[o,l]=N.useState(""),c=12,{data:d,isLoading:u}=Xe({queryKey:["/api/alumni-memorials",r,a],queryFn:async()=>{const g=new URLSearchParams;r.schoolName&&g.append("schoolName",r.schoolName),r.graduationYear&&g.append("graduationYear",r.graduationYear),r.major&&g.append("major",r.major),g.append("limit",c.toString()),g.append("offset",(a*c).toString());const y=await fetch(`/api/alumni-memorials?${g.toString()}`,{credentials:"include"});if(!y.ok)throw new Error(`HTTP error! status: ${y.status}`);return await y.json()}}),{data:m=[]}=Xe({queryKey:["/api/alumni-memorials/schools/autocomplete",o],queryFn:async()=>{const g=new URLSearchParams({q:o}),y=await fetch(`/api/alumni-memorials/schools/autocomplete?${g.toString()}`,{credentials:"include"});if(!y.ok)throw new Error(`HTTP error! status: ${y.status}`);return await y.json()},enabled:o.length>2}),f=()=>{n(t),i(0)},h=()=>{s({schoolName:"",graduationYear:"",major:""}),n({schoolName:"",graduationYear:"",major:""}),i(0)},p=d?Math.ceil(d.count/c):0;return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-blue-800 to-blue-950",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 text-yellow-400",children:[e.jsx(Za,{className:"w-10 h-10"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white","data-testid":"text-page-title",children:"Alumni Memorials"}),e.jsx("p",{className:"text-gray-300",children:"Honoring the lives and legacies of our alumni"})]})]}),e.jsx(He,{href:"/alumni-memorials/create",children:e.jsxs(O,{className:"bg-yellow-400 text-blue-900 hover:bg-yellow-500","data-testid":"button-create-memorial",children:[e.jsx(Za,{className:"w-4 h-4 mr-2"}),"Create Memorial"]})})]}),e.jsxs("div",{className:"grid md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"md:col-span-1",children:e.jsxs($,{className:"bg-white/95 backdrop-blur sticky top-4",children:[e.jsx(le,{children:e.jsxs(ge,{className:"flex items-center gap-2 text-blue-900",children:[e.jsx(T0,{className:"w-5 h-5"}),"Filters"]})}),e.jsxs(V,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(De,{htmlFor:"filter-school",children:"School Name"}),e.jsx(re,{id:"filter-school",placeholder:"Search schools...",value:t.schoolName,onChange:g=>{s({...t,schoolName:g.target.value}),l(g.target.value)},"data-testid":"input-filter-school"}),m.length>0&&e.jsx("div",{className:"mt-2 border rounded-md bg-white shadow-lg max-h-48 overflow-y-auto",children:m.map(g=>e.jsx("button",{type:"button",className:"w-full text-left px-3 py-2 hover-elevate text-sm",onClick:()=>{s({...t,schoolName:g}),l("")},"data-testid":`school-filter-option-${g}`,children:g},g))})]}),e.jsxs("div",{children:[e.jsx(De,{htmlFor:"filter-year",children:"Graduation Year"}),e.jsx(re,{id:"filter-year",placeholder:"e.g., 2015",value:t.graduationYear,onChange:g=>s({...t,graduationYear:g.target.value}),"data-testid":"input-filter-year"})]}),e.jsxs("div",{children:[e.jsx(De,{htmlFor:"filter-major",children:"Major"}),e.jsx(re,{id:"filter-major",placeholder:"e.g., Computer Science",value:t.major,onChange:g=>s({...t,major:g.target.value}),"data-testid":"input-filter-major"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(O,{onClick:f,className:"flex-1 bg-blue-900 hover:bg-blue-800","data-testid":"button-apply-filters",children:[e.jsx(Cc,{className:"w-4 h-4 mr-2"}),"Search"]}),e.jsx(O,{variant:"outline",onClick:h,"data-testid":"button-clear-filters",children:"Clear"})]})]})]})}),e.jsx("div",{className:"md:col-span-3",children:u?e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((g,y)=>e.jsx(tt,{className:"h-64"},y))}):d&&d.memorials.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-6",children:e.jsxs("p",{className:"text-gray-300 text-sm","data-testid":"text-results-count",children:["Showing ",d.memorials.length," of ",d.count," memorials"]})}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.memorials.map(g=>e.jsx(He,{href:`/alumni-memorials/${g.id}`,children:e.jsxs($,{className:"hover-elevate cursor-pointer h-full bg-white/95 backdrop-blur transition-all","data-testid":`memorial-card-${g.id}`,children:[e.jsxs(le,{children:[e.jsx("div",{className:"w-full h-32 border-2 border-dashed border-blue-300 rounded-md flex items-center justify-center bg-blue-50 mb-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Za,{className:"w-12 h-12 text-blue-900 mx-auto mb-1"}),e.jsx("p",{className:"text-xs text-gray-500",children:"College Logo"})]})}),e.jsx(ge,{className:"text-blue-900 text-lg line-clamp-2","data-testid":`memorial-name-${g.id}`,children:g.preferredName||g.fullName}),e.jsxs($e,{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(uo,{className:"w-3 h-3"}),e.jsx("span",{className:"line-clamp-1",children:g.schoolName})]}),g.graduationYear&&e.jsx("div",{className:"text-sm text-gray-600",children:g.graduationYear})]})]}),e.jsxs(V,{children:[e.jsxs("div",{className:"flex flex-wrap gap-2",children:[g.degreeType&&e.jsx(ze,{variant:"secondary",className:"text-xs",children:g.degreeType}),g.major&&e.jsx(ze,{variant:"outline",className:"text-xs",children:g.major})]}),g.biography&&e.jsx("p",{className:"text-sm text-gray-600 mt-3 line-clamp-3",children:g.biography})]})]})},g.id))}),p>1&&e.jsxs("div",{className:"flex items-center justify-center gap-2 mt-8",children:[e.jsx(O,{variant:"outline",onClick:()=>i(Math.max(0,a-1)),disabled:a===0,className:"bg-white","data-testid":"button-prev-page",children:"Previous"}),e.jsx("div",{className:"flex items-center gap-2",children:Array.from({length:Math.min(5,p)},(g,y)=>{let v=y;return p>5&&(a<3?v=y:a>p-4?v=p-5+y:v=a-2+y),e.jsx(O,{variant:a===v?"default":"outline",onClick:()=>i(v),className:a===v?"bg-yellow-400 text-blue-900":"bg-white","data-testid":`button-page-${v}`,children:v+1},v)})}),e.jsx(O,{variant:"outline",onClick:()=>i(Math.min(p-1,a+1)),disabled:a>=p-1,className:"bg-white","data-testid":"button-next-page",children:"Next"})]})]}):e.jsx($,{className:"bg-white/95 backdrop-blur",children:e.jsxs(V,{className:"pt-12 pb-12 text-center",children:[e.jsx(Za,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"No memorials found"}),e.jsx("p",{className:"text-gray-500 mb-6",children:t.schoolName||t.graduationYear||t.major?"Try adjusting your filters to see more results":"Be the first to create an alumni memorial"}),t.schoolName||t.graduationYear||t.major?e.jsx(O,{variant:"outline",onClick:h,"data-testid":"button-clear-filters-empty",children:"Clear Filters"}):e.jsx(He,{href:"/alumni-memorials/create",children:e.jsx(O,{className:"bg-yellow-400 text-blue-900 hover:bg-yellow-500",children:"Create Memorial"})})]})})})]})]})})}const Km=[{id:1,title:"Personal Information",description:"Basic information about the alumnus"},{id:2,title:"Education",description:"Academic background and achievements"},{id:3,title:"Activities & Achievements",description:"Campus involvement and accomplishments"},{id:4,title:"Review",description:"Review and submit"}],vce=["Associate","Bachelor","Master","PhD","Honorary","Certificate"];function yce(){const[,t]=ja(),{toast:s}=Ht(),[r,n]=N.useState(1),[a,i]=N.useState(""),[o,l]=N.useState([]),[c,d]=N.useState([]),u=Or({resolver:$r(Vle),defaultValues:{fullName:"",preferredName:"",birthDate:"",deathDate:"",biography:"",epitaph:"",schoolName:"",campusLocation:"",graduationYear:"",degreeType:"",major:"",classNotes:"",isPublic:!0,activities:[],notableAchievements:[]}}),{data:m=[]}=Xe({queryKey:["/api/alumni-memorials/schools/autocomplete",a],enabled:a.length>2}),f=yt({mutationFn:async E=>await(await pt("POST","/api/alumni-memorials",E)).json(),onSuccess:E=>{xt.invalidateQueries({queryKey:["/api/alumni-memorials"]}),s({title:"Success",description:"Alumni memorial created successfully"}),t(`/alumni-memorials/${E.id}`)},onError:E=>{s({title:"Error",description:E.message||"Failed to create memorial",variant:"destructive"})}}),h=E=>{f.mutate({...E,activities:o.length>0?o:void 0,notableAchievements:c.length>0?c:void 0})},p=()=>{l([...o,{name:"",role:"",years:""}])},g=(E,L,T)=>{const M=[...o];M[E][L]=T,l(M)},y=E=>{l(o.filter((L,T)=>T!==E))},v=()=>{d([...c,""])},j=(E,L)=>{const T=[...c];T[E]=L,d(T)},w=E=>{d(c.filter((L,T)=>T!==E))},_=()=>{r<Km.length&&n(r+1)},P=()=>{r>1&&n(r-1)};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-blue-800 to-blue-950",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-8 text-yellow-400",children:[e.jsx(Za,{className:"w-10 h-10"}),e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Create Alumni Memorial"})]}),e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"flex items-center justify-between",children:Km.map((E,L)=>e.jsxs("div",{className:"flex items-center flex-1",children:[e.jsxs("div",{className:"flex flex-col items-center flex-1",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-semibold ${r>E.id?"bg-yellow-400 text-blue-900":r===E.id?"bg-blue-600 text-white ring-4 ring-yellow-400":"bg-blue-800 text-gray-400"}`,"data-testid":`step-indicator-${E.id}`,children:r>E.id?e.jsx($n,{className:"w-5 h-5"}):E.id}),e.jsx("div",{className:"mt-2 text-center",children:e.jsx("div",{className:`text-sm font-medium ${r>=E.id?"text-white":"text-gray-400"}`,children:E.title})})]}),L<Km.length-1&&e.jsx("div",{className:`h-1 flex-1 mx-2 ${r>E.id?"bg-yellow-400":"bg-blue-800"}`})]},E.id))})}),e.jsx("form",{onSubmit:u.handleSubmit(h),children:e.jsxs($,{className:"bg-white/95 backdrop-blur",children:[e.jsxs(le,{children:[e.jsx(ge,{className:"text-blue-900",children:Km[r-1].title}),e.jsx($e,{children:Km[r-1].description})]}),e.jsxs(V,{className:"space-y-6",children:[r===1&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(De,{htmlFor:"fullName",children:"Full Name *"}),e.jsx(re,{id:"fullName",...u.register("fullName"),placeholder:"John Michael Smith","data-testid":"input-full-name"}),u.formState.errors.fullName&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:u.formState.errors.fullName.message})]}),e.jsxs("div",{children:[e.jsx(De,{htmlFor:"preferredName",children:"Preferred Name"}),e.jsx(re,{id:"preferredName",...u.register("preferredName"),placeholder:"Mike Smith","data-testid":"input-preferred-name"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(De,{htmlFor:"birthDate",children:"Birth Date *"}),e.jsx(re,{id:"birthDate",type:"date",...u.register("birthDate"),"data-testid":"input-birth-date"}),u.formState.errors.birthDate&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:u.formState.errors.birthDate.message})]}),e.jsxs("div",{children:[e.jsx(De,{htmlFor:"deathDate",children:"Death Date *"}),e.jsx(re,{id:"deathDate",type:"date",...u.register("deathDate"),"data-testid":"input-death-date"}),u.formState.errors.deathDate&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:u.formState.errors.deathDate.message})]})]}),e.jsxs("div",{children:[e.jsx(De,{htmlFor:"biography",children:"Biography"}),e.jsx(Gt,{id:"biography",...u.register("biography"),placeholder:"Tell us about their life, accomplishments, and impact...",rows:6,"data-testid":"textarea-biography"})]}),e.jsxs("div",{children:[e.jsx(De,{htmlFor:"epitaph",children:"Epitaph"}),e.jsx(Gt,{id:"epitaph",...u.register("epitaph"),placeholder:"A memorable quote or message...",rows:3,"data-testid":"textarea-epitaph"})]})]}),r===2&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(De,{htmlFor:"schoolName",children:"School/University Name *"}),e.jsx(re,{id:"schoolName",...u.register("schoolName"),placeholder:"Start typing to search...",onChange:E=>{u.setValue("schoolName",E.target.value),i(E.target.value)},"data-testid":"input-school-name"}),m.length>0&&e.jsx("div",{className:"mt-2 border rounded-md bg-white shadow-lg",children:m.map(E=>e.jsx("button",{type:"button",className:"w-full text-left px-4 py-2 hover-elevate",onClick:()=>{u.setValue("schoolName",E),i("")},"data-testid":`school-option-${E}`,children:E},E))}),u.formState.errors.schoolName&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:u.formState.errors.schoolName.message})]}),e.jsxs("div",{children:[e.jsx(De,{htmlFor:"campusLocation",children:"Campus Location"}),e.jsx(re,{id:"campusLocation",...u.register("campusLocation"),placeholder:"City, State","data-testid":"input-campus-location"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(De,{htmlFor:"graduationYear",children:"Graduation Year"}),e.jsx(re,{id:"graduationYear",...u.register("graduationYear"),placeholder:"Class of '09 or 2009","data-testid":"input-graduation-year"})]}),e.jsxs("div",{children:[e.jsx(De,{htmlFor:"degreeType",children:"Degree Type"}),e.jsxs(Rt,{onValueChange:E=>u.setValue("degreeType",E),children:[e.jsx(Mt,{"data-testid":"select-degree-type",children:e.jsx(Ft,{placeholder:"Select degree type"})}),e.jsx(Lt,{children:vce.map(E=>e.jsx(te,{value:E,"data-testid":`degree-option-${E}`,children:E},E))})]})]})]}),e.jsxs("div",{children:[e.jsx(De,{htmlFor:"major",children:"Major/Department"}),e.jsx(re,{id:"major",...u.register("major"),placeholder:"e.g., Computer Science, History, Business","data-testid":"input-major"})]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-md p-6 text-center",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"College Logo (Permission Required)"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Please ensure you have permission to use the institution's logo before uploading"})]})]}),r===3&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(De,{children:"Campus Activities"}),e.jsx(O,{type:"button",variant:"outline",size:"sm",onClick:p,"data-testid":"button-add-activity",children:"Add Activity"})]}),o.map((E,L)=>e.jsxs("div",{className:"grid grid-cols-12 gap-2 mb-3",children:[e.jsx(re,{placeholder:"Activity name",value:E.name,onChange:T=>g(L,"name",T.target.value),className:"col-span-4","data-testid":`input-activity-name-${L}`}),e.jsx(re,{placeholder:"Role",value:E.role,onChange:T=>g(L,"role",T.target.value),className:"col-span-3","data-testid":`input-activity-role-${L}`}),e.jsx(re,{placeholder:"Years",value:E.years,onChange:T=>g(L,"years",T.target.value),className:"col-span-3","data-testid":`input-activity-years-${L}`}),e.jsx(O,{type:"button",variant:"ghost",size:"sm",onClick:()=>y(L),className:"col-span-2","data-testid":`button-remove-activity-${L}`,children:"Remove"})]},L))]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(De,{children:"Notable Achievements"}),e.jsx(O,{type:"button",variant:"outline",size:"sm",onClick:v,"data-testid":"button-add-achievement",children:"Add Achievement"})]}),c.map((E,L)=>e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx(re,{placeholder:"Achievement description",value:E,onChange:T=>j(L,T.target.value),className:"flex-1","data-testid":`input-achievement-${L}`}),e.jsx(O,{type:"button",variant:"ghost",size:"sm",onClick:()=>w(L),"data-testid":`button-remove-achievement-${L}`,children:"Remove"})]},L))]}),e.jsxs("div",{children:[e.jsx(De,{htmlFor:"classNotes",children:"Class Notes"}),e.jsx(Gt,{id:"classNotes",...u.register("classNotes"),placeholder:"Share memories, stories, or messages from classmates...",rows:6,"data-testid":"textarea-class-notes"})]})]}),r===4&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"bg-blue-50 p-6 rounded-lg space-y-4",children:[e.jsx("h3",{className:"font-semibold text-blue-900 text-lg",children:"Review Your Memorial"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Full Name"}),e.jsx("p",{className:"font-medium",children:u.getValues("fullName")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"School"}),e.jsx("p",{className:"font-medium",children:u.getValues("schoolName")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Graduation Year"}),e.jsx("p",{className:"font-medium",children:u.getValues("graduationYear")||"Not specified"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Degree"}),e.jsx("p",{className:"font-medium",children:u.getValues("degreeType")||"Not specified"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Major"}),e.jsx("p",{className:"font-medium",children:u.getValues("major")||"Not specified"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Activities"}),e.jsxs("p",{className:"font-medium",children:[o.length," activities"]})]})]}),u.getValues("biography")&&e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Biography"}),e.jsx("p",{className:"text-sm mt-1",children:u.getValues("biography")})]})]})}),e.jsxs("div",{className:"flex justify-between pt-6 border-t",children:[e.jsxs(O,{type:"button",variant:"outline",onClick:P,disabled:r===1,"data-testid":"button-prev-step",children:[e.jsx(Sr,{className:"w-4 h-4 mr-2"}),"Previous"]}),r<Km.length?e.jsxs(O,{type:"button",onClick:_,className:"bg-blue-900 hover:bg-blue-800","data-testid":"button-next-step",children:["Next",e.jsx(j_,{className:"w-4 h-4 ml-2"})]}):e.jsx(O,{type:"submit",disabled:f.isPending,className:"bg-yellow-400 text-blue-900 hover:bg-yellow-500","data-testid":"button-submit-memorial",children:f.isPending?"Creating...":"Create Memorial"})]})]})]})})]})})}function jce(){const{id:t}=Ba(),{data:s,isLoading:r,error:n}=Xe({queryKey:[`/api/alumni-memorials/${t}`]});if(r)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-blue-800 to-blue-950",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[e.jsx(tt,{className:"h-8 w-48 mb-8"}),e.jsx(tt,{className:"h-64 w-full mb-8"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsx(tt,{className:"h-48"}),e.jsx(tt,{className:"h-48"})]})]})});if(n||!s)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-blue-800 to-blue-950 flex items-center justify-center",children:e.jsx($,{className:"max-w-md",children:e.jsxs(V,{className:"pt-6",children:[e.jsx("p",{className:"text-center text-gray-600",children:"Memorial not found"}),e.jsx(He,{href:"/alumni-memorials",children:e.jsx(O,{className:"w-full mt-4","data-testid":"button-back-to-browse",children:"Back to Alumni Memorials"})})]})})});const a=s.activities||[],i=s.notableAchievements||[];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-blue-800 to-blue-950",children:[e.jsx("div",{className:"bg-blue-950 border-b-4 border-yellow-400",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-12",children:[e.jsx(He,{href:"/alumni-memorials",children:e.jsxs(O,{variant:"ghost",className:"text-white mb-6","data-testid":"button-back",children:[e.jsx(Sr,{className:"w-4 h-4 mr-2"}),"Back to Memorials"]})}),e.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-8",children:[e.jsx("div",{className:"w-48 h-48 border-4 border-dashed border-yellow-400/50 rounded-lg flex items-center justify-center bg-blue-900/30",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Za,{className:"w-16 h-16 text-yellow-400 mx-auto mb-2"}),e.jsx("p",{className:"text-xs text-gray-400",children:"College Logo"})]})}),e.jsxs("div",{className:"flex-1 text-center md:text-left",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-white mb-2","data-testid":"text-memorial-name",children:s.preferredName||s.fullName}),s.preferredName&&e.jsx("p",{className:"text-xl text-gray-300 mb-4",children:s.fullName}),e.jsxs("div",{className:"flex flex-wrap gap-3 justify-center md:justify-start mb-4",children:[e.jsxs(ze,{className:"bg-yellow-400 text-blue-900 text-lg px-4 py-2","data-testid":"badge-school",children:[e.jsx(uo,{className:"w-4 h-4 mr-2"}),s.schoolName]}),s.graduationYear&&e.jsxs(ze,{className:"bg-blue-700 text-white text-lg px-4 py-2","data-testid":"badge-graduation-year",children:[e.jsx(Za,{className:"w-4 h-4 mr-2"}),s.graduationYear]}),s.degreeType&&e.jsxs(ze,{className:"bg-blue-700 text-white text-lg px-4 py-2","data-testid":"badge-degree",children:[s.degreeType,s.major&&` in ${s.major}`]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-gray-300 justify-center md:justify-start",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(ds,{className:"w-4 h-4"}),s.birthDate," - ",s.deathDate]}),s.campusLocation&&e.jsx("span",{children:s.campusLocation})]})]})]})]})}),e.jsx("div",{className:"max-w-6xl mx-auto px-4 py-8",children:e.jsxs("div",{className:"grid gap-6",children:[s.biography&&e.jsxs($,{className:"bg-white/95 backdrop-blur",children:[e.jsx(le,{children:e.jsxs(ge,{className:"text-blue-900 flex items-center gap-2",children:[e.jsx(uo,{className:"w-5 h-5"}),"Biography"]})}),e.jsx(V,{children:e.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-wrap","data-testid":"text-biography",children:s.biography})})]}),s.epitaph&&e.jsx($,{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white border-2 border-yellow-400",children:e.jsx(V,{className:"pt-6",children:e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-2xl font-serif italic mb-2","data-testid":"text-epitaph",children:['"',s.epitaph,'"']})})})}),a.length>0&&e.jsxs($,{className:"bg-white/95 backdrop-blur",children:[e.jsx(le,{children:e.jsxs(ge,{className:"text-blue-900 flex items-center gap-2",children:[e.jsx(Ms,{className:"w-5 h-5"}),"Campus Activities & Involvement"]})}),e.jsx(V,{children:e.jsx("div",{className:"space-y-4",children:a.map((o,l)=>e.jsxs("div",{className:"flex items-start gap-4 p-4 bg-blue-50 rounded-lg","data-testid":`activity-${l}`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-900 flex items-center justify-center text-white font-bold flex-shrink-0",children:l+1}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-blue-900 mb-1",children:o.name}),e.jsx("p",{className:"text-sm text-gray-600",children:o.role}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:o.years})]})]},l))})})]}),i.length>0&&e.jsxs($,{className:"bg-white/95 backdrop-blur",children:[e.jsx(le,{children:e.jsxs(ge,{className:"text-blue-900 flex items-center gap-2",children:[e.jsx(Uo,{className:"w-5 h-5"}),"Notable Achievements"]})}),e.jsx(V,{children:e.jsx("div",{className:"space-y-3",children:i.map((o,l)=>e.jsxs("div",{className:"flex items-start gap-3","data-testid":`achievement-${l}`,children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-400 mt-2 flex-shrink-0"}),e.jsx("p",{className:"text-gray-700",children:o})]},l))})})]}),s.classNotes&&e.jsxs($,{className:"bg-white/95 backdrop-blur",children:[e.jsx(le,{children:e.jsxs(ge,{className:"text-blue-900 flex items-center gap-2",children:[e.jsx(Nn,{className:"w-5 h-5"}),"Class Notes & Memories"]})}),e.jsx(V,{children:e.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-wrap","data-testid":"text-class-notes",children:s.classNotes})})]})]})}),e.jsx("div",{className:"bg-blue-950 border-t-4 border-yellow-400 mt-12",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8 text-center",children:[e.jsx("p",{className:"text-gray-300 mb-4",children:"In Loving Memory"}),e.jsx(Za,{className:"w-12 h-12 text-yellow-400 mx-auto"})]})})]})}const bce=Dr({userEmail:we().email("Valid email is required"),fullName:we().min(1,"Full name is required"),birthDate:we().optional(),biography:we().min(10,"Please write at least a few sentences about yourself"),epitaph:we().optional(),finalWordsText:we().optional(),finalWordsVideoUrl:we().url().optional().or(wr("")),fontFamily:we().optional(),symbol:we().optional(),emergencyContactName:we().min(1,"Emergency contact name is required"),emergencyContactEmail:we().email("Valid email is required"),emergencyContactPhone:we().optional(),releaseInstructions:we().optional()});function Nce(){const{toast:t}=Ht(),[s,r]=N.useState(!1),n=Or({resolver:$r(bce),defaultValues:{userEmail:"",fullName:"",birthDate:"",biography:"",epitaph:"",finalWordsText:"",finalWordsVideoUrl:"",fontFamily:"",symbol:"",emergencyContactName:"",emergencyContactEmail:"",emergencyContactPhone:"",releaseInstructions:""}}),a=yt({mutationFn:async o=>await(await pt("POST","/api/self-obituary",o)).json(),onSuccess:()=>{r(!0),t({title:"Obituary Saved",description:"Your self-written obituary has been securely saved."})},onError:o=>{t({title:"Error",description:o.message,variant:"destructive"})}}),i=o=>{a.mutate(o)};return s?e.jsx("div",{className:"container max-w-3xl mx-auto px-4 py-12",children:e.jsxs($,{children:[e.jsxs(le,{className:"text-center",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mb-4",children:e.jsx(Oo,{className:"w-8 h-8 text-primary"})}),e.jsx(ge,{className:"text-2xl",children:"Obituary Saved Successfully"}),e.jsx($e,{children:"Your self-written obituary and final words are securely stored and will be released according to your instructions."})]}),e.jsxs(V,{className:"space-y-6",children:[e.jsxs("div",{className:"bg-muted/50 p-6 rounded-lg space-y-3",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(Od,{className:"w-4 h-4"}),"Your Information is Secure"]}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-2",children:[e.jsx("li",{children:" Your obituary is safely encrypted and stored"}),e.jsx("li",{children:" Your emergency contact will be notified when appropriate"}),e.jsx("li",{children:" You can update this information anytime using your email"}),e.jsx("li",{children:" Your final words will only be shared per your instructions"})]})]}),e.jsx("div",{className:"pt-4",children:e.jsx(O,{onClick:()=>{r(!1),n.reset()},variant:"outline",className:"w-full","data-testid":"button-create-another",children:"Create Another"})})]})]})}):e.jsxs("div",{className:"container max-w-4xl mx-auto px-4 py-12",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center",children:e.jsx(Un,{className:"w-6 h-6 text-primary"})}),e.jsx("h1",{className:"text-3xl font-serif font-bold",children:"Write Your Own Obituary"})]}),e.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Create a lasting legacy by writing your own life story and recording final words for loved ones. Your message will be safely stored and shared according to your wishes."})]}),e.jsx(Wr,{...n,children:e.jsxs("form",{onSubmit:n.handleSubmit(i),className:"space-y-6",children:[e.jsxs($,{children:[e.jsxs(le,{children:[e.jsx(ge,{children:"Your Information"}),e.jsx($e,{children:"Basic details about you"})]}),e.jsxs(V,{className:"space-y-4",children:[e.jsx(fe,{control:n.control,name:"userEmail",render:({field:o})=>e.jsxs(me,{children:[e.jsx(he,{children:"Your Email"}),e.jsx(xe,{children:e.jsx(re,{...o,type:"email",placeholder:"your.email@example.com","data-testid":"input-email"})}),e.jsx(Qt,{children:"Used to update your obituary in the future"}),e.jsx(ye,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(fe,{control:n.control,name:"fullName",render:({field:o})=>e.jsxs(me,{children:[e.jsx(he,{children:"Full Name"}),e.jsx(xe,{children:e.jsx(re,{...o,"data-testid":"input-fullname"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:n.control,name:"birthDate",render:({field:o})=>e.jsxs(me,{children:[e.jsx(he,{children:"Birth Date (Optional)"}),e.jsx(xe,{children:e.jsx(re,{...o,type:"date","data-testid":"input-birthdate"})}),e.jsx(ye,{})]})})]})]})]}),e.jsxs($,{children:[e.jsxs(le,{children:[e.jsx(ge,{children:"Your Life Story"}),e.jsx($e,{children:"Share your biography and legacy message"})]}),e.jsxs(V,{className:"space-y-4",children:[e.jsx(fe,{control:n.control,name:"biography",render:({field:o})=>e.jsxs(me,{children:[e.jsx(he,{children:"Biography"}),e.jsx(xe,{children:e.jsx(Gt,{...o,rows:8,placeholder:"Tell your life story: where you were born, your accomplishments, what mattered most to you...","data-testid":"input-biography"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:n.control,name:"epitaph",render:({field:o})=>e.jsxs(me,{children:[e.jsx(he,{children:"Epitaph (Optional)"}),e.jsx(xe,{children:e.jsx(re,{...o,placeholder:"A brief phrase to be remembered by...","data-testid":"input-epitaph"})}),e.jsx(ye,{})]})})]})]}),e.jsxs($,{children:[e.jsxs(le,{children:[e.jsx(ge,{children:"Personalization"}),e.jsx($e,{children:"Choose how your memorial will be displayed"})]}),e.jsx(V,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(fe,{control:n.control,name:"fontFamily",render:({field:o})=>e.jsxs(me,{children:[e.jsx(xe,{children:e.jsx(zie,{value:o.value,onChange:o.onChange,testId:"select-font"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:n.control,name:"symbol",render:({field:o})=>e.jsxs(me,{children:[e.jsx(xe,{children:e.jsx(qie,{value:o.value,onChange:o.onChange,testId:"select-symbol"})}),e.jsx(ye,{})]})})]})})]}),e.jsxs($,{children:[e.jsx(le,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center",children:e.jsx(_t,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{children:[e.jsx(ge,{children:"Final Words"}),e.jsx($e,{children:"Leave a message for your loved ones"})]})]})}),e.jsxs(V,{className:"space-y-4",children:[e.jsx(fe,{control:n.control,name:"finalWordsText",render:({field:o})=>e.jsxs(me,{children:[e.jsx(he,{children:"Written Final Message"}),e.jsx(xe,{children:e.jsx(Gt,{...o,rows:6,placeholder:"Your final words, advice, or messages for family and friends...","data-testid":"input-final-words"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:n.control,name:"finalWordsVideoUrl",render:({field:o})=>e.jsxs(me,{children:[e.jsx(he,{children:"Video Message URL (Optional)"}),e.jsx(xe,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ta,{className:"w-5 h-5 text-muted-foreground mt-2"}),e.jsx(re,{...o,placeholder:"https://youtube.com/watch?v=...","data-testid":"input-video-url"})]})}),e.jsx(Qt,{children:"Upload your video to YouTube, Vimeo, or another platform and paste the link here"}),e.jsx(ye,{})]})})]})]}),e.jsxs($,{children:[e.jsxs(le,{children:[e.jsx(ge,{children:"Emergency Contact"}),e.jsx($e,{children:"Who should be notified to release this information"})]}),e.jsxs(V,{className:"space-y-4",children:[e.jsx(fe,{control:n.control,name:"emergencyContactName",render:({field:o})=>e.jsxs(me,{children:[e.jsx(he,{children:"Contact Name"}),e.jsx(xe,{children:e.jsx(re,{...o,"data-testid":"input-contact-name"})}),e.jsx(ye,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(fe,{control:n.control,name:"emergencyContactEmail",render:({field:o})=>e.jsxs(me,{children:[e.jsx(he,{children:"Contact Email"}),e.jsx(xe,{children:e.jsx(re,{...o,type:"email","data-testid":"input-contact-email"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:n.control,name:"emergencyContactPhone",render:({field:o})=>e.jsxs(me,{children:[e.jsx(he,{children:"Contact Phone (Optional)"}),e.jsx(xe,{children:e.jsx(re,{...o,type:"tel","data-testid":"input-contact-phone"})}),e.jsx(ye,{})]})})]}),e.jsx(fe,{control:n.control,name:"releaseInstructions",render:({field:o})=>e.jsxs(me,{children:[e.jsx(he,{children:"Release Instructions (Optional)"}),e.jsx(xe,{children:e.jsx(Gt,{...o,rows:3,placeholder:"Special instructions for when and how to share your obituary...","data-testid":"input-instructions"})}),e.jsx(ye,{})]})})]})]}),e.jsxs("div",{className:"bg-amber-50 dark:bg-amber-950/20 border border-amber-200 dark:border-amber-800 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-semibold text-sm mb-2 text-amber-900 dark:text-amber-100 flex items-center gap-2",children:[e.jsx(Od,{className:"w-4 h-4"}),"Privacy & Security"]}),e.jsxs("ul",{className:"text-sm text-amber-800 dark:text-amber-200 space-y-1",children:[e.jsx("li",{children:" Your information is encrypted and securely stored"}),e.jsx("li",{children:" Only released when your emergency contact requests activation"}),e.jsx("li",{children:" You can update or delete this anytime using your email"}),e.jsx("li",{children:" Video messages remain private until release"})]})]}),e.jsx(O,{type:"submit",className:"w-full",size:"lg",disabled:a.isPending,"data-testid":"button-save-obituary",children:a.isPending?"Saving...":"Save My Obituary & Final Words"})]})})]})}const wce=Dr({name:we().min(2,"Name is required"),birthDate:we().min(1,"Birth date is required"),deathDate:we().min(1,"Death date is required"),biography:we().min(10,"Please write at least a brief biography"),epitaph:we().optional(),prefaceText:we().optional(),backgroundImage:we().url("Please enter a valid image URL").optional().or(wr("")),religion:we().optional(),cemeteryName:we().optional(),cemeteryLocation:we().optional(),timezone:we().optional(),fontFamily:we().optional(),symbol:we().optional(),isPublic:xn().default(!1)}).refine(t=>new Date(t.deathDate)>=new Date(t.birthDate),{message:"Death date cannot be before birth date",path:["deathDate"]});function _ce(){const{toast:t}=Ht(),{user:s,isAuthenticated:r}=fo(),[n,a]=N.useState(1),i=Intl.DateTimeFormat().resolvedOptions().timeZone||"America/New_York",o=Or({resolver:$r(wce),defaultValues:{name:"",birthDate:"",deathDate:"",biography:"",epitaph:"",prefaceText:"",backgroundImage:"",religion:"",cemeteryName:"",cemeteryLocation:"",timezone:i,fontFamily:"crimson",symbol:"cross",isPublic:!1}}),l=yt({mutationFn:async d=>{console.log("CreateMemorial mutation starting with data:",d),console.log("User info:",{email:s==null?void 0:s.email,isAuthenticated:r});const u=(Math.random().toString(36).substring(2,12)+Math.random().toString(36).substring(2,12)).substring(0,20),m={...d,creatorEmail:s==null?void 0:s.email,inviteCode:u};console.log("Sending POST to /api/memorials with payload:",m);const h=await(await pt("POST","/api/memorials",m)).json();return console.log("Memorial created successfully:",h),h},onSuccess:d=>{console.log("onSuccess called with memorial:",d),xt.invalidateQueries({queryKey:["/api/user/memorials"]}),t({title:"Memorial Created",description:`Memorial for ${d.name} has been created successfully.`}),window.location.href="/my-memorials"},onError:d=>{console.error("Create memorial error:",d),t({title:"Error Creating Memorial",description:d.message||"Please check all required fields and try again.",variant:"destructive"})}}),c=d=>{console.log("Form onSubmit called with data:",d),console.log("Form validation state:",{isValid:o.formState.isValid,errors:o.formState.errors}),l.mutate(d)};return r?e.jsx("div",{className:"min-h-screen bg-background py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx(ro,{variant:"classic",showTagline:!1,className:"mb-6"}),e.jsx("h1",{className:"text-4xl font-serif font-bold mb-2","data-testid":"text-create-memorial-heading",children:"Create a Memorial"}),e.jsx("p",{className:"text-muted-foreground text-lg",children:"Create a memorial for a loved one or start one for yourselfpreserving precious memories with dignity and compassion"})]}),e.jsxs($,{children:[e.jsx(le,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(ge,{children:"Memorial Details"}),e.jsx($e,{children:"Share the story and legacy of someone special"})]}),e.jsx("div",{className:"flex gap-1",children:[1,2,3].map(d=>e.jsx("div",{className:`h-2 w-8 rounded-full transition-colors ${d<=n?"bg-primary":"bg-muted"}`},d))})]})}),e.jsx(V,{children:e.jsx(Wr,{...o,children:e.jsxs("form",{onSubmit:o.handleSubmit(c),className:"space-y-6",children:[n===1&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"bg-primary/20 p-3 rounded-full",children:e.jsx(_t,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Basic Information"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Who are we remembering?"})]})]}),e.jsx(fe,{control:o.control,name:"name",render:({field:d})=>e.jsxs(me,{children:[e.jsx(he,{children:"Full Name *"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"John Doe",...d,"data-testid":"input-name"})}),e.jsx(ye,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(fe,{control:o.control,name:"birthDate",render:({field:d})=>e.jsxs(me,{children:[e.jsx(he,{children:"Birth Date *"}),e.jsx(xe,{children:e.jsx(re,{type:"date",...d,"data-testid":"input-birth-date"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:o.control,name:"deathDate",render:({field:d})=>e.jsxs(me,{children:[e.jsx(he,{children:"Death Date *"}),e.jsx(xe,{children:e.jsx(re,{type:"date",...d,"data-testid":"input-death-date"})}),e.jsx(ye,{})]})})]}),e.jsx(fe,{control:o.control,name:"backgroundImage",render:({field:d})=>e.jsxs(me,{children:[e.jsx(he,{children:"Memorial Photo"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"https://example.com/photo.jpg",...d,"data-testid":"input-background-image"})}),e.jsx(Qt,{children:"Add a photo URL of your loved one to display as the memorial background"}),e.jsx(ye,{})]})}),e.jsx(fe,{control:o.control,name:"religion",render:({field:d})=>e.jsxs(me,{children:[e.jsx(he,{children:"Faith Tradition"}),e.jsxs(Rt,{onValueChange:d.onChange,defaultValue:d.value,children:[e.jsx(xe,{children:e.jsx(Mt,{"data-testid":"select-religion",children:e.jsx(Ft,{placeholder:"Select faith tradition"})})}),e.jsxs(Lt,{children:[e.jsx(te,{value:"christian",children:"Christian"}),e.jsx(te,{value:"jewish",children:"Jewish"}),e.jsx(te,{value:"islamic",children:"Islamic"}),e.jsx(te,{value:"buddhist",children:"Buddhist"}),e.jsx(te,{value:"hindu",children:"Hindu"}),e.jsx(te,{value:"nonreligious",children:"Non-religious"})]})]}),e.jsx(Qt,{children:"This helps customize the memorial design"}),e.jsx(ye,{})]})}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsxs(O,{type:"button",onClick:()=>a(2),"data-testid":"button-next-step-1",children:["Continue",e.jsx(ds,{className:"w-4 h-4 ml-2"})]})})]}),n===2&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"bg-primary/20 p-3 rounded-full",children:e.jsx(Un,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Life Story"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Share their legacy and impact"})]})]}),e.jsx(fe,{control:o.control,name:"biography",render:({field:d})=>e.jsxs(me,{children:[e.jsx(he,{children:"Biography *"}),e.jsx(xe,{children:e.jsx(Gt,{placeholder:"Write about their life, accomplishments, passions, and the people they loved...",className:"min-h-[200px]",...d,"data-testid":"input-biography"})}),e.jsx(Qt,{children:"Share stories, memories, and what made them special"}),e.jsx(ye,{})]})}),e.jsx(fe,{control:o.control,name:"epitaph",render:({field:d})=>e.jsxs(me,{children:[e.jsx(he,{children:"Epitaph (Optional)"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"A meaningful quote or phrase",...d,"data-testid":"input-epitaph"})}),e.jsx(Qt,{children:"A short phrase that captures their spirit"}),e.jsx(ye,{})]})}),e.jsx(fe,{control:o.control,name:"prefaceText",render:({field:d})=>e.jsxs(me,{children:[e.jsx(he,{children:"Opening Message (Optional)"}),e.jsx(xe,{children:e.jsx(Gt,{placeholder:"A welcome message for memorial visitors...",className:"min-h-[100px]",...d,"data-testid":"input-preface"})}),e.jsx(Qt,{children:"This appears at the top of the memorial page"}),e.jsx(ye,{})]})}),e.jsxs("div",{className:"flex justify-between pt-4",children:[e.jsx(O,{type:"button",variant:"outline",onClick:()=>a(1),"data-testid":"button-back-step-2",children:"Back"}),e.jsxs(O,{type:"button",onClick:()=>a(3),"data-testid":"button-next-step-2",children:["Continue",e.jsx(tr,{className:"w-4 h-4 ml-2"})]})]})]}),n===3&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"bg-primary/20 p-3 rounded-full",children:e.jsx(Bs,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Final Details"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Personalize the memorial"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(fe,{control:o.control,name:"cemeteryName",render:({field:d})=>e.jsxs(me,{children:[e.jsx(he,{children:"Cemetery/Burial Location Name"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"Peaceful Gardens Cemetery",...d,"data-testid":"input-cemetery-name"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:o.control,name:"cemeteryLocation",render:({field:d})=>e.jsxs(me,{children:[e.jsx(he,{children:"Cemetery Address"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"123 Memorial Drive, City, State",...d,"data-testid":"input-cemetery-location"})}),e.jsx(ye,{})]})})]}),e.jsx(fe,{control:o.control,name:"timezone",render:({field:d})=>e.jsxs(me,{children:[e.jsx(he,{children:"Timezone"}),e.jsxs(Rt,{onValueChange:d.onChange,defaultValue:d.value,children:[e.jsx(xe,{children:e.jsx(Mt,{"data-testid":"select-timezone",children:e.jsx(Ft,{placeholder:"Select timezone"})})}),e.jsxs(Lt,{children:[e.jsx(te,{value:"America/New_York",children:"Eastern Time (ET)"}),e.jsx(te,{value:"America/Chicago",children:"Central Time (CT)"}),e.jsx(te,{value:"America/Denver",children:"Mountain Time (MT)"}),e.jsx(te,{value:"America/Phoenix",children:"Arizona (MST)"}),e.jsx(te,{value:"America/Los_Angeles",children:"Pacific Time (PT)"}),e.jsx(te,{value:"America/Anchorage",children:"Alaska (AKT)"}),e.jsx(te,{value:"Pacific/Honolulu",children:"Hawaii (HST)"}),e.jsx(te,{value:"Europe/London",children:"London (GMT/BST)"}),e.jsx(te,{value:"Europe/Paris",children:"Central Europe (CET)"}),e.jsx(te,{value:"Asia/Tokyo",children:"Tokyo (JST)"}),e.jsx(te,{value:"Asia/Shanghai",children:"Beijing (CST)"}),e.jsx(te,{value:"Australia/Sydney",children:"Sydney (AEDT)"}),e.jsx(te,{value:"UTC",children:"UTC"})]})]}),e.jsx(Qt,{children:"Used for scheduling future messages and video time capsules"}),e.jsx(ye,{})]})}),e.jsx(fe,{control:o.control,name:"fontFamily",render:({field:d})=>e.jsxs(me,{children:[e.jsx(he,{children:"Design Style"}),e.jsxs(Rt,{onValueChange:d.onChange,defaultValue:d.value,children:[e.jsx(xe,{children:e.jsx(Mt,{"data-testid":"select-font",children:e.jsx(Ft,{})})}),e.jsxs(Lt,{children:[e.jsx(te,{value:"crimson",children:"Classic & Elegant"}),e.jsx(te,{value:"inter",children:"Modern & Clean"}),e.jsx(te,{value:"merriweather",children:"Traditional & Formal"})]})]}),e.jsx(ye,{})]})}),e.jsx(fe,{control:o.control,name:"symbol",render:({field:d})=>e.jsxs(me,{children:[e.jsx(he,{children:"Memorial Symbol"}),e.jsxs(Rt,{onValueChange:d.onChange,defaultValue:d.value,children:[e.jsx(xe,{children:e.jsx(Mt,{"data-testid":"select-symbol",children:e.jsx(Ft,{})})}),e.jsxs(Lt,{children:[e.jsx(te,{value:"cross",children:"Cross (Christian)"}),e.jsx(te,{value:"star-of-david",children:"Star of David (Jewish)"}),e.jsx(te,{value:"crescent",children:"Crescent Moon (Islamic)"}),e.jsx(te,{value:"ankh",children:"Ankh (Kemetic/Egyptian)"}),e.jsx(te,{value:"dharma-wheel",children:"Dharma Wheel (Buddhist)"}),e.jsx(te,{value:"om",children:"Om Symbol (Hindu)"}),e.jsx(te,{value:"lotus",children:"Lotus (Buddhist/Hindu)"}),e.jsx(te,{value:"hamsa",children:"Hamsa (Protection)"}),e.jsx(te,{value:"eye-horus",children:"Eye of Horus (Egyptian)"}),e.jsx(te,{value:"yin-yang",children:"Yin Yang (Taoist)"}),e.jsx(te,{value:"tree-life",children:"Tree of Life (Universal)"}),e.jsx(te,{value:"mountain",children:"Sacred Mountain (Spiritual)"}),e.jsx(te,{value:"water",children:"Water (Life & Renewal)"}),e.jsx(te,{value:"wind",children:"Spirit Wind (Indigenous)"}),e.jsx(te,{value:"flame",children:"Eternal Flame (Memorial)"}),e.jsx(te,{value:"dove",children:"Dove (Peace)"}),e.jsx(te,{value:"angel",children:"Angel (Guardian)"}),e.jsx(te,{value:"heart",children:"Heart (Love)"}),e.jsx(te,{value:"infinity",children:"Infinity (Eternal Love)"})]})]}),e.jsx(ye,{})]})}),e.jsx("div",{className:"bg-muted/50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-primary/20 p-2 rounded-full flex-shrink-0 mt-1",children:e.jsx(_t,{className:"w-4 h-4 text-primary"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-1",children:"Privacy Settings"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"This memorial will be private by default. You'll receive a unique invite code to share with family and friends."}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"You can change privacy settings and manage access from your memorial dashboard after creation."})]})]})}),e.jsxs("div",{className:"flex justify-between pt-4",children:[e.jsx(O,{type:"button",variant:"outline",onClick:()=>a(2),"data-testid":"button-back-step-3",children:"Back"}),e.jsxs(O,{type:"submit",disabled:l.isPending,"data-testid":"button-create-memorial",children:[l.isPending?"Creating Memorial...":"Create Memorial",e.jsx(_t,{className:"w-4 h-4 ml-2"})]})]})]})]})})})]}),e.jsx("div",{className:"text-center mt-6",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Need to create your own obituary in advance?"," ",e.jsx(He,{href:"/self-obituary",className:"text-primary hover:underline","data-testid":"link-self-obituary",children:"Write Self-Obituary"})]})})]})}):e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center py-12 px-4",children:e.jsxs($,{className:"w-full max-w-md",children:[e.jsxs(le,{children:[e.jsx(ge,{children:"Login Required"}),e.jsx($e,{children:"Please login to create a memorial."})]}),e.jsx(V,{children:e.jsx(O,{onClick:()=>window.location.href="/api/login",className:"w-full","data-testid":"button-login-required",children:"Login to Continue"})})]})})}function Sce(){return e.jsxs("div",{className:"container max-w-7xl mx-auto px-4 py-12",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center",children:e.jsx(C_,{className:"w-6 h-6 text-primary"})}),e.jsx("h1",{className:"text-4xl font-serif font-bold",children:"Memorial Customization Options"})]}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Personalize your memorial with meaningful fonts and symbols"})]}),e.jsxs("div",{className:"space-y-12",children:[e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Available Typography Styles"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o1.map(t=>e.jsxs($,{className:"hover-elevate",children:[e.jsxs(le,{children:[e.jsx(ge,{style:{fontFamily:t.family},children:t.label}),e.jsx($e,{className:"font-mono text-xs",children:t.family})]}),e.jsx(V,{children:e.jsxs("div",{style:{fontFamily:t.family},className:"space-y-2",children:[e.jsx("p",{className:"text-lg",children:"In Loving Memory"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Gone but never forgotten. Your spirit lives on in our hearts forever."}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"1950 - 2024"})]})})]},t.value))})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Memorial Symbols"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l1.map(t=>{var r;const s=t.icon;return e.jsxs($,{className:"hover-elevate",children:[e.jsx(le,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center",children:e.jsx(s,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx(ge,{className:"text-lg",children:t.label.split("(")[0].trim()}),e.jsx($e,{className:"text-xs",children:t.label.includes("(")?(r=t.label.match(/\(([^)]+)\)/))==null?void 0:r[1]:"Universal"})]})]})}),e.jsx(V,{children:e.jsxs("div",{className:"bg-muted/50 p-4 rounded-lg flex items-center gap-3",children:[e.jsx(s,{className:"w-8 h-8 text-primary"}),e.jsx("p",{className:"text-sm text-muted-foreground flex-1",children:"A meaningful symbol to represent faith, values, and legacy"})]})})]},t.value)})})]}),e.jsxs("section",{className:"bg-muted/30 p-8 rounded-xl",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"How Customization Works"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-semibold",children:"1. Choose Your Style"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Select a typography that reflects the personality and values of your loved one"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-semibold",children:"2. Pick a Symbol"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose a meaningful icon that represents faith, beliefs, or personal significance"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-semibold",children:"3. Apply to Memorial"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Your selections will be beautifully applied to the memorial page"})]})]})]})]})]})}const Cce=Dr({companyName:we().min(1,"Company name is required"),productName:we().min(1,"Product/service name is required"),category:we().min(1,"Category is required"),description:we().min(20,"Please provide at least 20 characters"),imageUrl:we().url("Must be a valid URL").optional().or(wr("")),contactEmail:we().email("Valid email is required"),contactPhone:we().regex(/^[\d\s\-\(\)\+]+$/,"Invalid phone format").min(10,"Phone must be at least 10 digits").optional().or(wr("")),websiteUrl:we().url("Must be a valid URL").optional().or(wr("")),pricing:we().refine(t=>t===""||t.length>=2,"Please provide pricing information").optional().or(wr("")),commissionPercentage:we().refine(t=>t===""||Number(t)>=0&&Number(t)<=100,"Must be between 0 and 100").optional().or(wr("")),referralCode:we().optional().or(wr("")),expiresAt:we().optional()}),kce=[{value:"caskets",label:"Caskets & Coffins"},{value:"urns",label:"Urns & Cremation"},{value:"flowers",label:"Flowers & Arrangements"},{value:"memorials",label:"Memorial Products"},{value:"services",label:"Funeral Services"},{value:"customization",label:"Customization Services"},{value:"cardboard",label:"Cardboard Cutouts"},{value:"photography",label:"Photography & Video"},{value:"transportation",label:"Transportation Services"},{value:"other",label:"Other Products/Services"}];function T6(){const{toast:t}=Ht(),[s,r]=N.useState(!1),n=Or({resolver:$r(Cce),defaultValues:{companyName:"",productName:"",category:"",description:"",imageUrl:"",contactEmail:"",contactPhone:"",websiteUrl:"",pricing:"",commissionPercentage:"",referralCode:"",expiresAt:""}}),a=yt({mutationFn:async o=>await(await pt("POST","/api/advertisements",o)).json(),onSuccess:()=>{r(!0),t({title:"Advertisement Submitted",description:"Your advertisement will be reviewed and activated shortly."})},onError:o=>{t({title:"Error",description:o.message,variant:"destructive"})}}),i=o=>{const l={...o,imageUrl:o.imageUrl||void 0,websiteUrl:o.websiteUrl||void 0,expiresAt:o.expiresAt||void 0,contactPhone:o.contactPhone||void 0,pricing:o.pricing||void 0,commissionPercentage:o.commissionPercentage?Number(o.commissionPercentage):void 0,referralCode:o.referralCode||void 0};a.mutate(l)};return s?e.jsx("div",{className:"container max-w-3xl mx-auto px-4 py-12",children:e.jsxs($,{children:[e.jsxs(le,{className:"text-center",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mb-4",children:e.jsx(Oo,{className:"w-8 h-8 text-primary"})}),e.jsx(ge,{className:"text-2xl",children:"Advertisement Submitted"}),e.jsx($e,{children:"Thank you for your submission. Your advertisement is pending review and will be activated once approved."})]}),e.jsxs(V,{className:"space-y-4",children:[e.jsxs("div",{className:"bg-muted/50 p-6 rounded-lg space-y-3",children:[e.jsx("h3",{className:"font-semibold",children:"What's Next?"}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-2",children:[e.jsx("li",{children:" Your ad will be reviewed within 24-48 hours"}),e.jsx("li",{children:" You'll receive a confirmation email once approved"}),e.jsx("li",{children:" Your ad will appear on relevant memorial pages"}),e.jsx("li",{children:" Track impressions and clicks via your dashboard"})]})]}),e.jsx(O,{onClick:()=>{r(!1),n.reset()},variant:"outline",className:"w-full","data-testid":"button-submit-another",children:"Submit Another Advertisement"})]})]})}):e.jsxs("div",{className:"container max-w-4xl mx-auto px-4 py-12",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center",children:e.jsx(mw,{className:"w-6 h-6 text-primary"})}),e.jsx("h1",{className:"text-3xl font-serif font-bold",children:"Advertise Your Services"})]}),e.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Reach families during important moments with respectful, relevant products and services for memorial needs."})]}),e.jsx(Wr,{...n,children:e.jsxs("form",{onSubmit:n.handleSubmit(i),className:"space-y-6",children:[e.jsxs($,{children:[e.jsxs(le,{children:[e.jsx(ge,{children:"Business Information"}),e.jsx($e,{children:"Tell us about your company"})]}),e.jsxs(V,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(fe,{control:n.control,name:"companyName",render:({field:o})=>e.jsxs(me,{children:[e.jsx(he,{children:"Company Name"}),e.jsx(xe,{children:e.jsx(re,{...o,"data-testid":"input-company-name"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:n.control,name:"contactEmail",render:({field:o})=>e.jsxs(me,{children:[e.jsx(he,{children:"Contact Email"}),e.jsx(xe,{children:e.jsx(re,{...o,type:"email","data-testid":"input-contact-email"})}),e.jsx(ye,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(fe,{control:n.control,name:"contactPhone",render:({field:o})=>e.jsxs(me,{children:[e.jsx(he,{children:"Phone Number (Optional)"}),e.jsx(xe,{children:e.jsx(re,{...o,type:"tel","data-testid":"input-phone"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:n.control,name:"websiteUrl",render:({field:o})=>e.jsxs(me,{children:[e.jsx(he,{children:"Website URL (Optional)"}),e.jsx(xe,{children:e.jsx(re,{...o,placeholder:"https://...","data-testid":"input-website"})}),e.jsx(ye,{})]})})]})]})]}),e.jsxs($,{children:[e.jsxs(le,{children:[e.jsx(ge,{children:"Product/Service Details"}),e.jsx($e,{children:"What you're offering"})]}),e.jsxs(V,{className:"space-y-4",children:[e.jsx(fe,{control:n.control,name:"productName",render:({field:o})=>e.jsxs(me,{children:[e.jsx(he,{children:"Product/Service Name"}),e.jsx(xe,{children:e.jsx(re,{...o,placeholder:"e.g. Premium Oak Casket","data-testid":"input-product-name"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:n.control,name:"category",render:({field:o})=>e.jsxs(me,{children:[e.jsx(he,{children:"Category"}),e.jsxs(Rt,{value:o.value,onValueChange:o.onChange,children:[e.jsx(xe,{children:e.jsx(Mt,{"data-testid":"select-category",children:e.jsx(Ft,{placeholder:"Select a category"})})}),e.jsx(Lt,{children:kce.map(l=>e.jsx(te,{value:l.value,children:l.label},l.value))})]}),e.jsx(ye,{})]})}),e.jsx(fe,{control:n.control,name:"description",render:({field:o})=>e.jsxs(me,{children:[e.jsx(he,{children:"Description"}),e.jsx(xe,{children:e.jsx(Gt,{...o,rows:4,placeholder:"Describe your product or service...","data-testid":"input-description"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:n.control,name:"imageUrl",render:({field:o})=>e.jsxs(me,{children:[e.jsx(he,{children:"Image URL (Optional)"}),e.jsx(xe,{children:e.jsx(re,{...o,placeholder:"https://...","data-testid":"input-image-url"})}),e.jsx(Qt,{className:"text-xs",children:"Product image"}),e.jsx(ye,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(fe,{control:n.control,name:"pricing",render:({field:o})=>e.jsxs(me,{children:[e.jsx(he,{children:"Pricing (Optional)"}),e.jsx(xe,{children:e.jsx(re,{...o,placeholder:"e.g. Starting at $1,200","data-testid":"input-pricing"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:n.control,name:"expiresAt",render:({field:o})=>e.jsxs(me,{children:[e.jsx(he,{children:"Expires On (Optional)"}),e.jsx(xe,{children:e.jsx(re,{...o,type:"date","data-testid":"input-expires-at"})}),e.jsx(Qt,{className:"text-xs",children:"When ad should stop showing"}),e.jsx(ye,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(fe,{control:n.control,name:"commissionPercentage",render:({field:o})=>e.jsxs(me,{children:[e.jsx(he,{children:"Platform Fee % (Optional)"}),e.jsx(xe,{children:e.jsx(re,{...o,type:"number",min:"0",max:"100",placeholder:"e.g. 10","data-testid":"input-commission-percentage"})}),e.jsx(Qt,{className:"text-xs",children:"% Opictuary receives from your sales"}),e.jsx(ye,{})]})}),e.jsx(fe,{control:n.control,name:"referralCode",render:({field:o})=>e.jsxs(me,{children:[e.jsx(he,{children:"Referral Code (Optional)"}),e.jsx(xe,{children:e.jsx(re,{...o,placeholder:"e.g. PARTNER123","data-testid":"input-referral-code"})}),e.jsx(Qt,{className:"text-xs",children:"Unique code for tracking sales through Opictuary"}),e.jsx(ye,{})]})})]})]})]}),e.jsxs("div",{className:"bg-amber-50 dark:bg-amber-950/20 border border-amber-200 dark:border-amber-800 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-sm mb-2 text-amber-900 dark:text-amber-100",children:"Advertising Guidelines"}),e.jsxs("ul",{className:"text-sm text-amber-800 dark:text-amber-200 space-y-1",children:[e.jsx("li",{children:" Maintain respectful, dignified messaging appropriate for memorial contexts"}),e.jsx("li",{children:" Ensure all contact information and pricing is accurate"}),e.jsx("li",{children:" Images should be professional and product-focused"}),e.jsx("li",{children:" Ads are subject to approval and may be removed if guidelines are violated"})]})]}),e.jsx(O,{type:"submit",className:"w-full",size:"lg",disabled:a.isPending,"data-testid":"button-submit-ad",children:a.isPending?"Submitting...":"Submit Advertisement"})]})})]})}function Ace(){const{toast:t}=Ht(),{data:s=[],isLoading:r}=Xe({queryKey:["/api/advertisements/by-status","pending"],queryFn:async()=>{const d=await fetch("/api/advertisements/by-status/pending");if(!d.ok)throw new Error("Failed to fetch pending advertisements");return d.json()}}),{data:n=[],isLoading:a}=Xe({queryKey:["/api/advertisements/by-status","approved"],queryFn:async()=>{const d=await fetch("/api/advertisements/by-status/approved");if(!d.ok)throw new Error("Failed to fetch approved advertisements");return d.json()}}),{data:i=[],isLoading:o}=Xe({queryKey:["/api/advertisements/by-status","rejected"],queryFn:async()=>{const d=await fetch("/api/advertisements/by-status/rejected");if(!d.ok)throw new Error("Failed to fetch rejected advertisements");return d.json()}}),l=yt({mutationFn:async({id:d,status:u})=>await(await pt("PATCH",`/api/advertisements/${d}/status`,{status:u})).json(),onSuccess:(d,u)=>{xt.invalidateQueries({queryKey:["/api/advertisements/by-status"]}),t({title:"Status Updated",description:`Advertisement ${u.status==="approved"?"approved":"rejected"} successfully.`})},onError:d=>{t({title:"Error",description:d.message,variant:"destructive"})}}),c=(d,u=!1)=>e.jsxs($,{className:"mb-4",children:[e.jsx(le,{children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(ge,{className:"text-lg",children:d.productName}),e.jsx($e,{children:d.companyName})]}),e.jsxs(ze,{variant:d.status==="approved"?"default":d.status==="rejected"?"destructive":"secondary","data-testid":`badge-status-${d.id}`,children:[d.status==="pending"&&e.jsx(Mr,{className:"w-3 h-3 mr-1"}),d.status==="approved"&&e.jsx(Oo,{className:"w-3 h-3 mr-1"}),d.status==="rejected"&&e.jsx(Vb,{className:"w-3 h-3 mr-1"}),d.status.charAt(0).toUpperCase()+d.status.slice(1)]})]})}),e.jsxs(V,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-1",children:"Category"}),e.jsx(ze,{variant:"outline",children:d.category})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-1",children:"Description"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:d.description})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-1",children:"Contact"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-sm text-muted-foreground",children:[e.jsx(Ti,{className:"w-3 h-3"}),e.jsx("span",{className:"truncate",children:d.contactEmail})]}),d.contactPhone&&e.jsxs("div",{className:"flex items-center gap-1.5 text-sm text-muted-foreground",children:[e.jsx($d,{className:"w-3 h-3"}),e.jsx("span",{children:d.contactPhone})]}),d.websiteUrl&&e.jsxs("div",{className:"flex items-center gap-1.5 text-sm text-muted-foreground",children:[e.jsx(qo,{className:"w-3 h-3"}),e.jsxs("a",{href:d.websiteUrl,target:"_blank",rel:"noopener noreferrer",className:"hover:underline flex items-center gap-1",children:["Visit Website ",e.jsx(pa,{className:"w-3 h-3"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-1",children:"Platform Details"}),e.jsxs("div",{className:"space-y-1 text-sm text-muted-foreground",children:[d.commissionPercentage!==null&&d.commissionPercentage!==void 0&&e.jsxs("p",{children:["Commission: ",d.commissionPercentage,"%"]}),d.referralCode&&e.jsxs("p",{children:["Referral Code: ",e.jsx("code",{className:"bg-muted px-1 rounded",children:d.referralCode})]}),d.pricing&&e.jsxs("p",{children:["Pricing: ",d.pricing]})]})]})]}),(d.totalSales>0||d.status==="approved")&&e.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Sales Performance"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Total Sales"}),e.jsx("p",{className:"font-semibold",children:d.totalSales})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Revenue"}),e.jsxs("p",{className:"font-semibold",children:["$",d.totalRevenue]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Platform Fees"}),e.jsxs("p",{className:"font-semibold",children:["$",d.totalPlatformFees]})]})]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Submitted: ",Pr(new Date(d.createdAt),"PPp")]}),u&&e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsxs(O,{onClick:()=>l.mutate({id:d.id,status:"approved"}),disabled:l.isPending,className:"flex-1","data-testid":`button-approve-${d.id}`,children:[e.jsx(Oo,{className:"w-4 h-4 mr-1.5"}),"Approve"]}),e.jsxs(O,{onClick:()=>l.mutate({id:d.id,status:"rejected"}),disabled:l.isPending,variant:"destructive",className:"flex-1","data-testid":`button-reject-${d.id}`,children:[e.jsx(Vb,{className:"w-4 h-4 mr-1.5"}),"Reject"]})]})]})]},d.id);return e.jsxs("div",{className:"container max-w-7xl mx-auto px-4 py-12",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-serif font-bold mb-2",children:"Advertisement Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Review and manage advertisement submissions"})]}),e.jsxs(ba,{defaultValue:"pending",className:"space-y-6",children:[e.jsxs(ra,{children:[e.jsxs(qt,{value:"pending","data-testid":"tab-pending",children:["Pending (",s.length,")"]}),e.jsxs(qt,{value:"approved","data-testid":"tab-approved",children:["Approved (",n.length,")"]}),e.jsxs(qt,{value:"rejected","data-testid":"tab-rejected",children:["Rejected (",i.length,")"]})]}),e.jsx(Vt,{value:"pending",children:r?e.jsx("div",{className:"text-center py-12 text-muted-foreground",children:"Loading..."}):s.length===0?e.jsx($,{children:e.jsx(V,{className:"py-12",children:e.jsxs("div",{className:"text-center text-muted-foreground",children:[e.jsx(Mr,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No pending advertisements"})]})})}):e.jsx("div",{children:s.map(d=>c(d,!0))})}),e.jsx(Vt,{value:"approved",children:a?e.jsx("div",{className:"text-center py-12 text-muted-foreground",children:"Loading..."}):n.length===0?e.jsx($,{children:e.jsx(V,{className:"py-12",children:e.jsxs("div",{className:"text-center text-muted-foreground",children:[e.jsx(Oo,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No approved advertisements"})]})})}):e.jsx("div",{children:n.map(d=>c(d))})}),e.jsx(Vt,{value:"rejected",children:o?e.jsx("div",{className:"text-center py-12 text-muted-foreground",children:"Loading..."}):i.length===0?e.jsx($,{children:e.jsx(V,{className:"py-12",children:e.jsxs("div",{className:"text-center text-muted-foreground",children:[e.jsx(Vb,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No rejected advertisements"})]})})}):e.jsx("div",{children:i.map(d=>c(d))})})]})]})}const Pce=Dr({businessName:we().min(1,"Business name is required"),contactName:we().min(1,"Contact name is required"),email:we().email("Valid email is required"),phone:we().regex(/^[\d\s\-\(\)\+]+$/,"Invalid phone format").min(10,"Phone must be at least 10 digits"),address:we().optional(),city:we().optional(),state:we().optional(),zipCode:we().optional(),commissionRate:we().optional(),bankAccountName:we().optional(),bankAccountNumber:we().optional(),bankRoutingNumber:we().optional()});function Ece(){const{toast:t}=Ht(),[s,r]=N.useState(!1),[n,a]=N.useState(null),i=Or({resolver:$r(Pce),defaultValues:{businessName:"",contactName:"",email:"",phone:"",address:"",city:"",state:"",zipCode:"",commissionRate:"3.00",bankAccountName:"",bankAccountNumber:"",bankRoutingNumber:""}}),o=yt({mutationFn:async c=>await(await pt("POST","/api/funeral-home-partners",c)).json(),onSuccess:c=>{a(c),r(!0),t({title:"Partnership Application Submitted",description:"Your funeral home partnership application has been received."})},onError:c=>{t({title:"Submission Failed",description:c.message||"Failed to submit partnership application",variant:"destructive"})}}),l=c=>{const d={...c,address:c.address||void 0,city:c.city||void 0,state:c.state||void 0,zipCode:c.zipCode||void 0,commissionRate:c.commissionRate||"3.00",bankAccountName:c.bankAccountName||void 0,bankAccountNumber:c.bankAccountNumber||void 0,bankRoutingNumber:c.bankRoutingNumber||void 0};o.mutate(d)};return s&&n?e.jsx("div",{className:"container max-w-3xl mx-auto px-4 py-12",children:e.jsxs($,{className:"border-primary/20",children:[e.jsxs(le,{className:"text-center pb-6",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(Oo,{className:"w-8 h-8 text-primary"})})}),e.jsx(ge,{className:"text-3xl font-serif",children:"Partnership Confirmed!"}),e.jsx($e,{className:"text-base mt-2",children:"Welcome to the Opictuary Funeral Home Partner Network"})]}),e.jsxs(V,{className:"space-y-6",children:[e.jsxs("div",{className:"bg-accent/10 rounded-lg p-6",children:[e.jsx("h3",{className:"font-semibold mb-4 text-foreground",children:"Your Referral Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-muted-foreground",children:"Referral Code:"}),e.jsx("span",{className:"font-mono text-lg font-bold text-primary","data-testid":"text-referral-code",children:n.referralCode})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-muted-foreground",children:"Commission Rate:"}),e.jsxs("span",{className:"font-semibold text-foreground","data-testid":"text-commission-rate",children:[n.commissionRate,"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-muted-foreground",children:"Business Name:"}),e.jsx("span",{className:"font-semibold text-foreground","data-testid":"text-business-name",children:n.businessName})]})]})]}),e.jsxs("div",{className:"bg-amber-50 dark:bg-amber-950/20 border border-amber-200 dark:border-amber-800 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-amber-900 dark:text-amber-100 mb-2",children:"How to Use Your Referral Code"}),e.jsxs("ul",{className:"space-y-2 text-sm text-amber-800 dark:text-amber-200",children:[e.jsx("li",{children:" Share your referral code with families you serve"}),e.jsx("li",{children:" Families enter the code when creating a memorial"}),e.jsxs("li",{children:[" You earn ",n.commissionRate,"% commission on all donations to their fundraisers"]}),e.jsx("li",{children:" Access your dashboard to track referrals and earnings"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(O,{onClick:()=>window.location.href=`/partner-dashboard/${n.id}`,className:"flex-1","data-testid":"button-go-to-dashboard",children:"Go to Dashboard"}),e.jsx(O,{variant:"outline",onClick:()=>{navigator.clipboard.writeText(n.referralCode),t({title:"Copied!",description:"Referral code copied to clipboard"})},"data-testid":"button-copy-code",children:"Copy Referral Code"})]})]})]})}):e.jsxs("div",{className:"container max-w-4xl mx-auto px-4 py-12",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(KI,{className:"w-8 h-8 text-primary"})})}),e.jsx("h1",{className:"text-4xl font-serif font-bold text-foreground mb-2",children:"Funeral Home Partnership"}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Join our partner network and earn commissions by referring families to create digital memorials"})]}),e.jsx(Wr,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(l),className:"space-y-6",children:[e.jsxs($,{children:[e.jsxs(le,{children:[e.jsx(ge,{children:"Business Information"}),e.jsx($e,{children:"Tell us about your funeral home"})]}),e.jsxs(V,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(fe,{control:i.control,name:"businessName",render:({field:c})=>e.jsxs(me,{children:[e.jsx(he,{children:"Business Name*"}),e.jsx(xe,{children:e.jsx(re,{...c,placeholder:"Smith & Sons Funeral Home","data-testid":"input-business-name"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:i.control,name:"contactName",render:({field:c})=>e.jsxs(me,{children:[e.jsx(he,{children:"Contact Name*"}),e.jsx(xe,{children:e.jsx(re,{...c,placeholder:"John Smith","data-testid":"input-contact-name"})}),e.jsx(ye,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(fe,{control:i.control,name:"email",render:({field:c})=>e.jsxs(me,{children:[e.jsx(he,{children:"Email*"}),e.jsx(xe,{children:e.jsx(re,{...c,type:"email",placeholder:"contact@funeral home.com","data-testid":"input-email"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:i.control,name:"phone",render:({field:c})=>e.jsxs(me,{children:[e.jsx(he,{children:"Phone*"}),e.jsx(xe,{children:e.jsx(re,{...c,placeholder:"+1 555-123-4567","data-testid":"input-phone"})}),e.jsx(ye,{})]})})]}),e.jsx(fe,{control:i.control,name:"address",render:({field:c})=>e.jsxs(me,{children:[e.jsx(he,{children:"Address (Optional)"}),e.jsx(xe,{children:e.jsx(re,{...c,placeholder:"123 Main Street","data-testid":"input-address"})}),e.jsx(ye,{})]})}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx(fe,{control:i.control,name:"city",render:({field:c})=>e.jsxs(me,{children:[e.jsx(he,{children:"City"}),e.jsx(xe,{children:e.jsx(re,{...c,placeholder:"Springfield","data-testid":"input-city"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:i.control,name:"state",render:({field:c})=>e.jsxs(me,{children:[e.jsx(he,{children:"State"}),e.jsx(xe,{children:e.jsx(re,{...c,placeholder:"IL","data-testid":"input-state"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:i.control,name:"zipCode",render:({field:c})=>e.jsxs(me,{children:[e.jsx(he,{children:"ZIP Code"}),e.jsx(xe,{children:e.jsx(re,{...c,placeholder:"62701","data-testid":"input-zip-code"})}),e.jsx(ye,{})]})})]})]})]}),e.jsxs($,{children:[e.jsxs(le,{children:[e.jsx(ge,{children:"Banking Information (Optional)"}),e.jsx($e,{children:"For commission payouts - you can add this later"})]}),e.jsxs(V,{className:"space-y-4",children:[e.jsx(fe,{control:i.control,name:"bankAccountName",render:({field:c})=>e.jsxs(me,{children:[e.jsx(he,{children:"Account Name"}),e.jsx(xe,{children:e.jsx(re,{...c,placeholder:"Smith & Sons Funeral Home","data-testid":"input-bank-account-name"})}),e.jsx(ye,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(fe,{control:i.control,name:"bankAccountNumber",render:({field:c})=>e.jsxs(me,{children:[e.jsx(he,{children:"Account Number"}),e.jsx(xe,{children:e.jsx(re,{...c,type:"password",placeholder:"","data-testid":"input-bank-account-number"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:i.control,name:"bankRoutingNumber",render:({field:c})=>e.jsxs(me,{children:[e.jsx(he,{children:"Routing Number"}),e.jsx(xe,{children:e.jsx(re,{...c,placeholder:"123456789","data-testid":"input-bank-routing-number"})}),e.jsx(ye,{})]})})]})]})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-blue-900 dark:text-blue-100 mb-2",children:"Partnership Benefits"}),e.jsxs("ul",{className:"space-y-2 text-sm text-blue-800 dark:text-blue-200",children:[e.jsx("li",{children:" Earn 3% commission on all donations to referred memorial fundraisers"}),e.jsx("li",{children:" Receive monthly payout reports and statements"}),e.jsx("li",{children:" Access partner dashboard to track referrals and earnings"}),e.jsx("li",{children:" Provide additional value to the families you serve"})]})]}),e.jsx(O,{type:"submit",className:"w-full",size:"lg",disabled:o.isPending,"data-testid":"button-submit",children:o.isPending?"Submitting...":"Join Partner Network"})]})})]})}function Tce(){const[,t]=Sc("/partner-dashboard/:partnerId"),s=t==null?void 0:t.partnerId,{toast:r}=Ht(),[n,a]=N.useState(!1),{data:i,isLoading:o}=Xe({queryKey:["/api/funeral-home-partners",s],enabled:!!s}),{data:l=[],isLoading:c}=Xe({queryKey:["/api/funeral-home-partners",s,"referrals"],enabled:!!s}),{data:d=[],isLoading:u}=Xe({queryKey:["/api/funeral-home-partners",s,"commissions"],enabled:!!s}),{data:m=[],isLoading:f}=Xe({queryKey:["/api/funeral-home-partners",s,"payouts"],enabled:!!s}),h=()=>{i!=null&&i.referralCode&&(navigator.clipboard.writeText(i.referralCode),a(!0),r({title:"Copied!",description:"Referral code copied to clipboard"}),setTimeout(()=>a(!1),2e3))};if(o)return e.jsx("div",{className:"container mx-auto px-4 py-12 text-center",children:"Loading..."});if(!i)return e.jsx("div",{className:"container mx-auto px-4 py-12 text-center",children:"Partner not found"});const p=d.filter(y=>y.status!=="cancelled").reduce((y,v)=>y+Number(v.commissionAmount),0),g=d.filter(y=>y.status==="pending").reduce((y,v)=>y+Number(v.commissionAmount),0);return d.filter(y=>y.status==="paid").reduce((y,v)=>y+Number(v.commissionAmount),0),e.jsxs("div",{className:"container max-w-7xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(KI,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-serif font-bold text-foreground","data-testid":"text-partner-name",children:i.businessName}),e.jsx("p",{className:"text-muted-foreground",children:"Partner Dashboard"})]})]}),e.jsx(ze,{variant:i.isActive?"default":"secondary","data-testid":"badge-status",children:i.isActive?"Active":"Inactive"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[e.jsxs($,{children:[e.jsxs(le,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Referral Code"}),e.jsx(O,{size:"icon",variant:"ghost",onClick:h,"data-testid":"button-copy-code",children:n?e.jsx($n,{className:"h-4 w-4"}):e.jsx(To,{className:"h-4 w-4"})})]}),e.jsxs(V,{children:[e.jsx("div",{className:"text-2xl font-mono font-bold text-primary","data-testid":"text-referral-code",children:i.referralCode}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Share with families"})]})]}),e.jsxs($,{children:[e.jsxs(le,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Total Referrals"}),e.jsx(Ms,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(V,{children:[e.jsx("div",{className:"text-2xl font-bold","data-testid":"text-total-referrals",children:l.length}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Memorials referred"})]})]}),e.jsxs($,{children:[e.jsxs(le,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Pending Earnings"}),e.jsx(Mo,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(V,{children:[e.jsxs("div",{className:"text-2xl font-bold","data-testid":"text-pending-earnings",children:["$",g.toFixed(2)]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Awaiting payout"})]})]}),e.jsxs($,{children:[e.jsxs(le,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Total Earnings"}),e.jsx(Ga,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(V,{children:[e.jsxs("div",{className:"text-2xl font-bold","data-testid":"text-total-earnings",children:["$",p.toFixed(2)]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"All time"})]})]})]}),e.jsxs(ba,{defaultValue:"referrals",className:"space-y-4",children:[e.jsxs(ra,{children:[e.jsx(qt,{value:"referrals","data-testid":"tab-referrals",children:"Referrals"}),e.jsx(qt,{value:"commissions","data-testid":"tab-commissions",children:"Commissions"}),e.jsx(qt,{value:"payouts","data-testid":"tab-payouts",children:"Payouts"})]}),e.jsx(Vt,{value:"referrals",className:"space-y-4",children:e.jsxs($,{children:[e.jsxs(le,{children:[e.jsx(ge,{children:"Referred Memorials"}),e.jsx($e,{children:"Families who created memorials using your referral code"})]}),e.jsx(V,{children:c?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading..."}):l.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground","data-testid":"text-no-referrals",children:"No referrals yet. Share your referral code with families to get started."}):e.jsx("div",{className:"space-y-4",children:l.map((y,v)=>e.jsxs("div",{className:"flex items-center justify-between p-4 border border-border rounded-lg hover-elevate","data-testid":`referral-${v}`,children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-foreground","data-testid":`text-referral-memorial-${v}`,children:["Memorial ID: ",y.memorialId]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Referred: ",new Date(y.createdAt).toLocaleDateString()]})]}),e.jsx(ze,{variant:"outline","data-testid":`badge-referral-code-${v}`,children:y.referralCode})]},y.id))})})]})}),e.jsx(Vt,{value:"commissions",className:"space-y-4",children:e.jsxs($,{children:[e.jsxs(le,{children:[e.jsx(ge,{children:"Commission History"}),e.jsx($e,{children:"Earnings from donations to referred memorials"})]}),e.jsx(V,{children:u?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading..."}):d.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground","data-testid":"text-no-commissions",children:"No commissions yet. Commissions are earned when donations are made to referred memorials."}):e.jsx("div",{className:"space-y-4",children:d.map((y,v)=>e.jsxs("div",{className:"flex items-center justify-between p-4 border border-border rounded-lg","data-testid":`commission-${v}`,children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-foreground","data-testid":`text-commission-type-${v}`,children:y.transactionType.charAt(0).toUpperCase()+y.transactionType.slice(1)}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Transaction: $",Number(y.transactionAmount).toFixed(2),"  Commission: $",Number(y.commissionAmount).toFixed(2)]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(y.createdAt).toLocaleDateString()})]}),e.jsx(ze,{variant:y.status==="paid"?"default":y.status==="pending"?"secondary":"outline","data-testid":`badge-commission-status-${v}`,children:y.status})]},y.id))})})]})}),e.jsx(Vt,{value:"payouts",className:"space-y-4",children:e.jsxs($,{children:[e.jsxs(le,{children:[e.jsx(ge,{children:"Payout History"}),e.jsx($e,{children:"Commission payments received"})]}),e.jsx(V,{children:f?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading..."}):m.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground","data-testid":"text-no-payouts",children:"No payouts yet. Payouts are processed monthly once you reach the minimum threshold."}):e.jsx("div",{className:"space-y-4",children:m.map((y,v)=>e.jsxs("div",{className:"flex items-center justify-between p-4 border border-border rounded-lg","data-testid":`payout-${v}`,children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"font-medium text-foreground","data-testid":`text-payout-amount-${v}`,children:["$",Number(y.amount).toFixed(2)]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Period: ",new Date(y.periodStart).toLocaleDateString()," - ",new Date(y.periodEnd).toLocaleDateString()]}),y.paidAt&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Paid: ",new Date(y.paidAt).toLocaleDateString()]})]}),e.jsx(ze,{variant:y.status==="paid"?"default":y.status==="pending"?"secondary":"outline","data-testid":`badge-payout-status-${v}`,children:y.status})]},y.id))})})]})})]})]})}const Mce="/assets/IMG_0102_1760999703535-DrlZ2jT3.jpeg";function ac({variant:t="classic",size:s="medium",className:r=""}){const n={small:{width:60,height:80},medium:{width:90,height:120},large:{width:300,height:400}},{width:a,height:i}=n[s],o=a/300;return e.jsxs("div",{className:`relative rounded-md overflow-hidden shadow-lg ${r}`,style:{width:`${a}px`,height:`${i}px`},children:[e.jsx("img",{src:Mce,alt:"Opictuary Badge",className:"w-full h-full object-cover"}),t==="classic"?e.jsx(Lce,{scale:o}):e.jsx(Dce,{scale:o})]})}function Lce({scale:t}){return e.jsxs("svg",{className:"absolute inset-0 w-full h-full pointer-events-none",viewBox:"0 0 300 400",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("defs",{children:e.jsxs("radialGradient",{id:"haloGlow",cx:"50%",cy:"50%",r:"50%",children:[e.jsx("stop",{offset:"0%",stopColor:"#FFD700",stopOpacity:"0.6"}),e.jsx("stop",{offset:"50%",stopColor:"#FFD700",stopOpacity:"0.3"}),e.jsx("stop",{offset:"100%",stopColor:"#FFD700",stopOpacity:"0"})]})}),e.jsx("circle",{cx:"150",cy:"140",r:"70",fill:"url(#haloGlow)"}),e.jsx("text",{x:"150",y:"170",textAnchor:"middle",className:"fill-white",style:{fontSize:"140px",fontFamily:"serif",fontWeight:"700",filter:"drop-shadow(3px 3px 6px rgba(0,0,0,0.9))"},children:"O"}),e.jsx("ellipse",{cx:"150",cy:"75",rx:"70",ry:"22",fill:"none",stroke:"#FFD700",strokeWidth:"3.5",opacity:"0.95"}),e.jsx("ellipse",{cx:"150",cy:"75",rx:"70",ry:"22",fill:"#FFD700",opacity:"0.25"}),e.jsx("text",{x:"150",y:"205",textAnchor:"middle",className:"fill-white",style:{fontSize:"42px",fontFamily:"serif",fontWeight:"600",letterSpacing:"2px",filter:"drop-shadow(2px 2px 4px rgba(0,0,0,0.9))"},children:"pictuary"}),e.jsx("text",{x:"150",y:"320",textAnchor:"middle",className:"fill-white",style:{fontSize:"13px",fontFamily:"sans-serif",fontWeight:"500",letterSpacing:"0.5px",filter:"drop-shadow(1px 1px 3px rgba(0,0,0,0.9))"},children:"obituary app inspired to help"}),e.jsx("text",{x:"150",y:"340",textAnchor:"middle",className:"fill-white",style:{fontSize:"13px",fontFamily:"sans-serif",fontWeight:"500",letterSpacing:"0.5px",filter:"drop-shadow(1px 1px 3px rgba(0,0,0,0.9))"},children:"families through times of need"})]})}function Dce({scale:t}){return e.jsxs("svg",{className:"absolute inset-0 w-full h-full pointer-events-none",viewBox:"0 0 300 400",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsxs("defs",{children:[e.jsxs("radialGradient",{id:"techGlow",cx:"50%",cy:"50%",r:"50%",children:[e.jsx("stop",{offset:"0%",stopColor:"#00D4FF",stopOpacity:"0.8"}),e.jsx("stop",{offset:"50%",stopColor:"#0066FF",stopOpacity:"0.4"}),e.jsx("stop",{offset:"100%",stopColor:"#0033CC",stopOpacity:"0"})]}),e.jsxs("linearGradient",{id:"metalGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#E0E0E0"}),e.jsx("stop",{offset:"50%",stopColor:"#FFFFFF"}),e.jsx("stop",{offset:"100%",stopColor:"#B0B0B0"})]}),e.jsxs("linearGradient",{id:"goldTech",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:"#FFA500"}),e.jsx("stop",{offset:"100%",stopColor:"#FF8C00"})]})]}),e.jsx("circle",{cx:"150",cy:"140",r:"80",fill:"url(#techGlow)"}),e.jsx("circle",{cx:"150",cy:"140",r:"95",fill:"none",stroke:"url(#goldTech)",strokeWidth:"3",opacity:"0.8"}),e.jsx("circle",{cx:"150",cy:"140",r:"95",fill:"none",stroke:"#00D4FF",strokeWidth:"1",opacity:"0.6",strokeDasharray:"5,5"}),e.jsx("circle",{cx:"150",cy:"140",r:"75",fill:"none",stroke:"url(#metalGradient)",strokeWidth:"2",opacity:"0.7"}),e.jsx("text",{x:"150",y:"170",textAnchor:"middle",fill:"url(#metalGradient)",style:{fontSize:"140px",fontFamily:"sans-serif",fontWeight:"900",filter:"drop-shadow(0px 0px 10px rgba(0,212,255,0.8)) drop-shadow(3px 3px 6px rgba(0,0,0,0.9))"},children:"O"}),e.jsx("path",{d:"M 85 70 Q 150 50 215 70",stroke:"url(#goldTech)",strokeWidth:"4",fill:"none",opacity:"0.9"}),e.jsx("path",{d:"M 85 70 Q 150 50 215 70",stroke:"#00D4FF",strokeWidth:"2",fill:"none",opacity:"0.6",strokeDasharray:"3,3"}),e.jsx("line",{x1:"80",y1:"140",x2:"100",y2:"140",stroke:"#00D4FF",strokeWidth:"2",opacity:"0.8"}),e.jsx("line",{x1:"200",y1:"140",x2:"220",y2:"140",stroke:"#00D4FF",strokeWidth:"2",opacity:"0.8"}),e.jsx("text",{x:"150",y:"215",textAnchor:"middle",fill:"url(#metalGradient)",style:{fontSize:"42px",fontFamily:"sans-serif",fontWeight:"700",letterSpacing:"4px",filter:"drop-shadow(0px 0px 8px rgba(0,212,255,0.6)) drop-shadow(2px 2px 4px rgba(0,0,0,0.9))"},children:"PICTUARY"}),e.jsx("line",{x1:"100",y1:"240",x2:"200",y2:"240",stroke:"url(#goldTech)",strokeWidth:"2",opacity:"0.7"}),e.jsx("text",{x:"150",y:"320",textAnchor:"middle",className:"fill-white",style:{fontSize:"13px",fontFamily:"sans-serif",fontWeight:"600",letterSpacing:"1px",filter:"drop-shadow(0px 0px 5px rgba(0,212,255,0.8)) drop-shadow(1px 1px 3px rgba(0,0,0,0.9))"},children:"OBITUARY APP INSPIRED"}),e.jsx("text",{x:"150",y:"340",textAnchor:"middle",className:"fill-white",style:{fontSize:"13px",fontFamily:"sans-serif",fontWeight:"600",letterSpacing:"1px",filter:"drop-shadow(0px 0px 5px rgba(0,212,255,0.8)) drop-shadow(1px 1px 3px rgba(0,0,0,0.9))"},children:"TO HELP FAMILIES"}),e.jsx("text",{x:"150",y:"360",textAnchor:"middle",className:"fill-white",style:{fontSize:"13px",fontFamily:"sans-serif",fontWeight:"600",letterSpacing:"1px",filter:"drop-shadow(0px 0px 5px rgba(0,212,255,0.8)) drop-shadow(1px 1px 3px rgba(0,0,0,0.9))"},children:"THROUGH TIMES OF NEED"}),e.jsx("circle",{cx:"20",cy:"20",r:"3",fill:"#00D4FF",opacity:"0.8"}),e.jsx("circle",{cx:"280",cy:"20",r:"3",fill:"#00D4FF",opacity:"0.8"}),e.jsx("circle",{cx:"20",cy:"380",r:"3",fill:"#00D4FF",opacity:"0.8"}),e.jsx("circle",{cx:"280",cy:"380",r:"3",fill:"#00D4FF",opacity:"0.8"})]})}function Ice(){const[t,s]=N.useState(null),r=n=>{s(n),setTimeout(()=>s(null),2e3)};return e.jsx("div",{className:"min-h-screen bg-background p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("h1",{className:"text-3xl font-serif font-bold text-center mb-4",children:"Opictuary App Badges"}),e.jsx("p",{className:"text-center text-muted-foreground mb-8",children:"Reusable badge components integrated throughout the platform"}),e.jsxs($,{className:"p-8 mb-8",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Navigation Logo Component"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"The logo component used in the navigation header - see it at the top of this page!"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Classic Angel Halo Logo"}),e.jsx("div",{className:"flex justify-center p-6 bg-card/50 rounded-lg",children:e.jsx(ro,{variant:"classic",showTagline:!0})}),e.jsx("div",{className:"flex justify-center mt-4",children:e.jsx(ro,{variant:"classic",showTagline:!1})}),e.jsx("p",{className:"text-sm text-muted-foreground text-center mt-4",children:"With and without tagline"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Halo-Tech Logo"}),e.jsx("div",{className:"flex justify-center p-6 bg-card/50 rounded-lg",children:e.jsx(ro,{variant:"halo-tech",showTagline:!0})}),e.jsx("div",{className:"flex justify-center mt-4",children:e.jsx(ro,{variant:"halo-tech",showTagline:!1})}),e.jsx("p",{className:"text-sm text-muted-foreground text-center mt-4",children:"With and without tagline"})]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8 mb-8",children:[e.jsxs($,{className:"p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Classic Angel Halo"}),e.jsx(ze,{variant:"secondary",children:"Traditional"})]}),e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(ac,{variant:"classic",size:"large"})}),e.jsx("p",{className:"text-sm text-muted-foreground text-center mt-4",children:"Traditional design with golden angel halo - elegant and timeless"}),e.jsx("div",{className:"flex justify-center gap-2 mt-4",children:e.jsxs(O,{variant:"outline",size:"sm","data-testid":"button-download-classic",children:[e.jsx(Al,{className:"w-4 h-4 mr-2"}),"Download"]})})]}),e.jsxs($,{className:"p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Halo-Inspired Design"}),e.jsx(ze,{variant:"secondary",children:"Futuristic"})]}),e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(ac,{variant:"halo-tech",size:"large"})}),e.jsx("p",{className:"text-sm text-muted-foreground text-center mt-4",children:"Futuristic Halo-inspired design with tech elements and metallic styling"}),e.jsx("div",{className:"flex justify-center gap-2 mt-4",children:e.jsxs(O,{variant:"outline",size:"sm","data-testid":"button-download-halo",children:[e.jsx(Al,{className:"w-4 h-4 mr-2"}),"Download"]})})]})]}),e.jsxs($,{className:"p-8 mb-8",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Badge Sizes"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Available in three sizes: small (60x80), medium (90x120), and large (300x400)"}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4 flex items-center gap-2",children:"Classic Angel Halo - All Sizes"}),e.jsxs("div",{className:"flex flex-wrap items-end justify-center gap-8",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(ac,{variant:"classic",size:"small"}),e.jsx(O,{variant:"ghost",size:"sm",onClick:()=>r("small-classic"),"data-testid":"button-copy-small-classic",children:t==="small-classic"?e.jsxs(e.Fragment,{children:[e.jsx($n,{className:"w-4 h-4 mr-2"}),"Copied"]}):e.jsxs(e.Fragment,{children:[e.jsx(To,{className:"w-4 h-4 mr-2"}),"Small"]})})]}),e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(ac,{variant:"classic",size:"medium"}),e.jsx(O,{variant:"ghost",size:"sm",onClick:()=>r("medium-classic"),"data-testid":"button-copy-medium-classic",children:t==="medium-classic"?e.jsxs(e.Fragment,{children:[e.jsx($n,{className:"w-4 h-4 mr-2"}),"Copied"]}):e.jsxs(e.Fragment,{children:[e.jsx(To,{className:"w-4 h-4 mr-2"}),"Medium"]})})]}),e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(ac,{variant:"classic",size:"large"}),e.jsx(O,{variant:"ghost",size:"sm",onClick:()=>r("large-classic"),"data-testid":"button-copy-large-classic",children:t==="large-classic"?e.jsxs(e.Fragment,{children:[e.jsx($n,{className:"w-4 h-4 mr-2"}),"Copied"]}):e.jsxs(e.Fragment,{children:[e.jsx(To,{className:"w-4 h-4 mr-2"}),"Large"]})})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4 flex items-center gap-2",children:"Halo-Inspired Tech - All Sizes"}),e.jsxs("div",{className:"flex flex-wrap items-end justify-center gap-8",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(ac,{variant:"halo-tech",size:"small"}),e.jsx(O,{variant:"ghost",size:"sm",onClick:()=>r("small-tech"),"data-testid":"button-copy-small-tech",children:t==="small-tech"?e.jsxs(e.Fragment,{children:[e.jsx($n,{className:"w-4 h-4 mr-2"}),"Copied"]}):e.jsxs(e.Fragment,{children:[e.jsx(To,{className:"w-4 h-4 mr-2"}),"Small"]})})]}),e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(ac,{variant:"halo-tech",size:"medium"}),e.jsx(O,{variant:"ghost",size:"sm",onClick:()=>r("medium-tech"),"data-testid":"button-copy-medium-tech",children:t==="medium-tech"?e.jsxs(e.Fragment,{children:[e.jsx($n,{className:"w-4 h-4 mr-2"}),"Copied"]}):e.jsxs(e.Fragment,{children:[e.jsx(To,{className:"w-4 h-4 mr-2"}),"Medium"]})})]}),e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(ac,{variant:"halo-tech",size:"large"}),e.jsx(O,{variant:"ghost",size:"sm",onClick:()=>r("large-tech"),"data-testid":"button-copy-large-tech",children:t==="large-tech"?e.jsxs(e.Fragment,{children:[e.jsx($n,{className:"w-4 h-4 mr-2"}),"Copied"]}):e.jsxs(e.Fragment,{children:[e.jsx(To,{className:"w-4 h-4 mr-2"}),"Large"]})})]})]})]})]})]}),e.jsxs($,{className:"p-8",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Where You'll See These Badges"}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"p-4 bg-card/50 rounded-lg",children:[e.jsx("h3",{className:"font-medium mb-2",children:"Navigation Header"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"The logo component is displayed in the top navigation bar across all pages"})]}),e.jsxs("div",{className:"p-4 bg-card/50 rounded-lg",children:[e.jsx("h3",{className:"font-medium mb-2",children:"Footer"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Small badge displayed in the footer of every page for brand consistency"})]}),e.jsxs("div",{className:"p-4 bg-card/50 rounded-lg",children:[e.jsx("h3",{className:"font-medium mb-2",children:"Marketing Materials"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Large badges perfect for app store listings, social media, and promotional content"})]})]})]}),e.jsxs("div",{className:"text-center mt-12",children:[e.jsx("h2",{className:"text-2xl font-serif font-semibold mb-2",children:"Opictuary"}),e.jsx("p",{className:"text-muted-foreground italic",children:"obituary app inspired to help families through times of need"})]})]})})}const Rce="/assets/IMG_0721_1760000535499-VSarnAYA.jpeg",Fce="/assets/IMG_0722_1760000535499-Bi9Uqkpy.jpeg",Oce="/assets/IMG_0723_1760000535499-B3rIJTpv.jpeg",$ce="/assets/IMG_0724_1760000535499-DzPE6HTK.jpeg",Bce="/assets/IMG_0725_1760000535499-oesvtg5M.jpeg",Uce="/assets/IMG_0726_1760000535499-CpUWStVU.jpeg",zce="/assets/IMG_0727_1760000535499-Dj5ImS0x.jpeg",qce="/assets/IMG_0728_1760000535499-jqifloLZ.jpeg",Vce="/assets/IMG_0729_1760000535499-VrPPRHzR.jpeg",Hce=[{id:"0721",src:Rce,label:"Design Reference 1"},{id:"0722",src:Fce,label:"Design Reference 2"},{id:"0723",src:Oce,label:"Design Reference 3"},{id:"0724",src:$ce,label:"Design Reference 4"},{id:"0725",src:Bce,label:"Design Reference 5"},{id:"0726",src:Uce,label:"Design Reference 6"},{id:"0727",src:zce,label:"Design Reference 7"},{id:"0728",src:qce,label:"Design Reference 8"},{id:"0729",src:Vce,label:"Design Reference 9"}];function Wce(){return e.jsx("div",{className:"min-h-screen bg-background p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold mb-2","data-testid":"text-title",children:"Design Reference Gallery"}),e.jsx("p",{className:"text-muted-foreground","data-testid":"text-subtitle",children:"Your uploaded design mockups for the Opictuary platform"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Hce.map(t=>e.jsxs($,{"data-testid":`card-design-${t.id}`,className:"overflow-hidden",children:[e.jsx(le,{className:"pb-3",children:e.jsx(ge,{className:"text-lg","data-testid":`text-label-${t.id}`,children:t.label})}),e.jsx(V,{className:"p-0",children:e.jsx("img",{src:t.src,alt:t.label,className:"w-full h-auto object-contain bg-muted","data-testid":`img-design-${t.id}`})})]},t.id))}),e.jsxs("div",{className:"mt-8 p-6 bg-card rounded-lg border","data-testid":"card-instructions",children:[e.jsx("h2",{className:"text-xl font-semibold mb-3",children:"Next Steps"}),e.jsx("p",{className:"text-muted-foreground",children:"Review these design references and let me know which elements you'd like to implement:"}),e.jsxs("ul",{className:"list-disc list-inside mt-3 space-y-2 text-muted-foreground",children:[e.jsx("li",{children:"Color scheme and backgrounds"}),e.jsx("li",{children:"Layout and navigation structure"}),e.jsx("li",{children:"Typography and font styles"}),e.jsx("li",{children:"Button styles and components"}),e.jsx("li",{children:"Any new features or sections"})]})]})]})})}const M6=[{title:"988 Suicide & Crisis Lifeline",contact:"988",description:"24/7 free and confidential support for people in distress, prevention and crisis resources.",isEmergency:!0},{title:"Crisis Text Line",contact:"Text HOME to 741741",description:"Free 24/7 support via text message for people in crisis.",isEmergency:!0},{title:"National Alliance for Grieving Children",contact:"(866) 432-1542",description:"Support for children and families dealing with grief.",isEmergency:!1},{title:"GriefShare",contact:"www.griefshare.org",description:"Find local grief support groups and online resources.",isEmergency:!1}],L6=[{title:"BetterHelp Online Therapy",contact:"www.betterhelp.com",description:"Professional online counseling specializing in grief and bereavement therapy.",category:"mental-health"},{title:"Grief Recovery Method",contact:"www.griefrecoverymethod.com",description:"Evidence-based approach to dealing with loss through professional guidance.",category:"mental-health"},{title:"Stephen Ministry",contact:"www.stephenministries.org",description:"Christian caregiving ministry providing one-on-one spiritual support during grief.",category:"spiritual"},{title:"Jewish Bereavement Counseling",contact:"www.jewishbereavement.org",description:"Faith-based grief support rooted in Jewish traditions and practices.",category:"spiritual"},{title:"Islamic Counseling & Support",contact:"www.muslimgriefsupport.com",description:"Culturally sensitive grief support for Muslim families.",category:"spiritual"},{title:"Headspace Meditation App",contact:"www.headspace.com/grief",description:"Guided meditation and mindfulness exercises for coping with loss.",category:"mental-health"},{title:"What's Your Grief",contact:"www.whatsyourgrief.com",description:"Online community and resources for understanding and navigating grief.",category:"mental-health"},{title:"Hospice Foundation of America",contact:"(877) 258-4433",description:"Professional bereavement counseling and spiritual care resources.",category:"both"}];function Kce(){const{memorialId:t}=Ba(),{toast:s}=Ht(),{user:r,isAuthenticated:n}=fo(),[a,i]=N.useState(!1),[o,l]=N.useState(""),[c,d]=N.useState(""),[u,m]=N.useState("phone"),{data:f}=Xe({queryKey:[`/api/memorials/${t}`]}),{data:h,isLoading:p}=Xe({queryKey:[`/api/memorials/${t}/grief-support`],enabled:!!t}),{data:g}=Xe({queryKey:[`/api/memorials/${t}/admins`],enabled:!!t&&n}),v=(f==null?void 0:f.creatorEmail)===(r==null?void 0:r.email)||(g==null?void 0:g.some(L=>L.email===(r==null?void 0:r.email)&&L.canEditMemorial)),j=yt({mutationFn:async L=>{const T=await fetch(`/api/memorials/${t}/grief-support`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(L),credentials:"include"});if(!T.ok){const M=await T.json();throw new Error(M.error||"Failed to update grief support")}return T.json()},onSuccess:()=>{xt.invalidateQueries({queryKey:[`/api/memorials/${t}/grief-support`]}),s({title:"Success",description:"Grief support information updated successfully"}),i(!1),l(""),d("")},onError:L=>{s({variant:"destructive",title:"Error",description:L.message||"Failed to update grief support information"})}}),w=()=>{if(!o||!c){s({variant:"destructive",title:"Error",description:"Please fill in both label and contact information"});return}const L=(h==null?void 0:h.customContacts)||[],T={label:o,value:c,type:u};j.mutate({customContacts:[...L,T]})},_=L=>{const M=((h==null?void 0:h.customContacts)||[]).filter((F,k)=>k!==L);j.mutate({customContacts:M})},P=L=>{j.mutate({pastoralContact:L})},E=L=>{j.mutate({familyContact:L})};return p?e.jsx("div",{className:"container mx-auto py-8 px-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("div",{className:"h-8 w-48 bg-muted animate-pulse rounded mb-6"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"h-32 bg-muted animate-pulse rounded"}),e.jsx("div",{className:"h-32 bg-muted animate-pulse rounded"})]})]})}):e.jsx("div",{className:"container mx-auto py-8 px-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Grief Support Resources"}),e.jsx("p",{className:"text-muted-foreground",children:"You're not alone. Find support and resources to help you through this difficult time."})]}),e.jsxs($,{className:"border-destructive/20 bg-destructive/5",children:[e.jsxs(le,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx($d,{className:"h-5 w-5"}),"Emergency Hotlines"]}),e.jsx($e,{children:"Available 24/7 for immediate support"})]}),e.jsx(V,{className:"space-y-4",children:M6.filter(L=>L.isEmergency).map((L,T)=>e.jsxs("div",{className:"border-l-4 border-destructive pl-4","data-testid":`hotline-emergency-${T}`,children:[e.jsx("h3",{className:"font-semibold","data-testid":`hotline-title-${T}`,children:L.title}),e.jsx("p",{className:"text-lg font-mono text-primary","data-testid":`hotline-contact-${T}`,children:L.contact}),e.jsx("p",{className:"text-sm text-muted-foreground","data-testid":`hotline-description-${T}`,children:L.description})]},T))})]}),e.jsxs($,{children:[e.jsxs(le,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Ms,{className:"h-5 w-5"}),"Support Groups & Resources"]}),e.jsx($e,{children:"Organizations that can help you through grief"})]}),e.jsx(V,{className:"space-y-4",children:M6.filter(L=>!L.isEmergency).map((L,T)=>e.jsxs("div",{className:"border-l-4 border-primary pl-4","data-testid":`resource-${T}`,children:[e.jsx("h3",{className:"font-semibold","data-testid":`resource-title-${T}`,children:L.title}),e.jsx("p",{className:"text-lg font-mono text-primary","data-testid":`resource-contact-${T}`,children:L.contact}),e.jsx("p",{className:"text-sm text-muted-foreground","data-testid":`resource-description-${T}`,children:L.description})]},T))})]}),e.jsxs($,{className:"border-primary/20 bg-primary/5",children:[e.jsxs(le,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(VC,{className:"h-5 w-5"}),"Spiritual & Mental Health Support"]}),e.jsx($e,{children:"Professional counseling, faith-based support, and mindfulness resources"})]}),e.jsxs(V,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-sm mb-3 flex items-center gap-2",children:[e.jsx(VC,{className:"h-4 w-4"}),"Mental Health & Counseling"]}),e.jsx("div",{className:"space-y-4",children:L6.filter(L=>L.category==="mental-health"||L.category==="both").map((L,T)=>e.jsxs("div",{className:"border-l-4 border-primary pl-4","data-testid":`mental-health-resource-${T}`,children:[e.jsx("h4",{className:"font-semibold","data-testid":`mental-health-title-${T}`,children:L.title}),e.jsx("p",{className:"text-lg font-mono text-primary","data-testid":`mental-health-contact-${T}`,children:L.contact}),e.jsx("p",{className:"text-sm text-muted-foreground","data-testid":`mental-health-description-${T}`,children:L.description})]},T))})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-sm mb-3 flex items-center gap-2",children:[e.jsx(Bs,{className:"h-4 w-4"}),"Spiritual & Faith-Based Support"]}),e.jsx("div",{className:"space-y-4",children:L6.filter(L=>L.category==="spiritual").map((L,T)=>e.jsxs("div",{className:"border-l-4 border-accent pl-4","data-testid":`spiritual-resource-${T}`,children:[e.jsx("h4",{className:"font-semibold","data-testid":`spiritual-title-${T}`,children:L.title}),e.jsx("p",{className:"text-lg font-mono text-primary","data-testid":`spiritual-contact-${T}`,children:L.contact}),e.jsx("p",{className:"text-sm text-muted-foreground","data-testid":`spiritual-description-${T}`,children:L.description})]},T))})]})]})]}),(h==null?void 0:h.pastoralContact)&&e.jsxs($,{children:[e.jsx(le,{children:e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(_t,{className:"h-5 w-5"}),"Pastoral Care"]})}),e.jsx(V,{children:e.jsx("p",{className:"text-lg","data-testid":"pastoral-contact",children:h.pastoralContact})})]}),(h==null?void 0:h.familyContact)&&e.jsxs($,{children:[e.jsx(le,{children:e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Pl,{className:"h-5 w-5"}),"Family Contact"]})}),e.jsx(V,{children:e.jsx("p",{className:"text-lg","data-testid":"family-contact",children:h.familyContact})})]}),(h==null?void 0:h.customContacts)&&h.customContacts.length>0&&e.jsxs($,{children:[e.jsx(le,{children:e.jsx(ge,{children:"Additional Support Contacts"})}),e.jsx(V,{className:"space-y-3",children:h.customContacts.map((L,T)=>e.jsxs("div",{className:"flex items-center justify-between border-l-4 border-accent pl-4","data-testid":`custom-contact-${T}`,children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold","data-testid":`custom-contact-label-${T}`,children:L.label}),e.jsx("p",{className:"text-lg font-mono text-primary","data-testid":`custom-contact-value-${T}`,children:L.value}),e.jsx("p",{className:"text-sm text-muted-foreground capitalize",children:L.type})]}),v&&e.jsx(O,{variant:"ghost",size:"icon",onClick:()=>_(T),"data-testid":`button-remove-contact-${T}`,children:e.jsx(Vo,{className:"h-4 w-4"})})]},T))})]}),v&&e.jsxs($,{children:[e.jsxs(le,{children:[e.jsx(ge,{children:"Manage Support Contacts"}),e.jsx($e,{children:"Add personalized support resources for visitors to this memorial"})]}),e.jsxs(V,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"pastoral-contact",children:"Pastoral Care Contact"}),e.jsx("div",{className:"flex gap-2",children:e.jsx(re,{id:"pastoral-contact",placeholder:"Pastor, Rabbi, Imam contact information",defaultValue:(h==null?void 0:h.pastoralContact)||"",onBlur:L=>{L.target.value!==(h==null?void 0:h.pastoralContact)&&P(L.target.value)},"data-testid":"input-pastoral-contact"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"family-contact",children:"Primary Family Contact"}),e.jsx("div",{className:"flex gap-2",children:e.jsx(re,{id:"family-contact",placeholder:"Family member contact for support",defaultValue:(h==null?void 0:h.familyContact)||"",onBlur:L=>{L.target.value!==(h==null?void 0:h.familyContact)&&E(L.target.value)},"data-testid":"input-family-contact"})})]}),e.jsx("div",{className:"border-t pt-4",children:a?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"contact-label",children:"Contact Label"}),e.jsx(re,{id:"contact-label",placeholder:"e.g., Therapist, Support Group, etc.",value:o,onChange:L=>l(L.target.value),"data-testid":"input-contact-label"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"contact-value",children:"Contact Information"}),e.jsx(re,{id:"contact-value",placeholder:"Phone number, email, or website",value:c,onChange:L=>d(L.target.value),"data-testid":"input-contact-value"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"contact-type",children:"Contact Type"}),e.jsxs("select",{id:"contact-type",className:"w-full rounded-md border border-input bg-background px-3 py-2",value:u,onChange:L=>m(L.target.value),"data-testid":"select-contact-type",children:[e.jsx("option",{value:"phone",children:"Phone"}),e.jsx("option",{value:"email",children:"Email"}),e.jsx("option",{value:"website",children:"Website"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(O,{onClick:w,"data-testid":"button-save-contact",children:"Save Contact"}),e.jsx(O,{variant:"outline",onClick:()=>{i(!1),l(""),d("")},"data-testid":"button-cancel-contact",children:"Cancel"})]})]}):e.jsxs(O,{onClick:()=>i(!0),variant:"outline","data-testid":"button-add-contact",children:[e.jsx(bs,{className:"h-4 w-4 mr-2"}),"Add Custom Contact"]})})]})]})]})})}const Yce=[{name:"Memorial Page Sidebar",description:"Featured placement on memorial pages with high visibility",price:"$299/month",impressions:"50,000+",features:["Prime sidebar placement","Discount code integration","Click tracking & analytics","Appears on all memorials"]},{name:"Category Spotlight",description:"Exclusive placement in specific product categories",price:"$199/month",impressions:"25,000+",features:["Category-specific targeting","Percentage-off badge display","Custom discount codes","Detailed conversion tracking"]},{name:"Partner Directory",description:"Featured listing in partner directory with referral tracking",price:"$149/month",impressions:"15,000+",features:["Directory page presence","Referral code system","Commission tracking","Monthly performance reports"]}],Gce=[{icon:"",title:"Funeral Homes",description:"Connect with families planning memorial services",discount:"Offer 10-20% off services"},{icon:"",title:"Churches & Religious Centers",description:"Provide space for memorial services and grief support",discount:"Special venue packages"},{icon:"",title:"Cemetery & Land",description:"Promote burial plots, cremation gardens, and memorial spaces",discount:"Up to 15% off plots"},{icon:"",title:"Florists",description:"Offer sympathy arrangements and memorial flowers",discount:"10-25% off arrangements"},{icon:"",title:"Memorial Services",description:"Photography, video tributes, and memory preservation",discount:"Package discounts available"},{icon:"",title:"Custom Products",description:"Urns, caskets, memorial jewelry, and personalized items",discount:"20% off custom orders"}];function Qce(){return e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-background via-background to-accent/5",children:e.jsxs("div",{className:"container mx-auto px-4 py-12",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("div",{className:"inline-flex items-center gap-2 mb-4",children:e.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(mw,{className:"w-6 h-6 text-primary"})})}),e.jsx("h1",{className:"text-4xl md:text-5xl font-serif font-bold mb-4",children:"Advertising Opportunities"}),e.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"Connect with families during their time of need. Offer meaningful discounts and grow your business."})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-16",children:[e.jsx($,{className:"border-primary/20",children:e.jsxs(le,{className:"text-center",children:[e.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center mb-3",children:e.jsx(Ms,{className:"w-6 h-6 text-primary"})}),e.jsx(ge,{children:"Reach Families"}),e.jsx($e,{children:"Connect with thousands of families creating memorials for loved ones"})]})}),e.jsx($,{className:"border-primary/20",children:e.jsxs(le,{className:"text-center",children:[e.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center mb-3",children:e.jsx(lx,{className:"w-6 h-6 text-primary"})}),e.jsx(ge,{children:"Targeted Exposure"}),e.jsx($e,{children:"Your ads appear to visitors when they're actively planning services"})]})}),e.jsx($,{className:"border-primary/20",children:e.jsxs(le,{className:"text-center",children:[e.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center mb-3",children:e.jsx(Mo,{className:"w-6 h-6 text-primary"})}),e.jsx(ge,{children:"Track Results"}),e.jsx($e,{children:"Detailed analytics on impressions, clicks, and conversions"})]})})]}),e.jsxs("div",{className:"mb-16",children:[e.jsx("h2",{className:"text-3xl font-serif font-bold text-center mb-8",children:"Perfect For These Businesses"}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:Gce.map((t,s)=>e.jsxs($,{className:"hover-elevate","data-testid":`business-type-${s}`,children:[e.jsx(le,{children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-3xl","data-testid":`business-icon-${s}`,children:t.icon}),e.jsxs("div",{children:[e.jsx(ge,{className:"text-lg","data-testid":`business-title-${s}`,children:t.title}),e.jsx($e,{className:"mt-1","data-testid":`business-description-${s}`,children:t.description})]})]})}),e.jsx(V,{children:e.jsx(ze,{variant:"secondary",className:"gap-1","data-testid":`business-discount-${s}`,children:e.jsx("span",{className:"font-semibold",children:t.discount})})})]},s))})]}),e.jsxs("div",{className:"mb-16",children:[e.jsx("h2",{className:"text-3xl font-serif font-bold text-center mb-8",children:"Advertising Packages"}),e.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:Yce.map((t,s)=>e.jsxs($,{className:"hover-elevate","data-testid":`ad-package-${s}`,children:[e.jsxs(le,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(ge,{"data-testid":`package-name-${s}`,children:t.name}),e.jsx(ze,{variant:"outline","data-testid":`package-impressions-${s}`,children:t.impressions})]}),e.jsx($e,{"data-testid":`package-description-${s}`,children:t.description}),e.jsx("div",{className:"text-3xl font-bold text-primary mt-4","data-testid":`package-price-${s}`,children:t.price})]}),e.jsx(V,{children:e.jsx("ul",{className:"space-y-2",children:t.features.map((r,n)=>e.jsxs("li",{className:"flex items-center gap-2","data-testid":`feature-${s}-${n}`,children:[e.jsx($n,{className:"w-4 h-4 text-primary flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:r})]},n))})})]},s))})]}),e.jsxs("div",{className:"bg-gradient-to-r from-primary/10 via-accent/10 to-primary/10 rounded-xl p-8 md:p-12 text-center",children:[e.jsx("h2",{className:"text-3xl font-serif font-bold mb-4",children:"How Discount Links Work"}),e.jsxs("div",{className:"max-w-3xl mx-auto mb-8 space-y-4 text-left",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/20 flex items-center justify-center flex-shrink-0 font-bold",children:"1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-1",children:"Submit Your Ad"}),e.jsx("p",{className:"text-muted-foreground",children:"Create an advertisement with your discount percentage (10%, 15%, 20%, etc.)"})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/20 flex items-center justify-center flex-shrink-0 font-bold",children:"2"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-1",children:"Get Your Discount Code"}),e.jsx("p",{className:"text-muted-foreground",children:"We generate a unique discount code that tracks all referrals from our platform"})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/20 flex items-center justify-center flex-shrink-0 font-bold",children:"3"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-1",children:"Ads Appear with Discount Badge"}),e.jsx("p",{className:"text-muted-foreground",children:'Your ad displays prominently with a percentage-off badge ("15% OFF" etc.)'})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/20 flex items-center justify-center flex-shrink-0 font-bold",children:"4"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-1",children:"Track Every Click"}),e.jsx("p",{className:"text-muted-foreground",children:"Monitor impressions, clicks, and conversions through your partner dashboard"})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mt-8",children:[e.jsx(He,{href:"/advertise",children:e.jsxs(O,{size:"lg","data-testid":"button-submit-ad",children:[e.jsx(mw,{className:"w-4 h-4 mr-2"}),"Submit an Advertisement"]})}),e.jsx(He,{href:"/partner-signup",children:e.jsx(O,{size:"lg",variant:"outline","data-testid":"button-become-partner",children:"Become a Partner"})})]})]}),e.jsxs("div",{className:"mt-16 text-center",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Questions about advertising?"}),e.jsxs("p",{className:"text-muted-foreground mb-6",children:["Contact us at ",e.jsx("a",{href:"mailto:advertising@opictuary.com",className:"text-primary hover:underline",children:"advertising@opictuary.com"})]})]})]})})}function _U({src:t,name:s,email:r,size:n="md",className:a=""}){const i={sm:"h-8 w-8 text-xs",md:"h-10 w-10 text-sm",lg:"h-12 w-12 text-base"},o=()=>{if(s){const l=s.trim().split(" ");return l.length>=2?`${l[0][0]}${l[l.length-1][0]}`.toUpperCase():s.substring(0,2).toUpperCase()}return r?r.substring(0,2).toUpperCase():"U"};return e.jsxs(Da,{className:`${i[n]} ${a}`,children:[t&&e.jsx(Td,{src:t,alt:s||r||"User"}),e.jsx(Ia,{className:"bg-primary text-primary-foreground font-semibold",children:o()})]})}var SU="AlertDialog",[Zce,Qge]=Dn(SU,[uF]),kc=uF(),CU=t=>{const{__scopeAlertDialog:s,...r}=t,n=kc(s);return e.jsx(kF,{...n,...r,modal:!0})};CU.displayName=SU;var Xce="AlertDialogTrigger",Jce=N.forwardRef((t,s)=>{const{__scopeAlertDialog:r,...n}=t,a=kc(r);return e.jsx(AF,{...a,...n,ref:s})});Jce.displayName=Xce;var ede="AlertDialogPortal",kU=t=>{const{__scopeAlertDialog:s,...r}=t,n=kc(s);return e.jsx(PF,{...n,...r})};kU.displayName=ede;var tde="AlertDialogOverlay",AU=N.forwardRef((t,s)=>{const{__scopeAlertDialog:r,...n}=t,a=kc(r);return e.jsx(d4,{...a,...n,ref:s})});AU.displayName=tde;var Mh="AlertDialogContent",[sde,rde]=Zce(Mh),nde=hI("AlertDialogContent"),PU=N.forwardRef((t,s)=>{const{__scopeAlertDialog:r,children:n,...a}=t,i=kc(r),o=N.useRef(null),l=us(s,o),c=N.useRef(null);return e.jsx(Pee,{contentName:Mh,titleName:EU,docsSlug:"alert-dialog",children:e.jsx(sde,{scope:r,cancelRef:c,children:e.jsxs(u4,{role:"alertdialog",...i,...a,ref:l,onOpenAutoFocus:ht(a.onOpenAutoFocus,d=>{var u;d.preventDefault(),(u=c.current)==null||u.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[e.jsx(nde,{children:n}),e.jsx(ide,{contentRef:o})]})})})});PU.displayName=Mh;var EU="AlertDialogTitle",TU=N.forwardRef((t,s)=>{const{__scopeAlertDialog:r,...n}=t,a=kc(r);return e.jsx(m4,{...a,...n,ref:s})});TU.displayName=EU;var MU="AlertDialogDescription",LU=N.forwardRef((t,s)=>{const{__scopeAlertDialog:r,...n}=t,a=kc(r);return e.jsx(h4,{...a,...n,ref:s})});LU.displayName=MU;var ade="AlertDialogAction",DU=N.forwardRef((t,s)=>{const{__scopeAlertDialog:r,...n}=t,a=kc(r);return e.jsx(f4,{...a,...n,ref:s})});DU.displayName=ade;var IU="AlertDialogCancel",RU=N.forwardRef((t,s)=>{const{__scopeAlertDialog:r,...n}=t,{cancelRef:a}=rde(IU,r),i=kc(r),o=us(s,a);return e.jsx(f4,{...i,...n,ref:o})});RU.displayName=IU;var ide=({contentRef:t})=>{const s=`\`${Mh}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Mh}\` by passing a \`${MU}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Mh}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return N.useEffect(()=>{var n;document.getElementById((n=t.current)==null?void 0:n.getAttribute("aria-describedby"))||console.warn(s)},[s,t]),null},ode=CU,lde=kU,FU=AU,OU=PU,$U=DU,BU=RU,UU=TU,zU=LU;const qU=ode,cde=lde,VU=N.forwardRef(({className:t,...s},r)=>e.jsx(FU,{className:bt("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s,ref:r}));VU.displayName=FU.displayName;const H4=N.forwardRef(({className:t,...s},r)=>e.jsxs(cde,{children:[e.jsx(VU,{}),e.jsx(OU,{ref:r,className:bt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...s})]}));H4.displayName=OU.displayName;const W4=({className:t,...s})=>e.jsx("div",{className:bt("flex flex-col space-y-2 text-center sm:text-left",t),...s});W4.displayName="AlertDialogHeader";const K4=({className:t,...s})=>e.jsx("div",{className:bt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s});K4.displayName="AlertDialogFooter";const Y4=N.forwardRef(({className:t,...s},r)=>e.jsx(UU,{ref:r,className:bt("text-lg font-semibold",t),...s}));Y4.displayName=UU.displayName;const G4=N.forwardRef(({className:t,...s},r)=>e.jsx(zU,{ref:r,className:bt("text-sm text-muted-foreground",t),...s}));G4.displayName=zU.displayName;const Q4=N.forwardRef(({className:t,...s},r)=>e.jsx($U,{ref:r,className:bt(K_(),t),...s}));Q4.displayName=$U.displayName;const Z4=N.forwardRef(({className:t,...s},r)=>e.jsx(BU,{ref:r,className:bt(K_({variant:"outline"}),"mt-2 sm:mt-0",t),...s}));Z4.displayName=BU.displayName;function dde(){const{user:t,isAuthenticated:s,isLoading:r}=fo(),{toast:n}=Ht(),[a]=ja(),o=new URLSearchParams(a.split("?")[1]).get("tab")||"profile",[l,c]=N.useState(!1),[d,u]=N.useState(""),[m,f]=N.useState({firstName:"",lastName:"",email:"",bio:"",phone:""}),{data:h}=Xe({queryKey:["/api/user/settings"],enabled:s}),[p,g]=N.useState({emailNotifications:!0,pushNotifications:!0,memorialUpdates:!0,donationReceipts:!0,scheduledMessageReminders:!0}),[y,v]=N.useState({shareActivityWithCreators:!0,publicProfile:!0});N.useEffect(()=>{t&&f({firstName:t.firstName||"",lastName:t.lastName||"",email:t.email||"",bio:t.bio||"",phone:t.phone||""})},[t]),N.useEffect(()=>{if(h&&typeof h=="object"){const F=h;g({emailNotifications:F.emailNotifications??!0,pushNotifications:F.pushNotifications??!0,memorialUpdates:F.memorialUpdates??!0,donationReceipts:F.donationReceipts??!0,scheduledMessageReminders:F.scheduledMessageReminders??!0}),v({shareActivityWithCreators:F.shareActivityWithCreators??!0,publicProfile:F.publicProfile??!0})}},[h]);const j=yt({mutationFn:async F=>await(await pt("PATCH","/api/user/profile",F)).json(),onSuccess:()=>{xt.invalidateQueries({queryKey:["/api/auth/user"]}),n({title:"Profile Updated",description:"Your profile has been updated successfully."})},onError:()=>{n({title:"Update Failed",description:"Failed to update your profile. Please try again.",variant:"destructive"})}}),w=yt({mutationFn:async F=>await(await pt("PATCH","/api/user/settings",F)).json(),onSuccess:()=>{xt.invalidateQueries({queryKey:["/api/user/settings"]}),n({title:"Settings Updated",description:"Your settings have been saved successfully."})},onError:()=>{n({title:"Update Failed",description:"Failed to update your settings. Please try again.",variant:"destructive"})}}),_=F=>{F.preventDefault(),j.mutate({firstName:m.firstName,lastName:m.lastName,bio:m.bio,phone:m.phone})},P=F=>{F.preventDefault(),w.mutate(p)},E=F=>{F.preventDefault(),w.mutate(y)},L=yt({mutationFn:async()=>await(await pt("DELETE","/api/user/account",{})).json(),onSuccess:()=>{n({title:"Account Deleted",description:"Your account has been permanently deleted. You will be logged out."}),setTimeout(()=>{window.location.href="/api/logout"},2e3)},onError:F=>{n({title:"Deletion Failed",description:F.message||"Failed to delete your account. Please try again or contact support.",variant:"destructive"})}}),T=()=>{if(d!=="DELETE"){n({title:"Incorrect Confirmation",description:'Please type "DELETE" to confirm account deletion.',variant:"destructive"});return}L.mutate()};if(r)return e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"h-12 w-12 mx-auto mb-4 rounded-full bg-muted animate-pulse"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading profile..."})]})});if(!s)return e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs($,{className:"w-full max-w-md",children:[e.jsxs(le,{children:[e.jsx(ge,{children:"Login Required"}),e.jsx($e,{children:"Please login to view and manage your profile."})]}),e.jsx(V,{children:e.jsx(O,{onClick:()=>window.location.href="/api/login",className:"w-full",children:"Login to Continue"})})]})});const M=t!=null&&t.firstName&&(t!=null&&t.lastName)?`${t.firstName} ${t.lastName}`:(t==null?void 0:t.firstName)||(t==null?void 0:t.lastName)||"User";return e.jsxs("div",{className:"min-h-screen bg-background py-12 px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-8 text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(_U,{src:t==null?void 0:t.profileImageUrl,name:M,email:(t==null?void 0:t.email)||void 0,size:"lg",className:"h-24 w-24 text-2xl"})}),e.jsx("h1",{className:"text-3xl font-serif font-bold mb-2","data-testid":"text-profile-heading",children:M}),e.jsx("p",{className:"text-muted-foreground","data-testid":"text-profile-email",children:t==null?void 0:t.email})]}),e.jsxs(ba,{defaultValue:o,className:"w-full",children:[e.jsxs(ra,{className:"grid w-full grid-cols-4 mb-8",children:[e.jsxs(qt,{value:"profile",className:"gap-2","data-testid":"tab-profile",children:[e.jsx(eu,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Profile"})]}),e.jsxs(qt,{value:"settings",className:"gap-2","data-testid":"tab-settings",children:[e.jsx(E_,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Settings"})]}),e.jsxs(qt,{value:"notifications",className:"gap-2","data-testid":"tab-notifications",children:[e.jsx(af,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Notifications"})]}),e.jsxs(qt,{value:"privacy",className:"gap-2","data-testid":"tab-privacy",children:[e.jsx(va,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Privacy"})]})]}),e.jsx(Vt,{value:"profile",children:e.jsxs($,{children:[e.jsxs(le,{children:[e.jsx(ge,{children:"Personal Information"}),e.jsx($e,{children:"Update your personal details and profile information"})]}),e.jsx(V,{children:e.jsxs("form",{onSubmit:_,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"firstName",children:"First Name"}),e.jsx(re,{id:"firstName",value:m.firstName,onChange:F=>f({...m,firstName:F.target.value}),placeholder:"Enter your first name","data-testid":"input-first-name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"lastName",children:"Last Name"}),e.jsx(re,{id:"lastName",value:m.lastName,onChange:F=>f({...m,lastName:F.target.value}),placeholder:"Enter your last name","data-testid":"input-last-name"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"email",children:"Email"}),e.jsx(re,{id:"email",type:"email",value:m.email,disabled:!0,className:"bg-muted","data-testid":"input-email"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Email cannot be changed. Contact support if you need to update it."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"phone",children:"Phone Number"}),e.jsx(re,{id:"phone",type:"tel",value:m.phone,onChange:F=>f({...m,phone:F.target.value}),placeholder:"Enter your phone number","data-testid":"input-phone"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"bio",children:"Bio"}),e.jsx(Gt,{id:"bio",value:m.bio,onChange:F=>f({...m,bio:F.target.value}),placeholder:"Tell us a bit about yourself...",rows:4,"data-testid":"input-bio"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(O,{type:"button",variant:"outline",onClick:()=>f({firstName:(t==null?void 0:t.firstName)||"",lastName:(t==null?void 0:t.lastName)||"",email:(t==null?void 0:t.email)||"",bio:"",phone:""}),"data-testid":"button-cancel",children:"Cancel"}),e.jsx(O,{type:"submit",disabled:j.isPending,"data-testid":"button-save-profile",children:j.isPending?"Saving...":"Save Changes"})]})]})})]})}),e.jsx(Vt,{value:"settings",children:e.jsxs($,{children:[e.jsxs(le,{children:[e.jsx(ge,{children:"Account Settings"}),e.jsx($e,{children:"Manage your account preferences and settings"})]}),e.jsxs(V,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Password & Security"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Your account is secured through Replit authentication. Password management is handled automatically."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Account Data"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Download Your Data"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Request a copy of all your data"})]}),e.jsx(O,{variant:"outline","data-testid":"button-download-data",children:"Request Download"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-destructive",children:"Danger Zone"}),e.jsx($,{className:"border-destructive/50 bg-destructive/5",children:e.jsx(V,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx($y,{className:"w-5 h-5 text-destructive mt-0.5","aria-hidden":"true"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-destructive",children:"Delete Account"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Permanently delete your account and all associated data. This action cannot be undone."}),e.jsxs("ul",{className:"text-sm text-muted-foreground mt-2 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"All your saved memorials will be removed"}),e.jsx("li",{children:"Your profile and settings will be deleted"}),e.jsx("li",{children:"Any condolences or memories you created will be anonymized"}),e.jsx("li",{children:"Memorials you created will remain but your account will be disconnected"})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(O,{variant:"destructive",onClick:()=>c(!0),"data-testid":"button-delete-account","aria-label":"Open account deletion dialog",children:[e.jsx($y,{className:"w-4 h-4 mr-2","aria-hidden":"true"}),"Delete My Account"]})})]})})})]})]})]})}),e.jsx(Vt,{value:"notifications",children:e.jsxs($,{children:[e.jsxs(le,{children:[e.jsx(ge,{children:"Notification Preferences"}),e.jsx($e,{children:"Control how and when you receive notifications"})]}),e.jsx(V,{children:e.jsxs("form",{onSubmit:P,className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(De,{htmlFor:"email-notifications",children:"Email Notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive updates via email"})]}),e.jsx(ir,{id:"email-notifications",checked:p.emailNotifications,onCheckedChange:F=>g({...p,emailNotifications:F}),"data-testid":"switch-email-notifications"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(De,{htmlFor:"push-notifications",children:"Push Notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive push notifications on your device"})]}),e.jsx(ir,{id:"push-notifications",checked:p.pushNotifications,onCheckedChange:F=>g({...p,pushNotifications:F}),"data-testid":"switch-push-notifications"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(De,{htmlFor:"memorial-updates",children:"Memorial Updates"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Notifications for memorials you're following"})]}),e.jsx(ir,{id:"memorial-updates",checked:p.memorialUpdates,onCheckedChange:F=>g({...p,memorialUpdates:F}),"data-testid":"switch-memorial-updates"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(De,{htmlFor:"donation-receipts",children:"Donation Receipts"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Email receipts for donations made"})]}),e.jsx(ir,{id:"donation-receipts",checked:p.donationReceipts,onCheckedChange:F=>g({...p,donationReceipts:F}),"data-testid":"switch-donation-receipts"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(De,{htmlFor:"scheduled-messages",children:"Scheduled Message Reminders"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Reminders before milestone messages are sent"})]}),e.jsx(ir,{id:"scheduled-messages",checked:p.scheduledMessageReminders,onCheckedChange:F=>g({...p,scheduledMessageReminders:F}),"data-testid":"switch-scheduled-messages"})]}),e.jsx(O,{type:"submit",disabled:w.isPending,"data-testid":"button-save-notifications",children:w.isPending?"Saving...":"Save Notification Settings"})]})})]})}),e.jsx(Vt,{value:"privacy",children:e.jsxs($,{children:[e.jsxs(le,{children:[e.jsx(ge,{children:"Privacy & Data"}),e.jsx($e,{children:"Control your privacy settings and data sharing preferences"})]}),e.jsxs(V,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Memorials You Created"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"View and manage memorials you've created"}),e.jsx(O,{variant:"outline",asChild:!0,"data-testid":"button-view-memorials",children:e.jsxs("a",{href:"/my-memorials",children:[e.jsx(_t,{className:"w-4 h-4 mr-2"}),"View My Memorials"]})})]}),e.jsxs("form",{onSubmit:E,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Data Sharing"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Share activity with memorial creators"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Allow memorial creators to see your visits and contributions"})]}),e.jsx(ir,{checked:y.shareActivityWithCreators,onCheckedChange:F=>v({...y,shareActivityWithCreators:F}),"data-testid":"switch-share-activity"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Public Profile"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Make profile visible to others"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Show your name and profile picture on public memorials"})]}),e.jsx(ir,{checked:y.publicProfile,onCheckedChange:F=>v({...y,publicProfile:F}),"data-testid":"switch-public-profile"})]})]}),e.jsx(O,{type:"submit",disabled:w.isPending,"data-testid":"button-save-privacy",children:w.isPending?"Saving...":"Save Privacy Settings"})]})]})]})})]})]}),e.jsx(qU,{open:l,onOpenChange:F=>{c(F),F||u("")},children:e.jsxs(H4,{"data-testid":"dialog-delete-account",children:[e.jsxs(W4,{children:[e.jsxs(Y4,{className:"flex items-center gap-2 text-destructive",children:[e.jsx($y,{className:"w-5 h-5","aria-hidden":"true"}),"Permanently Delete Account?"]}),e.jsxs(G4,{className:"space-y-4",children:[e.jsxs("p",{className:"text-base",children:["This action is ",e.jsx("strong",{children:"irreversible"}),". Your account and all associated data will be permanently deleted."]}),e.jsxs("div",{className:"bg-muted p-4 rounded-md space-y-2",children:[e.jsx("p",{className:"font-medium text-foreground",children:"What will be deleted:"}),e.jsxs("ul",{className:"text-sm space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Your user account and profile information"}),e.jsx("li",{children:"All your saved memorials and bookmarks"}),e.jsx("li",{children:"Your notification and privacy settings"}),e.jsx("li",{children:"Your donation history and receipts"})]})]}),e.jsxs("div",{className:"bg-muted p-4 rounded-md space-y-2",children:[e.jsx("p",{className:"font-medium text-foreground",children:"What will also be removed:"}),e.jsxs("ul",{className:"text-sm space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Condolences and memories you've posted"}),e.jsx("li",{children:"Comments you've made on memorials"}),e.jsx("li",{children:"Your likes and reactions on memorials"})]})]}),e.jsxs("div",{className:"bg-accent p-4 rounded-md space-y-2",children:[e.jsx("p",{className:"font-medium text-foreground",children:"Memorials you created:"}),e.jsx("p",{className:"text-sm",children:"Memorials will remain active but will no longer be connected to your account. You won't be able to manage them after deletion."})]}),e.jsxs("div",{className:"pt-4 space-y-2",children:[e.jsxs(De,{htmlFor:"confirm-delete",className:"text-base font-medium",children:["Type ",e.jsx("span",{className:"font-bold text-destructive",children:"DELETE"})," to confirm:"]}),e.jsx(re,{id:"confirm-delete",value:d,onChange:F=>u(F.target.value),placeholder:"Type DELETE here",className:"font-mono","data-testid":"input-confirm-delete","aria-label":"Type DELETE to confirm account deletion"})]})]})]}),e.jsxs(K4,{children:[e.jsx(Z4,{onClick:()=>{u(""),c(!1)},"data-testid":"button-cancel-delete",children:"Cancel"}),e.jsx(Q4,{onClick:T,disabled:d!=="DELETE"||L.isPending,className:"bg-destructive hover:bg-destructive/90","data-testid":"button-confirm-delete","aria-label":"Confirm account deletion",children:L.isPending?"Deleting...":"Delete Account Permanently"})]})]})})]})}function ude(){const{user:t,isAuthenticated:s,isLoading:r}=fo(),{data:n=[],isLoading:a}=Xe({queryKey:["/api/user/memorials"],enabled:s});return r||a?e.jsx("div",{className:"min-h-screen bg-background py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(tt,{className:"h-9 w-64 mb-2"}),e.jsx(tt,{className:"h-4 w-48"})]}),e.jsx(tt,{className:"h-10 w-40 rounded"})]}),e.jsxs("div",{className:"space-y-8","data-testid":"loading-skeletons",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 text-muted-foreground",children:[e.jsx(tn,{className:"w-5 h-5 animate-spin"}),e.jsx("p",{children:"Loading your memorials..."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(i=>e.jsxs($,{children:[e.jsxs(le,{children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx(tt,{className:"h-6 w-2/3"}),e.jsx(tt,{className:"h-5 w-16 rounded-full"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(tt,{className:"h-4 w-4"}),e.jsx(tt,{className:"h-4 w-32"})]})]}),e.jsxs(V,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(tt,{className:"h-4 w-16"}),e.jsx(tt,{className:"h-5 w-8"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(tt,{className:"h-4 w-20"}),e.jsx(tt,{className:"h-5 w-8"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(tt,{className:"h-9 flex-1 rounded"}),e.jsx(tt,{className:"h-9 flex-1 rounded"})]})]})]},i))})]})]})}):s?e.jsx("div",{className:"min-h-screen bg-background py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-serif font-bold mb-2","data-testid":"text-my-memorials-heading",children:"My Memorials"}),e.jsx("p",{className:"text-muted-foreground",children:"Memorials you've created and manage"})]}),e.jsx(He,{href:"/create-memorial",children:e.jsxs(O,{"data-testid":"button-create-memorial",children:[e.jsx(bs,{className:"w-4 h-4 mr-2"}),"Create Memorial"]})})]}),n.length===0?e.jsx($,{children:e.jsxs(V,{className:"py-16 text-center",children:[e.jsx(_t,{className:"w-16 h-16 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No Memorials Yet"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"You haven't created any memorials yet. Start by creating your first memorial."}),e.jsx(He,{href:"/create-memorial",children:e.jsxs(O,{"data-testid":"button-create-first-memorial",children:[e.jsx(bs,{className:"w-4 h-4 mr-2"}),"Create Your First Memorial"]})})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(i=>e.jsxs($,{className:"hover-elevate","data-testid":`card-memorial-${i.id}`,children:[e.jsxs(le,{children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx(ge,{className:"text-xl",children:i.name}),i.isPublic?e.jsx(ze,{variant:"secondary",children:"Public"}):e.jsx(ze,{variant:"outline",children:"Private"})]}),e.jsx($e,{children:e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(ds,{className:"w-4 h-4"}),i.birthDate,"  ",i.deathDate]})})]}),e.jsxs(V,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Memories"}),e.jsx("p",{className:"font-medium",children:i.memoryCount||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Condolences"}),e.jsx("p",{className:"font-medium",children:i.condolenceCount||0})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(O,{variant:"outline",className:"flex-1",asChild:!0,children:e.jsxs("a",{href:`/memorial/${i.id}`,target:"_blank",rel:"noopener noreferrer","data-testid":`button-view-${i.id}`,children:[e.jsx(pa,{className:"w-4 h-4 mr-2"}),"View"]})}),e.jsx(He,{href:`/memorials/${i.id}/manage`,children:e.jsxs(O,{variant:"default",className:"flex-1","data-testid":`button-manage-${i.id}`,children:[e.jsx(Ms,{className:"w-4 h-4 mr-2"}),"Manage"]})})]})]})]},i.id))})]})}):e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs($,{className:"w-full max-w-md",children:[e.jsxs(le,{children:[e.jsx(ge,{children:"Login Required"}),e.jsx($e,{children:"Please login to view your memorials."})]}),e.jsx(V,{children:e.jsx(O,{onClick:()=>window.location.href="/api/login",className:"w-full",children:"Login to Continue"})})]})})}const mde=Ag("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),X4=N.forwardRef(({className:t,variant:s,...r},n)=>e.jsx("div",{ref:n,role:"alert",className:bt(mde({variant:s}),t),...r}));X4.displayName="Alert";const HU=N.forwardRef(({className:t,...s},r)=>e.jsx("h5",{ref:r,className:bt("mb-1 font-medium leading-none tracking-tight",t),...s}));HU.displayName="AlertTitle";const J4=N.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:bt("text-sm [&_p]:leading-relaxed",t),...s}));J4.displayName="AlertDescription";function hde(){const[t,s]=N.useState(!1),{data:r,isLoading:n}=Xe({queryKey:["/api/admin/stats"]}),{data:a=[]}=Xe({queryKey:["/api/admin/recent-users"]});return n?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading dashboard..."})]})}):r?e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(va,{className:"w-8 h-8 text-primary"}),e.jsx("h1",{className:"text-3xl font-serif font-bold text-foreground","data-testid":"text-admin-title",children:"Admin Dashboard"})]}),e.jsx("p",{className:"text-muted-foreground","data-testid":"text-admin-subtitle",children:"Platform analytics and insights"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(He,{href:"/admin/screenshots",children:e.jsxs(O,{variant:"outline","data-testid":"button-screenshots",children:[e.jsx(vi,{className:"w-4 h-4 mr-2"}),"Play Store Screenshots"]})}),e.jsx(ro,{variant:"classic",showTagline:!1})]})]}),a.length>0&&!t&&e.jsx(X4,{className:"border-2 border-primary/50 bg-gradient-to-br from-primary/10 via-primary/5 to-background","data-testid":"alert-new-users",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"bg-primary/20 p-2 rounded-full flex-shrink-0",children:e.jsx(af,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs(HU,{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(V1,{className:"w-5 h-5 text-primary"}),"New User",a.length>1?"s":""," Registered!"]}),e.jsxs(J4,{className:"mt-2",children:[e.jsxs("p",{className:"text-muted-foreground mb-3",children:[a.length," new user",a.length>1?"s have":" has"," joined Opictuary in the last 7 days:"]}),e.jsx("div",{className:"space-y-2",children:a.map(i=>e.jsx($,{className:"bg-card/50","data-testid":`card-new-user-${i.id}`,children:e.jsx(V,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-foreground","data-testid":`text-user-name-${i.id}`,children:i.firstName&&i.lastName?`${i.firstName} ${i.lastName}`:i.email}),e.jsx("p",{className:"text-sm text-muted-foreground","data-testid":`text-user-email-${i.id}`,children:i.email})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-medium text-primary","data-testid":`text-user-date-${i.id}`,children:new Date(i.createdAt||"").toLocaleDateString()}),e.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(i.createdAt||"").toLocaleTimeString()})]})]})})},i.id))})]})]}),e.jsx(O,{variant:"ghost",size:"icon",onClick:()=>s(!0),className:"flex-shrink-0","data-testid":"button-dismiss-notification",children:e.jsx(Vo,{className:"w-4 h-4"})})]})}),e.jsxs(ba,{defaultValue:"overview",className:"space-y-6",children:[e.jsxs(ra,{className:"grid w-full max-w-md grid-cols-3","data-testid":"tabs-admin",children:[e.jsx(qt,{value:"overview","data-testid":"tab-overview",children:"Overview"}),e.jsx(qt,{value:"engagement","data-testid":"tab-engagement",children:"Engagement"}),e.jsx(qt,{value:"revenue","data-testid":"tab-revenue",children:"Revenue"})]}),e.jsxs(Vt,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs($,{"data-testid":"card-total-users",children:[e.jsxs(le,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Total Users"}),e.jsx(Ms,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(V,{children:[e.jsx("div",{className:"text-2xl font-bold tabular-nums","data-testid":"text-total-users",children:r.users.total.toLocaleString()}),e.jsxs("p",{className:"text-xs text-muted-foreground","data-testid":"text-new-users-week",children:["+",r.users.newThisWeek.toLocaleString()," this week"]})]})]}),e.jsxs($,{"data-testid":"card-total-memorials",children:[e.jsxs(le,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Total Memorials"}),e.jsx(_t,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(V,{children:[e.jsx("div",{className:"text-2xl font-bold tabular-nums","data-testid":"text-total-memorials",children:r.memorials.total.toLocaleString()}),e.jsxs("p",{className:"text-xs text-muted-foreground","data-testid":"text-public-memorials",children:[r.memorials.public.toLocaleString()," public, ",r.memorials.private.toLocaleString()," private"]})]})]}),e.jsxs($,{"data-testid":"card-total-raised",children:[e.jsxs(le,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Total Raised"}),e.jsx(Ga,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(V,{children:[e.jsxs("div",{className:"text-2xl font-bold tabular-nums","data-testid":"text-total-raised",children:["$",parseFloat(r.fundraisers.totalRaised.toString()).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsxs("p",{className:"text-xs text-muted-foreground","data-testid":"text-active-fundraisers",children:[r.fundraisers.active.toLocaleString()," active fundraisers"]})]})]}),e.jsxs($,{"data-testid":"card-page-views",children:[e.jsxs(le,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Page Views"}),e.jsx(Ei,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(V,{children:[e.jsx("div",{className:"text-2xl font-bold tabular-nums","data-testid":"text-total-views",children:r.pageViews.total.toLocaleString()}),e.jsxs("p",{className:"text-xs text-muted-foreground","data-testid":"text-views-today",children:[r.pageViews.today.toLocaleString()," today"]})]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs($,{"data-testid":"card-user-growth",children:[e.jsxs(le,{children:[e.jsx(ge,{children:"User Growth"}),e.jsx($e,{children:"New user registrations over time"})]}),e.jsxs(V,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Today"}),e.jsx("span",{className:"text-lg font-semibold tabular-nums","data-testid":"text-users-today",children:r.users.newToday.toLocaleString()})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"This Week"}),e.jsx("span",{className:"text-lg font-semibold tabular-nums","data-testid":"text-users-week",children:r.users.newThisWeek.toLocaleString()})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"This Month"}),e.jsx("span",{className:"text-lg font-semibold tabular-nums","data-testid":"text-users-month",children:r.users.newThisMonth.toLocaleString()})]})]})]}),e.jsxs($,{"data-testid":"card-top-pages",children:[e.jsxs(le,{children:[e.jsx(ge,{children:"Top Pages"}),e.jsx($e,{children:"Most visited pages this week"})]}),e.jsx(V,{className:"space-y-4",children:r.topPages.length===0?e.jsx("p",{className:"text-sm text-muted-foreground",children:"No page view data yet"}):r.topPages.map((i,o)=>e.jsxs("div",{className:"flex items-center justify-between gap-2","data-testid":`item-page-${o}`,children:[e.jsx("span",{className:"text-sm text-muted-foreground truncate flex-1",children:i.path}),e.jsx("span",{className:"text-lg font-semibold tabular-nums flex-shrink-0",children:i.views.toLocaleString()})]},o))})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(YI,{className:"w-5 h-5 text-primary"}),e.jsx("h2",{className:"text-xl font-semibold",children:"Support System"})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs($,{"data-testid":"card-support-articles",children:[e.jsxs(le,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Help Articles"}),e.jsx(uo,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(V,{children:[e.jsx("div",{className:"text-2xl font-bold tabular-nums","data-testid":"text-total-articles",children:r.support.totalArticles.toLocaleString()}),e.jsxs("p",{className:"text-xs text-muted-foreground","data-testid":"text-article-views",children:[r.support.totalArticleViews.toLocaleString()," total views"]})]})]}),e.jsxs($,{"data-testid":"card-grief-resources",children:[e.jsxs(le,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Grief Resources"}),e.jsx(EG,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(V,{children:[e.jsx("div",{className:"text-2xl font-bold tabular-nums","data-testid":"text-total-resources",children:r.support.totalResources.toLocaleString()}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Available resources"})]})]}),e.jsxs($,{"data-testid":"card-support-requests",children:[e.jsxs(le,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Support Tickets"}),e.jsx(Nn,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(V,{children:[e.jsx("div",{className:"text-2xl font-bold tabular-nums","data-testid":"text-total-requests",children:r.support.totalRequests.toLocaleString()}),e.jsxs("p",{className:"text-xs text-muted-foreground","data-testid":"text-pending-requests",children:[r.support.pendingRequests.toLocaleString()," pending"]})]})]}),e.jsxs($,{"data-testid":"card-requests-week",children:[e.jsxs(le,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Recent Tickets"}),e.jsx(Mo,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(V,{children:[e.jsx("div",{className:"text-2xl font-bold tabular-nums","data-testid":"text-requests-week",children:r.support.requestsThisWeek.toLocaleString()}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Submitted this week"})]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs($,{"data-testid":"card-ticket-status",children:[e.jsxs(le,{children:[e.jsx(ge,{children:"Ticket Status"}),e.jsx($e,{children:"Support request breakdown"})]}),e.jsxs(V,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Pending"}),e.jsx("span",{className:"text-lg font-semibold tabular-nums text-orange-500","data-testid":"text-pending-count",children:r.support.pendingRequests.toLocaleString()})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Resolved"}),e.jsx("span",{className:"text-lg font-semibold tabular-nums text-green-500","data-testid":"text-resolved-count",children:r.support.resolvedRequests.toLocaleString()})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Resolution Rate"}),e.jsxs("span",{className:"text-lg font-semibold tabular-nums","data-testid":"text-resolution-rate",children:[r.support.totalRequests>0?(r.support.resolvedRequests/r.support.totalRequests*100).toFixed(1):0,"%"]})]}),e.jsxs("div",{className:"border-t border-border pt-4 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(vl,{className:"w-4 h-4 text-primary"}),e.jsx("span",{className:"text-sm font-medium text-foreground",children:"Partner Requests"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Total Partner Tickets"}),e.jsx("span",{className:"text-lg font-semibold tabular-nums","data-testid":"text-partner-requests",children:r.support.partnerRequests.toLocaleString()})]}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Partner Pending"}),e.jsx("span",{className:"text-lg font-semibold tabular-nums text-orange-500","data-testid":"text-partner-pending",children:r.support.partnerPendingRequests.toLocaleString()})]})]})]})]}),e.jsxs($,{"data-testid":"card-support-actions",children:[e.jsxs(le,{children:[e.jsx(ge,{children:"Quick Actions"}),e.jsx($e,{children:"Manage support resources"})]}),e.jsx(V,{className:"space-y-2",children:e.jsx(He,{href:"/support",children:e.jsxs(O,{variant:"outline",className:"w-full justify-start","data-testid":"button-view-support-hub",children:[e.jsx(uo,{className:"w-4 h-4 mr-2"}),"View Support Hub"]})})})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(vl,{className:"w-5 h-5 text-primary"}),e.jsx("h2",{className:"text-xl font-semibold",children:"Business Partners"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-md font-medium mb-3 text-foreground",children:"Funeral Home Partners"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs($,{"data-testid":"card-funeral-homes-total",children:[e.jsxs(le,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Total Partners"}),e.jsx(vl,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(V,{children:[e.jsx("div",{className:"text-2xl font-bold tabular-nums","data-testid":"text-funeral-homes-total",children:r.partners.funeralHomes.total.toLocaleString()}),e.jsxs("p",{className:"text-xs text-muted-foreground","data-testid":"text-funeral-homes-active",children:[r.partners.funeralHomes.active.toLocaleString()," active"]})]})]}),e.jsxs($,{"data-testid":"card-funeral-homes-new",children:[e.jsxs(le,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"New Partners"}),e.jsx(Mo,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(V,{children:[e.jsx("div",{className:"text-2xl font-bold tabular-nums","data-testid":"text-funeral-homes-week",children:r.partners.funeralHomes.newThisWeek.toLocaleString()}),e.jsxs("p",{className:"text-xs text-muted-foreground","data-testid":"text-funeral-homes-month",children:[r.partners.funeralHomes.newThisMonth.toLocaleString()," this month"]})]})]}),e.jsxs($,{"data-testid":"card-funeral-referrals",children:[e.jsxs(le,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Total Referrals"}),e.jsx(Ms,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(V,{children:[e.jsx("div",{className:"text-2xl font-bold tabular-nums","data-testid":"text-total-referrals",children:r.partners.funeralHomes.totalReferrals.toLocaleString()}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Memorials created"})]})]}),e.jsxs($,{"data-testid":"card-funeral-commissions",children:[e.jsxs(le,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Commissions"}),e.jsx(Ga,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(V,{children:[e.jsxs("div",{className:"text-2xl font-bold tabular-nums","data-testid":"text-funeral-commissions",children:["$",parseFloat(r.partners.funeralHomes.totalCommissions.toString()).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsxs("p",{className:"text-xs text-muted-foreground","data-testid":"text-funeral-pending-payouts",children:["$",parseFloat(r.partners.funeralHomes.pendingPayouts.toString()).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})," pending"]})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-md font-medium mb-3 text-foreground",children:"Flower Shop Partners"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs($,{"data-testid":"card-flower-shops-total",children:[e.jsxs(le,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Total Partners"}),e.jsx(vl,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(V,{children:[e.jsx("div",{className:"text-2xl font-bold tabular-nums","data-testid":"text-flower-shops-total",children:r.partners.flowerShops.total.toLocaleString()}),e.jsxs("p",{className:"text-xs text-muted-foreground","data-testid":"text-flower-shops-active",children:[r.partners.flowerShops.active.toLocaleString()," active"]})]})]}),e.jsxs($,{"data-testid":"card-flower-shops-new",children:[e.jsxs(le,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"New Partners"}),e.jsx(Mo,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(V,{children:[e.jsx("div",{className:"text-2xl font-bold tabular-nums","data-testid":"text-flower-shops-week",children:r.partners.flowerShops.newThisWeek.toLocaleString()}),e.jsxs("p",{className:"text-xs text-muted-foreground","data-testid":"text-flower-shops-month",children:[r.partners.flowerShops.newThisMonth.toLocaleString()," this month"]})]})]}),e.jsxs($,{"data-testid":"card-flower-orders",children:[e.jsxs(le,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Total Orders"}),e.jsx(_t,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(V,{children:[e.jsx("div",{className:"text-2xl font-bold tabular-nums","data-testid":"text-total-flower-orders",children:r.partners.flowerShops.totalOrders.toLocaleString()}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Flower deliveries"})]})]}),e.jsxs($,{"data-testid":"card-flower-commissions",children:[e.jsxs(le,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Commissions (20%)"}),e.jsx(Ga,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(V,{children:[e.jsxs("div",{className:"text-2xl font-bold tabular-nums","data-testid":"text-flower-commissions",children:["$",parseFloat(r.partners.flowerShops.totalCommissions.toString()).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsxs("p",{className:"text-xs text-muted-foreground","data-testid":"text-flower-pending-payouts",children:["$",parseFloat(r.partners.flowerShops.pendingPayouts.toString()).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})," pending"]})]})]})]})]})]})]}),e.jsxs(Vt,{value:"engagement",className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs($,{"data-testid":"card-memorial-views",children:[e.jsxs(le,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Memorial Views"}),e.jsx(Ei,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(V,{children:[e.jsx("div",{className:"text-2xl font-bold tabular-nums","data-testid":"text-total-views",children:r.analytics.totalViews.toLocaleString()}),e.jsxs("p",{className:"text-xs text-muted-foreground","data-testid":"text-views-week",children:[r.analytics.viewsThisWeek.toLocaleString()," this week"]})]})]}),e.jsxs($,{"data-testid":"card-memorial-shares",children:[e.jsxs(le,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Memorial Shares"}),e.jsx(so,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(V,{children:[e.jsx("div",{className:"text-2xl font-bold tabular-nums","data-testid":"text-total-shares",children:r.analytics.totalShares.toLocaleString()}),e.jsxs("p",{className:"text-xs text-muted-foreground","data-testid":"text-shares-week",children:[r.analytics.sharesThisWeek.toLocaleString()," this week"]})]})]}),e.jsxs($,{"data-testid":"card-memorial-saves",children:[e.jsxs(le,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Memorial Saves"}),e.jsx(fh,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(V,{children:[e.jsx("div",{className:"text-2xl font-bold tabular-nums","data-testid":"text-total-saves",children:r.analytics.totalSaves.toLocaleString()}),e.jsxs("p",{className:"text-xs text-muted-foreground","data-testid":"text-saves-week",children:[r.analytics.savesThisWeek.toLocaleString()," this week"]})]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs($,{"data-testid":"card-memories",children:[e.jsxs(le,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Memories Shared"}),e.jsx(Nn,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(V,{children:[e.jsx("div",{className:"text-2xl font-bold tabular-nums","data-testid":"text-total-memories",children:r.memories.total.toLocaleString()}),e.jsxs("p",{className:"text-xs text-muted-foreground","data-testid":"text-memories-status",children:[r.memories.approved.toLocaleString()," approved, ",r.memories.pending.toLocaleString()," pending"]})]})]}),e.jsxs($,{"data-testid":"card-memorial-activity",children:[e.jsxs(le,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Memorial Activity"}),e.jsx(Mo,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(V,{children:[e.jsx("div",{className:"text-2xl font-bold tabular-nums","data-testid":"text-memorials-week",children:r.memorials.createdThisWeek.toLocaleString()}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"New memorials this week"})]})]}),e.jsxs($,{"data-testid":"card-recent-engagement",children:[e.jsxs(le,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Recent Engagement"}),e.jsx(ds,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(V,{children:[e.jsx("div",{className:"text-2xl font-bold tabular-nums","data-testid":"text-engagement-week",children:r.memories.createdThisWeek.toLocaleString()}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Memories added this week"})]})]})]}),e.jsxs($,{"data-testid":"card-top-memorials",children:[e.jsxs(le,{children:[e.jsx(ge,{children:"Top Memorials"}),e.jsx($e,{children:"Most engaged memorials this week"})]}),e.jsx(V,{children:r.topMemorials.length===0?e.jsx("p",{className:"text-sm text-muted-foreground",children:"No memorial engagement data yet"}):e.jsx("div",{className:"space-y-4",children:r.topMemorials.map((i,o)=>e.jsxs("div",{className:"flex items-center justify-between gap-4","data-testid":`item-memorial-${o}`,children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("p",{className:"text-sm font-medium truncate","data-testid":`text-memorial-id-${o}`,children:["Memorial ",i.memorialId.slice(0,8),"..."]})}),e.jsxs("div",{className:"flex items-center gap-4 flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-1",title:"Views",children:[e.jsx(Ei,{className:"h-3 w-3 text-muted-foreground"}),e.jsx("span",{className:"text-sm tabular-nums","data-testid":`text-memorial-views-${o}`,children:i.views.toLocaleString()})]}),e.jsxs("div",{className:"flex items-center gap-1",title:"Shares",children:[e.jsx(so,{className:"h-3 w-3 text-muted-foreground"}),e.jsx("span",{className:"text-sm tabular-nums","data-testid":`text-memorial-shares-${o}`,children:i.shares.toLocaleString()})]}),e.jsxs("div",{className:"flex items-center gap-1",title:"Saves",children:[e.jsx(fh,{className:"h-3 w-3 text-muted-foreground"}),e.jsx("span",{className:"text-sm tabular-nums","data-testid":`text-memorial-saves-${o}`,children:i.saves.toLocaleString()})]})]})]},i.memorialId))})})]})]}),e.jsxs(Vt,{value:"revenue",className:"space-y-6",children:[e.jsxs($,{className:"bg-gradient-to-br from-primary/10 to-primary/5","data-testid":"card-platform-revenue-highlight",children:[e.jsxs(le,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(ge,{className:"text-lg font-medium",children:"Platform Revenue"}),e.jsx($e,{children:"Total fees from fundraiser donations (3% default)"})]}),e.jsx(Ga,{className:"h-8 w-8 text-primary"})]}),e.jsxs(V,{children:[e.jsxs("div",{className:"text-4xl font-bold tabular-nums text-primary","data-testid":"text-platform-revenue",children:["$",parseFloat(r.platformRevenue.total.toString()).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["From ",r.donations.total.toLocaleString()," donations totaling $",parseFloat(r.donations.totalAmount.toString()).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs($,{"data-testid":"card-total-donations",children:[e.jsxs(le,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Total Donations"}),e.jsx(Ga,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(V,{children:[e.jsx("div",{className:"text-2xl font-bold tabular-nums","data-testid":"text-donations-count",children:r.donations.total.toLocaleString()}),e.jsxs("p",{className:"text-xs text-muted-foreground","data-testid":"text-donations-week",children:[r.donations.thisWeek.toLocaleString()," this week"]})]})]}),e.jsxs($,{"data-testid":"card-total-amount",children:[e.jsxs(le,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Total Amount"}),e.jsx(Ga,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(V,{children:[e.jsxs("div",{className:"text-2xl font-bold tabular-nums","data-testid":"text-donations-amount",children:["$",parseFloat(r.donations.totalAmount.toString()).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"All-time donations"})]})]}),e.jsxs($,{"data-testid":"card-average-donation",children:[e.jsxs(le,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Average Donation"}),e.jsx(Mo,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(V,{children:[e.jsxs("div",{className:"text-2xl font-bold tabular-nums","data-testid":"text-average-donation",children:["$",parseFloat(r.donations.averageDonation.toString()).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Per donation"})]})]}),e.jsxs($,{"data-testid":"card-average-goal",children:[e.jsxs(le,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Average Goal"}),e.jsx(Mo,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(V,{children:[e.jsxs("div",{className:"text-2xl font-bold tabular-nums","data-testid":"text-average-goal",children:["$",parseFloat(r.fundraisers.averageGoal.toString()).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Per fundraiser"})]})]})]})]})]})]})}):e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsx($,{className:"max-w-md",children:e.jsxs(le,{children:[e.jsx(ge,{children:"Access Denied"}),e.jsx($e,{children:"You don't have permission to view this page."})]})})})}function fde(){const{toast:t}=Ht(),[s,r]=N.useState(!1),n=yt({mutationFn:async()=>await(await pt("POST","/api/admin/generate-screenshots")).json(),onSuccess:()=>{t({title:"Success!",description:"8 Google Play Store screenshots generated and compiled into PDF"}),r(!1)},onError:o=>{t({title:"Error",description:o.message||"Failed to generate screenshots",variant:"destructive"}),r(!1)}}),a=()=>{r(!0),n.mutate()},i=()=>{window.open("/api/admin/download-screenshots","_blank"),t({title:"Download Started",description:"Your Play Store screenshots PDF is downloading"})};return e.jsxs("div",{className:"container mx-auto p-6 max-w-4xl",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Google Play Store Screenshots"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Generate and download 8 professional screenshots for your Play Store listing"})]}),e.jsxs("div",{className:"grid gap-6",children:[e.jsxs($,{className:"bg-card border-border",children:[e.jsxs(le,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(vi,{className:"w-5 h-5"}),"Screenshot Generator"]}),e.jsx($e,{children:"Automatically captures 8 key pages of Opictuary at 1080 x 1920 resolution"})]}),e.jsxs(V,{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-2 text-sm",children:[e.jsx("p",{className:"font-medium",children:"Screenshots will include:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-muted-foreground ml-4",children:[e.jsx("li",{children:"Home - Opictuary Memorial Platform"}),e.jsx("li",{children:"Browse Memorials"}),e.jsx("li",{children:"Celebrity Memorials"}),e.jsx("li",{children:"Grief Support Resources"}),e.jsx("li",{children:"Memorial Fundraisers"}),e.jsx("li",{children:"Create Memorial"}),e.jsx("li",{children:"User Profile"}),e.jsx("li",{children:"Essential Workers Memorial"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(O,{"data-testid":"button-generate-screenshots",onClick:a,disabled:s,size:"lg",className:"flex-1",children:s?e.jsxs(e.Fragment,{children:[e.jsx(tn,{className:"mr-2 h-4 w-4 animate-spin"}),"Generating... (30-60 seconds)"]}):e.jsxs(e.Fragment,{children:[e.jsx(vi,{className:"mr-2 h-4 w-4"}),"Generate Screenshots"]})}),e.jsxs(O,{"data-testid":"button-download-screenshots",onClick:i,variant:"outline",size:"lg",disabled:s,children:[e.jsx(Al,{className:"mr-2 h-4 w-4"}),"Download PDF"]})]}),s&&e.jsx("div",{className:"bg-purple-500/10 border border-purple-500/20 rounded-md p-4",children:e.jsxs("p",{className:"text-sm text-foreground",children:[e.jsx("strong",{children:"Please wait..."})," Capturing screenshots from your live site using professional screenshot API. This takes 30-60 seconds to complete."]})})]})]}),e.jsxs($,{className:"bg-card border-border",children:[e.jsxs(le,{children:[e.jsx(ge,{children:"What happens next?"}),e.jsx($e,{children:"After downloading the PDF"})]}),e.jsxs(V,{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsx("p",{className:"font-medium",children:"1. Review the screenshots"}),e.jsx("p",{className:"text-muted-foreground ml-4",children:"Open the PDF and verify all 8 screenshots look professional and showcase your app's features"})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsx("p",{className:"font-medium",children:"2. Upload to Google Play Console"}),e.jsx("p",{className:"text-muted-foreground ml-4",children:"In your Play Console, navigate to: Store presence  Main store listing  Graphics  Phone screenshots"})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsx("p",{className:"font-medium",children:"3. Add captions (optional)"}),e.jsx("p",{className:"text-muted-foreground ml-4",children:"Google recommends adding short captions to highlight key features"})]})]})]}),e.jsxs($,{className:"bg-card border-border",children:[e.jsx(le,{children:e.jsx(ge,{children:"Google Play Requirements"})}),e.jsx(V,{children:e.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Minimum:"})," 2 screenshots required"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Recommended:"})," 8 screenshots (what we're generating)"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Dimensions:"})," 1080 x 1920 pixels (portrait)"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Format:"})," PNG (high quality)"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Compiled:"})," Single PDF for easy sharing"]})]})})]})]})]})}const WU=N.forwardRef(({className:t,...s},r)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:r,className:bt("w-full caption-bottom text-sm",t),...s})}));WU.displayName="Table";const KU=N.forwardRef(({className:t,...s},r)=>e.jsx("thead",{ref:r,className:bt("[&_tr]:border-b",t),...s}));KU.displayName="TableHeader";const YU=N.forwardRef(({className:t,...s},r)=>e.jsx("tbody",{ref:r,className:bt("[&_tr:last-child]:border-0",t),...s}));YU.displayName="TableBody";const pde=N.forwardRef(({className:t,...s},r)=>e.jsx("tfoot",{ref:r,className:bt("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...s}));pde.displayName="TableFooter";const Uw=N.forwardRef(({className:t,...s},r)=>e.jsx("tr",{ref:r,className:bt("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...s}));Uw.displayName="TableRow";const ed=N.forwardRef(({className:t,...s},r)=>e.jsx("th",{ref:r,className:bt("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...s}));ed.displayName="TableHead";const td=N.forwardRef(({className:t,...s},r)=>e.jsx("td",{ref:r,className:bt("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...s}));td.displayName="TableCell";const xde=N.forwardRef(({className:t,...s},r)=>e.jsx("caption",{ref:r,className:bt("mt-4 text-sm text-muted-foreground",t),...s}));xde.displayName="TableCaption";const D6={pending:{label:"Pending",variant:"secondary"},processing:{label:"Processing",variant:"default"},in_production:{label:"In Production",variant:"default"},shipped:{label:"Shipped",variant:"default"},delivered:{label:"Delivered",variant:"outline"},cancelled:{label:"Cancelled",variant:"destructive"}},gde=["UPS","FedEx","USPS","DHL","Other"];function vde(){const{user:t,isLoading:s}=fo(),[,r]=ja(),{toast:n}=Ht(),[a,i]=N.useState("all"),[o,l]=N.useState(""),[c,d]=N.useState("all"),[u,m]=N.useState(!1),[f,h]=N.useState(!1),[p,g]=N.useState(null),[y,v]=N.useState(""),[j,w]=N.useState(""),[_,P]=N.useState(""),[E,L]=N.useState(""),[T,M]=N.useState(""),{data:F=[],isLoading:k,refetch:D}=Xe({queryKey:["/api/admin/product-orders"],enabled:!s&&(t==null?void 0:t.isAdmin)===!0}),z=yt({mutationFn:async({orderId:Q,status:ke})=>await pt("PATCH",`/api/product-orders/${Q}/status`,{status:ke}),onSuccess:()=>{n({title:"Status Updated",description:"Order status has been updated successfully."}),xt.invalidateQueries({queryKey:["/api/admin/product-orders"]}),m(!1),g(null),v(""),w("")},onError:Q=>{n({title:"Update Failed",description:Q.message||"Failed to update order status.",variant:"destructive"})}}),W=yt({mutationFn:async Q=>await pt("PATCH",`/api/product-orders/${Q.orderId}/tracking`,{trackingNumber:Q.trackingNumber,carrier:Q.carrier,estimatedDelivery:Q.estimatedDelivery}),onSuccess:()=>{n({title:"Tracking Added",description:"Tracking information has been added successfully."}),xt.invalidateQueries({queryKey:["/api/admin/product-orders"]}),h(!1),g(null),P(""),L(""),M("")},onError:Q=>{n({title:"Update Failed",description:Q.message||"Failed to add tracking information.",variant:"destructive"})}});if(s)return e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(tt,{className:"h-8 w-48 mx-auto mb-4"}),e.jsx(tt,{className:"h-4 w-32 mx-auto"})]})});if(!(t!=null&&t.isAdmin))return e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:e.jsxs($,{className:"w-full max-w-md",children:[e.jsxs(le,{children:[e.jsx(ge,{children:"Access Denied"}),e.jsx($e,{children:"You don't have permission to access this page. Only administrators can manage product orders."})]}),e.jsx(V,{children:e.jsx(O,{onClick:()=>r("/"),className:"w-full",children:"Go to Home"})})]})});const ue=F.filter(Q=>{var ke,G;if(a!=="all"&&Q.status!==a)return!1;if(o){const I=o.toLowerCase(),Z=Q.orderNumber.toLowerCase().includes(I),J=(G=(ke=Q.shippingAddress)==null?void 0:ke.fullName)==null?void 0:G.toLowerCase().includes(I);if(!Z&&!J)return!1}if(c!=="all"&&Q.createdAt){const I=new Date(Q.createdAt),J=Math.floor((new Date().getTime()-I.getTime())/(1e3*60*60*24));if(c==="7days"&&J>7||c==="30days"&&J>30)return!1}return!0}),ae={total:F.length,pending:F.filter(Q=>Q.status==="pending").length,in_production:F.filter(Q=>Q.status==="in_production").length,shipped:F.filter(Q=>Q.status==="shipped").length},Ne=()=>{!p||!y||z.mutate({orderId:p.id,status:y})},K=()=>{if(!p||!_||!E){n({title:"Missing Information",description:"Please fill in all required fields.",variant:"destructive"});return}W.mutate({orderId:p.id,trackingNumber:_,carrier:E,estimatedDelivery:T||void 0})};return e.jsxs("div",{className:"min-h-screen bg-background py-12 px-4","data-testid":"admin-orders-page",children:[e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-serif font-bold mb-2",children:"Product Orders Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage and track all physical memorial product orders"})]}),e.jsxs(O,{variant:"outline",size:"sm",onClick:()=>D(),disabled:k,"data-testid":"button-refresh-orders",children:[e.jsx(A_,{className:`w-4 h-4 mr-2 ${k?"animate-spin":""}`}),"Refresh"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[e.jsxs($,{children:[e.jsxs(le,{className:"flex flex-row items-center justify-between gap-1 space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Total Orders"}),e.jsx(_i,{className:"w-4 h-4 text-muted-foreground"})]}),e.jsx(V,{children:e.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-total-orders",children:ae.total})})]}),e.jsxs($,{children:[e.jsxs(le,{className:"flex flex-row items-center justify-between gap-1 space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Pending"}),e.jsx(Mr,{className:"w-4 h-4 text-muted-foreground"})]}),e.jsx(V,{children:e.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-pending-orders",children:ae.pending})})]}),e.jsxs($,{children:[e.jsxs(le,{className:"flex flex-row items-center justify-between gap-1 space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"In Production"}),e.jsx(jG,{className:"w-4 h-4 text-muted-foreground"})]}),e.jsx(V,{children:e.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-in-production-orders",children:ae.in_production})})]}),e.jsxs($,{children:[e.jsxs(le,{className:"flex flex-row items-center justify-between gap-1 space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Shipped"}),e.jsx(M_,{className:"w-4 h-4 text-muted-foreground"})]}),e.jsx(V,{children:e.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-shipped-orders",children:ae.shipped})})]})]}),e.jsxs($,{className:"mb-6",children:[e.jsx(le,{children:e.jsx(ge,{className:"text-lg",children:"Filters"})}),e.jsx(V,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"search",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(Cc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(re,{id:"search",placeholder:"Order number or email...",value:o,onChange:Q=>l(Q.target.value),className:"pl-9","data-testid":"input-search-orders"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"status-filter",children:"Status"}),e.jsxs(Rt,{value:a,onValueChange:i,children:[e.jsx(Mt,{id:"status-filter","data-testid":"select-status-filter",children:e.jsx(Ft,{placeholder:"All Statuses"})}),e.jsxs(Lt,{children:[e.jsx(te,{value:"all",children:"All Statuses"}),e.jsx(te,{value:"pending",children:"Pending"}),e.jsx(te,{value:"processing",children:"Processing"}),e.jsx(te,{value:"in_production",children:"In Production"}),e.jsx(te,{value:"shipped",children:"Shipped"}),e.jsx(te,{value:"delivered",children:"Delivered"}),e.jsx(te,{value:"cancelled",children:"Cancelled"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"date-filter",children:"Date Range"}),e.jsxs(Rt,{value:c,onValueChange:d,children:[e.jsx(Mt,{id:"date-filter","data-testid":"select-date-filter",children:e.jsx(Ft,{placeholder:"All Time"})}),e.jsxs(Lt,{children:[e.jsx(te,{value:"all",children:"All Time"}),e.jsx(te,{value:"7days",children:"Last 7 Days"}),e.jsx(te,{value:"30days",children:"Last 30 Days"})]})]})]})]})})]}),e.jsxs($,{children:[e.jsxs(le,{children:[e.jsxs(ge,{children:["Orders (",ue.length,")"]}),e.jsx($e,{children:ue.length===0?"No orders match your filters":`Showing ${ue.length} order${ue.length!==1?"s":""}`})]}),e.jsx(V,{children:k?e.jsx("div",{className:"space-y-3",children:[...Array(5)].map((Q,ke)=>e.jsx(tt,{className:"h-16 w-full"},ke))}):ue.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(_i,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No orders match your filters"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(WU,{children:[e.jsx(KU,{children:e.jsxs(Uw,{children:[e.jsx(ed,{children:"Order #"}),e.jsx(ed,{children:"Customer"}),e.jsx(ed,{children:"Product"}),e.jsx(ed,{children:"Status"}),e.jsx(ed,{children:"Amount"}),e.jsx(ed,{children:"Date"}),e.jsx(ed,{className:"text-right",children:"Actions"})]})}),e.jsx(YU,{children:ue.map(Q=>{var ke,G,I;return e.jsxs(Uw,{"data-testid":`order-row-${Q.id}`,children:[e.jsx(td,{children:e.jsx(O,{variant:"ghost",className:"p-0 h-auto font-mono text-sm",onClick:()=>r(`/orders/${Q.id}`),"data-testid":`link-order-${Q.id}`,children:Q.orderNumber})}),e.jsx(td,{children:e.jsx("div",{children:e.jsx("p",{className:"font-medium",children:((ke=Q.shippingAddress)==null?void 0:ke.fullName)||"N/A"})})}),e.jsx(td,{children:Q.productId}),e.jsx(td,{children:e.jsx(ze,{variant:((G=D6[Q.status??"pending"])==null?void 0:G.variant)||"default",children:((I=D6[Q.status??"pending"])==null?void 0:I.label)||Q.status})}),e.jsxs(td,{children:["$",Number(Q.total??0).toFixed(2)]}),e.jsx(td,{children:Q.createdAt?Pr(new Date(Q.createdAt),"MMM d, yyyy"):"N/A"}),e.jsx(td,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(O,{variant:"ghost",size:"sm",onClick:()=>{g(Q),v(Q.status??""),m(!0)},"data-testid":`button-update-status-${Q.id}`,children:e.jsx(Mg,{className:"w-4 h-4"})}),e.jsx(O,{variant:"ghost",size:"sm",onClick:()=>{g(Q),P(Q.trackingNumber||""),L(Q.carrier||""),M(Q.estimatedDelivery?Pr(new Date(Q.estimatedDelivery),"yyyy-MM-dd"):""),h(!0)},"data-testid":`button-add-tracking-${Q.id}`,children:e.jsx(tr,{className:"w-4 h-4"})}),e.jsx(O,{variant:"ghost",size:"sm",onClick:()=>r(`/orders/${Q.id}`),"data-testid":`button-view-details-${Q.id}`,children:e.jsx(Ei,{className:"w-4 h-4"})})]})})]},Q.id)})})]})})})]})]}),e.jsx(Os,{open:u,onOpenChange:m,children:e.jsxs(Ds,{"data-testid":"modal-update-status",children:[e.jsxs(Is,{children:[e.jsx(Rs,{children:"Update Order Status"}),e.jsxs(Lr,{children:["Update the status for order #",p==null?void 0:p.orderNumber]})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"new-status",children:"New Status"}),e.jsxs(Rt,{value:y,onValueChange:v,children:[e.jsx(Mt,{id:"new-status","data-testid":"select-new-status",children:e.jsx(Ft,{placeholder:"Select status"})}),e.jsxs(Lt,{children:[e.jsx(te,{value:"pending",children:"Pending"}),e.jsx(te,{value:"processing",children:"Processing"}),e.jsx(te,{value:"in_production",children:"In Production"}),e.jsx(te,{value:"shipped",children:"Shipped"}),e.jsx(te,{value:"delivered",children:"Delivered"}),e.jsx(te,{value:"cancelled",children:"Cancelled"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"status-notes",children:"Internal Notes (Optional)"}),e.jsx(Gt,{id:"status-notes",placeholder:"Add any notes about this status change...",value:j,onChange:Q=>w(Q.target.value),rows:3,"data-testid":"textarea-status-notes"})]})]}),e.jsxs(Ra,{children:[e.jsx(O,{variant:"outline",onClick:()=>{m(!1),g(null),v(""),w("")},"data-testid":"button-cancel-status",children:"Cancel"}),e.jsx(O,{onClick:Ne,disabled:!y||z.isPending,"data-testid":"button-confirm-status",children:z.isPending?"Updating...":"Update Status"})]})]})}),e.jsx(Os,{open:f,onOpenChange:h,children:e.jsxs(Ds,{"data-testid":"modal-add-tracking",children:[e.jsxs(Is,{children:[e.jsx(Rs,{children:"Add Tracking Information"}),e.jsxs(Lr,{children:["Add or update tracking details for order #",p==null?void 0:p.orderNumber]})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"tracking-number",children:"Tracking Number *"}),e.jsx(re,{id:"tracking-number",placeholder:"Enter tracking number",value:_,onChange:Q=>P(Q.target.value),"data-testid":"input-tracking-number"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"carrier",children:"Carrier *"}),e.jsxs(Rt,{value:E,onValueChange:L,children:[e.jsx(Mt,{id:"carrier","data-testid":"select-carrier",children:e.jsx(Ft,{placeholder:"Select carrier"})}),e.jsx(Lt,{children:gde.map(Q=>e.jsx(te,{value:Q,children:Q},Q))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"estimated-delivery",children:"Estimated Delivery (Optional)"}),e.jsx(re,{id:"estimated-delivery",type:"date",value:T,onChange:Q=>M(Q.target.value),"data-testid":"input-estimated-delivery"})]})]}),e.jsxs(Ra,{children:[e.jsx(O,{variant:"outline",onClick:()=>{h(!1),g(null),P(""),L(""),M("")},"data-testid":"button-cancel-tracking",children:"Cancel"}),e.jsx(O,{onClick:K,disabled:!_||!E||W.isPending,"data-testid":"button-confirm-tracking",children:W.isPending?"Saving...":"Save Tracking"})]})]})})]})}function yde(){return e.jsx("div",{className:"min-h-screen bg-background py-12 px-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-heading font-bold mb-2",children:"Privacy Policy"}),e.jsx("p",{className:"text-muted-foreground",children:"Last updated: October 24, 2025"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs($,{children:[e.jsx(le,{children:e.jsx(ge,{children:"Information We Collect"})}),e.jsxs(V,{className:"space-y-3 text-muted-foreground",children:[e.jsx("p",{children:"We collect the following types of information to provide our memorial services:"}),e.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Account Information"}),": Email address, name, and profile photo through Replit authentication"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Memorial Content"}),": Photos, videos, text, and other content you upload to create memorials"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Payment Information"}),": Processed securely through Stripe for donations and fundraisers"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Analytics Data"}),": Page views, usage patterns, and interaction data to improve our platform"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Device Information"}),": Browser type, IP address, and device identifiers for security and functionality"]})]})]})]}),e.jsxs($,{children:[e.jsx(le,{children:e.jsx(ge,{children:"How We Use Your Information"})}),e.jsx(V,{className:"space-y-3 text-muted-foreground",children:e.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[e.jsx("li",{children:"To provide and maintain our memorial platform services"}),e.jsx("li",{children:"To process donations and payments through Stripe"}),e.jsx("li",{children:"To send notifications about memorials you're connected to"}),e.jsx("li",{children:"To improve and personalize your experience"}),e.jsx("li",{children:"To detect and prevent fraud and abuse"}),e.jsx("li",{children:"To comply with legal obligations"})]})})]}),e.jsxs($,{children:[e.jsx(le,{children:e.jsx(ge,{children:"Data Sharing and Privacy"})}),e.jsxs(V,{className:"space-y-3 text-muted-foreground",children:[e.jsx("p",{children:e.jsx("strong",{children:"We do not sell your personal information."})}),e.jsx("p",{children:"We may share data with:"}),e.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Stripe"}),": For secure payment processing (subject to their privacy policy)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Analytics Services"}),": Google Analytics and Plausible for usage analytics"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Memorial Visibility"}),": Content visibility is controlled by memorial creators through public/private settings"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Legal Requirements"}),": When required by law or to protect our rights"]})]})]})]}),e.jsxs($,{children:[e.jsx(le,{children:e.jsx(ge,{children:"Your Rights and Choices"})}),e.jsxs(V,{className:"space-y-3 text-muted-foreground",children:[e.jsx("p",{children:"You have the right to:"}),e.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Access"}),": Request a copy of your personal data"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Delete"}),": Request deletion of your account and associated data"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Control"}),": Manage memorial privacy settings (public/invite-only)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Update"}),": Modify your profile information at any time"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Opt-out"}),": Unsubscribe from non-essential notifications"]})]})]})]}),e.jsxs($,{children:[e.jsx(le,{children:e.jsx(ge,{children:"Data Security"})}),e.jsxs(V,{className:"space-y-3 text-muted-foreground",children:[e.jsx("p",{children:"We implement appropriate technical and organizational measures to protect your personal information:"}),e.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[e.jsx("li",{children:"Secure HTTPS encryption for all data transmission"}),e.jsx("li",{children:"Password-protected accounts with secure authentication"}),e.jsx("li",{children:"Regular security audits and updates"}),e.jsx("li",{children:"Access controls and monitoring"})]}),e.jsx("p",{className:"mt-3",children:"However, no method of transmission over the Internet is 100% secure. We cannot guarantee absolute security."})]})]}),e.jsxs($,{children:[e.jsx(le,{children:e.jsx(ge,{children:"Children's Privacy"})}),e.jsx(V,{className:"text-muted-foreground",children:e.jsx("p",{children:"Our service is not directed to children under 13. We do not knowingly collect personal information from children under 13. If you are a parent or guardian and believe your child has provided us with personal information, please contact us."})})]}),e.jsxs($,{children:[e.jsx(le,{children:e.jsx(ge,{children:"International Users"})}),e.jsx(V,{className:"text-muted-foreground",children:e.jsx("p",{children:"Our services are hosted in the United States. If you access our platform from outside the U.S., your information may be transferred to, stored, and processed in the U.S. where our servers are located."})})]}),e.jsxs($,{children:[e.jsx(le,{children:e.jsx(ge,{children:"Changes to This Policy"})}),e.jsx(V,{className:"text-muted-foreground",children:e.jsx("p",{children:'We may update this privacy policy from time to time. We will notify you of any significant changes by posting the new policy on this page and updating the "Last updated" date. Your continued use of the platform after changes constitutes acceptance of the updated policy.'})})]}),e.jsxs($,{children:[e.jsx(le,{children:e.jsx(ge,{children:"Contact Us"})}),e.jsxs(V,{className:"text-muted-foreground",children:[e.jsx("p",{children:"If you have questions about this privacy policy or our data practices, please contact us:"}),e.jsxs("ul",{className:"mt-3 space-y-2",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Email"}),": privacy@opictuary.com"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Support"}),": Through the contact form on our website"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Location"}),": United States"]})]}),e.jsx("p",{className:"mt-3 text-sm",children:"We will respond to privacy-related inquiries within 30 days."})]})]})]})]})})}function jde(){return e.jsx("div",{className:"min-h-screen bg-background py-12 px-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(va,{className:"w-16 h-16 text-primary"})}),e.jsx("h1",{className:"text-4xl font-heading font-bold mb-2",children:"Child Safety Standards"}),e.jsx("p",{className:"text-muted-foreground",children:"Last updated: November 12, 2025"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs($,{children:[e.jsx(le,{children:e.jsx(ge,{children:"Our Commitment to Child Safety"})}),e.jsxs(V,{className:"space-y-3 text-muted-foreground",children:[e.jsx("p",{children:"Opictuary is committed to providing a safe and respectful platform for creating digital memorials. We maintain strict standards to protect children and prevent any form of child sexual abuse and exploitation (CSAE)."}),e.jsxs("p",{children:[e.jsx("strong",{children:"Our service is not intended for children under 13 years of age."})," We do not knowingly collect or maintain information from persons under 13 years of age."]})]})]}),e.jsxs($,{children:[e.jsx(le,{children:e.jsx(ge,{children:"Age Requirements"})}),e.jsx(V,{className:"space-y-3 text-muted-foreground",children:e.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Minimum Age"}),": Users must be at least 13 years old to create an account"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Parental Consent"}),": Users between 13-17 should have parental permission to use our services"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Account Verification"}),": All accounts require email verification through secure authentication"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Age Verification"}),": We reserve the right to request age verification for any account"]})]})})]}),e.jsxs($,{children:[e.jsx(le,{children:e.jsx(ge,{children:"Content Standards and Moderation"})}),e.jsxs(V,{className:"space-y-3 text-muted-foreground",children:[e.jsx("p",{children:"We strictly prohibit the following content:"}),e.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"CSAE Material"}),": Any content depicting, promoting, or facilitating child sexual abuse or exploitation"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Inappropriate Content"}),": Sexually explicit material, nudity, or other content harmful to minors"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Predatory Behavior"}),": Any attempt to contact, groom, or exploit children"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Harassment"}),": Bullying, threats, or abusive content targeting minors"]})]}),e.jsxs("p",{className:"mt-3",children:[e.jsx("strong",{children:"Automated Filtering:"})," We employ server-side profanity filtering and content moderation to automatically detect and block inappropriate content."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Manual Review:"})," Reported content is reviewed by our moderation team within 24 hours."]})]})]}),e.jsxs($,{children:[e.jsx(le,{children:e.jsx(ge,{children:"Reporting and Response"})}),e.jsxs(V,{className:"space-y-3 text-muted-foreground",children:[e.jsx("p",{children:"If you encounter any content or behavior that violates our child safety standards:"}),e.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Report Immediately"}),": Use our in-platform reporting tools or contact us directly"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"24-Hour Response"}),": We review all child safety reports within 24 hours"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Content Removal"}),": Violating content is removed immediately upon confirmation"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Account Suspension"}),": Accounts violating child safety policies are permanently banned"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Law Enforcement"}),": We report all suspected CSAE material to the National Center for Missing & Exploited Children (NCMEC) and appropriate law enforcement agencies"]})]})]})]}),e.jsxs($,{children:[e.jsx(le,{children:e.jsx(ge,{children:"Privacy Protections for Minors"})}),e.jsx(V,{className:"space-y-3 text-muted-foreground",children:e.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"No Data Collection from Children"}),": We do not knowingly collect personal information from children under 13"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Immediate Deletion"}),": If we discover a child under 13 has created an account, we delete it immediately"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Memorial Privacy"}),": Memorials for minors can be set to private with invite-only access"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Parental Controls"}),": Parents can request deletion of any memorial content featuring their minor children"]})]})})]}),e.jsxs($,{children:[e.jsx(le,{children:e.jsx(ge,{children:"Platform Safety Features"})}),e.jsx(V,{className:"space-y-3 text-muted-foreground",children:e.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Secure Authentication"}),": Password-protected accounts with email verification"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Privacy Settings"}),": Ability to make memorials private or invite-only"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Content Filtering"}),": Automated profanity and inappropriate content detection"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Reporting Tools"}),": Easy-to-use reporting system for safety concerns"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Moderation Team"}),": Dedicated team reviewing reported content"]})]})})]}),e.jsxs($,{children:[e.jsx(le,{children:e.jsx(ge,{children:"Cooperation with Authorities"})}),e.jsxs(V,{className:"space-y-3 text-muted-foreground",children:[e.jsx("p",{children:"Opictuary fully cooperates with law enforcement and child protection agencies:"}),e.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[e.jsx("li",{children:"We report all suspected CSAE material to NCMEC as required by law"}),e.jsx("li",{children:"We preserve evidence and provide information to law enforcement upon valid legal request"}),e.jsx("li",{children:"We maintain records of reports and actions taken for potential investigation"}),e.jsx("li",{children:"We participate in industry initiatives to combat online child exploitation"})]})]})]}),e.jsxs($,{children:[e.jsx(le,{children:e.jsx(ge,{children:"Contact Information for Child Safety Concerns"})}),e.jsxs(V,{className:"text-muted-foreground",children:[e.jsx("p",{className:"mb-4",children:"If you need to report child safety concerns or have questions about our child protection policies:"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ti,{className:"w-5 h-5 mt-1 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Email (Child Safety Issues):"}),e.jsx("p",{children:"safety@opictuary.com"}),e.jsx("p",{className:"text-sm mt-1",children:"We respond to child safety reports within 24 hours"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ti,{className:"w-5 h-5 mt-1 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"General Contact:"}),e.jsx("p",{children:"opictuary@gmail.com"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx($y,{className:"w-5 h-5 mt-1 text-destructive"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Emergency CSAE Reports:"}),e.jsxs("p",{children:["Report to NCMEC CyberTipline: ",e.jsx("a",{href:"https://www.cybertipline.org",className:"text-primary hover:underline",target:"_blank",rel:"noopener noreferrer",children:"www.cybertipline.org"})]}),e.jsx("p",{className:"text-sm mt-1",children:"Or call 1-800-843-5678"})]})]})]}),e.jsx("div",{className:"mt-6 p-4 bg-muted rounded-md",children:e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Note:"})," This page serves as our publicly accessible Child Safety Standards as required by Google Play Store policies. It is non-editable and permanently available at this URL for compliance purposes."]})})]})]}),e.jsxs($,{children:[e.jsx(le,{children:e.jsx(ge,{children:"Policy Updates"})}),e.jsxs(V,{className:"text-muted-foreground",children:[e.jsx("p",{children:'We may update these child safety standards as needed to reflect new safety measures, legal requirements, or industry best practices. Any significant changes will be posted on this page with an updated "Last updated" date.'}),e.jsx("p",{className:"mt-3",children:"Continued use of our platform constitutes acceptance of our current child safety standards."})]})]})]})]})})}var eS="Collapsible",[bde,GU]=Dn(eS),[Nde,tS]=bde(eS),QU=N.forwardRef((t,s)=>{const{__scopeCollapsible:r,open:n,defaultOpen:a,disabled:i,onOpenChange:o,...l}=t,[c=!1,d]=Ii({prop:n,defaultProp:a,onChange:o});return e.jsx(Nde,{scope:r,disabled:i,contentId:io(),open:c,onOpenToggle:N.useCallback(()=>d(u=>!u),[d]),children:e.jsx(Dt.div,{"data-state":aS(c),"data-disabled":i?"":void 0,...l,ref:s})})});QU.displayName=eS;var ZU="CollapsibleTrigger",sS=N.forwardRef((t,s)=>{const{__scopeCollapsible:r,...n}=t,a=tS(ZU,r);return e.jsx(Dt.button,{type:"button","aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":aS(a.open),"data-disabled":a.disabled?"":void 0,disabled:a.disabled,...n,ref:s,onClick:ht(t.onClick,a.onOpenToggle)})});sS.displayName=ZU;var rS="CollapsibleContent",nS=N.forwardRef((t,s)=>{const{forceMount:r,...n}=t,a=tS(rS,t.__scopeCollapsible);return e.jsx(sa,{present:r||a.open,children:({present:i})=>e.jsx(wde,{...n,ref:s,present:i})})});nS.displayName=rS;var wde=N.forwardRef((t,s)=>{const{__scopeCollapsible:r,present:n,children:a,...i}=t,o=tS(rS,r),[l,c]=N.useState(n),d=N.useRef(null),u=us(s,d),m=N.useRef(0),f=m.current,h=N.useRef(0),p=h.current,g=o.open||l,y=N.useRef(g),v=N.useRef(void 0);return N.useEffect(()=>{const j=requestAnimationFrame(()=>y.current=!1);return()=>cancelAnimationFrame(j)},[]),gn(()=>{const j=d.current;if(j){v.current=v.current||{transitionDuration:j.style.transitionDuration,animationName:j.style.animationName},j.style.transitionDuration="0s",j.style.animationName="none";const w=j.getBoundingClientRect();m.current=w.height,h.current=w.width,y.current||(j.style.transitionDuration=v.current.transitionDuration,j.style.animationName=v.current.animationName),c(n)}},[o.open,n]),e.jsx(Dt.div,{"data-state":aS(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!g,...i,ref:u,style:{"--radix-collapsible-content-height":f?`${f}px`:void 0,"--radix-collapsible-content-width":p?`${p}px`:void 0,...t.style},children:g&&a})});function aS(t){return t?"open":"closed"}var XU=QU,_de=sS,Sde=nS,Ac="Accordion",Cde=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[iS,kde,Ade]=Mf(Ac),[wj,Zge]=Dn(Ac,[Ade,GU]),oS=GU(),JU=Nt.forwardRef((t,s)=>{const{type:r,...n}=t,a=n,i=n;return e.jsx(iS.Provider,{scope:t.__scopeAccordion,children:r==="multiple"?e.jsx(Mde,{...i,ref:s}):e.jsx(Tde,{...a,ref:s})})});JU.displayName=Ac;var[ez,Pde]=wj(Ac),[tz,Ede]=wj(Ac,{collapsible:!1}),Tde=Nt.forwardRef((t,s)=>{const{value:r,defaultValue:n,onValueChange:a=()=>{},collapsible:i=!1,...o}=t,[l,c]=Ii({prop:r,defaultProp:n,onChange:a});return e.jsx(ez,{scope:t.__scopeAccordion,value:l?[l]:[],onItemOpen:c,onItemClose:Nt.useCallback(()=>i&&c(""),[i,c]),children:e.jsx(tz,{scope:t.__scopeAccordion,collapsible:i,children:e.jsx(sz,{...o,ref:s})})})}),Mde=Nt.forwardRef((t,s)=>{const{value:r,defaultValue:n,onValueChange:a=()=>{},...i}=t,[o=[],l]=Ii({prop:r,defaultProp:n,onChange:a}),c=Nt.useCallback(u=>l((m=[])=>[...m,u]),[l]),d=Nt.useCallback(u=>l((m=[])=>m.filter(f=>f!==u)),[l]);return e.jsx(ez,{scope:t.__scopeAccordion,value:o,onItemOpen:c,onItemClose:d,children:e.jsx(tz,{scope:t.__scopeAccordion,collapsible:!0,children:e.jsx(sz,{...i,ref:s})})})}),[Lde,_j]=wj(Ac),sz=Nt.forwardRef((t,s)=>{const{__scopeAccordion:r,disabled:n,dir:a,orientation:i="vertical",...o}=t,l=Nt.useRef(null),c=us(l,s),d=kde(r),m=Nm(a)==="ltr",f=ht(t.onKeyDown,h=>{var T;if(!Cde.includes(h.key))return;const p=h.target,g=d().filter(M=>{var F;return!((F=M.ref.current)!=null&&F.disabled)}),y=g.findIndex(M=>M.ref.current===p),v=g.length;if(y===-1)return;h.preventDefault();let j=y;const w=0,_=v-1,P=()=>{j=y+1,j>_&&(j=w)},E=()=>{j=y-1,j<w&&(j=_)};switch(h.key){case"Home":j=w;break;case"End":j=_;break;case"ArrowRight":i==="horizontal"&&(m?P():E());break;case"ArrowDown":i==="vertical"&&P();break;case"ArrowLeft":i==="horizontal"&&(m?E():P());break;case"ArrowUp":i==="vertical"&&E();break}const L=j%v;(T=g[L].ref.current)==null||T.focus()});return e.jsx(Lde,{scope:r,disabled:n,direction:a,orientation:i,children:e.jsx(iS.Slot,{scope:r,children:e.jsx(Dt.div,{...o,"data-orientation":i,ref:c,onKeyDown:n?void 0:f})})})}),h1="AccordionItem",[Dde,lS]=wj(h1),rz=Nt.forwardRef((t,s)=>{const{__scopeAccordion:r,value:n,...a}=t,i=_j(h1,r),o=Pde(h1,r),l=oS(r),c=io(),d=n&&o.value.includes(n)||!1,u=i.disabled||t.disabled;return e.jsx(Dde,{scope:r,open:d,disabled:u,triggerId:c,children:e.jsx(XU,{"data-orientation":i.orientation,"data-state":cz(d),...l,...a,ref:s,disabled:u,open:d,onOpenChange:m=>{m?o.onItemOpen(n):o.onItemClose(n)}})})});rz.displayName=h1;var nz="AccordionHeader",az=Nt.forwardRef((t,s)=>{const{__scopeAccordion:r,...n}=t,a=_j(Ac,r),i=lS(nz,r);return e.jsx(Dt.h3,{"data-orientation":a.orientation,"data-state":cz(i.open),"data-disabled":i.disabled?"":void 0,...n,ref:s})});az.displayName=nz;var zw="AccordionTrigger",iz=Nt.forwardRef((t,s)=>{const{__scopeAccordion:r,...n}=t,a=_j(Ac,r),i=lS(zw,r),o=Ede(zw,r),l=oS(r);return e.jsx(iS.ItemSlot,{scope:r,children:e.jsx(_de,{"aria-disabled":i.open&&!o.collapsible||void 0,"data-orientation":a.orientation,id:i.triggerId,...l,...n,ref:s})})});iz.displayName=zw;var oz="AccordionContent",lz=Nt.forwardRef((t,s)=>{const{__scopeAccordion:r,...n}=t,a=_j(Ac,r),i=lS(oz,r),o=oS(r);return e.jsx(Sde,{role:"region","aria-labelledby":i.triggerId,"data-orientation":a.orientation,...o,...n,ref:s,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...t.style}})});lz.displayName=oz;function cz(t){return t?"open":"closed"}var Ide=JU,Rde=rz,Fde=az,dz=iz,uz=lz;const Ode=Ide,mz=N.forwardRef(({className:t,...s},r)=>e.jsx(Rde,{ref:r,className:bt("border-b",t),...s}));mz.displayName="AccordionItem";const hz=N.forwardRef(({className:t,children:s,...r},n)=>e.jsx(Fde,{className:"flex",children:e.jsxs(dz,{ref:n,className:bt("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",t),...r,children:[s,e.jsx(Fx,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));hz.displayName=dz.displayName;const fz=N.forwardRef(({className:t,children:s,...r},n)=>e.jsx(uz,{ref:n,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...r,children:e.jsx("div",{className:bt("pb-4 pt-0",t),children:s})}));fz.displayName=uz.displayName;function $de(){const[t,s]=N.useState("help-center"),[r,n]=N.useState(""),{toast:a}=Ht(),{data:i=[]}=Xe({queryKey:["/api/support/articles"]}),{data:o=[]}=Xe({queryKey:["/api/support/grief-resources"]}),l=i.filter(d=>d.title.toLowerCase().includes(r.toLowerCase())||d.content.toLowerCase().includes(r.toLowerCase())),c=async d=>{try{if(!(await fetch(`/api/support/articles/${d}/helpful`,{method:"POST"})).ok)throw new Error("Failed to mark as helpful");a({title:"Thank you",description:"Your feedback helps us improve our support resources."})}catch(u){a({title:"Error",description:u.message,variant:"destructive"})}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-[#1a0f29] to-[#2d1b4e]",children:e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:[e.jsx("div",{className:"mb-6",children:e.jsx(He,{href:"/",children:e.jsxs(O,{variant:"ghost",size:"sm","data-testid":"button-back-home",children:[e.jsx(Sr,{className:"w-4 h-4 mr-2"}),"Back to Home"]})})}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-serif text-[#d4af37] mb-2","data-testid":"text-page-title",children:"Support Hub"}),e.jsx("p",{className:"text-lg text-purple-200",children:"We're here to help you through every step of your journey"})]}),e.jsxs(ba,{value:t,onValueChange:s,className:"space-y-6",children:[e.jsxs(ra,{className:"grid w-full grid-cols-3 bg-purple-900/30","data-testid":"tabs-support-sections",children:[e.jsxs(qt,{value:"help-center",className:"gap-2","data-testid":"tab-help-center",children:[e.jsx(uo,{className:"w-4 h-4"}),"Help Center"]}),e.jsxs(qt,{value:"grief-support",className:"gap-2","data-testid":"tab-grief-support",children:[e.jsx(_t,{className:"w-4 h-4"}),"Grief Support"]}),e.jsxs(qt,{value:"partner-support",className:"gap-2","data-testid":"tab-partner-support",children:[e.jsx(vl,{className:"w-4 h-4"}),"Partner Support"]})]}),e.jsx(Vt,{value:"help-center",className:"space-y-6",children:e.jsx(Bde,{articles:l,searchQuery:r,setSearchQuery:n,onMarkHelpful:c})}),e.jsx(Vt,{value:"grief-support",className:"space-y-6",children:e.jsx(Ude,{resources:o})}),e.jsx(Vt,{value:"partner-support",className:"space-y-6",children:e.jsx(zde,{})})]})]})})}function Bde({articles:t,searchQuery:s,setSearchQuery:r,onMarkHelpful:n}){const a=Array.from(new Set(t.map(i=>i.category)));return e.jsxs("div",{className:"space-y-6",children:[e.jsxs($,{className:"p-6 bg-purple-900/20 border-purple-700/30",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Cc,{className:"w-5 h-5 text-[#d4af37]"}),e.jsx(De,{htmlFor:"search-articles",className:"text-lg font-medium text-purple-100",children:"Search Help Articles"})]}),e.jsx(re,{id:"search-articles","data-testid":"input-search-articles",placeholder:"What do you need help with?",value:s,onChange:i=>r(i.target.value),className:"bg-purple-950/50 border-purple-700/50 text-purple-100 placeholder:text-purple-400"})]}),e.jsxs("div",{className:"space-y-4",children:[a.map(i=>{const o=t.filter(l=>l.category===i);return o.length===0?null:e.jsxs($,{className:"p-6 bg-purple-900/20 border-purple-700/30",children:[e.jsx("h2",{className:"text-xl font-serif text-[#d4af37] mb-4","data-testid":`text-category-${i}`,children:i}),e.jsx(Ode,{type:"single",collapsible:!0,className:"space-y-2",children:o.map(l=>e.jsxs(mz,{value:l.id,className:"border-purple-700/30","data-testid":`accordion-article-${l.id}`,children:[e.jsx(hz,{className:"text-purple-100 hover:text-[#d4af37]",children:l.title}),e.jsxs(fz,{className:"text-purple-200 space-y-4",children:[e.jsx("div",{className:"prose prose-invert max-w-none",children:e.jsx("p",{children:l.content})}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-purple-700/30",children:[e.jsx("div",{className:"flex items-center gap-4 text-sm text-purple-400",children:e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(P0,{className:"w-4 h-4"}),l.helpfulCount," found helpful"]})}),e.jsxs(O,{variant:"outline",size:"sm",onClick:()=>n(l.id),"data-testid":`button-helpful-${l.id}`,className:"border-[#d4af37]/30 text-[#d4af37] hover:bg-[#d4af37]/10",children:[e.jsx(P0,{className:"w-4 h-4 mr-2"}),"Mark as Helpful"]})]})]})]},l.id))})]},i)}),t.length===0&&e.jsxs($,{className:"p-12 bg-purple-900/20 border-purple-700/30 text-center",children:[e.jsx(uo,{className:"w-12 h-12 text-purple-400 mx-auto mb-4"}),e.jsx("p",{className:"text-purple-200",children:"No help articles found. Please try a different search term."})]})]})]})}function Ude({resources:t}){const s=t.filter(i=>i.category==="Crisis Hotlines"),r=t.filter(i=>i.category==="Professional Counseling"),n=t.filter(i=>i.category==="Support Groups"),a=t.filter(i=>!["Crisis Hotlines","Professional Counseling","Support Groups"].includes(i.category));return e.jsxs("div",{className:"space-y-6",children:[e.jsx($,{className:"p-6 bg-red-950/20 border-red-700/30",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(bm,{className:"w-6 h-6 text-red-400 flex-shrink-0 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-red-100 mb-2",children:"Crisis Support Available 24/7"}),e.jsx("p",{className:"text-red-200 mb-4",children:"If you're experiencing a mental health crisis, please reach out immediately. You are not alone."}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-red-100",children:[e.jsx($d,{className:"w-4 h-4"}),e.jsx("span",{className:"font-semibold",children:"National Suicide Prevention Lifeline:"}),e.jsx("a",{href:"tel:988",className:"text-[#d4af37] hover:underline font-semibold","data-testid":"link-crisis-hotline",children:"988"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-red-100",children:[e.jsx(Nn,{className:"w-4 h-4"}),e.jsx("span",{className:"font-semibold",children:"Crisis Text Line:"}),e.jsx("span",{className:"text-[#d4af37] font-semibold",children:'Text "HELLO" to 741741'})]})]})]})]})}),s.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-serif text-[#d4af37] mb-4",children:"Crisis Hotlines"}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:s.map(i=>e.jsx(oy,{resource:i},i.id))})]}),r.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-serif text-[#d4af37] mb-4",children:"Professional Counseling"}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:r.map(i=>e.jsx(oy,{resource:i},i.id))})]}),n.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-serif text-[#d4af37] mb-4",children:"Support Groups"}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:n.map(i=>e.jsx(oy,{resource:i},i.id))})]}),a.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-serif text-[#d4af37] mb-4",children:"Additional Resources"}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:a.map(i=>e.jsx(oy,{resource:i},i.id))})]})]})}function oy({resource:t}){return e.jsxs($,{className:"p-6 bg-purple-900/20 border-purple-700/30","data-testid":`card-resource-${t.id}`,children:[e.jsx("h3",{className:"text-lg font-semibold text-purple-100 mb-2",children:t.title}),e.jsx("p",{className:"text-purple-200 mb-4 text-sm",children:t.description}),e.jsxs("div",{className:"space-y-2",children:[t.phoneNumber&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx($d,{className:"w-4 h-4 text-[#d4af37]"}),e.jsx("a",{href:`tel:${t.phoneNumber}`,className:"text-purple-100 hover:text-[#d4af37]","data-testid":`link-phone-${t.id}`,children:t.phoneNumber})]}),t.url&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(pa,{className:"w-4 h-4 text-[#d4af37]"}),e.jsx("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"text-purple-100 hover:text-[#d4af37]","data-testid":`link-website-${t.id}`,children:"Visit Website"})]}),t.availability&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-purple-400",children:[e.jsx(Mr,{className:"w-4 h-4"}),t.availability]})]})]})}function zde(){const[t,s]=N.useState({category:"",subject:"",name:"",email:"",phone:"",description:"",partnerType:"",partnerAccountId:""}),[r,n]=N.useState(!1),{toast:a}=Ht(),i=t.category==="Partner Support"||t.category==="Flower Shop"||t.category==="Prison Access",o=async l=>{l.preventDefault(),n(!0);try{const c={...t,isPartnerRequest:i,partnerType:i?t.partnerType:void 0,partnerAccountId:i?t.partnerAccountId:void 0},d=await fetch("/api/support/requests",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});if(!d.ok){const u=await d.json();throw new Error(u.error||"Failed to submit support request")}a({title:"Support Request Submitted",description:i?"We'll get back to you within 12-24 hours.":"We'll get back to you within 24-48 hours."}),s({category:"",subject:"",name:"",email:"",phone:"",description:"",partnerType:"",partnerAccountId:""})}catch(c){a({title:"Error",description:c.message,variant:"destructive"})}finally{n(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs($,{className:"p-6 bg-purple-900/20 border-purple-700/30",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(vl,{className:"w-8 h-8 text-[#d4af37]"}),e.jsx("h2",{className:"text-2xl font-serif text-[#d4af37]",children:"Partner Support"})]}),e.jsx("p",{className:"text-purple-200 mb-6",children:"Dedicated support for our business partners including funeral homes, flower shops, and correctional facilities. We're committed to helping you serve families with excellence."}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(vl,{className:"w-5 h-5 text-[#d4af37] mt-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-purple-100 mb-1",children:"Funeral Home Partners"}),e.jsx("p",{className:"text-sm text-purple-200",children:"Integration support, referral tracking, commission management, and training resources"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(of,{className:"w-5 h-5 text-[#d4af37] mt-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-purple-100 mb-1",children:"Flower Shop Partners"}),e.jsx("p",{className:"text-sm text-purple-200",children:"Order management, commission tracking, listing optimization, and delivery coordination"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ms,{className:"w-5 h-5 text-[#d4af37] mt-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-purple-100 mb-1",children:"Correctional Facilities"}),e.jsx("p",{className:"text-sm text-purple-200",children:"Access system setup, verification processes, payment management, and audit support"})]})]})]})]}),e.jsxs($,{className:"p-6 bg-purple-900/20 border-purple-700/30",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(YI,{className:"w-8 h-8 text-[#d4af37]"}),e.jsx("h2",{className:"text-2xl font-serif text-[#d4af37]",children:"Technical Support"})]}),e.jsx("p",{className:"text-purple-200 mb-6",children:"Get help with platform issues, technical questions, and account management."}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ms,{className:"w-5 h-5 text-[#d4af37] mt-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-purple-100 mb-1",children:"General Support"}),e.jsx("p",{className:"text-sm text-purple-200",children:"Memorial creation, content management, privacy settings, and platform features"}),e.jsx(ze,{variant:"secondary",className:"bg-purple-800/50 mt-2",children:"Response: 24-48 hours"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(bm,{className:"w-5 h-5 text-[#d4af37] mt-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-purple-100 mb-1",children:"Technical Issues"}),e.jsx("p",{className:"text-sm text-purple-200",children:"Platform bugs, errors, payment problems, or account access issues"}),e.jsx(ze,{variant:"secondary",className:"bg-purple-800/50 mt-2",children:"Priority Response"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(vl,{className:"w-5 h-5 text-[#d4af37] mt-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-purple-100 mb-1",children:"Partnership Inquiries"}),e.jsx("p",{className:"text-sm text-purple-200",children:"Questions about becoming a partner, commission rates, or service integration"}),e.jsx(ze,{variant:"secondary",className:"bg-purple-800/50 mt-2",children:"Response: 12-24 hours"})]})]})]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs($,{className:"p-4 bg-purple-900/20 border-purple-700/30 hover-elevate","data-testid":"card-funeral-partner-resources",children:[e.jsx(vl,{className:"w-6 h-6 text-[#d4af37] mb-3"}),e.jsx("h3",{className:"font-semibold text-purple-100 mb-2",children:"Funeral Home Resources"}),e.jsx("p",{className:"text-sm text-purple-200 mb-3",children:"Access partner portal, training materials, and integration guides"}),e.jsx(He,{href:"/partner-signup",children:e.jsxs(O,{variant:"outline",size:"sm",className:"w-full","data-testid":"button-partner-portal",children:["Partner Portal",e.jsx(pa,{className:"w-3 h-3 ml-2"})]})})]}),e.jsxs($,{className:"p-4 bg-purple-900/20 border-purple-700/30 hover-elevate","data-testid":"card-flower-partner-resources",children:[e.jsx(of,{className:"w-6 h-6 text-[#d4af37] mb-3"}),e.jsx("h3",{className:"font-semibold text-purple-100 mb-2",children:"Flower Shop Resources"}),e.jsx("p",{className:"text-sm text-purple-200 mb-3",children:"Manage orders, track commissions, and optimize your listing"}),e.jsx(He,{href:"/flower-partners",children:e.jsxs(O,{variant:"outline",size:"sm",className:"w-full","data-testid":"button-flower-portal",children:["Shop Dashboard",e.jsx(pa,{className:"w-3 h-3 ml-2"})]})})]}),e.jsxs($,{className:"p-4 bg-purple-900/20 border-purple-700/30 hover-elevate","data-testid":"card-prison-partner-resources",children:[e.jsx(Ms,{className:"w-6 h-6 text-[#d4af37] mb-3"}),e.jsx("h3",{className:"font-semibold text-purple-100 mb-2",children:"Facility Access"}),e.jsx("p",{className:"text-sm text-purple-200 mb-3",children:"Manage facility access, verification, and session monitoring"}),e.jsx(He,{href:"/prison-access",children:e.jsxs(O,{variant:"outline",size:"sm",className:"w-full","data-testid":"button-facility-portal",children:["Facility Portal",e.jsx(pa,{className:"w-3 h-3 ml-2"})]})})]})]}),e.jsxs($,{className:"md:col-span-3 p-8 bg-purple-900/20 border-purple-700/30",children:[e.jsx("h2",{className:"text-2xl font-serif text-[#d4af37] mb-6",children:"Submit a Support Request"}),e.jsxs("form",{onSubmit:o,className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"category",className:"text-purple-100",children:"Category *"}),e.jsxs(Rt,{value:t.category,onValueChange:l=>s({...t,category:l}),required:!0,children:[e.jsx(Mt,{id:"category","data-testid":"select-category",className:"bg-purple-950/50 border-purple-700/50 text-purple-100",children:e.jsx(Ft,{placeholder:"Select a category"})}),e.jsxs(Lt,{children:[e.jsx(te,{value:"General Support",children:"General Support"}),e.jsx(te,{value:"Memorial Management",children:"Memorial Management"}),e.jsx(te,{value:"Payment Issues",children:"Payment Issues"}),e.jsx(te,{value:"Technical Issue",children:"Technical Issue"}),e.jsx(te,{value:"Partner Support",children:"Partner Support"}),e.jsx(te,{value:"Flower Shop",children:"Flower Shop"}),e.jsx(te,{value:"Prison Access",children:"Prison Access"}),e.jsx(te,{value:"Other",children:"Other"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"subject",className:"text-purple-100",children:"Subject *"}),e.jsx(re,{id:"subject","data-testid":"input-subject",placeholder:"Brief description of your issue",value:t.subject,onChange:l=>s({...t,subject:l.target.value}),required:!0,className:"bg-purple-950/50 border-purple-700/50 text-purple-100 placeholder:text-purple-400"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"name",className:"text-purple-100",children:"Your Name *"}),e.jsx(re,{id:"name","data-testid":"input-name",placeholder:"John Doe",value:t.name,onChange:l=>s({...t,name:l.target.value}),required:!0,className:"bg-purple-950/50 border-purple-700/50 text-purple-100 placeholder:text-purple-400"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"email",className:"text-purple-100",children:"Email *"}),e.jsx(re,{id:"email","data-testid":"input-email",type:"email",placeholder:"you@example.com",value:t.email,onChange:l=>s({...t,email:l.target.value}),required:!0,className:"bg-purple-950/50 border-purple-700/50 text-purple-100 placeholder:text-purple-400"})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(De,{htmlFor:"phone",className:"text-purple-100",children:"Phone (Optional)"}),e.jsx(re,{id:"phone","data-testid":"input-phone",type:"tel",placeholder:"+1 (555) 123-4567",value:t.phone,onChange:l=>s({...t,phone:l.target.value}),className:"bg-purple-950/50 border-purple-700/50 text-purple-100 placeholder:text-purple-400"})]}),i&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"partnerType",className:"text-purple-100",children:"Partner Type *"}),e.jsxs(Rt,{value:t.partnerType,onValueChange:l=>s({...t,partnerType:l}),required:i,children:[e.jsx(Mt,{id:"partnerType","data-testid":"select-partner-type",className:"bg-purple-950/50 border-purple-700/50 text-purple-100",children:e.jsx(Ft,{placeholder:"Select partner type"})}),e.jsxs(Lt,{children:[e.jsx(te,{value:"funeral_home",children:"Funeral Home"}),e.jsx(te,{value:"flower_shop",children:"Flower Shop"}),e.jsx(te,{value:"correctional_facility",children:"Correctional Facility"}),e.jsx(te,{value:"other",children:"Other Partner"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"partnerAccountId",className:"text-purple-100",children:"Partner Account ID (Optional)"}),e.jsx(re,{id:"partnerAccountId","data-testid":"input-partner-account-id",placeholder:"Your partner account number",value:t.partnerAccountId,onChange:l=>s({...t,partnerAccountId:l.target.value}),className:"bg-purple-950/50 border-purple-700/50 text-purple-100 placeholder:text-purple-400"}),e.jsx("p",{className:"text-xs text-purple-400",children:"If you have a partner account ID, please provide it for faster service"})]})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(De,{htmlFor:"description",className:"text-purple-100",children:"Description *"}),e.jsx(Gt,{id:"description","data-testid":"input-description",placeholder:"Please provide as much detail as possible...",value:t.description,onChange:l=>s({...t,description:l.target.value}),required:!0,rows:6,className:"bg-purple-950/50 border-purple-700/50 text-purple-100 placeholder:text-purple-400"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(O,{type:"submit",disabled:r,"data-testid":"button-submit-request",className:"bg-[#d4af37] text-purple-950 hover:bg-[#d4af37]/90 min-w-[200px]",children:r?"Submitting...":"Submit Request"})})]})]})]})}function qde(){const{code:t}=Ba(),[,s]=ja(),{toast:r}=Ht(),[n,a]=N.useState(""),[i,o]=N.useState(""),[l,c]=N.useState(""),{data:d,isLoading:u}=Xe({queryKey:["/api/memorials/code",t],enabled:!!t}),m=yt({mutationFn:async p=>{const g=await fetch(`/api/qr-codes/${t}/upload`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)});if(!g.ok){const y=await g.json().catch(()=>({error:"Upload failed"}));throw new Error(y.error||"Upload failed")}return await g.json()},onSuccess:()=>{r({title:"Upload Successful",description:"Your photo or video has been shared with the memorial."}),a(""),o(""),c(""),setTimeout(()=>{s(`/memorial/${t}`)},2e3)},onError:p=>{r({title:"Upload Failed",description:p.message||"Failed to upload. Please try again.",variant:"destructive"})}}),f=yt({mutationFn:async p=>await pt("POST",`/api/qr-codes/${t}/scan`,p)});N.useEffect(()=>{if(t){const p=navigator.userAgent,g=/Mobile|Android|iPhone/i.test(p)?"mobile":/Tablet|iPad/i.test(p)?"tablet":"desktop";let y="Unknown";p.includes("Chrome")?y="Chrome":p.includes("Safari")?y="Safari":p.includes("Firefox")?y="Firefox":p.includes("Edge")&&(y="Edge");let v="Unknown";p.includes("Windows")?v="Windows":p.includes("Mac")?v="macOS":p.includes("Linux")?v="Linux":p.includes("Android")?v="Android":(p.includes("iOS")||p.includes("iPhone")||p.includes("iPad"))&&(v="iOS"),"geolocation"in navigator?navigator.geolocation.getCurrentPosition(j=>{f.mutate({geolocationConsent:!0,latitude:j.coords.latitude,longitude:j.coords.longitude,deviceType:g,browser:y,operatingSystem:v,action:"view_memorial"})},j=>{console.log("Geolocation denied or unavailable:",j.message),f.mutate({geolocationConsent:!1,deviceType:g,browser:y,operatingSystem:v,action:"view_memorial"})}):f.mutate({geolocationConsent:!1,deviceType:g,browser:y,operatingSystem:v,action:"view_memorial"})}},[t]);const h=p=>{if(p.preventDefault(),!n.trim()){r({title:"Name Required",description:"Please enter your name.",variant:"destructive"});return}if(!i.trim()&&!l.trim()){r({title:"Content Required",description:"Please enter a message or provide a media URL.",variant:"destructive"});return}m.mutate({authorName:n,caption:i||"Shared via QR code",mediaUrl:l||void 0})};return u?e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-purple-950 via-purple-900 to-purple-950 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(tn,{className:"w-12 h-12 text-gold-400 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-purple-200",children:"Loading memorial..."})]})}):d?e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-purple-950 via-purple-900 to-purple-950",children:[e.jsx("header",{className:"border-b border-purple-700/50 bg-purple-950/80 backdrop-blur-sm",children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ro,{}),e.jsx(O,{variant:"ghost",onClick:()=>s(`/memorial/${t}`),className:"text-purple-200 hover:text-purple-100","data-testid":"button-view-memorial",children:"View Memorial"})]})})}),e.jsxs("main",{className:"container mx-auto px-4 py-8 max-w-2xl",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[e.jsx(_t,{className:"w-8 h-8 text-gold-400"}),e.jsx("h1",{className:"text-3xl font-serif text-purple-100",children:"Share a Memory"})]}),e.jsxs("p",{className:"text-xl text-purple-200 mb-2",children:[d.firstName," ",d.lastName]}),e.jsx("p",{className:"text-purple-300",children:"Upload a photo or video to honor their memory"})]}),e.jsxs($,{className:"bg-purple-900/50 border-purple-700/50",children:[e.jsxs(le,{children:[e.jsxs(ge,{className:"text-purple-100 flex items-center gap-2",children:[e.jsx(zd,{className:"w-5 h-5"}),"Upload Photo or Video"]}),e.jsx($e,{className:"text-purple-300",children:"Share a cherished moment that will be added to the memorial"})]}),e.jsx(V,{children:e.jsxs("form",{onSubmit:h,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"uploaderName",className:"text-purple-100",children:"Your Name *"}),e.jsx(re,{id:"uploaderName","data-testid":"input-uploader-name",placeholder:"Enter your name",value:n,onChange:p=>a(p.target.value),required:!0,className:"bg-purple-950/50 border-purple-700/50 text-purple-100 placeholder:text-purple-400"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"mediaUrl",className:"text-purple-100",children:"Photo or Video URL (Optional)"}),e.jsx(re,{id:"mediaUrl","data-testid":"input-media-url",placeholder:"https://example.com/photo.jpg",value:l,onChange:p=>c(p.target.value),className:"bg-purple-950/50 border-purple-700/50 text-purple-100 placeholder:text-purple-400"}),e.jsx("p",{className:"text-xs text-purple-400",children:"Paste a link to your photo or video (hosted on Imgur, Google Photos, etc.)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"message",className:"text-purple-100",children:"Message *"}),e.jsx(Gt,{id:"message","data-testid":"input-message",placeholder:"Share a memory or message...",value:i,onChange:p=>o(p.target.value),rows:4,className:"bg-purple-950/50 border-purple-700/50 text-purple-100 placeholder:text-purple-400"})]}),e.jsx(O,{type:"submit",className:"w-full",disabled:m.isPending,"data-testid":"button-upload-submit",children:m.isPending?e.jsxs(e.Fragment,{children:[e.jsx(tn,{className:"w-4 h-4 mr-2 animate-spin"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(zd,{className:"w-4 h-4 mr-2"}),"Share Memory"]})})]})})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsx("p",{className:"text-sm text-purple-400",children:"Your upload will be reviewed and added to the memorial shortly."})})]})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-purple-950 via-purple-900 to-purple-950 flex items-center justify-center p-4",children:e.jsxs($,{className:"max-w-md w-full bg-purple-900/50 border-purple-700/50",children:[e.jsxs(le,{children:[e.jsx(ge,{className:"text-purple-100",children:"Memorial Not Found"}),e.jsx($e,{className:"text-purple-300",children:"The memorial you're looking for could not be found."})]}),e.jsx(V,{children:e.jsx(O,{onClick:()=>s("/"),className:"w-full","data-testid":"button-go-home",children:"Go to Homepage"})})]})})}function mr(t){"@babel/helpers - typeof";return mr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},mr(t)}var Go=Uint8Array,Ci=Uint16Array,cS=Int32Array,dS=new Go([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),uS=new Go([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),I6=new Go([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),pz=function(t,s){for(var r=new Ci(31),n=0;n<31;++n)r[n]=s+=1<<t[n-1];for(var a=new cS(r[30]),n=1;n<30;++n)for(var i=r[n];i<r[n+1];++i)a[i]=i-r[n]<<5|n;return{b:r,r:a}},xz=pz(dS,2),Vde=xz.b,qw=xz.r;Vde[28]=258,qw[258]=28;var Hde=pz(uS,0),R6=Hde.r,Vw=new Ci(32768);for(var Er=0;Er<32768;++Er){var Qc=(Er&43690)>>1|(Er&21845)<<1;Qc=(Qc&52428)>>2|(Qc&13107)<<2,Qc=(Qc&61680)>>4|(Qc&3855)<<4,Vw[Er]=((Qc&65280)>>8|(Qc&255)<<8)>>1}var hx=function(t,s,r){for(var n=t.length,a=0,i=new Ci(s);a<n;++a)t[a]&&++i[t[a]-1];var o=new Ci(s);for(a=1;a<s;++a)o[a]=o[a-1]+i[a-1]<<1;var l;if(r){l=new Ci(1<<s);var c=15-s;for(a=0;a<n;++a)if(t[a])for(var d=a<<4|t[a],u=s-t[a],m=o[t[a]-1]++<<u,f=m|(1<<u)-1;m<=f;++m)l[Vw[m]>>c]=d}else for(l=new Ci(n),a=0;a<n;++a)t[a]&&(l[a]=Vw[o[t[a]-1]++]>>15-t[a]);return l},pm=new Go(288);for(var Er=0;Er<144;++Er)pm[Er]=8;for(var Er=144;Er<256;++Er)pm[Er]=9;for(var Er=256;Er<280;++Er)pm[Er]=7;for(var Er=280;Er<288;++Er)pm[Er]=8;var f1=new Go(32);for(var Er=0;Er<32;++Er)f1[Er]=5;var Wde=hx(pm,9,0),Kde=hx(f1,5,0),gz=function(t){return(t+7)/8|0},Yde=function(t,s,r){return(r==null||r>t.length)&&(r=t.length),new Go(t.subarray(s,r))},tc=function(t,s,r){r<<=s&7;var n=s/8|0;t[n]|=r,t[n+1]|=r>>8},$p=function(t,s,r){r<<=s&7;var n=s/8|0;t[n]|=r,t[n+1]|=r>>8,t[n+2]|=r>>16},v2=function(t,s){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var a=r.length,i=r.slice();if(!a)return{t:yz,l:0};if(a==1){var o=new Go(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function(P,E){return P.f-E.f}),r.push({s:-1,f:25001});var l=r[0],c=r[1],d=0,u=1,m=2;for(r[0]={s:-1,f:l.f+c.f,l,r:c};u!=a-1;)l=r[r[d].f<r[m].f?d++:m++],c=r[d!=u&&r[d].f<r[m].f?d++:m++],r[u++]={s:-1,f:l.f+c.f,l,r:c};for(var f=i[0].s,n=1;n<a;++n)i[n].s>f&&(f=i[n].s);var h=new Ci(f+1),p=Hw(r[u-1],h,0);if(p>s){var n=0,g=0,y=p-s,v=1<<y;for(i.sort(function(E,L){return h[L.s]-h[E.s]||E.f-L.f});n<a;++n){var j=i[n].s;if(h[j]>s)g+=v-(1<<p-h[j]),h[j]=s;else break}for(g>>=y;g>0;){var w=i[n].s;h[w]<s?g-=1<<s-h[w]++-1:++n}for(;n>=0&&g;--n){var _=i[n].s;h[_]==s&&(--h[_],++g)}p=s}return{t:new Go(h),l:p}},Hw=function(t,s,r){return t.s==-1?Math.max(Hw(t.l,s,r+1),Hw(t.r,s,r+1)):s[t.s]=r},F6=function(t){for(var s=t.length;s&&!t[--s];);for(var r=new Ci(++s),n=0,a=t[0],i=1,o=function(c){r[n++]=c},l=1;l<=s;++l)if(t[l]==a&&l!=s)++i;else{if(!a&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(a),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(a);i=1,a=t[l]}return{c:r.subarray(0,n),n:s}},Bp=function(t,s){for(var r=0,n=0;n<s.length;++n)r+=t[n]*s[n];return r},vz=function(t,s,r){var n=r.length,a=gz(s+2);t[a]=n&255,t[a+1]=n>>8,t[a+2]=t[a]^255,t[a+3]=t[a+1]^255;for(var i=0;i<n;++i)t[a+i+4]=r[i];return(a+4+n)*8},O6=function(t,s,r,n,a,i,o,l,c,d,u){tc(s,u++,r),++a[256];for(var m=v2(a,15),f=m.t,h=m.l,p=v2(i,15),g=p.t,y=p.l,v=F6(f),j=v.c,w=v.n,_=F6(g),P=_.c,E=_.n,L=new Ci(19),T=0;T<j.length;++T)++L[j[T]&31];for(var T=0;T<P.length;++T)++L[P[T]&31];for(var M=v2(L,7),F=M.t,k=M.l,D=19;D>4&&!F[I6[D-1]];--D);var z=d+5<<3,W=Bp(a,pm)+Bp(i,f1)+o,ue=Bp(a,f)+Bp(i,g)+o+14+3*D+Bp(L,F)+2*L[16]+3*L[17]+7*L[18];if(c>=0&&z<=W&&z<=ue)return vz(s,u,t.subarray(c,c+d));var ae,Ne,K,Q;if(tc(s,u,1+(ue<W)),u+=2,ue<W){ae=hx(f,h,0),Ne=f,K=hx(g,y,0),Q=g;var ke=hx(F,k,0);tc(s,u,w-257),tc(s,u+5,E-1),tc(s,u+10,D-4),u+=14;for(var T=0;T<D;++T)tc(s,u+3*T,F[I6[T]]);u+=3*D;for(var G=[j,P],I=0;I<2;++I)for(var Z=G[I],T=0;T<Z.length;++T){var J=Z[T]&31;tc(s,u,ke[J]),u+=F[J],J>15&&(tc(s,u,Z[T]>>5&127),u+=Z[T]>>12)}}else ae=Wde,Ne=pm,K=Kde,Q=f1;for(var T=0;T<l;++T){var se=n[T];if(se>255){var J=se>>18&31;$p(s,u,ae[J+257]),u+=Ne[J+257],J>7&&(tc(s,u,se>>23&31),u+=dS[J]);var je=se&31;$p(s,u,K[je]),u+=Q[je],je>3&&($p(s,u,se>>5&8191),u+=uS[je])}else $p(s,u,ae[se]),u+=Ne[se]}return $p(s,u,ae[256]),u+Ne[256]},Gde=new cS([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),yz=new Go(0),Qde=function(t,s,r,n,a,i){var o=i.z||t.length,l=new Go(n+o+5*(1+Math.ceil(o/7e3))+a),c=l.subarray(n,l.length-a),d=i.l,u=(i.r||0)&7;if(s){u&&(c[0]=i.r>>3);for(var m=Gde[s-1],f=m>>13,h=m&8191,p=(1<<r)-1,g=i.p||new Ci(32768),y=i.h||new Ci(p+1),v=Math.ceil(r/3),j=2*v,w=function(qe){return(t[qe]^t[qe+1]<<v^t[qe+2]<<j)&p},_=new cS(25e3),P=new Ci(288),E=new Ci(32),L=0,T=0,M=i.i||0,F=0,k=i.w||0,D=0;M+2<o;++M){var z=w(M),W=M&32767,ue=y[z];if(g[W]=ue,y[z]=W,k<=M){var ae=o-M;if((L>7e3||F>24576)&&(ae>423||!d)){u=O6(t,c,0,_,P,E,T,F,D,M-D,u),F=L=T=0,D=M;for(var Ne=0;Ne<286;++Ne)P[Ne]=0;for(var Ne=0;Ne<30;++Ne)E[Ne]=0}var K=2,Q=0,ke=h,G=W-ue&32767;if(ae>2&&z==w(M-G))for(var I=Math.min(f,ae)-1,Z=Math.min(32767,M),J=Math.min(258,ae);G<=Z&&--ke&&W!=ue;){if(t[M+K]==t[M+K-G]){for(var se=0;se<J&&t[M+se]==t[M+se-G];++se);if(se>K){if(K=se,Q=G,se>I)break;for(var je=Math.min(G,se-2),be=0,Ne=0;Ne<je;++Ne){var q=M-G+Ne&32767,Te=g[q],Be=q-Te&32767;Be>be&&(be=Be,ue=q)}}}W=ue,ue=g[W],G+=W-ue&32767}if(Q){_[F++]=268435456|qw[K]<<18|R6[Q];var Ve=qw[K]&31,ct=R6[Q]&31;T+=dS[Ve]+uS[ct],++P[257+Ve],++E[ct],k=M+K,++L}else _[F++]=t[M],++P[t[M]]}}for(M=Math.max(M,k);M<o;++M)_[F++]=t[M],++P[t[M]];u=O6(t,c,d,_,P,E,T,F,D,M-D,u),d||(i.r=u&7|c[u/8|0]<<3,u-=7,i.h=y,i.p=g,i.i=M,i.w=k)}else{for(var M=i.w||0;M<o+d;M+=65535){var vt=M+65535;vt>=o&&(c[u/8|0]=d,vt=o),u=vz(c,u+1,t.subarray(M,vt))}i.i=o}return Yde(l,0,n+gz(u)+a)},jz=function(){var t=1,s=0;return{p:function(r){for(var n=t,a=s,i=r.length|0,o=0;o!=i;){for(var l=Math.min(o+2655,i);o<l;++o)a+=n+=r[o];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}t=n,s=a},d:function(){return t%=65521,s%=65521,(t&255)<<24|(t&65280)<<8|(s&255)<<8|s>>8}}},Zde=function(t,s,r,n,a){if(!a&&(a={l:1},s.dictionary)){var i=s.dictionary.subarray(-32768),o=new Go(i.length+t.length);o.set(i),o.set(t,i.length),t=o,a.w=i.length}return Qde(t,s.level==null?6:s.level,s.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+s.mem,r,n,a)},bz=function(t,s,r){for(;r;++s)t[s]=r,r>>>=8},Xde=function(t,s){var r=s.level,n=r==0?0:r<6?1:r==9?3:2;if(t[0]=120,t[1]=n<<6|(s.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,s.dictionary){var a=jz();a.p(s.dictionary),bz(t,2,a.d())}};function Ww(t,s){s||(s={});var r=jz();r.p(t);var n=Zde(t,s,s.dictionary?6:2,4);return Xde(n,s),bz(n,n.length-4,r.d()),n}var Jde=typeof TextDecoder<"u"&&new TextDecoder,eue=0;try{Jde.decode(yz,{stream:!0}),eue=1}catch{}function tue(t){if(Array.isArray(t))return t}function sue(t,s){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(t)).next,s!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==s);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function $6(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,n=Array(s);r<s;r++)n[r]=t[r];return n}function rue(t,s){if(t){if(typeof t=="string")return $6(t,s);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$6(t,s):void 0}}function nue(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function B6(t,s){return tue(t)||sue(t,s)||rue(t,s)||nue()}function U6(t,s="utf8"){return new TextDecoder(s).decode(t)}const aue=new TextEncoder;function iue(t){return aue.encode(t)}const oue=1024*8,lue=(()=>{const t=new Uint8Array(4),s=new Uint32Array(t.buffer);return!((s[0]=1)&t[0])})(),y2={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class mS{constructor(s=oue,r={}){_e(this,"buffer");_e(this,"byteLength");_e(this,"byteOffset");_e(this,"length");_e(this,"offset");_e(this,"lastWrittenByte");_e(this,"littleEndian");_e(this,"_data");_e(this,"_mark");_e(this,"_marks");let n=!1;typeof s=="number"?s=new ArrayBuffer(s):(n=!0,this.lastWrittenByte=s.byteLength);const a=r.offset?r.offset>>>0:0,i=s.byteLength-a;let o=a;(ArrayBuffer.isView(s)||s instanceof mS)&&(s.byteLength!==s.buffer.byteLength&&(o=s.byteOffset+a),s=s.buffer),n?this.lastWrittenByte=i:this.lastWrittenByte=0,this.buffer=s,this.length=i,this.byteLength=i,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,i),this._mark=0,this._marks=[]}available(s=1){return this.offset+s<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(s=1){return this.offset+=s,this}back(s=1){return this.offset-=s,this}seek(s){return this.offset=s,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const s=this._marks.pop();if(s===void 0)throw new Error("Mark stack empty");return this.seek(s),this}rewind(){return this.offset=0,this}ensureAvailable(s=1){if(!this.available(s)){const n=(this.offset+s)*2,a=new Uint8Array(n);a.set(new Uint8Array(this.buffer)),this.buffer=a.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(s=1){return this.readArray(s,"uint8")}readArray(s,r){const n=y2[r].BYTES_PER_ELEMENT*s,a=this.byteOffset+this.offset,i=this.buffer.slice(a,a+n);if(this.littleEndian===lue&&r!=="uint8"&&r!=="int8"){const l=new Uint8Array(this.buffer.slice(a,a+n));l.reverse();const c=new y2[r](l.buffer);return this.offset+=n,c.reverse(),c}const o=new y2[r](i);return this.offset+=n,o}readInt16(){const s=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,s}readUint16(){const s=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,s}readInt32(){const s=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,s}readUint32(){const s=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,s}readFloat32(){const s=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,s}readFloat64(){const s=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,s}readBigInt64(){const s=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,s}readBigUint64(){const s=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,s}readChar(){return String.fromCharCode(this.readInt8())}readChars(s=1){let r="";for(let n=0;n<s;n++)r+=this.readChar();return r}readUtf8(s=1){return U6(this.readBytes(s))}decodeText(s=1,r="utf8"){return U6(this.readBytes(s),r)}writeBoolean(s){return this.writeUint8(s?255:0),this}writeInt8(s){return this.ensureAvailable(1),this._data.setInt8(this.offset++,s),this._updateLastWrittenByte(),this}writeUint8(s){return this.ensureAvailable(1),this._data.setUint8(this.offset++,s),this._updateLastWrittenByte(),this}writeByte(s){return this.writeUint8(s)}writeBytes(s){this.ensureAvailable(s.length);for(let r=0;r<s.length;r++)this._data.setUint8(this.offset++,s[r]);return this._updateLastWrittenByte(),this}writeInt16(s){return this.ensureAvailable(2),this._data.setInt16(this.offset,s,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(s){return this.ensureAvailable(2),this._data.setUint16(this.offset,s,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(s){return this.ensureAvailable(4),this._data.setInt32(this.offset,s,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(s){return this.ensureAvailable(4),this._data.setUint32(this.offset,s,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(s){return this.ensureAvailable(4),this._data.setFloat32(this.offset,s,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(s){return this.ensureAvailable(8),this._data.setFloat64(this.offset,s,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(s){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,s,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(s){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,s,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(s){return this.writeUint8(s.charCodeAt(0))}writeChars(s){for(let r=0;r<s.length;r++)this.writeUint8(s.charCodeAt(r));return this}writeUtf8(s){return this.writeBytes(iue(s))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const cue=4,z6=0,q6=1,due=2;function qf(t){let s=t.length;for(;--s>=0;)t[s]=0}const uue=0,Nz=1,mue=2,hue=3,fue=258,hS=29,qg=256,lg=qg+1+hS,Lh=30,fS=19,wz=2*lg+1,$u=15,j2=16,pue=7,pS=256,_z=16,Sz=17,Cz=18,Kw=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Gy=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),xue=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),kz=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),gue=512,cc=new Array((lg+2)*2);qf(cc);const fx=new Array(Lh*2);qf(fx);const cg=new Array(gue);qf(cg);const dg=new Array(fue-hue+1);qf(dg);const xS=new Array(hS);qf(xS);const p1=new Array(Lh);qf(p1);function b2(t,s,r,n,a){this.static_tree=t,this.extra_bits=s,this.extra_base=r,this.elems=n,this.max_length=a,this.has_stree=t&&t.length}let Az,Pz,Ez;function N2(t,s){this.dyn_tree=t,this.max_code=0,this.stat_desc=s}const Tz=t=>t<256?cg[t]:cg[256+(t>>>7)],ug=(t,s)=>{t.pending_buf[t.pending++]=s&255,t.pending_buf[t.pending++]=s>>>8&255},Xa=(t,s,r)=>{t.bi_valid>j2-r?(t.bi_buf|=s<<t.bi_valid&65535,ug(t,t.bi_buf),t.bi_buf=s>>j2-t.bi_valid,t.bi_valid+=r-j2):(t.bi_buf|=s<<t.bi_valid&65535,t.bi_valid+=r)},gl=(t,s,r)=>{Xa(t,r[s*2],r[s*2+1])},Mz=(t,s)=>{let r=0;do r|=t&1,t>>>=1,r<<=1;while(--s>0);return r>>>1},vue=t=>{t.bi_valid===16?(ug(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=t.bi_buf&255,t.bi_buf>>=8,t.bi_valid-=8)},yue=(t,s)=>{const r=s.dyn_tree,n=s.max_code,a=s.stat_desc.static_tree,i=s.stat_desc.has_stree,o=s.stat_desc.extra_bits,l=s.stat_desc.extra_base,c=s.stat_desc.max_length;let d,u,m,f,h,p,g=0;for(f=0;f<=$u;f++)t.bl_count[f]=0;for(r[t.heap[t.heap_max]*2+1]=0,d=t.heap_max+1;d<wz;d++)u=t.heap[d],f=r[r[u*2+1]*2+1]+1,f>c&&(f=c,g++),r[u*2+1]=f,!(u>n)&&(t.bl_count[f]++,h=0,u>=l&&(h=o[u-l]),p=r[u*2],t.opt_len+=p*(f+h),i&&(t.static_len+=p*(a[u*2+1]+h)));if(g!==0){do{for(f=c-1;t.bl_count[f]===0;)f--;t.bl_count[f]--,t.bl_count[f+1]+=2,t.bl_count[c]--,g-=2}while(g>0);for(f=c;f!==0;f--)for(u=t.bl_count[f];u!==0;)m=t.heap[--d],!(m>n)&&(r[m*2+1]!==f&&(t.opt_len+=(f-r[m*2+1])*r[m*2],r[m*2+1]=f),u--)}},Lz=(t,s,r)=>{const n=new Array($u+1);let a=0,i,o;for(i=1;i<=$u;i++)a=a+r[i-1]<<1,n[i]=a;for(o=0;o<=s;o++){let l=t[o*2+1];l!==0&&(t[o*2]=Mz(n[l]++,l))}},jue=()=>{let t,s,r,n,a;const i=new Array($u+1);for(r=0,n=0;n<hS-1;n++)for(xS[n]=r,t=0;t<1<<Kw[n];t++)dg[r++]=n;for(dg[r-1]=n,a=0,n=0;n<16;n++)for(p1[n]=a,t=0;t<1<<Gy[n];t++)cg[a++]=n;for(a>>=7;n<Lh;n++)for(p1[n]=a<<7,t=0;t<1<<Gy[n]-7;t++)cg[256+a++]=n;for(s=0;s<=$u;s++)i[s]=0;for(t=0;t<=143;)cc[t*2+1]=8,t++,i[8]++;for(;t<=255;)cc[t*2+1]=9,t++,i[9]++;for(;t<=279;)cc[t*2+1]=7,t++,i[7]++;for(;t<=287;)cc[t*2+1]=8,t++,i[8]++;for(Lz(cc,lg+1,i),t=0;t<Lh;t++)fx[t*2+1]=5,fx[t*2]=Mz(t,5);Az=new b2(cc,Kw,qg+1,lg,$u),Pz=new b2(fx,Gy,0,Lh,$u),Ez=new b2(new Array(0),xue,0,fS,pue)},Dz=t=>{let s;for(s=0;s<lg;s++)t.dyn_ltree[s*2]=0;for(s=0;s<Lh;s++)t.dyn_dtree[s*2]=0;for(s=0;s<fS;s++)t.bl_tree[s*2]=0;t.dyn_ltree[pS*2]=1,t.opt_len=t.static_len=0,t.sym_next=t.matches=0},Iz=t=>{t.bi_valid>8?ug(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},V6=(t,s,r,n)=>{const a=s*2,i=r*2;return t[a]<t[i]||t[a]===t[i]&&n[s]<=n[r]},w2=(t,s,r)=>{const n=t.heap[r];let a=r<<1;for(;a<=t.heap_len&&(a<t.heap_len&&V6(s,t.heap[a+1],t.heap[a],t.depth)&&a++,!V6(s,n,t.heap[a],t.depth));)t.heap[r]=t.heap[a],r=a,a<<=1;t.heap[r]=n},H6=(t,s,r)=>{let n,a,i=0,o,l;if(t.sym_next!==0)do n=t.pending_buf[t.sym_buf+i++]&255,n+=(t.pending_buf[t.sym_buf+i++]&255)<<8,a=t.pending_buf[t.sym_buf+i++],n===0?gl(t,a,s):(o=dg[a],gl(t,o+qg+1,s),l=Kw[o],l!==0&&(a-=xS[o],Xa(t,a,l)),n--,o=Tz(n),gl(t,o,r),l=Gy[o],l!==0&&(n-=p1[o],Xa(t,n,l)));while(i<t.sym_next);gl(t,pS,s)},Yw=(t,s)=>{const r=s.dyn_tree,n=s.stat_desc.static_tree,a=s.stat_desc.has_stree,i=s.stat_desc.elems;let o,l,c=-1,d;for(t.heap_len=0,t.heap_max=wz,o=0;o<i;o++)r[o*2]!==0?(t.heap[++t.heap_len]=c=o,t.depth[o]=0):r[o*2+1]=0;for(;t.heap_len<2;)d=t.heap[++t.heap_len]=c<2?++c:0,r[d*2]=1,t.depth[d]=0,t.opt_len--,a&&(t.static_len-=n[d*2+1]);for(s.max_code=c,o=t.heap_len>>1;o>=1;o--)w2(t,r,o);d=i;do o=t.heap[1],t.heap[1]=t.heap[t.heap_len--],w2(t,r,1),l=t.heap[1],t.heap[--t.heap_max]=o,t.heap[--t.heap_max]=l,r[d*2]=r[o*2]+r[l*2],t.depth[d]=(t.depth[o]>=t.depth[l]?t.depth[o]:t.depth[l])+1,r[o*2+1]=r[l*2+1]=d,t.heap[1]=d++,w2(t,r,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],yue(t,s),Lz(r,c,t.bl_count)},W6=(t,s,r)=>{let n,a=-1,i,o=s[0*2+1],l=0,c=7,d=4;for(o===0&&(c=138,d=3),s[(r+1)*2+1]=65535,n=0;n<=r;n++)i=o,o=s[(n+1)*2+1],!(++l<c&&i===o)&&(l<d?t.bl_tree[i*2]+=l:i!==0?(i!==a&&t.bl_tree[i*2]++,t.bl_tree[_z*2]++):l<=10?t.bl_tree[Sz*2]++:t.bl_tree[Cz*2]++,l=0,a=i,o===0?(c=138,d=3):i===o?(c=6,d=3):(c=7,d=4))},K6=(t,s,r)=>{let n,a=-1,i,o=s[0*2+1],l=0,c=7,d=4;for(o===0&&(c=138,d=3),n=0;n<=r;n++)if(i=o,o=s[(n+1)*2+1],!(++l<c&&i===o)){if(l<d)do gl(t,i,t.bl_tree);while(--l!==0);else i!==0?(i!==a&&(gl(t,i,t.bl_tree),l--),gl(t,_z,t.bl_tree),Xa(t,l-3,2)):l<=10?(gl(t,Sz,t.bl_tree),Xa(t,l-3,3)):(gl(t,Cz,t.bl_tree),Xa(t,l-11,7));l=0,a=i,o===0?(c=138,d=3):i===o?(c=6,d=3):(c=7,d=4)}},bue=t=>{let s;for(W6(t,t.dyn_ltree,t.l_desc.max_code),W6(t,t.dyn_dtree,t.d_desc.max_code),Yw(t,t.bl_desc),s=fS-1;s>=3&&t.bl_tree[kz[s]*2+1]===0;s--);return t.opt_len+=3*(s+1)+5+5+4,s},Nue=(t,s,r,n)=>{let a;for(Xa(t,s-257,5),Xa(t,r-1,5),Xa(t,n-4,4),a=0;a<n;a++)Xa(t,t.bl_tree[kz[a]*2+1],3);K6(t,t.dyn_ltree,s-1),K6(t,t.dyn_dtree,r-1)},wue=t=>{let s=4093624447,r;for(r=0;r<=31;r++,s>>>=1)if(s&1&&t.dyn_ltree[r*2]!==0)return z6;if(t.dyn_ltree[9*2]!==0||t.dyn_ltree[10*2]!==0||t.dyn_ltree[13*2]!==0)return q6;for(r=32;r<qg;r++)if(t.dyn_ltree[r*2]!==0)return q6;return z6};let Y6=!1;const _ue=t=>{Y6||(jue(),Y6=!0),t.l_desc=new N2(t.dyn_ltree,Az),t.d_desc=new N2(t.dyn_dtree,Pz),t.bl_desc=new N2(t.bl_tree,Ez),t.bi_buf=0,t.bi_valid=0,Dz(t)},Rz=(t,s,r,n)=>{Xa(t,(uue<<1)+(n?1:0),3),Iz(t),ug(t,r),ug(t,~r),r&&t.pending_buf.set(t.window.subarray(s,s+r),t.pending),t.pending+=r},Sue=t=>{Xa(t,Nz<<1,3),gl(t,pS,cc),vue(t)},Cue=(t,s,r,n)=>{let a,i,o=0;t.level>0?(t.strm.data_type===due&&(t.strm.data_type=wue(t)),Yw(t,t.l_desc),Yw(t,t.d_desc),o=bue(t),a=t.opt_len+3+7>>>3,i=t.static_len+3+7>>>3,i<=a&&(a=i)):a=i=r+5,r+4<=a&&s!==-1?Rz(t,s,r,n):t.strategy===cue||i===a?(Xa(t,(Nz<<1)+(n?1:0),3),H6(t,cc,fx)):(Xa(t,(mue<<1)+(n?1:0),3),Nue(t,t.l_desc.max_code+1,t.d_desc.max_code+1,o+1),H6(t,t.dyn_ltree,t.dyn_dtree)),Dz(t),n&&Iz(t)},kue=(t,s,r)=>(t.pending_buf[t.sym_buf+t.sym_next++]=s,t.pending_buf[t.sym_buf+t.sym_next++]=s>>8,t.pending_buf[t.sym_buf+t.sym_next++]=r,s===0?t.dyn_ltree[r*2]++:(t.matches++,s--,t.dyn_ltree[(dg[r]+qg+1)*2]++,t.dyn_dtree[Tz(s)*2]++),t.sym_next===t.sym_end);var Aue=_ue,Pue=Rz,Eue=Cue,Tue=kue,Mue=Sue,Lue={_tr_init:Aue,_tr_stored_block:Pue,_tr_flush_block:Eue,_tr_tally:Tue,_tr_align:Mue};const Due=(t,s,r,n)=>{let a=t&65535|0,i=t>>>16&65535|0,o=0;for(;r!==0;){o=r>2e3?2e3:r,r-=o;do a=a+s[n++]|0,i=i+a|0;while(--o);a%=65521,i%=65521}return a|i<<16|0};var mg=Due;const Iue=()=>{let t,s=[];for(var r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=t&1?3988292384^t>>>1:t>>>1;s[r]=t}return s},Rue=new Uint32Array(Iue()),Fue=(t,s,r,n)=>{const a=Rue,i=n+r;t^=-1;for(let o=n;o<i;o++)t=t>>>8^a[(t^s[o])&255];return t^-1};var Rn=Fue,jf={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Vg={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:Oue,_tr_stored_block:Gw,_tr_flush_block:$ue,_tr_tally:Md,_tr_align:Bue}=Lue,{Z_NO_FLUSH:Ld,Z_PARTIAL_FLUSH:Uue,Z_FULL_FLUSH:zue,Z_FINISH:eo,Z_BLOCK:G6,Z_OK:Zn,Z_STREAM_END:Q6,Z_STREAM_ERROR:Cl,Z_DATA_ERROR:que,Z_BUF_ERROR:_2,Z_DEFAULT_COMPRESSION:Vue,Z_FILTERED:Hue,Z_HUFFMAN_ONLY:ly,Z_RLE:Wue,Z_FIXED:Kue,Z_DEFAULT_STRATEGY:Yue,Z_UNKNOWN:Gue,Z_DEFLATED:Sj}=Vg,Que=9,Zue=15,Xue=8,Jue=29,eme=256,Qw=eme+1+Jue,tme=30,sme=19,rme=2*Qw+1,nme=15,Vs=3,yd=258,kl=yd+Vs+1,ame=32,bf=42,gS=57,Zw=69,Xw=73,Jw=91,e5=103,Bu=113,Qp=666,Ma=1,Vf=2,xm=3,Hf=4,ime=3,Uu=(t,s)=>(t.msg=jf[s],s),Z6=t=>t*2-(t>4?9:0),od=t=>{let s=t.length;for(;--s>=0;)t[s]=0},ome=t=>{let s,r,n,a=t.w_size;s=t.hash_size,n=s;do r=t.head[--n],t.head[n]=r>=a?r-a:0;while(--s);s=a,n=s;do r=t.prev[--n],t.prev[n]=r>=a?r-a:0;while(--s)};let lme=(t,s,r)=>(s<<t.hash_shift^r)&t.hash_mask,Dd=lme;const pi=t=>{const s=t.state;let r=s.pending;r>t.avail_out&&(r=t.avail_out),r!==0&&(t.output.set(s.pending_buf.subarray(s.pending_out,s.pending_out+r),t.next_out),t.next_out+=r,s.pending_out+=r,t.total_out+=r,t.avail_out-=r,s.pending-=r,s.pending===0&&(s.pending_out=0))},ki=(t,s)=>{$ue(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,s),t.block_start=t.strstart,pi(t.strm)},er=(t,s)=>{t.pending_buf[t.pending++]=s},Up=(t,s)=>{t.pending_buf[t.pending++]=s>>>8&255,t.pending_buf[t.pending++]=s&255},t5=(t,s,r,n)=>{let a=t.avail_in;return a>n&&(a=n),a===0?0:(t.avail_in-=a,s.set(t.input.subarray(t.next_in,t.next_in+a),r),t.state.wrap===1?t.adler=mg(t.adler,s,a,r):t.state.wrap===2&&(t.adler=Rn(t.adler,s,a,r)),t.next_in+=a,t.total_in+=a,a)},Fz=(t,s)=>{let r=t.max_chain_length,n=t.strstart,a,i,o=t.prev_length,l=t.nice_match;const c=t.strstart>t.w_size-kl?t.strstart-(t.w_size-kl):0,d=t.window,u=t.w_mask,m=t.prev,f=t.strstart+yd;let h=d[n+o-1],p=d[n+o];t.prev_length>=t.good_match&&(r>>=2),l>t.lookahead&&(l=t.lookahead);do if(a=s,!(d[a+o]!==p||d[a+o-1]!==h||d[a]!==d[n]||d[++a]!==d[n+1])){n+=2,a++;do;while(d[++n]===d[++a]&&d[++n]===d[++a]&&d[++n]===d[++a]&&d[++n]===d[++a]&&d[++n]===d[++a]&&d[++n]===d[++a]&&d[++n]===d[++a]&&d[++n]===d[++a]&&n<f);if(i=yd-(f-n),n=f-yd,i>o){if(t.match_start=s,o=i,i>=l)break;h=d[n+o-1],p=d[n+o]}}while((s=m[s&u])>c&&--r!==0);return o<=t.lookahead?o:t.lookahead},Nf=t=>{const s=t.w_size;let r,n,a;do{if(n=t.window_size-t.lookahead-t.strstart,t.strstart>=s+(s-kl)&&(t.window.set(t.window.subarray(s,s+s-n),0),t.match_start-=s,t.strstart-=s,t.block_start-=s,t.insert>t.strstart&&(t.insert=t.strstart),ome(t),n+=s),t.strm.avail_in===0)break;if(r=t5(t.strm,t.window,t.strstart+t.lookahead,n),t.lookahead+=r,t.lookahead+t.insert>=Vs)for(a=t.strstart-t.insert,t.ins_h=t.window[a],t.ins_h=Dd(t,t.ins_h,t.window[a+1]);t.insert&&(t.ins_h=Dd(t,t.ins_h,t.window[a+Vs-1]),t.prev[a&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=a,a++,t.insert--,!(t.lookahead+t.insert<Vs)););}while(t.lookahead<kl&&t.strm.avail_in!==0)},Oz=(t,s)=>{let r=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5,n,a,i,o=0,l=t.strm.avail_in;do{if(n=65535,i=t.bi_valid+42>>3,t.strm.avail_out<i||(i=t.strm.avail_out-i,a=t.strstart-t.block_start,n>a+t.strm.avail_in&&(n=a+t.strm.avail_in),n>i&&(n=i),n<r&&(n===0&&s!==eo||s===Ld||n!==a+t.strm.avail_in)))break;o=s===eo&&n===a+t.strm.avail_in?1:0,Gw(t,0,0,o),t.pending_buf[t.pending-4]=n,t.pending_buf[t.pending-3]=n>>8,t.pending_buf[t.pending-2]=~n,t.pending_buf[t.pending-1]=~n>>8,pi(t.strm),a&&(a>n&&(a=n),t.strm.output.set(t.window.subarray(t.block_start,t.block_start+a),t.strm.next_out),t.strm.next_out+=a,t.strm.avail_out-=a,t.strm.total_out+=a,t.block_start+=a,n-=a),n&&(t5(t.strm,t.strm.output,t.strm.next_out,n),t.strm.next_out+=n,t.strm.avail_out-=n,t.strm.total_out+=n)}while(o===0);return l-=t.strm.avail_in,l&&(l>=t.w_size?(t.matches=2,t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0),t.strstart=t.w_size,t.insert=t.strstart):(t.window_size-t.strstart<=l&&(t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,t.insert>t.strstart&&(t.insert=t.strstart)),t.window.set(t.strm.input.subarray(t.strm.next_in-l,t.strm.next_in),t.strstart),t.strstart+=l,t.insert+=l>t.w_size-t.insert?t.w_size-t.insert:l),t.block_start=t.strstart),t.high_water<t.strstart&&(t.high_water=t.strstart),o?Hf:s!==Ld&&s!==eo&&t.strm.avail_in===0&&t.strstart===t.block_start?Vf:(i=t.window_size-t.strstart,t.strm.avail_in>i&&t.block_start>=t.w_size&&(t.block_start-=t.w_size,t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,i+=t.w_size,t.insert>t.strstart&&(t.insert=t.strstart)),i>t.strm.avail_in&&(i=t.strm.avail_in),i&&(t5(t.strm,t.window,t.strstart,i),t.strstart+=i,t.insert+=i>t.w_size-t.insert?t.w_size-t.insert:i),t.high_water<t.strstart&&(t.high_water=t.strstart),i=t.bi_valid+42>>3,i=t.pending_buf_size-i>65535?65535:t.pending_buf_size-i,r=i>t.w_size?t.w_size:i,a=t.strstart-t.block_start,(a>=r||(a||s===eo)&&s!==Ld&&t.strm.avail_in===0&&a<=i)&&(n=a>i?i:a,o=s===eo&&t.strm.avail_in===0&&n===a?1:0,Gw(t,t.block_start,n,o),t.block_start+=n,pi(t.strm)),o?xm:Ma)},S2=(t,s)=>{let r,n;for(;;){if(t.lookahead<kl){if(Nf(t),t.lookahead<kl&&s===Ld)return Ma;if(t.lookahead===0)break}if(r=0,t.lookahead>=Vs&&(t.ins_h=Dd(t,t.ins_h,t.window[t.strstart+Vs-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),r!==0&&t.strstart-r<=t.w_size-kl&&(t.match_length=Fz(t,r)),t.match_length>=Vs)if(n=Md(t,t.strstart-t.match_start,t.match_length-Vs),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=Vs){t.match_length--;do t.strstart++,t.ins_h=Dd(t,t.ins_h,t.window[t.strstart+Vs-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(--t.match_length!==0);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=Dd(t,t.ins_h,t.window[t.strstart+1]);else n=Md(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(ki(t,!1),t.strm.avail_out===0))return Ma}return t.insert=t.strstart<Vs-1?t.strstart:Vs-1,s===eo?(ki(t,!0),t.strm.avail_out===0?xm:Hf):t.sym_next&&(ki(t,!1),t.strm.avail_out===0)?Ma:Vf},Ym=(t,s)=>{let r,n,a;for(;;){if(t.lookahead<kl){if(Nf(t),t.lookahead<kl&&s===Ld)return Ma;if(t.lookahead===0)break}if(r=0,t.lookahead>=Vs&&(t.ins_h=Dd(t,t.ins_h,t.window[t.strstart+Vs-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=Vs-1,r!==0&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-kl&&(t.match_length=Fz(t,r),t.match_length<=5&&(t.strategy===Hue||t.match_length===Vs&&t.strstart-t.match_start>4096)&&(t.match_length=Vs-1)),t.prev_length>=Vs&&t.match_length<=t.prev_length){a=t.strstart+t.lookahead-Vs,n=Md(t,t.strstart-1-t.prev_match,t.prev_length-Vs),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=a&&(t.ins_h=Dd(t,t.ins_h,t.window[t.strstart+Vs-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(--t.prev_length!==0);if(t.match_available=0,t.match_length=Vs-1,t.strstart++,n&&(ki(t,!1),t.strm.avail_out===0))return Ma}else if(t.match_available){if(n=Md(t,0,t.window[t.strstart-1]),n&&ki(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return Ma}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=Md(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<Vs-1?t.strstart:Vs-1,s===eo?(ki(t,!0),t.strm.avail_out===0?xm:Hf):t.sym_next&&(ki(t,!1),t.strm.avail_out===0)?Ma:Vf},cme=(t,s)=>{let r,n,a,i;const o=t.window;for(;;){if(t.lookahead<=yd){if(Nf(t),t.lookahead<=yd&&s===Ld)return Ma;if(t.lookahead===0)break}if(t.match_length=0,t.lookahead>=Vs&&t.strstart>0&&(a=t.strstart-1,n=o[a],n===o[++a]&&n===o[++a]&&n===o[++a])){i=t.strstart+yd;do;while(n===o[++a]&&n===o[++a]&&n===o[++a]&&n===o[++a]&&n===o[++a]&&n===o[++a]&&n===o[++a]&&n===o[++a]&&a<i);t.match_length=yd-(i-a),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=Vs?(r=Md(t,1,t.match_length-Vs),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=Md(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(ki(t,!1),t.strm.avail_out===0))return Ma}return t.insert=0,s===eo?(ki(t,!0),t.strm.avail_out===0?xm:Hf):t.sym_next&&(ki(t,!1),t.strm.avail_out===0)?Ma:Vf},dme=(t,s)=>{let r;for(;;){if(t.lookahead===0&&(Nf(t),t.lookahead===0)){if(s===Ld)return Ma;break}if(t.match_length=0,r=Md(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(ki(t,!1),t.strm.avail_out===0))return Ma}return t.insert=0,s===eo?(ki(t,!0),t.strm.avail_out===0?xm:Hf):t.sym_next&&(ki(t,!1),t.strm.avail_out===0)?Ma:Vf};function ol(t,s,r,n,a){this.good_length=t,this.max_lazy=s,this.nice_length=r,this.max_chain=n,this.func=a}const Zp=[new ol(0,0,0,0,Oz),new ol(4,4,8,4,S2),new ol(4,5,16,8,S2),new ol(4,6,32,32,S2),new ol(4,4,16,16,Ym),new ol(8,16,32,32,Ym),new ol(8,16,128,128,Ym),new ol(8,32,128,256,Ym),new ol(32,128,258,1024,Ym),new ol(32,258,258,4096,Ym)],ume=t=>{t.window_size=2*t.w_size,od(t.head),t.max_lazy_match=Zp[t.level].max_lazy,t.good_match=Zp[t.level].good_length,t.nice_match=Zp[t.level].nice_length,t.max_chain_length=Zp[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=Vs-1,t.match_available=0,t.ins_h=0};function mme(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Sj,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(rme*2),this.dyn_dtree=new Uint16Array((2*tme+1)*2),this.bl_tree=new Uint16Array((2*sme+1)*2),od(this.dyn_ltree),od(this.dyn_dtree),od(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(nme+1),this.heap=new Uint16Array(2*Qw+1),od(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*Qw+1),od(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Hg=t=>{if(!t)return 1;const s=t.state;return!s||s.strm!==t||s.status!==bf&&s.status!==gS&&s.status!==Zw&&s.status!==Xw&&s.status!==Jw&&s.status!==e5&&s.status!==Bu&&s.status!==Qp?1:0},$z=t=>{if(Hg(t))return Uu(t,Cl);t.total_in=t.total_out=0,t.data_type=Gue;const s=t.state;return s.pending=0,s.pending_out=0,s.wrap<0&&(s.wrap=-s.wrap),s.status=s.wrap===2?gS:s.wrap?bf:Bu,t.adler=s.wrap===2?0:1,s.last_flush=-2,Oue(s),Zn},Bz=t=>{const s=$z(t);return s===Zn&&ume(t.state),s},hme=(t,s)=>Hg(t)||t.state.wrap!==2?Cl:(t.state.gzhead=s,Zn),Uz=(t,s,r,n,a,i)=>{if(!t)return Cl;let o=1;if(s===Vue&&(s=6),n<0?(o=0,n=-n):n>15&&(o=2,n-=16),a<1||a>Que||r!==Sj||n<8||n>15||s<0||s>9||i<0||i>Kue||n===8&&o!==1)return Uu(t,Cl);n===8&&(n=9);const l=new mme;return t.state=l,l.strm=t,l.status=bf,l.wrap=o,l.gzhead=null,l.w_bits=n,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=a+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+Vs-1)/Vs),l.window=new Uint8Array(l.w_size*2),l.head=new Uint16Array(l.hash_size),l.prev=new Uint16Array(l.w_size),l.lit_bufsize=1<<a+6,l.pending_buf_size=l.lit_bufsize*4,l.pending_buf=new Uint8Array(l.pending_buf_size),l.sym_buf=l.lit_bufsize,l.sym_end=(l.lit_bufsize-1)*3,l.level=s,l.strategy=i,l.method=r,Bz(t)},fme=(t,s)=>Uz(t,s,Sj,Zue,Xue,Yue),pme=(t,s)=>{if(Hg(t)||s>G6||s<0)return t?Uu(t,Cl):Cl;const r=t.state;if(!t.output||t.avail_in!==0&&!t.input||r.status===Qp&&s!==eo)return Uu(t,t.avail_out===0?_2:Cl);const n=r.last_flush;if(r.last_flush=s,r.pending!==0){if(pi(t),t.avail_out===0)return r.last_flush=-1,Zn}else if(t.avail_in===0&&Z6(s)<=Z6(n)&&s!==eo)return Uu(t,_2);if(r.status===Qp&&t.avail_in!==0)return Uu(t,_2);if(r.status===bf&&r.wrap===0&&(r.status=Bu),r.status===bf){let a=Sj+(r.w_bits-8<<4)<<8,i=-1;if(r.strategy>=ly||r.level<2?i=0:r.level<6?i=1:r.level===6?i=2:i=3,a|=i<<6,r.strstart!==0&&(a|=ame),a+=31-a%31,Up(r,a),r.strstart!==0&&(Up(r,t.adler>>>16),Up(r,t.adler&65535)),t.adler=1,r.status=Bu,pi(t),r.pending!==0)return r.last_flush=-1,Zn}if(r.status===gS){if(t.adler=0,er(r,31),er(r,139),er(r,8),r.gzhead)er(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),er(r,r.gzhead.time&255),er(r,r.gzhead.time>>8&255),er(r,r.gzhead.time>>16&255),er(r,r.gzhead.time>>24&255),er(r,r.level===9?2:r.strategy>=ly||r.level<2?4:0),er(r,r.gzhead.os&255),r.gzhead.extra&&r.gzhead.extra.length&&(er(r,r.gzhead.extra.length&255),er(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=Rn(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=Zw;else if(er(r,0),er(r,0),er(r,0),er(r,0),er(r,0),er(r,r.level===9?2:r.strategy>=ly||r.level<2?4:0),er(r,ime),r.status=Bu,pi(t),r.pending!==0)return r.last_flush=-1,Zn}if(r.status===Zw){if(r.gzhead.extra){let a=r.pending,i=(r.gzhead.extra.length&65535)-r.gzindex;for(;r.pending+i>r.pending_buf_size;){let l=r.pending_buf_size-r.pending;if(r.pending_buf.set(r.gzhead.extra.subarray(r.gzindex,r.gzindex+l),r.pending),r.pending=r.pending_buf_size,r.gzhead.hcrc&&r.pending>a&&(t.adler=Rn(t.adler,r.pending_buf,r.pending-a,a)),r.gzindex+=l,pi(t),r.pending!==0)return r.last_flush=-1,Zn;a=0,i-=l}let o=new Uint8Array(r.gzhead.extra);r.pending_buf.set(o.subarray(r.gzindex,r.gzindex+i),r.pending),r.pending+=i,r.gzhead.hcrc&&r.pending>a&&(t.adler=Rn(t.adler,r.pending_buf,r.pending-a,a)),r.gzindex=0}r.status=Xw}if(r.status===Xw){if(r.gzhead.name){let a=r.pending,i;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>a&&(t.adler=Rn(t.adler,r.pending_buf,r.pending-a,a)),pi(t),r.pending!==0)return r.last_flush=-1,Zn;a=0}r.gzindex<r.gzhead.name.length?i=r.gzhead.name.charCodeAt(r.gzindex++)&255:i=0,er(r,i)}while(i!==0);r.gzhead.hcrc&&r.pending>a&&(t.adler=Rn(t.adler,r.pending_buf,r.pending-a,a)),r.gzindex=0}r.status=Jw}if(r.status===Jw){if(r.gzhead.comment){let a=r.pending,i;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>a&&(t.adler=Rn(t.adler,r.pending_buf,r.pending-a,a)),pi(t),r.pending!==0)return r.last_flush=-1,Zn;a=0}r.gzindex<r.gzhead.comment.length?i=r.gzhead.comment.charCodeAt(r.gzindex++)&255:i=0,er(r,i)}while(i!==0);r.gzhead.hcrc&&r.pending>a&&(t.adler=Rn(t.adler,r.pending_buf,r.pending-a,a))}r.status=e5}if(r.status===e5){if(r.gzhead.hcrc){if(r.pending+2>r.pending_buf_size&&(pi(t),r.pending!==0))return r.last_flush=-1,Zn;er(r,t.adler&255),er(r,t.adler>>8&255),t.adler=0}if(r.status=Bu,pi(t),r.pending!==0)return r.last_flush=-1,Zn}if(t.avail_in!==0||r.lookahead!==0||s!==Ld&&r.status!==Qp){let a=r.level===0?Oz(r,s):r.strategy===ly?dme(r,s):r.strategy===Wue?cme(r,s):Zp[r.level].func(r,s);if((a===xm||a===Hf)&&(r.status=Qp),a===Ma||a===xm)return t.avail_out===0&&(r.last_flush=-1),Zn;if(a===Vf&&(s===Uue?Bue(r):s!==G6&&(Gw(r,0,0,!1),s===zue&&(od(r.head),r.lookahead===0&&(r.strstart=0,r.block_start=0,r.insert=0))),pi(t),t.avail_out===0))return r.last_flush=-1,Zn}return s!==eo?Zn:r.wrap<=0?Q6:(r.wrap===2?(er(r,t.adler&255),er(r,t.adler>>8&255),er(r,t.adler>>16&255),er(r,t.adler>>24&255),er(r,t.total_in&255),er(r,t.total_in>>8&255),er(r,t.total_in>>16&255),er(r,t.total_in>>24&255)):(Up(r,t.adler>>>16),Up(r,t.adler&65535)),pi(t),r.wrap>0&&(r.wrap=-r.wrap),r.pending!==0?Zn:Q6)},xme=t=>{if(Hg(t))return Cl;const s=t.state.status;return t.state=null,s===Bu?Uu(t,que):Zn},gme=(t,s)=>{let r=s.length;if(Hg(t))return Cl;const n=t.state,a=n.wrap;if(a===2||a===1&&n.status!==bf||n.lookahead)return Cl;if(a===1&&(t.adler=mg(t.adler,s,r,0)),n.wrap=0,r>=n.w_size){a===0&&(od(n.head),n.strstart=0,n.block_start=0,n.insert=0);let c=new Uint8Array(n.w_size);c.set(s.subarray(r-n.w_size,r),0),s=c,r=n.w_size}const i=t.avail_in,o=t.next_in,l=t.input;for(t.avail_in=r,t.next_in=0,t.input=s,Nf(n);n.lookahead>=Vs;){let c=n.strstart,d=n.lookahead-(Vs-1);do n.ins_h=Dd(n,n.ins_h,n.window[c+Vs-1]),n.prev[c&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=c,c++;while(--d);n.strstart=c,n.lookahead=Vs-1,Nf(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=Vs-1,n.match_available=0,t.next_in=o,t.input=l,t.avail_in=i,n.wrap=a,Zn};var vme=fme,yme=Uz,jme=Bz,bme=$z,Nme=hme,wme=pme,_me=xme,Sme=gme,Cme="pako deflate (from Nodeca project)",px={deflateInit:vme,deflateInit2:yme,deflateReset:jme,deflateResetKeep:bme,deflateSetHeader:Nme,deflate:wme,deflateEnd:_me,deflateSetDictionary:Sme,deflateInfo:Cme};const kme=(t,s)=>Object.prototype.hasOwnProperty.call(t,s);var Ame=function(t){const s=Array.prototype.slice.call(arguments,1);for(;s.length;){const r=s.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)kme(r,n)&&(t[n]=r[n])}}return t},Pme=t=>{let s=0;for(let n=0,a=t.length;n<a;n++)s+=t[n].length;const r=new Uint8Array(s);for(let n=0,a=0,i=t.length;n<i;n++){let o=t[n];r.set(o,a),a+=o.length}return r},Cj={assign:Ame,flattenChunks:Pme};let zz=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{zz=!1}const hg=new Uint8Array(256);for(let t=0;t<256;t++)hg[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;hg[254]=hg[254]=1;var Eme=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let s,r,n,a,i,o=t.length,l=0;for(a=0;a<o;a++)r=t.charCodeAt(a),(r&64512)===55296&&a+1<o&&(n=t.charCodeAt(a+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),a++)),l+=r<128?1:r<2048?2:r<65536?3:4;for(s=new Uint8Array(l),i=0,a=0;i<l;a++)r=t.charCodeAt(a),(r&64512)===55296&&a+1<o&&(n=t.charCodeAt(a+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),a++)),r<128?s[i++]=r:r<2048?(s[i++]=192|r>>>6,s[i++]=128|r&63):r<65536?(s[i++]=224|r>>>12,s[i++]=128|r>>>6&63,s[i++]=128|r&63):(s[i++]=240|r>>>18,s[i++]=128|r>>>12&63,s[i++]=128|r>>>6&63,s[i++]=128|r&63);return s};const Tme=(t,s)=>{if(s<65534&&t.subarray&&zz)return String.fromCharCode.apply(null,t.length===s?t:t.subarray(0,s));let r="";for(let n=0;n<s;n++)r+=String.fromCharCode(t[n]);return r};var Mme=(t,s)=>{const r=s||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,s));let n,a;const i=new Array(r*2);for(a=0,n=0;n<r;){let o=t[n++];if(o<128){i[a++]=o;continue}let l=hg[o];if(l>4){i[a++]=65533,n+=l-1;continue}for(o&=l===2?31:l===3?15:7;l>1&&n<r;)o=o<<6|t[n++]&63,l--;if(l>1){i[a++]=65533;continue}o<65536?i[a++]=o:(o-=65536,i[a++]=55296|o>>10&1023,i[a++]=56320|o&1023)}return Tme(i,a)},Lme=(t,s)=>{s=s||t.length,s>t.length&&(s=t.length);let r=s-1;for(;r>=0&&(t[r]&192)===128;)r--;return r<0||r===0?s:r+hg[t[r]]>s?r:s},fg={string2buf:Eme,buf2string:Mme,utf8border:Lme};function Dme(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var qz=Dme;const Vz=Object.prototype.toString,{Z_NO_FLUSH:Ime,Z_SYNC_FLUSH:Rme,Z_FULL_FLUSH:Fme,Z_FINISH:Ome,Z_OK:x1,Z_STREAM_END:$me,Z_DEFAULT_COMPRESSION:Bme,Z_DEFAULT_STRATEGY:Ume,Z_DEFLATED:zme}=Vg;function vS(t){this.options=Cj.assign({level:Bme,method:zme,chunkSize:16384,windowBits:15,memLevel:8,strategy:Ume},t||{});let s=this.options;s.raw&&s.windowBits>0?s.windowBits=-s.windowBits:s.gzip&&s.windowBits>0&&s.windowBits<16&&(s.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new qz,this.strm.avail_out=0;let r=px.deflateInit2(this.strm,s.level,s.method,s.windowBits,s.memLevel,s.strategy);if(r!==x1)throw new Error(jf[r]);if(s.header&&px.deflateSetHeader(this.strm,s.header),s.dictionary){let n;if(typeof s.dictionary=="string"?n=fg.string2buf(s.dictionary):Vz.call(s.dictionary)==="[object ArrayBuffer]"?n=new Uint8Array(s.dictionary):n=s.dictionary,r=px.deflateSetDictionary(this.strm,n),r!==x1)throw new Error(jf[r]);this._dict_set=!0}}vS.prototype.push=function(t,s){const r=this.strm,n=this.options.chunkSize;let a,i;if(this.ended)return!1;for(s===~~s?i=s:i=s===!0?Ome:Ime,typeof t=="string"?r.input=fg.string2buf(t):Vz.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){if(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),(i===Rme||i===Fme)&&r.avail_out<=6){this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;continue}if(a=px.deflate(r,i),a===$me)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),a=px.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===x1;if(r.avail_out===0){this.onData(r.output);continue}if(i>0&&r.next_out>0){this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;continue}if(r.avail_in===0)break}return!0};vS.prototype.onData=function(t){this.chunks.push(t)};vS.prototype.onEnd=function(t){t===x1&&(this.result=Cj.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};const cy=16209,qme=16191;var Vme=function(s,r){let n,a,i,o,l,c,d,u,m,f,h,p,g,y,v,j,w,_,P,E,L,T,M,F;const k=s.state;n=s.next_in,M=s.input,a=n+(s.avail_in-5),i=s.next_out,F=s.output,o=i-(r-s.avail_out),l=i+(s.avail_out-257),c=k.dmax,d=k.wsize,u=k.whave,m=k.wnext,f=k.window,h=k.hold,p=k.bits,g=k.lencode,y=k.distcode,v=(1<<k.lenbits)-1,j=(1<<k.distbits)-1;e:do{p<15&&(h+=M[n++]<<p,p+=8,h+=M[n++]<<p,p+=8),w=g[h&v];t:for(;;){if(_=w>>>24,h>>>=_,p-=_,_=w>>>16&255,_===0)F[i++]=w&65535;else if(_&16){P=w&65535,_&=15,_&&(p<_&&(h+=M[n++]<<p,p+=8),P+=h&(1<<_)-1,h>>>=_,p-=_),p<15&&(h+=M[n++]<<p,p+=8,h+=M[n++]<<p,p+=8),w=y[h&j];s:for(;;){if(_=w>>>24,h>>>=_,p-=_,_=w>>>16&255,_&16){if(E=w&65535,_&=15,p<_&&(h+=M[n++]<<p,p+=8,p<_&&(h+=M[n++]<<p,p+=8)),E+=h&(1<<_)-1,E>c){s.msg="invalid distance too far back",k.mode=cy;break e}if(h>>>=_,p-=_,_=i-o,E>_){if(_=E-_,_>u&&k.sane){s.msg="invalid distance too far back",k.mode=cy;break e}if(L=0,T=f,m===0){if(L+=d-_,_<P){P-=_;do F[i++]=f[L++];while(--_);L=i-E,T=F}}else if(m<_){if(L+=d+m-_,_-=m,_<P){P-=_;do F[i++]=f[L++];while(--_);if(L=0,m<P){_=m,P-=_;do F[i++]=f[L++];while(--_);L=i-E,T=F}}}else if(L+=m-_,_<P){P-=_;do F[i++]=f[L++];while(--_);L=i-E,T=F}for(;P>2;)F[i++]=T[L++],F[i++]=T[L++],F[i++]=T[L++],P-=3;P&&(F[i++]=T[L++],P>1&&(F[i++]=T[L++]))}else{L=i-E;do F[i++]=F[L++],F[i++]=F[L++],F[i++]=F[L++],P-=3;while(P>2);P&&(F[i++]=F[L++],P>1&&(F[i++]=F[L++]))}}else if(_&64){s.msg="invalid distance code",k.mode=cy;break e}else{w=y[(w&65535)+(h&(1<<_)-1)];continue s}break}}else if(_&64)if(_&32){k.mode=qme;break e}else{s.msg="invalid literal/length code",k.mode=cy;break e}else{w=g[(w&65535)+(h&(1<<_)-1)];continue t}break}}while(n<a&&i<l);P=p>>3,n-=P,p-=P<<3,h&=(1<<p)-1,s.next_in=n,s.next_out=i,s.avail_in=n<a?5+(a-n):5-(n-a),s.avail_out=i<l?257+(l-i):257-(i-l),k.hold=h,k.bits=p};const Gm=15,X6=852,J6=592,eA=0,C2=1,tA=2,Hme=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Wme=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Kme=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Yme=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Gme=(t,s,r,n,a,i,o,l)=>{const c=l.bits;let d=0,u=0,m=0,f=0,h=0,p=0,g=0,y=0,v=0,j=0,w,_,P,E,L,T=null,M;const F=new Uint16Array(Gm+1),k=new Uint16Array(Gm+1);let D=null,z,W,ue;for(d=0;d<=Gm;d++)F[d]=0;for(u=0;u<n;u++)F[s[r+u]]++;for(h=c,f=Gm;f>=1&&F[f]===0;f--);if(h>f&&(h=f),f===0)return a[i++]=1<<24|64<<16|0,a[i++]=1<<24|64<<16|0,l.bits=1,0;for(m=1;m<f&&F[m]===0;m++);for(h<m&&(h=m),y=1,d=1;d<=Gm;d++)if(y<<=1,y-=F[d],y<0)return-1;if(y>0&&(t===eA||f!==1))return-1;for(k[1]=0,d=1;d<Gm;d++)k[d+1]=k[d]+F[d];for(u=0;u<n;u++)s[r+u]!==0&&(o[k[s[r+u]]++]=u);if(t===eA?(T=D=o,M=20):t===C2?(T=Hme,D=Wme,M=257):(T=Kme,D=Yme,M=0),j=0,u=0,d=m,L=i,p=h,g=0,P=-1,v=1<<h,E=v-1,t===C2&&v>X6||t===tA&&v>J6)return 1;for(;;){z=d-g,o[u]+1<M?(W=0,ue=o[u]):o[u]>=M?(W=D[o[u]-M],ue=T[o[u]-M]):(W=96,ue=0),w=1<<d-g,_=1<<p,m=_;do _-=w,a[L+(j>>g)+_]=z<<24|W<<16|ue|0;while(_!==0);for(w=1<<d-1;j&w;)w>>=1;if(w!==0?(j&=w-1,j+=w):j=0,u++,--F[d]===0){if(d===f)break;d=s[r+o[u]]}if(d>h&&(j&E)!==P){for(g===0&&(g=h),L+=m,p=d-g,y=1<<p;p+g<f&&(y-=F[p+g],!(y<=0));)p++,y<<=1;if(v+=1<<p,t===C2&&v>X6||t===tA&&v>J6)return 1;P=j&E,a[P]=h<<24|p<<16|L-i|0}}return j!==0&&(a[L+j]=d-g<<24|64<<16|0),l.bits=h,0};var xx=Gme;const Qme=0,Hz=1,Wz=2,{Z_FINISH:sA,Z_BLOCK:Zme,Z_TREES:dy,Z_OK:gm,Z_STREAM_END:Xme,Z_NEED_DICT:Jme,Z_STREAM_ERROR:ho,Z_DATA_ERROR:Kz,Z_MEM_ERROR:Yz,Z_BUF_ERROR:ehe,Z_DEFLATED:rA}=Vg,kj=16180,nA=16181,aA=16182,iA=16183,oA=16184,lA=16185,cA=16186,dA=16187,uA=16188,mA=16189,g1=16190,sc=16191,k2=16192,hA=16193,A2=16194,fA=16195,pA=16196,xA=16197,gA=16198,uy=16199,my=16200,vA=16201,yA=16202,jA=16203,bA=16204,NA=16205,P2=16206,wA=16207,_A=16208,Ir=16209,Gz=16210,Qz=16211,the=852,she=592,rhe=15,nhe=rhe,SA=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function ahe(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Sm=t=>{if(!t)return 1;const s=t.state;return!s||s.strm!==t||s.mode<kj||s.mode>Qz?1:0},Zz=t=>{if(Sm(t))return ho;const s=t.state;return t.total_in=t.total_out=s.total=0,t.msg="",s.wrap&&(t.adler=s.wrap&1),s.mode=kj,s.last=0,s.havedict=0,s.flags=-1,s.dmax=32768,s.head=null,s.hold=0,s.bits=0,s.lencode=s.lendyn=new Int32Array(the),s.distcode=s.distdyn=new Int32Array(she),s.sane=1,s.back=-1,gm},Xz=t=>{if(Sm(t))return ho;const s=t.state;return s.wsize=0,s.whave=0,s.wnext=0,Zz(t)},Jz=(t,s)=>{let r;if(Sm(t))return ho;const n=t.state;return s<0?(r=0,s=-s):(r=(s>>4)+5,s<48&&(s&=15)),s&&(s<8||s>15)?ho:(n.window!==null&&n.wbits!==s&&(n.window=null),n.wrap=r,n.wbits=s,Xz(t))},eq=(t,s)=>{if(!t)return ho;const r=new ahe;t.state=r,r.strm=t,r.window=null,r.mode=kj;const n=Jz(t,s);return n!==gm&&(t.state=null),n},ihe=t=>eq(t,nhe);let CA=!0,E2,T2;const ohe=t=>{if(CA){E2=new Int32Array(512),T2=new Int32Array(32);let s=0;for(;s<144;)t.lens[s++]=8;for(;s<256;)t.lens[s++]=9;for(;s<280;)t.lens[s++]=7;for(;s<288;)t.lens[s++]=8;for(xx(Hz,t.lens,0,288,E2,0,t.work,{bits:9}),s=0;s<32;)t.lens[s++]=5;xx(Wz,t.lens,0,32,T2,0,t.work,{bits:5}),CA=!1}t.lencode=E2,t.lenbits=9,t.distcode=T2,t.distbits=5},tq=(t,s,r,n)=>{let a;const i=t.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),n>=i.wsize?(i.window.set(s.subarray(r-i.wsize,r),0),i.wnext=0,i.whave=i.wsize):(a=i.wsize-i.wnext,a>n&&(a=n),i.window.set(s.subarray(r-n,r-n+a),i.wnext),n-=a,n?(i.window.set(s.subarray(r-n,r),0),i.wnext=n,i.whave=i.wsize):(i.wnext+=a,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=a))),0},lhe=(t,s)=>{let r,n,a,i,o,l,c,d,u,m,f,h,p,g,y=0,v,j,w,_,P,E,L,T;const M=new Uint8Array(4);let F,k;const D=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Sm(t)||!t.output||!t.input&&t.avail_in!==0)return ho;r=t.state,r.mode===sc&&(r.mode=k2),o=t.next_out,a=t.output,c=t.avail_out,i=t.next_in,n=t.input,l=t.avail_in,d=r.hold,u=r.bits,m=l,f=c,T=gm;e:for(;;)switch(r.mode){case kj:if(r.wrap===0){r.mode=k2;break}for(;u<16;){if(l===0)break e;l--,d+=n[i++]<<u,u+=8}if(r.wrap&2&&d===35615){r.wbits===0&&(r.wbits=15),r.check=0,M[0]=d&255,M[1]=d>>>8&255,r.check=Rn(r.check,M,2,0),d=0,u=0,r.mode=nA;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((d&255)<<8)+(d>>8))%31){t.msg="incorrect header check",r.mode=Ir;break}if((d&15)!==rA){t.msg="unknown compression method",r.mode=Ir;break}if(d>>>=4,u-=4,L=(d&15)+8,r.wbits===0&&(r.wbits=L),L>15||L>r.wbits){t.msg="invalid window size",r.mode=Ir;break}r.dmax=1<<r.wbits,r.flags=0,t.adler=r.check=1,r.mode=d&512?mA:sc,d=0,u=0;break;case nA:for(;u<16;){if(l===0)break e;l--,d+=n[i++]<<u,u+=8}if(r.flags=d,(r.flags&255)!==rA){t.msg="unknown compression method",r.mode=Ir;break}if(r.flags&57344){t.msg="unknown header flags set",r.mode=Ir;break}r.head&&(r.head.text=d>>8&1),r.flags&512&&r.wrap&4&&(M[0]=d&255,M[1]=d>>>8&255,r.check=Rn(r.check,M,2,0)),d=0,u=0,r.mode=aA;case aA:for(;u<32;){if(l===0)break e;l--,d+=n[i++]<<u,u+=8}r.head&&(r.head.time=d),r.flags&512&&r.wrap&4&&(M[0]=d&255,M[1]=d>>>8&255,M[2]=d>>>16&255,M[3]=d>>>24&255,r.check=Rn(r.check,M,4,0)),d=0,u=0,r.mode=iA;case iA:for(;u<16;){if(l===0)break e;l--,d+=n[i++]<<u,u+=8}r.head&&(r.head.xflags=d&255,r.head.os=d>>8),r.flags&512&&r.wrap&4&&(M[0]=d&255,M[1]=d>>>8&255,r.check=Rn(r.check,M,2,0)),d=0,u=0,r.mode=oA;case oA:if(r.flags&1024){for(;u<16;){if(l===0)break e;l--,d+=n[i++]<<u,u+=8}r.length=d,r.head&&(r.head.extra_len=d),r.flags&512&&r.wrap&4&&(M[0]=d&255,M[1]=d>>>8&255,r.check=Rn(r.check,M,2,0)),d=0,u=0}else r.head&&(r.head.extra=null);r.mode=lA;case lA:if(r.flags&1024&&(h=r.length,h>l&&(h=l),h&&(r.head&&(L=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(i,i+h),L)),r.flags&512&&r.wrap&4&&(r.check=Rn(r.check,n,h,i)),l-=h,i+=h,r.length-=h),r.length))break e;r.length=0,r.mode=cA;case cA:if(r.flags&2048){if(l===0)break e;h=0;do L=n[i+h++],r.head&&L&&r.length<65536&&(r.head.name+=String.fromCharCode(L));while(L&&h<l);if(r.flags&512&&r.wrap&4&&(r.check=Rn(r.check,n,h,i)),l-=h,i+=h,L)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=dA;case dA:if(r.flags&4096){if(l===0)break e;h=0;do L=n[i+h++],r.head&&L&&r.length<65536&&(r.head.comment+=String.fromCharCode(L));while(L&&h<l);if(r.flags&512&&r.wrap&4&&(r.check=Rn(r.check,n,h,i)),l-=h,i+=h,L)break e}else r.head&&(r.head.comment=null);r.mode=uA;case uA:if(r.flags&512){for(;u<16;){if(l===0)break e;l--,d+=n[i++]<<u,u+=8}if(r.wrap&4&&d!==(r.check&65535)){t.msg="header crc mismatch",r.mode=Ir;break}d=0,u=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=sc;break;case mA:for(;u<32;){if(l===0)break e;l--,d+=n[i++]<<u,u+=8}t.adler=r.check=SA(d),d=0,u=0,r.mode=g1;case g1:if(r.havedict===0)return t.next_out=o,t.avail_out=c,t.next_in=i,t.avail_in=l,r.hold=d,r.bits=u,Jme;t.adler=r.check=1,r.mode=sc;case sc:if(s===Zme||s===dy)break e;case k2:if(r.last){d>>>=u&7,u-=u&7,r.mode=P2;break}for(;u<3;){if(l===0)break e;l--,d+=n[i++]<<u,u+=8}switch(r.last=d&1,d>>>=1,u-=1,d&3){case 0:r.mode=hA;break;case 1:if(ohe(r),r.mode=uy,s===dy){d>>>=2,u-=2;break e}break;case 2:r.mode=pA;break;case 3:t.msg="invalid block type",r.mode=Ir}d>>>=2,u-=2;break;case hA:for(d>>>=u&7,u-=u&7;u<32;){if(l===0)break e;l--,d+=n[i++]<<u,u+=8}if((d&65535)!==(d>>>16^65535)){t.msg="invalid stored block lengths",r.mode=Ir;break}if(r.length=d&65535,d=0,u=0,r.mode=A2,s===dy)break e;case A2:r.mode=fA;case fA:if(h=r.length,h){if(h>l&&(h=l),h>c&&(h=c),h===0)break e;a.set(n.subarray(i,i+h),o),l-=h,i+=h,c-=h,o+=h,r.length-=h;break}r.mode=sc;break;case pA:for(;u<14;){if(l===0)break e;l--,d+=n[i++]<<u,u+=8}if(r.nlen=(d&31)+257,d>>>=5,u-=5,r.ndist=(d&31)+1,d>>>=5,u-=5,r.ncode=(d&15)+4,d>>>=4,u-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=Ir;break}r.have=0,r.mode=xA;case xA:for(;r.have<r.ncode;){for(;u<3;){if(l===0)break e;l--,d+=n[i++]<<u,u+=8}r.lens[D[r.have++]]=d&7,d>>>=3,u-=3}for(;r.have<19;)r.lens[D[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,F={bits:r.lenbits},T=xx(Qme,r.lens,0,19,r.lencode,0,r.work,F),r.lenbits=F.bits,T){t.msg="invalid code lengths set",r.mode=Ir;break}r.have=0,r.mode=gA;case gA:for(;r.have<r.nlen+r.ndist;){for(;y=r.lencode[d&(1<<r.lenbits)-1],v=y>>>24,j=y>>>16&255,w=y&65535,!(v<=u);){if(l===0)break e;l--,d+=n[i++]<<u,u+=8}if(w<16)d>>>=v,u-=v,r.lens[r.have++]=w;else{if(w===16){for(k=v+2;u<k;){if(l===0)break e;l--,d+=n[i++]<<u,u+=8}if(d>>>=v,u-=v,r.have===0){t.msg="invalid bit length repeat",r.mode=Ir;break}L=r.lens[r.have-1],h=3+(d&3),d>>>=2,u-=2}else if(w===17){for(k=v+3;u<k;){if(l===0)break e;l--,d+=n[i++]<<u,u+=8}d>>>=v,u-=v,L=0,h=3+(d&7),d>>>=3,u-=3}else{for(k=v+7;u<k;){if(l===0)break e;l--,d+=n[i++]<<u,u+=8}d>>>=v,u-=v,L=0,h=11+(d&127),d>>>=7,u-=7}if(r.have+h>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=Ir;break}for(;h--;)r.lens[r.have++]=L}}if(r.mode===Ir)break;if(r.lens[256]===0){t.msg="invalid code -- missing end-of-block",r.mode=Ir;break}if(r.lenbits=9,F={bits:r.lenbits},T=xx(Hz,r.lens,0,r.nlen,r.lencode,0,r.work,F),r.lenbits=F.bits,T){t.msg="invalid literal/lengths set",r.mode=Ir;break}if(r.distbits=6,r.distcode=r.distdyn,F={bits:r.distbits},T=xx(Wz,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,F),r.distbits=F.bits,T){t.msg="invalid distances set",r.mode=Ir;break}if(r.mode=uy,s===dy)break e;case uy:r.mode=my;case my:if(l>=6&&c>=258){t.next_out=o,t.avail_out=c,t.next_in=i,t.avail_in=l,r.hold=d,r.bits=u,Vme(t,f),o=t.next_out,a=t.output,c=t.avail_out,i=t.next_in,n=t.input,l=t.avail_in,d=r.hold,u=r.bits,r.mode===sc&&(r.back=-1);break}for(r.back=0;y=r.lencode[d&(1<<r.lenbits)-1],v=y>>>24,j=y>>>16&255,w=y&65535,!(v<=u);){if(l===0)break e;l--,d+=n[i++]<<u,u+=8}if(j&&!(j&240)){for(_=v,P=j,E=w;y=r.lencode[E+((d&(1<<_+P)-1)>>_)],v=y>>>24,j=y>>>16&255,w=y&65535,!(_+v<=u);){if(l===0)break e;l--,d+=n[i++]<<u,u+=8}d>>>=_,u-=_,r.back+=_}if(d>>>=v,u-=v,r.back+=v,r.length=w,j===0){r.mode=NA;break}if(j&32){r.back=-1,r.mode=sc;break}if(j&64){t.msg="invalid literal/length code",r.mode=Ir;break}r.extra=j&15,r.mode=vA;case vA:if(r.extra){for(k=r.extra;u<k;){if(l===0)break e;l--,d+=n[i++]<<u,u+=8}r.length+=d&(1<<r.extra)-1,d>>>=r.extra,u-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=yA;case yA:for(;y=r.distcode[d&(1<<r.distbits)-1],v=y>>>24,j=y>>>16&255,w=y&65535,!(v<=u);){if(l===0)break e;l--,d+=n[i++]<<u,u+=8}if(!(j&240)){for(_=v,P=j,E=w;y=r.distcode[E+((d&(1<<_+P)-1)>>_)],v=y>>>24,j=y>>>16&255,w=y&65535,!(_+v<=u);){if(l===0)break e;l--,d+=n[i++]<<u,u+=8}d>>>=_,u-=_,r.back+=_}if(d>>>=v,u-=v,r.back+=v,j&64){t.msg="invalid distance code",r.mode=Ir;break}r.offset=w,r.extra=j&15,r.mode=jA;case jA:if(r.extra){for(k=r.extra;u<k;){if(l===0)break e;l--,d+=n[i++]<<u,u+=8}r.offset+=d&(1<<r.extra)-1,d>>>=r.extra,u-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=Ir;break}r.mode=bA;case bA:if(c===0)break e;if(h=f-c,r.offset>h){if(h=r.offset-h,h>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=Ir;break}h>r.wnext?(h-=r.wnext,p=r.wsize-h):p=r.wnext-h,h>r.length&&(h=r.length),g=r.window}else g=a,p=o-r.offset,h=r.length;h>c&&(h=c),c-=h,r.length-=h;do a[o++]=g[p++];while(--h);r.length===0&&(r.mode=my);break;case NA:if(c===0)break e;a[o++]=r.length,c--,r.mode=my;break;case P2:if(r.wrap){for(;u<32;){if(l===0)break e;l--,d|=n[i++]<<u,u+=8}if(f-=c,t.total_out+=f,r.total+=f,r.wrap&4&&f&&(t.adler=r.check=r.flags?Rn(r.check,a,f,o-f):mg(r.check,a,f,o-f)),f=c,r.wrap&4&&(r.flags?d:SA(d))!==r.check){t.msg="incorrect data check",r.mode=Ir;break}d=0,u=0}r.mode=wA;case wA:if(r.wrap&&r.flags){for(;u<32;){if(l===0)break e;l--,d+=n[i++]<<u,u+=8}if(r.wrap&4&&d!==(r.total&4294967295)){t.msg="incorrect length check",r.mode=Ir;break}d=0,u=0}r.mode=_A;case _A:T=Xme;break e;case Ir:T=Kz;break e;case Gz:return Yz;case Qz:default:return ho}return t.next_out=o,t.avail_out=c,t.next_in=i,t.avail_in=l,r.hold=d,r.bits=u,(r.wsize||f!==t.avail_out&&r.mode<Ir&&(r.mode<P2||s!==sA))&&tq(t,t.output,t.next_out,f-t.avail_out),m-=t.avail_in,f-=t.avail_out,t.total_in+=m,t.total_out+=f,r.total+=f,r.wrap&4&&f&&(t.adler=r.check=r.flags?Rn(r.check,a,f,t.next_out-f):mg(r.check,a,f,t.next_out-f)),t.data_type=r.bits+(r.last?64:0)+(r.mode===sc?128:0)+(r.mode===uy||r.mode===A2?256:0),(m===0&&f===0||s===sA)&&T===gm&&(T=ehe),T},che=t=>{if(Sm(t))return ho;let s=t.state;return s.window&&(s.window=null),t.state=null,gm},dhe=(t,s)=>{if(Sm(t))return ho;const r=t.state;return r.wrap&2?(r.head=s,s.done=!1,gm):ho},uhe=(t,s)=>{const r=s.length;let n,a,i;return Sm(t)||(n=t.state,n.wrap!==0&&n.mode!==g1)?ho:n.mode===g1&&(a=1,a=mg(a,s,r,0),a!==n.check)?Kz:(i=tq(t,s,r,r),i?(n.mode=Gz,Yz):(n.havedict=1,gm))};var mhe=Xz,hhe=Jz,fhe=Zz,phe=ihe,xhe=eq,ghe=lhe,vhe=che,yhe=dhe,jhe=uhe,bhe="pako inflate (from Nodeca project)",dc={inflateReset:mhe,inflateReset2:hhe,inflateResetKeep:fhe,inflateInit:phe,inflateInit2:xhe,inflate:ghe,inflateEnd:vhe,inflateGetHeader:yhe,inflateSetDictionary:jhe,inflateInfo:bhe};function Nhe(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var whe=Nhe;const sq=Object.prototype.toString,{Z_NO_FLUSH:_he,Z_FINISH:She,Z_OK:pg,Z_STREAM_END:M2,Z_NEED_DICT:L2,Z_STREAM_ERROR:Che,Z_DATA_ERROR:kA,Z_MEM_ERROR:khe}=Vg;function Wg(t){this.options=Cj.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const s=this.options;s.raw&&s.windowBits>=0&&s.windowBits<16&&(s.windowBits=-s.windowBits,s.windowBits===0&&(s.windowBits=-15)),s.windowBits>=0&&s.windowBits<16&&!(t&&t.windowBits)&&(s.windowBits+=32),s.windowBits>15&&s.windowBits<48&&(s.windowBits&15||(s.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new qz,this.strm.avail_out=0;let r=dc.inflateInit2(this.strm,s.windowBits);if(r!==pg)throw new Error(jf[r]);if(this.header=new whe,dc.inflateGetHeader(this.strm,this.header),s.dictionary&&(typeof s.dictionary=="string"?s.dictionary=fg.string2buf(s.dictionary):sq.call(s.dictionary)==="[object ArrayBuffer]"&&(s.dictionary=new Uint8Array(s.dictionary)),s.raw&&(r=dc.inflateSetDictionary(this.strm,s.dictionary),r!==pg)))throw new Error(jf[r])}Wg.prototype.push=function(t,s){const r=this.strm,n=this.options.chunkSize,a=this.options.dictionary;let i,o,l;if(this.ended)return!1;for(s===~~s?o=s:o=s===!0?She:_he,sq.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),i=dc.inflate(r,o),i===L2&&a&&(i=dc.inflateSetDictionary(r,a),i===pg?i=dc.inflate(r,o):i===kA&&(i=L2));r.avail_in>0&&i===M2&&r.state.wrap>0&&t[r.next_in]!==0;)dc.inflateReset(r),i=dc.inflate(r,o);switch(i){case Che:case kA:case L2:case khe:return this.onEnd(i),this.ended=!0,!1}if(l=r.avail_out,r.next_out&&(r.avail_out===0||i===M2))if(this.options.to==="string"){let c=fg.utf8border(r.output,r.next_out),d=r.next_out-c,u=fg.buf2string(r.output,c);r.next_out=d,r.avail_out=n-d,d&&r.output.set(r.output.subarray(c,c+d),0),this.onData(u)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(i===pg&&l===0)){if(i===M2)return i=dc.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};Wg.prototype.onData=function(t){this.chunks.push(t)};Wg.prototype.onEnd=function(t){t===pg&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Cj.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function yS(t,s){const r=new Wg(s);if(r.push(t),r.err)throw r.msg||jf[r.err];return r.result}function Ahe(t,s){return s=s||{},s.raw=!0,yS(t,s)}var Phe=Wg,Ehe=yS,The=Ahe,Mhe=yS,Lhe=Vg,Dhe={Inflate:Phe,inflate:Ehe,inflateRaw:The,ungzip:Mhe,constants:Lhe};const{Inflate:Ihe,inflate:Rhe,inflateRaw:Xge,ungzip:Jge}=Dhe;var AA=Ihe,Fhe=Rhe;const rq=[];for(let t=0;t<256;t++){let s=t;for(let r=0;r<8;r++)s&1?s=3988292384^s>>>1:s=s>>>1;rq[t]=s}const PA=4294967295;function Ohe(t,s,r){let n=t;for(let a=0;a<r;a++)n=rq[(n^s[a])&255]^n>>>8;return n}function $he(t,s){return(Ohe(PA,t,s)^PA)>>>0}function EA(t,s,r){const n=t.readUint32(),a=$he(new Uint8Array(t.buffer,t.byteOffset+t.offset-s-4,s),s);if(a!==n)throw new Error(`CRC mismatch for chunk ${r}. Expected ${n}, found ${a}`)}function nq(t,s,r){for(let n=0;n<r;n++)s[n]=t[n]}function aq(t,s,r,n){let a=0;for(;a<n;a++)s[a]=t[a];for(;a<r;a++)s[a]=t[a]+s[a-n]&255}function iq(t,s,r,n){let a=0;if(r.length===0)for(;a<n;a++)s[a]=t[a];else for(;a<n;a++)s[a]=t[a]+r[a]&255}function oq(t,s,r,n,a){let i=0;if(r.length===0){for(;i<a;i++)s[i]=t[i];for(;i<n;i++)s[i]=t[i]+(s[i-a]>>1)&255}else{for(;i<a;i++)s[i]=t[i]+(r[i]>>1)&255;for(;i<n;i++)s[i]=t[i]+(s[i-a]+r[i]>>1)&255}}function lq(t,s,r,n,a){let i=0;if(r.length===0){for(;i<a;i++)s[i]=t[i];for(;i<n;i++)s[i]=t[i]+s[i-a]&255}else{for(;i<a;i++)s[i]=t[i]+r[i]&255;for(;i<n;i++)s[i]=t[i]+Bhe(s[i-a],r[i],r[i-a])&255}}function Bhe(t,s,r){const n=t+s-r,a=Math.abs(n-t),i=Math.abs(n-s),o=Math.abs(n-r);return a<=i&&a<=o?t:i<=o?s:r}function Uhe(t,s,r,n,a,i){switch(t){case 0:nq(s,r,a);break;case 1:aq(s,r,a,i);break;case 2:iq(s,r,n,a);break;case 3:oq(s,r,n,a,i);break;case 4:lq(s,r,n,a,i);break;default:throw new Error(`Unsupported filter: ${t}`)}}const zhe=new Uint16Array([255]),qhe=new Uint8Array(zhe.buffer),Vhe=qhe[0]===255;function Hhe(t){const{data:s,width:r,height:n,channels:a,depth:i}=t,o=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],l=Math.ceil(i/8)*a,c=new Uint8Array(n*r*l);let d=0;for(let u=0;u<7;u++){const m=o[u],f=Math.ceil((r-m.x)/m.xStep),h=Math.ceil((n-m.y)/m.yStep);if(f<=0||h<=0)continue;const p=f*l,g=new Uint8Array(p);for(let y=0;y<h;y++){const v=s[d++],j=s.subarray(d,d+p);d+=p;const w=new Uint8Array(p);Uhe(v,j,w,g,p,l),g.set(w);for(let _=0;_<f;_++){const P=m.x+_*m.xStep,E=m.y+y*m.yStep;if(!(P>=r||E>=n))for(let L=0;L<l;L++)c[(E*r+P)*l+L]=w[_*l+L]}}}if(i===16){const u=new Uint16Array(c.buffer);if(Vhe)for(let m=0;m<u.length;m++)u[m]=Whe(u[m]);return u}else return c}function Whe(t){return(t&255)<<8|t>>8&255}const Khe=new Uint16Array([255]),Yhe=new Uint8Array(Khe.buffer),Ghe=Yhe[0]===255,Qhe=new Uint8Array(0);function TA(t){const{data:s,width:r,height:n,channels:a,depth:i}=t,o=Math.ceil(i/8)*a,l=Math.ceil(i/8*a*r),c=new Uint8Array(n*l);let d=Qhe,u=0,m,f;for(let h=0;h<n;h++){switch(m=s.subarray(u+1,u+1+l),f=c.subarray(h*l,(h+1)*l),s[u]){case 0:nq(m,f,l);break;case 1:aq(m,f,l,o);break;case 2:iq(m,f,d,l);break;case 3:oq(m,f,d,l,o);break;case 4:lq(m,f,d,l,o);break;default:throw new Error(`Unsupported filter: ${s[u]}`)}d=f,u+=l+1}if(i===16){const h=new Uint16Array(c.buffer);if(Ghe)for(let p=0;p<h.length;p++)h[p]=Zhe(h[p]);return h}else return c}function Zhe(t){return(t&255)<<8|t>>8&255}const Qy=Uint8Array.of(137,80,78,71,13,10,26,10);function MA(t){if(!Xhe(t.readBytes(Qy.length)))throw new Error("wrong PNG signature")}function Xhe(t){if(t.length<Qy.length)return!1;for(let s=0;s<Qy.length;s++)if(t[s]!==Qy[s])return!1;return!0}const Jhe="tEXt",efe=0,cq=new TextDecoder("latin1");function tfe(t){if(rfe(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const sfe=/^[\u0000-\u00FF]*$/;function rfe(t){if(!sfe.test(t))throw new Error("invalid latin1 text")}function nfe(t,s,r){const n=dq(s);t[n]=afe(s,r-n.length-1)}function dq(t){for(t.mark();t.readByte()!==efe;);const s=t.offset;t.reset();const r=cq.decode(t.readBytes(s-t.offset-1));return t.skip(1),tfe(r),r}function afe(t,s){return cq.decode(t.readBytes(s))}const fi={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},D2={UNKNOWN:-1,DEFLATE:0},LA={UNKNOWN:-1,ADAPTIVE:0},I2={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},hy={NONE:0,BACKGROUND:1,PREVIOUS:2},R2={SOURCE:0,OVER:1};class ife extends mS{constructor(r,n={}){super(r);_e(this,"_checkCrc");_e(this,"_inflator");_e(this,"_png");_e(this,"_apng");_e(this,"_end");_e(this,"_hasPalette");_e(this,"_palette");_e(this,"_hasTransparency");_e(this,"_transparency");_e(this,"_compressionMethod");_e(this,"_filterMethod");_e(this,"_interlaceMethod");_e(this,"_colorType");_e(this,"_isAnimated");_e(this,"_numberOfFrames");_e(this,"_numberOfPlays");_e(this,"_frames");_e(this,"_writingDataChunks");const{checkCrc:a=!1}=n;this._checkCrc=a,this._inflator=new AA,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=D2.UNKNOWN,this._filterMethod=LA.UNKNOWN,this._interlaceMethod=I2.UNKNOWN,this._colorType=fi.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(MA(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeChunk(r,n)}return this.decodeImage(),this._png}decodeApng(){for(MA(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(r,n)}return this.decodeApngImage(),this._apng}decodeChunk(r,n){const a=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(r);break;case"IDAT":this.decodeIDAT(r);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(r);break;case"iCCP":this.decodeiCCP(r);break;case Jhe:nfe(this._png.text,this,r);break;case"pHYs":this.decodepHYs();break;default:this.skip(r);break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?EA(this,r+4,n):this.skip(4)}decodeApngChunk(r,n){const a=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(r);break;default:this.decodeChunk(r,n),this.offset=a+r;break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?EA(this,r+4,n):this.skip(4)}decodeIHDR(){const r=this._png;r.width=this.readUint32(),r.height=this.readUint32(),r.depth=ofe(this.readUint8());const n=this.readUint8();this._colorType=n;let a;switch(n){case fi.GREYSCALE:a=1;break;case fi.TRUECOLOUR:a=3;break;case fi.INDEXED_COLOUR:a=1;break;case fi.GREYSCALE_ALPHA:a=2;break;case fi.TRUECOLOUR_ALPHA:a=4;break;case fi.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=a,this._compressionMethod=this.readUint8(),this._compressionMethod!==D2.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const r={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(r)}decodePLTE(r){if(r%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${r}`);const n=r/3;this._hasPalette=!0;const a=[];this._palette=a;for(let i=0;i<n;i++)a.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(r){this._writingDataChunks=!0;const n=r,a=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,a,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodeFDAT(r){this._writingDataChunks=!0;let n=r,a=this.offset+this.byteOffset;if(a+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,a,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodetRNS(r){switch(this._colorType){case fi.GREYSCALE:case fi.TRUECOLOUR:{if(r%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${r}`);if(r/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${r/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(r/2);for(let n=0;n<r/2;n++)this._transparency[n]=this.readUint16();break}case fi.INDEXED_COLOUR:{if(r>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${r} vs ${this._palette.length})`);let n=0;for(;n<r;n++){const a=this.readByte();this._palette[n].push(a)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case fi.UNKNOWN:case fi.GREYSCALE_ALPHA:case fi.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(r){const n=dq(this),a=this.readUint8();if(a!==D2.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${a}`);const i=this.readBytes(r-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:Fhe(i)}}decodepHYs(){const r=this.readUint32(),n=this.readUint32(),a=this.readByte();this._png.resolution={x:r,y:n,unit:a}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let r=0;r<this._numberOfFrames;r++){const n={sequenceNumber:this._frames[r].sequenceNumber,delayNumber:this._frames[r].delayNumber,delayDenominator:this._frames[r].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},a=this._frames.at(r);if(a){if(a.data=TA({data:a.data,width:a.width,height:a.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),r===0||a.xOffset===0&&a.yOffset===0&&a.width===this._png.width&&a.height===this._png.height)n.data=a.data;else{const i=this._apng.frames.at(r-1);this.disposeFrame(a,i,n),this.addFrameDataToCanvas(n,a)}this._apng.frames.push(n)}}return this._apng}disposeFrame(r,n,a){switch(r.disposeOp){case hy.NONE:break;case hy.BACKGROUND:for(let i=0;i<this._png.height;i++)for(let o=0;o<this._png.width;o++){const l=(i*r.width+o)*this._png.channels;for(let c=0;c<this._png.channels;c++)a.data[l+c]=0}break;case hy.PREVIOUS:a.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(r,n){const a=1<<this._png.depth,i=(o,l)=>{const c=((o+n.yOffset)*this._png.width+n.xOffset+l)*this._png.channels,d=(o*n.width+l)*this._png.channels;return{index:c,frameIndex:d}};switch(n.blendOp){case R2.SOURCE:for(let o=0;o<n.height;o++)for(let l=0;l<n.width;l++){const{index:c,frameIndex:d}=i(o,l);for(let u=0;u<this._png.channels;u++)r.data[c+u]=n.data[d+u]}break;case R2.OVER:for(let o=0;o<n.height;o++)for(let l=0;l<n.width;l++){const{index:c,frameIndex:d}=i(o,l);for(let u=0;u<this._png.channels;u++){const m=n.data[d+this._png.channels-1]/a,f=u%(this._png.channels-1)===0?1:n.data[d+u],h=Math.floor(m*f+(1-m)*r.data[c+u]);r.data[c+u]+=h}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var n;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const r=this._isAnimated?((n=this._frames)==null?void 0:n.at(0)).data:this._inflator.result;if(this._filterMethod!==LA.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===I2.NO_INTERLACE)this._png.data=TA({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===I2.ADAM7)this._png.data=Hhe({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const r=this._inflator.result,n=this._frames.at(-1);n?n.data=r:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:hy.NONE,blendOp:R2.SOURCE,data:r}),this._inflator=new AA,this._writingDataChunks=!1}}function ofe(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var DA;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(DA||(DA={}));function lfe(t,s){return new ife(t,s).decode()}var ms=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function F2(){ms.console&&typeof ms.console.log=="function"&&ms.console.log.apply(ms.console,arguments)}var vr={log:F2,warn:function(t){ms.console&&(typeof ms.console.warn=="function"?ms.console.warn.apply(ms.console,arguments):F2.call(null,arguments))},error:function(t){ms.console&&(typeof ms.console.error=="function"?ms.console.error.apply(ms.console,arguments):F2(t))}};function O2(t,s,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){Mu(n.response,s,r)},n.onerror=function(){vr.error("could not download file")},n.send()}function IA(t){var s=new XMLHttpRequest;s.open("HEAD",t,!1);try{s.send()}catch{}return s.status>=200&&s.status<=299}function fy(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var s=document.createEvent("MouseEvents");s.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(s)}}var Mu=ms.saveAs||((typeof window>"u"?"undefined":mr(window))!=="object"||window!==ms?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,s,r){var n=ms.URL||ms.webkitURL,a=document.createElement("a");s=s||t.name||"download",a.download=s,a.rel="noopener",typeof t=="string"?(a.href=t,a.origin!==location.origin?IA(a.href)?O2(t,s,r):fy(a,a.target="_blank"):fy(a)):(a.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){fy(a)},0))}:"msSaveOrOpenBlob"in navigator?function(t,s,r){if(s=s||t.name||"download",typeof t=="string")if(IA(t))O2(t,s,r);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){fy(n)})}else navigator.msSaveOrOpenBlob(function(a,i){return i===void 0?i={autoBom:!1}:mr(i)!=="object"&&(vr.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}(t,r),s)}:function(t,s,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof t=="string")return O2(t,s,r);var a=t.type==="application/octet-stream",i=/constructor/i.test(ms.HTMLElement)||ms.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||a&&i)&&(typeof FileReader>"u"?"undefined":mr(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var u=l.result;u=o?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=u:location=u,n=null},l.readAsDataURL(t)}else{var c=ms.URL||ms.webkitURL,d=c.createObjectURL(t);n?n.location=d:location.href=d,n=null,setTimeout(function(){c.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function uq(t){var s;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],n=0;n<r.length;n++){var a=r[n].re,i=r[n].process,o=a.exec(t);o&&(s=i(o),this.r=s[0],this.g=s[1],this.b=s[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),d=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),d.length==1&&(d="0"+d),"#"+l+c+d}}var Zy=ms.atob.bind(ms),RA=ms.btoa.bind(ms);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function $2(t,s){var r=t[0],n=t[1],a=t[2],i=t[3];r=ca(r,n,a,i,s[0],7,-680876936),i=ca(i,r,n,a,s[1],12,-389564586),a=ca(a,i,r,n,s[2],17,606105819),n=ca(n,a,i,r,s[3],22,-1044525330),r=ca(r,n,a,i,s[4],7,-176418897),i=ca(i,r,n,a,s[5],12,1200080426),a=ca(a,i,r,n,s[6],17,-1473231341),n=ca(n,a,i,r,s[7],22,-45705983),r=ca(r,n,a,i,s[8],7,1770035416),i=ca(i,r,n,a,s[9],12,-1958414417),a=ca(a,i,r,n,s[10],17,-42063),n=ca(n,a,i,r,s[11],22,-1990404162),r=ca(r,n,a,i,s[12],7,1804603682),i=ca(i,r,n,a,s[13],12,-40341101),a=ca(a,i,r,n,s[14],17,-1502002290),r=da(r,n=ca(n,a,i,r,s[15],22,1236535329),a,i,s[1],5,-165796510),i=da(i,r,n,a,s[6],9,-1069501632),a=da(a,i,r,n,s[11],14,643717713),n=da(n,a,i,r,s[0],20,-373897302),r=da(r,n,a,i,s[5],5,-701558691),i=da(i,r,n,a,s[10],9,38016083),a=da(a,i,r,n,s[15],14,-660478335),n=da(n,a,i,r,s[4],20,-405537848),r=da(r,n,a,i,s[9],5,568446438),i=da(i,r,n,a,s[14],9,-1019803690),a=da(a,i,r,n,s[3],14,-187363961),n=da(n,a,i,r,s[8],20,1163531501),r=da(r,n,a,i,s[13],5,-1444681467),i=da(i,r,n,a,s[2],9,-51403784),a=da(a,i,r,n,s[7],14,1735328473),r=ua(r,n=da(n,a,i,r,s[12],20,-1926607734),a,i,s[5],4,-378558),i=ua(i,r,n,a,s[8],11,-2022574463),a=ua(a,i,r,n,s[11],16,1839030562),n=ua(n,a,i,r,s[14],23,-35309556),r=ua(r,n,a,i,s[1],4,-1530992060),i=ua(i,r,n,a,s[4],11,1272893353),a=ua(a,i,r,n,s[7],16,-155497632),n=ua(n,a,i,r,s[10],23,-1094730640),r=ua(r,n,a,i,s[13],4,681279174),i=ua(i,r,n,a,s[0],11,-358537222),a=ua(a,i,r,n,s[3],16,-722521979),n=ua(n,a,i,r,s[6],23,76029189),r=ua(r,n,a,i,s[9],4,-640364487),i=ua(i,r,n,a,s[12],11,-421815835),a=ua(a,i,r,n,s[15],16,530742520),r=ma(r,n=ua(n,a,i,r,s[2],23,-995338651),a,i,s[0],6,-198630844),i=ma(i,r,n,a,s[7],10,1126891415),a=ma(a,i,r,n,s[14],15,-1416354905),n=ma(n,a,i,r,s[5],21,-57434055),r=ma(r,n,a,i,s[12],6,1700485571),i=ma(i,r,n,a,s[3],10,-1894986606),a=ma(a,i,r,n,s[10],15,-1051523),n=ma(n,a,i,r,s[1],21,-2054922799),r=ma(r,n,a,i,s[8],6,1873313359),i=ma(i,r,n,a,s[15],10,-30611744),a=ma(a,i,r,n,s[6],15,-1560198380),n=ma(n,a,i,r,s[13],21,1309151649),r=ma(r,n,a,i,s[4],6,-145523070),i=ma(i,r,n,a,s[11],10,-1120210379),a=ma(a,i,r,n,s[2],15,718787259),n=ma(n,a,i,r,s[9],21,-343485551),t[0]=jd(r,t[0]),t[1]=jd(n,t[1]),t[2]=jd(a,t[2]),t[3]=jd(i,t[3])}function Aj(t,s,r,n,a,i){return s=jd(jd(s,t),jd(n,i)),jd(s<<a|s>>>32-a,r)}function ca(t,s,r,n,a,i,o){return Aj(s&r|~s&n,t,s,a,i,o)}function da(t,s,r,n,a,i,o){return Aj(s&n|r&~n,t,s,a,i,o)}function ua(t,s,r,n,a,i,o){return Aj(s^r^n,t,s,a,i,o)}function ma(t,s,r,n,a,i,o){return Aj(r^(s|~n),t,s,a,i,o)}function mq(t){var s,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(s=64;s<=t.length;s+=64)$2(n,cfe(t.substring(s-64,s)));t=t.substring(s-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(s=0;s<t.length;s++)a[s>>2]|=t.charCodeAt(s)<<(s%4<<3);if(a[s>>2]|=128<<(s%4<<3),s>55)for($2(n,a),s=0;s<16;s++)a[s]=0;return a[14]=8*r,$2(n,a),n}function cfe(t){var s,r=[];for(s=0;s<64;s+=4)r[s>>2]=t.charCodeAt(s)+(t.charCodeAt(s+1)<<8)+(t.charCodeAt(s+2)<<16)+(t.charCodeAt(s+3)<<24);return r}var FA="0123456789abcdef".split("");function dfe(t){for(var s="",r=0;r<4;r++)s+=FA[t>>8*r+4&15]+FA[t>>8*r&15];return s}function ufe(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function s5(t){return mq(t).map(ufe).join("")}var mfe=function(t){for(var s=0;s<t.length;s++)t[s]=dfe(t[s]);return t.join("")}(mq("hello"))!="5d41402abc4b2a76b9719d911017c592";function jd(t,s){if(mfe){var r=(65535&t)+(65535&s);return(t>>16)+(s>>16)+(r>>16)<<16|65535&r}return t+s&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function r5(t,s){var r,n,a,i;if(t!==r){for(var o=(a=t,i=1+(256/t.length|0),new Array(i+1).join(a)),l=[],c=0;c<256;c++)l[c]=c;var d=0;for(c=0;c<256;c++){var u=l[c];d=(d+u+o.charCodeAt(c))%256,l[c]=l[d],l[d]=u}r=t,n=l}else l=n;var m=s.length,f=0,h=0,p="";for(c=0;c<m;c++)h=(h+(u=l[f=(f+1)%256]))%256,l[f]=l[h],l[h]=u,o=l[(l[f]+l[h])%256],p+=String.fromCharCode(s.charCodeAt(c)^o);return p}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var OA={print:4,modify:8,copy:16,"annot-forms":32};function eh(t,s,r,n){this.v=1,this.r=2;var a=192;t.forEach(function(l){if(OA.perm!==void 0)throw new Error("Invalid permission: "+l);a+=OA[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(s+this.padding).substr(0,32),o=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,o),this.P=-(1+(255^a)),this.encryptionKey=s5(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=r5(this.encryptionKey,this.padding)}function th(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var s="",r=t.length,n=0;n<r;n++){var a=t.charCodeAt(n);s+=a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?"#"+("0"+a.toString(16)).slice(-2):t[n]}return s}function $A(t){if(mr(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var s={};this.subscribe=function(r,n,a){if(a=a||!1,typeof r!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");s.hasOwnProperty(r)||(s[r]={});var i=Math.random().toString(35);return s[r][i]=[n,!!a],i},this.unsubscribe=function(r){for(var n in s)if(s[n][r])return delete s[n][r],Object.keys(s[n]).length===0&&delete s[n],!0;return!1},this.publish=function(r){if(s.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var i in s[r]){var o=s[r][i];try{o[0].apply(t,n)}catch(l){ms.console&&vr.error("jsPDF PubSub Error",l.message,l)}o[1]&&a.push(i)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return s}}function v1(t){if(!(this instanceof v1))return new v1(t);var s="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&s.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function hq(t,s){this.gState=t,this.matrix=s,this.id="",this.objectNumber=-1}function Lu(t,s,r,n,a){if(!(this instanceof Lu))return new Lu(t,s,r,n,a);this.type=t==="axial"?2:3,this.coords=s,this.colors=r,hq.call(this,n,a)}function xh(t,s,r,n,a){if(!(this instanceof xh))return new xh(t,s,r,n,a);this.boundingBox=t,this.xStep=s,this.yStep=r,this.stream="",this.cloneIndex=0,hq.call(this,n,a)}function es(t){var s,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],i=arguments[3],o=[],l=1,c=16,d="S",u=null;mr(t=t||{})==="object"&&(r=t.orientation,n=t.unit||n,a=t.format||a,i=t.compress||t.compressPdf||i,(u=t.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),l=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(s=t.precision),t.floatPrecision!==void 0&&(c=t.floatPrecision),d=t.defaultPathOperation||"S"),o=t.filters||(i===!0?["FlateEncode"]:o),n=n||"mm",r=(""+(r||"P")).toLowerCase();var m=t.putOnlyUsedFonts||!1,f={},h={internal:{},__private__:{}};h.__private__.PubSub=$A;var p="1.3",g=h.__private__.getPdfVersion=function(){return p};h.__private__.setPdfVersion=function(S){p=S};var y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};h.__private__.getPageFormats=function(){return y};var v=h.__private__.getPageFormat=function(S){return y[S]};a=a||"a4";var j="compat",w="advanced",_=j;function P(){this.saveGraphicsState(),pe(new is(It,0,0,-It,0,xu()*It).toString()+" cm"),this.setFontSize(this.getFontSize()/It),d="n",_=w}function E(){this.restoreGraphicsState(),d="S",_=j}var L=h.__private__.combineFontStyleAndFontWeight=function(S,B){if(S=="bold"&&B=="normal"||S=="bold"&&B==400||S=="normal"&&B=="italic"||S=="bold"&&B=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return B&&(S=B==400||B==="normal"?S==="italic"?"italic":"normal":B!=700&&B!=="bold"||S!=="normal"?(B==700?"bold":B)+""+S:"bold"),S};h.advancedAPI=function(S){var B=_===j;return B&&P.call(this),typeof S!="function"||(S(this),B&&E.call(this)),this},h.compatAPI=function(S){var B=_===w;return B&&E.call(this),typeof S!="function"||(S(this),B&&P.call(this)),this},h.isAdvancedAPI=function(){return _===w};var T,M=function(S){if(_!==w)throw new Error(S+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},F=h.roundToPrecision=h.__private__.roundToPrecision=function(S,B){var ce=s||B;if(isNaN(S)||isNaN(ce))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return S.toFixed(ce).replace(/0+$/,"")};T=h.hpf=h.__private__.hpf=typeof c=="number"?function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return F(S,c)}:c==="smart"?function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return F(S,S>-1&&S<1?16:5)}:function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return F(S,16)};var k=h.f2=h.__private__.f2=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.f2");return F(S,2)},D=h.__private__.f3=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.f3");return F(S,3)},z=h.scale=h.__private__.scale=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.scale");return _===j?S*It:_===w?S:void 0},W=function(S){return z(function(B){return _===j?xu()-B:_===w?B:void 0}(S))};h.__private__.setPrecision=h.setPrecision=function(S){typeof parseInt(S,10)=="number"&&(s=parseInt(S,10))};var ue,ae="00000000000000000000000000000000",Ne=h.__private__.getFileId=function(){return ae},K=h.__private__.setFileId=function(S){return ae=S!==void 0&&/^[a-fA-F0-9]{32}$/.test(S)?S.toUpperCase():ae.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(rn=new eh(u.userPermissions,u.userPassword,u.ownerPassword,ae)),ae};h.setFileId=function(S){return K(S),this},h.getFileId=function(){return Ne()};var Q=h.__private__.convertDateToPDFDate=function(S){var B=S.getTimezoneOffset(),ce=B<0?"+":"-",Se=Math.floor(Math.abs(B/60)),Le=Math.abs(B%60),Ge=[ce,J(Se),"'",J(Le),"'"].join("");return["D:",S.getFullYear(),J(S.getMonth()+1),J(S.getDate()),J(S.getHours()),J(S.getMinutes()),J(S.getSeconds()),Ge].join("")},ke=h.__private__.convertPDFDateToDate=function(S){var B=parseInt(S.substr(2,4),10),ce=parseInt(S.substr(6,2),10)-1,Se=parseInt(S.substr(8,2),10),Le=parseInt(S.substr(10,2),10),Ge=parseInt(S.substr(12,2),10),ot=parseInt(S.substr(14,2),10);return new Date(B,ce,Se,Le,Ge,ot,0)},G=h.__private__.setCreationDate=function(S){var B;if(S===void 0&&(S=new Date),S instanceof Date)B=Q(S);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(S))throw new Error("Invalid argument passed to jsPDF.setCreationDate");B=S}return ue=B},I=h.__private__.getCreationDate=function(S){var B=ue;return S==="jsDate"&&(B=ke(ue)),B};h.setCreationDate=function(S){return G(S),this},h.getCreationDate=function(S){return I(S)};var Z,J=h.__private__.padd2=function(S){return("0"+parseInt(S)).slice(-2)},se=h.__private__.padd2Hex=function(S){return("00"+(S=S.toString())).substr(S.length)},je=0,be=[],q=[],Te=0,Be=[],Ve=[],ct=!1,vt=q;h.__private__.setCustomOutputDestination=function(S){ct=!0,vt=S};var qe=function(S){ct||(vt=S)};h.__private__.resetCustomOutputDestination=function(){ct=!1,vt=q};var pe=h.__private__.out=function(S){return S=S.toString(),Te+=S.length+1,vt.push(S),vt},ps=h.__private__.write=function(S){return pe(arguments.length===1?S.toString():Array.prototype.join.call(arguments," "))},ns=h.__private__.getArrayBuffer=function(S){for(var B=S.length,ce=new ArrayBuffer(B),Se=new Uint8Array(ce);B--;)Se[B]=S.charCodeAt(B);return ce},ss=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];h.__private__.getStandardFonts=function(){return ss};var dt=t.fontSize||16;h.__private__.setFontSize=h.setFontSize=function(S){return dt=_===w?S/It:S,this};var ts,St=h.__private__.getFontSize=h.getFontSize=function(){return _===j?dt:dt*It},ve=t.R2L||!1;h.__private__.setR2L=h.setR2L=function(S){return ve=S,this},h.__private__.getR2L=h.getR2L=function(){return ve};var Pe,Ue=h.__private__.setZoomMode=function(S){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(S))ts=S;else if(isNaN(S)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(S)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+S+'" is not recognized.');ts=S}else ts=parseInt(S,10)};h.__private__.getZoomMode=function(){return ts};var rt,Qe=h.__private__.setPageMode=function(S){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(S)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+S+'" is not recognized.');Pe=S};h.__private__.getPageMode=function(){return Pe};var Je=h.__private__.setLayoutMode=function(S){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(S)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+S+'" is not recognized.');rt=S};h.__private__.getLayoutMode=function(){return rt},h.__private__.setDisplayMode=h.setDisplayMode=function(S,B,ce){return Ue(S),Je(B),Qe(ce),this};var it={title:"",subject:"",author:"",keywords:"",creator:""};h.__private__.getDocumentProperty=function(S){if(Object.keys(it).indexOf(S)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return it[S]},h.__private__.getDocumentProperties=function(){return it},h.__private__.setDocumentProperties=h.setProperties=h.setDocumentProperties=function(S){for(var B in it)it.hasOwnProperty(B)&&S[B]&&(it[B]=S[B]);return this},h.__private__.setDocumentProperty=function(S,B){if(Object.keys(it).indexOf(S)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return it[S]=B};var gt,It,At,fr,Us,zt={},xs={},sr=[],rs={},Fs={},Ns={},sn={},_n=null,pr=0,gs=[],rr=new $A(h),nu=t.hotfixes||[],na={},$l={},Jo=[],is=function S(B,ce,Se,Le,Ge,ot){if(!(this instanceof S))return new S(B,ce,Se,Le,Ge,ot);isNaN(B)&&(B=1),isNaN(ce)&&(ce=0),isNaN(Se)&&(Se=0),isNaN(Le)&&(Le=1),isNaN(Ge)&&(Ge=0),isNaN(ot)&&(ot=0),this._matrix=[B,ce,Se,Le,Ge,ot]};Object.defineProperty(is.prototype,"sx",{get:function(){return this._matrix[0]},set:function(S){this._matrix[0]=S}}),Object.defineProperty(is.prototype,"shy",{get:function(){return this._matrix[1]},set:function(S){this._matrix[1]=S}}),Object.defineProperty(is.prototype,"shx",{get:function(){return this._matrix[2]},set:function(S){this._matrix[2]=S}}),Object.defineProperty(is.prototype,"sy",{get:function(){return this._matrix[3]},set:function(S){this._matrix[3]=S}}),Object.defineProperty(is.prototype,"tx",{get:function(){return this._matrix[4]},set:function(S){this._matrix[4]=S}}),Object.defineProperty(is.prototype,"ty",{get:function(){return this._matrix[5]},set:function(S){this._matrix[5]=S}}),Object.defineProperty(is.prototype,"a",{get:function(){return this._matrix[0]},set:function(S){this._matrix[0]=S}}),Object.defineProperty(is.prototype,"b",{get:function(){return this._matrix[1]},set:function(S){this._matrix[1]=S}}),Object.defineProperty(is.prototype,"c",{get:function(){return this._matrix[2]},set:function(S){this._matrix[2]=S}}),Object.defineProperty(is.prototype,"d",{get:function(){return this._matrix[3]},set:function(S){this._matrix[3]=S}}),Object.defineProperty(is.prototype,"e",{get:function(){return this._matrix[4]},set:function(S){this._matrix[4]=S}}),Object.defineProperty(is.prototype,"f",{get:function(){return this._matrix[5]},set:function(S){this._matrix[5]=S}}),Object.defineProperty(is.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(is.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(is.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(is.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),is.prototype.join=function(S){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(T).join(S)},is.prototype.multiply=function(S){var B=S.sx*this.sx+S.shy*this.shx,ce=S.sx*this.shy+S.shy*this.sy,Se=S.shx*this.sx+S.sy*this.shx,Le=S.shx*this.shy+S.sy*this.sy,Ge=S.tx*this.sx+S.ty*this.shx+this.tx,ot=S.tx*this.shy+S.ty*this.sy+this.ty;return new is(B,ce,Se,Le,Ge,ot)},is.prototype.decompose=function(){var S=this.sx,B=this.shy,ce=this.shx,Se=this.sy,Le=this.tx,Ge=this.ty,ot=Math.sqrt(S*S+B*B),Ut=(S/=ot)*ce+(B/=ot)*Se;ce-=S*Ut,Se-=B*Ut;var Zt=Math.sqrt(ce*ce+Se*Se);return Ut/=Zt,S*(Se/=Zt)<B*(ce/=Zt)&&(S=-S,B=-B,Ut=-Ut,ot=-ot),{scale:new is(ot,0,0,Zt,0,0),translate:new is(1,0,0,1,Le,Ge),rotate:new is(S,B,-B,S,0,0),skew:new is(1,0,Ut,1,0,0)}},is.prototype.toString=function(S){return this.join(" ")},is.prototype.inversed=function(){var S=this.sx,B=this.shy,ce=this.shx,Se=this.sy,Le=this.tx,Ge=this.ty,ot=1/(S*Se-B*ce),Ut=Se*ot,Zt=-B*ot,fs=-ce*ot,ys=S*ot;return new is(Ut,Zt,fs,ys,-Ut*Le-fs*Ge,-Zt*Le-ys*Ge)},is.prototype.applyToPoint=function(S){var B=S.x*this.sx+S.y*this.shx+this.tx,ce=S.x*this.shy+S.y*this.sy+this.ty;return new fu(B,ce)},is.prototype.applyToRectangle=function(S){var B=this.applyToPoint(S),ce=this.applyToPoint(new fu(S.x+S.w,S.y+S.h));return new np(B.x,B.y,ce.x-B.x,ce.y-B.y)},is.prototype.clone=function(){var S=this.sx,B=this.shy,ce=this.shx,Se=this.sy,Le=this.tx,Ge=this.ty;return new is(S,B,ce,Se,Le,Ge)},h.Matrix=is;var Bl=h.matrixMult=function(S,B){return B.multiply(S)},Ul=new is(1,0,0,1,0,0);h.unitMatrix=h.identityMatrix=Ul;var $i=function(S,B){if(!Fs[S]){var ce=(B instanceof Lu?"Sh":"P")+(Object.keys(rs).length+1).toString(10);B.id=ce,Fs[S]=ce,rs[ce]=B,rr.publish("addPattern",B)}};h.ShadingPattern=Lu,h.TilingPattern=xh,h.addShadingPattern=function(S,B){return M("addShadingPattern()"),$i(S,B),this},h.beginTilingPattern=function(S){M("beginTilingPattern()"),ap(S.boundingBox[0],S.boundingBox[1],S.boundingBox[2]-S.boundingBox[0],S.boundingBox[3]-S.boundingBox[1],S.matrix)},h.endTilingPattern=function(S,B){M("endTilingPattern()"),B.stream=Ve[Z].join(`
`),$i(S,B),rr.publish("endTilingPattern",B),Jo.pop().restore()};var Bi,Kr=h.__private__.newObject=function(){var S=In();return Vn(S,!0),S},In=h.__private__.newObjectDeferred=function(){return je++,be[je]=function(){return Te},je},Vn=function(S,B){return B=typeof B=="boolean"&&B,be[S]=Te,B&&pe(S+" 0 obj"),S},au=h.__private__.newAdditionalObject=function(){var S={objId:In(),content:""};return Be.push(S),S},Pc=In(),xo=In(),el=h.__private__.decodeColorString=function(S){var B=S.split(" ");if(B.length!==2||B[1]!=="g"&&B[1]!=="G")B.length!==5||B[4]!=="k"&&B[4]!=="K"||(B=[(1-B[0])*(1-B[3]),(1-B[1])*(1-B[3]),(1-B[2])*(1-B[3]),"r"]);else{var ce=parseFloat(B[0]);B=[ce,ce,ce,"r"]}for(var Se="#",Le=0;Le<3;Le++)Se+=("0"+Math.floor(255*parseFloat(B[Le])).toString(16)).slice(-2);return Se},go=h.__private__.encodeColorString=function(S){var B;typeof S=="string"&&(S={ch1:S});var ce=S.ch1,Se=S.ch2,Le=S.ch3,Ge=S.ch4,ot=S.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ce=="string"&&ce.charAt(0)!=="#"){var Ut=new uq(ce);if(Ut.ok)ce=Ut.toHex();else if(!/^\d*\.?\d*$/.test(ce))throw new Error('Invalid color "'+ce+'" passed to jsPDF.encodeColorString.')}if(typeof ce=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ce)&&(ce="#"+ce[1]+ce[1]+ce[2]+ce[2]+ce[3]+ce[3]),typeof ce=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ce)){var Zt=parseInt(ce.substr(1),16);ce=Zt>>16&255,Se=Zt>>8&255,Le=255&Zt}if(Se===void 0||Ge===void 0&&ce===Se&&Se===Le)B=typeof ce=="string"?ce+" "+ot[0]:S.precision===2?k(ce/255)+" "+ot[0]:D(ce/255)+" "+ot[0];else if(Ge===void 0||mr(Ge)==="object"){if(Ge&&!isNaN(Ge.a)&&Ge.a===0)return["1.","1.","1.",ot[1]].join(" ");B=typeof ce=="string"?[ce,Se,Le,ot[1]].join(" "):S.precision===2?[k(ce/255),k(Se/255),k(Le/255),ot[1]].join(" "):[D(ce/255),D(Se/255),D(Le/255),ot[1]].join(" ")}else B=typeof ce=="string"?[ce,Se,Le,Ge,ot[2]].join(" "):S.precision===2?[k(ce),k(Se),k(Le),k(Ge),ot[2]].join(" "):[D(ce),D(Se),D(Le),D(Ge),ot[2]].join(" ");return B},vo=h.__private__.getFilters=function(){return o},Ui=h.__private__.putStream=function(S){var B=(S=S||{}).data||"",ce=S.filters||vo(),Se=S.alreadyAppliedFilters||[],Le=S.addLength1||!1,Ge=B.length,ot=S.objectId,Ut=function(Sn){return Sn};if(u!==null&&ot===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(Ut=rn.encryptor(ot,0));var Zt={};ce===!0&&(ce=["FlateEncode"]);var fs=S.additionalKeyValues||[],ys=(Zt=es.API.processDataByFilters!==void 0?es.API.processDataByFilters(B,ce):{data:B,reverseChain:[]}).reverseChain+(Array.isArray(Se)?Se.join(" "):Se.toString());if(Zt.data.length!==0&&(fs.push({key:"Length",value:Zt.data.length}),Le===!0&&fs.push({key:"Length1",value:Ge})),ys.length!=0)if(ys.split("/").length-1==1)fs.push({key:"Filter",value:ys});else{fs.push({key:"Filter",value:"["+ys+"]"});for(var Js=0;Js<fs.length;Js+=1)if(fs[Js].key==="DecodeParms"){for(var Br=[],yn=0;yn<Zt.reverseChain.split("/").length-1;yn+=1)Br.push("null");Br.push(fs[Js].value),fs[Js].value="["+Br.join(" ")+"]"}}pe("<<");for(var jr=0;jr<fs.length;jr++)pe("/"+fs[jr].key+" "+fs[jr].value);pe(">>"),Zt.data.length!==0&&(pe("stream"),pe(Ut(Zt.data)),pe("endstream"))},iu=h.__private__.putPage=function(S){var B=S.number,ce=S.data,Se=S.objId,Le=S.contentsObjId;Vn(Se,!0),pe("<</Type /Page"),pe("/Parent "+S.rootDictionaryObjId+" 0 R"),pe("/Resources "+S.resourceDictionaryObjId+" 0 R"),pe("/MediaBox ["+parseFloat(T(S.mediaBox.bottomLeftX))+" "+parseFloat(T(S.mediaBox.bottomLeftY))+" "+T(S.mediaBox.topRightX)+" "+T(S.mediaBox.topRightY)+"]"),S.cropBox!==null&&pe("/CropBox ["+T(S.cropBox.bottomLeftX)+" "+T(S.cropBox.bottomLeftY)+" "+T(S.cropBox.topRightX)+" "+T(S.cropBox.topRightY)+"]"),S.bleedBox!==null&&pe("/BleedBox ["+T(S.bleedBox.bottomLeftX)+" "+T(S.bleedBox.bottomLeftY)+" "+T(S.bleedBox.topRightX)+" "+T(S.bleedBox.topRightY)+"]"),S.trimBox!==null&&pe("/TrimBox ["+T(S.trimBox.bottomLeftX)+" "+T(S.trimBox.bottomLeftY)+" "+T(S.trimBox.topRightX)+" "+T(S.trimBox.topRightY)+"]"),S.artBox!==null&&pe("/ArtBox ["+T(S.artBox.bottomLeftX)+" "+T(S.artBox.bottomLeftY)+" "+T(S.artBox.topRightX)+" "+T(S.artBox.topRightY)+"]"),typeof S.userUnit=="number"&&S.userUnit!==1&&pe("/UserUnit "+S.userUnit),rr.publish("putPage",{objId:Se,pageContext:gs[B],pageNumber:B,page:ce}),pe("/Contents "+Le+" 0 R"),pe(">>"),pe("endobj");var Ge=ce.join(`
`);return _===w&&(Ge+=`
Q`),Vn(Le,!0),Ui({data:Ge,filters:vo(),objectId:Le}),pe("endobj"),Se},tl=h.__private__.putPages=function(){var S,B,ce=[];for(S=1;S<=pr;S++)gs[S].objId=In(),gs[S].contentsObjId=In();for(S=1;S<=pr;S++)ce.push(iu({number:S,data:Ve[S],objId:gs[S].objId,contentsObjId:gs[S].contentsObjId,mediaBox:gs[S].mediaBox,cropBox:gs[S].cropBox,bleedBox:gs[S].bleedBox,trimBox:gs[S].trimBox,artBox:gs[S].artBox,userUnit:gs[S].userUnit,rootDictionaryObjId:Pc,resourceDictionaryObjId:xo}));Vn(Pc,!0),pe("<</Type /Pages");var Se="/Kids [";for(B=0;B<pr;B++)Se+=ce[B]+" 0 R ";pe(Se+"]"),pe("/Count "+pr),pe(">>"),pe("endobj"),rr.publish("postPutPages")},ou=function(S){rr.publish("putFont",{font:S,out:pe,newObject:Kr,putStream:Ui}),S.isAlreadyPutted!==!0&&(S.objectNumber=Kr(),pe("<<"),pe("/Type /Font"),pe("/BaseFont /"+th(S.postScriptName)),pe("/Subtype /Type1"),typeof S.encoding=="string"&&pe("/Encoding /"+S.encoding),pe("/FirstChar 32"),pe("/LastChar 255"),pe(">>"),pe("endobj"))},km=function(S){S.objectNumber=Kr();var B=[];B.push({key:"Type",value:"/XObject"}),B.push({key:"Subtype",value:"/Form"}),B.push({key:"BBox",value:"["+[T(S.x),T(S.y),T(S.x+S.width),T(S.y+S.height)].join(" ")+"]"}),B.push({key:"Matrix",value:"["+S.matrix.toString()+"]"});var ce=S.pages[1].join(`
`);Ui({data:ce,additionalKeyValues:B,objectId:S.objectNumber}),pe("endobj")},Am=function(S,B){B||(B=21);var ce=Kr(),Se=function(ot,Ut){var Zt,fs=[],ys=1/(Ut-1);for(Zt=0;Zt<1;Zt+=ys)fs.push(Zt);if(fs.push(1),ot[0].offset!=0){var Js={offset:0,color:ot[0].color};ot.unshift(Js)}if(ot[ot.length-1].offset!=1){var Br={offset:1,color:ot[ot.length-1].color};ot.push(Br)}for(var yn="",jr=0,Sn=0;Sn<fs.length;Sn++){for(Zt=fs[Sn];Zt>ot[jr+1].offset;)jr++;var jn=ot[jr].offset,Hn=(Zt-jn)/(ot[jr+1].offset-jn),qi=ot[jr].color,za=ot[jr+1].color;yn+=se(Math.round((1-Hn)*qi[0]+Hn*za[0]).toString(16))+se(Math.round((1-Hn)*qi[1]+Hn*za[1]).toString(16))+se(Math.round((1-Hn)*qi[2]+Hn*za[2]).toString(16))}return yn.trim()}(S.colors,B),Le=[];Le.push({key:"FunctionType",value:"0"}),Le.push({key:"Domain",value:"[0.0 1.0]"}),Le.push({key:"Size",value:"["+B+"]"}),Le.push({key:"BitsPerSample",value:"8"}),Le.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Le.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ui({data:Se,additionalKeyValues:Le,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ce}),pe("endobj"),S.objectNumber=Kr(),pe("<< /ShadingType "+S.type),pe("/ColorSpace /DeviceRGB");var Ge="/Coords ["+T(parseFloat(S.coords[0]))+" "+T(parseFloat(S.coords[1]))+" ";S.type===2?Ge+=T(parseFloat(S.coords[2]))+" "+T(parseFloat(S.coords[3])):Ge+=T(parseFloat(S.coords[2]))+" "+T(parseFloat(S.coords[3]))+" "+T(parseFloat(S.coords[4]))+" "+T(parseFloat(S.coords[5])),pe(Ge+="]"),S.matrix&&pe("/Matrix ["+S.matrix.toString()+"]"),pe("/Function "+ce+" 0 R"),pe("/Extend [true true]"),pe(">>"),pe("endobj")},Pm=function(S,B){var ce=In(),Se=Kr();B.push({resourcesOid:ce,objectOid:Se}),S.objectNumber=Se;var Le=[];Le.push({key:"Type",value:"/Pattern"}),Le.push({key:"PatternType",value:"1"}),Le.push({key:"PaintType",value:"1"}),Le.push({key:"TilingType",value:"1"}),Le.push({key:"BBox",value:"["+S.boundingBox.map(T).join(" ")+"]"}),Le.push({key:"XStep",value:T(S.xStep)}),Le.push({key:"YStep",value:T(S.yStep)}),Le.push({key:"Resources",value:ce+" 0 R"}),S.matrix&&Le.push({key:"Matrix",value:"["+S.matrix.toString()+"]"}),Ui({data:S.stream,additionalKeyValues:Le,objectId:S.objectNumber}),pe("endobj")},Dj=function(S){for(var B in S.objectNumber=Kr(),pe("<<"),S)switch(B){case"opacity":pe("/ca "+k(S[B]));break;case"stroke-opacity":pe("/CA "+k(S[B]))}pe(">>"),pe("endobj")},Yf=function(S){Vn(S.resourcesOid,!0),pe("<<"),pe("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var B in pe("/Font <<"),zt)zt.hasOwnProperty(B)&&(m===!1||m===!0&&f.hasOwnProperty(B))&&pe("/"+B+" "+zt[B].objectNumber+" 0 R");pe(">>")}(),function(){if(Object.keys(rs).length>0){for(var B in pe("/Shading <<"),rs)rs.hasOwnProperty(B)&&rs[B]instanceof Lu&&rs[B].objectNumber>=0&&pe("/"+B+" "+rs[B].objectNumber+" 0 R");rr.publish("putShadingPatternDict"),pe(">>")}}(),function(B){if(Object.keys(rs).length>0){for(var ce in pe("/Pattern <<"),rs)rs.hasOwnProperty(ce)&&rs[ce]instanceof h.TilingPattern&&rs[ce].objectNumber>=0&&rs[ce].objectNumber<B&&pe("/"+ce+" "+rs[ce].objectNumber+" 0 R");rr.publish("putTilingPatternDict"),pe(">>")}}(S.objectOid),function(){if(Object.keys(Ns).length>0){var B;for(B in pe("/ExtGState <<"),Ns)Ns.hasOwnProperty(B)&&Ns[B].objectNumber>=0&&pe("/"+B+" "+Ns[B].objectNumber+" 0 R");rr.publish("putGStateDict"),pe(">>")}}(),function(){for(var B in pe("/XObject <<"),na)na.hasOwnProperty(B)&&na[B].objectNumber>=0&&pe("/"+B+" "+na[B].objectNumber+" 0 R");rr.publish("putXobjectDict"),pe(">>")}(),pe(">>"),pe("endobj")},Yg=function(S){xs[S.fontName]=xs[S.fontName]||{},xs[S.fontName][S.fontStyle]=S.id},Gg=function(S,B,ce,Se,Le){var Ge={id:"F"+(Object.keys(zt).length+1).toString(10),postScriptName:S,fontName:B,fontStyle:ce,encoding:Se,isStandardFont:Le||!1,metadata:{}};return rr.publish("addFont",{font:Ge,instance:this}),zt[Ge.id]=Ge,Yg(Ge),Ge.id},zi=h.__private__.pdfEscape=h.pdfEscape=function(S,B){return function(ce,Se){var Le,Ge,ot,Ut,Zt,fs,ys,Js,Br;if(ot=(Se=Se||{}).sourceEncoding||"Unicode",Zt=Se.outputEncoding,(Se.autoencode||Zt)&&zt[gt].metadata&&zt[gt].metadata[ot]&&zt[gt].metadata[ot].encoding&&(Ut=zt[gt].metadata[ot].encoding,!Zt&&zt[gt].encoding&&(Zt=zt[gt].encoding),!Zt&&Ut.codePages&&(Zt=Ut.codePages[0]),typeof Zt=="string"&&(Zt=Ut[Zt]),Zt)){for(ys=!1,fs=[],Le=0,Ge=ce.length;Le<Ge;Le++)(Js=Zt[ce.charCodeAt(Le)])?fs.push(String.fromCharCode(Js)):fs.push(ce[Le]),fs[Le].charCodeAt(0)>>8&&(ys=!0);ce=fs.join("")}for(Le=ce.length;ys===void 0&&Le!==0;)ce.charCodeAt(Le-1)>>8&&(ys=!0),Le--;if(!ys)return ce;for(fs=Se.noBOM?[]:[254,255],Le=0,Ge=ce.length;Le<Ge;Le++){if((Br=(Js=ce.charCodeAt(Le))>>8)>>8)throw new Error("Character at position "+Le+" of string '"+ce+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");fs.push(Br),fs.push(Js-(Br<<8))}return String.fromCharCode.apply(void 0,fs)}(S,B).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Gf=h.__private__.beginPage=function(S){Ve[++pr]=[],gs[pr]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(S[0]),topRightY:Number(S[1])}},Zg(pr),qe(Ve[Z])},Qg=function(S,B){var ce,Se,Le;switch(r=B||r,typeof S=="string"&&(ce=v(S.toLowerCase()),Array.isArray(ce)&&(Se=ce[0],Le=ce[1])),Array.isArray(S)&&(Se=S[0]*It,Le=S[1]*It),isNaN(Se)&&(Se=a[0],Le=a[1]),(Se>14400||Le>14400)&&(vr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Se=Math.min(14400,Se),Le=Math.min(14400,Le)),a=[Se,Le],r.substr(0,1)){case"l":Le>Se&&(a=[Le,Se]);break;case"p":Se>Le&&(a=[Le,Se])}Gf(a),qj(ep),pe(Tm),sp!==0&&pe(sp+" J"),rp!==0&&pe(rp+" j"),rr.publish("addPage",{pageNumber:pr})},Qf=function(S){S>0&&S<=pr&&(Ve.splice(S,1),gs.splice(S,1),pr--,Z>pr&&(Z=pr),this.setPage(Z))},Zg=function(S){S>0&&S<=pr&&(Z=S)},Xg=h.__private__.getNumberOfPages=h.getNumberOfPages=function(){return Ve.length-1},Jg=function(S,B,ce){var Se,Le=void 0;return ce=ce||{},S=S!==void 0?S:zt[gt].fontName,B=B!==void 0?B:zt[gt].fontStyle,Se=S.toLowerCase(),xs[Se]!==void 0&&xs[Se][B]!==void 0?Le=xs[Se][B]:xs[S]!==void 0&&xs[S][B]!==void 0?Le=xs[S][B]:ce.disableWarning===!1&&vr.warn("Unable to look up font label for font '"+S+"', '"+B+"'. Refer to getFontList() for available fonts."),Le||ce.noFallback||(Le=xs.times[B])==null&&(Le=xs.times.normal),Le},Em=h.__private__.putInfo=function(){var S=Kr(),B=function(Se){return Se};for(var ce in u!==null&&(B=rn.encryptor(S,0)),pe("<<"),pe("/Producer ("+zi(B("jsPDF "+es.version))+")"),it)it.hasOwnProperty(ce)&&it[ce]&&pe("/"+ce.substr(0,1).toUpperCase()+ce.substr(1)+" ("+zi(B(it[ce]))+")");pe("/CreationDate ("+zi(B(ue))+")"),pe(">>"),pe("endobj")},Ij=h.__private__.putCatalog=function(S){var B=(S=S||{}).rootDictionaryObjId||Pc;switch(Kr(),pe("<<"),pe("/Type /Catalog"),pe("/Pages "+B+" 0 R"),ts||(ts="fullwidth"),ts){case"fullwidth":pe("/OpenAction [3 0 R /FitH null]");break;case"fullheight":pe("/OpenAction [3 0 R /FitV null]");break;case"fullpage":pe("/OpenAction [3 0 R /Fit]");break;case"original":pe("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ce=""+ts;ce.substr(ce.length-1)==="%"&&(ts=parseInt(ts)/100),typeof ts=="number"&&pe("/OpenAction [3 0 R /XYZ null null "+k(ts)+"]")}switch(rt||(rt="continuous"),rt){case"continuous":pe("/PageLayout /OneColumn");break;case"single":pe("/PageLayout /SinglePage");break;case"two":case"twoleft":pe("/PageLayout /TwoColumnLeft");break;case"tworight":pe("/PageLayout /TwoColumnRight")}Pe&&pe("/PageMode /"+Pe),rr.publish("putCatalog"),pe(">>"),pe("endobj")},vn=h.__private__.putTrailer=function(){pe("trailer"),pe("<<"),pe("/Size "+(je+1)),pe("/Root "+je+" 0 R"),pe("/Info "+(je-1)+" 0 R"),u!==null&&pe("/Encrypt "+rn.oid+" 0 R"),pe("/ID [ <"+ae+"> <"+ae+"> ]"),pe(">>")},ev=h.__private__.putHeader=function(){pe("%PDF-"+p),pe("%")},tv=h.__private__.putXRef=function(){var S="0000000000";pe("xref"),pe("0 "+(je+1)),pe("0000000000 65535 f ");for(var B=1;B<=je;B++)typeof be[B]=="function"?pe((S+be[B]()).slice(-10)+" 00000 n "):be[B]!==void 0?pe((S+be[B]).slice(-10)+" 00000 n "):pe("0000000000 00000 n ")},zl=h.__private__.buildDocument=function(){var S;je=0,Te=0,q=[],be=[],Be=[],Pc=In(),xo=In(),qe(q),rr.publish("buildDocument"),ev(),tl(),function(){rr.publish("putAdditionalObjects");for(var ce=0;ce<Be.length;ce++){var Se=Be[ce];Vn(Se.objId,!0),pe(Se.content),pe("endobj")}rr.publish("postPutAdditionalObjects")}(),S=[],function(){for(var ce in zt)zt.hasOwnProperty(ce)&&(m===!1||m===!0&&f.hasOwnProperty(ce))&&ou(zt[ce])}(),function(){var ce;for(ce in Ns)Ns.hasOwnProperty(ce)&&Dj(Ns[ce])}(),function(){for(var ce in na)na.hasOwnProperty(ce)&&km(na[ce])}(),function(ce){var Se;for(Se in rs)rs.hasOwnProperty(Se)&&(rs[Se]instanceof Lu?Am(rs[Se]):rs[Se]instanceof xh&&Pm(rs[Se],ce))}(S),rr.publish("putResources"),S.forEach(Yf),Yf({resourcesOid:xo,objectOid:Number.MAX_SAFE_INTEGER}),rr.publish("postPutResources"),u!==null&&(rn.oid=Kr(),pe("<<"),pe("/Filter /Standard"),pe("/V "+rn.v),pe("/R "+rn.r),pe("/U <"+rn.toHexString(rn.U)+">"),pe("/O <"+rn.toHexString(rn.O)+">"),pe("/P "+rn.P),pe(">>"),pe("endobj")),Em(),Ij();var B=Te;return tv(),vn(),pe("startxref"),pe(""+B),pe("%%EOF"),qe(Ve[Z]),q.join(`
`)},lu=h.__private__.getBlob=function(S){return new Blob([ns(S)],{type:"application/pdf"})},yo=h.output=h.__private__.output=(Bi=function(S,B){switch(typeof(B=B||{})=="string"?B={filename:B}:B.filename=B.filename||"generated.pdf",S){case void 0:return zl();case"save":h.save(B.filename);break;case"arraybuffer":return ns(zl());case"blob":return lu(zl());case"bloburi":case"bloburl":if(ms.URL!==void 0&&typeof ms.URL.createObjectURL=="function")return ms.URL&&ms.URL.createObjectURL(lu(zl()))||void 0;vr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ce="",Se=zl();try{ce=RA(Se)}catch{ce=RA(unescape(encodeURIComponent(Se)))}return"data:application/pdf;filename="+B.filename+";base64,"+ce;case"pdfobjectnewwindow":if(Object.prototype.toString.call(ms)==="[object Window]"){var Le="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ge=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';B.pdfObjectUrl&&(Le=B.pdfObjectUrl,Ge="");var ot='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Le+'"'+Ge+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(B)+");<\/script></body></html>",Ut=ms.open();return Ut!==null&&Ut.document.write(ot),Ut}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(ms)==="[object Window]"){var Zt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(B.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+B.filename+'" width="500px" height="400px" /></body></html>',fs=ms.open();if(fs!==null){fs.document.write(Zt);var ys=this;fs.document.documentElement.querySelector("#pdfViewer").onload=function(){fs.document.title=B.filename,fs.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(ys.output("bloburl"))}}return fs}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(ms)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Js='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",B)+'"></iframe></body></html>',Br=ms.open();if(Br!==null&&(Br.document.write(Js),Br.document.title=B.filename),Br||typeof safari>"u")return Br;break;case"datauri":case"dataurl":return ms.document.location.href=this.output("datauristring",B);default:return null}},Bi.foo=function(){try{return Bi.apply(this,arguments)}catch(ce){var S=ce.stack||"";~S.indexOf(" at ")&&(S=S.split(" at ")[1]);var B="Error in function "+S.split(`
`)[0].split("<")[0]+": "+ce.message;if(!ms.console)throw new Error(B);ms.console.error(B,ce),ms.alert&&alert(B)}},Bi.foo.bar=Bi,Bi.foo),cu=function(S){return Array.isArray(nu)===!0&&nu.indexOf(S)>-1};switch(n){case"pt":It=1;break;case"mm":It=72/25.4;break;case"cm":It=72/2.54;break;case"in":It=72;break;case"px":It=cu("px_scaling")==1?.75:96/72;break;case"pc":case"em":It=12;break;case"ex":It=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);It=n}var rn=null;G(),K();var Zf=h.__private__.getPageInfo=h.getPageInfo=function(S){if(isNaN(S)||S%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:gs[S].objId,pageNumber:S,pageContext:gs[S]}},Rj=h.__private__.getPageInfoByObjId=function(S){if(isNaN(S)||S%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var B in gs)if(gs[B].objId===S)break;return Zf(B)},Fj=h.__private__.getCurrentPageInfo=h.getCurrentPageInfo=function(){return{objId:gs[Z].objId,pageNumber:Z,pageContext:gs[Z]}};h.addPage=function(){return Qg.apply(this,arguments),this},h.setPage=function(){return Zg.apply(this,arguments),qe.call(this,Ve[Z]),this},h.insertPage=function(S){return this.addPage(),this.movePage(Z,S),this},h.movePage=function(S,B){var ce,Se;if(S>B){ce=Ve[S],Se=gs[S];for(var Le=S;Le>B;Le--)Ve[Le]=Ve[Le-1],gs[Le]=gs[Le-1];Ve[B]=ce,gs[B]=Se,this.setPage(B)}else if(S<B){ce=Ve[S],Se=gs[S];for(var Ge=S;Ge<B;Ge++)Ve[Ge]=Ve[Ge+1],gs[Ge]=gs[Ge+1];Ve[B]=ce,gs[B]=Se,this.setPage(B)}return this},h.deletePage=function(){return Qf.apply(this,arguments),this},h.__private__.text=h.text=function(S,B,ce,Se,Le){var Ge,ot,Ut,Zt,fs,ys,Js,Br,yn,jr=(Se=Se||{}).scope||this;if(typeof S=="number"&&typeof B=="number"&&(typeof ce=="string"||Array.isArray(ce))){var Sn=ce;ce=B,B=S,S=Sn}if(arguments[3]instanceof is==0?(Ut=arguments[4],Zt=arguments[5],mr(Js=arguments[3])==="object"&&Js!==null||(typeof Ut=="string"&&(Zt=Ut,Ut=null),typeof Js=="string"&&(Zt=Js,Js=null),typeof Js=="number"&&(Ut=Js,Js=null),Se={flags:Js,angle:Ut,align:Zt})):(M("The transform parameter of text() with a Matrix value"),yn=Le),isNaN(B)||isNaN(ce)||S==null)throw new Error("Invalid arguments passed to jsPDF.text");if(S.length===0)return jr;var jn,Hn="",qi=typeof Se.lineHeightFactor=="number"?Se.lineHeightFactor:uu,za=jr.internal.scaleFactor;function cv(nr){return nr=nr.split("	").join(Array(Se.TabLen||9).join(" ")),zi(nr,Js)}function Im(nr){for(var xr,an=nr.concat(),Cn=[],Gl=an.length;Gl--;)typeof(xr=an.shift())=="string"?Cn.push(xr):Array.isArray(nr)&&(xr.length===1||xr[1]===void 0&&xr[2]===void 0)?Cn.push(xr[0]):Cn.push([xr[0],xr[1],xr[2]]);return Cn}function gu(nr,xr){var an;if(typeof nr=="string")an=xr(nr)[0];else if(Array.isArray(nr)){for(var Cn,Gl,pp=nr.concat(),Om=[],mv=pp.length;mv--;)typeof(Cn=pp.shift())=="string"?Om.push(xr(Cn)[0]):Array.isArray(Cn)&&typeof Cn[0]=="string"&&(Gl=xr(Cn[0],Cn[1],Cn[2]),Om.push([Gl[0],Gl[1],Gl[2]]));an=Om}return an}var Mc=!1,vu=!0;if(typeof S=="string")Mc=!0;else if(Array.isArray(S)){var yu=S.concat();ot=[];for(var ju,aa=yu.length;aa--;)(typeof(ju=yu.shift())!="string"||Array.isArray(ju)&&typeof ju[0]!="string")&&(vu=!1);Mc=vu}if(Mc===!1)throw new Error('Type of text must be string or Array. "'+S+'" is not recognized.');typeof S=="string"&&(S=S.match(/[\r?\n]/)?S.split(/\r\n|\r|\n/g):[S]);var bu=dt/jr.internal.scaleFactor,Nu=bu*(qi-1);switch(Se.baseline){case"bottom":ce-=Nu;break;case"top":ce+=bu-Nu;break;case"hanging":ce+=bu-2*Nu;break;case"middle":ce+=bu/2-Nu}if((ys=Se.maxWidth||0)>0&&(typeof S=="string"?S=jr.splitTextToSize(S,ys):Object.prototype.toString.call(S)==="[object Array]"&&(S=S.reduce(function(nr,xr){return nr.concat(jr.splitTextToSize(xr,ys))},[]))),Ge={text:S,x:B,y:ce,options:Se,mutex:{pdfEscape:zi,activeFontKey:gt,fonts:zt,activeFontSize:dt}},rr.publish("preProcessText",Ge),S=Ge.text,Ut=(Se=Ge.options).angle,yn instanceof is==0&&Ut&&typeof Ut=="number"){Ut*=Math.PI/180,Se.rotationDirection===0&&(Ut=-Ut),_===w&&(Ut=-Ut);var ip=Math.cos(Ut),op=Math.sin(Ut);yn=new is(ip,op,-op,ip,0,0)}else Ut&&Ut instanceof is&&(yn=Ut);_!==w||yn||(yn=Ul),(fs=Se.charSpace||Lm)!==void 0&&(Hn+=T(z(fs))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Br=Se.horizontalScale)!==void 0&&(Hn+=T(100*Br)+` Tz
`),Se.lang;var Yr=-1,Kl=Se.renderingMode!==void 0?Se.renderingMode:Se.stroke,Rm=jr.internal.getCurrentPageInfo().pageContext;switch(Kl){case 0:case!1:case"fill":Yr=0;break;case 1:case!0:case"stroke":Yr=1;break;case 2:case"fillThenStroke":Yr=2;break;case 3:case"invisible":Yr=3;break;case 4:case"fillAndAddForClipping":Yr=4;break;case 5:case"strokeAndAddPathForClipping":Yr=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Yr=6;break;case 7:case"addToPathForClipping":Yr=7}var dv=Rm.usedRenderingMode!==void 0?Rm.usedRenderingMode:-1;Yr!==-1?Hn+=Yr+` Tr
`:dv!==-1&&(Hn+=`0 Tr
`),Yr!==-1&&(Rm.usedRenderingMode=Yr),Zt=Se.align||"left";var Vi,wu=dt*qi,lp=jr.internal.pageSize.getWidth(),cp=zt[gt];fs=Se.charSpace||Lm,ys=Se.maxWidth||0,Js=Object.assign({autoencode:!0,noBOM:!0},Se.flags);var Lc=[],_u=function(nr){return jr.getStringUnitWidth(nr,{font:cp,charSpace:fs,fontSize:dt,doKerning:!1})*dt/za};if(Object.prototype.toString.call(S)==="[object Array]"){var ii;ot=Im(S),Zt!=="left"&&(Vi=ot.map(_u));var oi,Dc=0;if(Zt==="right"){B-=Vi[0],S=[],aa=ot.length;for(var Yl=0;Yl<aa;Yl++)Yl===0?(oi=ql(B),ii=Vl(ce)):(oi=z(Dc-Vi[Yl]),ii=-wu),S.push([ot[Yl],oi,ii]),Dc=Vi[Yl]}else if(Zt==="center"){B-=Vi[0]/2,S=[],aa=ot.length;for(var Ic=0;Ic<aa;Ic++)Ic===0?(oi=ql(B),ii=Vl(ce)):(oi=z((Dc-Vi[Ic])/2),ii=-wu),S.push([ot[Ic],oi,ii]),Dc=Vi[Ic]}else if(Zt==="left"){S=[],aa=ot.length;for(var dp=0;dp<aa;dp++)S.push(ot[dp])}else if(Zt==="justify"&&cp.encoding==="Identity-H"){S=[],aa=ot.length,ys=ys!==0?ys:lp;for(var Fm=0,nn=0;nn<aa;nn++)if(ii=nn===0?Vl(ce):-wu,oi=nn===0?ql(B):Fm,nn<aa-1){var uv=z((ys-Vi[nn])/(ot[nn].split(" ").length-1)),rl=ot[nn].split(" ");S.push([rl[0]+" ",oi,ii]),Fm=0;for(var nl=1;nl<rl.length;nl++){var up=(_u(rl[nl-1]+" "+rl[nl])-_u(rl[nl]))*za+uv;nl==rl.length-1?S.push([rl[nl],up,0]):S.push([rl[nl]+" ",up,0]),Fm-=up}}else S.push([ot[nn],oi,ii]);S.push(["",Fm,0])}else{if(Zt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(S=[],aa=ot.length,ys=ys!==0?ys:lp,nn=0;nn<aa;nn++){ii=nn===0?Vl(ce):-wu,oi=nn===0?ql(B):0;var mp=ot[nn].split(" ").length-1,hp=mp>0?(ys-Vi[nn])/mp:0;nn<aa-1?Lc.push(T(z(hp))):Lc.push(0),S.push([ot[nn],oi,ii])}}}(typeof Se.R2L=="boolean"?Se.R2L:ve)===!0&&(S=gu(S,function(nr,xr,an){return[nr.split("").reverse().join(""),xr,an]})),Ge={text:S,x:B,y:ce,options:Se,mutex:{pdfEscape:zi,activeFontKey:gt,fonts:zt,activeFontSize:dt}},rr.publish("postProcessText",Ge),S=Ge.text,jn=Ge.mutex.isHex||!1;var fp=zt[gt].encoding;fp!=="WinAnsiEncoding"&&fp!=="StandardEncoding"||(S=gu(S,function(nr,xr,an){return[cv(nr),xr,an]})),ot=Im(S),S=[];for(var Rc,Fc,Oc,Su=Array.isArray(ot[0])?1:0,$c="",Cu=function(nr,xr,an){var Cn="";return an instanceof is?(an=typeof Se.angle=="number"?Bl(an,new is(1,0,0,1,nr,xr)):Bl(new is(1,0,0,1,nr,xr),an),_===w&&(an=Bl(new is(1,0,0,-1,0,0),an)),Cn=an.join(" ")+` Tm
`):Cn=T(nr)+" "+T(xr)+` Td
`,Cn},Hi=0;Hi<ot.length;Hi++){switch($c="",Su){case 1:Oc=(jn?"<":"(")+ot[Hi][0]+(jn?">":")"),Rc=parseFloat(ot[Hi][1]),Fc=parseFloat(ot[Hi][2]);break;case 0:Oc=(jn?"<":"(")+ot[Hi]+(jn?">":")"),Rc=ql(B),Fc=Vl(ce)}Lc!==void 0&&Lc[Hi]!==void 0&&($c=Lc[Hi]+` Tw
`),Hi===0?S.push($c+Cu(Rc,Fc,yn)+Oc):Su===0?S.push($c+Oc):Su===1&&S.push($c+Cu(Rc,Fc,yn)+Oc)}S=Su===0?S.join(` Tj
T* `):S.join(` Tj
`),S+=` Tj
`;var al=`BT
/`;return al+=gt+" "+dt+` Tf
`,al+=T(dt*qi)+` TL
`,al+=mu+`
`,al+=Hn,al+=S,pe(al+="ET"),f[gt]=!0,jr};var Oj=h.__private__.clip=h.clip=function(S){return pe(S==="evenodd"?"W*":"W"),this};h.clipEvenOdd=function(){return Oj("evenodd")},h.__private__.discardPath=h.discardPath=function(){return pe("n"),this};var sl=h.__private__.isValidStyle=function(S){var B=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(S)!==-1&&(B=!0),B};h.__private__.setDefaultPathOperation=h.setDefaultPathOperation=function(S){return sl(S)&&(d=S),this};var sv=h.__private__.getStyle=h.getStyle=function(S){var B=d;switch(S){case"D":case"S":B="S";break;case"F":B="f";break;case"FD":case"DF":B="B";break;case"f":case"f*":case"B":case"B*":B=S}return B},rv=h.close=function(){return pe("h"),this};h.stroke=function(){return pe("S"),this},h.fill=function(S){return Ec("f",S),this},h.fillEvenOdd=function(S){return Ec("f*",S),this},h.fillStroke=function(S){return Ec("B",S),this},h.fillStrokeEvenOdd=function(S){return Ec("B*",S),this};var Ec=function(S,B){mr(B)==="object"?Bj(B,S):pe(S)},Xf=function(S){S===null||_===w&&S===void 0||(S=sv(S),pe(S))};function $j(S,B,ce,Se,Le){var Ge=new xh(B||this.boundingBox,ce||this.xStep,Se||this.yStep,this.gState,Le||this.matrix);Ge.stream=this.stream;var ot=S+"$$"+this.cloneIndex+++"$$";return $i(ot,Ge),Ge}var Bj=function(S,B){var ce=Fs[S.key],Se=rs[ce];if(Se instanceof Lu)pe("q"),pe(Uj(B)),Se.gState&&h.setGState(Se.gState),pe(S.matrix.toString()+" cm"),pe("/"+ce+" sh"),pe("Q");else if(Se instanceof xh){var Le=new is(1,0,0,-1,0,xu());S.matrix&&(Le=Le.multiply(S.matrix||Ul),ce=$j.call(Se,S.key,S.boundingBox,S.xStep,S.yStep,Le).id),pe("q"),pe("/Pattern cs"),pe("/"+ce+" scn"),Se.gState&&h.setGState(Se.gState),pe(B),pe("Q")}},Uj=function(S){switch(S){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Jf=h.moveTo=function(S,B){return pe(T(z(S))+" "+T(W(B))+" m"),this},du=h.lineTo=function(S,B){return pe(T(z(S))+" "+T(W(B))+" l"),this},Tc=h.curveTo=function(S,B,ce,Se,Le,Ge){return pe([T(z(S)),T(W(B)),T(z(ce)),T(W(Se)),T(z(Le)),T(W(Ge)),"c"].join(" ")),this};h.__private__.line=h.line=function(S,B,ce,Se,Le){if(isNaN(S)||isNaN(B)||isNaN(ce)||isNaN(Se)||!sl(Le))throw new Error("Invalid arguments passed to jsPDF.line");return _===j?this.lines([[ce-S,Se-B]],S,B,[1,1],Le||"S"):this.lines([[ce-S,Se-B]],S,B,[1,1]).stroke()},h.__private__.lines=h.lines=function(S,B,ce,Se,Le,Ge){var ot,Ut,Zt,fs,ys,Js,Br,yn,jr,Sn,jn,Hn;if(typeof S=="number"&&(Hn=ce,ce=B,B=S,S=Hn),Se=Se||[1,1],Ge=Ge||!1,isNaN(B)||isNaN(ce)||!Array.isArray(S)||!Array.isArray(Se)||!sl(Le)||typeof Ge!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Jf(B,ce),ot=Se[0],Ut=Se[1],fs=S.length,Sn=B,jn=ce,Zt=0;Zt<fs;Zt++)(ys=S[Zt]).length===2?(Sn=ys[0]*ot+Sn,jn=ys[1]*Ut+jn,du(Sn,jn)):(Js=ys[0]*ot+Sn,Br=ys[1]*Ut+jn,yn=ys[2]*ot+Sn,jr=ys[3]*Ut+jn,Sn=ys[4]*ot+Sn,jn=ys[5]*Ut+jn,Tc(Js,Br,yn,jr,Sn,jn));return Ge&&rv(),Xf(Le),this},h.path=function(S){for(var B=0;B<S.length;B++){var ce=S[B],Se=ce.c;switch(ce.op){case"m":Jf(Se[0],Se[1]);break;case"l":du(Se[0],Se[1]);break;case"c":Tc.apply(this,Se);break;case"h":rv()}}return this},h.__private__.rect=h.rect=function(S,B,ce,Se,Le){if(isNaN(S)||isNaN(B)||isNaN(ce)||isNaN(Se)||!sl(Le))throw new Error("Invalid arguments passed to jsPDF.rect");return _===j&&(Se=-Se),pe([T(z(S)),T(W(B)),T(z(ce)),T(z(Se)),"re"].join(" ")),Xf(Le),this},h.__private__.triangle=h.triangle=function(S,B,ce,Se,Le,Ge,ot){if(isNaN(S)||isNaN(B)||isNaN(ce)||isNaN(Se)||isNaN(Le)||isNaN(Ge)||!sl(ot))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ce-S,Se-B],[Le-ce,Ge-Se],[S-Le,B-Ge]],S,B,[1,1],ot,!0),this},h.__private__.roundedRect=h.roundedRect=function(S,B,ce,Se,Le,Ge,ot){if(isNaN(S)||isNaN(B)||isNaN(ce)||isNaN(Se)||isNaN(Le)||isNaN(Ge)||!sl(ot))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Ut=4/3*(Math.SQRT2-1);return Le=Math.min(Le,.5*ce),Ge=Math.min(Ge,.5*Se),this.lines([[ce-2*Le,0],[Le*Ut,0,Le,Ge-Ge*Ut,Le,Ge],[0,Se-2*Ge],[0,Ge*Ut,-Le*Ut,Ge,-Le,Ge],[2*Le-ce,0],[-Le*Ut,0,-Le,-Ge*Ut,-Le,-Ge],[0,2*Ge-Se],[0,-Ge*Ut,Le*Ut,-Ge,Le,-Ge]],S+Le,B,[1,1],ot,!0),this},h.__private__.ellipse=h.ellipse=function(S,B,ce,Se,Le){if(isNaN(S)||isNaN(B)||isNaN(ce)||isNaN(Se)||!sl(Le))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ge=4/3*(Math.SQRT2-1)*ce,ot=4/3*(Math.SQRT2-1)*Se;return Jf(S+ce,B),Tc(S+ce,B-ot,S+Ge,B-Se,S,B-Se),Tc(S-Ge,B-Se,S-ce,B-ot,S-ce,B),Tc(S-ce,B+ot,S-Ge,B+Se,S,B+Se),Tc(S+Ge,B+Se,S+ce,B+ot,S+ce,B),Xf(Le),this},h.__private__.circle=h.circle=function(S,B,ce,Se){if(isNaN(S)||isNaN(B)||isNaN(ce)||!sl(Se))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(S,B,ce,ce,Se)},h.setFont=function(S,B,ce){return ce&&(B=L(B,ce)),gt=Jg(S,B,{disableWarning:!1}),this};var zj=h.__private__.getFont=h.getFont=function(){return zt[Jg.apply(h,arguments)]};h.__private__.getFontList=h.getFontList=function(){var S,B,ce={};for(S in xs)if(xs.hasOwnProperty(S))for(B in ce[S]=[],xs[S])xs[S].hasOwnProperty(B)&&ce[S].push(B);return ce},h.addFont=function(S,B,ce,Se,Le){var Ge=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ge.indexOf(arguments[3])!==-1?Le=arguments[3]:arguments[3]&&Ge.indexOf(arguments[3])==-1&&(ce=L(ce,Se)),Gg.call(this,S,B,ce,Le=Le||"Identity-H")};var uu,ep=t.lineWidth||.200025,vs=h.__private__.getLineWidth=h.getLineWidth=function(){return ep},qj=h.__private__.setLineWidth=h.setLineWidth=function(S){return ep=S,pe(T(z(S))+" w"),this};h.__private__.setLineDash=es.API.setLineDash=es.API.setLineDashPattern=function(S,B){if(S=S||[],B=B||0,isNaN(B)||!Array.isArray(S))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return S=S.map(function(ce){return T(z(ce))}).join(" "),B=T(z(B)),pe("["+S+"] "+B+" d"),this};var Vj=h.__private__.getLineHeight=h.getLineHeight=function(){return dt*uu};h.__private__.getLineHeight=h.getLineHeight=function(){return dt*uu};var Hj=h.__private__.setLineHeightFactor=h.setLineHeightFactor=function(S){return typeof(S=S||1.15)=="number"&&(uu=S),this},Wj=h.__private__.getLineHeightFactor=h.getLineHeightFactor=function(){return uu};Hj(t.lineHeight);var ql=h.__private__.getHorizontalCoordinate=function(S){return z(S)},Vl=h.__private__.getVerticalCoordinate=function(S){return _===w?S:gs[Z].mediaBox.topRightY-gs[Z].mediaBox.bottomLeftY-z(S)},Kj=h.__private__.getHorizontalCoordinateString=h.getHorizontalCoordinateString=function(S){return T(ql(S))},Yj=h.__private__.getVerticalCoordinateString=h.getVerticalCoordinateString=function(S){return T(Vl(S))},Tm=t.strokeColor||"0 G";h.__private__.getStrokeColor=h.getDrawColor=function(){return el(Tm)},h.__private__.setStrokeColor=h.setDrawColor=function(S,B,ce,Se){return Tm=go({ch1:S,ch2:B,ch3:ce,ch4:Se,pdfColorType:"draw",precision:2}),pe(Tm),this};var tp=t.fillColor||"0 g";h.__private__.getFillColor=h.getFillColor=function(){return el(tp)},h.__private__.setFillColor=h.setFillColor=function(S,B,ce,Se){return tp=go({ch1:S,ch2:B,ch3:ce,ch4:Se,pdfColorType:"fill",precision:2}),pe(tp),this};var mu=t.textColor||"0 g",Mm=h.__private__.getTextColor=h.getTextColor=function(){return el(mu)};h.__private__.setTextColor=h.setTextColor=function(S,B,ce,Se){return mu=go({ch1:S,ch2:B,ch3:ce,ch4:Se,pdfColorType:"text",precision:3}),this};var Lm=t.charSpace,Gj=h.__private__.getCharSpace=h.getCharSpace=function(){return parseFloat(Lm||0)};h.__private__.setCharSpace=h.setCharSpace=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Lm=S,this};var sp=0;h.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},h.__private__.setLineCap=h.setLineCap=function(S){var B=h.CapJoinStyles[S];if(B===void 0)throw new Error("Line cap style of '"+S+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return sp=B,pe(B+" J"),this};var rp=0;h.__private__.setLineJoin=h.setLineJoin=function(S){var B=h.CapJoinStyles[S];if(B===void 0)throw new Error("Line join style of '"+S+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return rp=B,pe(B+" j"),this},h.__private__.setLineMiterLimit=h.__private__.setMiterLimit=h.setLineMiterLimit=h.setMiterLimit=function(S){if(S=S||0,isNaN(S))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return pe(T(z(S))+" M"),this},h.GState=v1,h.setGState=function(S){(S=typeof S=="string"?Ns[sn[S]]:hu(null,S)).equals(_n)||(pe("/"+S.id+" gs"),_n=S)};var hu=function(S,B){if(!S||!sn[S]){var ce=!1;for(var Se in Ns)if(Ns.hasOwnProperty(Se)&&Ns[Se].equals(B)){ce=!0;break}if(ce)B=Ns[Se];else{var Le="GS"+(Object.keys(Ns).length+1).toString(10);Ns[Le]=B,B.id=Le}return S&&(sn[S]=B.id),rr.publish("addGState",B),B}};h.addGState=function(S,B){return hu(S,B),this},h.saveGraphicsState=function(){return pe("q"),sr.push({key:gt,size:dt,color:mu}),this},h.restoreGraphicsState=function(){pe("Q");var S=sr.pop();return gt=S.key,dt=S.size,mu=S.color,_n=null,this},h.setCurrentTransformationMatrix=function(S){return pe(S.toString()+" cm"),this},h.comment=function(S){return pe("#"+S),this};var fu=function(S,B){var ce=S||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ce},set:function(Ge){isNaN(Ge)||(ce=parseFloat(Ge))}});var Se=B||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Se},set:function(Ge){isNaN(Ge)||(Se=parseFloat(Ge))}});var Le="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Le},set:function(Ge){Le=Ge.toString()}}),this},np=function(S,B,ce,Se){fu.call(this,S,B),this.type="rect";var Le=ce||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Le},set:function(ot){isNaN(ot)||(Le=parseFloat(ot))}});var Ge=Se||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ge},set:function(ot){isNaN(ot)||(Ge=parseFloat(ot))}}),this},Dm=function(){this.page=pr,this.currentPage=Z,this.pages=Ve.slice(0),this.pagesContext=gs.slice(0),this.x=At,this.y=fr,this.matrix=Us,this.width=nv(Z),this.height=Hl(Z),this.outputDestination=vt,this.id="",this.objectNumber=-1};Dm.prototype.restore=function(){pr=this.page,Z=this.currentPage,gs=this.pagesContext,Ve=this.pages,At=this.x,fr=this.y,Us=this.matrix,av(Z,this.width),Wl(Z,this.height),vt=this.outputDestination};var ap=function(S,B,ce,Se,Le){Jo.push(new Dm),pr=Z=0,Ve=[],At=S,fr=B,Us=Le,Gf([ce,Se])};for(var pu in h.beginFormObject=function(S,B,ce,Se,Le){return ap(S,B,ce,Se,Le),this},h.endFormObject=function(S){return function(B){if($l[B])Jo.pop().restore();else{var ce=new Dm,Se="Xo"+(Object.keys(na).length+1).toString(10);ce.id=Se,$l[B]=Se,na[Se]=ce,rr.publish("addFormObject",ce),Jo.pop().restore()}}(S),this},h.doFormObject=function(S,B){var ce=na[$l[S]];return pe("q"),pe(B.toString()+" cm"),pe("/"+ce.id+" Do"),pe("Q"),this},h.getFormObject=function(S){var B=na[$l[S]];return{x:B.x,y:B.y,width:B.width,height:B.height,matrix:B.matrix}},h.save=function(S,B){return S=S||"generated.pdf",(B=B||{}).returnPromise=B.returnPromise||!1,B.returnPromise===!1?(Mu(lu(zl()),S),typeof Mu.unload=="function"&&ms.setTimeout&&setTimeout(Mu.unload,911),this):new Promise(function(ce,Se){try{var Le=Mu(lu(zl()),S);typeof Mu.unload=="function"&&ms.setTimeout&&setTimeout(Mu.unload,911),ce(Le)}catch(Ge){Se(Ge.message)}})},es.API)es.API.hasOwnProperty(pu)&&(pu==="events"&&es.API.events.length?function(S,B){var ce,Se,Le;for(Le=B.length-1;Le!==-1;Le--)ce=B[Le][0],Se=B[Le][1],S.subscribe.apply(S,[ce].concat(typeof Se=="function"?[Se]:Se))}(rr,es.API.events):h[pu]=es.API[pu]);function nv(S){return gs[S].mediaBox.topRightX-gs[S].mediaBox.bottomLeftX}function av(S,B){gs[S].mediaBox.topRightX=B+gs[S].mediaBox.bottomLeftX}function Hl(S){return gs[S].mediaBox.topRightY-gs[S].mediaBox.bottomLeftY}function Wl(S,B){gs[S].mediaBox.topRightY=B+gs[S].mediaBox.bottomLeftY}var iv=h.getPageWidth=function(S){return nv(S=S||Z)/It},ov=h.setPageWidth=function(S,B){av(S,B*It)},xu=h.getPageHeight=function(S){return Hl(S=S||Z)/It},lv=h.setPageHeight=function(S,B){Wl(S,B*It)};return h.internal={pdfEscape:zi,getStyle:sv,getFont:zj,getFontSize:St,getCharSpace:Gj,getTextColor:Mm,getLineHeight:Vj,getLineHeightFactor:Wj,getLineWidth:vs,write:ps,getHorizontalCoordinate:ql,getVerticalCoordinate:Vl,getCoordinateString:Kj,getVerticalCoordinateString:Yj,collections:{},newObject:Kr,newAdditionalObject:au,newObjectDeferred:In,newObjectDeferredBegin:Vn,getFilters:vo,putStream:Ui,events:rr,scaleFactor:It,pageSize:{getWidth:function(){return iv(Z)},setWidth:function(S){ov(Z,S)},getHeight:function(){return xu(Z)},setHeight:function(S){lv(Z,S)}},encryptionOptions:u,encryption:rn,getEncryptor:function(S){return u!==null?rn.encryptor(S,0):function(B){return B}},output:yo,getNumberOfPages:Xg,pages:Ve,out:pe,f2:k,f3:D,getPageInfo:Zf,getPageInfoByObjId:Rj,getCurrentPageInfo:Fj,getPDFVersion:g,Point:fu,Rectangle:np,Matrix:is,hasHotfix:cu},Object.defineProperty(h.internal.pageSize,"width",{get:function(){return iv(Z)},set:function(S){ov(Z,S)},enumerable:!0,configurable:!0}),Object.defineProperty(h.internal.pageSize,"height",{get:function(){return xu(Z)},set:function(S){lv(Z,S)},enumerable:!0,configurable:!0}),(function(S){for(var B=0,ce=ss.length;B<ce;B++){var Se=Gg.call(this,S[B][0],S[B][1],S[B][2],ss[B][3],!0);m===!1&&(f[Se]=!0);var Le=S[B][0].split("-");Yg({id:Se,fontName:Le[0],fontStyle:Le[1]||""})}rr.publish("addFonts",{fonts:zt,dictionary:xs})}).call(h,ss),gt="F1",Qg(a,r),rr.publish("initialized"),h}eh.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},eh.prototype.toHexString=function(t){return t.split("").map(function(s){return("0"+(255&s.charCodeAt(0)).toString(16)).slice(-2)}).join("")},eh.prototype.hexToBytes=function(t){for(var s=[],r=0;r<t.length;r+=2)s.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return s.join("")},eh.prototype.processOwnerPassword=function(t,s){return r5(s5(s).substr(0,5),t)},eh.prototype.encryptor=function(t,s){var r=s5(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&s,s>>8&255)).substr(0,10);return function(n){return r5(r,n)}},v1.prototype.equals=function(t){var s,r="id,objectNumber,equals";if(!t||mr(t)!==mr(this))return!1;var n=0;for(s in this)if(!(r.indexOf(s)>=0)){if(this.hasOwnProperty(s)&&!t.hasOwnProperty(s)||this[s]!==t[s])return!1;n++}for(s in t)t.hasOwnProperty(s)&&r.indexOf(s)<0&&n--;return n===0},es.API={events:[]},es.version="3.0.3";var Xr=es.API,jS=1,Cm=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Qm=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},js=function(t){return t.toFixed(2)},Zc=function(t){return t.toFixed(5)};Xr.__acroform__={};var ai=function(t,s){t.prototype=Object.create(s.prototype),t.prototype.constructor=t},BA=function(t){return t*jS},ll=function(t){var s=new pq,r=Bt.internal.getHeight(t)||0,n=Bt.internal.getWidth(t)||0;return s.BBox=[0,0,Number(js(n)),Number(js(r))],s},hfe=Xr.__acroform__.setBit=function(t,s){if(t=t||0,s=s||0,isNaN(t)||isNaN(s))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<s},ffe=Xr.__acroform__.clearBit=function(t,s){if(t=t||0,s=s||0,isNaN(t)||isNaN(s))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<s)},pfe=Xr.__acroform__.getBit=function(t,s){if(isNaN(t)||isNaN(s))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<s?1:0},mn=Xr.__acroform__.getBitForPdf=function(t,s){if(isNaN(t)||isNaN(s))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return pfe(t,s-1)},hn=Xr.__acroform__.setBitForPdf=function(t,s){if(isNaN(t)||isNaN(s))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return hfe(t,s-1)},fn=Xr.__acroform__.clearBitForPdf=function(t,s){if(isNaN(t)||isNaN(s))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return ffe(t,s-1)},xfe=Xr.__acroform__.calculateCoordinates=function(t,s){var r=s.internal.getHorizontalCoordinate,n=s.internal.getVerticalCoordinate,a=t[0],i=t[1],o=t[2],l=t[3],c={};return c.lowerLeft_X=r(a)||0,c.lowerLeft_Y=n(i+l)||0,c.upperRight_X=r(a+o)||0,c.upperRight_Y=n(i)||0,[Number(js(c.lowerLeft_X)),Number(js(c.lowerLeft_Y)),Number(js(c.upperRight_X)),Number(js(c.upperRight_Y))]},gfe=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var s=[],r=t._V||t.DV,n=n5(t,r),a=t.scope.internal.getFont(t.fontName,t.fontStyle).id;s.push("/Tx BMC"),s.push("q"),s.push("BT"),s.push(t.scope.__private__.encodeColorString(t.color)),s.push("/"+a+" "+js(n.fontSize)+" Tf"),s.push("1 0 0 1 0 0 Tm"),s.push(n.text),s.push("ET"),s.push("Q"),s.push("EMC");var i=ll(t);return i.scope=t.scope,i.stream=s.join(`
`),i}},n5=function(t,s){var r=t.fontSize===0?t.maxFontSize:t.fontSize,n={text:"",fontSize:""},a=(s=(s=s.substr(0,1)=="("?s.substr(1):s).substr(s.length-1)==")"?s.substr(0,s.length-1):s).split(" ");a=t.multiline?a.map(function(k){return k.split(`
`)}):a.map(function(k){return[k]});var i=r,o=Bt.internal.getHeight(t)||0;o=o<0?-o:o;var l=Bt.internal.getWidth(t)||0;l=l<0?-l:l;var c=function(k,D,z){if(k+1<a.length){var W=D+" "+a[k+1][0];return py(W,t,z).width<=l-4}return!1};i++;e:for(;i>0;){s="",i--;var d,u,m=py("3",t,i).height,f=t.multiline?o-i:(o-m)/2,h=f+=2,p=0,g=0,y=0;if(i<=0){s=`(...) Tj
`,s+="% Width of Text: "+py(s,t,i=12).width+", FieldWidth:"+l+`
`;break}for(var v="",j=0,w=0;w<a.length;w++)if(a.hasOwnProperty(w)){var _=!1;if(a[w].length!==1&&y!==a[w].length-1){if((m+2)*(j+2)+2>o)continue e;v+=a[w][y],_=!0,g=w,w--}else{v=(v+=a[w][y]+" ").substr(v.length-1)==" "?v.substr(0,v.length-1):v;var P=parseInt(w),E=c(P,v,i),L=w>=a.length-1;if(E&&!L){v+=" ",y=0;continue}if(E||L){if(L)g=P;else if(t.multiline&&(m+2)*(j+2)+2>o)continue e}else{if(!t.multiline||(m+2)*(j+2)+2>o)continue e;g=P}}for(var T="",M=p;M<=g;M++){var F=a[M];if(t.multiline){if(M===g){T+=F[y]+" ",y=(y+1)%F.length;continue}if(M===p){T+=F[F.length-1]+" ";continue}}T+=F[0]+" "}switch(T=T.substr(T.length-1)==" "?T.substr(0,T.length-1):T,u=py(T,t,i).width,t.textAlign){case"right":d=l-u-2;break;case"center":d=(l-u)/2;break;default:d=2}s+=js(d)+" "+js(h)+` Td
`,s+="("+Cm(T)+`) Tj
`,s+=-js(d)+` 0 Td
`,h=-(i+2),u=0,p=_?g:g+1,j++,v=""}break}return n.text=s,n.fontSize=i,n},py=function(t,s,r){var n=s.scope.internal.getFont(s.fontName,s.fontStyle),a=s.scope.getStringUnitWidth(t,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:s.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},vfe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},yfe=function(t,s){var r={type:"reference",object:t};s.internal.getPageInfo(t.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&s.internal.getPageInfo(t.page).pageContext.annotations.push(r)},jfe=function(t,s){if(s.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Zo.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(vfe)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");jS=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new xq,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var i=n[a];i.objId=void 0,i.hasAnnotation&&yfe(i,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(n,a){var i=!n;for(var o in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(o)){var l=n[o],c=[],d=l.Rect;if(l.Rect&&(l.Rect=xfe(l.Rect,a)),a.internal.newObjectDeferredBegin(l.objId,!0),l.DA=Bt.createDefaultAppearanceStream(l),mr(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=d,l.hasAppearanceStream&&!l.appearanceStreamContent){var u=gfe(l);c.push({key:"AP",value:"<</N "+u+">>"}),a.internal.acroformPlugin.xForms.push(u)}if(l.appearanceStreamContent){var m="";for(var f in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(f)){var h=l.appearanceStreamContent[f];if(m+="/"+f+" ",m+="<<",Object.keys(h).length>=1||Array.isArray(h)){for(var o in h)if(h.hasOwnProperty(o)){var p=h[o];typeof p=="function"&&(p=p.call(a,l)),m+="/"+o+" "+p+" ",a.internal.acroformPlugin.xForms.indexOf(p)>=0||a.internal.acroformPlugin.xForms.push(p)}}else typeof(p=h)=="function"&&(p=p.call(a,l)),m+="/"+o+" "+p,a.internal.acroformPlugin.xForms.indexOf(p)>=0||a.internal.acroformPlugin.xForms.push(p);m+=">>"}c.push({key:"AP",value:`<<
`+m+">>"})}a.internal.putStream({additionalKeyValues:c,objectId:l.objId}),a.internal.out("endobj")}i&&function(g,y){for(var v in g)if(g.hasOwnProperty(v)){var j=v,w=g[v];y.internal.newObjectDeferredBegin(w.objId,!0),mr(w)==="object"&&typeof w.putStream=="function"&&w.putStream(),delete g[j]}}(a.internal.acroformPlugin.xForms,a)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},fq=Xr.__acroform__.arrayToPdfArray=function(t,s,r){var n=function(o){return o};if(Array.isArray(t)){for(var a="[",i=0;i<t.length;i++)switch(i!==0&&(a+=" "),mr(t[i])){case"boolean":case"number":case"object":a+=t[i].toString();break;case"string":t[i].substr(0,1)!=="/"?(s!==void 0&&r&&(n=r.internal.getEncryptor(s)),a+="("+Cm(n(t[i].toString()))+")"):a+=t[i].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},B2=function(t,s,r){var n=function(a){return a};return s!==void 0&&r&&(n=r.internal.getEncryptor(s)),(t=t||"").toString(),"("+Cm(n(t))+")"},jl=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};jl.prototype.toString=function(){return this.objId+" 0 R"},jl.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},jl.prototype.getKeyValueListForStream=function(){var t=[],s=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var r in s)if(Object.getOwnPropertyDescriptor(this,s[r]).configurable===!1){var n=s[r],a=this[n];a&&(Array.isArray(a)?t.push({key:n,value:fq(a,this.objId,this.scope)}):a instanceof jl?(a.scope=this.scope,t.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&t.push({key:n,value:a}))}return t};var pq=function(){jl.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,s=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return s},set:function(r){s=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};ai(pq,jl);var xq=function(){jl.call(this);var t,s=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return s.length>0?s:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return s}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Cm(r(t))+")"}},set:function(r){t=r}})};ai(xq,jl);var Zo=function t(){jl.call(this);var s=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return s},set:function(v){if(isNaN(v))throw new Error('Invalid value "'+v+'" for attribute F supplied.');s=v}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!mn(s,3)},set:function(v){v?this.F=hn(s,3):this.F=fn(s,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(v){if(isNaN(v))throw new Error('Invalid value "'+v+'" for attribute Ff supplied.');r=v}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(v){n=v!==void 0?v:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(v){n[0]=v}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(v){n[1]=v}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(v){n[2]=v}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(v){n[3]=v}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(v){switch(v){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=v;break;default:throw new Error('Invalid value "'+v+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof y1)return;i="FieldObject"+t.FieldNum++}var v=function(j){return j};return this.scope&&(v=this.scope.internal.getEncryptor(this.objId)),"("+Cm(v(i))+")"},set:function(v){i=v.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(v){i=v}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(v){o=v}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(v){l=v}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(v){c=v}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/jS:d},set:function(v){d=v}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(v){u=v}});var m="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!m||this instanceof y1||this instanceof Ju))return B2(m,this.objId,this.scope)},set:function(v){v=v.toString(),m=v}});var f=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof On==0?B2(f,this.objId,this.scope):f},set:function(v){v=v.toString(),f=this instanceof On==0?v.substr(0,1)==="("?Qm(v.substr(1,v.length-2)):Qm(v):v}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof On==1?Qm(f.substr(1,f.length-1)):f},set:function(v){v=v.toString(),f=this instanceof On==1?"/"+v:v}});var h=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(h)return h},set:function(v){this.V=v}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof On==0?B2(h,this.objId,this.scope):h},set:function(v){v=v.toString(),h=this instanceof On==0?v.substr(0,1)==="("?Qm(v.substr(1,v.length-2)):Qm(v):v}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof On==1?Qm(h.substr(1,h.length-1)):h},set:function(v){v=v.toString(),h=this instanceof On==1?"/"+v:v}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var p,g=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return g},set:function(v){v=!!v,g=v}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(p)return p},set:function(v){p=v}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!mn(this.Ff,1)},set:function(v){v?this.Ff=hn(this.Ff,1):this.Ff=fn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!mn(this.Ff,2)},set:function(v){v?this.Ff=hn(this.Ff,2):this.Ff=fn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!mn(this.Ff,3)},set:function(v){v?this.Ff=hn(this.Ff,3):this.Ff=fn(this.Ff,3)}});var y=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(y!==null)return y},set:function(v){if([0,1,2].indexOf(v)===-1)throw new Error('Invalid value "'+v+'" for attribute Q supplied.');y=v}}),Object.defineProperty(this,"textAlign",{get:function(){var v;switch(y){case 0:default:v="left";break;case 1:v="center";break;case 2:v="right"}return v},configurable:!0,enumerable:!0,set:function(v){switch(v){case"right":case 2:y=2;break;case"center":case 1:y=1;break;default:y=0}}})};ai(Zo,jl);var Dh=function(){Zo.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var s=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return fq(s,this.objId,this.scope)},set:function(r){var n,a;a=[],typeof(n=r)=="string"&&(a=function(i,o,l){l||(l=1);for(var c,d=[];c=o.exec(i);)d.push(c[l]);return d}(n,/\((.*?)\)/g)),s=a}}),this.getOptions=function(){return s},this.setOptions=function(r){s=r,this.sort&&s.sort()},this.addOption=function(r){r=(r=r||"").toString(),s.push(r),this.sort&&s.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();s.indexOf(r)!==-1&&(s.splice(s.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!mn(this.Ff,18)},set:function(r){r?this.Ff=hn(this.Ff,18):this.Ff=fn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!mn(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=hn(this.Ff,19):this.Ff=fn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!mn(this.Ff,20)},set:function(r){r?(this.Ff=hn(this.Ff,20),s.sort()):this.Ff=fn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!mn(this.Ff,22)},set:function(r){r?this.Ff=hn(this.Ff,22):this.Ff=fn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!mn(this.Ff,23)},set:function(r){r?this.Ff=hn(this.Ff,23):this.Ff=fn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!mn(this.Ff,27)},set:function(r){r?this.Ff=hn(this.Ff,27):this.Ff=fn(this.Ff,27)}}),this.hasAppearanceStream=!1};ai(Dh,Zo);var Ih=function(){Dh.call(this),this.fontName="helvetica",this.combo=!1};ai(Ih,Dh);var Rh=function(){Ih.call(this),this.combo=!0};ai(Rh,Ih);var Xy=function(){Rh.call(this),this.edit=!0};ai(Xy,Rh);var On=function(){Zo.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!mn(this.Ff,15)},set:function(r){r?this.Ff=hn(this.Ff,15):this.Ff=fn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!mn(this.Ff,16)},set:function(r){r?this.Ff=hn(this.Ff,16):this.Ff=fn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!mn(this.Ff,17)},set:function(r){r?this.Ff=hn(this.Ff,17):this.Ff=fn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!mn(this.Ff,26)},set:function(r){r?this.Ff=hn(this.Ff,26):this.Ff=fn(this.Ff,26)}});var t,s={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(i){return i};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(s).length!==0){var n,a=[];for(n in a.push("<<"),s)a.push("/"+n+" ("+Cm(r(s[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){mr(r)==="object"&&(s=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return s.CA||""},set:function(r){typeof r=="string"&&(s.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}})};ai(On,Zo);var Jy=function(){On.call(this),this.pushButton=!0};ai(Jy,On);var Fh=function(){On.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(s){t=s!==void 0?s:[]}})};ai(Fh,On);var y1=function(){var t,s;Zo.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return s},set:function(a){s=a}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(l){return l};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var i,o=[];for(i in o.push("<<"),n)o.push("/"+i+" ("+Cm(a(n[i]))+")");return o.push(">>"),o.join(`
`)},set:function(a){mr(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Bt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ai(y1,Zo),Fh.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var s in this.Kids)if(this.Kids.hasOwnProperty(s)){var r=this.Kids[s];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},Fh.prototype.createOption=function(t){var s=new y1;return s.Parent=this,s.optionName=t,this.Kids.push(s),bfe.call(this.scope,s),s};var e0=function(){On.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Bt.CheckBox.createAppearanceStream()};ai(e0,On);var Ju=function(){Zo.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!mn(this.Ff,13)},set:function(s){s?this.Ff=hn(this.Ff,13):this.Ff=fn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!mn(this.Ff,21)},set:function(s){s?this.Ff=hn(this.Ff,21):this.Ff=fn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!mn(this.Ff,23)},set:function(s){s?this.Ff=hn(this.Ff,23):this.Ff=fn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!mn(this.Ff,24)},set:function(s){s?this.Ff=hn(this.Ff,24):this.Ff=fn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!mn(this.Ff,25)},set:function(s){s?this.Ff=hn(this.Ff,25):this.Ff=fn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!mn(this.Ff,26)},set:function(s){s?this.Ff=hn(this.Ff,26):this.Ff=fn(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(s){Number.isInteger(s)&&(t=s)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ai(Ju,Zo);var t0=function(){Ju.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!mn(this.Ff,14)},set:function(t){t?this.Ff=hn(this.Ff,14):this.Ff=fn(this.Ff,14)}}),this.password=!0};ai(t0,Ju);var Bt={CheckBox:{createAppearanceStream:function(){return{N:{On:Bt.CheckBox.YesNormal},D:{On:Bt.CheckBox.YesPushDown,Off:Bt.CheckBox.OffPushDown}}},YesPushDown:function(t){var s=ll(t);s.scope=t.scope;var r=[],n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,a=t.scope.__private__.encodeColorString(t.color),i=n5(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+js(Bt.internal.getWidth(t))+" "+js(Bt.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+js(i.fontSize)+" Tf "+a),r.push("BT"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC"),s.stream=r.join(`
`),s},YesNormal:function(t){var s=ll(t);s.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),a=[],i=Bt.internal.getHeight(t),o=Bt.internal.getWidth(t),l=n5(t,t.caption);return a.push("1 g"),a.push("0 0 "+js(o)+" "+js(i)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+js(o-1)+" "+js(i-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+js(l.fontSize)+" Tf "+n),a.push(l.text),a.push("ET"),a.push("Q"),s.stream=a.join(`
`),s},OffPushDown:function(t){var s=ll(t);s.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+js(Bt.internal.getWidth(t))+" "+js(Bt.internal.getHeight(t))+" re"),r.push("f"),s.stream=r.join(`
`),s}},RadioButton:{Circle:{createAppearanceStream:function(t){var s={D:{Off:Bt.RadioButton.Circle.OffPushDown},N:{}};return s.N[t]=Bt.RadioButton.Circle.YesNormal,s.D[t]=Bt.RadioButton.Circle.YesPushDown,s},getCA:function(){return"l"},YesNormal:function(t){var s=ll(t);s.scope=t.scope;var r=[],n=Bt.internal.getWidth(t)<=Bt.internal.getHeight(t)?Bt.internal.getWidth(t)/4:Bt.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=Bt.internal.Bezier_C,i=Number((n*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Zc(Bt.internal.getWidth(t)/2)+" "+Zc(Bt.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),s.stream=r.join(`
`),s},YesPushDown:function(t){var s=ll(t);s.scope=t.scope;var r=[],n=Bt.internal.getWidth(t)<=Bt.internal.getHeight(t)?Bt.internal.getWidth(t)/4:Bt.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),i=Number((a*Bt.internal.Bezier_C).toFixed(5)),o=Number((n*Bt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Zc(Bt.internal.getWidth(t)/2)+" "+Zc(Bt.internal.getHeight(t)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Zc(Bt.internal.getWidth(t)/2)+" "+Zc(Bt.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),r.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),r.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),r.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),r.push("f"),r.push("Q"),s.stream=r.join(`
`),s},OffPushDown:function(t){var s=ll(t);s.scope=t.scope;var r=[],n=Bt.internal.getWidth(t)<=Bt.internal.getHeight(t)?Bt.internal.getWidth(t)/4:Bt.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),i=Number((a*Bt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Zc(Bt.internal.getWidth(t)/2)+" "+Zc(Bt.internal.getHeight(t)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),s.stream=r.join(`
`),s}},Cross:{createAppearanceStream:function(t){var s={D:{Off:Bt.RadioButton.Cross.OffPushDown},N:{}};return s.N[t]=Bt.RadioButton.Cross.YesNormal,s.D[t]=Bt.RadioButton.Cross.YesPushDown,s},getCA:function(){return"8"},YesNormal:function(t){var s=ll(t);s.scope=t.scope;var r=[],n=Bt.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+js(Bt.internal.getWidth(t)-2)+" "+js(Bt.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(js(n.x1.x)+" "+js(n.x1.y)+" m"),r.push(js(n.x2.x)+" "+js(n.x2.y)+" l"),r.push(js(n.x4.x)+" "+js(n.x4.y)+" m"),r.push(js(n.x3.x)+" "+js(n.x3.y)+" l"),r.push("s"),r.push("Q"),s.stream=r.join(`
`),s},YesPushDown:function(t){var s=ll(t);s.scope=t.scope;var r=Bt.internal.calculateCross(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+js(Bt.internal.getWidth(t))+" "+js(Bt.internal.getHeight(t))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+js(Bt.internal.getWidth(t)-2)+" "+js(Bt.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(js(r.x1.x)+" "+js(r.x1.y)+" m"),n.push(js(r.x2.x)+" "+js(r.x2.y)+" l"),n.push(js(r.x4.x)+" "+js(r.x4.y)+" m"),n.push(js(r.x3.x)+" "+js(r.x3.y)+" l"),n.push("s"),n.push("Q"),s.stream=n.join(`
`),s},OffPushDown:function(t){var s=ll(t);s.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+js(Bt.internal.getWidth(t))+" "+js(Bt.internal.getHeight(t))+" re"),r.push("f"),s.stream=r.join(`
`),s}}},createDefaultAppearanceStream:function(t){var s=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+s+" "+t.fontSize+" Tf "+r}};Bt.internal={Bezier_C:.551915024494,calculateCross:function(t){var s=Bt.internal.getWidth(t),r=Bt.internal.getHeight(t),n=Math.min(s,r);return{x1:{x:(s-n)/2,y:(r-n)/2+n},x2:{x:(s-n)/2+n,y:(r-n)/2},x3:{x:(s-n)/2,y:(r-n)/2},x4:{x:(s-n)/2+n,y:(r-n)/2+n}}}},Bt.internal.getWidth=function(t){var s=0;return mr(t)==="object"&&(s=BA(t.Rect[2])),s},Bt.internal.getHeight=function(t){var s=0;return mr(t)==="object"&&(s=BA(t.Rect[3])),s};var bfe=Xr.addField=function(t){if(jfe(this,t),!(t instanceof Zo))throw new Error("Invalid argument passed to jsPDF.addField.");var s;return(s=t).scope.internal.acroformPlugin.printedOut&&(s.scope.internal.acroformPlugin.printedOut=!1,s.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),s.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(s),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Xr.AcroFormChoiceField=Dh,Xr.AcroFormListBox=Ih,Xr.AcroFormComboBox=Rh,Xr.AcroFormEditBox=Xy,Xr.AcroFormButton=On,Xr.AcroFormPushButton=Jy,Xr.AcroFormRadioButton=Fh,Xr.AcroFormCheckBox=e0,Xr.AcroFormTextField=Ju,Xr.AcroFormPasswordField=t0,Xr.AcroFormAppearance=Bt,Xr.AcroForm={ChoiceField:Dh,ListBox:Ih,ComboBox:Rh,EditBox:Xy,Button:On,PushButton:Jy,RadioButton:Fh,CheckBox:e0,TextField:Ju,PasswordField:t0,Appearance:Bt},es.AcroForm={ChoiceField:Dh,ListBox:Ih,ComboBox:Rh,EditBox:Xy,Button:On,PushButton:Jy,RadioButton:Fh,CheckBox:e0,TextField:Ju,PasswordField:t0,Appearance:Bt};function gq(t){return t.reduce(function(s,r,n){return s[r]=n,s},{})}(function(t){var s="addImage_";t.__addimage__={};var r="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=t.__addimage__.getImageFileTypeByImageData=function(k,D){var z,W,ue,ae,Ne,K=r;if((D=D||r)==="RGBA"||k.data!==void 0&&k.data instanceof Uint8ClampedArray&&"height"in k&&"width"in k)return"RGBA";if(E(k))for(Ne in n)for(ue=n[Ne],z=0;z<ue.length;z+=1){for(ae=!0,W=0;W<ue[z].length;W+=1)if(ue[z][W]!==void 0&&ue[z][W]!==k[W]){ae=!1;break}if(ae===!0){K=Ne;break}}else for(Ne in n)for(ue=n[Ne],z=0;z<ue.length;z+=1){for(ae=!0,W=0;W<ue[z].length;W+=1)if(ue[z][W]!==void 0&&ue[z][W]!==k.charCodeAt(W)){ae=!1;break}if(ae===!0){K=Ne;break}}return K===r&&D!==r&&(K=D),K},i=function k(D){for(var z=this.internal.write,W=this.internal.putStream,ue=(0,this.internal.getFilters)();ue.indexOf("FlateEncode")!==-1;)ue.splice(ue.indexOf("FlateEncode"),1);D.objectId=this.internal.newObject();var ae=[];if(ae.push({key:"Type",value:"/XObject"}),ae.push({key:"Subtype",value:"/Image"}),ae.push({key:"Width",value:D.width}),ae.push({key:"Height",value:D.height}),D.colorSpace===v.INDEXED?ae.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(D.palette.length/3-1)+" "+("sMask"in D&&D.sMask!==void 0?D.objectId+2:D.objectId+1)+" 0 R]"}):(ae.push({key:"ColorSpace",value:"/"+D.colorSpace}),D.colorSpace===v.DEVICE_CMYK&&ae.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ae.push({key:"BitsPerComponent",value:D.bitsPerComponent}),"decodeParameters"in D&&D.decodeParameters!==void 0&&ae.push({key:"DecodeParms",value:"<<"+D.decodeParameters+">>"}),"transparency"in D&&Array.isArray(D.transparency)&&D.transparency.length>0){for(var Ne="",K=0,Q=D.transparency.length;K<Q;K++)Ne+=D.transparency[K]+" "+D.transparency[K]+" ";ae.push({key:"Mask",value:"["+Ne+"]"})}D.sMask!==void 0&&ae.push({key:"SMask",value:D.objectId+1+" 0 R"});var ke=D.filter!==void 0?["/"+D.filter]:void 0;if(W({data:D.data,additionalKeyValues:ae,alreadyAppliedFilters:ke,objectId:D.objectId}),z("endobj"),"sMask"in D&&D.sMask!==void 0){var G,I=(G=D.sMaskBitsPerComponent)!==null&&G!==void 0?G:D.bitsPerComponent,Z={width:D.width,height:D.height,colorSpace:"DeviceGray",bitsPerComponent:I,data:D.sMask};"filter"in D&&(Z.decodeParameters="/Predictor ".concat(D.predictor," /Colors 1 /BitsPerComponent ").concat(I," /Columns ").concat(D.width),Z.filter=D.filter),k.call(this,Z)}if(D.colorSpace===v.INDEXED){var J=this.internal.newObject();W({data:T(new Uint8Array(D.palette)),objectId:J}),z("endobj")}},o=function(){var k=this.internal.collections[s+"images"];for(var D in k)i.call(this,k[D])},l=function(){var k,D=this.internal.collections[s+"images"],z=this.internal.write;for(var W in D)z("/I"+(k=D[W]).index,k.objectId,"0","R")},c=function(){this.internal.collections[s+"images"]||(this.internal.collections[s+"images"]={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",l))},d=function(){var k=this.internal.collections[s+"images"];return c.call(this),k},u=function(){return Object.keys(this.internal.collections[s+"images"]).length},m=function(k){return typeof t["process"+k.toUpperCase()]=="function"},f=function(k){return mr(k)==="object"&&k.nodeType===1},h=function(k,D){if(k.nodeName==="IMG"&&k.hasAttribute("src")){var z=""+k.getAttribute("src");if(z.indexOf("data:image/")===0)return Zy(unescape(z).split("base64,").pop());var W=t.loadFile(z,!0);if(W!==void 0)return W}if(k.nodeName==="CANVAS"){if(k.width===0||k.height===0)throw new Error("Given canvas must have data. Canvas width: "+k.width+", height: "+k.height);var ue;switch(D){case"PNG":ue="image/png";break;case"WEBP":ue="image/webp";break;default:ue="image/jpeg"}return Zy(k.toDataURL(ue,1).split("base64,").pop())}},p=function(k){var D=this.internal.collections[s+"images"];if(D){for(var z in D)if(k===D[z].alias)return D[z]}},g=function(k,D,z){return k||D||(k=-96,D=-96),k<0&&(k=-1*z.width*72/k/this.internal.scaleFactor),D<0&&(D=-1*z.height*72/D/this.internal.scaleFactor),k===0&&(k=D*z.width/z.height),D===0&&(D=k*z.height/z.width),[k,D]},y=function(k,D,z,W,ue,ae){var Ne=g.call(this,z,W,ue),K=this.internal.getCoordinateString,Q=this.internal.getVerticalCoordinateString,ke=d.call(this);if(z=Ne[0],W=Ne[1],ke[ue.index]=ue,ae){ae*=Math.PI/180;var G=Math.cos(ae),I=Math.sin(ae),Z=function(se){return se.toFixed(4)},J=[Z(G),Z(I),Z(-1*I),Z(G),0,0,"cm"]}this.internal.write("q"),ae?(this.internal.write([1,"0","0",1,K(k),Q(D+W),"cm"].join(" ")),this.internal.write(J.join(" ")),this.internal.write([K(z),"0","0",K(W),"0","0","cm"].join(" "))):this.internal.write([K(z),"0","0",K(W),K(k),Q(D+W),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ue.index+" Do"),this.internal.write("Q")},v=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var j=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},w=t.__addimage__.sHashCode=function(k){var D,z,W=0;if(typeof k=="string")for(z=k.length,D=0;D<z;D++)W=(W<<5)-W+k.charCodeAt(D),W|=0;else if(E(k))for(z=k.byteLength/2,D=0;D<z;D++)W=(W<<5)-W+k[D],W|=0;return W},_=t.__addimage__.validateStringAsBase64=function(k){(k=k||"").toString().trim();var D=!0;return k.length===0&&(D=!1),k.length%4!=0&&(D=!1),/^[A-Za-z0-9+/]+$/.test(k.substr(0,k.length-2))===!1&&(D=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(k.substr(-2))===!1&&(D=!1),D},P=t.__addimage__.extractImageFromDataUrl=function(k){if(k==null||!(k=k.trim()).startsWith("data:"))return null;var D=k.indexOf(",");return D<0?null:k.substring(0,D).trim().endsWith("base64")?k.substring(D+1):null};t.__addimage__.isArrayBuffer=function(k){return k instanceof ArrayBuffer};var E=t.__addimage__.isArrayBufferView=function(k){return k instanceof Int8Array||k instanceof Uint8Array||k instanceof Uint8ClampedArray||k instanceof Int16Array||k instanceof Uint16Array||k instanceof Int32Array||k instanceof Uint32Array||k instanceof Float32Array||k instanceof Float64Array},L=t.__addimage__.binaryStringToUint8Array=function(k){for(var D=k.length,z=new Uint8Array(D),W=0;W<D;W++)z[W]=k.charCodeAt(W);return z},T=t.__addimage__.arrayBufferToBinaryString=function(k){for(var D="",z=E(k)?k:new Uint8Array(k),W=0;W<z.length;W+=8192)D+=String.fromCharCode.apply(null,z.subarray(W,W+8192));return D};t.addImage=function(){var k,D,z,W,ue,ae,Ne,K,Q;if(typeof arguments[1]=="number"?(D=r,z=arguments[1],W=arguments[2],ue=arguments[3],ae=arguments[4],Ne=arguments[5],K=arguments[6],Q=arguments[7]):(D=arguments[1],z=arguments[2],W=arguments[3],ue=arguments[4],ae=arguments[5],Ne=arguments[6],K=arguments[7],Q=arguments[8]),mr(k=arguments[0])==="object"&&!f(k)&&"imageData"in k){var ke=k;k=ke.imageData,D=ke.format||D||r,z=ke.x||z||0,W=ke.y||W||0,ue=ke.w||ke.width||ue,ae=ke.h||ke.height||ae,Ne=ke.alias||Ne,K=ke.compression||K,Q=ke.rotation||ke.angle||Q}var G=this.internal.getFilters();if(K===void 0&&G.indexOf("FlateEncode")!==-1&&(K="SLOW"),isNaN(z)||isNaN(W))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var I=M.call(this,k,D,Ne,K);return y.call(this,z,W,ue,ae,I,Q),this};var M=function(k,D,z,W){var ue,ae,Ne;if(typeof k=="string"&&a(k)===r){k=unescape(k);var K=F(k,!1);(K!==""||(K=t.loadFile(k,!0))!==void 0)&&(k=K)}if(f(k)&&(k=h(k,D)),D=a(k,D),!m(D))throw new Error("addImage does not support files of type '"+D+"', please ensure that a plugin for '"+D+"' support is added.");if(((Ne=z)==null||Ne.length===0)&&(z=function(Q){return typeof Q=="string"||E(Q)?w(Q):E(Q.data)?w(Q.data):null}(k)),(ue=p.call(this,z))||(k instanceof Uint8Array||D==="RGBA"||(ae=k,k=L(k)),ue=this["process"+D.toUpperCase()](k,u.call(this),z,function(Q){return Q&&typeof Q=="string"&&(Q=Q.toUpperCase()),Q in t.image_compression?Q:j.NONE}(W),ae)),!ue)throw new Error("An unknown error occurred whilst processing the image.");return ue},F=t.__addimage__.convertBase64ToBinaryString=function(k,D){D=typeof D!="boolean"||D;var z,W="";if(typeof k=="string"){var ue;z=(ue=P(k))!==null&&ue!==void 0?ue:k;try{W=Zy(z)}catch(ae){if(D)throw _(z)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ae.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return W};t.getImageProperties=function(k){var D,z,W="";if(f(k)&&(k=h(k)),typeof k=="string"&&a(k)===r&&((W=F(k,!1))===""&&(W=t.loadFile(k)||""),k=W),z=a(k),!m(z))throw new Error("addImage does not support files of type '"+z+"', please ensure that a plugin for '"+z+"' support is added.");if(k instanceof Uint8Array||(k=L(k)),!(D=this["process"+z.toUpperCase()](k)))throw new Error("An unknown error occurred whilst processing the image");return D.fileType=z,D}})(es.API),function(t){var s=function(r){if(r!==void 0&&r!="")return!0};es.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var n,a,i,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),d=r.pageContext.annotations,u=!1,m=0;m<d.length&&!u;m++)switch((n=d[m]).type){case"link":(s(n.options.url)||s(n.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var f=0;f<d.length;f++){n=d[f];var h=this.internal.pdfEscape,p=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var g=this.internal.newAdditionalObject(),y=this.internal.newAdditionalObject(),v=this.internal.getEncryptor(g.objId),j=n.title||"Note";i="<</Type /Annot /Subtype /Text "+(a="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y)+"] ")+"/Contents ("+h(v(n.contents))+")",i+=" /Popup "+y.objId+" 0 R",i+=" /P "+c.objId+" 0 R",i+=" /T ("+h(v(j))+") >>",g.content=i;var w=g.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+o(n.bounds.x+30)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w+30)+" "+l(n.bounds.y)+"] ")+" /Parent "+w,n.open&&(i+=" /Open true"),i+=" >>",y.content=i,this.internal.write(g.objId,"0 R",y.objId,"0 R");break;case"freetext":a="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y+n.bounds.h)+"] ";var _=n.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+h(p(n.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+_+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(n.options.name){var P=this.annotations._nameMap[n.options.name];n.options.pageNumber=P.page,n.options.top=P.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",i="",n.options.url)i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+h(p(n.options.url))+") >>";else if(n.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,i+=" /FitV "+n.options.left+"]";break;default:var E=l(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),i+=" /XYZ "+n.options.left+" "+E+" "+n.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},t.link=function(r,n,a,i,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(r),y:d(n),w:c(r+a),h:d(n+i)},options:o,type:"link"})},t.textWithLink=function(r,n,a,i){var o,l,c=this.getTextWidth(r),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){l=i.maxWidth;var u=this.splitTextToSize(r,l).length;o=Math.ceil(d*u)}else l=c,o=d;return this.text(r,n,a,i),a+=.2*d,i.align==="center"&&(n-=c/2),i.align==="right"&&(n-=c),this.link(n,a-d,l,o,i),c},t.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(es.API),function(t){var s={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];t.__arabicParser__={};var i=t.__arabicParser__.isInArabicSubstitutionA=function(g){return s[g.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(g){return typeof g=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(g)},l=t.__arabicParser__.isArabicEndLetter=function(g){return o(g)&&i(g)&&s[g.charCodeAt(0)].length<=2},c=t.__arabicParser__.isArabicAlfLetter=function(g){return o(g)&&a.indexOf(g.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(g){return o(g)&&i(g)&&s[g.charCodeAt(0)].length>=1};var d=t.__arabicParser__.arabicLetterHasFinalForm=function(g){return o(g)&&i(g)&&s[g.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(g){return o(g)&&i(g)&&s[g.charCodeAt(0)].length>=3};var u=t.__arabicParser__.arabicLetterHasMedialForm=function(g){return o(g)&&i(g)&&s[g.charCodeAt(0)].length==4},m=t.__arabicParser__.resolveLigatures=function(g){var y=0,v=r,j="",w=0;for(y=0;y<g.length;y+=1)v[g.charCodeAt(y)]!==void 0?(w++,typeof(v=v[g.charCodeAt(y)])=="number"&&(j+=String.fromCharCode(v),v=r,w=0),y===g.length-1&&(v=r,j+=g.charAt(y-(w-1)),y-=w-1,w=0)):(v=r,j+=g.charAt(y-w),y-=w,w=0);return j};t.__arabicParser__.isArabicDiacritic=function(g){return g!==void 0&&n[g.charCodeAt(0)]!==void 0};var f=t.__arabicParser__.getCorrectForm=function(g,y,v){return o(g)?i(g)===!1?-1:!d(g)||!o(y)&&!o(v)||!o(v)&&l(y)||l(g)&&!o(y)||l(g)&&c(y)||l(g)&&l(y)?0:u(g)&&o(y)&&!l(y)&&o(v)&&d(v)?3:l(g)||!o(v)?1:2:-1},h=function(g){var y=0,v=0,j=0,w="",_="",P="",E=(g=g||"").split("\\s+"),L=[];for(y=0;y<E.length;y+=1){for(L.push(""),v=0;v<E[y].length;v+=1)w=E[y][v],_=E[y][v-1],P=E[y][v+1],o(w)?(j=f(w,_,P),L[y]+=j!==-1?String.fromCharCode(s[w.charCodeAt(0)][j]):w):L[y]+=w;L[y]=m(L[y])}return L.join(" ")},p=t.__arabicParser__.processArabic=t.processArabic=function(){var g,y=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,v=[];if(Array.isArray(y)){var j=0;for(v=[],j=0;j<y.length;j+=1)Array.isArray(y[j])?v.push([h(y[j][0]),y[j][1],y[j][2]]):v.push([h(y[j])]);g=v}else g=h(y);return typeof arguments[0]=="string"?g:(arguments[0].text=g,arguments[0])};t.events.push(["preProcessText",p])}(es.API),es.API.autoPrint=function(t){var s;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){s=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+s+" 0 R")})),this},function(t){var s=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(l){n=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(l){a=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(l){i=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};s.prototype.getContext=function(r,n){var a;if((r=r||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},s.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new s,this.canvas.pdf=this}])}(es.API),function(t){var s={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},s),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(g){c=g}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(g){d=g}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(g){u=g}});var m=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return m},set:function(g){m=g}});var f=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return f},set:function(g){f=g}});var h=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return h},set:function(g){h=g}});var p=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return p},set:function(g){p=g}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},t.getTextDimensions=function(c,d){n.call(this);var u=(d=d||{}).fontSize||this.getFontSize(),m=d.font||this.getFont(),f=d.scaleFactor||this.internal.scaleFactor,h=0,p=0,g=0,y=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var v=d.maxWidth;v>0?typeof c=="string"?c=this.splitTextToSize(c,v):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(w,_){return w.concat(y.splitTextToSize(_,v))},[])):c=Array.isArray(c)?c:[c];for(var j=0;j<c.length;j++)h<(g=this.getStringUnitWidth(c[j],{font:m})*u)&&(h=g);return h!==0&&(p=c.length),{w:h/=f,h:Math.max((p*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/f,0)}},t.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||s;return this.internal.__cell__.lastCell=new i(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var c;c=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var d=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,m=this.internal.__cell__.margins||s,f=this.internal.__cell__.tableHeaderRow,h=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===c.lineNumber?(c.x=(d.x||0)+(d.width||0),c.y=d.y||0):d.y+d.height+c.height+m.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=m.top,h&&f&&(this.printHeaderRow(c.lineNumber,!0),c.y+=f[0].height)):c.y=d.y+d.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-u,c.y+u,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+u,{align:"center",baseline:"top",maxWidth:c.width-u-u}):this.text(c.text,c.x+u,c.y+u,{align:"left",baseline:"top",maxWidth:c.width-u-u})),this.internal.__cell__.lastCell=c,this};t.table=function(c,d,u,m,f){if(n.call(this),!u)throw new Error("No data for PDF table.");var h,p,g,y,v=[],j=[],w=[],_={},P={},E=[],L=[],T=(f=f||{}).autoSize||!1,M=f.printHeaders!==!1,F=f.css&&f.css["font-size"]!==void 0?16*f.css["font-size"]:f.fontSize||12,k=f.margins||Object.assign({width:this.getPageWidth()},s),D=typeof f.padding=="number"?f.padding:3,z=f.headerBackgroundColor||"#c8c8c8",W=f.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=M,this.internal.__cell__.margins=k,this.internal.__cell__.table_font_size=F,this.internal.__cell__.padding=D,this.internal.__cell__.headerBackgroundColor=z,this.internal.__cell__.headerTextColor=W,this.setFontSize(F),m==null)j=v=Object.keys(u[0]),w=v.map(function(){return"left"});else if(Array.isArray(m)&&mr(m[0])==="object")for(v=m.map(function(ke){return ke.name}),j=m.map(function(ke){return ke.prompt||ke.name||""}),w=m.map(function(ke){return ke.align||"left"}),h=0;h<m.length;h+=1)P[m[h].name]=.7499990551181103*m[h].width;else Array.isArray(m)&&typeof m[0]=="string"&&(j=v=m,w=v.map(function(){return"left"}));if(T||Array.isArray(m)&&typeof m[0]=="string")for(h=0;h<v.length;h+=1){for(_[y=v[h]]=u.map(function(ke){return ke[y]}),this.setFont(void 0,"bold"),E.push(this.getTextDimensions(j[h],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),p=_[y],this.setFont(void 0,"normal"),g=0;g<p.length;g+=1)E.push(this.getTextDimensions(p[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);P[y]=Math.max.apply(null,E)+D+D,E=[]}if(M){var ue={};for(h=0;h<v.length;h+=1)ue[v[h]]={},ue[v[h]].text=j[h],ue[v[h]].align=w[h];var ae=l.call(this,ue,P);L=v.map(function(ke){return new i(c,d,P[ke],ae,ue[ke].text,void 0,ue[ke].align)}),this.setTableHeaderRow(L),this.printHeaderRow(1,!1)}var Ne=m.reduce(function(ke,G){return ke[G.name]=G.align,ke},{});for(h=0;h<u.length;h+=1){"rowStart"in f&&f.rowStart instanceof Function&&f.rowStart({row:h,data:u[h]},this);var K=l.call(this,u[h],P);for(g=0;g<v.length;g+=1){var Q=u[h][v[g]];"cellStart"in f&&f.cellStart instanceof Function&&f.cellStart({row:h,col:g,data:Q},this),o.call(this,new i(c,d,P[v[g]],K,Q,h+2,Ne[v[g]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=d,this};var l=function(c,d){var u=this.internal.__cell__.padding,m=this.internal.__cell__.table_font_size,f=this.internal.scaleFactor;return Object.keys(c).map(function(h){var p=c[h];return this.splitTextToSize(p.hasOwnProperty("text")?p.text:p,d[h]-u-u)},this).map(function(h){return this.getLineHeightFactor()*h.length*m/f+u+u},this).reduce(function(h,p){return Math.max(h,p)},0)};t.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},t.printHeaderRow=function(c,d){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var m=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(m[0],m[1],m[2],m[3],void 0,-1)}this.setFont(void 0,"bold");for(var f=[],h=0;h<this.internal.__cell__.tableHeaderRow.length;h+=1){u=this.internal.__cell__.tableHeaderRow[h].clone(),d&&(u.y=this.internal.__cell__.margins.top||0,f.push(u)),u.lineNumber=c;var p=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,u),this.setTextColor(p)}f.length>0&&this.setTableHeaderRow(f),this.setFont(void 0,"normal"),r=!1}}(es.API);var vq={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},yq=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],a5=gq(yq),jq=[100,200,300,400,500,600,700,800,900],Nfe=gq(jq);function U2(t){var s=t.family.replace(/"|'/g,"").toLowerCase(),r=function(i){return vq[i=i||"normal"]?i:"normal"}(t.style),n=function(i){return i?typeof i=="number"?i>=100&&i<=900&&i%100==0?i:400:/^\d00$/.test(i)?parseInt(i):i==="bold"?700:400:400}(t.weight),a=function(i){return typeof a5[i=i||"normal"]=="number"?i:"normal"}(t.stretch);return{family:s,style:r,weight:n,stretch:a,src:t.src||[],ref:t.ref||{name:s,style:[a,r,n].join(" ")}}}function UA(t,s,r,n){var a;for(a=r;a>=0&&a<s.length;a+=n)if(t[s[a]])return t[s[a]];for(a=r;a>=0&&a<s.length;a-=n)if(t[s[a]])return t[s[a]]}var wfe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},zA={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function qA(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function VA(t){return t.trimLeft()}function _fe(t,s){for(var r=0;r<t.length;){if(t.charAt(r)===s)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function Sfe(t){var s=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return s===null?null:[s[0],t.substring(s[0].length)]}var xy,HA,WA,Zm,gy,KA,YA,GA,z2=["times"];function QA(t,s,r,n,a){var i=4,o=XA;switch(a){case es.API.image_compression.FAST:i=1,o=ZA;break;case es.API.image_compression.MEDIUM:i=6,o=JA;break;case es.API.image_compression.SLOW:i=9,o=eP}t=function(c,d,u,m){for(var f,h=c.length/d,p=new Uint8Array(c.length+h),g=[Cfe,ZA,XA,JA,eP],y=0;y<h;y+=1){var v=y*d,j=c.subarray(v,v+d);if(m)p.set(m(j,u,f),v+y);else{for(var w=g.length,_=[],P=0;P<w;P+=1)_[P]=g[P](j,u,f);var E=Afe(_.concat());p.set(_[E],v+y)}f=j}return p}(t,s,Math.ceil(r*n/8),o);var l=Ww(t,{level:i});return es.API.__addimage__.arrayBufferToBinaryString(l)}function Cfe(t){var s=Array.apply([],t);return s.unshift(0),s}function ZA(t,s){var r=t.length,n=[];n[0]=1;for(var a=0;a<r;a+=1){var i=t[a-s]||0;n[a+1]=t[a]-i+256&255}return n}function XA(t,s,r){var n=t.length,a=[];a[0]=2;for(var i=0;i<n;i+=1){var o=r&&r[i]||0;a[i+1]=t[i]-o+256&255}return a}function JA(t,s,r){var n=t.length,a=[];a[0]=3;for(var i=0;i<n;i+=1){var o=t[i-s]||0,l=r&&r[i]||0;a[i+1]=t[i]+256-(o+l>>>1)&255}return a}function eP(t,s,r){var n=t.length,a=[];a[0]=4;for(var i=0;i<n;i+=1){var o=kfe(t[i-s]||0,r&&r[i]||0,r&&r[i-s]||0);a[i+1]=t[i]-o+256&255}return a}function kfe(t,s,r){if(t===s&&s===r)return t;var n=Math.abs(s-r),a=Math.abs(t-r),i=Math.abs(t+s-r-r);return n<=a&&n<=i?t:a<=i?s:r}function Afe(t){var s=t.map(function(r){return r.reduce(function(n,a){return n+Math.abs(a)},0)});return s.indexOf(Math.min.apply(null,s))}function q2(t,s,r){var n=s*r,a=Math.floor(n/8),i=16-(n-8*a+r),o=(1<<r)-1;return bq(t,a)>>i&o}function tP(t,s,r,n){var a=r*n,i=Math.floor(a/8),o=16-(a-8*i+n),l=(1<<n)-1,c=(s&l)<<o;(function(d,u,m){if(u+1<d.byteLength)d.setUint16(u,m,!1);else{var f=m>>8&255;d.setUint8(u,f)}})(t,i,bq(t,i)&~(l<<o)&65535|c)}function bq(t,s){return s+1<t.byteLength?t.getUint16(s,!1):t.getUint8(s)<<8}function Pfe(t){var s=0;if(t[s++]!==71||t[s++]!==73||t[s++]!==70||t[s++]!==56||(t[s++]+1&253)!=56||t[s++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[s++]|t[s++]<<8,n=t[s++]|t[s++]<<8,a=t[s++],i=a>>7,o=1<<1+(7&a);t[s++],t[s++];var l=null,c=null;i&&(l=s,c=o,s+=3*o);var d=!0,u=[],m=0,f=null,h=0,p=null;for(this.width=r,this.height=n;d&&s<t.length;)switch(t[s++]){case 33:switch(t[s++]){case 255:if(t[s]!==11||t[s+1]==78&&t[s+2]==69&&t[s+3]==84&&t[s+4]==83&&t[s+5]==67&&t[s+6]==65&&t[s+7]==80&&t[s+8]==69&&t[s+9]==50&&t[s+10]==46&&t[s+11]==48&&t[s+12]==3&&t[s+13]==1&&t[s+16]==0)s+=14,p=t[s++]|t[s++]<<8,s++;else for(s+=12;;){if(!((k=t[s++])>=0))throw Error("Invalid block size");if(k===0)break;s+=k}break;case 249:if(t[s++]!==4||t[s+4]!==0)throw new Error("Invalid graphics extension block.");var g=t[s++];m=t[s++]|t[s++]<<8,f=t[s++],1&g||(f=null),h=g>>2&7,s++;break;case 254:for(;;){if(!((k=t[s++])>=0))throw Error("Invalid block size");if(k===0)break;s+=k}break;default:throw new Error("Unknown graphic control label: 0x"+t[s-1].toString(16))}break;case 44:var y=t[s++]|t[s++]<<8,v=t[s++]|t[s++]<<8,j=t[s++]|t[s++]<<8,w=t[s++]|t[s++]<<8,_=t[s++],P=_>>6&1,E=1<<1+(7&_),L=l,T=c,M=!1;_>>7&&(M=!0,L=s,T=E,s+=3*E);var F=s;for(s++;;){var k;if(!((k=t[s++])>=0))throw Error("Invalid block size");if(k===0)break;s+=k}u.push({x:y,y:v,width:j,height:w,has_local_palette:M,palette_offset:L,palette_size:T,data_offset:F,data_length:s-F,transparent_index:f,interlaced:!!P,delay:m,disposal:h});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+t[s-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return p},this.frameInfo=function(D){if(D<0||D>=u.length)throw new Error("Frame index out of range.");return u[D]},this.decodeAndBlitFrameBGRA=function(D,z){var W=this.frameInfo(D),ue=W.width*W.height,ae=new Uint8Array(ue);sP(t,W.data_offset,ae,ue);var Ne=W.palette_offset,K=W.transparent_index;K===null&&(K=256);var Q=W.width,ke=r-Q,G=Q,I=4*(W.y*r+W.x),Z=4*((W.y+W.height)*r+W.x),J=I,se=4*ke;W.interlaced===!0&&(se+=4*r*7);for(var je=8,be=0,q=ae.length;be<q;++be){var Te=ae[be];if(G===0&&(G=Q,(J+=se)>=Z&&(se=4*ke+4*r*(je-1),J=I+(Q+ke)*(je<<1),je>>=1)),Te===K)J+=4;else{var Be=t[Ne+3*Te],Ve=t[Ne+3*Te+1],ct=t[Ne+3*Te+2];z[J++]=ct,z[J++]=Ve,z[J++]=Be,z[J++]=255}--G}},this.decodeAndBlitFrameRGBA=function(D,z){var W=this.frameInfo(D),ue=W.width*W.height,ae=new Uint8Array(ue);sP(t,W.data_offset,ae,ue);var Ne=W.palette_offset,K=W.transparent_index;K===null&&(K=256);var Q=W.width,ke=r-Q,G=Q,I=4*(W.y*r+W.x),Z=4*((W.y+W.height)*r+W.x),J=I,se=4*ke;W.interlaced===!0&&(se+=4*r*7);for(var je=8,be=0,q=ae.length;be<q;++be){var Te=ae[be];if(G===0&&(G=Q,(J+=se)>=Z&&(se=4*ke+4*r*(je-1),J=I+(Q+ke)*(je<<1),je>>=1)),Te===K)J+=4;else{var Be=t[Ne+3*Te],Ve=t[Ne+3*Te+1],ct=t[Ne+3*Te+2];z[J++]=Be,z[J++]=Ve,z[J++]=ct,z[J++]=255}--G}}}function sP(t,s,r,n){for(var a=t[s++],i=1<<a,o=i+1,l=o+1,c=a+1,d=(1<<c)-1,u=0,m=0,f=0,h=t[s++],p=new Int32Array(4096),g=null;;){for(;u<16&&h!==0;)m|=t[s++]<<u,u+=8,h===1?h=t[s++]:--h;if(u<c)break;var y=m&d;if(m>>=c,u-=c,y!==i){if(y===o)break;for(var v=y<l?y:g,j=0,w=v;w>i;)w=p[w]>>8,++j;var _=w;if(f+j+(v!==y?1:0)>n)return void vr.log("Warning, gif stream longer than expected.");r[f++]=_;var P=f+=j;for(v!==y&&(r[f++]=_),w=v;j--;)w=p[w],r[--P]=255&w,w>>=8;g!==null&&l<4096&&(p[l++]=g<<8|_,l>=d+1&&c<12&&(++c,d=d<<1|1)),g=y}else l=o+1,d=(1<<(c=a+1))-1,g=null}return f!==n&&vr.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function V2(t){var s,r,n,a,i,o=Math.floor,l=new Array(64),c=new Array(64),d=new Array(64),u=new Array(64),m=new Array(65535),f=new Array(65535),h=new Array(64),p=new Array(64),g=[],y=0,v=7,j=new Array(64),w=new Array(64),_=new Array(64),P=new Array(256),E=new Array(2048),L=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],T=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],M=[0,1,2,3,4,5,6,7,8,9,10,11],F=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],k=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],D=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],z=[0,1,2,3,4,5,6,7,8,9,10,11],W=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ue=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ae(I,Z){for(var J=0,se=0,je=new Array,be=1;be<=16;be++){for(var q=1;q<=I[be];q++)je[Z[se]]=[],je[Z[se]][0]=J,je[Z[se]][1]=be,se++,J++;J*=2}return je}function Ne(I){for(var Z=I[0],J=I[1]-1;J>=0;)Z&1<<J&&(y|=1<<v),J--,--v<0&&(y==255?(K(255),K(0)):K(y),v=7,y=0)}function K(I){g.push(I)}function Q(I){K(I>>8&255),K(255&I)}function ke(I,Z,J,se,je){for(var be,q=je[0],Te=je[240],Be=function(dt,ts){var St,ve,Pe,Ue,rt,Qe,Je,it,gt,It,At=0;for(gt=0;gt<8;++gt){St=dt[At],ve=dt[At+1],Pe=dt[At+2],Ue=dt[At+3],rt=dt[At+4],Qe=dt[At+5],Je=dt[At+6];var fr=St+(it=dt[At+7]),Us=St-it,zt=ve+Je,xs=ve-Je,sr=Pe+Qe,rs=Pe-Qe,Fs=Ue+rt,Ns=Ue-rt,sn=fr+Fs,_n=fr-Fs,pr=zt+sr,gs=zt-sr;dt[At]=sn+pr,dt[At+4]=sn-pr;var rr=.707106781*(gs+_n);dt[At+2]=_n+rr,dt[At+6]=_n-rr;var nu=.382683433*((sn=Ns+rs)-(gs=xs+Us)),na=.5411961*sn+nu,$l=1.306562965*gs+nu,Jo=.707106781*(pr=rs+xs),is=Us+Jo,Bl=Us-Jo;dt[At+5]=Bl+na,dt[At+3]=Bl-na,dt[At+1]=is+$l,dt[At+7]=is-$l,At+=8}for(At=0,gt=0;gt<8;++gt){St=dt[At],ve=dt[At+8],Pe=dt[At+16],Ue=dt[At+24],rt=dt[At+32],Qe=dt[At+40],Je=dt[At+48];var Ul=St+(it=dt[At+56]),$i=St-it,Bi=ve+Je,Kr=ve-Je,In=Pe+Qe,Vn=Pe-Qe,au=Ue+rt,Pc=Ue-rt,xo=Ul+au,el=Ul-au,go=Bi+In,vo=Bi-In;dt[At]=xo+go,dt[At+32]=xo-go;var Ui=.707106781*(vo+el);dt[At+16]=el+Ui,dt[At+48]=el-Ui;var iu=.382683433*((xo=Pc+Vn)-(vo=Kr+$i)),tl=.5411961*xo+iu,ou=1.306562965*vo+iu,km=.707106781*(go=Vn+Kr),Am=$i+km,Pm=$i-km;dt[At+40]=Pm+tl,dt[At+24]=Pm-tl,dt[At+8]=Am+ou,dt[At+56]=Am-ou,At++}for(gt=0;gt<64;++gt)It=dt[gt]*ts[gt],h[gt]=It>0?It+.5|0:It-.5|0;return h}(I,Z),Ve=0;Ve<64;++Ve)p[L[Ve]]=Be[Ve];var ct=p[0]-J;J=p[0],ct==0?Ne(se[0]):(Ne(se[f[be=32767+ct]]),Ne(m[be]));for(var vt=63;vt>0&&p[vt]==0;)vt--;if(vt==0)return Ne(q),J;for(var qe,pe=1;pe<=vt;){for(var ps=pe;p[pe]==0&&pe<=vt;)++pe;var ns=pe-ps;if(ns>=16){qe=ns>>4;for(var ss=1;ss<=qe;++ss)Ne(Te);ns&=15}be=32767+p[pe],Ne(je[(ns<<4)+f[be]]),Ne(m[be]),pe++}return vt!=63&&Ne(q),J}function G(I){I=Math.min(Math.max(I,1),100),i!=I&&(function(Z){for(var J=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],se=0;se<64;se++){var je=o((J[se]*Z+50)/100);je=Math.min(Math.max(je,1),255),l[L[se]]=je}for(var be=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],q=0;q<64;q++){var Te=o((be[q]*Z+50)/100);Te=Math.min(Math.max(Te,1),255),c[L[q]]=Te}for(var Be=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ve=0,ct=0;ct<8;ct++)for(var vt=0;vt<8;vt++)d[Ve]=1/(l[L[Ve]]*Be[ct]*Be[vt]*8),u[Ve]=1/(c[L[Ve]]*Be[ct]*Be[vt]*8),Ve++}(I<50?Math.floor(5e3/I):Math.floor(200-2*I)),i=I)}this.encode=function(I,Z){Z&&G(Z),g=new Array,y=0,v=7,Q(65496),Q(65504),Q(16),K(74),K(70),K(73),K(70),K(0),K(1),K(1),K(0),Q(1),Q(1),K(0),K(0),function(){Q(65499),Q(132),K(0);for(var ve=0;ve<64;ve++)K(l[ve]);K(1);for(var Pe=0;Pe<64;Pe++)K(c[Pe])}(),function(ve,Pe){Q(65472),Q(17),K(8),Q(Pe),Q(ve),K(3),K(1),K(17),K(0),K(2),K(17),K(1),K(3),K(17),K(1)}(I.width,I.height),function(){Q(65476),Q(418),K(0);for(var ve=0;ve<16;ve++)K(T[ve+1]);for(var Pe=0;Pe<=11;Pe++)K(M[Pe]);K(16);for(var Ue=0;Ue<16;Ue++)K(F[Ue+1]);for(var rt=0;rt<=161;rt++)K(k[rt]);K(1);for(var Qe=0;Qe<16;Qe++)K(D[Qe+1]);for(var Je=0;Je<=11;Je++)K(z[Je]);K(17);for(var it=0;it<16;it++)K(W[it+1]);for(var gt=0;gt<=161;gt++)K(ue[gt])}(),Q(65498),Q(12),K(3),K(1),K(0),K(2),K(17),K(3),K(17),K(0),K(63),K(0);var J=0,se=0,je=0;y=0,v=7,this.encode.displayName="_encode_";for(var be,q,Te,Be,Ve,ct,vt,qe,pe,ps=I.data,ns=I.width,ss=I.height,dt=4*ns,ts=0;ts<ss;){for(be=0;be<dt;){for(Ve=dt*ts+be,vt=-1,qe=0,pe=0;pe<64;pe++)ct=Ve+(qe=pe>>3)*dt+(vt=4*(7&pe)),ts+qe>=ss&&(ct-=dt*(ts+1+qe-ss)),be+vt>=dt&&(ct-=be+vt-dt+4),q=ps[ct++],Te=ps[ct++],Be=ps[ct++],j[pe]=(E[q]+E[Te+256|0]+E[Be+512|0]>>16)-128,w[pe]=(E[q+768|0]+E[Te+1024|0]+E[Be+1280|0]>>16)-128,_[pe]=(E[q+1280|0]+E[Te+1536|0]+E[Be+1792|0]>>16)-128;J=ke(j,d,J,s,n),se=ke(w,u,se,r,a),je=ke(_,u,je,r,a),be+=32}ts+=8}if(v>=0){var St=[];St[1]=v+1,St[0]=(1<<v+1)-1,Ne(St)}return Q(65497),new Uint8Array(g)},t=t||50,function(){for(var I=String.fromCharCode,Z=0;Z<256;Z++)P[Z]=I(Z)}(),s=ae(T,M),r=ae(D,z),n=ae(F,k),a=ae(W,ue),function(){for(var I=1,Z=2,J=1;J<=15;J++){for(var se=I;se<Z;se++)f[32767+se]=J,m[32767+se]=[],m[32767+se][1]=J,m[32767+se][0]=se;for(var je=-(Z-1);je<=-I;je++)f[32767+je]=J,m[32767+je]=[],m[32767+je][1]=J,m[32767+je][0]=Z-1+je;I<<=1,Z<<=1}}(),function(){for(var I=0;I<256;I++)E[I]=19595*I,E[I+256|0]=38470*I,E[I+512|0]=7471*I+32768,E[I+768|0]=-11059*I,E[I+1024|0]=-21709*I,E[I+1280|0]=32768*I+8421375,E[I+1536|0]=-27439*I,E[I+1792|0]=-5329*I}(),G(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function _o(t,s){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!s,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function rP(t){function s(M){if(!M)throw Error("assert :P")}function r(M,F,k){for(var D=0;4>D;D++)if(M[F+D]!=k.charCodeAt(D))return!0;return!1}function n(M,F,k,D,z){for(var W=0;W<z;W++)M[F+W]=k[D+W]}function a(M,F,k,D){for(var z=0;z<D;z++)M[F+z]=k}function i(M){return new Int32Array(M)}function o(M,F){for(var k=[],D=0;D<M;D++)k.push(new F);return k}function l(M,F){var k=[];return function D(z,W,ue){for(var ae=ue[W],Ne=0;Ne<ae&&(z.push(ue.length>W+1?[]:new F),!(ue.length<W+1));Ne++)D(z[Ne],W+1,ue)}(k,0,M),k}var c=function(){var M=this;function F(x,b){for(var A=1<<b-1>>>0;x&A;)A>>>=1;return A?(x&A-1)+A:x}function k(x,b,A,R,U){s(!(R%A));do x[b+(R-=A)]=U;while(0<R)}function D(x,b,A,R,U){if(s(2328>=U),512>=U)var H=i(512);else if((H=i(U))==null)return 0;return function(Y,X,ee,ie,Ee,Fe){var oe,Me,Ie=X,We=1<<ee,Re=i(16),Ye=i(16);for(s(Ee!=0),s(ie!=null),s(Y!=null),s(0<ee),Me=0;Me<Ee;++Me){if(15<ie[Me])return 0;++Re[ie[Me]]}if(Re[0]==Ee)return 0;for(Ye[1]=0,oe=1;15>oe;++oe){if(Re[oe]>1<<oe)return 0;Ye[oe+1]=Ye[oe]+Re[oe]}for(Me=0;Me<Ee;++Me)oe=ie[Me],0<ie[Me]&&(Fe[Ye[oe]++]=Me);if(Ye[15]==1)return(ie=new z).g=0,ie.value=Fe[0],k(Y,Ie,1,We,ie),We;var Ze,ut=-1,at=We-1,Jt=0,$t=1,Cs=1,Wt=1<<ee;for(Me=0,oe=1,Ee=2;oe<=ee;++oe,Ee<<=1){if($t+=Cs<<=1,0>(Cs-=Re[oe]))return 0;for(;0<Re[oe];--Re[oe])(ie=new z).g=oe,ie.value=Fe[Me++],k(Y,Ie+Jt,Ee,Wt,ie),Jt=F(Jt,oe)}for(oe=ee+1,Ee=2;15>=oe;++oe,Ee<<=1){if($t+=Cs<<=1,0>(Cs-=Re[oe]))return 0;for(;0<Re[oe];--Re[oe]){if(ie=new z,(Jt&at)!=ut){for(Ie+=Wt,Ze=1<<(ut=oe)-ee;15>ut&&!(0>=(Ze-=Re[ut]));)++ut,Ze<<=1;We+=Wt=1<<(Ze=ut-ee),Y[X+(ut=Jt&at)].g=Ze+ee,Y[X+ut].value=Ie-X-ut}ie.g=oe-ee,ie.value=Fe[Me++],k(Y,Ie+(Jt>>ee),Ee,Wt,ie),Jt=F(Jt,oe)}}return $t!=2*Ye[15]-1?0:We}(x,b,A,R,U,H)}function z(){this.value=this.g=0}function W(){this.value=this.g=0}function ue(){this.G=o(5,z),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(_u,W)}function ae(x,b,A,R){s(x!=null),s(b!=null),s(2147483648>R),x.Ca=254,x.I=0,x.b=-8,x.Ka=0,x.oa=b,x.pa=A,x.Jd=b,x.Yc=A+R,x.Zc=4<=R?A+R-4+1:A,q(x)}function Ne(x,b){for(var A=0;0<b--;)A|=Be(x,128)<<b;return A}function K(x,b){var A=Ne(x,b);return Te(x)?-A:A}function Q(x,b,A,R){var U,H=0;for(s(x!=null),s(b!=null),s(4294967288>R),x.Sb=R,x.Ra=0,x.u=0,x.h=0,4<R&&(R=4),U=0;U<R;++U)H+=b[A+U]<<8*U;x.Ra=H,x.bb=R,x.oa=b,x.pa=A}function ke(x){for(;8<=x.u&&x.bb<x.Sb;)x.Ra>>>=8,x.Ra+=x.oa[x.pa+x.bb]<<Dc-8>>>0,++x.bb,x.u-=8;se(x)&&(x.h=1,x.u=0)}function G(x,b){if(s(0<=b),!x.h&&b<=oi){var A=J(x)&ii[b];return x.u+=b,ke(x),A}return x.h=1,x.u=0}function I(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function Z(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function J(x){return x.Ra>>>(x.u&Dc-1)>>>0}function se(x){return s(x.bb<=x.Sb),x.h||x.bb==x.Sb&&x.u>Dc}function je(x,b){x.u=b,x.h=se(x)}function be(x){x.u>=Yl&&(s(x.u>=Yl),ke(x))}function q(x){s(x!=null&&x.oa!=null),x.pa<x.Zc?(x.I=(x.oa[x.pa++]|x.I<<8)>>>0,x.b+=8):(s(x!=null&&x.oa!=null),x.pa<x.Yc?(x.b+=8,x.I=x.oa[x.pa++]|x.I<<8):x.Ka?x.b=0:(x.I<<=8,x.b+=8,x.Ka=1))}function Te(x){return Ne(x,1)}function Be(x,b){var A=x.Ca;0>x.b&&q(x);var R=x.b,U=A*b>>>8,H=(x.I>>>R>U)+0;for(H?(A-=U,x.I-=U+1<<R>>>0):A=U+1,R=A,U=0;256<=R;)U+=8,R>>=8;return R=7^U+Ic[R],x.b-=R,x.Ca=(A<<R)-1,H}function Ve(x,b,A){x[b+0]=A>>24&255,x[b+1]=A>>16&255,x[b+2]=A>>8&255,x[b+3]=255&A}function ct(x,b){return x[b+0]|x[b+1]<<8}function vt(x,b){return ct(x,b)|x[b+2]<<16}function qe(x,b){return ct(x,b)|ct(x,b+2)<<16}function pe(x,b){var A=1<<b;return s(x!=null),s(0<b),x.X=i(A),x.X==null?0:(x.Mb=32-b,x.Xa=b,1)}function ps(x,b){s(x!=null),s(b!=null),s(x.Xa==b.Xa),n(b.X,0,x.X,0,1<<b.Xa)}function ns(){this.X=[],this.Xa=this.Mb=0}function ss(x,b,A,R){s(A!=null),s(R!=null);var U=A[0],H=R[0];return U==0&&(U=(x*H+b/2)/b),H==0&&(H=(b*U+x/2)/x),0>=U||0>=H?0:(A[0]=U,R[0]=H,1)}function dt(x,b){return x+(1<<b)-1>>>b}function ts(x,b){return((4278255360&x)+(4278255360&b)>>>0&4278255360)+((16711935&x)+(16711935&b)>>>0&16711935)>>>0}function St(x,b){M[b]=function(A,R,U,H,Y,X,ee){var ie;for(ie=0;ie<Y;++ie){var Ee=M[x](X[ee+ie-1],U,H+ie);X[ee+ie]=ts(A[R+ie],Ee)}}}function ve(){this.ud=this.hd=this.jd=0}function Pe(x,b){return((4278124286&(x^b))>>>1)+(x&b)>>>0}function Ue(x){return 0<=x&&256>x?x:0>x?0:255<x?255:void 0}function rt(x,b){return Ue(x+(x-b+.5>>1))}function Qe(x,b,A){return Math.abs(b-A)-Math.abs(x-A)}function Je(x,b,A,R,U,H,Y){for(R=H[Y-1],A=0;A<U;++A)H[Y+A]=R=ts(x[b+A],R)}function it(x,b,A,R,U){var H;for(H=0;H<A;++H){var Y=x[b+H],X=Y>>8&255,ee=16711935&(ee=(ee=16711935&Y)+((X<<16)+X));R[U+H]=(4278255360&Y)+ee>>>0}}function gt(x,b){b.jd=255&x,b.hd=x>>8&255,b.ud=x>>16&255}function It(x,b,A,R,U,H){var Y;for(Y=0;Y<R;++Y){var X=b[A+Y],ee=X>>>8,ie=X,Ee=255&(Ee=(Ee=X>>>16)+((x.jd<<24>>24)*(ee<<24>>24)>>>5));ie=255&(ie=(ie+=(x.hd<<24>>24)*(ee<<24>>24)>>>5)+((x.ud<<24>>24)*(Ee<<24>>24)>>>5)),U[H+Y]=(4278255360&X)+(Ee<<16)+ie}}function At(x,b,A,R,U){M[b]=function(H,Y,X,ee,ie,Ee,Fe,oe,Me){for(ee=Fe;ee<oe;++ee)for(Fe=0;Fe<Me;++Fe)ie[Ee++]=U(X[R(H[Y++])])},M[x]=function(H,Y,X,ee,ie,Ee,Fe){var oe=8>>H.b,Me=H.Ea,Ie=H.K[0],We=H.w;if(8>oe)for(H=(1<<H.b)-1,We=(1<<oe)-1;Y<X;++Y){var Re,Ye=0;for(Re=0;Re<Me;++Re)Re&H||(Ye=R(ee[ie++])),Ee[Fe++]=U(Ie[Ye&We]),Ye>>=oe}else M["VP8LMapColor"+A](ee,ie,Ie,We,Ee,Fe,Y,X,Me)}}function fr(x,b,A,R,U){for(A=b+A;b<A;){var H=x[b++];R[U++]=H>>16&255,R[U++]=H>>8&255,R[U++]=255&H}}function Us(x,b,A,R,U){for(A=b+A;b<A;){var H=x[b++];R[U++]=H>>16&255,R[U++]=H>>8&255,R[U++]=255&H,R[U++]=H>>24&255}}function zt(x,b,A,R,U){for(A=b+A;b<A;){var H=(Y=x[b++])>>16&240|Y>>12&15,Y=240&Y|Y>>28&15;R[U++]=H,R[U++]=Y}}function xs(x,b,A,R,U){for(A=b+A;b<A;){var H=(Y=x[b++])>>16&248|Y>>13&7,Y=Y>>5&224|Y>>3&31;R[U++]=H,R[U++]=Y}}function sr(x,b,A,R,U){for(A=b+A;b<A;){var H=x[b++];R[U++]=255&H,R[U++]=H>>8&255,R[U++]=H>>16&255}}function rs(x,b,A,R,U,H){if(H==0)for(A=b+A;b<A;)Ve(R,((H=x[b++])[0]>>24|H[1]>>8&65280|H[2]<<8&16711680|H[3]<<24)>>>0),U+=32;else n(R,U,x,b,A)}function Fs(x,b){M[b][0]=M[x+"0"],M[b][1]=M[x+"1"],M[b][2]=M[x+"2"],M[b][3]=M[x+"3"],M[b][4]=M[x+"4"],M[b][5]=M[x+"5"],M[b][6]=M[x+"6"],M[b][7]=M[x+"7"],M[b][8]=M[x+"8"],M[b][9]=M[x+"9"],M[b][10]=M[x+"10"],M[b][11]=M[x+"11"],M[b][12]=M[x+"12"],M[b][13]=M[x+"13"],M[b][14]=M[x+"0"],M[b][15]=M[x+"0"]}function Ns(x){return x==Xj||x==Jj||x==vv||x==eb}function sn(){this.eb=[],this.size=this.A=this.fb=0}function _n(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function pr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new sn,this.f.kb=new _n,this.sd=null}function gs(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function rr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function nu(x){return alert("todo:WebPSamplerProcessPlane"),x.T}function na(x,b){var A=x.T,R=b.ba.f.RGBA,U=R.eb,H=R.fb+x.ka*R.A,Y=Ki[b.ba.S],X=x.y,ee=x.O,ie=x.f,Ee=x.N,Fe=x.ea,oe=x.W,Me=b.cc,Ie=b.dc,We=b.Mc,Re=b.Nc,Ye=x.ka,Ze=x.ka+x.T,ut=x.U,at=ut+1>>1;for(Ye==0?Y(X,ee,null,null,ie,Ee,Fe,oe,ie,Ee,Fe,oe,U,H,null,null,ut):(Y(b.ec,b.fc,X,ee,Me,Ie,We,Re,ie,Ee,Fe,oe,U,H-R.A,U,H,ut),++A);Ye+2<Ze;Ye+=2)Me=ie,Ie=Ee,We=Fe,Re=oe,Ee+=x.Rc,oe+=x.Rc,H+=2*R.A,Y(X,(ee+=2*x.fa)-x.fa,X,ee,Me,Ie,We,Re,ie,Ee,Fe,oe,U,H-R.A,U,H,ut);return ee+=x.fa,x.j+Ze<x.o?(n(b.ec,b.fc,X,ee,ut),n(b.cc,b.dc,ie,Ee,at),n(b.Mc,b.Nc,Fe,oe,at),A--):1&Ze||Y(X,ee,null,null,ie,Ee,Fe,oe,ie,Ee,Fe,oe,U,H+R.A,null,null,ut),A}function $l(x,b,A){var R=x.F,U=[x.J];if(R!=null){var H=x.U,Y=b.ba.S,X=Y==gv||Y==vv;b=b.ba.f.RGBA;var ee=[0],ie=x.ka;ee[0]=x.T,x.Kb&&(ie==0?--ee[0]:(--ie,U[0]-=x.width),x.j+x.ka+x.T==x.o&&(ee[0]=x.o-x.j-ie));var Ee=b.eb;ie=b.fb+ie*b.A,x=IS(R,U[0],x.width,H,ee,Ee,ie+(X?0:3),b.A),s(A==ee),x&&Ns(Y)&&xp(Ee,ie,X,H,ee,b.A)}return 0}function Jo(x){var b=x.ma,A=b.ba.S,R=11>A,U=A==pv||A==xv||A==gv||A==Zj||A==12||Ns(A);if(b.memory=null,b.Ib=null,b.Jb=null,b.Nd=null,!lp(b.Oa,x,U?11:12))return 0;if(U&&Ns(A)&&cv(),x.da)alert("todo:use_scaling");else{if(R){if(b.Ib=nu,x.Kb){if(A=x.U+1>>1,b.memory=i(x.U+2*A),b.memory==null)return 0;b.ec=b.memory,b.fc=0,b.cc=b.ec,b.dc=b.fc+x.U,b.Mc=b.cc,b.Nc=b.dc+A,b.Ib=na,cv()}}else alert("todo:EmitYUV");U&&(b.Jb=$l,R&&qi())}if(R&&!XS){for(x=0;256>x;++x)vV[x]=89858*(x-128)+jv>>yv,bV[x]=-22014*(x-128)+jv,jV[x]=-45773*(x-128),yV[x]=113618*(x-128)+jv>>yv;for(x=vp;x<rb;++x)b=76283*(x-16)+jv>>yv,NV[x-vp]=Yr(b,255),wV[x-vp]=Yr(b+8>>4,15);XS=1}return 1}function is(x){var b=x.ma,A=x.U,R=x.T;return s(!(1&x.ka)),0>=A||0>=R?0:(A=b.Ib(x,b),b.Jb!=null&&b.Jb(x,b,A),b.Dc+=A,1)}function Bl(x){x.ma.memory=null}function Ul(x,b,A,R){return G(x,8)!=47?0:(b[0]=G(x,14)+1,A[0]=G(x,14)+1,R[0]=G(x,1),G(x,3)!=0?0:!x.h)}function $i(x,b){if(4>x)return x+1;var A=x-2>>1;return(2+(1&x)<<A)+G(b,A)+1}function Bi(x,b){return 120<b?b-120:1<=(A=((A=nV[b-1])>>4)*x+(8-(15&A)))?A:1;var A}function Kr(x,b,A){var R=J(A),U=x[b+=255&R].g-8;return 0<U&&(je(A,A.u+8),R=J(A),b+=x[b].value,b+=R&(1<<U)-1),je(A,A.u+x[b].g),x[b].value}function In(x,b,A){return A.g+=x.g,A.value+=x.value<<b>>>0,s(8>=A.g),x.g}function Vn(x,b,A){var R=x.xc;return s((b=R==0?0:x.vc[x.md*(A>>R)+(b>>R)])<x.Wb),x.Ya[b]}function au(x,b,A,R){var U=x.ab,H=x.c*b,Y=x.C;b=Y+b;var X=A,ee=R;for(R=x.Ta,A=x.Ua;0<U--;){var ie=x.gc[U],Ee=Y,Fe=b,oe=X,Me=ee,Ie=(ee=R,X=A,ie.Ea);switch(s(Ee<Fe),s(Fe<=ie.nc),ie.hc){case 2:nn(oe,Me,(Fe-Ee)*Ie,ee,X);break;case 0:var We=Ee,Re=Fe,Ye=ee,Ze=X,ut=(Wt=ie).Ea;We==0&&(dp(oe,Me,null,null,1,Ye,Ze),Je(oe,Me+1,0,0,ut-1,Ye,Ze+1),Me+=ut,Ze+=ut,++We);for(var at=1<<Wt.b,Jt=at-1,$t=dt(ut,Wt.b),Cs=Wt.K,Wt=Wt.w+(We>>Wt.b)*$t;We<Re;){var zs=Cs,kn=Wt,ks=1;for(Fm(oe,Me,Ye,Ze-ut,1,Ye,Ze);ks<ut;){var Kt=(ks&~Jt)+at;Kt>ut&&(Kt=ut),(0,mp[zs[kn++]>>8&15])(oe,Me+ +ks,Ye,Ze+ks-ut,Kt-ks,Ye,Ze+ks),ks=Kt}Me+=ut,Ze+=ut,++We&Jt||(Wt+=$t)}Fe!=ie.nc&&n(ee,X-Ie,ee,X+(Fe-Ee-1)*Ie,Ie);break;case 1:for(Ie=oe,Re=Me,ut=(oe=ie.Ea)-(Ze=oe&~(Ye=(Me=1<<ie.b)-1)),We=dt(oe,ie.b),at=ie.K,ie=ie.w+(Ee>>ie.b)*We;Ee<Fe;){for(Jt=at,$t=ie,Cs=new ve,Wt=Re+Ze,zs=Re+oe;Re<Wt;)gt(Jt[$t++],Cs),hp(Cs,Ie,Re,Me,ee,X),Re+=Me,X+=Me;Re<zs&&(gt(Jt[$t++],Cs),hp(Cs,Ie,Re,ut,ee,X),Re+=ut,X+=ut),++Ee&Ye||(ie+=We)}break;case 3:if(oe==ee&&Me==X&&0<ie.b){for(Re=ee,oe=Ie=X+(Fe-Ee)*Ie-(Ze=(Fe-Ee)*dt(ie.Ea,ie.b)),Me=ee,Ye=X,We=[],Ze=(ut=Ze)-1;0<=Ze;--Ze)We[Ze]=Me[Ye+Ze];for(Ze=ut-1;0<=Ze;--Ze)Re[oe+Ze]=We[Ze];uv(ie,Ee,Fe,ee,Ie,ee,X)}else uv(ie,Ee,Fe,oe,Me,ee,X)}X=R,ee=A}ee!=A&&n(R,A,X,ee,H)}function Pc(x,b){var A=x.V,R=x.Ba+x.c*x.C,U=b-x.C;if(s(b<=x.l.o),s(16>=U),0<U){var H=x.l,Y=x.Ta,X=x.Ua,ee=H.width;if(au(x,U,A,R),U=X=[X],s((A=x.C)<(R=b)),s(H.v<H.va),R>H.o&&(R=H.o),A<H.j){var ie=H.j-A;A=H.j,U[0]+=ie*ee}if(A>=R?A=0:(U[0]+=4*H.v,H.ka=A-H.j,H.U=H.va-H.v,H.T=R-A,A=1),A){if(X=X[0],11>(A=x.ca).S){var Ee=A.f.RGBA,Fe=(R=A.S,U=H.U,H=H.T,ie=Ee.eb,Ee.A),oe=H;for(Ee=Ee.fb+x.Ma*Ee.A;0<oe--;){var Me=Y,Ie=X,We=U,Re=ie,Ye=Ee;switch(R){case fv:fp(Me,Ie,We,Re,Ye);break;case pv:Rc(Me,Ie,We,Re,Ye);break;case Xj:Rc(Me,Ie,We,Re,Ye),xp(Re,Ye,0,We,1,0);break;case zS:Su(Me,Ie,We,Re,Ye);break;case xv:rs(Me,Ie,We,Re,Ye,1);break;case Jj:rs(Me,Ie,We,Re,Ye,1),xp(Re,Ye,0,We,1,0);break;case gv:rs(Me,Ie,We,Re,Ye,0);break;case vv:rs(Me,Ie,We,Re,Ye,0),xp(Re,Ye,1,We,1,0);break;case Zj:Fc(Me,Ie,We,Re,Ye);break;case eb:Fc(Me,Ie,We,Re,Ye),DS(Re,Ye,We,1,0);break;case qS:Oc(Me,Ie,We,Re,Ye);break;default:s(0)}X+=ee,Ee+=Fe}x.Ma+=H}else alert("todo:EmitRescaledRowsYUVA");s(x.Ma<=A.height)}}x.C=b,s(x.C<=x.i)}function xo(x){var b;if(0<x.ua)return 0;for(b=0;b<x.Wb;++b){var A=x.Ya[b].G,R=x.Ya[b].H;if(0<A[1][R[1]+0].g||0<A[2][R[2]+0].g||0<A[3][R[3]+0].g)return 0}return 1}function el(x,b,A,R,U,H){if(x.Z!=0){var Y=x.qd,X=x.rd;for(s(Uc[x.Z]!=null);b<A;++b)Uc[x.Z](Y,X,R,U,R,U,H),Y=R,X=U,U+=H;x.qd=Y,x.rd=X}}function go(x,b){var A=x.l.ma,R=A.Z==0||A.Z==1?x.l.j:x.C;if(R=x.C<R?R:x.C,s(b<=x.l.o),b>R){var U=x.l.width,H=A.ca,Y=A.tb+U*R,X=x.V,ee=x.Ba+x.c*R,ie=x.gc;s(x.ab==1),s(ie[0].hc==3),nl(ie[0],R,b,X,ee,H,Y),el(A,R,b,H,Y,U)}x.C=x.Ma=b}function vo(x,b,A,R,U,H,Y){var X=x.$/R,ee=x.$%R,ie=x.m,Ee=x.s,Fe=A+x.$,oe=Fe;U=A+R*U;var Me=A+R*H,Ie=280+Ee.ua,We=x.Pb?X:16777216,Re=0<Ee.ua?Ee.Wa:null,Ye=Ee.wc,Ze=Fe<Me?Vn(Ee,ee,X):null;s(x.C<H),s(Me<=U);var ut=!1;e:for(;;){for(;ut||Fe<Me;){var at=0;if(X>=We){var Jt=Fe-A;s((We=x).Pb),We.wd=We.m,We.xd=Jt,0<We.s.ua&&ps(We.s.Wa,We.s.vb),We=X+iV}if(ee&Ye||(Ze=Vn(Ee,ee,X)),s(Ze!=null),Ze.Qb&&(b[Fe]=Ze.qb,ut=!0),!ut)if(be(ie),Ze.jc){at=ie,Jt=b;var $t=Fe,Cs=Ze.pd[J(at)&_u-1];s(Ze.jc),256>Cs.g?(je(at,at.u+Cs.g),Jt[$t]=Cs.value,at=0):(je(at,at.u+Cs.g-256),s(256<=Cs.value),at=Cs.value),at==0&&(ut=!0)}else at=Kr(Ze.G[0],Ze.H[0],ie);if(ie.h)break;if(ut||256>at){if(!ut)if(Ze.nd)b[Fe]=(Ze.qb|at<<8)>>>0;else{if(be(ie),ut=Kr(Ze.G[1],Ze.H[1],ie),be(ie),Jt=Kr(Ze.G[2],Ze.H[2],ie),$t=Kr(Ze.G[3],Ze.H[3],ie),ie.h)break;b[Fe]=($t<<24|ut<<16|at<<8|Jt)>>>0}if(ut=!1,++Fe,++ee>=R&&(ee=0,++X,Y!=null&&X<=H&&!(X%16)&&Y(x,X),Re!=null))for(;oe<Fe;)at=b[oe++],Re.X[(506832829*at&4294967295)>>>Re.Mb]=at}else if(280>at){if(at=$i(at-256,ie),Jt=Kr(Ze.G[4],Ze.H[4],ie),be(ie),Jt=Bi(R,Jt=$i(Jt,ie)),ie.h)break;if(Fe-A<Jt||U-Fe<at)break e;for($t=0;$t<at;++$t)b[Fe+$t]=b[Fe+$t-Jt];for(Fe+=at,ee+=at;ee>=R;)ee-=R,++X,Y!=null&&X<=H&&!(X%16)&&Y(x,X);if(s(Fe<=U),ee&Ye&&(Ze=Vn(Ee,ee,X)),Re!=null)for(;oe<Fe;)at=b[oe++],Re.X[(506832829*at&4294967295)>>>Re.Mb]=at}else{if(!(at<Ie))break e;for(ut=at-280,s(Re!=null);oe<Fe;)at=b[oe++],Re.X[(506832829*at&4294967295)>>>Re.Mb]=at;at=Fe,s(!(ut>>>(Jt=Re).Xa)),b[at]=Jt.X[ut],ut=!0}ut||s(ie.h==se(ie))}if(x.Pb&&ie.h&&Fe<U)s(x.m.h),x.a=5,x.m=x.wd,x.$=x.xd,0<x.s.ua&&ps(x.s.vb,x.s.Wa);else{if(ie.h)break e;Y!=null&&Y(x,X>H?H:X),x.a=0,x.$=Fe-A}return 1}return x.a=3,0}function Ui(x){s(x!=null),x.vc=null,x.yc=null,x.Ya=null;var b=x.Wa;b!=null&&(b.X=null),x.vb=null,s(x!=null)}function iu(){var x=new Zt;return x==null?null:(x.a=0,x.xb=WS,Fs("Predictor","VP8LPredictors"),Fs("Predictor","VP8LPredictors_C"),Fs("PredictorAdd","VP8LPredictorsAdd"),Fs("PredictorAdd","VP8LPredictorsAdd_C"),nn=it,hp=It,fp=fr,Rc=Us,Fc=zt,Oc=xs,Su=sr,M.VP8LMapColor32b=rl,M.VP8LMapColor8b=up,x)}function tl(x,b,A,R,U){var H=1,Y=[x],X=[b],ee=R.m,ie=R.s,Ee=null,Fe=0;e:for(;;){if(A)for(;H&&G(ee,1);){var oe=Y,Me=X,Ie=R,We=1,Re=Ie.m,Ye=Ie.gc[Ie.ab],Ze=G(Re,2);if(Ie.Oc&1<<Ze)H=0;else{switch(Ie.Oc|=1<<Ze,Ye.hc=Ze,Ye.Ea=oe[0],Ye.nc=Me[0],Ye.K=[null],++Ie.ab,s(4>=Ie.ab),Ze){case 0:case 1:Ye.b=G(Re,3)+2,We=tl(dt(Ye.Ea,Ye.b),dt(Ye.nc,Ye.b),0,Ie,Ye.K),Ye.K=Ye.K[0];break;case 3:var ut,at=G(Re,8)+1,Jt=16<at?0:4<at?1:2<at?2:3;if(oe[0]=dt(Ye.Ea,Jt),Ye.b=Jt,ut=We=tl(at,1,0,Ie,Ye.K)){var $t,Cs=at,Wt=Ye,zs=1<<(8>>Wt.b),kn=i(zs);if(kn==null)ut=0;else{var ks=Wt.K[0],Kt=Wt.w;for(kn[0]=Wt.K[0][0],$t=1;$t<1*Cs;++$t)kn[$t]=ts(ks[Kt+$t],kn[$t-1]);for(;$t<4*zs;++$t)kn[$t]=0;Wt.K[0]=null,Wt.K[0]=kn,ut=1}}We=ut;break;case 2:break;default:s(0)}H=We}}if(Y=Y[0],X=X[0],H&&G(ee,1)&&!(H=1<=(Fe=G(ee,4))&&11>=Fe)){R.a=3;break e}var wt;if(wt=H)t:{var on,ws,Ws,Cr=R,Wn=Y,Na=X,Gr=Fe,ia=A,wa=Cr.m,An=Cr.s,Zs=[null],cr=1,Qr=0,dr=aV[Gr];s:for(;;){if(ia&&G(wa,1)){var Kn=G(wa,3)+2,bo=dt(Wn,Kn),ln=dt(Na,Kn),qa=bo*ln;if(!tl(bo,ln,0,Cr,Zs))break s;for(Zs=Zs[0],An.xc=Kn,on=0;on<qa;++on){var gr=Zs[on]>>8&65535;Zs[on]=gr,gr>=cr&&(cr=gr+1)}}if(wa.h)break s;for(ws=0;5>ws;++ws){var Pn=VS[ws];!ws&&0<Gr&&(Pn+=1<<Gr),Qr<Pn&&(Qr=Pn)}var ci=o(cr*dr,z),_a=cr,di=o(_a,ue);if(di==null)var ui=null;else s(65536>=_a),ui=di;var Va=i(Qr);if(ui==null||Va==null||ci==null){Cr.a=1;break s}var mi=ci;for(on=Ws=0;on<cr;++on){var br=ui[on],hi=br.G,No=br.H,ku=0,Zl=1,Yn=0;for(ws=0;5>ws;++ws){Pn=VS[ws],hi[ws]=mi,No[ws]=Ws,!ws&&0<Gr&&(Pn+=1<<Gr);n:{var Nv,nb=Pn,wv=Cr,yp=Va,CV=mi,kV=Ws,ab=0,zc=wv.m,AV=G(zc,1);if(a(yp,0,0,nb),AV){var PV=G(zc,1)+1,EV=G(zc,1),t3=G(zc,EV==0?1:8);yp[t3]=1,PV==2&&(yp[t3=G(zc,8)]=1);var _v=1}else{var s3=i(19),r3=G(zc,4)+4;if(19<r3){wv.a=3;var Sv=0;break n}for(Nv=0;Nv<r3;++Nv)s3[rV[Nv]]=G(zc,3);var ib=void 0,jp=void 0,n3=wv,TV=s3,Cv=nb,a3=yp,ob=0,qc=n3.m,i3=8,o3=o(128,z);r:for(;D(o3,0,7,TV,19);){if(G(qc,1)){var MV=2+2*G(qc,3);if((ib=2+G(qc,MV))>Cv)break r}else ib=Cv;for(jp=0;jp<Cv&&ib--;){be(qc);var l3=o3[0+(127&J(qc))];je(qc,qc.u+l3.g);var $m=l3.value;if(16>$m)a3[jp++]=$m,$m!=0&&(i3=$m);else{var LV=$m==16,c3=$m-16,DV=tV[c3],d3=G(qc,eV[c3])+DV;if(jp+d3>Cv)break r;for(var IV=LV?i3:0;0<d3--;)a3[jp++]=IV}}ob=1;break r}ob||(n3.a=3),_v=ob}(_v=_v&&!zc.h)&&(ab=D(CV,kV,8,yp,nb)),_v&&ab!=0?Sv=ab:(wv.a=3,Sv=0)}if(Sv==0)break s;if(Zl&&sV[ws]==1&&(Zl=mi[Ws].g==0),ku+=mi[Ws].g,Ws+=Sv,3>=ws){var bp,lb=Va[0];for(bp=1;bp<Pn;++bp)Va[bp]>lb&&(lb=Va[bp]);Yn+=lb}}if(br.nd=Zl,br.Qb=0,Zl&&(br.qb=(hi[3][No[3]+0].value<<24|hi[1][No[1]+0].value<<16|hi[2][No[2]+0].value)>>>0,ku==0&&256>hi[0][No[0]+0].value&&(br.Qb=1,br.qb+=hi[0][No[0]+0].value<<8)),br.jc=!br.Qb&&6>Yn,br.jc){var kv,Xl=br;for(kv=0;kv<_u;++kv){var Vc=kv,Hc=Xl.pd[Vc],Av=Xl.G[0][Xl.H[0]+Vc];256<=Av.value?(Hc.g=Av.g+256,Hc.value=Av.value):(Hc.g=0,Hc.value=0,Vc>>=In(Av,8,Hc),Vc>>=In(Xl.G[1][Xl.H[1]+Vc],16,Hc),Vc>>=In(Xl.G[2][Xl.H[2]+Vc],0,Hc),In(Xl.G[3][Xl.H[3]+Vc],24,Hc))}}}An.vc=Zs,An.Wb=cr,An.Ya=ui,An.yc=ci,wt=1;break t}wt=0}if(!(H=wt)){R.a=3;break e}if(0<Fe){if(ie.ua=1<<Fe,!pe(ie.Wa,Fe)){R.a=1,H=0;break e}}else ie.ua=0;var cb=R,u3=Y,RV=X,db=cb.s,ub=db.xc;if(cb.c=u3,cb.i=RV,db.md=dt(u3,ub),db.wc=ub==0?-1:(1<<ub)-1,A){R.xb=hV;break e}if((Ee=i(Y*X))==null){R.a=1,H=0;break e}H=(H=vo(R,Ee,0,Y,X,X,null))&&!ee.h;break e}return H?(U!=null?U[0]=Ee:(s(Ee==null),s(A)),R.$=0,A||Ui(ie)):Ui(ie),H}function ou(x,b){var A=x.c*x.i,R=A+b+16*b;return s(x.c<=b),x.V=i(R),x.V==null?(x.Ta=null,x.Ua=0,x.a=1,0):(x.Ta=x.V,x.Ua=x.Ba+A+b,1)}function km(x,b){var A=x.C,R=b-A,U=x.V,H=x.Ba+x.c*A;for(s(b<=x.l.o);0<R;){var Y=16<R?16:R,X=x.l.ma,ee=x.l.width,ie=ee*Y,Ee=X.ca,Fe=X.tb+ee*A,oe=x.Ta,Me=x.Ua;au(x,Y,U,H),RS(oe,Me,Ee,Fe,ie),el(X,A,A+Y,Ee,Fe,ee),R-=Y,U+=Y*x.c,A+=Y}s(A==b),x.C=x.Ma=b}function Am(){this.ub=this.yd=this.td=this.Rb=0}function Pm(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Dj(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function Yf(){this.Yb=function(){var x=[];return function b(A,R,U){for(var H=U[R],Y=0;Y<H&&(A.push(U.length>R+1?[]:0),!(U.length<R+1));Y++)b(A[Y],R+1,U)}(x,0,[3,11]),x}()}function Yg(){this.jb=i(3),this.Wc=l([4,8],Yf),this.Xc=l([4,17],Yf)}function Gg(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function zi(){this.ld=this.La=this.dd=this.tc=0}function Gf(){this.Na=this.la=0}function Qg(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Qf(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Zg(){this.uc=this.M=this.Nb=0,this.wa=Array(new zi),this.Y=0,this.ya=Array(new Qf),this.aa=0,this.l=new Em}function Xg(){this.y=i(16),this.f=i(8),this.ea=i(8)}function Jg(){this.cb=this.a=0,this.sc="",this.m=new I,this.Od=new Am,this.Kc=new Pm,this.ed=new Gg,this.Qa=new Dj,this.Ic=this.$c=this.Aa=0,this.D=new Zg,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,I),this.ia=0,this.pb=o(4,Qg),this.Pa=new Yg,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Xg),this.Hd=0,this.rb=Array(new Gf),this.sb=0,this.wa=Array(new zi),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Qf),this.L=this.aa=0,this.gd=l([4,2],zi),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Em(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ij(){var x=new Jg;return x!=null&&(x.a=0,x.sc="OK",x.cb=0,x.Xb=0,gp||(gp=zl)),x}function vn(x,b,A){return x.a==0&&(x.a=b,x.sc=A,x.cb=0),0}function ev(x,b,A){return 3<=A&&x[b+0]==157&&x[b+1]==1&&x[b+2]==42}function tv(x,b){if(x==null)return 0;if(x.a=0,x.sc="OK",b==null)return vn(x,2,"null VP8Io passed to VP8GetHeaders()");var A=b.data,R=b.w,U=b.ha;if(4>U)return vn(x,7,"Truncated header.");var H=A[R+0]|A[R+1]<<8|A[R+2]<<16,Y=x.Od;if(Y.Rb=!(1&H),Y.td=H>>1&7,Y.yd=H>>4&1,Y.ub=H>>5,3<Y.td)return vn(x,3,"Incorrect keyframe parameters.");if(!Y.yd)return vn(x,4,"Frame not displayable.");R+=3,U-=3;var X=x.Kc;if(Y.Rb){if(7>U)return vn(x,7,"cannot parse picture header");if(!ev(A,R,U))return vn(x,3,"Bad code word");X.c=16383&(A[R+4]<<8|A[R+3]),X.Td=A[R+4]>>6,X.i=16383&(A[R+6]<<8|A[R+5]),X.Ud=A[R+6]>>6,R+=7,U-=7,x.za=X.c+15>>4,x.Ub=X.i+15>>4,b.width=X.c,b.height=X.i,b.Da=0,b.j=0,b.v=0,b.va=b.width,b.o=b.height,b.da=0,b.ib=b.width,b.hb=b.height,b.U=b.width,b.T=b.height,a((H=x.Pa).jb,0,255,H.jb.length),s((H=x.Qa)!=null),H.Cb=0,H.Bb=0,H.Fb=1,a(H.Zb,0,0,H.Zb.length),a(H.Lb,0,0,H.Lb)}if(Y.ub>U)return vn(x,7,"bad partition length");ae(H=x.m,A,R,Y.ub),R+=Y.ub,U-=Y.ub,Y.Rb&&(X.Ld=Te(H),X.Kd=Te(H)),X=x.Qa;var ee,ie=x.Pa;if(s(H!=null),s(X!=null),X.Cb=Te(H),X.Cb){if(X.Bb=Te(H),Te(H)){for(X.Fb=Te(H),ee=0;4>ee;++ee)X.Zb[ee]=Te(H)?K(H,7):0;for(ee=0;4>ee;++ee)X.Lb[ee]=Te(H)?K(H,6):0}if(X.Bb)for(ee=0;3>ee;++ee)ie.jb[ee]=Te(H)?Ne(H,8):255}else X.Bb=0;if(H.Ka)return vn(x,3,"cannot parse segment header");if((X=x.ed).zd=Te(H),X.Tb=Ne(H,6),X.wb=Ne(H,3),X.Pc=Te(H),X.Pc&&Te(H)){for(ie=0;4>ie;++ie)Te(H)&&(X.vd[ie]=K(H,6));for(ie=0;4>ie;++ie)Te(H)&&(X.od[ie]=K(H,6))}if(x.L=X.Tb==0?0:X.zd?1:2,H.Ka)return vn(x,3,"cannot parse filter header");var Ee=U;if(U=ee=R,R=ee+Ee,X=Ee,x.Xb=(1<<Ne(x.m,2))-1,Ee<3*(ie=x.Xb))A=7;else{for(ee+=3*ie,X-=3*ie,Ee=0;Ee<ie;++Ee){var Fe=A[U+0]|A[U+1]<<8|A[U+2]<<16;Fe>X&&(Fe=X),ae(x.Jc[+Ee],A,ee,Fe),ee+=Fe,X-=Fe,U+=3}ae(x.Jc[+ie],A,ee,X),A=ee<R?0:5}if(A!=0)return vn(x,A,"cannot parse partitions");for(A=Ne(ee=x.m,7),U=Te(ee)?K(ee,4):0,R=Te(ee)?K(ee,4):0,X=Te(ee)?K(ee,4):0,ie=Te(ee)?K(ee,4):0,ee=Te(ee)?K(ee,4):0,Ee=x.Qa,Fe=0;4>Fe;++Fe){if(Ee.Cb){var oe=Ee.Zb[Fe];Ee.Fb||(oe+=A)}else{if(0<Fe){x.pb[Fe]=x.pb[0];continue}oe=A}var Me=x.pb[Fe];Me.Sc[0]=tb[Yr(oe+U,127)],Me.Sc[1]=sb[Yr(oe+0,127)],Me.Eb[0]=2*tb[Yr(oe+R,127)],Me.Eb[1]=101581*sb[Yr(oe+X,127)]>>16,8>Me.Eb[1]&&(Me.Eb[1]=8),Me.Qc[0]=tb[Yr(oe+ie,117)],Me.Qc[1]=sb[Yr(oe+ee,127)],Me.lc=oe+ee}if(!Y.Rb)return vn(x,4,"Not a key frame.");for(Te(H),Y=x.Pa,A=0;4>A;++A){for(U=0;8>U;++U)for(R=0;3>R;++R)for(X=0;11>X;++X)ie=Be(H,uV[A][U][R][X])?Ne(H,8):cV[A][U][R][X],Y.Wc[A][U].Yb[R][X]=ie;for(U=0;17>U;++U)Y.Xc[A][U]=Y.Wc[A][mV[U]]}return x.kc=Te(H),x.kc&&(x.Bd=Ne(H,8)),x.cb=1}function zl(x,b,A,R,U,H,Y){var X=b[U].Yb[A];for(A=0;16>U;++U){if(!Be(x,X[A+0]))return U;for(;!Be(x,X[A+1]);)if(X=b[++U].Yb[0],A=0,U==16)return 16;var ee=b[U+1].Yb;if(Be(x,X[A+2])){var ie=x,Ee=0;if(Be(ie,(oe=X)[(Fe=A)+3]))if(Be(ie,oe[Fe+6])){for(X=0,Fe=2*(Ee=Be(ie,oe[Fe+8]))+(oe=Be(ie,oe[Fe+9+Ee])),Ee=0,oe=oV[Fe];oe[X];++X)Ee+=Ee+Be(ie,oe[X]);Ee+=3+(8<<Fe)}else Be(ie,oe[Fe+7])?(Ee=7+2*Be(ie,165),Ee+=Be(ie,145)):Ee=5+Be(ie,159);else Ee=Be(ie,oe[Fe+4])?3+Be(ie,oe[Fe+5]):2;X=ee[2]}else Ee=1,X=ee[1];ee=Y+lV[U],0>(ie=x).b&&q(ie);var Fe,oe=ie.b,Me=(Fe=ie.Ca>>1)-(ie.I>>oe)>>31;--ie.b,ie.Ca+=Me,ie.Ca|=1,ie.I-=(Fe+1&Me)<<oe,H[ee]=((Ee^Me)-Me)*R[(0<U)+0]}return 16}function lu(x){var b=x.rb[x.sb-1];b.la=0,b.Na=0,a(x.zc,0,0,x.zc.length),x.ja=0}function yo(x,b,A,R,U){U=x[b+A+32*R]+(U>>3),x[b+A+32*R]=-256&U?0>U?0:255:U}function cu(x,b,A,R,U,H){yo(x,b,0,A,R+U),yo(x,b,1,A,R+H),yo(x,b,2,A,R-H),yo(x,b,3,A,R-U)}function rn(x){return(20091*x>>16)+x}function Zf(x,b,A,R){var U,H=0,Y=i(16);for(U=0;4>U;++U){var X=x[b+0]+x[b+8],ee=x[b+0]-x[b+8],ie=(35468*x[b+4]>>16)-rn(x[b+12]),Ee=rn(x[b+4])+(35468*x[b+12]>>16);Y[H+0]=X+Ee,Y[H+1]=ee+ie,Y[H+2]=ee-ie,Y[H+3]=X-Ee,H+=4,b++}for(U=H=0;4>U;++U)X=(x=Y[H+0]+4)+Y[H+8],ee=x-Y[H+8],ie=(35468*Y[H+4]>>16)-rn(Y[H+12]),yo(A,R,0,0,X+(Ee=rn(Y[H+4])+(35468*Y[H+12]>>16))),yo(A,R,1,0,ee+ie),yo(A,R,2,0,ee-ie),yo(A,R,3,0,X-Ee),H++,R+=32}function Rj(x,b,A,R){var U=x[b+0]+4,H=35468*x[b+4]>>16,Y=rn(x[b+4]),X=35468*x[b+1]>>16;cu(A,R,0,U+Y,x=rn(x[b+1]),X),cu(A,R,1,U+H,x,X),cu(A,R,2,U-H,x,X),cu(A,R,3,U-Y,x,X)}function Fj(x,b,A,R,U){Zf(x,b,A,R),U&&Zf(x,b+16,A,R+4)}function Oj(x,b,A,R){Cu(x,b+0,A,R,1),Cu(x,b+32,A,R+128,1)}function sl(x,b,A,R){var U;for(x=x[b+0]+4,U=0;4>U;++U)for(b=0;4>b;++b)yo(A,R,b,U,x)}function sv(x,b,A,R){x[b+0]&&nr(x,b+0,A,R),x[b+16]&&nr(x,b+16,A,R+4),x[b+32]&&nr(x,b+32,A,R+128),x[b+48]&&nr(x,b+48,A,R+128+4)}function rv(x,b,A,R){var U,H=i(16);for(U=0;4>U;++U){var Y=x[b+0+U]+x[b+12+U],X=x[b+4+U]+x[b+8+U],ee=x[b+4+U]-x[b+8+U],ie=x[b+0+U]-x[b+12+U];H[0+U]=Y+X,H[8+U]=Y-X,H[4+U]=ie+ee,H[12+U]=ie-ee}for(U=0;4>U;++U)Y=(x=H[0+4*U]+3)+H[3+4*U],X=H[1+4*U]+H[2+4*U],ee=H[1+4*U]-H[2+4*U],ie=x-H[3+4*U],A[R+0]=Y+X>>3,A[R+16]=ie+ee>>3,A[R+32]=Y-X>>3,A[R+48]=ie-ee>>3,R+=64}function Ec(x,b,A){var R,U=b-32,H=li,Y=255-x[U-1];for(R=0;R<A;++R){var X,ee=H,ie=Y+x[b-1];for(X=0;X<A;++X)x[b+X]=ee[ie+x[U+X]];b+=32}}function Xf(x,b){Ec(x,b,4)}function $j(x,b){Ec(x,b,8)}function Bj(x,b){Ec(x,b,16)}function Uj(x,b){var A;for(A=0;16>A;++A)n(x,b+32*A,x,b-32,16)}function Jf(x,b){var A;for(A=16;0<A;--A)a(x,b,x[b-1],16),b+=32}function du(x,b,A){var R;for(R=0;16>R;++R)a(b,A+32*R,x,16)}function Tc(x,b){var A,R=16;for(A=0;16>A;++A)R+=x[b-1+32*A]+x[b+A-32];du(R>>5,x,b)}function zj(x,b){var A,R=8;for(A=0;16>A;++A)R+=x[b-1+32*A];du(R>>4,x,b)}function uu(x,b){var A,R=8;for(A=0;16>A;++A)R+=x[b+A-32];du(R>>4,x,b)}function ep(x,b){du(128,x,b)}function vs(x,b,A){return x+2*b+A+2>>2}function qj(x,b){var A,R=b-32;for(R=new Uint8Array([vs(x[R-1],x[R+0],x[R+1]),vs(x[R+0],x[R+1],x[R+2]),vs(x[R+1],x[R+2],x[R+3]),vs(x[R+2],x[R+3],x[R+4])]),A=0;4>A;++A)n(x,b+32*A,R,0,R.length)}function Vj(x,b){var A=x[b-1],R=x[b-1+32],U=x[b-1+64],H=x[b-1+96];Ve(x,b+0,16843009*vs(x[b-1-32],A,R)),Ve(x,b+32,16843009*vs(A,R,U)),Ve(x,b+64,16843009*vs(R,U,H)),Ve(x,b+96,16843009*vs(U,H,H))}function Hj(x,b){var A,R=4;for(A=0;4>A;++A)R+=x[b+A-32]+x[b-1+32*A];for(R>>=3,A=0;4>A;++A)a(x,b+32*A,R,4)}function Wj(x,b){var A=x[b-1+0],R=x[b-1+32],U=x[b-1+64],H=x[b-1-32],Y=x[b+0-32],X=x[b+1-32],ee=x[b+2-32],ie=x[b+3-32];x[b+0+96]=vs(R,U,x[b-1+96]),x[b+1+96]=x[b+0+64]=vs(A,R,U),x[b+2+96]=x[b+1+64]=x[b+0+32]=vs(H,A,R),x[b+3+96]=x[b+2+64]=x[b+1+32]=x[b+0+0]=vs(Y,H,A),x[b+3+64]=x[b+2+32]=x[b+1+0]=vs(X,Y,H),x[b+3+32]=x[b+2+0]=vs(ee,X,Y),x[b+3+0]=vs(ie,ee,X)}function ql(x,b){var A=x[b+1-32],R=x[b+2-32],U=x[b+3-32],H=x[b+4-32],Y=x[b+5-32],X=x[b+6-32],ee=x[b+7-32];x[b+0+0]=vs(x[b+0-32],A,R),x[b+1+0]=x[b+0+32]=vs(A,R,U),x[b+2+0]=x[b+1+32]=x[b+0+64]=vs(R,U,H),x[b+3+0]=x[b+2+32]=x[b+1+64]=x[b+0+96]=vs(U,H,Y),x[b+3+32]=x[b+2+64]=x[b+1+96]=vs(H,Y,X),x[b+3+64]=x[b+2+96]=vs(Y,X,ee),x[b+3+96]=vs(X,ee,ee)}function Vl(x,b){var A=x[b-1+0],R=x[b-1+32],U=x[b-1+64],H=x[b-1-32],Y=x[b+0-32],X=x[b+1-32],ee=x[b+2-32],ie=x[b+3-32];x[b+0+0]=x[b+1+64]=H+Y+1>>1,x[b+1+0]=x[b+2+64]=Y+X+1>>1,x[b+2+0]=x[b+3+64]=X+ee+1>>1,x[b+3+0]=ee+ie+1>>1,x[b+0+96]=vs(U,R,A),x[b+0+64]=vs(R,A,H),x[b+0+32]=x[b+1+96]=vs(A,H,Y),x[b+1+32]=x[b+2+96]=vs(H,Y,X),x[b+2+32]=x[b+3+96]=vs(Y,X,ee),x[b+3+32]=vs(X,ee,ie)}function Kj(x,b){var A=x[b+0-32],R=x[b+1-32],U=x[b+2-32],H=x[b+3-32],Y=x[b+4-32],X=x[b+5-32],ee=x[b+6-32],ie=x[b+7-32];x[b+0+0]=A+R+1>>1,x[b+1+0]=x[b+0+64]=R+U+1>>1,x[b+2+0]=x[b+1+64]=U+H+1>>1,x[b+3+0]=x[b+2+64]=H+Y+1>>1,x[b+0+32]=vs(A,R,U),x[b+1+32]=x[b+0+96]=vs(R,U,H),x[b+2+32]=x[b+1+96]=vs(U,H,Y),x[b+3+32]=x[b+2+96]=vs(H,Y,X),x[b+3+64]=vs(Y,X,ee),x[b+3+96]=vs(X,ee,ie)}function Yj(x,b){var A=x[b-1+0],R=x[b-1+32],U=x[b-1+64],H=x[b-1+96];x[b+0+0]=A+R+1>>1,x[b+2+0]=x[b+0+32]=R+U+1>>1,x[b+2+32]=x[b+0+64]=U+H+1>>1,x[b+1+0]=vs(A,R,U),x[b+3+0]=x[b+1+32]=vs(R,U,H),x[b+3+32]=x[b+1+64]=vs(U,H,H),x[b+3+64]=x[b+2+64]=x[b+0+96]=x[b+1+96]=x[b+2+96]=x[b+3+96]=H}function Tm(x,b){var A=x[b-1+0],R=x[b-1+32],U=x[b-1+64],H=x[b-1+96],Y=x[b-1-32],X=x[b+0-32],ee=x[b+1-32],ie=x[b+2-32];x[b+0+0]=x[b+2+32]=A+Y+1>>1,x[b+0+32]=x[b+2+64]=R+A+1>>1,x[b+0+64]=x[b+2+96]=U+R+1>>1,x[b+0+96]=H+U+1>>1,x[b+3+0]=vs(X,ee,ie),x[b+2+0]=vs(Y,X,ee),x[b+1+0]=x[b+3+32]=vs(A,Y,X),x[b+1+32]=x[b+3+64]=vs(R,A,Y),x[b+1+64]=x[b+3+96]=vs(U,R,A),x[b+1+96]=vs(H,U,R)}function tp(x,b){var A;for(A=0;8>A;++A)n(x,b+32*A,x,b-32,8)}function mu(x,b){var A;for(A=0;8>A;++A)a(x,b,x[b-1],8),b+=32}function Mm(x,b,A){var R;for(R=0;8>R;++R)a(b,A+32*R,x,8)}function Lm(x,b){var A,R=8;for(A=0;8>A;++A)R+=x[b+A-32]+x[b-1+32*A];Mm(R>>4,x,b)}function Gj(x,b){var A,R=4;for(A=0;8>A;++A)R+=x[b+A-32];Mm(R>>3,x,b)}function sp(x,b){var A,R=4;for(A=0;8>A;++A)R+=x[b-1+32*A];Mm(R>>3,x,b)}function rp(x,b){Mm(128,x,b)}function hu(x,b,A){var R=x[b-A],U=x[b+0],H=3*(U-R)+Qj[1020+x[b-2*A]-x[b+A]],Y=hv[112+(H+4>>3)];x[b-A]=li[255+R+hv[112+(H+3>>3)]],x[b+0]=li[255+U-Y]}function fu(x,b,A,R){var U=x[b+0],H=x[b+A];return Wi[255+x[b-2*A]-x[b-A]]>R||Wi[255+H-U]>R}function np(x,b,A,R){return 4*Wi[255+x[b-A]-x[b+0]]+Wi[255+x[b-2*A]-x[b+A]]<=R}function Dm(x,b,A,R,U){var H=x[b-3*A],Y=x[b-2*A],X=x[b-A],ee=x[b+0],ie=x[b+A],Ee=x[b+2*A],Fe=x[b+3*A];return 4*Wi[255+X-ee]+Wi[255+Y-ie]>R?0:Wi[255+x[b-4*A]-H]<=U&&Wi[255+H-Y]<=U&&Wi[255+Y-X]<=U&&Wi[255+Fe-Ee]<=U&&Wi[255+Ee-ie]<=U&&Wi[255+ie-ee]<=U}function ap(x,b,A,R){var U=2*R+1;for(R=0;16>R;++R)np(x,b+R,A,U)&&hu(x,b+R,A)}function pu(x,b,A,R){var U=2*R+1;for(R=0;16>R;++R)np(x,b+R*A,1,U)&&hu(x,b+R*A,1)}function nv(x,b,A,R){var U;for(U=3;0<U;--U)ap(x,b+=4*A,A,R)}function av(x,b,A,R){var U;for(U=3;0<U;--U)pu(x,b+=4,A,R)}function Hl(x,b,A,R,U,H,Y,X){for(H=2*H+1;0<U--;){if(Dm(x,b,A,H,Y))if(fu(x,b,A,X))hu(x,b,A);else{var ee=x,ie=b,Ee=A,Fe=ee[ie-2*Ee],oe=ee[ie-Ee],Me=ee[ie+0],Ie=ee[ie+Ee],We=ee[ie+2*Ee],Re=27*(Ze=Qj[1020+3*(Me-oe)+Qj[1020+Fe-Ie]])+63>>7,Ye=18*Ze+63>>7,Ze=9*Ze+63>>7;ee[ie-3*Ee]=li[255+ee[ie-3*Ee]+Ze],ee[ie-2*Ee]=li[255+Fe+Ye],ee[ie-Ee]=li[255+oe+Re],ee[ie+0]=li[255+Me-Re],ee[ie+Ee]=li[255+Ie-Ye],ee[ie+2*Ee]=li[255+We-Ze]}b+=R}}function Wl(x,b,A,R,U,H,Y,X){for(H=2*H+1;0<U--;){if(Dm(x,b,A,H,Y))if(fu(x,b,A,X))hu(x,b,A);else{var ee=x,ie=b,Ee=A,Fe=ee[ie-Ee],oe=ee[ie+0],Me=ee[ie+Ee],Ie=hv[112+(4+(We=3*(oe-Fe))>>3)],We=hv[112+(We+3>>3)],Re=Ie+1>>1;ee[ie-2*Ee]=li[255+ee[ie-2*Ee]+Re],ee[ie-Ee]=li[255+Fe+We],ee[ie+0]=li[255+oe-Ie],ee[ie+Ee]=li[255+Me-Re]}b+=R}}function iv(x,b,A,R,U,H){Hl(x,b,A,1,16,R,U,H)}function ov(x,b,A,R,U,H){Hl(x,b,1,A,16,R,U,H)}function xu(x,b,A,R,U,H){var Y;for(Y=3;0<Y;--Y)Wl(x,b+=4*A,A,1,16,R,U,H)}function lv(x,b,A,R,U,H){var Y;for(Y=3;0<Y;--Y)Wl(x,b+=4,1,A,16,R,U,H)}function S(x,b,A,R,U,H,Y,X){Hl(x,b,U,1,8,H,Y,X),Hl(A,R,U,1,8,H,Y,X)}function B(x,b,A,R,U,H,Y,X){Hl(x,b,1,U,8,H,Y,X),Hl(A,R,1,U,8,H,Y,X)}function ce(x,b,A,R,U,H,Y,X){Wl(x,b+4*U,U,1,8,H,Y,X),Wl(A,R+4*U,U,1,8,H,Y,X)}function Se(x,b,A,R,U,H,Y,X){Wl(x,b+4,1,U,8,H,Y,X),Wl(A,R+4,1,U,8,H,Y,X)}function Le(){this.ba=new pr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new rr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Ge(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ot(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Ut(){this.ua=0,this.Wa=new ns,this.vb=new ns,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ue,this.yc=new z}function Zt(){this.xb=this.a=0,this.l=new Em,this.ca=new pr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new Z,this.Pb=0,this.wd=new Z,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Ut,this.ab=0,this.gc=o(4,ot),this.Oc=0}function fs(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Em,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function ys(x,b,A,R,U,H,Y){for(x=x==null?0:x[b+0],b=0;b<Y;++b)U[H+b]=x+A[R+b]&255,x=U[H+b]}function Js(x,b,A,R,U,H,Y){var X;if(x==null)ys(null,null,A,R,U,H,Y);else for(X=0;X<Y;++X)U[H+X]=x[b+X]+A[R+X]&255}function Br(x,b,A,R,U,H,Y){if(x==null)ys(null,null,A,R,U,H,Y);else{var X,ee=x[b+0],ie=ee,Ee=ee;for(X=0;X<Y;++X)ie=Ee+(ee=x[b+X])-ie,Ee=A[R+X]+(-256&ie?0>ie?0:255:ie)&255,ie=ee,U[H+X]=Ee}}function yn(x,b,A,R){var U=b.width,H=b.o;if(s(x!=null&&b!=null),0>A||0>=R||A+R>H)return null;if(!x.Cc){if(x.ga==null){var Y;if(x.ga=new fs,(Y=x.ga==null)||(Y=b.width*b.o,s(x.Gb.length==0),x.Gb=i(Y),x.Uc=0,x.Gb==null?Y=0:(x.mb=x.Gb,x.nb=x.Uc,x.rc=null,Y=1),Y=!Y),!Y){Y=x.ga;var X=x.Fa,ee=x.P,ie=x.qc,Ee=x.mb,Fe=x.nb,oe=ee+1,Me=ie-1,Ie=Y.l;if(s(X!=null&&Ee!=null&&b!=null),Uc[0]=null,Uc[1]=ys,Uc[2]=Js,Uc[3]=Br,Y.ca=Ee,Y.tb=Fe,Y.c=b.width,Y.i=b.height,s(0<Y.c&&0<Y.i),1>=ie)b=0;else if(Y.$a=3&X[ee+0],Y.Z=X[ee+0]>>2&3,Y.Lc=X[ee+0]>>4&3,ee=X[ee+0]>>6&3,0>Y.$a||1<Y.$a||4<=Y.Z||1<Y.Lc||ee)b=0;else if(Ie.put=is,Ie.ac=Jo,Ie.bc=Bl,Ie.ma=Y,Ie.width=b.width,Ie.height=b.height,Ie.Da=b.Da,Ie.v=b.v,Ie.va=b.va,Ie.j=b.j,Ie.o=b.o,Y.$a)e:{s(Y.$a==1),b=iu();t:for(;;){if(b==null){b=0;break e}if(s(Y!=null),Y.mc=b,b.c=Y.c,b.i=Y.i,b.l=Y.l,b.l.ma=Y,b.l.width=Y.c,b.l.height=Y.i,b.a=0,Q(b.m,X,oe,Me),!tl(Y.c,Y.i,1,b,null)||(b.ab==1&&b.gc[0].hc==3&&xo(b.s)?(Y.ic=1,X=b.c*b.i,b.Ta=null,b.Ua=0,b.V=i(X),b.Ba=0,b.V==null?(b.a=1,b=0):b=1):(Y.ic=0,b=ou(b,Y.c)),!b))break t;b=1;break e}Y.mc=null,b=0}else b=Me>=Y.c*Y.i;Y=!b}if(Y)return null;x.ga.Lc!=1?x.Ga=0:R=H-A}s(x.ga!=null),s(A+R<=H);e:{if(b=(X=x.ga).c,H=X.l.o,X.$a==0){if(oe=x.rc,Me=x.Vc,Ie=x.Fa,ee=x.P+1+A*b,ie=x.mb,Ee=x.nb+A*b,s(ee<=x.P+x.qc),X.Z!=0)for(s(Uc[X.Z]!=null),Y=0;Y<R;++Y)Uc[X.Z](oe,Me,Ie,ee,ie,Ee,b),oe=ie,Me=Ee,Ee+=b,ee+=b;else for(Y=0;Y<R;++Y)n(ie,Ee,Ie,ee,b),oe=ie,Me=Ee,Ee+=b,ee+=b;x.rc=oe,x.Vc=Me}else{if(s(X.mc!=null),b=A+R,s((Y=X.mc)!=null),s(b<=Y.i),Y.C>=b)b=1;else if(X.ic||qi(),X.ic){X=Y.V,oe=Y.Ba,Me=Y.c;var We=Y.i,Re=(Ie=1,ee=Y.$/Me,ie=Y.$%Me,Ee=Y.m,Fe=Y.s,Y.$),Ye=Me*We,Ze=Me*b,ut=Fe.wc,at=Re<Ze?Vn(Fe,ie,ee):null;s(Re<=Ye),s(b<=We),s(xo(Fe));t:for(;;){for(;!Ee.h&&Re<Ze;){if(ie&ut||(at=Vn(Fe,ie,ee)),s(at!=null),be(Ee),256>(We=Kr(at.G[0],at.H[0],Ee)))X[oe+Re]=We,++Re,++ie>=Me&&(ie=0,++ee<=b&&!(ee%16)&&go(Y,ee));else{if(!(280>We)){Ie=0;break t}We=$i(We-256,Ee);var Jt,$t=Kr(at.G[4],at.H[4],Ee);if(be(Ee),!(Re>=($t=Bi(Me,$t=$i($t,Ee)))&&Ye-Re>=We)){Ie=0;break t}for(Jt=0;Jt<We;++Jt)X[oe+Re+Jt]=X[oe+Re+Jt-$t];for(Re+=We,ie+=We;ie>=Me;)ie-=Me,++ee<=b&&!(ee%16)&&go(Y,ee);Re<Ze&&ie&ut&&(at=Vn(Fe,ie,ee))}s(Ee.h==se(Ee))}go(Y,ee>b?b:ee);break t}!Ie||Ee.h&&Re<Ye?(Ie=0,Y.a=Ee.h?5:3):Y.$=Re,b=Ie}else b=vo(Y,Y.V,Y.Ba,Y.c,Y.i,b,km);if(!b){R=0;break e}}A+R>=H&&(x.Cc=1),R=1}if(!R)return null;if(x.Cc&&((R=x.ga)!=null&&(R.mc=null),x.ga=null,0<x.Ga))return alert("todo:WebPDequantizeLevels"),null}return x.nb+A*U}function jr(x,b,A,R,U,H){for(;0<U--;){var Y,X=x,ee=b+(A?1:0),ie=x,Ee=b+(A?0:3);for(Y=0;Y<R;++Y){var Fe=ie[Ee+4*Y];Fe!=255&&(Fe*=32897,X[ee+4*Y+0]=X[ee+4*Y+0]*Fe>>23,X[ee+4*Y+1]=X[ee+4*Y+1]*Fe>>23,X[ee+4*Y+2]=X[ee+4*Y+2]*Fe>>23)}b+=H}}function Sn(x,b,A,R,U){for(;0<R--;){var H;for(H=0;H<A;++H){var Y=x[b+2*H+0],X=15&(ie=x[b+2*H+1]),ee=4369*X,ie=(240&ie|ie>>4)*ee>>16;x[b+2*H+0]=(240&Y|Y>>4)*ee>>16&240|(15&Y|Y<<4)*ee>>16>>4&15,x[b+2*H+1]=240&ie|X}b+=U}}function jn(x,b,A,R,U,H,Y,X){var ee,ie,Ee=255;for(ie=0;ie<U;++ie){for(ee=0;ee<R;++ee){var Fe=x[b+ee];H[Y+4*ee]=Fe,Ee&=Fe}b+=A,Y+=X}return Ee!=255}function Hn(x,b,A,R,U){var H;for(H=0;H<U;++H)A[R+H]=x[b+H]>>8}function qi(){xp=jr,DS=Sn,IS=jn,RS=Hn}function za(x,b,A){M[x]=function(R,U,H,Y,X,ee,ie,Ee,Fe,oe,Me,Ie,We,Re,Ye,Ze,ut){var at,Jt=ut-1>>1,$t=X[ee+0]|ie[Ee+0]<<16,Cs=Fe[oe+0]|Me[Ie+0]<<16;s(R!=null);var Wt=3*$t+Cs+131074>>2;for(b(R[U+0],255&Wt,Wt>>16,We,Re),H!=null&&(Wt=3*Cs+$t+131074>>2,b(H[Y+0],255&Wt,Wt>>16,Ye,Ze)),at=1;at<=Jt;++at){var zs=X[ee+at]|ie[Ee+at]<<16,kn=Fe[oe+at]|Me[Ie+at]<<16,ks=$t+zs+Cs+kn+524296,Kt=ks+2*(zs+Cs)>>3;Wt=Kt+$t>>1,$t=(ks=ks+2*($t+kn)>>3)+zs>>1,b(R[U+2*at-1],255&Wt,Wt>>16,We,Re+(2*at-1)*A),b(R[U+2*at-0],255&$t,$t>>16,We,Re+(2*at-0)*A),H!=null&&(Wt=ks+Cs>>1,$t=Kt+kn>>1,b(H[Y+2*at-1],255&Wt,Wt>>16,Ye,Ze+(2*at-1)*A),b(H[Y+2*at+0],255&$t,$t>>16,Ye,Ze+(2*at+0)*A)),$t=zs,Cs=kn}1&ut||(Wt=3*$t+Cs+131074>>2,b(R[U+ut-1],255&Wt,Wt>>16,We,Re+(ut-1)*A),H!=null&&(Wt=3*Cs+$t+131074>>2,b(H[Y+ut-1],255&Wt,Wt>>16,Ye,Ze+(ut-1)*A)))}}function cv(){Ki[fv]=fV,Ki[pv]=KS,Ki[zS]=pV,Ki[xv]=YS,Ki[gv]=GS,Ki[Zj]=QS,Ki[qS]=xV,Ki[Xj]=KS,Ki[Jj]=YS,Ki[vv]=GS,Ki[eb]=QS}function Im(x){return x&~gV?0>x?0:255:x>>ZS}function gu(x,b){return Im((19077*x>>8)+(26149*b>>8)-14234)}function Mc(x,b,A){return Im((19077*x>>8)-(6419*b>>8)-(13320*A>>8)+8708)}function vu(x,b){return Im((19077*x>>8)+(33050*b>>8)-17685)}function yu(x,b,A,R,U){R[U+0]=gu(x,A),R[U+1]=Mc(x,b,A),R[U+2]=vu(x,b)}function ju(x,b,A,R,U){R[U+0]=vu(x,b),R[U+1]=Mc(x,b,A),R[U+2]=gu(x,A)}function aa(x,b,A,R,U){var H=Mc(x,b,A);b=H<<3&224|vu(x,b)>>3,R[U+0]=248&gu(x,A)|H>>5,R[U+1]=b}function bu(x,b,A,R,U){var H=240&vu(x,b)|15;R[U+0]=240&gu(x,A)|Mc(x,b,A)>>4,R[U+1]=H}function Nu(x,b,A,R,U){R[U+0]=255,yu(x,b,A,R,U+1)}function ip(x,b,A,R,U){ju(x,b,A,R,U),R[U+3]=255}function op(x,b,A,R,U){yu(x,b,A,R,U),R[U+3]=255}function Yr(x,b){return 0>x?0:x>b?b:x}function Kl(x,b,A){M[x]=function(R,U,H,Y,X,ee,ie,Ee,Fe){for(var oe=Ee+(-2&Fe)*A;Ee!=oe;)b(R[U+0],H[Y+0],X[ee+0],ie,Ee),b(R[U+1],H[Y+0],X[ee+0],ie,Ee+A),U+=2,++Y,++ee,Ee+=2*A;1&Fe&&b(R[U+0],H[Y+0],X[ee+0],ie,Ee)}}function Rm(x,b,A){return A==0?x==0?b==0?6:5:b==0?4:0:A}function dv(x,b,A,R,U){switch(x>>>30){case 3:Cu(b,A,R,U,0);break;case 2:Hi(b,A,R,U);break;case 1:nr(b,A,R,U)}}function Vi(x,b){var A,R,U=b.M,H=b.Nb,Y=x.oc,X=x.pc+40,ee=x.oc,ie=x.pc+584,Ee=x.oc,Fe=x.pc+600;for(A=0;16>A;++A)Y[X+32*A-1]=129;for(A=0;8>A;++A)ee[ie+32*A-1]=129,Ee[Fe+32*A-1]=129;for(0<U?Y[X-1-32]=ee[ie-1-32]=Ee[Fe-1-32]=129:(a(Y,X-32-1,127,21),a(ee,ie-32-1,127,9),a(Ee,Fe-32-1,127,9)),R=0;R<x.za;++R){var oe=b.ya[b.aa+R];if(0<R){for(A=-1;16>A;++A)n(Y,X+32*A-4,Y,X+32*A+12,4);for(A=-1;8>A;++A)n(ee,ie+32*A-4,ee,ie+32*A+4,4),n(Ee,Fe+32*A-4,Ee,Fe+32*A+4,4)}var Me=x.Gd,Ie=x.Hd+R,We=oe.ad,Re=oe.Hc;if(0<U&&(n(Y,X-32,Me[Ie].y,0,16),n(ee,ie-32,Me[Ie].f,0,8),n(Ee,Fe-32,Me[Ie].ea,0,8)),oe.Za){var Ye=Y,Ze=X-32+16;for(0<U&&(R>=x.za-1?a(Ye,Ze,Me[Ie].y[15],4):n(Ye,Ze,Me[Ie+1].y,0,4)),A=0;4>A;A++)Ye[Ze+128+A]=Ye[Ze+256+A]=Ye[Ze+384+A]=Ye[Ze+0+A];for(A=0;16>A;++A,Re<<=2)Ye=Y,Ze=X+JS[A],jo[oe.Ob[A]](Ye,Ze),dv(Re,We,16*+A,Ye,Ze)}else if(Ye=Rm(R,U,oe.Ob[0]),Bc[Ye](Y,X),Re!=0)for(A=0;16>A;++A,Re<<=2)dv(Re,We,16*+A,Y,X+JS[A]);for(A=oe.Gc,Ye=Rm(R,U,oe.Dd),Ql[Ye](ee,ie),Ql[Ye](Ee,Fe),Re=We,Ye=ee,Ze=ie,255&(oe=0|A)&&(170&oe?al(Re,256,Ye,Ze):xr(Re,256,Ye,Ze)),oe=Ee,Re=Fe,255&(A>>=8)&&(170&A?al(We,320,oe,Re):xr(We,320,oe,Re)),U<x.Ub-1&&(n(Me[Ie].y,0,Y,X+480,16),n(Me[Ie].f,0,ee,ie+224,8),n(Me[Ie].ea,0,Ee,Fe+224,8)),A=8*H*x.B,Me=x.sa,Ie=x.ta+16*R+16*H*x.R,We=x.qa,oe=x.ra+8*R+A,Re=x.Ha,Ye=x.Ia+8*R+A,A=0;16>A;++A)n(Me,Ie+A*x.R,Y,X+32*A,16);for(A=0;8>A;++A)n(We,oe+A*x.B,ee,ie+32*A,8),n(Re,Ye+A*x.B,Ee,Fe+32*A,8)}}function wu(x,b,A,R,U,H,Y,X,ee){var ie=[0],Ee=[0],Fe=0,oe=ee!=null?ee.kd:0,Me=ee??new Ge;if(x==null||12>A)return 7;Me.data=x,Me.w=b,Me.ha=A,b=[b],A=[A],Me.gb=[Me.gb];e:{var Ie=b,We=A,Re=Me.gb;if(s(x!=null),s(We!=null),s(Re!=null),Re[0]=0,12<=We[0]&&!r(x,Ie[0],"RIFF")){if(r(x,Ie[0]+8,"WEBP")){Re=3;break e}var Ye=qe(x,Ie[0]+4);if(12>Ye||4294967286<Ye){Re=3;break e}if(oe&&Ye>We[0]-8){Re=7;break e}Re[0]=Ye,Ie[0]+=12,We[0]-=12}Re=0}if(Re!=0)return Re;for(Ye=0<Me.gb[0],A=A[0];;){e:{var Ze=x;We=b,Re=A;var ut=ie,at=Ee,Jt=Ie=[0];if((Wt=Fe=[Fe])[0]=0,8>Re[0])Re=7;else{if(!r(Ze,We[0],"VP8X")){if(qe(Ze,We[0]+4)!=10){Re=3;break e}if(18>Re[0]){Re=7;break e}var $t=qe(Ze,We[0]+8),Cs=1+vt(Ze,We[0]+12);if(2147483648<=Cs*(Ze=1+vt(Ze,We[0]+15))){Re=3;break e}Jt!=null&&(Jt[0]=$t),ut!=null&&(ut[0]=Cs),at!=null&&(at[0]=Ze),We[0]+=18,Re[0]-=18,Wt[0]=1}Re=0}}if(Fe=Fe[0],Ie=Ie[0],Re!=0)return Re;if(We=!!(2&Ie),!Ye&&Fe)return 3;if(H!=null&&(H[0]=!!(16&Ie)),Y!=null&&(Y[0]=We),X!=null&&(X[0]=0),Y=ie[0],Ie=Ee[0],Fe&&We&&ee==null){Re=0;break}if(4>A){Re=7;break}if(Ye&&Fe||!Ye&&!Fe&&!r(x,b[0],"ALPH")){A=[A],Me.na=[Me.na],Me.P=[Me.P],Me.Sa=[Me.Sa];e:{$t=x,Re=b,Ye=A;var Wt=Me.gb;ut=Me.na,at=Me.P,Jt=Me.Sa,Cs=22,s($t!=null),s(Ye!=null),Ze=Re[0];var zs=Ye[0];for(s(ut!=null),s(Jt!=null),ut[0]=null,at[0]=null,Jt[0]=0;;){if(Re[0]=Ze,Ye[0]=zs,8>zs){Re=7;break e}var kn=qe($t,Ze+4);if(4294967286<kn){Re=3;break e}var ks=8+kn+1&-2;if(Cs+=ks,0<Wt&&Cs>Wt){Re=3;break e}if(!r($t,Ze,"VP8 ")||!r($t,Ze,"VP8L")){Re=0;break e}if(zs[0]<ks){Re=7;break e}r($t,Ze,"ALPH")||(ut[0]=$t,at[0]=Ze+8,Jt[0]=kn),Ze+=ks,zs-=ks}}if(A=A[0],Me.na=Me.na[0],Me.P=Me.P[0],Me.Sa=Me.Sa[0],Re!=0)break}A=[A],Me.Ja=[Me.Ja],Me.xa=[Me.xa];e:if(Wt=x,Re=b,Ye=A,ut=Me.gb[0],at=Me.Ja,Jt=Me.xa,$t=Re[0],Ze=!r(Wt,$t,"VP8 "),Cs=!r(Wt,$t,"VP8L"),s(Wt!=null),s(Ye!=null),s(at!=null),s(Jt!=null),8>Ye[0])Re=7;else{if(Ze||Cs){if(Wt=qe(Wt,$t+4),12<=ut&&Wt>ut-12){Re=3;break e}if(oe&&Wt>Ye[0]-8){Re=7;break e}at[0]=Wt,Re[0]+=8,Ye[0]-=8,Jt[0]=Cs}else Jt[0]=5<=Ye[0]&&Wt[$t+0]==47&&!(Wt[$t+4]>>5),at[0]=Ye[0];Re=0}if(A=A[0],Me.Ja=Me.Ja[0],Me.xa=Me.xa[0],b=b[0],Re!=0)break;if(4294967286<Me.Ja)return 3;if(X==null||We||(X[0]=Me.xa?2:1),Y=[Y],Ie=[Ie],Me.xa){if(5>A){Re=7;break}X=Y,oe=Ie,We=H,x==null||5>A?x=0:5<=A&&x[b+0]==47&&!(x[b+4]>>5)?(Ye=[0],Wt=[0],ut=[0],Q(at=new Z,x,b,A),Ul(at,Ye,Wt,ut)?(X!=null&&(X[0]=Ye[0]),oe!=null&&(oe[0]=Wt[0]),We!=null&&(We[0]=ut[0]),x=1):x=0):x=0}else{if(10>A){Re=7;break}X=Ie,x==null||10>A||!ev(x,b+3,A-3)?x=0:(oe=x[b+0]|x[b+1]<<8|x[b+2]<<16,We=16383&(x[b+7]<<8|x[b+6]),x=16383&(x[b+9]<<8|x[b+8]),1&oe||3<(oe>>1&7)||!(oe>>4&1)||oe>>5>=Me.Ja||!We||!x?x=0:(Y&&(Y[0]=We),X&&(X[0]=x),x=1))}if(!x||(Y=Y[0],Ie=Ie[0],Fe&&(ie[0]!=Y||Ee[0]!=Ie)))return 3;ee!=null&&(ee[0]=Me,ee.offset=b-ee.w,s(4294967286>b-ee.w),s(ee.offset==ee.ha-A));break}return Re==0||Re==7&&Fe&&ee==null?(H!=null&&(H[0]|=Me.na!=null&&0<Me.na.length),R!=null&&(R[0]=Y),U!=null&&(U[0]=Ie),0):Re}function lp(x,b,A){var R=b.width,U=b.height,H=0,Y=0,X=R,ee=U;if(b.Da=x!=null&&0<x.Da,b.Da&&(X=x.cd,ee=x.bd,H=x.v,Y=x.j,11>A||(H&=-2,Y&=-2),0>H||0>Y||0>=X||0>=ee||H+X>R||Y+ee>U))return 0;if(b.v=H,b.j=Y,b.va=H+X,b.o=Y+ee,b.U=X,b.T=ee,b.da=x!=null&&0<x.da,b.da){if(!ss(X,ee,A=[x.ib],H=[x.hb]))return 0;b.ib=A[0],b.hb=H[0]}return b.ob=x!=null&&x.ob,b.Kb=x==null||!x.Sd,b.da&&(b.ob=b.ib<3*R/4&&b.hb<3*U/4,b.Kb=0),1}function cp(x){if(x==null)return 2;if(11>x.S){var b=x.f.RGBA;b.fb+=(x.height-1)*b.A,b.A=-b.A}else b=x.f.kb,x=x.height,b.O+=(x-1)*b.fa,b.fa=-b.fa,b.N+=(x-1>>1)*b.Ab,b.Ab=-b.Ab,b.W+=(x-1>>1)*b.Db,b.Db=-b.Db,b.F!=null&&(b.J+=(x-1)*b.lb,b.lb=-b.lb);return 0}function Lc(x,b,A,R){if(R==null||0>=x||0>=b)return 2;if(A!=null){if(A.Da){var U=A.cd,H=A.bd,Y=-2&A.v,X=-2&A.j;if(0>Y||0>X||0>=U||0>=H||Y+U>x||X+H>b)return 2;x=U,b=H}if(A.da){if(!ss(x,b,U=[A.ib],H=[A.hb]))return 2;x=U[0],b=H[0]}}R.width=x,R.height=b;e:{var ee=R.width,ie=R.height;if(x=R.S,0>=ee||0>=ie||!(x>=fv&&13>x))x=2;else{if(0>=R.Rd&&R.sd==null){Y=H=U=b=0;var Ee=(X=ee*e3[x])*ie;if(11>x||(H=(ie+1)/2*(b=(ee+1)/2),x==12&&(Y=(U=ee)*ie)),(ie=i(Ee+2*H+Y))==null){x=1;break e}R.sd=ie,11>x?((ee=R.f.RGBA).eb=ie,ee.fb=0,ee.A=X,ee.size=Ee):((ee=R.f.kb).y=ie,ee.O=0,ee.fa=X,ee.Fd=Ee,ee.f=ie,ee.N=0+Ee,ee.Ab=b,ee.Cd=H,ee.ea=ie,ee.W=0+Ee+H,ee.Db=b,ee.Ed=H,x==12&&(ee.F=ie,ee.J=0+Ee+2*H),ee.Tc=Y,ee.lb=U)}if(b=1,U=R.S,H=R.width,Y=R.height,U>=fv&&13>U)if(11>U)x=R.f.RGBA,b&=(X=Math.abs(x.A))*(Y-1)+H<=x.size,b&=X>=H*e3[U],b&=x.eb!=null;else{x=R.f.kb,X=(H+1)/2,Ee=(Y+1)/2,ee=Math.abs(x.fa),ie=Math.abs(x.Ab);var Fe=Math.abs(x.Db),oe=Math.abs(x.lb),Me=oe*(Y-1)+H;b&=ee*(Y-1)+H<=x.Fd,b&=ie*(Ee-1)+X<=x.Cd,b=(b&=Fe*(Ee-1)+X<=x.Ed)&ee>=H&ie>=X&Fe>=X,b&=x.y!=null,b&=x.f!=null,b&=x.ea!=null,U==12&&(b&=oe>=H,b&=Me<=x.Tc,b&=x.F!=null)}else b=0;x=b?0:2}}return x!=0||A!=null&&A.fd&&(x=cp(R)),x}var _u=64,ii=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],oi=24,Dc=32,Yl=8,Ic=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];St("Predictor0","PredictorAdd0"),M.Predictor0=function(){return 4278190080},M.Predictor1=function(x){return x},M.Predictor2=function(x,b,A){return b[A+0]},M.Predictor3=function(x,b,A){return b[A+1]},M.Predictor4=function(x,b,A){return b[A-1]},M.Predictor5=function(x,b,A){return Pe(Pe(x,b[A+1]),b[A+0])},M.Predictor6=function(x,b,A){return Pe(x,b[A-1])},M.Predictor7=function(x,b,A){return Pe(x,b[A+0])},M.Predictor8=function(x,b,A){return Pe(b[A-1],b[A+0])},M.Predictor9=function(x,b,A){return Pe(b[A+0],b[A+1])},M.Predictor10=function(x,b,A){return Pe(Pe(x,b[A-1]),Pe(b[A+0],b[A+1]))},M.Predictor11=function(x,b,A){var R=b[A+0];return 0>=Qe(R>>24&255,x>>24&255,(b=b[A-1])>>24&255)+Qe(R>>16&255,x>>16&255,b>>16&255)+Qe(R>>8&255,x>>8&255,b>>8&255)+Qe(255&R,255&x,255&b)?R:x},M.Predictor12=function(x,b,A){var R=b[A+0];return(Ue((x>>24&255)+(R>>24&255)-((b=b[A-1])>>24&255))<<24|Ue((x>>16&255)+(R>>16&255)-(b>>16&255))<<16|Ue((x>>8&255)+(R>>8&255)-(b>>8&255))<<8|Ue((255&x)+(255&R)-(255&b)))>>>0},M.Predictor13=function(x,b,A){var R=b[A-1];return(rt((x=Pe(x,b[A+0]))>>24&255,R>>24&255)<<24|rt(x>>16&255,R>>16&255)<<16|rt(x>>8&255,R>>8&255)<<8|rt(255&x,255&R))>>>0};var dp=M.PredictorAdd0;M.PredictorAdd1=Je,St("Predictor2","PredictorAdd2"),St("Predictor3","PredictorAdd3"),St("Predictor4","PredictorAdd4"),St("Predictor5","PredictorAdd5"),St("Predictor6","PredictorAdd6"),St("Predictor7","PredictorAdd7"),St("Predictor8","PredictorAdd8"),St("Predictor9","PredictorAdd9"),St("Predictor10","PredictorAdd10"),St("Predictor11","PredictorAdd11"),St("Predictor12","PredictorAdd12"),St("Predictor13","PredictorAdd13");var Fm=M.PredictorAdd2;At("ColorIndexInverseTransform","MapARGB","32b",function(x){return x>>8&255},function(x){return x}),At("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(x){return x},function(x){return x>>8&255});var nn,uv=M.ColorIndexInverseTransform,rl=M.MapARGB,nl=M.VP8LColorIndexInverseTransformAlpha,up=M.MapAlpha,mp=M.VP8LPredictorsAdd=[];mp.length=16,(M.VP8LPredictors=[]).length=16,(M.VP8LPredictorsAdd_C=[]).length=16,(M.VP8LPredictors_C=[]).length=16;var hp,fp,Rc,Fc,Oc,Su,$c,Cu,Hi,al,nr,xr,an,Cn,Gl,pp,Om,mv,AS,PS,ES,TS,MS,LS,xp,DS,IS,RS,FS=i(511),OS=i(2041),$S=i(225),BS=i(767),US=0,Qj=OS,hv=$S,li=BS,Wi=FS,fv=0,pv=1,zS=2,xv=3,gv=4,Zj=5,qS=6,Xj=7,Jj=8,vv=9,eb=10,eV=[2,3,7],tV=[3,3,11],VS=[280,256,256,256,40],sV=[0,1,1,1,0],rV=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],nV=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],aV=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],iV=8,tb=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],sb=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],gp=null,oV=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],lV=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],HS=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],cV=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],dV=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],uV=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],mV=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Bc=[],jo=[],Ql=[],hV=1,WS=2,Uc=[],Ki=[];za("UpsampleRgbLinePair",yu,3),za("UpsampleBgrLinePair",ju,3),za("UpsampleRgbaLinePair",op,4),za("UpsampleBgraLinePair",ip,4),za("UpsampleArgbLinePair",Nu,4),za("UpsampleRgba4444LinePair",bu,2),za("UpsampleRgb565LinePair",aa,2);var fV=M.UpsampleRgbLinePair,pV=M.UpsampleBgrLinePair,KS=M.UpsampleRgbaLinePair,YS=M.UpsampleBgraLinePair,GS=M.UpsampleArgbLinePair,QS=M.UpsampleRgba4444LinePair,xV=M.UpsampleRgb565LinePair,yv=16,jv=1<<yv-1,vp=-227,rb=482,ZS=6,gV=(256<<ZS)-1,XS=0,vV=i(256),yV=i(256),jV=i(256),bV=i(256),NV=i(rb-vp),wV=i(rb-vp);Kl("YuvToRgbRow",yu,3),Kl("YuvToBgrRow",ju,3),Kl("YuvToRgbaRow",op,4),Kl("YuvToBgraRow",ip,4),Kl("YuvToArgbRow",Nu,4),Kl("YuvToRgba4444Row",bu,2),Kl("YuvToRgb565Row",aa,2);var JS=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],bv=[0,2,8],_V=[8,7,6,4,4,2,2,2,1,1,1,1],SV=1;this.WebPDecodeRGBA=function(x,b,A,R,U){var H=pv,Y=new Le,X=new pr;Y.ba=X,X.S=H,X.width=[X.width],X.height=[X.height];var ee=X.width,ie=X.height,Ee=new gs;if(Ee==null||x==null)var Fe=2;else s(Ee!=null),Fe=wu(x,b,A,Ee.width,Ee.height,Ee.Pd,Ee.Qd,Ee.format,null);if(Fe!=0?ee=0:(ee!=null&&(ee[0]=Ee.width[0]),ie!=null&&(ie[0]=Ee.height[0]),ee=1),ee){X.width=X.width[0],X.height=X.height[0],R!=null&&(R[0]=X.width),U!=null&&(U[0]=X.height);e:{if(R=new Em,(U=new Ge).data=x,U.w=b,U.ha=A,U.kd=1,b=[0],s(U!=null),((x=wu(U.data,U.w,U.ha,null,null,null,b,null,U))==0||x==7)&&b[0]&&(x=4),(b=x)==0){if(s(Y!=null),R.data=U.data,R.w=U.w+U.offset,R.ha=U.ha-U.offset,R.put=is,R.ac=Jo,R.bc=Bl,R.ma=Y,U.xa){if((x=iu())==null){Y=1;break e}if(function(oe,Me){var Ie=[0],We=[0],Re=[0];t:for(;;){if(oe==null)return 0;if(Me==null)return oe.a=2,0;if(oe.l=Me,oe.a=0,Q(oe.m,Me.data,Me.w,Me.ha),!Ul(oe.m,Ie,We,Re)){oe.a=3;break t}if(oe.xb=WS,Me.width=Ie[0],Me.height=We[0],!tl(Ie[0],We[0],1,oe,null))break t;return 1}return s(oe.a!=0),0}(x,R)){if(R=(b=Lc(R.width,R.height,Y.Oa,Y.ba))==0){t:{R=x;s:for(;;){if(R==null){R=0;break t}if(s(R.s.yc!=null),s(R.s.Ya!=null),s(0<R.s.Wb),s((A=R.l)!=null),s((U=A.ma)!=null),R.xb!=0){if(R.ca=U.ba,R.tb=U.tb,s(R.ca!=null),!lp(U.Oa,A,xv)){R.a=2;break s}if(!ou(R,A.width)||A.da)break s;if((A.da||Ns(R.ca.S))&&qi(),11>R.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),R.ca.f.kb.F!=null&&qi()),R.Pb&&0<R.s.ua&&R.s.vb.X==null&&!pe(R.s.vb,R.s.Wa.Xa)){R.a=1;break s}R.xb=0}if(!vo(R,R.V,R.Ba,R.c,R.i,A.o,Pc))break s;U.Dc=R.Ma,R=1;break t}s(R.a!=0),R=0}R=!R}R&&(b=x.a)}else b=x.a}else{if((x=new Ij)==null){Y=1;break e}if(x.Fa=U.na,x.P=U.P,x.qc=U.Sa,tv(x,R)){if((b=Lc(R.width,R.height,Y.Oa,Y.ba))==0){if(x.Aa=0,A=Y.Oa,s((U=x)!=null),A!=null){if(0<(ee=0>(ee=A.Md)?0:100<ee?255:255*ee/100)){for(ie=Ee=0;4>ie;++ie)12>(Fe=U.pb[ie]).lc&&(Fe.ia=ee*_V[0>Fe.lc?0:Fe.lc]>>3),Ee|=Fe.ia;Ee&&(alert("todo:VP8InitRandom"),U.ia=1)}U.Ga=A.Id,100<U.Ga?U.Ga=100:0>U.Ga&&(U.Ga=0)}(function(oe,Me){if(oe==null)return 0;if(Me==null)return vn(oe,2,"NULL VP8Io parameter in VP8Decode().");if(!oe.cb&&!tv(oe,Me))return 0;if(s(oe.cb),Me.ac==null||Me.ac(Me)){Me.ob&&(oe.L=0);var Ie=bv[oe.L];if(oe.L==2?(oe.yb=0,oe.zb=0):(oe.yb=Me.v-Ie>>4,oe.zb=Me.j-Ie>>4,0>oe.yb&&(oe.yb=0),0>oe.zb&&(oe.zb=0)),oe.Va=Me.o+15+Ie>>4,oe.Hb=Me.va+15+Ie>>4,oe.Hb>oe.za&&(oe.Hb=oe.za),oe.Va>oe.Ub&&(oe.Va=oe.Ub),0<oe.L){var We=oe.ed;for(Ie=0;4>Ie;++Ie){var Re;if(oe.Qa.Cb){var Ye=oe.Qa.Lb[Ie];oe.Qa.Fb||(Ye+=We.Tb)}else Ye=We.Tb;for(Re=0;1>=Re;++Re){var Ze=oe.gd[Ie][Re],ut=Ye;if(We.Pc&&(ut+=We.vd[0],Re&&(ut+=We.od[0])),0<(ut=0>ut?0:63<ut?63:ut)){var at=ut;0<We.wb&&(at=4<We.wb?at>>2:at>>1)>9-We.wb&&(at=9-We.wb),1>at&&(at=1),Ze.dd=at,Ze.tc=2*ut+at,Ze.ld=40<=ut?2:15<=ut?1:0}else Ze.tc=0;Ze.La=Re}}}Ie=0}else vn(oe,6,"Frame setup failed"),Ie=oe.a;if(Ie=Ie==0){if(Ie){oe.$c=0,0<oe.Aa||(oe.Ic=SV);t:{Ie=oe.Ic,We=4*(at=oe.za);var Jt=32*at,$t=at+1,Cs=0<oe.L?at*(0<oe.Aa?2:1):0,Wt=(oe.Aa==2?2:1)*at;if((Ze=We+832+(Re=3*(16*Ie+bv[oe.L])/2*Jt)+(Ye=oe.Fa!=null&&0<oe.Fa.length?oe.Kc.c*oe.Kc.i:0))!=Ze)Ie=0;else{if(Ze>oe.Vb){if(oe.Vb=0,oe.Ec=i(Ze),oe.Fc=0,oe.Ec==null){Ie=vn(oe,1,"no memory during frame initialization.");break t}oe.Vb=Ze}Ze=oe.Ec,ut=oe.Fc,oe.Ac=Ze,oe.Bc=ut,ut+=We,oe.Gd=o(Jt,Xg),oe.Hd=0,oe.rb=o($t+1,Gf),oe.sb=1,oe.wa=Cs?o(Cs,zi):null,oe.Y=0,oe.D.Nb=0,oe.D.wa=oe.wa,oe.D.Y=oe.Y,0<oe.Aa&&(oe.D.Y+=at),s(!0),oe.oc=Ze,oe.pc=ut,ut+=832,oe.ya=o(Wt,Qf),oe.aa=0,oe.D.ya=oe.ya,oe.D.aa=oe.aa,oe.Aa==2&&(oe.D.aa+=at),oe.R=16*at,oe.B=8*at,at=(Jt=bv[oe.L])*oe.R,Jt=Jt/2*oe.B,oe.sa=Ze,oe.ta=ut+at,oe.qa=oe.sa,oe.ra=oe.ta+16*Ie*oe.R+Jt,oe.Ha=oe.qa,oe.Ia=oe.ra+8*Ie*oe.B+Jt,oe.$c=0,ut+=Re,oe.mb=Ye?Ze:null,oe.nb=Ye?ut:null,s(ut+Ye<=oe.Fc+oe.Vb),lu(oe),a(oe.Ac,oe.Bc,0,We),Ie=1}}if(Ie){if(Me.ka=0,Me.y=oe.sa,Me.O=oe.ta,Me.f=oe.qa,Me.N=oe.ra,Me.ea=oe.Ha,Me.Vd=oe.Ia,Me.fa=oe.R,Me.Rc=oe.B,Me.F=null,Me.J=0,!US){for(Ie=-255;255>=Ie;++Ie)FS[255+Ie]=0>Ie?-Ie:Ie;for(Ie=-1020;1020>=Ie;++Ie)OS[1020+Ie]=-128>Ie?-128:127<Ie?127:Ie;for(Ie=-112;112>=Ie;++Ie)$S[112+Ie]=-16>Ie?-16:15<Ie?15:Ie;for(Ie=-255;510>=Ie;++Ie)BS[255+Ie]=0>Ie?0:255<Ie?255:Ie;US=1}$c=rv,Cu=Fj,al=Oj,nr=sl,xr=sv,Hi=Rj,an=iv,Cn=ov,Gl=S,pp=B,Om=xu,mv=lv,AS=ce,PS=Se,ES=ap,TS=pu,MS=nv,LS=av,jo[0]=Hj,jo[1]=Xf,jo[2]=qj,jo[3]=Vj,jo[4]=Wj,jo[5]=Vl,jo[6]=ql,jo[7]=Kj,jo[8]=Tm,jo[9]=Yj,Bc[0]=Tc,Bc[1]=Bj,Bc[2]=Uj,Bc[3]=Jf,Bc[4]=zj,Bc[5]=uu,Bc[6]=ep,Ql[0]=Lm,Ql[1]=$j,Ql[2]=tp,Ql[3]=mu,Ql[4]=sp,Ql[5]=Gj,Ql[6]=rp,Ie=1}else Ie=0}Ie&&(Ie=function(zs,kn){for(zs.M=0;zs.M<zs.Va;++zs.M){var ks,Kt=zs.Jc[zs.M&zs.Xb],wt=zs.m,on=zs;for(ks=0;ks<on.za;++ks){var ws=wt,Ws=on,Cr=Ws.Ac,Wn=Ws.Bc+4*ks,Na=Ws.zc,Gr=Ws.ya[Ws.aa+ks];if(Ws.Qa.Bb?Gr.$b=Be(ws,Ws.Pa.jb[0])?2+Be(ws,Ws.Pa.jb[2]):Be(ws,Ws.Pa.jb[1]):Gr.$b=0,Ws.kc&&(Gr.Ad=Be(ws,Ws.Bd)),Gr.Za=!Be(ws,145)+0,Gr.Za){var ia=Gr.Ob,wa=0;for(Ws=0;4>Ws;++Ws){var An,Zs=Na[0+Ws];for(An=0;4>An;++An){Zs=dV[Cr[Wn+An]][Zs];for(var cr=HS[Be(ws,Zs[0])];0<cr;)cr=HS[2*cr+Be(ws,Zs[cr])];Zs=-cr,Cr[Wn+An]=Zs}n(ia,wa,Cr,Wn,4),wa+=4,Na[0+Ws]=Zs}}else Zs=Be(ws,156)?Be(ws,128)?1:3:Be(ws,163)?2:0,Gr.Ob[0]=Zs,a(Cr,Wn,Zs,4),a(Na,0,Zs,4);Gr.Dd=Be(ws,142)?Be(ws,114)?Be(ws,183)?1:3:2:0}if(on.m.Ka)return vn(zs,7,"Premature end-of-partition0 encountered.");for(;zs.ja<zs.za;++zs.ja){if(on=Kt,ws=(wt=zs).rb[wt.sb-1],Cr=wt.rb[wt.sb+wt.ja],ks=wt.ya[wt.aa+wt.ja],Wn=wt.kc?ks.Ad:0)ws.la=Cr.la=0,ks.Za||(ws.Na=Cr.Na=0),ks.Hc=0,ks.Gc=0,ks.ia=0;else{var Qr,dr;if(ws=Cr,Cr=on,Wn=wt.Pa.Xc,Na=wt.ya[wt.aa+wt.ja],Gr=wt.pb[Na.$b],Ws=Na.ad,ia=0,wa=wt.rb[wt.sb-1],Zs=An=0,a(Ws,ia,0,384),Na.Za)var Kn=0,bo=Wn[3];else{cr=i(16);var ln=ws.Na+wa.Na;if(ln=gp(Cr,Wn[1],ln,Gr.Eb,0,cr,0),ws.Na=wa.Na=(0<ln)+0,1<ln)$c(cr,0,Ws,ia);else{var qa=cr[0]+3>>3;for(cr=0;256>cr;cr+=16)Ws[ia+cr]=qa}Kn=1,bo=Wn[0]}var gr=15&ws.la,Pn=15&wa.la;for(cr=0;4>cr;++cr){var ci=1&Pn;for(qa=dr=0;4>qa;++qa)gr=gr>>1|(ci=(ln=gp(Cr,bo,ln=ci+(1&gr),Gr.Sc,Kn,Ws,ia))>Kn)<<7,dr=dr<<2|(3<ln?3:1<ln?2:Ws[ia+0]!=0),ia+=16;gr>>=4,Pn=Pn>>1|ci<<7,An=(An<<8|dr)>>>0}for(bo=gr,Kn=Pn>>4,Qr=0;4>Qr;Qr+=2){for(dr=0,gr=ws.la>>4+Qr,Pn=wa.la>>4+Qr,cr=0;2>cr;++cr){for(ci=1&Pn,qa=0;2>qa;++qa)ln=ci+(1&gr),gr=gr>>1|(ci=0<(ln=gp(Cr,Wn[2],ln,Gr.Qc,0,Ws,ia)))<<3,dr=dr<<2|(3<ln?3:1<ln?2:Ws[ia+0]!=0),ia+=16;gr>>=2,Pn=Pn>>1|ci<<5}Zs|=dr<<4*Qr,bo|=gr<<4<<Qr,Kn|=(240&Pn)<<Qr}ws.la=bo,wa.la=Kn,Na.Hc=An,Na.Gc=Zs,Na.ia=43690&Zs?0:Gr.ia,Wn=!(An|Zs)}if(0<wt.L&&(wt.wa[wt.Y+wt.ja]=wt.gd[ks.$b][ks.Za],wt.wa[wt.Y+wt.ja].La|=!Wn),on.Ka)return vn(zs,7,"Premature end-of-file encountered.")}if(lu(zs),wt=kn,on=1,ks=(Kt=zs).D,ws=0<Kt.L&&Kt.M>=Kt.zb&&Kt.M<=Kt.Va,Kt.Aa==0)t:{if(ks.M=Kt.M,ks.uc=ws,Vi(Kt,ks),on=1,ks=(dr=Kt.D).Nb,ws=(Zs=bv[Kt.L])*Kt.R,Cr=Zs/2*Kt.B,cr=16*ks*Kt.R,qa=8*ks*Kt.B,Wn=Kt.sa,Na=Kt.ta-ws+cr,Gr=Kt.qa,Ws=Kt.ra-Cr+qa,ia=Kt.Ha,wa=Kt.Ia-Cr+qa,Pn=(gr=dr.M)==0,An=gr>=Kt.Va-1,Kt.Aa==2&&Vi(Kt,dr),dr.uc)for(ci=(ln=Kt).D.M,s(ln.D.uc),dr=ln.yb;dr<ln.Hb;++dr){Kn=dr,bo=ci;var _a=(di=(Yn=ln).D).Nb;Qr=Yn.R;var di=di.wa[di.Y+Kn],ui=Yn.sa,Va=Yn.ta+16*_a*Qr+16*Kn,mi=di.dd,br=di.tc;if(br!=0)if(s(3<=br),Yn.L==1)0<Kn&&TS(ui,Va,Qr,br+4),di.La&&LS(ui,Va,Qr,br),0<bo&&ES(ui,Va,Qr,br+4),di.La&&MS(ui,Va,Qr,br);else{var hi=Yn.B,No=Yn.qa,ku=Yn.ra+8*_a*hi+8*Kn,Zl=Yn.Ha,Yn=Yn.Ia+8*_a*hi+8*Kn;_a=di.ld,0<Kn&&(Cn(ui,Va,Qr,br+4,mi,_a),pp(No,ku,Zl,Yn,hi,br+4,mi,_a)),di.La&&(mv(ui,Va,Qr,br,mi,_a),PS(No,ku,Zl,Yn,hi,br,mi,_a)),0<bo&&(an(ui,Va,Qr,br+4,mi,_a),Gl(No,ku,Zl,Yn,hi,br+4,mi,_a)),di.La&&(Om(ui,Va,Qr,br,mi,_a),AS(No,ku,Zl,Yn,hi,br,mi,_a))}}if(Kt.ia&&alert("todo:DitherRow"),wt.put!=null){if(dr=16*gr,gr=16*(gr+1),Pn?(wt.y=Kt.sa,wt.O=Kt.ta+cr,wt.f=Kt.qa,wt.N=Kt.ra+qa,wt.ea=Kt.Ha,wt.W=Kt.Ia+qa):(dr-=Zs,wt.y=Wn,wt.O=Na,wt.f=Gr,wt.N=Ws,wt.ea=ia,wt.W=wa),An||(gr-=Zs),gr>wt.o&&(gr=wt.o),wt.F=null,wt.J=null,Kt.Fa!=null&&0<Kt.Fa.length&&dr<gr&&(wt.J=yn(Kt,wt,dr,gr-dr),wt.F=Kt.mb,wt.F==null&&wt.F.length==0)){on=vn(Kt,3,"Could not decode alpha data.");break t}dr<wt.j&&(Zs=wt.j-dr,dr=wt.j,s(!(1&Zs)),wt.O+=Kt.R*Zs,wt.N+=Kt.B*(Zs>>1),wt.W+=Kt.B*(Zs>>1),wt.F!=null&&(wt.J+=wt.width*Zs)),dr<gr&&(wt.O+=wt.v,wt.N+=wt.v>>1,wt.W+=wt.v>>1,wt.F!=null&&(wt.J+=wt.v),wt.ka=dr-wt.j,wt.U=wt.va-wt.v,wt.T=gr-dr,on=wt.put(wt))}ks+1!=Kt.Ic||An||(n(Kt.sa,Kt.ta-ws,Wn,Na+16*Kt.R,ws),n(Kt.qa,Kt.ra-Cr,Gr,Ws+8*Kt.B,Cr),n(Kt.Ha,Kt.Ia-Cr,ia,wa+8*Kt.B,Cr))}if(!on)return vn(zs,6,"Output aborted.")}return 1}(oe,Me)),Me.bc!=null&&Me.bc(Me),Ie&=1}return Ie?(oe.cb=0,Ie):0})(x,R)||(b=x.a)}}else b=x.a}b==0&&Y.Oa!=null&&Y.Oa.fd&&(b=cp(Y.ba))}Y=b}H=Y!=0?null:11>H?X.f.RGBA.eb:X.f.kb.y}else H=null;return H};var e3=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(M,F){for(var k="",D=0;D<4;D++)k+=String.fromCharCode(M[F++]);return k}function u(M,F){return M[F+0]|M[F+1]<<8}function m(M,F){return(M[F+0]|M[F+1]<<8|M[F+2]<<16)>>>0}function f(M,F){return(M[F+0]|M[F+1]<<8|M[F+2]<<16|M[F+3]<<24)>>>0}new c;var h=[0],p=[0],g=[],y=new c,v=t,j=function(M,F){var k={},D=0,z=!1,W=0,ue=0;if(k.frames=[],!function(I,Z){for(var J=0;J<4;J++)if(I[Z+J]!="RIFF".charCodeAt(J))return!0;return!1}(M,F)){for(f(M,F+=4),F+=8;F<M.length;){var ae=d(M,F),Ne=f(M,F+=4);F+=4;var K=Ne+(1&Ne);switch(ae){case"VP8 ":case"VP8L":k.frames[D]===void 0&&(k.frames[D]={}),(G=k.frames[D]).src_off=z?ue:F-8,G.src_size=W+Ne+8,D++,z&&(z=!1,W=0,ue=0);break;case"VP8X":(G=k.header={}).feature_flags=M[F];var Q=F+4;G.canvas_width=1+m(M,Q),Q+=3,G.canvas_height=1+m(M,Q),Q+=3;break;case"ALPH":z=!0,W=K+8,ue=F-8;break;case"ANIM":(G=k.header).bgcolor=f(M,F),Q=F+4,G.loop_count=u(M,Q),Q+=2;break;case"ANMF":var ke,G;(G=k.frames[D]={}).offset_x=2*m(M,F),F+=3,G.offset_y=2*m(M,F),F+=3,G.width=1+m(M,F),F+=3,G.height=1+m(M,F),F+=3,G.duration=m(M,F),F+=3,ke=M[F++],G.dispose=1&ke,G.blend=ke>>1&1}ae!="ANMF"&&(F+=K)}return k}}(v,0);j.response=v,j.rgbaoutput=!0,j.dataurl=!1;var w=j.header?j.header:null,_=j.frames?j.frames:null;if(w){w.loop_counter=w.loop_count,h=[w.canvas_height],p=[w.canvas_width];for(var P=0;P<_.length&&_[P].blend!=0;P++);}var E=_[0],L=y.WebPDecodeRGBA(v,E.src_off,E.src_size,p,h);E.rgba=L,E.imgwidth=p[0],E.imgheight=h[0];for(var T=0;T<p[0]*h[0]*4;T++)g[T]=L[T];return this.width=p,this.height=h,this.data=g,this}(function(t){var s,r,n,a,i,o,l,c,d,u=function(I){return I=I||{},this.isStrokeTransparent=I.isStrokeTransparent||!1,this.strokeOpacity=I.strokeOpacity||1,this.strokeStyle=I.strokeStyle||"#000000",this.fillStyle=I.fillStyle||"#000000",this.isFillTransparent=I.isFillTransparent||!1,this.fillOpacity=I.fillOpacity||1,this.font=I.font||"10px sans-serif",this.textBaseline=I.textBaseline||"alphabetic",this.textAlign=I.textAlign||"left",this.lineWidth=I.lineWidth||1,this.lineJoin=I.lineJoin||"miter",this.lineCap=I.lineCap||"butt",this.path=I.path||[],this.transform=I.transform!==void 0?I.transform.clone():new c,this.globalCompositeOperation=I.globalCompositeOperation||"normal",this.globalAlpha=I.globalAlpha||1,this.clip_path=I.clip_path||[],this.currentPoint=I.currentPoint||new o,this.miterLimit=I.miterLimit||10,this.lastPoint=I.lastPoint||new o,this.lineDashOffset=I.lineDashOffset||0,this.lineDash=I.lineDash||[],this.margin=I.margin||[0,0,0,0],this.prevPageLastElemOffset=I.prevPageLastElemOffset||0,this.ignoreClearRect=typeof I.ignoreClearRect!="boolean"||I.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new m(this),s=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,d=new u}]);var m=function(I){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Z=I;Object.defineProperty(this,"pdf",{get:function(){return Z}});var J=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return J},set:function(qe){J=!!qe}});var se=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return se},set:function(qe){se=!!qe}});var je=0;Object.defineProperty(this,"posX",{get:function(){return je},set:function(qe){isNaN(qe)||(je=qe)}});var be=0;Object.defineProperty(this,"posY",{get:function(){return be},set:function(qe){isNaN(qe)||(be=qe)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(qe){var pe;typeof qe=="number"?pe=[qe,qe,qe,qe]:((pe=new Array(4))[0]=qe[0],pe[1]=qe.length>=2?qe[1]:pe[0],pe[2]=qe.length>=3?qe[2]:pe[0],pe[3]=qe.length>=4?qe[3]:pe[1]),d.margin=pe}});var q=!1;Object.defineProperty(this,"autoPaging",{get:function(){return q},set:function(qe){q=qe}});var Te=0;Object.defineProperty(this,"lastBreak",{get:function(){return Te},set:function(qe){Te=qe}});var Be=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Be},set:function(qe){Be=qe}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(qe){qe instanceof u&&(d=qe)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(qe){d.path=qe}});var Ve=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ve},set:function(qe){Ve=qe}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(qe){var pe;pe=f(qe),this.ctx.fillStyle=pe.style,this.ctx.isFillTransparent=pe.a===0,this.ctx.fillOpacity=pe.a,this.pdf.setFillColor(pe.r,pe.g,pe.b,{a:pe.a}),this.pdf.setTextColor(pe.r,pe.g,pe.b,{a:pe.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(qe){var pe=f(qe);this.ctx.strokeStyle=pe.style,this.ctx.isStrokeTransparent=pe.a===0,this.ctx.strokeOpacity=pe.a,pe.a===0?this.pdf.setDrawColor(255,255,255):(pe.a,this.pdf.setDrawColor(pe.r,pe.g,pe.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(qe){["butt","round","square"].indexOf(qe)!==-1&&(this.ctx.lineCap=qe,this.pdf.setLineCap(qe))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(qe){isNaN(qe)||(this.ctx.lineWidth=qe,this.pdf.setLineWidth(qe))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(qe){["bevel","round","miter"].indexOf(qe)!==-1&&(this.ctx.lineJoin=qe,this.pdf.setLineJoin(qe))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(qe){isNaN(qe)||(this.ctx.miterLimit=qe,this.pdf.setMiterLimit(qe))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(qe){this.ctx.textBaseline=qe}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(qe){["right","end","center","left","start"].indexOf(qe)!==-1&&(this.ctx.textAlign=qe)}});var ct=null,vt=null;Object.defineProperty(this,"fontFaces",{get:function(){return vt},set:function(qe){ct=null,vt=qe}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(qe){var pe;if(this.ctx.font=qe,(pe=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(qe))!==null){var ps=pe[1];pe[2];var ns=pe[3],ss=pe[4];pe[5];var dt=pe[6],ts=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ss)[2];ss=Math.floor(ts==="px"?parseFloat(ss)*this.pdf.internal.scaleFactor:ts==="em"?parseFloat(ss)*this.pdf.getFontSize():parseFloat(ss)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ss);var St=function(It){var At,fr,Us=[],zt=It.trim();if(zt==="")return z2;if(zt in zA)return[zA[zt]];for(;zt!=="";){switch(fr=null,At=(zt=VA(zt)).charAt(0)){case'"':case"'":fr=_fe(zt.substring(1),At);break;default:fr=Sfe(zt)}if(fr===null||(Us.push(fr[0]),(zt=VA(fr[1]))!==""&&zt.charAt(0)!==","))return z2;zt=zt.replace(/^,/,"")}return Us}(dt);if(this.fontFaces){var ve=function(It,At){if(ct===null){var fr=function(Us){var zt=[];return Object.keys(Us).forEach(function(xs){Us[xs].forEach(function(sr){var rs=null;switch(sr){case"bold":rs={family:xs,weight:"bold"};break;case"italic":rs={family:xs,style:"italic"};break;case"bolditalic":rs={family:xs,weight:"bold",style:"italic"};break;case"":case"normal":rs={family:xs}}rs!==null&&(rs.ref={name:xs,style:sr},zt.push(rs))})}),zt}(It.getFontList());ct=function(Us){for(var zt={},xs=0;xs<Us.length;++xs){var sr=U2(Us[xs]),rs=sr.family,Fs=sr.stretch,Ns=sr.style,sn=sr.weight;zt[rs]=zt[rs]||{},zt[rs][Fs]=zt[rs][Fs]||{},zt[rs][Fs][Ns]=zt[rs][Fs][Ns]||{},zt[rs][Fs][Ns][sn]=sr}return zt}(fr.concat(At))}return ct}(this.pdf,this.fontFaces),Pe=St.map(function(It){return{family:It,stretch:"normal",weight:ns,style:ps}}),Ue=function(It,At,fr){for(var Us=(fr=fr||{}).defaultFontFamily||"times",zt=Object.assign({},wfe,fr.genericFontFamilies||{}),xs=null,sr=null,rs=0;rs<At.length;++rs)if(zt[(xs=U2(At[rs])).family]&&(xs.family=zt[xs.family]),It.hasOwnProperty(xs.family)){sr=It[xs.family];break}if(!(sr=sr||It[Us]))throw new Error("Could not find a font-family for the rule '"+qA(xs)+"' and default family '"+Us+"'.");if(sr=function(Fs,Ns){if(Ns[Fs])return Ns[Fs];var sn=a5[Fs],_n=sn<=a5.normal?-1:1,pr=UA(Ns,yq,sn,_n);if(!pr)throw new Error("Could not find a matching font-stretch value for "+Fs);return pr}(xs.stretch,sr),sr=function(Fs,Ns){if(Ns[Fs])return Ns[Fs];for(var sn=vq[Fs],_n=0;_n<sn.length;++_n)if(Ns[sn[_n]])return Ns[sn[_n]];throw new Error("Could not find a matching font-style for "+Fs)}(xs.style,sr),!(sr=function(Fs,Ns){if(Ns[Fs])return Ns[Fs];if(Fs===400&&Ns[500])return Ns[500];if(Fs===500&&Ns[400])return Ns[400];var sn=Nfe[Fs],_n=UA(Ns,jq,sn,Fs<400?-1:1);if(!_n)throw new Error("Could not find a matching font-weight for value "+Fs);return _n}(xs.weight,sr)))throw new Error("Failed to resolve a font for the rule '"+qA(xs)+"'.");return sr}(ve,Pe);this.pdf.setFont(Ue.ref.name,Ue.ref.style)}else{var rt="";(ns==="bold"||parseInt(ns,10)>=700||ps==="bold")&&(rt="bold"),ps==="italic"&&(rt+="italic"),rt.length===0&&(rt="normal");for(var Qe="",Je={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},it=0;it<St.length;it++){if(this.pdf.internal.getFont(St[it],rt,{noFallback:!0,disableWarning:!0})!==void 0){Qe=St[it];break}if(rt==="bolditalic"&&this.pdf.internal.getFont(St[it],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Qe=St[it],rt="bold";else if(this.pdf.internal.getFont(St[it],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Qe=St[it],rt="normal";break}}if(Qe===""){for(var gt=0;gt<St.length;gt++)if(Je[St[gt]]){Qe=Je[St[gt]];break}}Qe=Qe===""?"Times":Qe,this.pdf.setFont(Qe,rt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(qe){this.ctx.globalCompositeOperation=qe}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(qe){this.ctx.globalAlpha=qe}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(qe){this.ctx.lineDashOffset=qe,G.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(qe){this.ctx.lineDash=qe,G.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(qe){this.ctx.ignoreClearRect=!!qe}})};m.prototype.setLineDash=function(I){this.lineDash=I},m.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},m.prototype.fill=function(){_.call(this,"fill",!1)},m.prototype.stroke=function(){_.call(this,"stroke",!1)},m.prototype.beginPath=function(){this.path=[{type:"begin"}]},m.prototype.moveTo=function(I,Z){if(isNaN(I)||isNaN(Z))throw vr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var J=this.ctx.transform.applyToPoint(new o(I,Z));this.path.push({type:"mt",x:J.x,y:J.y}),this.ctx.lastPoint=new o(I,Z)},m.prototype.closePath=function(){var I=new o(0,0),Z=0;for(Z=this.path.length-1;Z!==-1;Z--)if(this.path[Z].type==="begin"&&mr(this.path[Z+1])==="object"&&typeof this.path[Z+1].x=="number"){I=new o(this.path[Z+1].x,this.path[Z+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(I.x,I.y)},m.prototype.lineTo=function(I,Z){if(isNaN(I)||isNaN(Z))throw vr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var J=this.ctx.transform.applyToPoint(new o(I,Z));this.path.push({type:"lt",x:J.x,y:J.y}),this.ctx.lastPoint=new o(J.x,J.y)},m.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),_.call(this,null,!0)},m.prototype.quadraticCurveTo=function(I,Z,J,se){if(isNaN(J)||isNaN(se)||isNaN(I)||isNaN(Z))throw vr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var je=this.ctx.transform.applyToPoint(new o(J,se)),be=this.ctx.transform.applyToPoint(new o(I,Z));this.path.push({type:"qct",x1:be.x,y1:be.y,x:je.x,y:je.y}),this.ctx.lastPoint=new o(je.x,je.y)},m.prototype.bezierCurveTo=function(I,Z,J,se,je,be){if(isNaN(je)||isNaN(be)||isNaN(I)||isNaN(Z)||isNaN(J)||isNaN(se))throw vr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var q=this.ctx.transform.applyToPoint(new o(je,be)),Te=this.ctx.transform.applyToPoint(new o(I,Z)),Be=this.ctx.transform.applyToPoint(new o(J,se));this.path.push({type:"bct",x1:Te.x,y1:Te.y,x2:Be.x,y2:Be.y,x:q.x,y:q.y}),this.ctx.lastPoint=new o(q.x,q.y)},m.prototype.arc=function(I,Z,J,se,je,be){if(isNaN(I)||isNaN(Z)||isNaN(J)||isNaN(se)||isNaN(je))throw vr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(be=!!be,!this.ctx.transform.isIdentity){var q=this.ctx.transform.applyToPoint(new o(I,Z));I=q.x,Z=q.y;var Te=this.ctx.transform.applyToPoint(new o(0,J)),Be=this.ctx.transform.applyToPoint(new o(0,0));J=Math.sqrt(Math.pow(Te.x-Be.x,2)+Math.pow(Te.y-Be.y,2))}Math.abs(je-se)>=2*Math.PI&&(se=0,je=2*Math.PI),this.path.push({type:"arc",x:I,y:Z,radius:J,startAngle:se,endAngle:je,counterclockwise:be})},m.prototype.arcTo=function(I,Z,J,se,je){throw new Error("arcTo not implemented.")},m.prototype.rect=function(I,Z,J,se){if(isNaN(I)||isNaN(Z)||isNaN(J)||isNaN(se))throw vr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(I,Z),this.lineTo(I+J,Z),this.lineTo(I+J,Z+se),this.lineTo(I,Z+se),this.lineTo(I,Z),this.lineTo(I+J,Z),this.lineTo(I,Z)},m.prototype.fillRect=function(I,Z,J,se){if(isNaN(I)||isNaN(Z)||isNaN(J)||isNaN(se))throw vr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!h.call(this)){var je={};this.lineCap!=="butt"&&(je.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(je.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(I,Z,J,se),this.fill(),je.hasOwnProperty("lineCap")&&(this.lineCap=je.lineCap),je.hasOwnProperty("lineJoin")&&(this.lineJoin=je.lineJoin)}},m.prototype.strokeRect=function(I,Z,J,se){if(isNaN(I)||isNaN(Z)||isNaN(J)||isNaN(se))throw vr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");p.call(this)||(this.beginPath(),this.rect(I,Z,J,se),this.stroke())},m.prototype.clearRect=function(I,Z,J,se){if(isNaN(I)||isNaN(Z)||isNaN(J)||isNaN(se))throw vr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(I,Z,J,se))},m.prototype.save=function(I){I=typeof I!="boolean"||I;for(var Z=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("q");if(this.pdf.setPage(Z),I){this.ctx.fontSize=this.pdf.internal.getFontSize();var se=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=se}},m.prototype.restore=function(I){I=typeof I!="boolean"||I;for(var Z=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("Q");this.pdf.setPage(Z),I&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},m.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var f=function(I){var Z,J,se,je;if(I.isCanvasGradient===!0&&(I=I.getColor()),!I)return{r:0,g:0,b:0,a:0,style:I};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(I))Z=0,J=0,se=0,je=0;else{var be=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(I);if(be!==null)Z=parseInt(be[1]),J=parseInt(be[2]),se=parseInt(be[3]),je=1;else if((be=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(I))!==null)Z=parseInt(be[1]),J=parseInt(be[2]),se=parseInt(be[3]),je=parseFloat(be[4]);else{if(je=1,typeof I=="string"&&I.charAt(0)!=="#"){var q=new uq(I);I=q.ok?q.toHex():"#000000"}I.length===4?(Z=I.substring(1,2),Z+=Z,J=I.substring(2,3),J+=J,se=I.substring(3,4),se+=se):(Z=I.substring(1,3),J=I.substring(3,5),se=I.substring(5,7)),Z=parseInt(Z,16),J=parseInt(J,16),se=parseInt(se,16)}}return{r:Z,g:J,b:se,a:je,style:I}},h=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},p=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};m.prototype.fillText=function(I,Z,J,se){if(isNaN(Z)||isNaN(J)||typeof I!="string")throw vr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(se=isNaN(se)?void 0:se,!h.call(this)){var je=K(this.ctx.transform.rotation),be=this.ctx.transform.scaleX;D.call(this,{text:I,x:Z,y:J,scale:be,angle:je,align:this.textAlign,maxWidth:se})}},m.prototype.strokeText=function(I,Z,J,se){if(isNaN(Z)||isNaN(J)||typeof I!="string")throw vr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!p.call(this)){se=isNaN(se)?void 0:se;var je=K(this.ctx.transform.rotation),be=this.ctx.transform.scaleX;D.call(this,{text:I,x:Z,y:J,scale:be,renderingMode:"stroke",angle:je,align:this.textAlign,maxWidth:se})}},m.prototype.measureText=function(I){if(typeof I!="string")throw vr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Z=this.pdf,J=this.pdf.internal.scaleFactor,se=Z.internal.getFontSize(),je=Z.getStringUnitWidth(I)*se/Z.internal.scaleFactor;return new function(be){var q=(be=be||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return q}}),this}({width:je*=Math.round(96*J/72*1e4)/1e4})},m.prototype.scale=function(I,Z){if(isNaN(I)||isNaN(Z))throw vr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var J=new c(I,0,0,Z,0,0);this.ctx.transform=this.ctx.transform.multiply(J)},m.prototype.rotate=function(I){if(isNaN(I))throw vr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Z=new c(Math.cos(I),Math.sin(I),-Math.sin(I),Math.cos(I),0,0);this.ctx.transform=this.ctx.transform.multiply(Z)},m.prototype.translate=function(I,Z){if(isNaN(I)||isNaN(Z))throw vr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var J=new c(1,0,0,1,I,Z);this.ctx.transform=this.ctx.transform.multiply(J)},m.prototype.transform=function(I,Z,J,se,je,be){if(isNaN(I)||isNaN(Z)||isNaN(J)||isNaN(se)||isNaN(je)||isNaN(be))throw vr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var q=new c(I,Z,J,se,je,be);this.ctx.transform=this.ctx.transform.multiply(q)},m.prototype.setTransform=function(I,Z,J,se,je,be){I=isNaN(I)?1:I,Z=isNaN(Z)?0:Z,J=isNaN(J)?0:J,se=isNaN(se)?1:se,je=isNaN(je)?0:je,be=isNaN(be)?0:be,this.ctx.transform=new c(I,Z,J,se,je,be)};var g=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};m.prototype.drawImage=function(I,Z,J,se,je,be,q,Te,Be){var Ve=this.pdf.getImageProperties(I),ct=1,vt=1,qe=1,pe=1;se!==void 0&&Te!==void 0&&(qe=Te/se,pe=Be/je,ct=Ve.width/se*Te/se,vt=Ve.height/je*Be/je),be===void 0&&(be=Z,q=J,Z=0,J=0),se!==void 0&&Te===void 0&&(Te=se,Be=je),se===void 0&&Te===void 0&&(Te=Ve.width,Be=Ve.height);for(var ps,ns=this.ctx.transform.decompose(),ss=K(ns.rotate.shx),dt=new c,ts=(dt=(dt=(dt=dt.multiply(ns.translate)).multiply(ns.skew)).multiply(ns.scale)).applyToRectangle(new l(be-Z*qe,q-J*pe,se*ct,je*vt)),St=y.call(this,ts),ve=[],Pe=0;Pe<St.length;Pe+=1)ve.indexOf(St[Pe])===-1&&ve.push(St[Pe]);if(w(ve),this.autoPaging)for(var Ue=ve[0],rt=ve[ve.length-1],Qe=Ue;Qe<rt+1;Qe++){this.pdf.setPage(Qe);var Je=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],it=Qe===1?this.posY+this.margin[0]:this.margin[0],gt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],It=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],At=Qe===1?0:gt+(Qe-2)*It;if(this.ctx.clip_path.length!==0){var fr=this.path;ps=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=j(ps,this.posX+this.margin[3],-At+it+this.ctx.prevPageLastElemOffset),P.call(this,"fill",!0),this.path=fr}var Us=JSON.parse(JSON.stringify(ts));Us=j([Us],this.posX+this.margin[3],-At+it+this.ctx.prevPageLastElemOffset)[0];var zt=(Qe>Ue||Qe<rt)&&g.call(this);zt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Je,It,null).clip().discardPath()),this.pdf.addImage(I,"JPEG",Us.x,Us.y,Us.w,Us.h,null,null,ss),zt&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(I,"JPEG",ts.x,ts.y,ts.w,ts.h,null,null,ss)};var y=function(I,Z,J){var se=[];Z=Z||this.pdf.internal.pageSize.width,J=J||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var je=this.posY+this.ctx.prevPageLastElemOffset;switch(I.type){default:case"mt":case"lt":se.push(Math.floor((I.y+je)/J)+1);break;case"arc":se.push(Math.floor((I.y+je-I.radius)/J)+1),se.push(Math.floor((I.y+je+I.radius)/J)+1);break;case"qct":var be=Q(this.ctx.lastPoint.x,this.ctx.lastPoint.y,I.x1,I.y1,I.x,I.y);se.push(Math.floor((be.y+je)/J)+1),se.push(Math.floor((be.y+be.h+je)/J)+1);break;case"bct":var q=ke(this.ctx.lastPoint.x,this.ctx.lastPoint.y,I.x1,I.y1,I.x2,I.y2,I.x,I.y);se.push(Math.floor((q.y+je)/J)+1),se.push(Math.floor((q.y+q.h+je)/J)+1);break;case"rect":se.push(Math.floor((I.y+je)/J)+1),se.push(Math.floor((I.y+I.h+je)/J)+1)}for(var Te=0;Te<se.length;Te+=1)for(;this.pdf.internal.getNumberOfPages()<se[Te];)v.call(this);return se},v=function(){var I=this.fillStyle,Z=this.strokeStyle,J=this.font,se=this.lineCap,je=this.lineWidth,be=this.lineJoin;this.pdf.addPage(),this.fillStyle=I,this.strokeStyle=Z,this.font=J,this.lineCap=se,this.lineWidth=je,this.lineJoin=be},j=function(I,Z,J){for(var se=0;se<I.length;se++)switch(I[se].type){case"bct":I[se].x2+=Z,I[se].y2+=J;case"qct":I[se].x1+=Z,I[se].y1+=J;default:I[se].x+=Z,I[se].y+=J}return I},w=function(I){return I.sort(function(Z,J){return Z-J})},_=function(I,Z){for(var J,se,je=this.fillStyle,be=this.strokeStyle,q=this.lineCap,Te=this.lineWidth,Be=Math.abs(Te*this.ctx.transform.scaleX),Ve=this.lineJoin,ct=JSON.parse(JSON.stringify(this.path)),vt=JSON.parse(JSON.stringify(this.path)),qe=[],pe=0;pe<vt.length;pe++)if(vt[pe].x!==void 0)for(var ps=y.call(this,vt[pe]),ns=0;ns<ps.length;ns+=1)qe.indexOf(ps[ns])===-1&&qe.push(ps[ns]);for(var ss=0;ss<qe.length;ss++)for(;this.pdf.internal.getNumberOfPages()<qe[ss];)v.call(this);if(w(qe),this.autoPaging)for(var dt=qe[0],ts=qe[qe.length-1],St=dt;St<ts+1;St++){this.pdf.setPage(St),this.fillStyle=je,this.strokeStyle=be,this.lineCap=q,this.lineWidth=Be,this.lineJoin=Ve;var ve=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Pe=St===1?this.posY+this.margin[0]:this.margin[0],Ue=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],rt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Qe=St===1?0:Ue+(St-2)*rt;if(this.ctx.clip_path.length!==0){var Je=this.path;J=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=j(J,this.posX+this.margin[3],-Qe+Pe+this.ctx.prevPageLastElemOffset),P.call(this,I,!0),this.path=Je}if(se=JSON.parse(JSON.stringify(ct)),this.path=j(se,this.posX+this.margin[3],-Qe+Pe+this.ctx.prevPageLastElemOffset),Z===!1||St===0){var it=(St>dt||St<ts)&&g.call(this);it&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ve,rt,null).clip().discardPath()),P.call(this,I,Z),it&&this.pdf.restoreGraphicsState()}this.lineWidth=Te}else this.lineWidth=Be,P.call(this,I,Z),this.lineWidth=Te;this.path=ct},P=function(I,Z){if((I!=="stroke"||Z||!p.call(this))&&(I==="stroke"||Z||!h.call(this))){for(var J,se,je=[],be=this.path,q=0;q<be.length;q++){var Te=be[q];switch(Te.type){case"begin":je.push({begin:!0});break;case"close":je.push({close:!0});break;case"mt":je.push({start:Te,deltas:[],abs:[]});break;case"lt":var Be=je.length;if(be[q-1]&&!isNaN(be[q-1].x)&&(J=[Te.x-be[q-1].x,Te.y-be[q-1].y],Be>0)){for(;Be>=0;Be--)if(je[Be-1].close!==!0&&je[Be-1].begin!==!0){je[Be-1].deltas.push(J),je[Be-1].abs.push(Te);break}}break;case"bct":J=[Te.x1-be[q-1].x,Te.y1-be[q-1].y,Te.x2-be[q-1].x,Te.y2-be[q-1].y,Te.x-be[q-1].x,Te.y-be[q-1].y],je[je.length-1].deltas.push(J);break;case"qct":var Ve=be[q-1].x+2/3*(Te.x1-be[q-1].x),ct=be[q-1].y+2/3*(Te.y1-be[q-1].y),vt=Te.x+2/3*(Te.x1-Te.x),qe=Te.y+2/3*(Te.y1-Te.y),pe=Te.x,ps=Te.y;J=[Ve-be[q-1].x,ct-be[q-1].y,vt-be[q-1].x,qe-be[q-1].y,pe-be[q-1].x,ps-be[q-1].y],je[je.length-1].deltas.push(J);break;case"arc":je.push({deltas:[],abs:[],arc:!0}),Array.isArray(je[je.length-1].abs)&&je[je.length-1].abs.push(Te)}}se=Z?null:I==="stroke"?"stroke":"fill";for(var ns=!1,ss=0;ss<je.length;ss++)if(je[ss].arc)for(var dt=je[ss].abs,ts=0;ts<dt.length;ts++){var St=dt[ts];St.type==="arc"?T.call(this,St.x,St.y,St.radius,St.startAngle,St.endAngle,St.counterclockwise,void 0,Z,!ns):z.call(this,St.x,St.y),ns=!0}else if(je[ss].close===!0)this.pdf.internal.out("h"),ns=!1;else if(je[ss].begin!==!0){var ve=je[ss].start.x,Pe=je[ss].start.y;W.call(this,je[ss].deltas,ve,Pe),ns=!0}se&&M.call(this,se),Z&&F.call(this)}},E=function(I){var Z=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,J=Z*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return I-J;case"top":return I+Z-J;case"hanging":return I+Z-2*J;case"middle":return I+Z/2-J;default:return I}},L=function(I){return I+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};m.prototype.createLinearGradient=function(){var I=function(){};return I.colorStops=[],I.addColorStop=function(Z,J){this.colorStops.push([Z,J])},I.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},I.isCanvasGradient=!0,I},m.prototype.createPattern=function(){return this.createLinearGradient()},m.prototype.createRadialGradient=function(){return this.createLinearGradient()};var T=function(I,Z,J,se,je,be,q,Te,Be){for(var Ve=ae.call(this,J,se,je,be),ct=0;ct<Ve.length;ct++){var vt=Ve[ct];ct===0&&(Be?k.call(this,vt.x1+I,vt.y1+Z):z.call(this,vt.x1+I,vt.y1+Z)),ue.call(this,I,Z,vt.x2,vt.y2,vt.x3,vt.y3,vt.x4,vt.y4)}Te?F.call(this):M.call(this,q)},M=function(I){switch(I){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},F=function(){this.pdf.clip(),this.pdf.discardPath()},k=function(I,Z){this.pdf.internal.out(r(I)+" "+n(Z)+" m")},D=function(I){var Z;switch(I.align){case"right":case"end":Z="right";break;case"center":Z="center";break;default:Z="left"}var J=this.pdf.getTextDimensions(I.text),se=E.call(this,I.y),je=L.call(this,se)-J.h,be=this.ctx.transform.applyToPoint(new o(I.x,se)),q=this.ctx.transform.decompose(),Te=new c;Te=(Te=(Te=Te.multiply(q.translate)).multiply(q.skew)).multiply(q.scale);for(var Be,Ve,ct,vt=this.ctx.transform.applyToRectangle(new l(I.x,se,J.w,J.h)),qe=Te.applyToRectangle(new l(I.x,je,J.w,J.h)),pe=y.call(this,qe),ps=[],ns=0;ns<pe.length;ns+=1)ps.indexOf(pe[ns])===-1&&ps.push(pe[ns]);if(w(ps),this.autoPaging)for(var ss=ps[0],dt=ps[ps.length-1],ts=ss;ts<dt+1;ts++){this.pdf.setPage(ts);var St=ts===1?this.posY+this.margin[0]:this.margin[0],ve=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Pe=this.pdf.internal.pageSize.height-this.margin[2],Ue=Pe-this.margin[0],rt=this.pdf.internal.pageSize.width-this.margin[1],Qe=rt-this.margin[3],Je=ts===1?0:ve+(ts-2)*Ue;if(this.ctx.clip_path.length!==0){var it=this.path;Be=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=j(Be,this.posX+this.margin[3],-1*Je+St),P.call(this,"fill",!0),this.path=it}var gt=j([JSON.parse(JSON.stringify(qe))],this.posX+this.margin[3],-Je+St+this.ctx.prevPageLastElemOffset)[0];I.scale>=.01&&(Ve=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ve*I.scale),ct=this.lineWidth,this.lineWidth=ct*I.scale);var It=this.autoPaging!=="text";if(It||gt.y+gt.h<=Pe){if(It||gt.y>=St&&gt.x<=rt){var At=It?I.text:this.pdf.splitTextToSize(I.text,I.maxWidth||rt-gt.x)[0],fr=j([JSON.parse(JSON.stringify(vt))],this.posX+this.margin[3],-Je+St+this.ctx.prevPageLastElemOffset)[0],Us=It&&(ts>ss||ts<dt)&&g.call(this);Us&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Qe,Ue,null).clip().discardPath()),this.pdf.text(At,fr.x,fr.y,{angle:I.angle,align:Z,renderingMode:I.renderingMode}),Us&&this.pdf.restoreGraphicsState()}}else gt.y<Pe&&(this.ctx.prevPageLastElemOffset+=Pe-gt.y);I.scale>=.01&&(this.pdf.setFontSize(Ve),this.lineWidth=ct)}else I.scale>=.01&&(Ve=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ve*I.scale),ct=this.lineWidth,this.lineWidth=ct*I.scale),this.pdf.text(I.text,be.x+this.posX,be.y+this.posY,{angle:I.angle,align:Z,renderingMode:I.renderingMode,maxWidth:I.maxWidth}),I.scale>=.01&&(this.pdf.setFontSize(Ve),this.lineWidth=ct)},z=function(I,Z,J,se){J=J||0,se=se||0,this.pdf.internal.out(r(I+J)+" "+n(Z+se)+" l")},W=function(I,Z,J){return this.pdf.lines(I,Z,J,null,null)},ue=function(I,Z,J,se,je,be,q,Te){this.pdf.internal.out([s(a(J+I)),s(i(se+Z)),s(a(je+I)),s(i(be+Z)),s(a(q+I)),s(i(Te+Z)),"c"].join(" "))},ae=function(I,Z,J,se){for(var je=2*Math.PI,be=Math.PI/2;Z>J;)Z-=je;var q=Math.abs(J-Z);q<je&&se&&(q=je-q);for(var Te=[],Be=se?-1:1,Ve=Z;q>1e-5;){var ct=Ve+Be*Math.min(q,be);Te.push(Ne.call(this,I,Ve,ct)),q-=Math.abs(ct-Ve),Ve=ct}return Te},Ne=function(I,Z,J){var se=(J-Z)/2,je=I*Math.cos(se),be=I*Math.sin(se),q=je,Te=-be,Be=q*q+Te*Te,Ve=Be+q*je+Te*be,ct=4/3*(Math.sqrt(2*Be*Ve)-Ve)/(q*be-Te*je),vt=q-ct*Te,qe=Te+ct*q,pe=vt,ps=-qe,ns=se+Z,ss=Math.cos(ns),dt=Math.sin(ns);return{x1:I*Math.cos(Z),y1:I*Math.sin(Z),x2:vt*ss-qe*dt,y2:vt*dt+qe*ss,x3:pe*ss-ps*dt,y3:pe*dt+ps*ss,x4:I*Math.cos(J),y4:I*Math.sin(J)}},K=function(I){return 180*I/Math.PI},Q=function(I,Z,J,se,je,be){var q=I+.5*(J-I),Te=Z+.5*(se-Z),Be=je+.5*(J-je),Ve=be+.5*(se-be),ct=Math.min(I,je,q,Be),vt=Math.max(I,je,q,Be),qe=Math.min(Z,be,Te,Ve),pe=Math.max(Z,be,Te,Ve);return new l(ct,qe,vt-ct,pe-qe)},ke=function(I,Z,J,se,je,be,q,Te){var Be,Ve,ct,vt,qe,pe,ps,ns,ss,dt,ts,St,ve,Pe,Ue=J-I,rt=se-Z,Qe=je-J,Je=be-se,it=q-je,gt=Te-be;for(Ve=0;Ve<41;Ve++)ss=(ps=(ct=I+(Be=Ve/40)*Ue)+Be*((qe=J+Be*Qe)-ct))+Be*(qe+Be*(je+Be*it-qe)-ps),dt=(ns=(vt=Z+Be*rt)+Be*((pe=se+Be*Je)-vt))+Be*(pe+Be*(be+Be*gt-pe)-ns),Ve==0?(ts=ss,St=dt,ve=ss,Pe=dt):(ts=Math.min(ts,ss),St=Math.min(St,dt),ve=Math.max(ve,ss),Pe=Math.max(Pe,dt));return new l(Math.round(ts),Math.round(St),Math.round(ve-ts),Math.round(Pe-St))},G=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var I,Z,J=(I=this.ctx.lineDash,Z=this.ctx.lineDashOffset,JSON.stringify({lineDash:I,lineDashOffset:Z}));this.prevLineDash!==J&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=J)}}})(es.API),function(t){var s=function(o){var l,c,d,u,m,f,h,p,g,y;for(c=[],d=0,u=(o+=l="\0\0\0\0".slice(o.length%4||4)).length;u>d;d+=4)(m=(o.charCodeAt(d)<<24)+(o.charCodeAt(d+1)<<16)+(o.charCodeAt(d+2)<<8)+o.charCodeAt(d+3))!==0?(f=(m=((m=((m=((m=(m-(y=m%85))/85)-(g=m%85))/85)-(p=m%85))/85)-(h=m%85))/85)%85,c.push(f+33,h+33,p+33,g+33,y+33)):c.push(122);return function(v,j){for(var w=j;w>0;w--)v.pop()}(c,l.length),String.fromCharCode.apply(String,c)+"~>"},r=function(o){var l,c,d,u,m,f=String,h="length",p=255,g="charCodeAt",y="slice",v="replace";for(o[y](-2),o=o[y](0,-2)[v](/\s/g,"")[v]("z","!!!!!"),d=[],u=0,m=(o+=l="uuuuu"[y](o[h]%5||5))[h];m>u;u+=5)c=52200625*(o[g](u)-33)+614125*(o[g](u+1)-33)+7225*(o[g](u+2)-33)+85*(o[g](u+3)-33)+(o[g](u+4)-33),d.push(p&c>>24,p&c>>16,p&c>>8,p&c);return function(j,w){for(var _=w;_>0;_--)j.pop()}(d,l[h]),f.fromCharCode.apply(f,d)},n=function(o){return o.split("").map(function(l){return("0"+l.charCodeAt().toString(16)).slice(-2)}).join("")+">"},a=function(o){var l=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),l.test(o)===!1)return"";for(var c="",d=0;d<o.length;d+=2)c+=String.fromCharCode("0x"+(o[d]+o[d+1]));return c},i=function(o){for(var l=new Uint8Array(o.length),c=o.length;c--;)l[c]=o.charCodeAt(c);return(l=Ww(l)).reduce(function(d,u){return d+String.fromCharCode(u)},"")};t.processDataByFilters=function(o,l){var c=0,d=o||"",u=[];for(typeof(l=l||[])=="string"&&(l=[l]),c=0;c<l.length;c+=1)switch(l[c]){case"ASCII85Decode":case"/ASCII85Decode":d=r(d),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":d=s(d),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":d=a(d),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":d=n(d),u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":d=i(d),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+l[c]+'" is not implemented')}return{data:d,reverseChain:u.reverse().join(" ")}}}(es.API),function(t){t.loadFile=function(s,r,n){return function(a,i,o){i=i!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=function(c,d,u){var m=new XMLHttpRequest,f=0,h=function(p){var g=p.length,y=[],v=String.fromCharCode;for(f=0;f<g;f+=1)y.push(v(255&p.charCodeAt(f)));return y.join("")};if(m.open("GET",c,!d),m.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(m.onload=function(){m.status===200?u(h(this.responseText)):u(void 0)}),m.send(null),d&&m.status===200)return h(m.responseText)}(a,i,o)}catch{}return l}(s,r,n)},t.loadImageFile=t.loadFile}(es.API),function(t){function s(){return(ms.html2canvas?Promise.resolve(ms.html2canvas):qy(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load html2canvas: "+l))}).then(function(l){return l.default?l.default:l})}function r(){return(ms.DOMPurify?Promise.resolve(ms.DOMPurify):qy(()=>import("./purify.es-sOfw8HaZ.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load dompurify: "+l))}).then(function(l){return l.default?l.default:l})}var n=function(l){var c=mr(l);return c==="undefined"?"undefined":c==="string"||l instanceof String?"string":c==="number"||l instanceof Number?"number":c==="function"||l instanceof Function?"function":l&&l.constructor===Array?"array":l&&l.nodeType===1?"element":c==="object"?"object":"unknown"},a=function(l,c){var d=document.createElement(l);for(var u in c.className&&(d.className=c.className),c.innerHTML&&c.dompurify&&(d.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)d.style[u]=c.style[u];return d},i=function l(c,d){for(var u=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),m=c.firstChild;m;m=m.nextSibling)d!==!0&&m.nodeType===1&&m.nodeName==="SCRIPT"||u.appendChild(l(m,d));return c.nodeType===1&&(c.nodeName==="CANVAS"?(u.width=c.width,u.height=c.height,u.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(u.value=c.value),u.addEventListener("load",function(){u.scrollTop=c.scrollTop,u.scrollLeft=c.scrollLeft},!0)),u},o=function l(c){var d=Object.assign(l.convert(Promise.resolve()),JSON.parse(JSON.stringify(l.template))),u=l.convert(Promise.resolve(),d);return(u=u.setProgress(1,l,1,[l])).set(c)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(l,c){return l.__proto__=c||o.prototype,l},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(l,c){return this.then(function(){switch(c=c||function(d){switch(n(d)){case"string":return"string";case"element":return d.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(l),c){case"string":return this.then(r).then(function(d){return this.set({src:a("div",{innerHTML:l,dompurify:d})})});case"element":return this.set({src:l});case"canvas":return this.set({canvas:l});case"img":return this.set({img:l});default:return this.error("Unknown source type.")}})},o.prototype.to=function(l){switch(l){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var l={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=i(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(l.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:l}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(s).then(function(c){var d=Object.assign({},this.opt.html2canvas);return delete d.onrendered,c(this.prop.container,d)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(s).then(function(c){var d=this.opt.jsPDF,u=this.opt.fontFaces,m=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,f=Object.assign({async:!0,allowTaint:!0,scale:m,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete f.onrendered,d.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,d.context2d.posX=this.opt.x,d.context2d.posY=this.opt.y,d.context2d.margin=this.opt.margin,d.context2d.fontFaces=u,u)for(var h=0;h<u.length;++h){var p=u[h],g=p.src.find(function(y){return y.format==="truetype"});g&&d.addFont(g.url,p.ref.name,p.ref.style)}return f.windowHeight=f.windowHeight||0,f.windowHeight=f.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):f.windowHeight,d.context2d.save(!0),c(this.prop.container,f)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var l=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=l})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(l,c,d){return(d=d||"pdf").toLowerCase()==="img"||d.toLowerCase()==="image"?this.outputImg(l,c):this.outputPdf(l,c)},o.prototype.outputPdf=function(l,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(l,c)})},o.prototype.outputImg=function(l){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(l){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+l+'" is not supported.'}})},o.prototype.save=function(l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(l?{filename:l}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(l){if(n(l)!=="object")return this;var c=Object.keys(l||{}).map(function(d){if(d in o.template.prop)return function(){this.prop[d]=l[d]};switch(d){case"margin":return this.setMargin.bind(this,l.margin);case"jsPDF":return function(){return this.opt.jsPDF=l.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,l.pageSize);default:return function(){this.opt[d]=l[d]}}},this);return this.then(function(){return this.thenList(c)})},o.prototype.get=function(l,c){return this.then(function(){var d=l in o.template.prop?this.prop[l]:this.opt[l];return c?c(d):d})},o.prototype.setMargin=function(l){return this.then(function(){switch(n(l)){case"number":l=[l,l,l,l];case"array":if(l.length===2&&(l=[l[0],l[1],l[0],l[1]]),l.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=l}).then(this.setPageSize)},o.prototype.setPageSize=function(l){function c(d,u){return Math.floor(d*u/72*96)}return this.then(function(){(l=l||es.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(l.inner={width:l.width-this.opt.margin[1]-this.opt.margin[3],height:l.height-this.opt.margin[0]-this.opt.margin[2]},l.inner.px={width:c(l.inner.width,l.k),height:c(l.inner.height,l.k)},l.inner.ratio=l.inner.height/l.inner.width),this.prop.pageSize=l})},o.prototype.setProgress=function(l,c,d,u){return l!=null&&(this.progress.val=l),c!=null&&(this.progress.state=c),d!=null&&(this.progress.n=d),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(l,c,d,u){return this.setProgress(l?this.progress.val+l:null,c||null,d?this.progress.n+d:null,u?this.progress.stack.concat(u):null)},o.prototype.then=function(l,c){var d=this;return this.thenCore(l,c,function(u,m){return d.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(f){return d.updateProgress(null,u),f}).then(u,m).then(function(f){return d.updateProgress(1),f})})},o.prototype.thenCore=function(l,c,d){d=d||Promise.prototype.then;var u=this;l&&(l=l.bind(u)),c&&(c=c.bind(u));var m=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?u:o.convert(Object.assign({},u),Promise.prototype),f=d.call(m,l,c);return o.convert(f,u.__proto__)},o.prototype.thenExternal=function(l,c){return Promise.prototype.then.call(this,l,c)},o.prototype.thenList=function(l){var c=this;return l.forEach(function(d){c=c.thenCore(d)}),c},o.prototype.catch=function(l){l&&(l=l.bind(this));var c=Promise.prototype.catch.call(this,l);return o.convert(c,this)},o.prototype.catchExternal=function(l){return Promise.prototype.catch.call(this,l)},o.prototype.error=function(l){return this.then(function(){throw new Error(l)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,es.getPageSize=function(l,c,d){if(mr(l)==="object"){var u=l;l=u.orientation,c=u.unit||c,d=u.format||d}c=c||"mm",d=d||"a4",l=(""+(l||"P")).toLowerCase();var m,f=(""+d).toLowerCase(),h={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":m=1;break;case"mm":m=72/25.4;break;case"cm":m=72/2.54;break;case"in":m=72;break;case"px":m=.75;break;case"pc":case"em":m=12;break;case"ex":m=6;break;default:throw"Invalid unit: "+c}var p,g=0,y=0;if(h.hasOwnProperty(f))g=h[f][1]/m,y=h[f][0]/m;else try{g=d[1],y=d[0]}catch{throw new Error("Invalid format: "+d)}if(l==="p"||l==="portrait")l="p",y>g&&(p=y,y=g,g=p);else{if(l!=="l"&&l!=="landscape")throw"Invalid orientation: "+l;l="l",g>y&&(p=y,y=g,g=p)}return{width:y,height:g,unit:c,k:m,orientation:l}},t.html=function(l,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(U2):null;var d=new o(c);return c.worker?d:d.from(l).doCallback()}}(es.API),es.API.addJS=function(t){return WA=t,this.internal.events.subscribe("postPutResources",function(){xy=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(xy+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),HA=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+WA+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){xy!==void 0&&HA!==void 0&&this.internal.out("/Names <</JavaScript "+xy+" 0 R>>")}),this},function(t){var s;t.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),i=0;i<a.length;i++){var o=a[i],l=n.exec(o);if(l!=null){var c=l[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(o)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,u=[];for(i=0;i<d;i++){var m=r.internal.newObject();u.push(m);var f=r.internal.getPageInfo(i+1);r.internal.write("<< /D["+f.objId+" 0 R /XYZ null null null]>> endobj")}var h=r.internal.newObject();for(r.internal.write("<< /Names [ "),i=0;i<u.length;i++)r.internal.write("(page_"+(i+1)+")"+u[i]+" 0 R");r.internal.write(" ] >>","endobj"),s=r.internal.newObject(),r.internal.write("<< /Dests "+h+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+s+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,a,i){var o={title:a,options:i,children:[]};return n==null&&(n=this.root),n.children.push(o),o},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<n.children.length;i++){var o=n.children[i];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(n)),i>0&&this.line("/Prev "+this.makeRef(n.children[i-1])),i<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[i+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=r.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var d=0;d<n.children.length;d++)this.renderItems(n.children[d])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,a){for(var i=0;i<a.children.length;i++)n.count++,this.count_r(n,a.children[i]);return n.count}}])}(es.API),function(t){var s=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,n,a,i,o,l){var c,d=this.decode.DCT_DECODE,u=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=o||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,c=function(m){for(var f,h=256*m.charCodeAt(4)+m.charCodeAt(5),p=m.length,g={width:0,height:0,numcomponents:1},y=4;y<p;y+=2){if(y+=h,s.indexOf(m.charCodeAt(y+1))!==-1){f=256*m.charCodeAt(y+5)+m.charCodeAt(y+6),g={width:256*m.charCodeAt(y+7)+m.charCodeAt(y+8),height:f,numcomponents:m.charCodeAt(y+9)};break}h=256*m.charCodeAt(y+2)+m.charCodeAt(y+3)}return g}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),c.numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}u={data:r,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:d,index:n,alias:a}}return u}}(es.API),es.API.processPNG=function(t,s,r,n){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var a,i=lfe(t,{checkCrc:!0}),o=i.width,l=i.height,c=i.channels,d=i.palette,u=i.depth;a=d&&c===1?function(T){for(var M=T.width,F=T.height,k=T.data,D=T.palette,z=T.depth,W=!1,ue=[],ae=[],Ne=void 0,K=!1,Q=0,ke=0;ke<D.length;ke++){var G=B6(D[ke],4),I=G[0],Z=G[1],J=G[2],se=G[3];ue.push(I,Z,J),se!=null&&(se===0?(Q++,ae.length<1&&ae.push(ke)):se<255&&(K=!0))}if(K||Q>1){W=!0,ae=void 0;var je=M*F;Ne=new Uint8Array(je);for(var be=new DataView(k.buffer),q=0;q<je;q++){var Te=q2(be,q,z),Be=B6(D[Te],4)[3];Ne[q]=Be}}else Q===0&&(ae=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:W?8:void 0,colorBytes:k,alphaBytes:Ne,needSMask:W,palette:ue,mask:ae}}(i):c===2||c===4?function(T){for(var M=T.data,F=T.width,k=T.height,D=T.channels,z=T.depth,W=D===2?"DeviceGray":"DeviceRGB",ue=D-1,ae=F*k,Ne=ue,K=ae*Ne,Q=1*ae,ke=Math.ceil(K*z/8),G=Math.ceil(Q*z/8),I=new Uint8Array(ke),Z=new Uint8Array(G),J=new DataView(M.buffer),se=new DataView(I.buffer),je=new DataView(Z.buffer),be=!1,q=0;q<ae;q++){for(var Te=q*D,Be=0;Be<Ne;Be++)tP(se,q2(J,Te+Be,z),q*Ne+Be,z);var Ve=q2(J,Te+Ne,z);Ve<(1<<z)-1&&(be=!0),tP(je,Ve,1*q,z)}return{colorSpace:W,colorsPerPixel:ue,sMaskBitsPerComponent:be?z:void 0,colorBytes:I,alphaBytes:Z,needSMask:be}}(i):function(T){var M=T.data,F=T.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:F,colorsPerPixel:F==="DeviceGray"?1:3,colorBytes:M instanceof Uint16Array?function(k){for(var D=k.length,z=new Uint8Array(2*D),W=new DataView(z.buffer,z.byteOffset,z.byteLength),ue=0;ue<D;ue++)W.setUint16(2*ue,k[ue],!1);return z}(M):M,needSMask:!1}}(i);var m,f,h,p=a,g=p.colorSpace,y=p.colorsPerPixel,v=p.sMaskBitsPerComponent,j=p.colorBytes,w=p.alphaBytes,_=p.needSMask,P=p.palette,E=p.mask,L=null;return n!==es.API.image_compression.NONE&&typeof Ww=="function"?(L=function(T){var M;switch(T){case es.API.image_compression.FAST:M=11;break;case es.API.image_compression.MEDIUM:M=13;break;case es.API.image_compression.SLOW:M=14;break;default:M=12}return M}(n),m=this.decode.FLATE_DECODE,f="/Predictor ".concat(L," /Colors ").concat(y," /BitsPerComponent ").concat(u," /Columns ").concat(o),t=QA(j,Math.ceil(o*y*u/8),y,u,n),_&&(h=QA(w,Math.ceil(o*v/8),1,v,n))):(m=void 0,f=void 0,t=j,_&&(h=w)),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(h&&this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),{alias:r,data:t,index:s,filter:m,decodeParameters:f,transparency:E,palette:P,sMask:h,predictor:L,width:o,height:l,bitsPerComponent:u,sMaskBitsPerComponent:v,colorSpace:g}}},function(t){t.processGIF89A=function(s,r,n,a){var i=new Pfe(s),o=i.width,l=i.height,c=[];i.decodeAndBlitFrameRGBA(0,c);var d={data:c,width:o,height:l},u=new V2(100).encode(d,100);return t.processJPEG.call(this,u,r,n,a)},t.processGIF87A=t.processGIF89A}(es.API),_o.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var s=0;s<t;s++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[s]={red:a,green:n,blue:r,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},_o.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,s=this.width*this.height*4;this.data=new Uint8Array(s),this[t]()}catch(r){vr.log("bit decode error:"+r)}},_o.prototype.bit1=function(){var t,s=Math.ceil(this.width/8),r=s%4;for(t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,a=0;a<s;a++)for(var i=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+8*a*4,l=0;l<8&&8*a+l<this.width;l++){var c=this.palette[i>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}r!==0&&(this.pos+=4-r)}},_o.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),s=t%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<t;a++){var i=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+2*a*4,l=i>>4,c=15&i,d=this.palette[l];if(this.data[o]=d.blue,this.data[o+1]=d.green,this.data[o+2]=d.red,this.data[o+3]=255,2*a+1>=this.width)break;d=this.palette[c],this.data[o+4]=d.blue,this.data[o+4+1]=d.green,this.data[o+4+2]=d.red,this.data[o+4+3]=255}s!==0&&(this.pos+=4-s)}},_o.prototype.bit8=function(){for(var t=this.width%4,s=this.height-1;s>=0;s--){for(var r=this.bottom_up?s:this.height-1-s,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+4*n;if(a<this.palette.length){var o=this.palette[a];this.data[i]=o.red,this.data[i+1]=o.green,this.data[i+2]=o.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}t!==0&&(this.pos+=4-t)}},_o.prototype.bit15=function(){for(var t=this.width%3,s=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&s)/s*255|0,l=(i>>5&s)/s*255|0,c=(i>>10&s)/s*255|0,d=i>>15?255:0,u=n*this.width*4+4*a;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=o,this.data[u+3]=d}this.pos+=t}},_o.prototype.bit16=function(){for(var t=this.width%3,s=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&s)/s*255|0,c=(o>>5&r)/r*255|0,d=(o>>11)/s*255|0,u=a*this.width*4+4*i;this.data[u]=d,this.data[u+1]=c,this.data[u+2]=l,this.data[u+3]=255}this.pos+=t}},_o.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var s=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=s*this.width*4+4*r;this.data[o]=i,this.data[o+1]=a,this.data[o+2]=n,this.data[o+3]=255}this.pos+=this.width%4}},_o.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var s=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=s*this.width*4+4*r;this.data[l]=i,this.data[l+1]=a,this.data[l+2]=n,this.data[l+3]=o}},_o.prototype.getData=function(){return this.data},function(t){t.processBMP=function(s,r,n,a){var i=new _o(s,!1),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},d=new V2(100).encode(c,100);return t.processJPEG.call(this,d,r,n,a)}}(es.API),rP.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(s,r,n,a){var i=new rP(s),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},d=new V2(100).encode(c,100);return t.processJPEG.call(this,d,r,n,a)}}(es.API),es.API.processRGBA=function(t,s,r){for(var n=t.data,a=n.length,i=new Uint8Array(a/4*3),o=new Uint8Array(a/4),l=0,c=0,d=0;d<a;d+=4){var u=n[d],m=n[d+1],f=n[d+2],h=n[d+3];i[l++]=u,i[l++]=m,i[l++]=f,o[c++]=h}var p=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:p,index:s,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},es.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Zm=es.API,gy=Zm.getCharWidthsArray=function(t,s){var r,n,a=(s=s||{}).font||this.internal.getFont(),i=s.fontSize||this.internal.getFontSize(),o=s.charSpace||this.internal.getCharSpace(),l=s.widths?s.widths:a.metadata.Unicode.widths,c=l.fof?l.fof:1,d=s.kerning?s.kerning:a.metadata.Unicode.kerning,u=d.fof?d.fof:1,m=s.doKerning!==!1,f=0,h=t.length,p=0,g=l[0]||c,y=[];for(r=0;r<h;r++)n=t.charCodeAt(r),typeof a.metadata.widthOfString=="function"?y.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+o*(1e3/i)||0)/1e3):(f=m&&mr(d[n])==="object"&&!isNaN(parseInt(d[n][p],10))?d[n][p]/u:0,y.push((l[n]||g)/c+f)),p=n;return y},KA=Zm.getStringUnitWidth=function(t,s){var r=(s=s||{}).fontSize||this.internal.getFontSize(),n=s.font||this.internal.getFont(),a=s.charSpace||this.internal.getCharSpace();return Zm.processArabic&&(t=Zm.processArabic(t)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(t,r,a)/r:gy.apply(this,arguments).reduce(function(i,o){return i+o},0)},YA=function(t,s,r,n){for(var a=[],i=0,o=t.length,l=0;i!==o&&l+s[i]<r;)l+=s[i],i++;a.push(t.slice(0,i));var c=i;for(l=0;i!==o;)l+s[i]>n&&(a.push(t.slice(c,i)),l=0,c=i),l+=s[i],i++;return c!==i&&a.push(t.slice(c,i)),a},GA=function(t,s,r){r||(r={});var n,a,i,o,l,c,d,u=[],m=[u],f=r.textIndent||0,h=0,p=0,g=t.split(" "),y=gy.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?g[0].length+2:r.lineIndent||0){var v=Array(c).join(" "),j=[];g.map(function(_){(_=_.split(/\s*\n/)).length>1?j=j.concat(_.map(function(P,E){return(E&&P.length?`
`:"")+P})):j.push(_[0])}),g=j,c=KA.apply(this,[v,r])}for(i=0,o=g.length;i<o;i++){var w=0;if(n=g[i],c&&n[0]==`
`&&(n=n.substr(1),w=1),f+h+(p=(a=gy.apply(this,[n,r])).reduce(function(_,P){return _+P},0))>s||w){if(p>s){for(l=YA.apply(this,[n,a,s-(f+h),s]),u.push(l.shift()),u=[l.pop()];l.length;)m.push([l.shift()]);p=a.slice(n.length-(u[0]?u[0].length:0)).reduce(function(_,P){return _+P},0)}else u=[n];m.push(u),f=p+c,h=y}else u.push(n),f+=h+p,h=y}return d=c?function(_,P){return(P?v:"")+_.join(" ")}:function(_){return _.join(" ")},m.map(d)},Zm.splitTextToSize=function(t,s,r){var n,a=(r=r||{}).fontSize||this.internal.getFontSize(),i=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var m=this.internal.getFont(u.fontName,u.fontStyle),f="Unicode";return m.metadata[f]?{widths:m.metadata[f].widths||{0:1},kerning:m.metadata[f].kerning||{}}:{font:m.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*s/a;i.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,i.lineIndent=r.lineIndent;var l,c,d=[];for(l=0,c=n.length;l<c;l++)d=d.concat(GA.apply(this,[n[l],o,i]));return d},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var s="0123456789abcdef",r="klmnopqrstuvwxyz",n={},a={},i=0;i<16;i++)n[r[i]]=s[i],a[s[i]]=r[i];var o=function(f){return"0x"+parseInt(f,10).toString(16)},l=t.__fontmetrics__.compress=function(f){var h,p,g,y,v=["{"];for(var j in f){if(h=f[j],isNaN(parseInt(j,10))?p="'"+j+"'":(j=parseInt(j,10),p=(p=o(j).slice(2)).slice(0,-1)+a[p.slice(-1)]),typeof h=="number")h<0?(g=o(h).slice(3),y="-"):(g=o(h).slice(2),y=""),g=y+g.slice(0,-1)+a[g.slice(-1)];else{if(mr(h)!=="object")throw new Error("Don't know what to do with value type "+mr(h)+".");g=l(h)}v.push(p+g)}return v.push("}"),v.join("")},c=t.__fontmetrics__.uncompress=function(f){if(typeof f!="string")throw new Error("Invalid argument passed to uncompress.");for(var h,p,g,y,v={},j=1,w=v,_=[],P="",E="",L=f.length-1,T=1;T<L;T+=1)(y=f[T])=="'"?h?(g=h.join(""),h=void 0):h=[]:h?h.push(y):y=="{"?(_.push([w,g]),w={},g=void 0):y=="}"?((p=_.pop())[0][p[1]]=w,g=void 0,w=p[0]):y=="-"?j=-1:g===void 0?n.hasOwnProperty(y)?(P+=n[y],g=parseInt(P,16)*j,j=1,P=""):P+=y:n.hasOwnProperty(y)?(E+=n[y],w[g]=parseInt(E,16)*j,j=1,g=void 0,E=""):E+=y;return v},d={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:d,"Courier-Bold":d,"Courier-BoldOblique":d,"Courier-Oblique":d,Helvetica:d,"Helvetica-Bold":d,"Helvetica-BoldOblique":d,"Helvetica-Oblique":d,"Times-Roman":d,"Times-Bold":d,"Times-BoldItalic":d,"Times-Italic":d}},m={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(f){var h=f.font,p=m.Unicode[h.postScriptName];p&&(h.metadata.Unicode={},h.metadata.Unicode.widths=p.widths,h.metadata.Unicode.kerning=p.kerning);var g=u.Unicode[h.postScriptName];g&&(h.metadata.Unicode.encoding=g,h.encoding=g.codePages[0])}])}(es.API),function(t){var s=function(r){for(var n=r.length,a=new Uint8Array(n),i=0;i<n;i++)a[i]=r.charCodeAt(i);return a};t.API.events.push(["addFont",function(r){var n=void 0,a=r.font,i=r.instance;if(!a.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=i.existsFileInVFS(a.postScriptName)===!1?i.loadFile(a.postScriptName):i.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?s(l):s(Zy(l)),o.metadata=t.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(a,n)}}])}(es),es.API.addSvgAsImage=function(t,s,r,n,a,i,o,l){if(isNaN(s)||isNaN(r))throw vr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(a))throw vr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=n,c.height=a;var d=c.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,c.width,c.height);var u={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return(ms.canvg?Promise.resolve(ms.canvg):qy(()=>import("./index.es-4QeWHNgL.js"),[])).catch(function(f){return Promise.reject(new Error("Could not load canvg: "+f))}).then(function(f){return f.default?f.default:f}).then(function(f){return f.fromString(d,t,u)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(f){return f.render(u)}).then(function(){m.addImage(c.toDataURL("image/jpeg",1),s,r,n,a,o,l)})},es.API.putTotalPages=function(t){var s,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(s=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(s=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(s,r);return this},es.API.viewerPreferences=function(t,s){var r;t=t||{},s=s||!1;var n,a,i,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],d=0,u=0,m=0;function f(p,g){var y,v=!1;for(y=0;y<p.length;y+=1)p[y]===g&&(v=!0);return v}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||s===!0){var h=l.length;for(m=0;m<h;m+=1)r[l[m]].value=r[l[m]].defaultValue,r[l[m]].explicitSet=!1}if(mr(t)==="object"){for(a in t)if(i=t[a],f(l,a)&&i!==void 0){if(r[a].type==="boolean"&&typeof i=="boolean")r[a].value=i;else if(r[a].type==="name"&&f(r[a].valueSet,i))r[a].value=i;else if(r[a].type==="integer"&&Number.isInteger(i))r[a].value=i;else if(r[a].type==="array"){for(d=0;d<i.length;d+=1)if(n=!0,i[d].length===1&&typeof i[d][0]=="number")c.push(String(i[d]-1));else if(i[d].length>1){for(u=0;u<i[d].length;u+=1)typeof i[d][u]!="number"&&(n=!1);n===!0&&c.push([i[d][0]-1,i[d][1]-1].join(" "))}r[a].value="["+c.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var p,g=[];for(p in r)r[p].explicitSet===!0&&(r[p].type==="name"?g.push("/"+p+" /"+r[p].value):g.push("/"+p+" "+r[p].value));g.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+g.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(t){var s=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(n)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),d=i.length+o.length+l.length+a.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(a+i+o+l+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",s)),this}}(es.API),function(t){var s=t.API,r=s.pdfEscape16=function(i,o){for(var l,c=o.metadata.Unicode.widths,d=["","0","00","000","0000"],u=[""],m=0,f=i.length;m<f;++m){if(l=o.metadata.characterToGlyph(i.charCodeAt(m)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=i.charCodeAt(m),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return u.join("");l=l.toString(16),u.push(d[4-l.length],l)}return u.join("")},n=function(i){var o,l,c,d,u,m,f;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],m=0,f=(l=Object.keys(i).sort(function(h,p){return h-p})).length;m<f;m++)o=l[m],c.length>=100&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),i[o]!==void 0&&i[o]!==null&&typeof i[o].toString=="function"&&(d=("0000"+i[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+d+">"));return c.length&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),u+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};s.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,d=o.newObject,u=o.putStream;if(l.metadata instanceof t.API.TTFFont&&l.encoding==="Identity-H"){for(var m=l.metadata.Unicode.widths,f=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),h="",p=0;p<f.length;p++)h+=String.fromCharCode(f[p]);var g=d();u({data:h,addLength1:!0,objectId:g}),c("endobj");var y=d();u({data:n(l.metadata.toUnicode),addLength1:!0,objectId:y}),c("endobj");var v=d();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+th(l.fontName)),c("/FontFile2 "+g+" 0 R"),c("/FontBBox "+t.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var j=d();c("<<"),c("/Type /Font"),c("/BaseFont /"+th(l.fontName)),c("/FontDescriptor "+v+" 0 R"),c("/W "+t.API.PDFObject.convert(m)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=d(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+y+" 0 R"),c("/BaseFont /"+th(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+j+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]),s.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,d=o.newObject,u=o.putStream;if(l.metadata instanceof t.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var m=l.metadata.rawData,f="",h=0;h<m.length;h++)f+=String.fromCharCode(m[h]);var p=d();u({data:f,addLength1:!0,objectId:p}),c("endobj");var g=d();u({data:n(l.metadata.toUnicode),addLength1:!0,objectId:g}),c("endobj");var y=d();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+p+" 0 R"),c("/Flags 96"),c("/FontBBox "+t.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+th(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=d();for(var v=0;v<l.metadata.hmtx.widths.length;v++)l.metadata.hmtx.widths[v]=parseInt(l.metadata.hmtx.widths[v]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+g+" 0 R/BaseFont/"+th(l.fontName)+"/FontDescriptor "+y+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]);var a=function(i){var o,l=i.text||"",c=i.x,d=i.y,u=i.options||{},m=i.mutex||{},f=m.pdfEscape,h=m.activeFontKey,p=m.fonts,g=h,y="",v=0,j="",w=p[g].encoding;if(p[g].encoding!=="Identity-H")return{text:l,x:c,y:d,options:u,mutex:m};for(j=l,g=h,Array.isArray(l)&&(j=l[0]),v=0;v<j.length;v+=1)p[g].metadata.hasOwnProperty("cmap")&&(o=p[g].metadata.cmap.unicode.codeMap[j[v].charCodeAt(0)]),o||j[v].charCodeAt(0)<256&&p[g].metadata.hasOwnProperty("Unicode")?y+=j[v]:y+="";var _="";return parseInt(g.slice(1))<14||w==="WinAnsiEncoding"?_=f(y,g).split("").map(function(P){return P.charCodeAt(0).toString(16)}).join(""):w==="Identity-H"&&(_=r(y,p[g])),m.isHex=!0,{text:_,x:c,y:d,options:u,mutex:m}};s.events.push(["postProcessText",function(i){var o=i.text||"",l=[],c={text:o,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(o)){var d=0;for(d=0;d<o.length;d+=1)Array.isArray(o[d])&&o[d].length===3?l.push([a(Object.assign({},c,{text:o[d][0]})).text,o[d][1],o[d][2]]):l.push(a(Object.assign({},c,{text:o[d]})).text);i.text=l}else i.text=a(Object.assign({},c,{text:o})).text}])}(es),function(t){var s=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return s.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,n){return s.call(this),this.internal.vFS[r]=n,this},t.getFileFromVFS=function(r){return s.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(es.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(n){var a,i,o,l,c,d,u,m=s,f=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],h=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],p={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},g={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},y=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],v=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),j=!1,w=0;this.__bidiEngine__={};var _=function(k){var D=k.charCodeAt(),z=D>>8,W=g[z];return W!==void 0?m[256*W+(255&D)]:z===252||z===253?"AL":v.test(z)?"L":z===8?"R":"N"},P=function(k){for(var D,z=0;z<k.length;z++){if((D=_(k.charAt(z)))==="L")return!1;if(D==="R")return!0}return!1},E=function(k,D,z,W){var ue,ae,Ne,K,Q=D[W];switch(Q){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":j=!1;break;case"N":case"AN":break;case"EN":j&&(Q="AN");break;case"AL":j=!0,Q="R";break;case"WS":case"BN":Q="N";break;case"CS":W<1||W+1>=D.length||(ue=z[W-1])!=="EN"&&ue!=="AN"||(ae=D[W+1])!=="EN"&&ae!=="AN"?Q="N":j&&(ae="AN"),Q=ae===ue?ae:"N";break;case"ES":Q=(ue=W>0?z[W-1]:"B")==="EN"&&W+1<D.length&&D[W+1]==="EN"?"EN":"N";break;case"ET":if(W>0&&z[W-1]==="EN"){Q="EN";break}if(j){Q="N";break}for(Ne=W+1,K=D.length;Ne<K&&D[Ne]==="ET";)Ne++;Q=Ne<K&&D[Ne]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(K=D.length,Ne=W+1;Ne<K&&D[Ne]==="NSM";)Ne++;if(Ne<K){var ke=k[W],G=ke>=1425&&ke<=2303||ke===64286;if(ue=D[Ne],G&&(ue==="R"||ue==="AL")){Q="R";break}}}Q=W<1||(ue=D[W-1])==="B"?"N":z[W-1];break;case"B":j=!1,a=!0,Q=w;break;case"S":i=!0,Q="N"}return Q},L=function(k,D,z){var W=k.split("");return z&&T(W,z,{hiLevel:w}),W.reverse(),D&&D.reverse(),W.join("")},T=function(k,D,z){var W,ue,ae,Ne,K,Q=-1,ke=k.length,G=0,I=[],Z=w?h:f,J=[];for(j=!1,a=!1,i=!1,ue=0;ue<ke;ue++)J[ue]=_(k[ue]);for(ae=0;ae<ke;ae++){if(K=G,I[ae]=E(k,J,I,ae),W=240&(G=Z[K][p[I[ae]]]),G&=15,D[ae]=Ne=Z[G][5],W>0)if(W===16){for(ue=Q;ue<ae;ue++)D[ue]=1;Q=-1}else Q=-1;if(Z[G][6])Q===-1&&(Q=ae);else if(Q>-1){for(ue=Q;ue<ae;ue++)D[ue]=Ne;Q=-1}J[ae]==="B"&&(D[ae]=0),z.hiLevel|=Ne}i&&function(se,je,be){for(var q=0;q<be;q++)if(se[q]==="S"){je[q]=w;for(var Te=q-1;Te>=0&&se[Te]==="WS";Te--)je[Te]=w}}(J,D,ke)},M=function(k,D,z,W,ue){if(!(ue.hiLevel<k)){if(k===1&&w===1&&!a)return D.reverse(),void(z&&z.reverse());for(var ae,Ne,K,Q,ke=D.length,G=0;G<ke;){if(W[G]>=k){for(K=G+1;K<ke&&W[K]>=k;)K++;for(Q=G,Ne=K-1;Q<Ne;Q++,Ne--)ae=D[Q],D[Q]=D[Ne],D[Ne]=ae,z&&(ae=z[Q],z[Q]=z[Ne],z[Ne]=ae);G=K}G++}}},F=function(k,D,z){var W=k.split(""),ue={hiLevel:w};return z||(z=[]),T(W,z,ue),function(ae,Ne,K){if(K.hiLevel!==0&&u)for(var Q,ke=0;ke<ae.length;ke++)Ne[ke]===1&&(Q=y.indexOf(ae[ke]))>=0&&(ae[ke]=y[Q+1])}(W,z,ue),M(2,W,D,z,ue),M(1,W,D,z,ue),W.join("")};return this.__bidiEngine__.doBidiReorder=function(k,D,z){if(function(ue,ae){if(ae)for(var Ne=0;Ne<ue.length;Ne++)ae[Ne]=Ne;l===void 0&&(l=P(ue)),d===void 0&&(d=P(ue))}(k,D),o||!c||d)if(o&&c&&l^d)w=l?1:0,k=L(k,D,z);else if(!o&&c&&d)w=l?1:0,k=F(k,D,z),k=L(k,D);else if(!o||l||c||d){if(o&&!c&&l^d)k=L(k,D),l?(w=0,k=F(k,D,z)):(w=1,k=F(k,D,z),k=L(k,D));else if(o&&l&&!c&&d)w=1,k=F(k,D,z),k=L(k,D);else if(!o&&!c&&l^d){var W=u;l?(w=1,k=F(k,D,z),w=0,u=!1,k=F(k,D,z),u=W):(w=0,k=F(k,D,z),k=L(k,D),w=1,u=!1,k=F(k,D,z),u=W,k=L(k,D))}}else w=0,k=F(k,D,z);else w=l?1:0,k=F(k,D,z);return k},this.__bidiEngine__.setOptions=function(k){k&&(o=k.isInputVisual,c=k.isOutputVisual,l=k.isInputRtl,d=k.isOutputRtl,u=k.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var s=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(n){var a=n.text;n.x,n.y;var i=n.options||{};n.mutex,i.lang;var o=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,r.setOptions(i),Object.prototype.toString.call(a)==="[object Array]"){var l=0;for(o=[],l=0;l<a.length;l+=1)Object.prototype.toString.call(a[l])==="[object Array]"?o.push([r.doBidiReorder(a[l][0]),a[l][1],a[l][2]]):o.push([r.doBidiReorder(a[l])]);n.text=o}else n.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])}(es),es.API.TTFFont=function(){function t(s){var r;if(this.rawData=s,r=this.contents=new Qd(s),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new Vfe(this),this.registerTTF()}return t.open=function(s){return new t(s)},t.prototype.parse=function(){return this.directory=new Efe(this.contents),this.head=new Mfe(this),this.name=new Ffe(this),this.cmap=new Nq(this),this.toUnicode={},this.hhea=new Lfe(this),this.maxp=new Ofe(this),this.hmtx=new $fe(this),this.post=new Ife(this),this.os2=new Dfe(this),this.loca=new qfe(this),this.glyf=new Bfe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var s,r,n,a,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,c,d;for(d=[],o=0,l=(c=this.bbox).length;o<l;o++)s=c[o],d.push(Math.round(s*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),32768&(r=a>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(s){var r;return((r=this.cmap.unicode)!=null?r.codeMap[s]:void 0)||0},t.prototype.widthOfGlyph=function(s){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(s).advance*r},t.prototype.widthOfString=function(s,r,n){var a,i,o,l;for(o=0,i=0,l=(s=""+s).length;0<=l?i<l:i>l;i=0<=l?++i:--i)a=s.charCodeAt(i),o+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/r)||0;return o*(r/1e3)},t.prototype.lineHeight=function(s,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*s},t}();var Xo,Qd=function(){function t(s){this.data=s??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(s){return this.data[this.pos++]=s},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(s){return this.writeByte(s>>>24&255),this.writeByte(s>>16&255),this.writeByte(s>>8&255),this.writeByte(255&s)},t.prototype.readInt32=function(){var s;return(s=this.readUInt32())>=2147483648?s-4294967296:s},t.prototype.writeInt32=function(s){return s<0&&(s+=4294967296),this.writeUInt32(s)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(s){return this.writeByte(s>>8&255),this.writeByte(255&s)},t.prototype.readInt16=function(){var s;return(s=this.readUInt16())>=32768?s-65536:s},t.prototype.writeInt16=function(s){return s<0&&(s+=65536),this.writeUInt16(s)},t.prototype.readString=function(s){var r,n;for(n=[],r=0;0<=s?r<s:r>s;r=0<=s?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(s){var r,n,a;for(a=[],r=0,n=s.length;0<=n?r<n:r>n;r=0<=n?++r:--r)a.push(this.writeByte(s.charCodeAt(r)));return a},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(s){return this.writeInt16(s)},t.prototype.readLongLong=function(){var s,r,n,a,i,o,l,c;return s=this.readByte(),r=this.readByte(),n=this.readByte(),a=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&s?-1*(72057594037927940*(255^s)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^i)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*s+281474976710656*r+1099511627776*n+4294967296*a+16777216*i+65536*o+256*l+c},t.prototype.writeLongLong=function(s){var r,n;return r=Math.floor(s/4294967296),n=4294967295&s,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(s){return this.writeInt32(s)},t.prototype.read=function(s){var r,n;for(r=[],n=0;0<=s?n<s:n>s;n=0<=s?++n:--n)r.push(this.readByte());return r},t.prototype.write=function(s){var r,n,a,i;for(i=[],n=0,a=s.length;n<a;n++)r=s[n],i.push(this.writeByte(r));return i},t}(),Efe=function(){var t;function s(r){var n,a,i;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,i=this.tableCount;0<=i?a<i:a>i;a=0<=i?++a:--a)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return s.prototype.encode=function(r){var n,a,i,o,l,c,d,u,m,f,h,p,g;for(g in h=Object.keys(r).length,c=Math.log(2),m=16*Math.floor(Math.log(h)/c),o=Math.floor(m/c),u=16*h-m,(a=new Qd).writeInt(this.scalarType),a.writeShort(h),a.writeShort(m),a.writeShort(o),a.writeShort(u),i=16*h,d=a.pos+i,l=null,p=[],r)for(f=r[g],a.writeString(g),a.writeInt(t(f)),a.writeInt(d),a.writeInt(f.length),p=p.concat(f),g==="head"&&(l=d),d+=f.length;d%4;)p.push(0),d++;return a.write(p),n=2981146554-t(a.data),a.pos=l+8,a.writeUInt32(n),a.data},t=function(r){var n,a,i,o;for(r=wq.call(r);r.length%4;)r.push(0);for(i=new Qd(r),a=0,n=0,o=r.length;n<o;n=n+=4)a+=i.readUInt32();return 4294967295&a},s}(),Tfe={}.hasOwnProperty,Fl=function(t,s){for(var r in s)Tfe.call(s,r)&&(t[r]=s[r]);function n(){this.constructor=t}return n.prototype=s.prototype,t.prototype=new n,t.__super__=s.prototype,t};Xo=function(){function t(s){var r;this.file=s,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var Mfe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Fl(t,Xo),t.prototype.tag="head",t.prototype.parse=function(s){return s.pos=this.offset,this.version=s.readInt(),this.revision=s.readInt(),this.checkSumAdjustment=s.readInt(),this.magicNumber=s.readInt(),this.flags=s.readShort(),this.unitsPerEm=s.readShort(),this.created=s.readLongLong(),this.modified=s.readLongLong(),this.xMin=s.readShort(),this.yMin=s.readShort(),this.xMax=s.readShort(),this.yMax=s.readShort(),this.macStyle=s.readShort(),this.lowestRecPPEM=s.readShort(),this.fontDirectionHint=s.readShort(),this.indexToLocFormat=s.readShort(),this.glyphDataFormat=s.readShort()},t.prototype.encode=function(s){var r;return(r=new Qd).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(s),r.writeShort(this.glyphDataFormat),r.data},t}(),nP=function(){function t(s,r){var n,a,i,o,l,c,d,u,m,f,h,p,g,y,v,j,w;switch(this.platformID=s.readUInt16(),this.encodingID=s.readShort(),this.offset=r+s.readInt(),m=s.pos,s.pos=this.offset,this.format=s.readUInt16(),this.length=s.readUInt16(),this.language=s.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=s.readByte();break;case 4:for(h=s.readUInt16(),f=h/2,s.pos+=6,i=function(){var _,P;for(P=[],c=_=0;0<=f?_<f:_>f;c=0<=f?++_:--_)P.push(s.readUInt16());return P}(),s.pos+=2,g=function(){var _,P;for(P=[],c=_=0;0<=f?_<f:_>f;c=0<=f?++_:--_)P.push(s.readUInt16());return P}(),d=function(){var _,P;for(P=[],c=_=0;0<=f?_<f:_>f;c=0<=f?++_:--_)P.push(s.readUInt16());return P}(),u=function(){var _,P;for(P=[],c=_=0;0<=f?_<f:_>f;c=0<=f?++_:--_)P.push(s.readUInt16());return P}(),a=(this.length-s.pos+this.offset)/2,l=function(){var _,P;for(P=[],c=_=0;0<=a?_<a:_>a;c=0<=a?++_:--_)P.push(s.readUInt16());return P}(),c=v=0,w=i.length;v<w;c=++v)for(y=i[c],n=j=p=g[c];p<=y?j<=y:j>=y;n=p<=y?++j:--j)u[c]===0?o=n+d[c]:(o=l[u[c]/2+(n-p)-(f-c)]||0)!==0&&(o+=d[c]),this.codeMap[n]=65535&o}s.pos=m}return t.encode=function(s,r){var n,a,i,o,l,c,d,u,m,f,h,p,g,y,v,j,w,_,P,E,L,T,M,F,k,D,z,W,ue,ae,Ne,K,Q,ke,G,I,Z,J,se,je,be,q,Te,Be,Ve,ct;switch(W=new Qd,o=Object.keys(s).sort(function(vt,qe){return vt-qe}),r){case"macroman":for(g=0,y=function(){var vt=[];for(p=0;p<256;++p)vt.push(0);return vt}(),j={0:0},i={},ue=0,Q=o.length;ue<Q;ue++)j[Te=s[a=o[ue]]]==null&&(j[Te]=++g),i[a]={old:s[a],new:j[s[a]]},y[a]=j[s[a]];return W.writeUInt16(1),W.writeUInt16(0),W.writeUInt32(12),W.writeUInt16(0),W.writeUInt16(262),W.writeUInt16(0),W.write(y),{charMap:i,subtable:W.data,maxGlyphID:g+1};case"unicode":for(D=[],m=[],w=0,j={},n={},v=d=null,ae=0,ke=o.length;ae<ke;ae++)j[P=s[a=o[ae]]]==null&&(j[P]=++w),n[a]={old:P,new:j[P]},l=j[P]-a,v!=null&&l===d||(v&&m.push(v),D.push(a),d=l),v=a;for(v&&m.push(v),m.push(65535),D.push(65535),F=2*(M=D.length),T=2*Math.pow(Math.log(M)/Math.LN2,2),f=Math.log(T/2)/Math.LN2,L=2*M-T,c=[],E=[],h=[],p=Ne=0,G=D.length;Ne<G;p=++Ne){if(k=D[p],u=m[p],k===65535){c.push(0),E.push(0);break}if(k-(z=n[k].new)>=32768)for(c.push(0),E.push(2*(h.length+M-p)),a=K=k;k<=u?K<=u:K>=u;a=k<=u?++K:--K)h.push(n[a].new);else c.push(z-k),E.push(0)}for(W.writeUInt16(3),W.writeUInt16(1),W.writeUInt32(12),W.writeUInt16(4),W.writeUInt16(16+8*M+2*h.length),W.writeUInt16(0),W.writeUInt16(F),W.writeUInt16(T),W.writeUInt16(f),W.writeUInt16(L),be=0,I=m.length;be<I;be++)a=m[be],W.writeUInt16(a);for(W.writeUInt16(0),q=0,Z=D.length;q<Z;q++)a=D[q],W.writeUInt16(a);for(Be=0,J=c.length;Be<J;Be++)l=c[Be],W.writeUInt16(l);for(Ve=0,se=E.length;Ve<se;Ve++)_=E[Ve],W.writeUInt16(_);for(ct=0,je=h.length;ct<je;ct++)g=h[ct],W.writeUInt16(g);return{charMap:n,subtable:W.data,maxGlyphID:w+1}}},t}(),Nq=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Fl(t,Xo),t.prototype.tag="cmap",t.prototype.parse=function(s){var r,n,a;for(s.pos=this.offset,this.version=s.readUInt16(),a=s.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=a?n<a:n>a;n=0<=a?++n:--n)r=new nP(s,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(s,r){var n,a;return r==null&&(r="macroman"),n=nP.encode(s,r),(a=new Qd).writeUInt16(0),a.writeUInt16(1),n.table=a.data.concat(n.subtable),n},t}(),Lfe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Fl(t,Xo),t.prototype.tag="hhea",t.prototype.parse=function(s){return s.pos=this.offset,this.version=s.readInt(),this.ascender=s.readShort(),this.decender=s.readShort(),this.lineGap=s.readShort(),this.advanceWidthMax=s.readShort(),this.minLeftSideBearing=s.readShort(),this.minRightSideBearing=s.readShort(),this.xMaxExtent=s.readShort(),this.caretSlopeRise=s.readShort(),this.caretSlopeRun=s.readShort(),this.caretOffset=s.readShort(),s.pos+=8,this.metricDataFormat=s.readShort(),this.numberOfMetrics=s.readUInt16()},t}(),Dfe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Fl(t,Xo),t.prototype.tag="OS/2",t.prototype.parse=function(s){if(s.pos=this.offset,this.version=s.readUInt16(),this.averageCharWidth=s.readShort(),this.weightClass=s.readUInt16(),this.widthClass=s.readUInt16(),this.type=s.readShort(),this.ySubscriptXSize=s.readShort(),this.ySubscriptYSize=s.readShort(),this.ySubscriptXOffset=s.readShort(),this.ySubscriptYOffset=s.readShort(),this.ySuperscriptXSize=s.readShort(),this.ySuperscriptYSize=s.readShort(),this.ySuperscriptXOffset=s.readShort(),this.ySuperscriptYOffset=s.readShort(),this.yStrikeoutSize=s.readShort(),this.yStrikeoutPosition=s.readShort(),this.familyClass=s.readShort(),this.panose=function(){var r,n;for(n=[],r=0;r<10;++r)n.push(s.readByte());return n}(),this.charRange=function(){var r,n;for(n=[],r=0;r<4;++r)n.push(s.readInt());return n}(),this.vendorID=s.readString(4),this.selection=s.readShort(),this.firstCharIndex=s.readShort(),this.lastCharIndex=s.readShort(),this.version>0&&(this.ascent=s.readShort(),this.descent=s.readShort(),this.lineGap=s.readShort(),this.winAscent=s.readShort(),this.winDescent=s.readShort(),this.codePageRange=function(){var r,n;for(n=[],r=0;r<2;r=++r)n.push(s.readInt());return n}(),this.version>1))return this.xHeight=s.readShort(),this.capHeight=s.readShort(),this.defaultChar=s.readShort(),this.breakChar=s.readShort(),this.maxContext=s.readShort()},t}(),Ife=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Fl(t,Xo),t.prototype.tag="post",t.prototype.parse=function(s){var r,n,a;switch(s.pos=this.offset,this.format=s.readInt(),this.italicAngle=s.readInt(),this.underlinePosition=s.readShort(),this.underlineThickness=s.readShort(),this.isFixedPitch=s.readInt(),this.minMemType42=s.readInt(),this.maxMemType42=s.readInt(),this.minMemType1=s.readInt(),this.maxMemType1=s.readInt(),this.format){case 65536:case 196608:break;case 131072:var i;for(n=s.readUInt16(),this.glyphNameIndex=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)this.glyphNameIndex.push(s.readUInt16());for(this.names=[],a=[];s.pos<this.offset+this.length;)r=s.readByte(),a.push(this.names.push(s.readString(r)));return a;case 151552:return n=s.readUInt16(),this.offsets=s.read(n);case 262144:return this.map=(function(){var o,l,c;for(c=[],i=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;i=0<=l?++o:--o)c.push(s.readUInt32());return c}).call(this)}},t}(),Rfe=function(t,s){this.raw=t,this.length=t.length,this.platformID=s.platformID,this.encodingID=s.encodingID,this.languageID=s.languageID},Ffe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Fl(t,Xo),t.prototype.tag="name",t.prototype.parse=function(s){var r,n,a,i,o,l,c,d,u,m,f;for(s.pos=this.offset,s.readShort(),r=s.readShort(),l=s.readShort(),n=[],i=0;0<=r?i<r:i>r;i=0<=r?++i:--i)n.push({platformID:s.readShort(),encodingID:s.readShort(),languageID:s.readShort(),nameID:s.readShort(),length:s.readShort(),offset:this.offset+l+s.readShort()});for(c={},i=u=0,m=n.length;u<m;i=++u)a=n[i],s.pos=a.offset,d=s.readString(a.length),o=new Rfe(d,a),c[f=a.nameID]==null&&(c[f]=[]),c[a.nameID].push(o);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},t}(),Ofe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Fl(t,Xo),t.prototype.tag="maxp",t.prototype.parse=function(s){return s.pos=this.offset,this.version=s.readInt(),this.numGlyphs=s.readUInt16(),this.maxPoints=s.readUInt16(),this.maxContours=s.readUInt16(),this.maxCompositePoints=s.readUInt16(),this.maxComponentContours=s.readUInt16(),this.maxZones=s.readUInt16(),this.maxTwilightPoints=s.readUInt16(),this.maxStorage=s.readUInt16(),this.maxFunctionDefs=s.readUInt16(),this.maxInstructionDefs=s.readUInt16(),this.maxStackElements=s.readUInt16(),this.maxSizeOfInstructions=s.readUInt16(),this.maxComponentElements=s.readUInt16(),this.maxComponentDepth=s.readUInt16()},t}(),$fe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Fl(t,Xo),t.prototype.tag="hmtx",t.prototype.parse=function(s){var r,n,a,i,o,l,c;for(s.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:s.readUInt16(),lsb:s.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,u;for(u=[],r=d=0;0<=a?d<a:d>a;r=0<=a?++d:--d)u.push(s.readInt16());return u}(),this.widths=(function(){var d,u,m,f;for(f=[],d=0,u=(m=this.metrics).length;d<u;d++)i=m[d],f.push(i.advance);return f}).call(this),n=this.widths[this.widths.length-1],c=[],r=o=0;0<=a?o<a:o>a;r=0<=a?++o:--o)c.push(this.widths.push(n));return c},t.prototype.forGlyph=function(s){return s in this.metrics?this.metrics[s]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[s-this.metrics.length]}},t}(),wq=[].slice,Bfe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Fl(t,Xo),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(s){var r,n,a,i,o,l,c,d,u,m;return s in this.cache?this.cache[s]:(i=this.file.loca,r=this.file.contents,n=i.indexOf(s),(a=i.lengthOf(s))===0?this.cache[s]=null:(r.pos=this.offset+n,o=(l=new Qd(r.read(a))).readShort(),d=l.readShort(),m=l.readShort(),c=l.readShort(),u=l.readShort(),this.cache[s]=o===-1?new zfe(l,d,m,c,u):new Ufe(l,o,d,m,c,u),this.cache[s]))},t.prototype.encode=function(s,r,n){var a,i,o,l,c;for(o=[],i=[],l=0,c=r.length;l<c;l++)a=s[r[l]],i.push(o.length),a&&(o=o.concat(a.encode(n)));return i.push(o.length),{table:o,offsets:i}},t}(),Ufe=function(){function t(s,r,n,a,i,o){this.raw=s,this.numberOfContours=r,this.xMin=n,this.yMin=a,this.xMax=i,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),zfe=function(){function t(s,r,n,a,i){var o,l;for(this.raw=s,this.xMin=r,this.yMin=n,this.xMax=a,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return t.prototype.encode=function(){var s,r,n;for(r=new Qd(wq.call(this.raw.data)),s=0,n=this.glyphIDs.length;s<n;++s)r.pos=this.glyphOffsets[s];return r.data},t}(),qfe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Fl(t,Xo),t.prototype.tag="loca",t.prototype.parse=function(s){var r,n;return s.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var a,i;for(i=[],n=0,a=this.length;n<a;n+=2)i.push(2*s.readUInt16());return i}).call(this):(function(){var a,i;for(i=[],n=0,a=this.length;n<a;n+=4)i.push(s.readUInt32());return i}).call(this)},t.prototype.indexOf=function(s){return this.offsets[s]},t.prototype.lengthOf=function(s){return this.offsets[s+1]-this.offsets[s]},t.prototype.encode=function(s,r){for(var n=new Uint32Array(this.offsets.length),a=0,i=0,o=0;o<n.length;++o)if(n[o]=a,i<r.length&&r[i]==o){++i,n[o]=a;var l=this.offsets[o],c=this.offsets[o+1]-l;c>0&&(a+=c)}for(var d=new Array(4*n.length),u=0;u<n.length;++u)d[4*u+3]=255&n[u],d[4*u+2]=(65280&n[u])>>8,d[4*u+1]=(16711680&n[u])>>16,d[4*u]=(4278190080&n[u])>>24;return d},t}(),Vfe=function(){function t(s){this.font=s,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var s,r,n,a,i;for(r in a=this.font.cmap.tables[0].codeMap,s={},i=this.subset)n=i[r],s[r]=a[n];return s},t.prototype.glyphsFor=function(s){var r,n,a,i,o,l,c;for(a={},o=0,l=s.length;o<l;o++)a[i=s[o]]=this.font.glyf.glyphFor(i);for(i in r=[],a)(n=a[i])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(i in c=this.glyphsFor(r))n=c[i],a[i]=n;return a},t.prototype.encode=function(s,r){var n,a,i,o,l,c,d,u,m,f,h,p,g,y,v;for(a in n=Nq.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(s),h={0:0},v=n.charMap)h[(c=v[a]).old]=c.new;for(p in f=n.maxGlyphID,o)p in h||(h[p]=f++);return u=function(j){var w,_;for(w in _={},j)_[j[w]]=w;return _}(h),m=Object.keys(u).sort(function(j,w){return j-w}),g=function(){var j,w,_;for(_=[],j=0,w=m.length;j<w;j++)l=m[j],_.push(u[l]);return _}(),i=this.font.glyf.encode(o,g,h),d=this.font.loca.encode(i.offsets,g),y={cmap:this.font.cmap.raw(),glyf:i.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(y["OS/2"]=this.font.os2.raw()),this.font.directory.encode(y)},t}();es.API.PDFObject=function(){var t;function s(){}return t=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},s.convert=function(r){var n,a,i,o;if(Array.isArray(r))return"["+function(){var l,c,d;for(d=[],l=0,c=r.length;l<c;l++)n=r[l],d.push(s.convert(n));return d}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in i=["<<"],r)o=r[a],i.push("/"+a+" "+s.convert(o));return i.push(">>"),i.join(`
`)}return""+r},s}();function Hfe({qrCodeDataUrl:t,memorialName:s,purpose:r="Share Memories",instructions:n="Scan to upload photos and videos"}){const{toast:a}=Ht(),i=()=>{window.print()},o=async()=>{try{const l=new es({orientation:"portrait",unit:"mm",format:"a4"});l.setFillColor(126,58,242),l.rect(0,0,210,297,"F"),l.setFillColor(255,255,255),l.roundedRect(15,15,180,267,3,3,"F"),l.setFillColor(212,175,55),l.rect(15,15,180,8,"F"),l.setFontSize(28),l.setTextColor(126,58,242),l.setFont("helvetica","bold"),l.text(s,105,40,{align:"center",maxWidth:160}),l.setFontSize(16),l.setTextColor(100,100,100),l.setFont("helvetica","normal"),l.text(r,105,55,{align:"center"});const c=100,d=(210-c)/2,u=70;l.setFillColor(255,255,255),l.rect(d-5,u-5,c+10,c+10,"F"),l.addImage(t,"PNG",d,u,c,c),l.setFontSize(14),l.setTextColor(126,58,242),l.setFont("helvetica","bold"),l.text("How to Use:",105,u+c+20,{align:"center"}),l.setFontSize(11),l.setTextColor(0,0,0),l.setFont("helvetica","normal");const m=["1. Open your phone's camera app","2. Point it at this QR code","3. Tap the notification that appears",`4. ${n}`];let f=u+c+30;m.forEach(p=>{l.text(p,105,f,{align:"center"}),f+=8}),l.setDrawColor(212,175,55),l.setLineWidth(.5),l.line(30,f+5,180,f+5),l.setFontSize(10),l.setTextColor(100,100,100),l.text("This QR code can be placed on tombstones, memorial cards,",105,f+15,{align:"center"}),l.text("or anywhere you'd like to share memories.",105,f+22,{align:"center"}),l.setFontSize(16),l.setTextColor(126,58,242),l.setFont("helvetica","bold"),l.text("Opictuary",105,f+35,{align:"center"}),l.setFontSize(10),l.setTextColor(100,100,100),l.setFont("helvetica","italic"),l.text("Honoring Life, Preserving Legacy",105,f+42,{align:"center"}),l.setFontSize(9),l.setFont("helvetica","normal"),l.text("opictuary.app",105,f+50,{align:"center"});const h=`${s.replace(/[^a-z0-9]/gi,"_")}_QR_Code.pdf`;l.save(h),a({title:"PDF Downloaded",description:"Your memorial QR code PDF is ready to print!"})}catch(l){console.error("Error generating PDF:",l),a({variant:"destructive",title:"Error",description:"Failed to generate PDF. Please try again."})}};return e.jsxs("div",{children:[e.jsxs("div",{className:"no-print mb-4 flex gap-2",children:[e.jsxs(O,{onClick:o,className:"flex-1","data-testid":"button-download-pdf-qr",children:[e.jsx(Al,{className:"w-4 h-4 mr-2"}),"Download PDF"]}),e.jsxs(O,{onClick:i,variant:"outline",className:"flex-1","data-testid":"button-print-qr",children:[e.jsx(OG,{className:"w-4 h-4 mr-2"}),"Print"]})]}),e.jsxs($,{className:"printable-qr-card bg-white text-black border-4 border-black","data-testid":"card-printable-qr",children:[e.jsxs(le,{className:"text-center pb-4 border-b-2 border-black",children:[e.jsxs("div",{className:"flex items-center justify-center mb-2",children:[e.jsx(_t,{className:"w-8 h-8 text-gold-500 mr-2"}),e.jsx(ro,{variant:"classic",className:"scale-90"})]}),e.jsx(ge,{className:"text-3xl font-serif text-black",children:s}),e.jsx("p",{className:"text-xl font-semibold text-black mt-2",children:r})]}),e.jsxs(V,{className:"pt-6 text-center",children:[e.jsx("div",{className:"flex items-center justify-center mb-6 bg-white p-4",children:e.jsx("img",{src:t,alt:"Memorial QR Code",className:"w-full max-w-md","data-testid":"img-qr-code"})}),e.jsxs("div",{className:"space-y-4 text-black",children:[e.jsxs("div",{className:"border-t-2 border-black pt-4",children:[e.jsxs("h3",{className:"text-2xl font-bold mb-3 flex items-center justify-center gap-2",children:[e.jsx(or,{className:"w-6 h-6"}),"How to Use"]}),e.jsxs("ol",{className:"text-left text-lg space-y-2 max-w-lg mx-auto list-decimal list-inside",children:[e.jsx("li",{className:"font-medium",children:"Open your phone's camera app"}),e.jsx("li",{className:"font-medium",children:"Point it at this QR code"}),e.jsx("li",{className:"font-medium",children:"Tap the notification that appears"}),e.jsx("li",{className:"font-medium",children:n})]})]}),e.jsxs("div",{className:"border-t-2 border-black pt-4 mt-4",children:[e.jsx("p",{className:"text-sm font-medium",children:"This QR code can be placed on tombstones, memorial cards, or anywhere you'd like to share memories."}),e.jsx("p",{className:"text-lg font-bold mt-2",children:"opictuary.app"})]})]})]})]}),e.jsx("style",{children:`
        @media print {
          /* Hide everything except the printable card */
          body * {
            visibility: hidden;
          }
          
          .printable-qr-card,
          .printable-qr-card * {
            visibility: visible;
          }
          
          .printable-qr-card {
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
            margin: 0;
            padding: 2cm;
            background: white !important;
            border: 4px solid black !important;
            box-shadow: none !important;
          }

          /* Ensure QR code prints clearly */
          img {
            -webkit-print-color-adjust: exact;
            print-color-adjust: exact;
            color-adjust: exact;
          }

          /* Hide the print button */
          .no-print {
            display: none !important;
          }

          /* Ensure black text prints */
          * {
            color: black !important;
            border-color: black !important;
          }

          /* Force colors for icons */
          .text-gold-500 {
            color: #d4af37 !important;
          }
        }

        /* Screen styling for preview */
        @media screen {
          .printable-qr-card {
            max-width: 800px;
            margin: 0 auto;
          }
        }
      `})]})}function Wfe({memorialId:t,memorialName:s,inviteCode:r}){const[n,a]=N.useState(!1),[i,o]=N.useState("tombstone_upload"),[l,c]=N.useState(null),{toast:d}=Ht(),{data:u,isLoading:m}=Xe({queryKey:["/api/memorials",t,"qr-codes"]}),f=yt({mutationFn:async j=>await(await pt("POST",`/api/memorials/${t}/qr-codes`,{purpose:j})).json(),onSuccess:()=>{xt.invalidateQueries({queryKey:["/api/memorials",t,"qr-codes"]}),d({title:"QR Code Generated",description:"Your printable QR code is ready."}),a(!1)},onError:j=>{d({title:"Generation Failed",description:j.message,variant:"destructive"})}}),h=yt({mutationFn:async j=>{await pt("DELETE",`/api/qr-codes/${j}`,{})},onSuccess:()=>{xt.invalidateQueries({queryKey:["/api/memorials",t,"qr-codes"]}),d({title:"QR Code Deleted",description:"The QR code has been removed."}),c(null)},onError:j=>{d({title:"Deletion Failed",description:j.message,variant:"destructive"})}}),p=()=>{f.mutate(i)},g=j=>{switch(j){case"tombstone_upload":return"Tombstone Upload";case"upload":return"Photo/Video Upload";case"tombstone":return"Memorial View";default:return j}},y=j=>{switch(j){case"tombstone_upload":case"upload":return"Upload photos and videos to share memories";case"tombstone":return"View and honor this memorial";default:return"Scan to interact with the memorial"}},v=(u==null?void 0:u.filter(j=>j.purpose==="tombstone_upload"||j.purpose==="upload"))||[];return e.jsxs($,{className:"bg-purple-900/50 border-purple-700/50","data-testid":"card-qr-manager",children:[e.jsx(le,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(ge,{className:"text-purple-100 flex items-center gap-2",children:[e.jsx(or,{className:"w-5 h-5"}),"QR Codes"]}),e.jsx($e,{className:"text-purple-300",children:"Generate printable QR codes for uploading photos and videos"})]}),e.jsxs(Os,{open:n,onOpenChange:a,children:[e.jsx(si,{asChild:!0,children:e.jsxs(O,{size:"sm","data-testid":"button-generate-qr",children:[e.jsx(bs,{className:"w-4 h-4 mr-2"}),"Generate QR Code"]})}),e.jsxs(Ds,{className:"bg-purple-900 border-purple-700",children:[e.jsxs(Is,{children:[e.jsx(Rs,{className:"text-purple-100",children:"Generate QR Code"}),e.jsx(Lr,{className:"text-purple-300",children:"Create a printable QR code for this memorial"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"purpose",className:"text-purple-100",children:"QR Code Purpose"}),e.jsxs(Rt,{value:i,onValueChange:o,children:[e.jsx(Mt,{id:"purpose","data-testid":"select-qr-purpose",className:"bg-purple-950/50 border-purple-700/50 text-purple-100",children:e.jsx(Ft,{placeholder:"Select purpose"})}),e.jsxs(Lt,{children:[e.jsx(te,{value:"tombstone_upload",children:"Tombstone Upload (Recommended)"}),e.jsx(te,{value:"upload",children:"Photo/Video Upload"}),e.jsx(te,{value:"tombstone",children:"Memorial View Only"})]})]}),e.jsxs("p",{className:"text-xs text-purple-400",children:[i==="tombstone_upload"&&"Perfect for placing on gravestones - allows visitors to upload photos and videos",i==="upload"&&"General upload QR code for sharing on memorial cards or announcements",i==="tombstone"&&"Links to memorial view page without upload functionality"]})]}),e.jsx(O,{onClick:p,disabled:f.isPending,className:"w-full","data-testid":"button-confirm-generate",children:f.isPending?e.jsxs(e.Fragment,{children:[e.jsx(tn,{className:"w-4 h-4 mr-2 animate-spin"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(or,{className:"w-4 h-4 mr-2"}),"Generate QR Code"]})})]})]})]})]})}),e.jsxs(V,{children:[m?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(tn,{className:"w-8 h-8 text-gold-400 animate-spin mx-auto mb-2"}),e.jsx("p",{className:"text-purple-300",children:"Loading QR codes..."})]}):v.length===0?e.jsxs("div",{className:"text-center py-8 border-2 border-dashed border-purple-700/50 rounded-lg",children:[e.jsx(or,{className:"w-12 h-12 text-purple-400 mx-auto mb-3"}),e.jsx("p",{className:"text-purple-300 mb-2",children:"No upload QR codes yet"}),e.jsx("p",{className:"text-sm text-purple-400 mb-4",children:"Generate a QR code to place on the tombstone or share with visitors"})]}):e.jsx("div",{className:"space-y-4",children:v.map(j=>e.jsxs("div",{className:"border border-purple-700/50 rounded-lg p-4 bg-purple-950/30","data-testid":`qr-code-item-${j.id}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-purple-100",children:g(j.purpose)}),e.jsxs("p",{className:"text-sm text-purple-400",children:["Created ",new Date(j.createdAt).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(O,{size:"sm",variant:"outline",onClick:()=>c(j),"data-testid":`button-view-qr-${j.id}`,children:[e.jsx(or,{className:"w-4 h-4 mr-2"}),"View & Print"]}),e.jsx(O,{size:"sm",variant:"ghost",onClick:()=>h.mutate(j.id),disabled:h.isPending,"data-testid":`button-delete-qr-${j.id}`,children:e.jsx(jc,{className:"w-4 h-4"})})]})]}),e.jsx("div",{className:"flex items-center justify-center bg-white p-2 rounded",children:e.jsx("img",{src:j.code,alt:"QR Code Preview",className:"w-24 h-24"})})]},j.id))}),e.jsx(Os,{open:!!l,onOpenChange:j=>!j&&c(null),children:e.jsxs(Ds,{className:"max-w-4xl bg-purple-900 border-purple-700",children:[e.jsxs(Is,{children:[e.jsx(Rs,{className:"text-purple-100",children:"Printable QR Code"}),e.jsx(Lr,{className:"text-purple-300",children:"Print this QR code to place on the tombstone or memorial"})]}),l&&e.jsx(Hfe,{qrCodeDataUrl:l.code,memorialName:s,purpose:g(l.purpose),instructions:y(l.purpose)})]})})]})]})}function Kfe({memorialId:t,canEdit:s=!1,onSelectPlaylist:r}){const{toast:n}=Ht(),[a,i]=N.useState(!1),[o,l]=N.useState(null),[c,d]=N.useState(""),[u,m]=N.useState(""),[f,h]=N.useState(!1),[p,g]=N.useState([]),{data:y=[]}=Xe({queryKey:[`/api/memorials/${t}/playlists`]}),v=yt({mutationFn:async k=>pt(`/api/memorials/${t}/playlists`,{method:"POST",body:JSON.stringify(k)}),onSuccess:()=>{xt.invalidateQueries({queryKey:[`/api/memorials/${t}/playlists`]}),i(!1),P(),n({title:"Playlist Created",description:"Your music playlist has been created successfully."})},onError:()=>{n({title:"Error",description:"Failed to create playlist. Please try again.",variant:"destructive"})}}),j=yt({mutationFn:async({id:k,data:D})=>pt(`/api/playlists/${k}`,{method:"PUT",body:JSON.stringify(D)}),onSuccess:()=>{xt.invalidateQueries({queryKey:[`/api/memorials/${t}/playlists`]}),l(null),P(),n({title:"Playlist Updated",description:"Your music playlist has been updated successfully."})},onError:()=>{n({title:"Error",description:"Failed to update playlist. Please try again.",variant:"destructive"})}}),w=yt({mutationFn:async k=>pt(`/api/playlists/${k}`,{method:"DELETE"}),onSuccess:()=>{xt.invalidateQueries({queryKey:[`/api/memorials/${t}/playlists`]}),n({title:"Playlist Deleted",description:"The playlist has been removed."})},onError:()=>{n({title:"Error",description:"Failed to delete playlist. Please try again.",variant:"destructive"})}}),_=yt({mutationFn:async k=>pt(`/api/playlists/${k}/set-default`,{method:"POST"}),onSuccess:()=>{xt.invalidateQueries({queryKey:[`/api/memorials/${t}/playlists`]}),n({title:"Default Playlist Set",description:"This playlist will be used as the default for new slideshows."})},onError:()=>{n({title:"Error",description:"Failed to set default playlist. Please try again.",variant:"destructive"})}}),P=()=>{d(""),m(""),h(!1),g([])},E=k=>{l(k),d(k.name),m(k.description||""),h(k.isLooped),g(k.songs),i(!0)},L=()=>{g([...p,{title:"",artist:"",url:""}])},T=k=>{g(p.filter((D,z)=>z!==k))},M=(k,D,z)=>{const W=[...p];W[k]={...W[k],[D]:z},g(W)},F=()=>{if(!c.trim()){n({title:"Name Required",description:"Please provide a name for the playlist.",variant:"destructive"});return}const k=p.filter(z=>z.title&&z.url);if(k.length===0){n({title:"Songs Required",description:"Please add at least one song with title and URL.",variant:"destructive"});return}const D={name:c,description:u||void 0,songs:k,isLooped:f};o?j.mutate({id:o.id,data:D}):v.mutate(D)};return y.find(k=>k.isDefault),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Music Playlists"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Create playlists for memorial slideshows and videos"})]}),s&&e.jsxs(O,{onClick:()=>{l(null),P(),i(!0)},size:"sm","data-testid":"button-create-playlist",children:[e.jsx(bs,{className:"w-4 h-4 mr-2"}),"Create Playlist"]})]}),y.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:y.map(k=>e.jsxs($,{className:`p-4 ${r?"cursor-pointer hover-elevate":""}`,onClick:()=>r==null?void 0:r(k.id),"data-testid":`card-playlist-${k.id}`,children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(zn,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("h4",{className:"font-medium",children:k.name}),k.isDefault&&e.jsx(Ks,{className:"w-3 h-3 text-yellow-500 fill-current"})]}),k.description&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:k.description}),e.jsxs("div",{className:"mt-2 text-sm text-muted-foreground",children:[k.songs.length," song",k.songs.length!==1?"s":"",k.isLooped&&"  Looped"]})]}),s&&e.jsxs("div",{className:"flex gap-1",children:[!k.isDefault&&e.jsx(O,{size:"sm",variant:"ghost",onClick:D=>{D.stopPropagation(),_.mutate(k.id)},"data-testid":`button-set-default-${k.id}`,children:e.jsx(Ks,{className:"w-4 h-4"})}),e.jsx(O,{size:"sm",variant:"ghost",onClick:D=>{D.stopPropagation(),E(k)},"data-testid":`button-edit-playlist-${k.id}`,children:e.jsx(Mg,{className:"w-4 h-4"})}),e.jsx(O,{size:"sm",variant:"ghost",onClick:D=>{D.stopPropagation(),confirm("Are you sure you want to delete this playlist?")&&w.mutate(k.id)},"data-testid":`button-delete-playlist-${k.id}`,children:e.jsx(jc,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"mt-3 space-y-1",children:[k.songs.slice(0,3).map((D,z)=>e.jsxs("div",{className:"text-xs text-muted-foreground truncate",children:[z+1,". ",D.title," ",D.artist&&`- ${D.artist}`]},z)),k.songs.length>3&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:["+",k.songs.length-3," more..."]})]})]},k.id))}):e.jsxs($,{className:"p-8 text-center",children:[e.jsx(zn,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("p",{className:"text-muted-foreground",children:"No playlists created yet"}),s&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Create a playlist to add music to slideshows"})]}),e.jsx(Os,{open:a,onOpenChange:i,children:e.jsxs(Ds,{className:"max-w-2xl max-h-[90vh] overflow-y-auto","data-testid":"dialog-playlist",children:[e.jsxs(Is,{children:[e.jsx(Rs,{children:o?"Edit Playlist":"Create Playlist"}),e.jsx(Lr,{children:"Add songs to create a memorial playlist for slideshows"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(De,{htmlFor:"name",children:"Playlist Name"}),e.jsx(re,{id:"name",value:c,onChange:k=>d(k.target.value),placeholder:"e.g., Mom's Favorite Songs",required:!0,"data-testid":"input-playlist-name"})]}),e.jsxs("div",{children:[e.jsx(De,{htmlFor:"description",children:"Description (Optional)"}),e.jsx(re,{id:"description",value:u,onChange:k=>m(k.target.value),placeholder:"Brief description of this playlist","data-testid":"input-playlist-description"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(De,{htmlFor:"is-looped",className:"flex-1",children:["Loop Playlist",e.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically restart when it ends"})]}),e.jsx(ir,{id:"is-looped",checked:f,onCheckedChange:h,"data-testid":"switch-loop"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(De,{children:"Songs"}),e.jsxs(O,{size:"sm",variant:"outline",onClick:L,"data-testid":"button-add-song",children:[e.jsx(bs,{className:"w-4 h-4 mr-2"}),"Add Song"]})]}),e.jsx(Dl,{className:"h-[300px] border rounded-lg p-4",children:p.length===0?e.jsx("div",{className:"text-center text-muted-foreground py-8",children:'No songs added yet. Click "Add Song" to get started.'}):e.jsx("div",{className:"space-y-4",children:p.map((k,D)=>e.jsx($,{className:"p-4","data-testid":`song-item-${D}`,children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"font-medium text-sm",children:["Song ",D+1]}),e.jsx(O,{size:"sm",variant:"ghost",onClick:()=>T(D),"data-testid":`button-remove-song-${D}`,children:e.jsx(jc,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(De,{htmlFor:`title-${D}`,className:"text-xs",children:"Title"}),e.jsx(re,{id:`title-${D}`,value:k.title,onChange:z=>M(D,"title",z.target.value),placeholder:"Song title",required:!0,"data-testid":`input-song-title-${D}`})]}),e.jsxs("div",{children:[e.jsx(De,{htmlFor:`artist-${D}`,className:"text-xs",children:"Artist (Optional)"}),e.jsx(re,{id:`artist-${D}`,value:k.artist,onChange:z=>M(D,"artist",z.target.value),placeholder:"Artist name","data-testid":`input-song-artist-${D}`})]})]}),e.jsxs("div",{children:[e.jsx(De,{htmlFor:`url-${D}`,className:"text-xs",children:"Audio URL"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(re,{id:`url-${D}`,value:k.url,onChange:z=>M(D,"url",z.target.value),placeholder:"https://example.com/song.mp3",required:!0,"data-testid":`input-song-url-${D}`}),e.jsx(O,{size:"sm",variant:"outline",onClick:()=>{n({title:"Coming Soon",description:"Direct file upload will be available soon."})},"data-testid":`button-upload-song-${D}`,children:e.jsx(zd,{className:"w-4 h-4"})})]})]})]})},D))})})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[e.jsx(O,{variant:"outline",onClick:()=>{i(!1),l(null),P()},"data-testid":"button-cancel-playlist",children:"Cancel"}),e.jsxs(O,{onClick:F,disabled:!c||p.filter(k=>k.title&&k.url).length===0||v.isPending||j.isPending,"data-testid":"button-save-playlist",children:[v.isPending||j.isPending?"Saving...":o?"Update":"Create"," Playlist"]})]})]})})]})}var _q=["PageUp","PageDown"],Sq=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Cq={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Wf="Slider",[i5,Yfe,Gfe]=Mf(Wf),[kq,eve]=Dn(Wf,[Gfe]),[Qfe,Pj]=kq(Wf),Aq=N.forwardRef((t,s)=>{const{name:r,min:n=0,max:a=100,step:i=1,orientation:o="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:d=[n],value:u,onValueChange:m=()=>{},onValueCommit:f=()=>{},inverted:h=!1,form:p,...g}=t,y=N.useRef(new Set),v=N.useRef(0),w=o==="horizontal"?Zfe:Xfe,[_=[],P]=Ii({prop:u,defaultProp:d,onChange:k=>{var z;(z=[...y.current][v.current])==null||z.focus(),m(k)}}),E=N.useRef(_);function L(k){const D=rpe(_,k);F(k,D)}function T(k){F(k,v.current)}function M(){const k=E.current[v.current];_[v.current]!==k&&f(_)}function F(k,D,{commit:z}={commit:!1}){const W=ope(i),ue=lpe(Math.round((k-n)/i)*i+n,W),ae=og(ue,[n,a]);P((Ne=[])=>{const K=tpe(Ne,ae,D);if(ipe(K,c*i)){v.current=K.indexOf(ae);const Q=String(K)!==String(Ne);return Q&&z&&f(K),Q?K:Ne}else return Ne})}return e.jsx(Qfe,{scope:t.__scopeSlider,name:r,disabled:l,min:n,max:a,valueIndexToChangeRef:v,thumbs:y.current,values:_,orientation:o,form:p,children:e.jsx(i5.Provider,{scope:t.__scopeSlider,children:e.jsx(i5.Slot,{scope:t.__scopeSlider,children:e.jsx(w,{"aria-disabled":l,"data-disabled":l?"":void 0,...g,ref:s,onPointerDown:ht(g.onPointerDown,()=>{l||(E.current=_)}),min:n,max:a,inverted:h,onSlideStart:l?void 0:L,onSlideMove:l?void 0:T,onSlideEnd:l?void 0:M,onHomeKeyDown:()=>!l&&F(n,0,{commit:!0}),onEndKeyDown:()=>!l&&F(a,_.length-1,{commit:!0}),onStepKeyDown:({event:k,direction:D})=>{if(!l){const ue=_q.includes(k.key)||k.shiftKey&&Sq.includes(k.key)?10:1,ae=v.current,Ne=_[ae],K=i*ue*D;F(Ne+K,ae,{commit:!0})}}})})})})});Aq.displayName=Wf;var[Pq,Eq]=kq(Wf,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Zfe=N.forwardRef((t,s)=>{const{min:r,max:n,dir:a,inverted:i,onSlideStart:o,onSlideMove:l,onSlideEnd:c,onStepKeyDown:d,...u}=t,[m,f]=N.useState(null),h=us(s,w=>f(w)),p=N.useRef(void 0),g=Nm(a),y=g==="ltr",v=y&&!i||!y&&i;function j(w){const _=p.current||m.getBoundingClientRect(),P=[0,_.width],L=bS(P,v?[r,n]:[n,r]);return p.current=_,L(w-_.left)}return e.jsx(Pq,{scope:t.__scopeSlider,startEdge:v?"left":"right",endEdge:v?"right":"left",direction:v?1:-1,size:"width",children:e.jsx(Tq,{dir:g,"data-orientation":"horizontal",...u,ref:h,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:w=>{const _=j(w.clientX);o==null||o(_)},onSlideMove:w=>{const _=j(w.clientX);l==null||l(_)},onSlideEnd:()=>{p.current=void 0,c==null||c()},onStepKeyDown:w=>{const P=Cq[v?"from-left":"from-right"].includes(w.key);d==null||d({event:w,direction:P?-1:1})}})})}),Xfe=N.forwardRef((t,s)=>{const{min:r,max:n,inverted:a,onSlideStart:i,onSlideMove:o,onSlideEnd:l,onStepKeyDown:c,...d}=t,u=N.useRef(null),m=us(s,u),f=N.useRef(void 0),h=!a;function p(g){const y=f.current||u.current.getBoundingClientRect(),v=[0,y.height],w=bS(v,h?[n,r]:[r,n]);return f.current=y,w(g-y.top)}return e.jsx(Pq,{scope:t.__scopeSlider,startEdge:h?"bottom":"top",endEdge:h?"top":"bottom",size:"height",direction:h?1:-1,children:e.jsx(Tq,{"data-orientation":"vertical",...d,ref:m,style:{...d.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:g=>{const y=p(g.clientY);i==null||i(y)},onSlideMove:g=>{const y=p(g.clientY);o==null||o(y)},onSlideEnd:()=>{f.current=void 0,l==null||l()},onStepKeyDown:g=>{const v=Cq[h?"from-bottom":"from-top"].includes(g.key);c==null||c({event:g,direction:v?-1:1})}})})}),Tq=N.forwardRef((t,s)=>{const{__scopeSlider:r,onSlideStart:n,onSlideMove:a,onSlideEnd:i,onHomeKeyDown:o,onEndKeyDown:l,onStepKeyDown:c,...d}=t,u=Pj(Wf,r);return e.jsx(Dt.span,{...d,ref:s,onKeyDown:ht(t.onKeyDown,m=>{m.key==="Home"?(o(m),m.preventDefault()):m.key==="End"?(l(m),m.preventDefault()):_q.concat(Sq).includes(m.key)&&(c(m),m.preventDefault())}),onPointerDown:ht(t.onPointerDown,m=>{const f=m.target;f.setPointerCapture(m.pointerId),m.preventDefault(),u.thumbs.has(f)?f.focus():n(m)}),onPointerMove:ht(t.onPointerMove,m=>{m.target.hasPointerCapture(m.pointerId)&&a(m)}),onPointerUp:ht(t.onPointerUp,m=>{const f=m.target;f.hasPointerCapture(m.pointerId)&&(f.releasePointerCapture(m.pointerId),i(m))})})}),Mq="SliderTrack",Lq=N.forwardRef((t,s)=>{const{__scopeSlider:r,...n}=t,a=Pj(Mq,r);return e.jsx(Dt.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...n,ref:s})});Lq.displayName=Mq;var o5="SliderRange",Dq=N.forwardRef((t,s)=>{const{__scopeSlider:r,...n}=t,a=Pj(o5,r),i=Eq(o5,r),o=N.useRef(null),l=us(s,o),c=a.values.length,d=a.values.map(f=>Rq(f,a.min,a.max)),u=c>1?Math.min(...d):0,m=100-Math.max(...d);return e.jsx(Dt.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...n,ref:l,style:{...t.style,[i.startEdge]:u+"%",[i.endEdge]:m+"%"}})});Dq.displayName=o5;var l5="SliderThumb",Iq=N.forwardRef((t,s)=>{const r=Yfe(t.__scopeSlider),[n,a]=N.useState(null),i=us(s,l=>a(l)),o=N.useMemo(()=>n?r().findIndex(l=>l.ref.current===n):-1,[r,n]);return e.jsx(Jfe,{...t,ref:i,index:o})}),Jfe=N.forwardRef((t,s)=>{const{__scopeSlider:r,index:n,name:a,...i}=t,o=Pj(l5,r),l=Eq(l5,r),[c,d]=N.useState(null),u=us(s,j=>d(j)),m=c?o.form||!!c.closest("form"):!0,f=Y1(c),h=o.values[n],p=h===void 0?0:Rq(h,o.min,o.max),g=spe(n,o.values.length),y=f==null?void 0:f[l.size],v=y?npe(y,p,l.direction):0;return N.useEffect(()=>{if(c)return o.thumbs.add(c),()=>{o.thumbs.delete(c)}},[c,o.thumbs]),e.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${p}% + ${v}px)`},children:[e.jsx(i5.ItemSlot,{scope:t.__scopeSlider,children:e.jsx(Dt.span,{role:"slider","aria-label":t["aria-label"]||g,"aria-valuemin":o.min,"aria-valuenow":h,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...i,ref:u,style:h===void 0?{display:"none"}:t.style,onFocus:ht(t.onFocus,()=>{o.valueIndexToChangeRef.current=n})})}),m&&e.jsx(epe,{name:a??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:h},n)]})});Iq.displayName=l5;var epe=t=>{const{value:s,...r}=t,n=N.useRef(null),a=aj(s);return N.useEffect(()=>{const i=n.current,o=window.HTMLInputElement.prototype,c=Object.getOwnPropertyDescriptor(o,"value").set;if(a!==s&&c){const d=new Event("input",{bubbles:!0});c.call(i,s),i.dispatchEvent(d)}},[a,s]),e.jsx("input",{style:{display:"none"},...r,ref:n,defaultValue:s})};function tpe(t=[],s,r){const n=[...t];return n[r]=s,n.sort((a,i)=>a-i)}function Rq(t,s,r){const i=100/(r-s)*(t-s);return og(i,[0,100])}function spe(t,s){return s>2?`Value ${t+1} of ${s}`:s===2?["Minimum","Maximum"][t]:void 0}function rpe(t,s){if(t.length===1)return 0;const r=t.map(a=>Math.abs(a-s)),n=Math.min(...r);return r.indexOf(n)}function npe(t,s,r){const n=t/2,i=bS([0,50],[0,n]);return(n-i(s)*r)*r}function ape(t){return t.slice(0,-1).map((s,r)=>t[r+1]-s)}function ipe(t,s){if(s>0){const r=ape(t);return Math.min(...r)>=s}return!0}function bS(t,s){return r=>{if(t[0]===t[1]||s[0]===s[1])return s[0];const n=(s[1]-s[0])/(t[1]-t[0]);return s[0]+n*(r-t[0])}}function ope(t){return(String(t).split(".")[1]||"").length}function lpe(t,s){const r=Math.pow(10,s);return Math.round(t*r)/r}var Fq=Aq,cpe=Lq,dpe=Dq,upe=Iq;const NS=N.forwardRef(({className:t,...s},r)=>e.jsxs(Fq,{ref:r,className:bt("relative flex w-full touch-none select-none items-center",t),...s,children:[e.jsx(cpe,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:e.jsx(dpe,{className:"absolute h-full bg-primary"})}),e.jsx(upe,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));NS.displayName=Fq.displayName;const mpe=[{value:"fade",label:"Fade"},{value:"slide",label:"Slide"},{value:"zoom",label:"Zoom"},{value:"ken-burns",label:"Ken Burns Effect"}];function hpe({memorialId:t,isOpen:s,onClose:r,editingSlideshow:n}){const{toast:a}=Ht(),[i,o]=N.useState((n==null?void 0:n.photoIds)||[]),[l,c]=N.useState((n==null?void 0:n.playlistId)||void 0),[d,u]=N.useState((n==null?void 0:n.title)||""),[m,f]=N.useState((n==null?void 0:n.description)||""),[h,p]=N.useState((n==null?void 0:n.transitionType)||"fade"),[g,y]=N.useState((n==null?void 0:n.photoDuration)||5),[v,j]=N.useState((n==null?void 0:n.syncToMusic)||!1),[w,_]=N.useState((n==null?void 0:n.autoplay)||!1),[P,E]=N.useState((n==null?void 0:n.showCaptions)||!0),[L,T]=N.useState((n==null?void 0:n.isPublic)??!0),{data:M=[]}=Xe({queryKey:[`/api/memorials/${t}/memories`],enabled:s}),F=M.filter(ae=>ae.type==="photo"),{data:k=[]}=Xe({queryKey:[`/api/memorials/${t}/playlists`],enabled:s}),D=yt({mutationFn:async ae=>{const Ne=n?`/api/slideshows/${n.id}`:`/api/memorials/${t}/slideshows`;return pt(Ne,{method:n?"PUT":"POST",body:JSON.stringify(ae)})},onSuccess:()=>{xt.invalidateQueries({queryKey:[`/api/memorials/${t}/slideshows`]}),a({title:n?"Slideshow Updated":"Slideshow Created",description:"Your slideshow has been saved successfully."}),r()},onError:()=>{a({title:"Error",description:"Failed to save slideshow. Please try again.",variant:"destructive"})}}),z=ae=>{o(Ne=>Ne.includes(ae)?Ne.filter(K=>K!==ae):[...Ne,ae])},W=(ae,Ne)=>{o(K=>{const Q=K.indexOf(ae);if(Q===-1)return K;const ke=[...K],G=Ne==="up"?Q-1:Q+1;return G<0||G>=ke.length?K:([ke[Q],ke[G]]=[ke[G],ke[Q]],ke)})},ue=()=>{if(!d.trim()){a({title:"Title Required",description:"Please provide a title for your slideshow.",variant:"destructive"});return}if(i.length===0){a({title:"Photos Required",description:"Please select at least one photo for your slideshow.",variant:"destructive"});return}D.mutate({title:d,description:m||void 0,photoIds:i,playlistId:l||void 0,transitionType:h,photoDuration:g,syncToMusic:v,autoplay:w,showCaptions:P,isPublic:L})};return e.jsx(Os,{open:s,onOpenChange:r,children:e.jsxs(Ds,{className:"max-w-4xl max-h-[90vh] overflow-hidden","data-testid":"dialog-slideshow-creator",children:[e.jsxs(Is,{children:[e.jsx(Rs,{children:n?"Edit Slideshow":"Create Memorial Slideshow"}),e.jsx(Lr,{children:"Select photos and music to create a beautiful memorial slideshow"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 overflow-hidden",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs(De,{children:["Select Photos (",i.length," selected)"]}),e.jsx(Dl,{className:"h-[300px] mt-2 border rounded-lg p-2",children:e.jsx("div",{className:"grid grid-cols-3 gap-2",children:F.map(ae=>{const Ne=i.includes(ae.id);return e.jsxs("div",{className:`relative cursor-pointer rounded-lg overflow-hidden hover-elevate ${Ne?"ring-2 ring-primary":""}`,onClick:()=>z(ae.id),"data-testid":`photo-select-${ae.id}`,children:[e.jsx("img",{src:ae.mediaUrl,alt:ae.caption||"Memorial photo",className:"w-full h-20 object-cover"}),Ne&&e.jsx("div",{className:"absolute inset-0 bg-primary/30 flex items-center justify-center",children:e.jsx("div",{className:"bg-primary text-primary-foreground rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold",children:i.indexOf(ae.id)+1})})]},ae.id)})})})]}),i.length>0&&e.jsxs("div",{children:[e.jsx(De,{children:"Photo Order"}),e.jsx(Dl,{className:"h-[150px] mt-2 border rounded-lg p-2",children:i.map((ae,Ne)=>{const K=F.find(Q=>Q.id===ae);return K?e.jsxs("div",{className:"flex items-center gap-2 p-2 hover:bg-muted rounded","data-testid":`photo-order-${ae}`,children:[e.jsx(uw,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm font-medium",children:[Ne+1,"."]}),e.jsx("img",{src:K.mediaUrl,alt:"",className:"w-10 h-10 object-cover rounded"}),e.jsx("span",{className:"flex-1 text-sm truncate",children:K.caption||"Photo"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(O,{size:"sm",variant:"ghost",onClick:()=>W(ae,"up"),disabled:Ne===0,"data-testid":`button-move-up-${ae}`,children:""}),e.jsx(O,{size:"sm",variant:"ghost",onClick:()=>W(ae,"down"),disabled:Ne===i.length-1,"data-testid":`button-move-down-${ae}`,children:""})]})]},ae):null})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(De,{htmlFor:"title",children:"Slideshow Title"}),e.jsx(re,{id:"title",value:d,onChange:ae=>u(ae.target.value),placeholder:"e.g., Celebrating Mom's Life",required:!0,"data-testid":"input-slideshow-title"})]}),e.jsxs("div",{children:[e.jsx(De,{htmlFor:"description",children:"Description (Optional)"}),e.jsx(re,{id:"description",value:m,onChange:ae=>f(ae.target.value),placeholder:"Brief description of this slideshow","data-testid":"input-slideshow-description"})]}),e.jsxs("div",{children:[e.jsx(De,{htmlFor:"playlist",children:"Background Music"}),e.jsxs(Rt,{value:l,onValueChange:c,children:[e.jsx(Mt,{"data-testid":"select-playlist",children:e.jsx(Ft,{placeholder:"Select a playlist (optional)"})}),e.jsxs(Lt,{children:[e.jsx(te,{value:"none",children:"No Music"}),k.map(ae=>e.jsx(te,{value:ae.id,children:ae.name},ae.id))]})]})]}),e.jsxs("div",{children:[e.jsx(De,{htmlFor:"transition",children:"Transition Effect"}),e.jsxs(Rt,{value:h,onValueChange:p,children:[e.jsx(Mt,{"data-testid":"select-transition",children:e.jsx(Ft,{})}),e.jsx(Lt,{children:mpe.map(ae=>e.jsx(te,{value:ae.value,children:ae.label},ae.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(De,{htmlFor:"duration",children:["Photo Duration: ",g," seconds"]}),e.jsx(NS,{id:"duration",value:[g],onValueChange:ae=>y(ae[0]),min:2,max:15,step:1,className:"w-full","data-testid":"slider-duration"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(De,{htmlFor:"sync-music",className:"flex-1",children:["Sync to Music Beat",e.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically time transitions with music rhythm"})]}),e.jsx(ir,{id:"sync-music",checked:v,onCheckedChange:j,disabled:!l||l==="none","data-testid":"switch-sync-music"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(De,{htmlFor:"autoplay",className:"flex-1",children:["Autoplay",e.jsx("p",{className:"text-xs text-muted-foreground",children:"Start playing automatically when opened"})]}),e.jsx(ir,{id:"autoplay",checked:w,onCheckedChange:_,"data-testid":"switch-autoplay"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(De,{htmlFor:"show-captions",className:"flex-1",children:["Show Captions",e.jsx("p",{className:"text-xs text-muted-foreground",children:"Display photo captions during slideshow"})]}),e.jsx(ir,{id:"show-captions",checked:P,onCheckedChange:E,"data-testid":"switch-captions"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(De,{htmlFor:"is-public",className:"flex-1",children:["Public Slideshow",e.jsx("p",{className:"text-xs text-muted-foreground",children:"Allow anyone to view this slideshow"})]}),e.jsx(ir,{id:"is-public",checked:L,onCheckedChange:T,"data-testid":"switch-public"})]})]})]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:[i.length," photos selected",l&&l!=="none"&&"  Music added"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(O,{variant:"outline",onClick:r,"data-testid":"button-cancel-slideshow",children:"Cancel"}),e.jsxs(O,{onClick:ue,disabled:D.isPending||i.length===0||!d,"data-testid":"button-save-slideshow",children:[e.jsx(P_,{className:"w-4 h-4 mr-2"}),D.isPending?"Saving...":n?"Update":"Create"," Slideshow"]})]})]})]})})}const fpe=Dr({recipientName:we().min(1,"Recipient name is required"),recipientEmail:we().email("Invalid email address").optional().or(wr("")),eventType:Xn(["birthday","graduation","wedding","anniversary","baby_birth","holiday","mother_day","father_day","christmas","new_year","custom"]),customEventName:we().optional(),eventDate:we().min(1,"Event date is required"),sendTime:we().optional(),message:we().min(10,"Message must be at least 10 characters"),mediaUrl:we().url("Invalid URL").optional().or(wr("")),mediaType:Xn(["text","video","image","mixed"]).optional(),isRecurring:xn().optional(),recurrenceInterval:Xn(["yearly","monthly","custom"]).optional(),status:Xn(["draft","pending","sent","failed"]).optional()}).refine(t=>!(t.isRecurring&&!t.recurrenceInterval),{message:"Please select a recurrence frequency",path:["recurrenceInterval"]});function ppe(){const{id:t}=Ba(),[,s]=ja();fo();const{toast:r}=Ht(),[n,a]=N.useState(!1),[i,o]=N.useState(null),[l,c]=N.useState(""),[d,u]=N.useState(!0),{data:m,isLoading:f}=Xe({queryKey:["/api/memorials",t],enabled:!!t}),{data:h=[]}=Xe({queryKey:["/api/memorials",t,"scheduled-messages"],enabled:!!t}),p=Or({resolver:$r(fpe),defaultValues:{recipientName:"",recipientEmail:"",eventType:"birthday",customEventName:"",eventDate:"",sendTime:"09:00",message:"",mediaUrl:"",mediaType:"text",isRecurring:!1,recurrenceInterval:void 0,status:"pending"}}),g=p.watch("eventType"),y=p.watch("isRecurring"),v=M=>{const F=Pae(M);F&&(c(M),p.setValue("message",F.message),u(!1))},j=yt({mutationFn:M=>pt("POST",`/api/memorials/${t}/scheduled-messages`,M),onSuccess:()=>{xt.invalidateQueries({queryKey:["/api/memorials",t,"scheduled-messages"]}),r({title:"Success",description:"Scheduled message created!"}),a(!1),p.reset()},onError:M=>{console.error("Create mutation error:",M);const F=(M==null?void 0:M.message)||"Failed to create message.";r({title:"Error",description:F,variant:"destructive"})}}),w=yt({mutationFn:M=>pt("PATCH",`/api/scheduled-messages/${i==null?void 0:i.id}`,M),onSuccess:()=>{xt.invalidateQueries({queryKey:["/api/memorials",t,"scheduled-messages"]}),r({title:"Success",description:"Message updated!"}),a(!1),o(null),p.reset()}}),_=yt({mutationFn:M=>pt("DELETE",`/api/scheduled-messages/${M}`),onSuccess:()=>{xt.invalidateQueries({queryKey:["/api/memorials",t,"scheduled-messages"]}),r({title:"Success",description:"Message deleted."})}}),P=M=>{o(M),u(!1),c(""),p.reset({recipientName:M.recipientName,recipientEmail:M.recipientEmail||"",eventType:M.eventType,customEventName:M.customEventName||"",eventDate:M.eventDate||"",sendTime:M.sendTime||"09:00",message:M.message,mediaUrl:M.mediaUrl||"",mediaType:M.mediaType||"text",isRecurring:M.isRecurring||!1,recurrenceInterval:M.recurrenceInterval||void 0,status:M.status||"pending"}),a(!0)},E=()=>{o(null),u(!0),c(""),p.reset(),a(!0)},L=M=>{console.log("[FRONTEND] Form submitted with data:",JSON.stringify(M,null,2)),console.log("[FRONTEND] Memorial ID:",t),console.log("[FRONTEND] Editing message:",i?"yes":"no"),i?w.mutate(M):j.mutate(M)};if(f)return e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-purple-950 via-purple-900 to-purple-950 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(_t,{className:"w-12 h-12 text-gold-400 animate-pulse mx-auto mb-4"}),e.jsx("p",{className:"text-purple-200",children:"Loading memorial..."})]})});if(!m)return e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-purple-950 via-purple-900 to-purple-950 flex items-center justify-center p-4",children:e.jsxs($,{className:"max-w-md w-full bg-purple-900/50 border-purple-700/50",children:[e.jsxs(le,{children:[e.jsx(ge,{className:"text-purple-100",children:"Memorial Not Found"}),e.jsx($e,{className:"text-purple-300",children:"The memorial you're looking for could not be found."})]}),e.jsx(V,{children:e.jsxs(O,{onClick:()=>s("/my-memorials"),className:"w-full","data-testid":"button-go-back",children:[e.jsx(Sr,{className:"w-4 h-4 mr-2"}),"Back to My Memorials"]})})]})});const T=m.name||`${m.firstName} ${m.lastName}`;return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-purple-950 via-purple-900 to-purple-950",children:[e.jsx("header",{className:"border-b border-purple-700/50 bg-purple-950/80 backdrop-blur-sm",children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(O,{variant:"ghost",onClick:()=>s("/my-memorials"),className:"text-purple-200 hover:text-purple-100","data-testid":"button-back",children:[e.jsx(Sr,{className:"w-4 h-4 mr-2"}),"My Memorials"]}),e.jsx(O,{variant:"outline",onClick:()=>s(`/memorial/${m.inviteCode}`),"data-testid":"button-view-memorial",children:"View Memorial"})]})})}),e.jsxs("main",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h1",{className:"text-3xl font-serif text-purple-100 mb-2","data-testid":"text-memorial-name",children:["Manage Memorial: ",T]}),e.jsx("p",{className:"text-purple-300",children:"Manage QR codes, settings, and permissions for this memorial"})]}),e.jsxs(ba,{defaultValue:"qr-codes",className:"w-full",children:[e.jsxs(ra,{className:"bg-purple-900/50 border-purple-700/50",children:[e.jsxs(qt,{value:"qr-codes","data-testid":"tab-qr-codes",children:[e.jsx(or,{className:"w-4 h-4 mr-2"}),"QR Codes"]}),e.jsxs(qt,{value:"funeral-program","data-testid":"tab-funeral-program",children:[e.jsx(uo,{className:"w-4 h-4 mr-2"}),"Funeral Program"]}),e.jsxs(qt,{value:"settings","data-testid":"tab-settings",children:[e.jsx(E_,{className:"w-4 h-4 mr-2"}),"Settings"]}),e.jsxs(qt,{value:"scheduled-messages","data-testid":"tab-scheduled-messages",children:[e.jsx(Mr,{className:"w-4 h-4 mr-2"}),"Scheduled Messages"]}),e.jsxs(qt,{value:"admins","data-testid":"tab-admins",children:[e.jsx(Ms,{className:"w-4 h-4 mr-2"}),"Admins"]}),e.jsxs(qt,{value:"symbols","data-testid":"tab-symbols",children:[e.jsx(Bs,{className:"w-4 h-4 mr-2"}),"Symbols"]}),e.jsxs(qt,{value:"music","data-testid":"tab-music",children:[e.jsx(zn,{className:"w-4 h-4 mr-2"}),"Music"]}),e.jsxs(qt,{value:"slideshows","data-testid":"tab-slideshows",children:[e.jsx(_h,{className:"w-4 h-4 mr-2"}),"Slideshows"]}),e.jsxs(qt,{value:"video-condolences","data-testid":"tab-video-condolences",children:[e.jsx(ta,{className:"w-4 h-4 mr-2"}),"Video Messages"]})]}),e.jsx(Vt,{value:"qr-codes",className:"mt-6",children:e.jsx(Wfe,{memorialId:m.id,memorialName:T,inviteCode:m.inviteCode})}),e.jsx(Vt,{value:"funeral-program",className:"mt-6",children:e.jsxs($,{className:"bg-purple-900/50 border-purple-700/50",children:[e.jsxs(le,{children:[e.jsx(ge,{className:"text-purple-100",children:"Digital Funeral Program"}),e.jsx($e,{className:"text-purple-300",children:"Create a beautiful digital program for attendees to follow during the service"})]}),e.jsxs(V,{className:"space-y-4",children:[e.jsx("p",{className:"text-purple-200",children:"Design a comprehensive funeral program that includes:"}),e.jsxs("ul",{className:"list-disc list-inside text-purple-300 space-y-2 ml-4",children:[e.jsx("li",{children:"Service date, time, and location details"}),e.jsx("li",{children:"Order of service with hymns, readings, and eulogies"}),e.jsx("li",{children:"Family information and acknowledgments"}),e.jsx("li",{children:"Reception details for after the service"})]}),e.jsx("p",{className:"text-purple-300 text-sm",children:"Attendees can view the program on their phones or desktop during the service, making it easy to follow along without printing physical copies."}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsxs(O,{onClick:()=>s(`/memorials/${m.id}/program-edit`),"data-testid":"button-edit-program",children:[e.jsx(Un,{className:"w-4 h-4 mr-2"}),"Create/Edit Program"]}),e.jsxs(O,{variant:"outline",onClick:()=>s(`/memorial/${m.id}/program`),"data-testid":"button-preview-program",children:[e.jsx(uo,{className:"w-4 h-4 mr-2"}),"Preview Program"]})]})]})]})}),e.jsx(Vt,{value:"settings",className:"mt-6",children:e.jsxs($,{className:"bg-purple-900/50 border-purple-700/50",children:[e.jsxs(le,{children:[e.jsx(ge,{className:"text-purple-100",children:"Memorial Settings"}),e.jsx($e,{className:"text-purple-300",children:"Configure privacy and display settings"})]}),e.jsx(V,{children:e.jsx("p",{className:"text-purple-300",children:"Settings panel coming soon..."})})]})}),e.jsxs(Vt,{value:"scheduled-messages",className:"mt-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-serif text-purple-100",children:"Scheduled Messages"}),e.jsx("p",{className:"text-purple-300 mt-1",children:"Schedule heartfelt messages to loved ones for future milestones"})]}),e.jsxs(O,{onClick:E,"data-testid":"button-create-scheduled-message",children:[e.jsx(bs,{className:"w-4 h-4 mr-2"}),"Create Message"]})]}),e.jsx($,{className:"bg-gradient-to-r from-purple-900/40 to-purple-800/40 border-gold-500/30",children:e.jsx(V,{className:"py-4",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-10 h-10 rounded-full bg-gold-500/20 flex items-center justify-center",children:e.jsx(WC,{className:"w-5 h-5 text-gold-400"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-base font-semibold text-purple-100 mb-2",children:"Create Future Messages for Loved Ones"}),e.jsx("p",{className:"text-sm text-purple-300 leading-relaxed",children:"Write heartfelt messages today that will be automatically delivered to your loved ones on future occasions like birthdays, graduations, weddings, and anniversaries."})]})]})})}),h.length===0?e.jsx($,{className:"bg-purple-900/50 border-purple-700/50",children:e.jsxs(V,{className:"py-16 text-center",children:[e.jsx(Mr,{className:"w-16 h-16 mx-auto mb-4 text-gold-400"}),e.jsx("h3",{className:"text-xl font-semibold text-purple-100 mb-2",children:"No Scheduled Messages"}),e.jsx("p",{className:"text-purple-300 mb-6",children:"Create your first scheduled message to send love to your family on special occasions."})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:h.map(M=>e.jsx(Fw,{message:M,onEdit:P,onDelete:F=>_.mutate(F)},M.id))})]}),e.jsx(Os,{open:n,onOpenChange:a,children:e.jsxs(Ds,{className:"bg-purple-900 border-purple-700 text-purple-100 max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Is,{children:[e.jsxs(Rs,{className:"text-purple-100 flex items-center gap-2",children:[e.jsx(Un,{className:"w-5 h-5 text-gold-400"}),i?"Edit Scheduled Message":"Create Scheduled Message"]}),e.jsx(Lr,{className:"text-purple-300",children:"Schedule a heartfelt message to be sent to loved ones on special dates"})]}),!i&&e.jsx("div",{className:"bg-gradient-to-r from-purple-950/60 to-purple-800/40 border border-gold-500/20 rounded-lg p-4 mb-4",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 rounded-full bg-gold-500/20 flex items-center justify-center",children:e.jsx(WC,{className:"w-4 h-4 text-gold-400"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-semibold text-purple-100 mb-1",children:"Leave Your Legacy"}),e.jsx("p",{className:"text-xs text-purple-300 leading-relaxed",children:"Create messages that will be delivered at future milestones. Whether facing a terminal illness or simply planning ahead, you can be there for your children's graduations, your daughter's wedding, your son's first job, or any special occasion. Your voice, love, and guidance will reach them when they need it most."})]})]})}),e.jsx(Wr,{...p,children:e.jsxs("form",{onSubmit:p.handleSubmit(L),className:"space-y-6",children:[!i&&d&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(De,{className:"text-purple-100 text-base",children:"Start with a Template (Optional)"}),e.jsx(O,{type:"button",variant:"ghost",size:"sm",onClick:()=>u(!1),className:"text-purple-300",children:"Skip Templates"})]}),e.jsx("div",{className:"grid grid-cols-1 gap-2 max-h-60 overflow-y-auto p-1",children:O9(g).map(M=>e.jsx($,{className:`cursor-pointer border-purple-700/50 hover-elevate ${l===M.id?"bg-purple-800/50 border-gold-500/50":"bg-purple-950/30"}`,onClick:()=>v(M.id),"data-testid":`card-template-${M.id}`,children:e.jsxs(V,{className:"p-4",children:[e.jsx("h4",{className:"font-semibold text-purple-100 mb-1",children:M.name}),e.jsx("p",{className:"text-xs text-purple-300 line-clamp-2",children:M.description})]})},M.id))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-purple-100 flex items-center gap-2",children:[e.jsx(ds,{className:"w-4 h-4 text-gold-400"}),"Recipient Information"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(fe,{control:p.control,name:"recipientName",render:({field:M})=>e.jsxs(me,{children:[e.jsx(he,{className:"text-purple-100",children:"Recipient Name *"}),e.jsx(xe,{children:e.jsx(re,{...M,placeholder:"John Doe",className:"bg-purple-950/50 border-purple-700/50 text-purple-100","data-testid":"input-recipient-name"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:p.control,name:"recipientEmail",render:({field:M})=>e.jsxs(me,{children:[e.jsx(he,{className:"text-purple-100",children:"Recipient Email"}),e.jsx(xe,{children:e.jsx(re,{...M,type:"email",placeholder:"john@example.com",className:"bg-purple-950/50 border-purple-700/50 text-purple-100","data-testid":"input-recipient-email"})}),e.jsx(Qt,{className:"text-xs text-purple-400",children:"Optional - for email delivery"}),e.jsx(ye,{})]})})]})]}),e.jsx(ls,{className:"bg-purple-700/30"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-purple-100",children:"Event Details"}),e.jsx(fe,{control:p.control,name:"eventType",render:({field:M})=>e.jsxs(me,{children:[e.jsx(he,{className:"text-purple-100",children:"Event Type *"}),e.jsxs(Rt,{onValueChange:M.onChange,value:M.value,children:[e.jsx(xe,{children:e.jsx(Mt,{className:"bg-purple-950/50 border-purple-700/50 text-purple-100","data-testid":"select-event-type",children:e.jsx(Ft,{})})}),e.jsxs(Lt,{className:"bg-purple-900 border-purple-700",children:[e.jsx(te,{value:"birthday",children:"Birthday"}),e.jsx(te,{value:"graduation",children:"Graduation"}),e.jsx(te,{value:"wedding",children:"Wedding"}),e.jsx(te,{value:"anniversary",children:"Anniversary"}),e.jsx(te,{value:"baby_birth",children:"Baby Birth"}),e.jsx(te,{value:"mother_day",children:"Mother's Day"}),e.jsx(te,{value:"father_day",children:"Father's Day"}),e.jsx(te,{value:"christmas",children:"Christmas"}),e.jsx(te,{value:"new_year",children:"New Year"}),e.jsx(te,{value:"holiday",children:"Holiday"}),e.jsx(te,{value:"custom",children:"Custom Event"})]})]}),e.jsx(ye,{})]})}),g==="custom"&&e.jsx(fe,{control:p.control,name:"customEventName",render:({field:M})=>e.jsxs(me,{children:[e.jsx(he,{className:"text-purple-100",children:"Custom Event Name"}),e.jsx(xe,{children:e.jsx(re,{...M,placeholder:"e.g., First Day of College",className:"bg-purple-950/50 border-purple-700/50 text-purple-100","data-testid":"input-custom-event-name"})}),e.jsx(ye,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(fe,{control:p.control,name:"eventDate",render:({field:M})=>e.jsxs(me,{children:[e.jsx(he,{className:"text-purple-100",children:"Event Date *"}),e.jsx(xe,{children:e.jsx(re,{...M,type:"date",className:"bg-purple-950/50 border-purple-700/50 text-purple-100","data-testid":"input-event-date"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:p.control,name:"sendTime",render:({field:M})=>e.jsxs(me,{children:[e.jsx(he,{className:"text-purple-100",children:"Send Time"}),e.jsx(xe,{children:e.jsx(re,{...M,type:"time",className:"bg-purple-950/50 border-purple-700/50 text-purple-100","data-testid":"input-send-time"})}),e.jsx(Qt,{className:"text-xs text-purple-400",children:"Time of day to deliver the message"}),e.jsx(ye,{})]})})]}),e.jsx(fe,{control:p.control,name:"isRecurring",render:({field:M})=>e.jsxs(me,{className:"flex items-center justify-between gap-4 p-4 rounded-lg bg-purple-950/30 border border-purple-700/30",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs(he,{className:"text-purple-100 font-semibold flex items-center gap-2",children:[e.jsx(Ox,{className:"w-4 h-4 text-gold-400"}),"Recurring Message"]}),e.jsx(Qt,{className:"text-xs text-purple-400 mt-1",children:"Send this message annually on the same date"})]}),e.jsx(xe,{children:e.jsx(ir,{checked:M.value,onCheckedChange:M.onChange,"data-testid":"switch-recurring"})})]})}),y&&e.jsx(fe,{control:p.control,name:"recurrenceInterval",render:({field:M})=>e.jsxs(me,{children:[e.jsx(he,{className:"text-purple-100",children:"Recurrence Frequency"}),e.jsxs(Rt,{onValueChange:M.onChange,value:M.value,children:[e.jsx(xe,{children:e.jsx(Mt,{className:"bg-purple-950/50 border-purple-700/50 text-purple-100","data-testid":"select-recurrence",children:e.jsx(Ft,{placeholder:"Select frequency"})})}),e.jsxs(Lt,{className:"bg-purple-900 border-purple-700",children:[e.jsx(te,{value:"yearly",children:"Yearly"}),e.jsx(te,{value:"monthly",children:"Monthly"})]})]}),e.jsx(ye,{})]})})]}),e.jsx(ls,{className:"bg-purple-700/30"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-purple-100",children:"Message Content"}),e.jsx(fe,{control:p.control,name:"message",render:({field:M})=>{var F;return e.jsxs(me,{children:[e.jsx(he,{className:"text-purple-100",children:"Your Message *"}),e.jsx(xe,{children:e.jsx(Gt,{...M,rows:8,placeholder:"Write your heartfelt message here...",className:"bg-purple-950/50 border-purple-700/50 text-purple-100 resize-none","data-testid":"input-message-text"})}),e.jsxs(Qt,{className:"text-xs text-purple-400",children:[((F=M.value)==null?void 0:F.length)||0," characters"]}),e.jsx(ye,{})]})}}),e.jsx(fe,{control:p.control,name:"mediaUrl",render:({field:M})=>e.jsxs(me,{children:[e.jsx(he,{className:"text-purple-100",children:"Media URL"}),e.jsx(xe,{children:e.jsx(re,{...M,placeholder:"https://example.com/video.mp4",className:"bg-purple-950/50 border-purple-700/50 text-purple-100","data-testid":"input-media-url-message"})}),e.jsx(Qt,{className:"text-xs text-purple-400",children:"Optional - Add a video or image to your message"}),e.jsx(ye,{})]})})]}),e.jsx(ls,{className:"bg-purple-700/30"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-purple-100",children:"Advanced Settings"}),e.jsx(fe,{control:p.control,name:"status",render:({field:M})=>e.jsxs(me,{children:[e.jsx(he,{className:"text-purple-100",children:"Status"}),e.jsxs(Rt,{onValueChange:M.onChange,value:M.value,children:[e.jsx(xe,{children:e.jsx(Mt,{className:"bg-purple-950/50 border-purple-700/50 text-purple-100","data-testid":"select-status",children:e.jsx(Ft,{})})}),e.jsxs(Lt,{className:"bg-purple-900 border-purple-700",children:[e.jsx(te,{value:"draft",children:" Draft (Save without scheduling)"}),e.jsx(te,{value:"pending",children:" Pending (Schedule for delivery)"})]})]}),e.jsx(Qt,{className:"text-xs text-purple-400",children:"Drafts won't be sent until you change status to Pending"}),e.jsx(ye,{})]})})]}),e.jsxs(Ra,{className:"gap-2",children:[e.jsx(O,{type:"button",variant:"outline",onClick:()=>a(!1),"data-testid":"button-cancel-message",children:"Cancel"}),e.jsx(O,{type:"submit",disabled:j.isPending||w.isPending,"data-testid":"button-save-message",children:j.isPending||w.isPending?"Saving...":i?"Update Message":"Create Message"})]})]})})]})})]}),e.jsx(Vt,{value:"admins",className:"mt-6",children:e.jsxs($,{className:"bg-purple-900/50 border-purple-700/50",children:[e.jsxs(le,{children:[e.jsx(ge,{className:"text-purple-100",children:"Memorial Administrators"}),e.jsx($e,{className:"text-purple-300",children:"Manage who can help administer this memorial"})]}),e.jsx(V,{children:e.jsx("p",{className:"text-purple-300",children:"Admin management coming soon..."})})]})}),e.jsx(Vt,{value:"symbols",className:"mt-6",children:e.jsxs($,{className:"bg-purple-900/50 border-purple-700/50",children:[e.jsxs(le,{children:[e.jsxs(ge,{className:"text-purple-100 flex items-center gap-2",children:[e.jsx(Bs,{className:"w-5 h-5 text-gold-400"}),"Religious & Spiritual Symbols"]}),e.jsx($e,{className:"text-purple-300",children:"Add meaningful religious and spiritual symbols to honor their faith and beliefs"})]}),e.jsx(V,{children:e.jsx(B9,{memorialId:m.id,canEdit:!0})})]})}),e.jsx(Vt,{value:"music",className:"mt-6",children:e.jsxs($,{className:"bg-purple-900/50 border-purple-700/50",children:[e.jsxs(le,{children:[e.jsxs(ge,{className:"text-purple-100 flex items-center gap-2",children:[e.jsx(zn,{className:"w-5 h-5 text-gold-400"}),"Music Playlists"]}),e.jsx($e,{className:"text-purple-300",children:"Create playlists of meaningful songs for slideshows and memorial pages"})]}),e.jsx(V,{children:e.jsx(Kfe,{memorialId:m.id,canEdit:!0})})]})}),e.jsx(Vt,{value:"slideshows",className:"mt-6",children:e.jsx(xpe,{memorialId:m.id})}),e.jsx(Vt,{value:"video-condolences",className:"mt-6",children:e.jsxs($,{className:"bg-purple-900/50 border-purple-700/50",children:[e.jsxs(le,{children:[e.jsxs(ge,{className:"text-purple-100 flex items-center gap-2",children:[e.jsx(ta,{className:"w-5 h-5 text-gold-400"}),"Video Condolences"]}),e.jsx($e,{className:"text-purple-300",children:"Manage video messages from friends and family"})]}),e.jsx(V,{children:e.jsx(o$,{memorialId:m.id,canApprove:!0})})]})})]})]})]})}function xpe({memorialId:t}){const[s,r]=N.useState(!1),[n,a]=N.useState(null),[i,o]=N.useState(!1),{toast:l}=Ht(),{data:c=[]}=Xe({queryKey:[`/api/memorials/${t}/slideshows`]}),d=yt({mutationFn:async u=>pt("DELETE",`/api/slideshows/${u}`),onSuccess:()=>{xt.invalidateQueries({queryKey:[`/api/memorials/${t}/slideshows`]}),l({title:"Slideshow Deleted",description:"The slideshow has been removed."})}});return e.jsxs(e.Fragment,{children:[e.jsxs($,{className:"bg-purple-900/50 border-purple-700/50",children:[e.jsx(le,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(ge,{className:"text-purple-100 flex items-center gap-2",children:[e.jsx(_h,{className:"w-5 h-5 text-gold-400"}),"Memorial Slideshows"]}),e.jsx($e,{className:"text-purple-300",children:"Create beautiful photo slideshows with music to celebrate their life"})]}),e.jsxs(O,{onClick:()=>r(!0),"data-testid":"button-create-slideshow",children:[e.jsx(bs,{className:"w-4 h-4 mr-2"}),"Create Slideshow"]})]})}),e.jsx(V,{children:c.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(_h,{className:"w-16 h-16 mx-auto mb-4 text-gold-400 opacity-50"}),e.jsx("h3",{className:"text-xl font-semibold text-purple-100 mb-2",children:"No Slideshows Yet"}),e.jsx("p",{className:"text-purple-300 mb-6",children:"Create your first slideshow to share cherished memories through photos and music"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:c.map(u=>{var m;return e.jsxs($,{className:"bg-purple-950/30 border-purple-700/50",children:[e.jsx(le,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx(ge,{className:"text-purple-100 text-lg",children:u.title}),u.description&&e.jsx($e,{className:"text-purple-300",children:u.description})]}),e.jsxs(ze,{variant:"secondary",children:[((m=u.photoIds)==null?void 0:m.length)||0," photos"]})]})}),e.jsxs(V,{children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-purple-300 mb-4",children:[e.jsxs("span",{children:[u.transitionType," transitions"]}),e.jsx(ls,{orientation:"vertical",className:"h-4"}),e.jsxs("span",{children:[u.photoDuration,"s per photo"]}),u.playlistId&&e.jsxs(e.Fragment,{children:[e.jsx(ls,{orientation:"vertical",className:"h-4"}),e.jsx(zn,{className:"w-3 h-3"}),e.jsx("span",{children:"Music"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(O,{size:"sm",onClick:()=>{a(u),o(!0)},"data-testid":`button-play-${u.id}`,children:[e.jsx(_h,{className:"w-4 h-4 mr-2"}),"Play"]}),e.jsx(O,{size:"sm",variant:"outline",onClick:()=>{a(u),r(!0)},"data-testid":`button-edit-slideshow-${u.id}`,children:"Edit"}),e.jsx(O,{size:"sm",variant:"ghost",onClick:()=>{confirm("Are you sure you want to delete this slideshow?")&&d.mutate(u.id)},"data-testid":`button-delete-slideshow-${u.id}`,children:"Delete"})]})]})]},u.id)})})})]}),e.jsx(hpe,{memorialId:t,isOpen:s,onClose:()=>{r(!1),a(null)},editingSlideshow:n&&!i?n:void 0}),i&&n&&e.jsx(Os,{open:i,onOpenChange:o,children:e.jsx(Ds,{className:"max-w-4xl p-0 bg-black",children:e.jsx(W9,{slideshow:n,memorialId:t,onClose:()=>{o(!1),a(null)}})})})]})}function gpe(){const{memorialId:t}=Ba(),{data:s,isLoading:r,error:n}=Xe({queryKey:["/api/memorials",t]});if(r)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[hsl(280,60%,15%)] via-[hsl(280,50%,10%)] to-[hsl(280,60%,5%)] flex items-center justify-center",children:e.jsx("div",{className:"text-center space-y-4",children:e.jsx("div",{className:"animate-pulse text-4xl",children:"Loading..."})})});if(n||!s)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[hsl(280,60%,15%)] via-[hsl(280,50%,10%)] to-[hsl(280,60%,5%)] flex items-center justify-center p-4",children:e.jsxs($,{className:"max-w-md bg-card/40 backdrop-blur-sm border-white/10",children:[e.jsx(le,{children:e.jsx(ge,{children:"Memorial Not Found"})}),e.jsxs(V,{className:"space-y-4",children:[e.jsx("p",{className:"text-muted-foreground",children:"This memorial could not be found or has been removed."}),e.jsx(O,{asChild:!0,className:"w-full","data-testid":"button-back-home",children:e.jsxs("a",{href:"/",children:[e.jsx(Sr,{className:"h-4 w-4 mr-2"}),"Back to Home"]})})]})]})});const a=[s.deceasedFirstName,s.deceasedMiddleName,s.deceasedLastName].filter(Boolean).join(" "),o=((l,c)=>{const d=new Date(l),u=new Date(c);let m=u.getFullYear()-d.getFullYear();const f=u.getMonth()-d.getMonth();return(f<0||f===0&&u.getDate()<d.getDate())&&m--,m})(s.birthDate,s.deathDate);return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[hsl(280,60%,15%)] via-[hsl(280,50%,10%)] to-[hsl(280,60%,5%)]",children:e.jsxs("div",{className:"container max-w-4xl mx-auto p-4 py-8 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(O,{variant:"ghost",asChild:!0,className:"gap-2","data-testid":"button-back",children:e.jsxs("a",{href:"/",children:[e.jsx(Sr,{className:"h-4 w-4"}),"Back"]})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(GO,{memorialId:s.id,deceasedName:a}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Public Obituary"})]})]}),e.jsx($,{className:"bg-card/40 backdrop-blur-sm border-white/10",children:e.jsxs(V,{className:"pt-6 space-y-6",children:[s.photoUrl&&e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"relative w-48 h-48 rounded-full overflow-hidden border-4 border-[hsl(45,80%,55%)]",children:e.jsx("img",{src:s.photoUrl,alt:a,className:"w-full h-full object-cover","data-testid":"img-deceased-photo"})})}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("h1",{className:"text-4xl font-serif font-bold text-[hsl(45,80%,55%)]","data-testid":"text-deceased-name",children:a}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-lg text-muted-foreground",children:[e.jsx(ds,{className:"h-4 w-4"}),e.jsxs("span",{"data-testid":"text-life-dates",children:[Pr(new Date(s.birthDate),"MMMM d, yyyy")," -"," ",Pr(new Date(s.deathDate),"MMMM d, yyyy")]})]}),e.jsxs("p",{className:"text-muted-foreground","data-testid":"text-age",children:["Age ",o]})]}),e.jsx(ls,{className:"bg-white/10"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[s.birthplace&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-muted-foreground",children:"Born in"}),e.jsxs("div",{className:"flex items-center gap-2","data-testid":"text-birthplace",children:[e.jsx(tr,{className:"h-4 w-4"}),s.birthplace]})]}),s.residence&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-muted-foreground",children:"Resided in"}),e.jsxs("div",{className:"flex items-center gap-2","data-testid":"text-residence",children:[e.jsx(tr,{className:"h-4 w-4"}),s.residence]})]})]}),s.obituary&&e.jsxs(e.Fragment,{children:[e.jsx(ls,{className:"bg-white/10"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-serif font-semibold",children:"Obituary"}),e.jsx("div",{className:"prose prose-invert max-w-none text-foreground/90 whitespace-pre-wrap leading-relaxed","data-testid":"text-obituary",children:s.obituary})]})]}),e.jsx(ls,{className:"bg-white/10"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-serif font-semibold text-center",children:"Express Your Condolences"}),e.jsx($9,{memorialId:s.id})]}),e.jsx(ls,{className:"bg-white/10"}),e.jsxs("div",{className:"bg-background/20 rounded-lg p-6 text-center space-y-4 border border-white/10",children:[e.jsx(_t,{className:"h-12 w-12 mx-auto text-[hsl(45,80%,55%)]"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"View Full Memorial"}),e.jsx("p",{className:"text-sm text-muted-foreground max-w-md mx-auto",children:"Access photos, memories, fundraisers, and more with an invite code from the family."})]}),e.jsx(O,{asChild:!0,size:"lg",className:"gap-2","data-testid":"button-view-full-memorial",children:e.jsx("a",{href:`/?inviteCode=${s.id}`,children:"View Full Memorial"})})]})]})}),e.jsx("div",{className:"text-center text-sm text-muted-foreground",children:e.jsxs("p",{children:["Powered by"," ",e.jsx("a",{href:"/",className:"text-[hsl(45,80%,55%)] hover:underline",children:"Opictuary"})," ","- Preserving memories with dignity"]})})]})})}const vpe=[{value:"hymn",label:"Hymn/Song"},{value:"reading",label:"Scripture Reading"},{value:"prayer",label:"Prayer"},{value:"eulogy",label:"Eulogy/Tribute"},{value:"music",label:"Musical Selection"},{value:"poem",label:"Poem"},{value:"tribute",label:"Video Tribute"},{value:"other",label:"Other"}];function ype(t){return t?/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/.test(t):!0}function jpe(t){const s=t.filter(r=>{var n;return(n=r.title)==null?void 0:n.trim()}).map(r=>{var n;return(n=r.title)==null?void 0:n.trim().toLowerCase()});return s.length!==new Set(s).size}function bpe(t,s){if(t.serviceTime&&!ype(t.serviceTime))return"Service time must be in HH:MM format (e.g., 14:00)";if(t.serviceDate){const r=new Date(t.serviceDate),n=new Date;if(n.setFullYear(n.getFullYear()-1),r<n)return"Service date seems unusually far in the past. Please verify."}return jpe(s)?"You have duplicate items with the same title. Please make titles unique.":null}function Npe(){const{id:t}=Ba(),[,s]=ja(),{toast:r}=Ht(),[n,a]=N.useState({}),[i,o]=N.useState([]),[l,c]=N.useState(null),{data:d}=Xe({queryKey:[`/api/memorials/${t}`],enabled:!!t}),{data:u,isLoading:m}=Xe({queryKey:[`/api/memorials/${t}/funeral-program`],enabled:!!t,retry:!1}),{data:f}=Xe({queryKey:[`/api/funeral-programs/${u==null?void 0:u.id}/items`],enabled:!!(u!=null&&u.id)});N.useEffect(()=>{u&&a(u)},[u]),N.useEffect(()=>{f&&o(f)},[f]);const h=yt({mutationFn:async _=>await(u?await pt("PATCH",`/api/memorials/${t}/funeral-program`,_):await pt("POST",`/api/memorials/${t}/funeral-program`,_)).json(),onSuccess:()=>{xt.invalidateQueries({queryKey:[`/api/memorials/${t}/funeral-program`]}),r({title:"Success",description:"Funeral program saved successfully"})},onError:_=>{r({title:"Error",description:_.message||"Failed to save funeral program",variant:"destructive"})}}),p=yt({mutationFn:async _=>{f&&await Promise.all(f.map(E=>pt("DELETE",`/api/program-items/${E.id}`,{})));const P=i.map((E,L)=>{const T={programId:_,itemType:E.itemType,title:E.title,performedBy:E.performedBy||null,duration:E.duration||null,content:E.content||null,description:E.description||null,orderIndex:L};return pt("POST",`/api/funeral-programs/${_}/items`,T)});return await Promise.all(P)},onSuccess:()=>{xt.invalidateQueries({queryKey:[`/api/funeral-programs/${u==null?void 0:u.id}/items`]}),r({title:"Success",description:"Order of service saved successfully"})},onError:_=>{r({title:"Error",description:_.message||"Failed to save order of service",variant:"destructive"})}}),g=async()=>{const _=bpe(n,i);if(_){c(_),r({title:"Validation Error",description:_,variant:"destructive"});return}c(null);const P=await h.mutateAsync(n);i.length>0&&P.id&&await p.mutateAsync(P.id)},y=()=>{o([...i,{itemType:"hymn",title:"",orderIndex:i.length}])},v=_=>{o(i.filter((P,E)=>E!==_))},j=(_,P)=>{const E=[...i];E[_]={...E[_],...P},o(E)},w=(_,P)=>{if(P==="up"&&_>0){const E=[...i];[E[_-1],E[_]]=[E[_],E[_-1]],o(E)}else if(P==="down"&&_<i.length-1){const E=[...i];[E[_],E[_+1]]=[E[_+1],E[_]],o(E)}};return m?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"animate-pulse",children:"Loading program editor..."})}):e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("header",{className:"border-b bg-card",children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(O,{variant:"ghost",size:"icon",onClick:()=>s(`/memorials/${t}/manage`),"data-testid":"button-back",children:e.jsx(Sr,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-serif font-bold text-foreground","data-testid":"text-page-title",children:"Edit Funeral Program"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:d==null?void 0:d.name})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(O,{variant:"outline",onClick:()=>s(`/memorial/${t}/program`),"data-testid":"button-preview",children:[e.jsx(Ei,{className:"w-4 h-4 mr-2"}),"Preview"]}),e.jsxs(O,{onClick:g,disabled:h.isPending||p.isPending,"data-testid":"button-save",children:[e.jsx(P_,{className:"w-4 h-4 mr-2"}),h.isPending||p.isPending?"Saving...":"Save Program"]})]})]})})}),e.jsx("div",{className:"container mx-auto px-4 py-8 max-w-5xl",children:e.jsxs("div",{className:"grid gap-6",children:[l&&e.jsxs(X4,{variant:"destructive","data-testid":"alert-validation-error",children:[e.jsx(bm,{className:"h-4 w-4"}),e.jsx(J4,{children:l})]}),e.jsxs($,{children:[e.jsxs(le,{children:[e.jsx(ge,{children:"Service Information"}),e.jsx($e,{children:"When and where will the service be held?"})]}),e.jsxs(V,{className:"grid gap-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"service-name",children:"Service Type"}),e.jsx(re,{id:"service-name",placeholder:"Celebration of Life",value:n.serviceName||"",onChange:_=>a({...n,serviceName:_.target.value}),"data-testid":"input-service-name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"service-date",children:"Date"}),e.jsx(re,{id:"service-date",type:"date",value:n.serviceDate||"",onChange:_=>a({...n,serviceDate:_.target.value}),"data-testid":"input-service-date"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"service-time",children:"Time"}),e.jsx(re,{id:"service-time",type:"time",value:n.serviceTime||"",onChange:_=>a({...n,serviceTime:_.target.value}),"data-testid":"input-service-time"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"service-location",children:"Location Name"}),e.jsx(re,{id:"service-location",placeholder:"First Baptist Church",value:n.serviceLocation||"",onChange:_=>a({...n,serviceLocation:_.target.value}),"data-testid":"input-service-location"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"service-address",children:"Address"}),e.jsx(re,{id:"service-address",placeholder:"123 Main Street, City, State 12345",value:n.serviceAddress||"",onChange:_=>a({...n,serviceAddress:_.target.value}),"data-testid":"input-service-address"})]})]})]}),e.jsxs($,{children:[e.jsxs(le,{children:[e.jsx(ge,{children:"Messages"}),e.jsx($e,{children:"Opening and closing words for the program"})]}),e.jsxs(V,{className:"grid gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"welcome-message",children:"Welcome Message"}),e.jsx(Gt,{id:"welcome-message",placeholder:"Thank you for joining us as we celebrate the life of...",value:n.welcomeMessage||"",onChange:_=>a({...n,welcomeMessage:_.target.value}),rows:3,"data-testid":"input-welcome-message"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"closing-message",children:"Closing Message"}),e.jsx(Gt,{id:"closing-message",placeholder:"The family would like to thank everyone for their love and support...",value:n.closingMessage||"",onChange:_=>a({...n,closingMessage:_.target.value}),rows:3,"data-testid":"input-closing-message"})]})]})]}),e.jsxs($,{children:[e.jsxs(le,{children:[e.jsx(ge,{children:"Order of Service"}),e.jsx($e,{children:"Plan the flow of the memorial service"})]}),e.jsxs(V,{className:"space-y-4",children:[i.map((_,P)=>e.jsx($,{className:"p-4",children:e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(O,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>w(P,"up"),disabled:P===0,"data-testid":`button-move-up-${P}`,children:e.jsx(uw,{className:"w-3 h-3"})}),e.jsx(O,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>w(P,"down"),disabled:P===i.length-1,"data-testid":`button-move-down-${P}`,children:e.jsx(uw,{className:"w-3 h-3"})})]}),e.jsxs("div",{className:"flex-1 grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{children:"Type"}),e.jsxs(Rt,{value:_.itemType||"hymn",onValueChange:E=>j(P,{itemType:E}),children:[e.jsx(Mt,{"data-testid":`select-item-type-${P}`,children:e.jsx(Ft,{})}),e.jsx(Lt,{children:vpe.map(E=>e.jsx(te,{value:E.value,children:E.label},E.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{children:"Title"}),e.jsx(re,{placeholder:"Amazing Grace",value:_.title||"",onChange:E=>j(P,{title:E.target.value}),"data-testid":`input-item-title-${P}`})]})]}),e.jsx(O,{variant:"ghost",size:"icon",onClick:()=>v(P),"data-testid":`button-remove-item-${P}`,children:e.jsx(jc,{className:"w-4 h-4 text-destructive"})})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{children:"Performed By"}),e.jsx(re,{placeholder:"Church Choir",value:_.performedBy||"",onChange:E=>j(P,{performedBy:E.target.value}),"data-testid":`input-performed-by-${P}`})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{children:"Duration"}),e.jsx(re,{placeholder:"5 minutes",value:_.duration||"",onChange:E=>j(P,{duration:E.target.value}),"data-testid":`input-duration-${P}`})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{children:"Description/Content"}),e.jsx(Gt,{placeholder:"Add lyrics, scripture text, or additional details...",value:_.content||"",onChange:E=>j(P,{content:E.target.value}),rows:2,"data-testid":`input-item-content-${P}`})]})]})},P)),e.jsxs(O,{variant:"outline",onClick:y,className:"w-full","data-testid":"button-add-item",children:[e.jsx(bs,{className:"w-4 h-4 mr-2"}),"Add Service Item"]})]})]}),e.jsxs($,{children:[e.jsxs(le,{children:[e.jsx(ge,{children:"Family Information"}),e.jsx($e,{children:"List family members and pallbearers"})]}),e.jsxs(V,{className:"grid gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"survived-by",children:"Survived By"}),e.jsx(Gt,{id:"survived-by",placeholder:`Spouse: Jane Doe
Children: John Doe Jr., Sarah Smith
Grandchildren: 5`,value:n.survivedBy||"",onChange:_=>a({...n,survivedBy:_.target.value}),rows:4,"data-testid":"input-survived-by"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"predeceased",children:"Predeceased By"}),e.jsx(Gt,{id:"predeceased",placeholder:"Parents: Robert and Mary Doe",value:n.predeceased||"",onChange:_=>a({...n,predeceased:_.target.value}),rows:2,"data-testid":"input-predeceased"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"pallbearers",children:"Pallbearers"}),e.jsx(Gt,{id:"pallbearers",placeholder:`John Smith
Michael Johnson
David Williams`,value:n.pallbearers||"",onChange:_=>a({...n,pallbearers:_.target.value}),rows:3,"data-testid":"input-pallbearers"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"honorary-pallbearers",children:"Honorary Pallbearers"}),e.jsx(Gt,{id:"honorary-pallbearers",placeholder:`Robert Brown
Thomas Davis`,value:n.honoraryPallbearers||"",onChange:_=>a({...n,honoraryPallbearers:_.target.value}),rows:3,"data-testid":"input-honorary-pallbearers"})]})]})]})]}),e.jsxs($,{children:[e.jsxs(le,{children:[e.jsx(ge,{children:"Reception Information"}),e.jsx($e,{children:"Details about the gathering after the service"})]}),e.jsxs(V,{className:"grid gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"repast-location",children:"Location Name"}),e.jsx(re,{id:"repast-location",placeholder:"Church Fellowship Hall",value:n.repastLocation||"",onChange:_=>a({...n,repastLocation:_.target.value}),"data-testid":"input-repast-location"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"repast-address",children:"Address"}),e.jsx(re,{id:"repast-address",placeholder:"123 Main Street, City, State 12345",value:n.repastAddress||"",onChange:_=>a({...n,repastAddress:_.target.value}),"data-testid":"input-repast-address"})]})]})]}),e.jsxs($,{children:[e.jsxs(le,{children:[e.jsx(ge,{children:"Acknowledgments"}),e.jsx($e,{children:"Thank everyone who helped during this time"})]}),e.jsxs(V,{className:"grid gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"acknowledgments",children:"General Acknowledgments"}),e.jsx(Gt,{id:"acknowledgments",placeholder:"The family wishes to express their sincere gratitude...",value:n.acknowledgments||"",onChange:_=>a({...n,acknowledgments:_.target.value}),rows:4,"data-testid":"input-acknowledgments"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"special-thanks",children:"Special Thanks"}),e.jsx(Gt,{id:"special-thanks",placeholder:"Special thanks to Dr. Smith and the nursing staff...",value:n.specialThanks||"",onChange:_=>a({...n,specialThanks:_.target.value}),rows:3,"data-testid":"input-special-thanks"})]})]})]})]})})]})}const wpe={hymn:"Hymn",reading:"Scripture Reading",prayer:"Prayer",eulogy:"Eulogy",music:"Musical Selection",poem:"Poem",tribute:"Video Tribute",other:"Special"};function _pe(){const{id:t}=Ba(),[,s]=ja(),{data:r,isLoading:n}=Xe({queryKey:[`/api/memorials/${t}`],enabled:!!t}),{data:a,isLoading:i}=Xe({queryKey:[`/api/memorials/${t}/funeral-program`],enabled:!!t}),{data:o}=Xe({queryKey:[`/api/funeral-programs/${a==null?void 0:a.id}/items`],enabled:!!(a!=null&&a.id)});if(n||i)return e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsx("div",{className:"animate-pulse text-muted-foreground",children:"Loading program..."})});if(!r||!a)return e.jsxs("div",{className:"min-h-screen bg-background flex flex-col items-center justify-center p-4",children:[e.jsx("h2",{className:"text-2xl font-serif font-bold mb-4",children:"Program Not Available"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"A funeral program has not been created for this memorial yet."}),e.jsx(O,{onClick:()=>s(`/memorial/${t}`),children:"Back to Memorial"})]});const c=r.birthDate?new Date(r.birthDate).getFullYear():"",d=r.deathDate?new Date(r.deathDate).getFullYear():"";return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-background to-muted/20",children:[e.jsxs("div",{className:"sticky top-0 z-10 bg-card border-b px-4 py-3 flex items-center gap-3 md:hidden",children:[e.jsx(O,{variant:"ghost",size:"icon",onClick:()=>s(`/memorial/${t}`),"data-testid":"button-back",children:e.jsx(Sr,{className:"w-5 h-5"})}),e.jsx("div",{className:"flex-1",children:e.jsx("h2",{className:"font-serif font-semibold text-foreground",children:"Funeral Program"})})]}),e.jsxs("div",{className:"container mx-auto px-4 py-6 md:py-12 max-w-4xl",children:[e.jsx($,{className:"mb-6 overflow-hidden",children:e.jsx("div",{className:"h-48 md:h-64 relative bg-cover bg-center",style:{backgroundImage:r.backgroundImage?`linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.3)), url(${r.backgroundImage})`:"linear-gradient(135deg, hsl(280 70% 20%), hsl(280 60% 30%))"},children:e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-white p-6 text-center",children:[e.jsx(_t,{className:"w-12 h-12 md:w-16 md:h-16 mb-4 text-gold"}),e.jsx("h1",{className:"text-3xl md:text-5xl font-serif font-bold mb-2","data-testid":"text-memorial-name",children:r.name}),e.jsxs("p",{className:"text-xl md:text-2xl font-light","data-testid":"text-memorial-dates",children:[c,"  ",d]}),e.jsx("div",{className:"mt-4 px-6 py-2 bg-white/20 backdrop-blur-sm rounded-full",children:e.jsx("p",{className:"text-sm md:text-base font-medium",children:a.serviceName||"Celebration of Life"})})]})})}),e.jsx($,{className:"mb-6",children:e.jsxs(V,{className:"p-6",children:[e.jsx("h2",{className:"text-xl md:text-2xl font-serif font-bold text-foreground mb-6 text-center",children:"Service Information"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 md:gap-6",children:[a.serviceDate&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ds,{className:"w-5 h-5 text-primary mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground",children:"Date"}),e.jsx("p",{className:"text-muted-foreground",children:new Date(a.serviceDate).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]}),a.serviceTime&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Mr,{className:"w-5 h-5 text-primary mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground",children:"Time"}),e.jsx("p",{className:"text-muted-foreground",children:new Date(`2000-01-01T${a.serviceTime}`).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})})]})]}),a.serviceLocation&&e.jsxs("div",{className:"flex items-start gap-3 md:col-span-2",children:[e.jsx(tr,{className:"w-5 h-5 text-primary mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground",children:a.serviceLocation}),a.serviceAddress&&e.jsx("p",{className:"text-muted-foreground",children:a.serviceAddress})]})]})]}),a.welcomeMessage&&e.jsxs(e.Fragment,{children:[e.jsx(ls,{className:"my-6"}),e.jsx("div",{className:"prose dark:prose-invert max-w-none",children:e.jsx("p",{className:"text-muted-foreground italic text-center md:text-left whitespace-pre-wrap",children:a.welcomeMessage})})]})]})}),o&&o.length>0&&e.jsx($,{className:"mb-6",children:e.jsxs(V,{className:"p-6",children:[e.jsx("h2",{className:"text-xl md:text-2xl font-serif font-bold text-foreground mb-6 text-center",children:"Order of Service"}),e.jsx("div",{className:"space-y-6",children:o.map((u,m)=>e.jsxs("div",{className:"border-l-2 border-primary pl-4 py-2",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"inline-block px-2 py-0.5 bg-primary/10 text-primary text-xs font-medium rounded",children:wpe[u.itemType]||u.itemType}),e.jsx("h3",{className:"font-serif font-semibold text-foreground text-lg","data-testid":`text-item-title-${m}`,children:u.title})]}),u.performedBy&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:u.performedBy})]}),u.duration&&e.jsx("span",{className:"text-xs text-muted-foreground whitespace-nowrap",children:u.duration})]}),u.description&&e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:u.description}),u.content&&e.jsx("div",{className:"mt-3 p-3 bg-muted/30 rounded text-sm",children:e.jsx("p",{className:"whitespace-pre-wrap italic text-muted-foreground",children:u.content})})]},u.id))})]})}),r.biography&&e.jsx($,{className:"mb-6",children:e.jsxs(V,{className:"p-6",children:[e.jsx("h2",{className:"text-xl md:text-2xl font-serif font-bold text-foreground mb-4 text-center",children:"Life Celebration"}),e.jsx("div",{className:"prose dark:prose-invert max-w-none",children:e.jsx("p",{className:"text-muted-foreground whitespace-pre-wrap leading-relaxed",children:r.biography})})]})}),(a.survivedBy||a.predeceased)&&e.jsx($,{className:"mb-6",children:e.jsxs(V,{className:"p-6",children:[e.jsxs("h2",{className:"text-xl md:text-2xl font-serif font-bold text-foreground mb-6 text-center",children:[e.jsx(Ms,{className:"w-6 h-6 inline-block mr-2 mb-1"}),"Family"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[a.survivedBy&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground mb-3",children:"Survived By"}),e.jsx("p",{className:"text-muted-foreground whitespace-pre-wrap text-sm leading-relaxed",children:a.survivedBy})]}),a.predeceased&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground mb-3",children:"Predeceased By"}),e.jsx("p",{className:"text-muted-foreground whitespace-pre-wrap text-sm leading-relaxed",children:a.predeceased})]})]})]})}),(a.pallbearers||a.honoraryPallbearers)&&e.jsx($,{className:"mb-6",children:e.jsx(V,{className:"p-6",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[a.pallbearers&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-serif font-semibold text-foreground mb-3",children:"Pallbearers"}),e.jsx("p",{className:"text-muted-foreground whitespace-pre-wrap text-sm leading-relaxed",children:a.pallbearers})]}),a.honoraryPallbearers&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-serif font-semibold text-foreground mb-3",children:"Honorary Pallbearers"}),e.jsx("p",{className:"text-muted-foreground whitespace-pre-wrap text-sm leading-relaxed",children:a.honoraryPallbearers})]})]})})}),a.repastLocation&&e.jsx($,{className:"mb-6",children:e.jsxs(V,{className:"p-6",children:[e.jsx("h2",{className:"text-xl md:text-2xl font-serif font-bold text-foreground mb-4 text-center",children:"Reception"}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(tr,{className:"w-5 h-5 text-primary mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-center md:text-left w-full",children:[e.jsx("p",{className:"font-medium text-foreground",children:a.repastLocation}),a.repastAddress&&e.jsx("p",{className:"text-muted-foreground",children:a.repastAddress}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2 italic",children:"All are welcome to join the family for food and fellowship following the service"})]})]})]})}),(a.acknowledgments||a.specialThanks)&&e.jsx($,{className:"mb-6",children:e.jsxs(V,{className:"p-6",children:[e.jsx("h2",{className:"text-xl md:text-2xl font-serif font-bold text-foreground mb-6 text-center",children:"Acknowledgments"}),a.acknowledgments&&e.jsx("div",{className:"mb-4",children:e.jsx("p",{className:"text-muted-foreground whitespace-pre-wrap text-sm leading-relaxed text-center md:text-left",children:a.acknowledgments})}),a.specialThanks&&e.jsxs("div",{className:"mt-4 p-4 bg-muted/30 rounded",children:[e.jsx("h3",{className:"font-semibold text-foreground mb-2 text-sm",children:"Special Thanks"}),e.jsx("p",{className:"text-muted-foreground whitespace-pre-wrap text-sm leading-relaxed",children:a.specialThanks})]})]})}),a.closingMessage&&e.jsx($,{className:"mb-6",children:e.jsx(V,{className:"p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(_t,{className:"w-8 h-8 text-gold mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground italic whitespace-pre-wrap leading-relaxed",children:a.closingMessage})]})})}),e.jsx("div",{className:"text-center py-8",children:r.epitaph?e.jsxs("p",{className:"text-lg font-serif italic text-muted-foreground",children:['"',r.epitaph,'"']}):e.jsx("p",{className:"text-lg font-serif italic text-muted-foreground",children:`"Those we love don't go away, they walk beside us every day."`})}),e.jsx("div",{className:"hidden md:flex justify-center pt-6",children:e.jsxs(O,{variant:"outline",onClick:()=>s(`/memorial/${t}`),"data-testid":"button-back-desktop",children:[e.jsx(Sr,{className:"w-4 h-4 mr-2"}),"Back to Memorial"]})})]})]})}var Kf={},Spe=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},Oq={},Oi={};let wS;const Cpe=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Oi.getSymbolSize=function(s){if(!s)throw new Error('"version" cannot be null or undefined');if(s<1||s>40)throw new Error('"version" should be in range from 1 to 40');return s*4+17};Oi.getSymbolTotalCodewords=function(s){return Cpe[s]};Oi.getBCHDigit=function(t){let s=0;for(;t!==0;)s++,t>>>=1;return s};Oi.setToSJISFunction=function(s){if(typeof s!="function")throw new Error('"toSJISFunc" is not a valid function.');wS=s};Oi.isKanjiModeEnabled=function(){return typeof wS<"u"};Oi.toSJIS=function(s){return wS(s)};var Ej={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function s(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+r)}}t.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},t.from=function(n,a){if(t.isValid(n))return n;try{return s(n)}catch{return a}}})(Ej);function $q(){this.buffer=[],this.length=0}$q.prototype={get:function(t){const s=Math.floor(t/8);return(this.buffer[s]>>>7-t%8&1)===1},put:function(t,s){for(let r=0;r<s;r++)this.putBit((t>>>s-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const s=Math.floor(this.length/8);this.buffer.length<=s&&this.buffer.push(0),t&&(this.buffer[s]|=128>>>this.length%8),this.length++}};var kpe=$q;function Kg(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}Kg.prototype.set=function(t,s,r,n){const a=t*this.size+s;this.data[a]=r,n&&(this.reservedBit[a]=!0)};Kg.prototype.get=function(t,s){return this.data[t*this.size+s]};Kg.prototype.xor=function(t,s,r){this.data[t*this.size+s]^=r};Kg.prototype.isReserved=function(t,s){return this.reservedBit[t*this.size+s]};var Ape=Kg,Bq={};(function(t){const s=Oi.getSymbolSize;t.getRowColCoords=function(n){if(n===1)return[];const a=Math.floor(n/7)+2,i=s(n),o=i===145?26:Math.ceil((i-13)/(2*a-2))*2,l=[i-7];for(let c=1;c<a-1;c++)l[c]=l[c-1]-o;return l.push(6),l.reverse()},t.getPositions=function(n){const a=[],i=t.getRowColCoords(n),o=i.length;for(let l=0;l<o;l++)for(let c=0;c<o;c++)l===0&&c===0||l===0&&c===o-1||l===o-1&&c===0||a.push([i[l],i[c]]);return a}})(Bq);var Uq={};const Ppe=Oi.getSymbolSize,aP=7;Uq.getPositions=function(s){const r=Ppe(s);return[[0,0],[r-aP,0],[0,r-aP]]};var zq={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const s={N1:3,N2:3,N3:40,N4:10};t.isValid=function(a){return a!=null&&a!==""&&!isNaN(a)&&a>=0&&a<=7},t.from=function(a){return t.isValid(a)?parseInt(a,10):void 0},t.getPenaltyN1=function(a){const i=a.size;let o=0,l=0,c=0,d=null,u=null;for(let m=0;m<i;m++){l=c=0,d=u=null;for(let f=0;f<i;f++){let h=a.get(m,f);h===d?l++:(l>=5&&(o+=s.N1+(l-5)),d=h,l=1),h=a.get(f,m),h===u?c++:(c>=5&&(o+=s.N1+(c-5)),u=h,c=1)}l>=5&&(o+=s.N1+(l-5)),c>=5&&(o+=s.N1+(c-5))}return o},t.getPenaltyN2=function(a){const i=a.size;let o=0;for(let l=0;l<i-1;l++)for(let c=0;c<i-1;c++){const d=a.get(l,c)+a.get(l,c+1)+a.get(l+1,c)+a.get(l+1,c+1);(d===4||d===0)&&o++}return o*s.N2},t.getPenaltyN3=function(a){const i=a.size;let o=0,l=0,c=0;for(let d=0;d<i;d++){l=c=0;for(let u=0;u<i;u++)l=l<<1&2047|a.get(d,u),u>=10&&(l===1488||l===93)&&o++,c=c<<1&2047|a.get(u,d),u>=10&&(c===1488||c===93)&&o++}return o*s.N3},t.getPenaltyN4=function(a){let i=0;const o=a.data.length;for(let c=0;c<o;c++)i+=a.data[c];return Math.abs(Math.ceil(i*100/o/5)-10)*s.N4};function r(n,a,i){switch(n){case t.Patterns.PATTERN000:return(a+i)%2===0;case t.Patterns.PATTERN001:return a%2===0;case t.Patterns.PATTERN010:return i%3===0;case t.Patterns.PATTERN011:return(a+i)%3===0;case t.Patterns.PATTERN100:return(Math.floor(a/2)+Math.floor(i/3))%2===0;case t.Patterns.PATTERN101:return a*i%2+a*i%3===0;case t.Patterns.PATTERN110:return(a*i%2+a*i%3)%2===0;case t.Patterns.PATTERN111:return(a*i%3+(a+i)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}t.applyMask=function(a,i){const o=i.size;for(let l=0;l<o;l++)for(let c=0;c<o;c++)i.isReserved(c,l)||i.xor(c,l,r(a,c,l))},t.getBestMask=function(a,i){const o=Object.keys(t.Patterns).length;let l=0,c=1/0;for(let d=0;d<o;d++){i(d),t.applyMask(d,a);const u=t.getPenaltyN1(a)+t.getPenaltyN2(a)+t.getPenaltyN3(a)+t.getPenaltyN4(a);t.applyMask(d,a),u<c&&(c=u,l=d)}return l}})(zq);var Tj={};const bd=Ej,vy=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],yy=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Tj.getBlocksCount=function(s,r){switch(r){case bd.L:return vy[(s-1)*4+0];case bd.M:return vy[(s-1)*4+1];case bd.Q:return vy[(s-1)*4+2];case bd.H:return vy[(s-1)*4+3];default:return}};Tj.getTotalCodewordsCount=function(s,r){switch(r){case bd.L:return yy[(s-1)*4+0];case bd.M:return yy[(s-1)*4+1];case bd.Q:return yy[(s-1)*4+2];case bd.H:return yy[(s-1)*4+3];default:return}};var qq={},Mj={};const gx=new Uint8Array(512),j1=new Uint8Array(256);(function(){let s=1;for(let r=0;r<255;r++)gx[r]=s,j1[s]=r,s<<=1,s&256&&(s^=285);for(let r=255;r<512;r++)gx[r]=gx[r-255]})();Mj.log=function(s){if(s<1)throw new Error("log("+s+")");return j1[s]};Mj.exp=function(s){return gx[s]};Mj.mul=function(s,r){return s===0||r===0?0:gx[j1[s]+j1[r]]};(function(t){const s=Mj;t.mul=function(n,a){const i=new Uint8Array(n.length+a.length-1);for(let o=0;o<n.length;o++)for(let l=0;l<a.length;l++)i[o+l]^=s.mul(n[o],a[l]);return i},t.mod=function(n,a){let i=new Uint8Array(n);for(;i.length-a.length>=0;){const o=i[0];for(let c=0;c<a.length;c++)i[c]^=s.mul(a[c],o);let l=0;for(;l<i.length&&i[l]===0;)l++;i=i.slice(l)}return i},t.generateECPolynomial=function(n){let a=new Uint8Array([1]);for(let i=0;i<n;i++)a=t.mul(a,new Uint8Array([1,s.exp(i)]));return a}})(qq);const Vq=qq;function _S(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}_S.prototype.initialize=function(s){this.degree=s,this.genPoly=Vq.generateECPolynomial(this.degree)};_S.prototype.encode=function(s){if(!this.genPoly)throw new Error("Encoder not initialized");const r=new Uint8Array(s.length+this.degree);r.set(s);const n=Vq.mod(r,this.genPoly),a=this.degree-n.length;if(a>0){const i=new Uint8Array(this.degree);return i.set(n,a),i}return n};var Epe=_S,Hq={},ru={},SS={};SS.isValid=function(s){return!isNaN(s)&&s>=1&&s<=40};var Ol={};const Wq="[0-9]+",Tpe="[A-Z $%*+\\-./:]+";let xg="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";xg=xg.replace(/u/g,"\\u");const Mpe="(?:(?![A-Z0-9 $%*+\\-./:]|"+xg+`)(?:.|[\r
]))+`;Ol.KANJI=new RegExp(xg,"g");Ol.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");Ol.BYTE=new RegExp(Mpe,"g");Ol.NUMERIC=new RegExp(Wq,"g");Ol.ALPHANUMERIC=new RegExp(Tpe,"g");const Lpe=new RegExp("^"+xg+"$"),Dpe=new RegExp("^"+Wq+"$"),Ipe=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Ol.testKanji=function(s){return Lpe.test(s)};Ol.testNumeric=function(s){return Dpe.test(s)};Ol.testAlphanumeric=function(s){return Ipe.test(s)};(function(t){const s=SS,r=Ol;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(i,o){if(!i.ccBits)throw new Error("Invalid mode: "+i);if(!s.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?i.ccBits[0]:o<27?i.ccBits[1]:i.ccBits[2]},t.getBestModeForData=function(i){return r.testNumeric(i)?t.NUMERIC:r.testAlphanumeric(i)?t.ALPHANUMERIC:r.testKanji(i)?t.KANJI:t.BYTE},t.toString=function(i){if(i&&i.id)return i.id;throw new Error("Invalid mode")},t.isValid=function(i){return i&&i.bit&&i.ccBits};function n(a){if(typeof a!="string")throw new Error("Param is not a string");switch(a.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+a)}}t.from=function(i,o){if(t.isValid(i))return i;try{return n(i)}catch{return o}}})(ru);(function(t){const s=Oi,r=Tj,n=Ej,a=ru,i=SS,o=7973,l=s.getBCHDigit(o);function c(f,h,p){for(let g=1;g<=40;g++)if(h<=t.getCapacity(g,p,f))return g}function d(f,h){return a.getCharCountIndicator(f,h)+4}function u(f,h){let p=0;return f.forEach(function(g){const y=d(g.mode,h);p+=y+g.getBitsLength()}),p}function m(f,h){for(let p=1;p<=40;p++)if(u(f,p)<=t.getCapacity(p,h,a.MIXED))return p}t.from=function(h,p){return i.isValid(h)?parseInt(h,10):p},t.getCapacity=function(h,p,g){if(!i.isValid(h))throw new Error("Invalid QR Code version");typeof g>"u"&&(g=a.BYTE);const y=s.getSymbolTotalCodewords(h),v=r.getTotalCodewordsCount(h,p),j=(y-v)*8;if(g===a.MIXED)return j;const w=j-d(g,h);switch(g){case a.NUMERIC:return Math.floor(w/10*3);case a.ALPHANUMERIC:return Math.floor(w/11*2);case a.KANJI:return Math.floor(w/13);case a.BYTE:default:return Math.floor(w/8)}},t.getBestVersionForData=function(h,p){let g;const y=n.from(p,n.M);if(Array.isArray(h)){if(h.length>1)return m(h,y);if(h.length===0)return 1;g=h[0]}else g=h;return c(g.mode,g.getLength(),y)},t.getEncodedBits=function(h){if(!i.isValid(h)||h<7)throw new Error("Invalid QR Code version");let p=h<<12;for(;s.getBCHDigit(p)-l>=0;)p^=o<<s.getBCHDigit(p)-l;return h<<12|p}})(Hq);var Kq={};const c5=Oi,Yq=1335,Rpe=21522,iP=c5.getBCHDigit(Yq);Kq.getEncodedBits=function(s,r){const n=s.bit<<3|r;let a=n<<10;for(;c5.getBCHDigit(a)-iP>=0;)a^=Yq<<c5.getBCHDigit(a)-iP;return(n<<10|a)^Rpe};var Gq={};const Fpe=ru;function wf(t){this.mode=Fpe.NUMERIC,this.data=t.toString()}wf.getBitsLength=function(s){return 10*Math.floor(s/3)+(s%3?s%3*3+1:0)};wf.prototype.getLength=function(){return this.data.length};wf.prototype.getBitsLength=function(){return wf.getBitsLength(this.data.length)};wf.prototype.write=function(s){let r,n,a;for(r=0;r+3<=this.data.length;r+=3)n=this.data.substr(r,3),a=parseInt(n,10),s.put(a,10);const i=this.data.length-r;i>0&&(n=this.data.substr(r),a=parseInt(n,10),s.put(a,i*3+1))};var Ope=wf;const $pe=ru,H2=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function _f(t){this.mode=$pe.ALPHANUMERIC,this.data=t}_f.getBitsLength=function(s){return 11*Math.floor(s/2)+6*(s%2)};_f.prototype.getLength=function(){return this.data.length};_f.prototype.getBitsLength=function(){return _f.getBitsLength(this.data.length)};_f.prototype.write=function(s){let r;for(r=0;r+2<=this.data.length;r+=2){let n=H2.indexOf(this.data[r])*45;n+=H2.indexOf(this.data[r+1]),s.put(n,11)}this.data.length%2&&s.put(H2.indexOf(this.data[r]),6)};var Bpe=_f;const Upe=ru;function Sf(t){this.mode=Upe.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}Sf.getBitsLength=function(s){return s*8};Sf.prototype.getLength=function(){return this.data.length};Sf.prototype.getBitsLength=function(){return Sf.getBitsLength(this.data.length)};Sf.prototype.write=function(t){for(let s=0,r=this.data.length;s<r;s++)t.put(this.data[s],8)};var zpe=Sf;const qpe=ru,Vpe=Oi;function Cf(t){this.mode=qpe.KANJI,this.data=t}Cf.getBitsLength=function(s){return s*13};Cf.prototype.getLength=function(){return this.data.length};Cf.prototype.getBitsLength=function(){return Cf.getBitsLength(this.data.length)};Cf.prototype.write=function(t){let s;for(s=0;s<this.data.length;s++){let r=Vpe.toSJIS(this.data[s]);if(r>=33088&&r<=40956)r-=33088;else if(r>=57408&&r<=60351)r-=49472;else throw new Error("Invalid SJIS character: "+this.data[s]+`
Make sure your charset is UTF-8`);r=(r>>>8&255)*192+(r&255),t.put(r,13)}};var Hpe=Cf,Qq={exports:{}};(function(t){var s={single_source_shortest_paths:function(r,n,a){var i={},o={};o[n]=0;var l=s.PriorityQueue.make();l.push(n,0);for(var c,d,u,m,f,h,p,g,y;!l.empty();){c=l.pop(),d=c.value,m=c.cost,f=r[d]||{};for(u in f)f.hasOwnProperty(u)&&(h=f[u],p=m+h,g=o[u],y=typeof o[u]>"u",(y||g>p)&&(o[u]=p,l.push(u,p),i[u]=d))}if(typeof a<"u"&&typeof o[a]>"u"){var v=["Could not find a path from ",n," to ",a,"."].join("");throw new Error(v)}return i},extract_shortest_path_from_predecessor_list:function(r,n){for(var a=[],i=n;i;)a.push(i),r[i],i=r[i];return a.reverse(),a},find_path:function(r,n,a){var i=s.single_source_shortest_paths(r,n,a);return s.extract_shortest_path_from_predecessor_list(i,a)},PriorityQueue:{make:function(r){var n=s.PriorityQueue,a={},i;r=r||{};for(i in n)n.hasOwnProperty(i)&&(a[i]=n[i]);return a.queue=[],a.sorter=r.sorter||n.default_sorter,a},default_sorter:function(r,n){return r.cost-n.cost},push:function(r,n){var a={value:r,cost:n};this.queue.push(a),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=s})(Qq);var Wpe=Qq.exports;(function(t){const s=ru,r=Ope,n=Bpe,a=zpe,i=Hpe,o=Ol,l=Oi,c=Wpe;function d(v){return unescape(encodeURIComponent(v)).length}function u(v,j,w){const _=[];let P;for(;(P=v.exec(w))!==null;)_.push({data:P[0],index:P.index,mode:j,length:P[0].length});return _}function m(v){const j=u(o.NUMERIC,s.NUMERIC,v),w=u(o.ALPHANUMERIC,s.ALPHANUMERIC,v);let _,P;return l.isKanjiModeEnabled()?(_=u(o.BYTE,s.BYTE,v),P=u(o.KANJI,s.KANJI,v)):(_=u(o.BYTE_KANJI,s.BYTE,v),P=[]),j.concat(w,_,P).sort(function(L,T){return L.index-T.index}).map(function(L){return{data:L.data,mode:L.mode,length:L.length}})}function f(v,j){switch(j){case s.NUMERIC:return r.getBitsLength(v);case s.ALPHANUMERIC:return n.getBitsLength(v);case s.KANJI:return i.getBitsLength(v);case s.BYTE:return a.getBitsLength(v)}}function h(v){return v.reduce(function(j,w){const _=j.length-1>=0?j[j.length-1]:null;return _&&_.mode===w.mode?(j[j.length-1].data+=w.data,j):(j.push(w),j)},[])}function p(v){const j=[];for(let w=0;w<v.length;w++){const _=v[w];switch(_.mode){case s.NUMERIC:j.push([_,{data:_.data,mode:s.ALPHANUMERIC,length:_.length},{data:_.data,mode:s.BYTE,length:_.length}]);break;case s.ALPHANUMERIC:j.push([_,{data:_.data,mode:s.BYTE,length:_.length}]);break;case s.KANJI:j.push([_,{data:_.data,mode:s.BYTE,length:d(_.data)}]);break;case s.BYTE:j.push([{data:_.data,mode:s.BYTE,length:d(_.data)}])}}return j}function g(v,j){const w={},_={start:{}};let P=["start"];for(let E=0;E<v.length;E++){const L=v[E],T=[];for(let M=0;M<L.length;M++){const F=L[M],k=""+E+M;T.push(k),w[k]={node:F,lastCount:0},_[k]={};for(let D=0;D<P.length;D++){const z=P[D];w[z]&&w[z].node.mode===F.mode?(_[z][k]=f(w[z].lastCount+F.length,F.mode)-f(w[z].lastCount,F.mode),w[z].lastCount+=F.length):(w[z]&&(w[z].lastCount=F.length),_[z][k]=f(F.length,F.mode)+4+s.getCharCountIndicator(F.mode,j))}}P=T}for(let E=0;E<P.length;E++)_[P[E]].end=0;return{map:_,table:w}}function y(v,j){let w;const _=s.getBestModeForData(v);if(w=s.from(j,_),w!==s.BYTE&&w.bit<_.bit)throw new Error('"'+v+'" cannot be encoded with mode '+s.toString(w)+`.
 Suggested mode is: `+s.toString(_));switch(w===s.KANJI&&!l.isKanjiModeEnabled()&&(w=s.BYTE),w){case s.NUMERIC:return new r(v);case s.ALPHANUMERIC:return new n(v);case s.KANJI:return new i(v);case s.BYTE:return new a(v)}}t.fromArray=function(j){return j.reduce(function(w,_){return typeof _=="string"?w.push(y(_,null)):_.data&&w.push(y(_.data,_.mode)),w},[])},t.fromString=function(j,w){const _=m(j,l.isKanjiModeEnabled()),P=p(_),E=g(P,w),L=c.find_path(E.map,"start","end"),T=[];for(let M=1;M<L.length-1;M++)T.push(E.table[L[M]].node);return t.fromArray(h(T))},t.rawSplit=function(j){return t.fromArray(m(j,l.isKanjiModeEnabled()))}})(Gq);const Lj=Oi,W2=Ej,Kpe=kpe,Ype=Ape,Gpe=Bq,Qpe=Uq,d5=zq,u5=Tj,Zpe=Epe,b1=Hq,Xpe=Kq,Jpe=ru,K2=Gq;function exe(t,s){const r=t.size,n=Qpe.getPositions(s);for(let a=0;a<n.length;a++){const i=n[a][0],o=n[a][1];for(let l=-1;l<=7;l++)if(!(i+l<=-1||r<=i+l))for(let c=-1;c<=7;c++)o+c<=-1||r<=o+c||(l>=0&&l<=6&&(c===0||c===6)||c>=0&&c<=6&&(l===0||l===6)||l>=2&&l<=4&&c>=2&&c<=4?t.set(i+l,o+c,!0,!0):t.set(i+l,o+c,!1,!0))}}function txe(t){const s=t.size;for(let r=8;r<s-8;r++){const n=r%2===0;t.set(r,6,n,!0),t.set(6,r,n,!0)}}function sxe(t,s){const r=Gpe.getPositions(s);for(let n=0;n<r.length;n++){const a=r[n][0],i=r[n][1];for(let o=-2;o<=2;o++)for(let l=-2;l<=2;l++)o===-2||o===2||l===-2||l===2||o===0&&l===0?t.set(a+o,i+l,!0,!0):t.set(a+o,i+l,!1,!0)}}function rxe(t,s){const r=t.size,n=b1.getEncodedBits(s);let a,i,o;for(let l=0;l<18;l++)a=Math.floor(l/3),i=l%3+r-8-3,o=(n>>l&1)===1,t.set(a,i,o,!0),t.set(i,a,o,!0)}function Y2(t,s,r){const n=t.size,a=Xpe.getEncodedBits(s,r);let i,o;for(i=0;i<15;i++)o=(a>>i&1)===1,i<6?t.set(i,8,o,!0):i<8?t.set(i+1,8,o,!0):t.set(n-15+i,8,o,!0),i<8?t.set(8,n-i-1,o,!0):i<9?t.set(8,15-i-1+1,o,!0):t.set(8,15-i-1,o,!0);t.set(n-8,8,1,!0)}function nxe(t,s){const r=t.size;let n=-1,a=r-1,i=7,o=0;for(let l=r-1;l>0;l-=2)for(l===6&&l--;;){for(let c=0;c<2;c++)if(!t.isReserved(a,l-c)){let d=!1;o<s.length&&(d=(s[o]>>>i&1)===1),t.set(a,l-c,d),i--,i===-1&&(o++,i=7)}if(a+=n,a<0||r<=a){a-=n,n=-n;break}}}function axe(t,s,r){const n=new Kpe;r.forEach(function(c){n.put(c.mode.bit,4),n.put(c.getLength(),Jpe.getCharCountIndicator(c.mode,t)),c.write(n)});const a=Lj.getSymbolTotalCodewords(t),i=u5.getTotalCodewordsCount(t,s),o=(a-i)*8;for(n.getLengthInBits()+4<=o&&n.put(0,4);n.getLengthInBits()%8!==0;)n.putBit(0);const l=(o-n.getLengthInBits())/8;for(let c=0;c<l;c++)n.put(c%2?17:236,8);return ixe(n,t,s)}function ixe(t,s,r){const n=Lj.getSymbolTotalCodewords(s),a=u5.getTotalCodewordsCount(s,r),i=n-a,o=u5.getBlocksCount(s,r),l=n%o,c=o-l,d=Math.floor(n/o),u=Math.floor(i/o),m=u+1,f=d-u,h=new Zpe(f);let p=0;const g=new Array(o),y=new Array(o);let v=0;const j=new Uint8Array(t.buffer);for(let L=0;L<o;L++){const T=L<c?u:m;g[L]=j.slice(p,p+T),y[L]=h.encode(g[L]),p+=T,v=Math.max(v,T)}const w=new Uint8Array(n);let _=0,P,E;for(P=0;P<v;P++)for(E=0;E<o;E++)P<g[E].length&&(w[_++]=g[E][P]);for(P=0;P<f;P++)for(E=0;E<o;E++)w[_++]=y[E][P];return w}function oxe(t,s,r,n){let a;if(Array.isArray(t))a=K2.fromArray(t);else if(typeof t=="string"){let d=s;if(!d){const u=K2.rawSplit(t);d=b1.getBestVersionForData(u,r)}a=K2.fromString(t,d||40)}else throw new Error("Invalid data");const i=b1.getBestVersionForData(a,r);if(!i)throw new Error("The amount of data is too big to be stored in a QR Code");if(!s)s=i;else if(s<i)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+i+`.
`);const o=axe(s,r,a),l=Lj.getSymbolSize(s),c=new Ype(l);return exe(c,s),txe(c),sxe(c,s),Y2(c,r,0),s>=7&&rxe(c,s),nxe(c,o),isNaN(n)&&(n=d5.getBestMask(c,Y2.bind(null,c,r))),d5.applyMask(n,c),Y2(c,r,n),{modules:c,version:s,errorCorrectionLevel:r,maskPattern:n,segments:a}}Oq.create=function(s,r){if(typeof s>"u"||s==="")throw new Error("No input text");let n=W2.M,a,i;return typeof r<"u"&&(n=W2.from(r.errorCorrectionLevel,W2.M),a=b1.from(r.version),i=d5.from(r.maskPattern),r.toSJISFunc&&Lj.setToSJISFunction(r.toSJISFunc)),oxe(s,a,n,i)};var Zq={},CS={};(function(t){function s(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");let n=r.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+r);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(i){return[i,i]}))),n.length===6&&n.push("F","F");const a=parseInt(n.join(""),16);return{r:a>>24&255,g:a>>16&255,b:a>>8&255,a:a&255,hex:"#"+n.slice(0,6).join("")}}t.getOptions=function(n){n||(n={}),n.color||(n.color={});const a=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,i=n.width&&n.width>=21?n.width:void 0,o=n.scale||4;return{width:i,scale:i?4:o,margin:a,color:{dark:s(n.color.dark||"#000000ff"),light:s(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},t.getScale=function(n,a){return a.width&&a.width>=n+a.margin*2?a.width/(n+a.margin*2):a.scale},t.getImageWidth=function(n,a){const i=t.getScale(n,a);return Math.floor((n+a.margin*2)*i)},t.qrToImageData=function(n,a,i){const o=a.modules.size,l=a.modules.data,c=t.getScale(o,i),d=Math.floor((o+i.margin*2)*c),u=i.margin*c,m=[i.color.light,i.color.dark];for(let f=0;f<d;f++)for(let h=0;h<d;h++){let p=(f*d+h)*4,g=i.color.light;if(f>=u&&h>=u&&f<d-u&&h<d-u){const y=Math.floor((f-u)/c),v=Math.floor((h-u)/c);g=m[l[y*o+v]?1:0]}n[p++]=g.r,n[p++]=g.g,n[p++]=g.b,n[p]=g.a}}})(CS);(function(t){const s=CS;function r(a,i,o){a.clearRect(0,0,i.width,i.height),i.style||(i.style={}),i.height=o,i.width=o,i.style.height=o+"px",i.style.width=o+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(i,o,l){let c=l,d=o;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),o||(d=n()),c=s.getOptions(c);const u=s.getImageWidth(i.modules.size,c),m=d.getContext("2d"),f=m.createImageData(u,u);return s.qrToImageData(f.data,i,c),r(m,d,u),m.putImageData(f,0,0),d},t.renderToDataURL=function(i,o,l){let c=l;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),c||(c={});const d=t.render(i,o,c),u=c.type||"image/png",m=c.rendererOpts||{};return d.toDataURL(u,m.quality)}})(Zq);var Xq={};const lxe=CS;function oP(t,s){const r=t.a/255,n=s+'="'+t.hex+'"';return r<1?n+" "+s+'-opacity="'+r.toFixed(2).slice(1)+'"':n}function G2(t,s,r){let n=t+s;return typeof r<"u"&&(n+=" "+r),n}function cxe(t,s,r){let n="",a=0,i=!1,o=0;for(let l=0;l<t.length;l++){const c=Math.floor(l%s),d=Math.floor(l/s);!c&&!i&&(i=!0),t[l]?(o++,l>0&&c>0&&t[l-1]||(n+=i?G2("M",c+r,.5+d+r):G2("m",a,0),a=0,i=!1),c+1<s&&t[l+1]||(n+=G2("h",o),o=0)):a++}return n}Xq.render=function(s,r,n){const a=lxe.getOptions(r),i=s.modules.size,o=s.modules.data,l=i+a.margin*2,c=a.color.light.a?"<path "+oP(a.color.light,"fill")+' d="M0 0h'+l+"v"+l+'H0z"/>':"",d="<path "+oP(a.color.dark,"stroke")+' d="'+cxe(o,i,a.margin)+'"/>',u='viewBox="0 0 '+l+" "+l+'"',f='<svg xmlns="http://www.w3.org/2000/svg" '+(a.width?'width="'+a.width+'" height="'+a.width+'" ':"")+u+' shape-rendering="crispEdges">'+c+d+`</svg>
`;return typeof n=="function"&&n(null,f),f};const dxe=Spe,m5=Oq,Jq=Zq,uxe=Xq;function kS(t,s,r,n,a){const i=[].slice.call(arguments,1),o=i.length,l=typeof i[o-1]=="function";if(!l&&!dxe())throw new Error("Callback required as last argument");if(l){if(o<2)throw new Error("Too few arguments provided");o===2?(a=r,r=s,s=n=void 0):o===3&&(s.getContext&&typeof a>"u"?(a=n,n=void 0):(a=n,n=r,r=s,s=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(r=s,s=n=void 0):o===2&&!s.getContext&&(n=r,r=s,s=void 0),new Promise(function(c,d){try{const u=m5.create(r,n);c(t(u,s,n))}catch(u){d(u)}})}try{const c=m5.create(r,n);a(null,t(c,s,n))}catch(c){a(c)}}Kf.create=m5.create;Kf.toCanvas=kS.bind(null,Jq.render);Kf.toDataURL=kS.bind(null,Jq.renderToDataURL);Kf.toString=kS.bind(null,function(t,s,r){return uxe.render(t,r)});function lP(){const[t,s]=N.useState(""),[r,n]=N.useState(window.location.origin),[a,i]=N.useState(!1),{toast:o}=Ht(),l=async()=>{i(!0);try{const d=await Kf.toDataURL(r,{width:500,margin:2,color:{dark:"#000000",light:"#FFFFFF"}});s(d),o({title:"QR Code Generated",description:"Your QR code is ready to download!"})}catch(d){console.error("Error generating QR code:",d),o({variant:"destructive",title:"Error",description:"Failed to generate QR code. Please try again."})}finally{i(!1)}},c=async()=>{if(!t){o({variant:"destructive",title:"No QR Code",description:"Please generate a QR code first."});return}try{const d=new es({orientation:"portrait",unit:"mm",format:"a4"});d.setFontSize(24),d.setTextColor(126,58,242),d.text("Opictuary",105,30,{align:"center"}),d.setFontSize(14),d.setTextColor(100,100,100),d.text("Digital Memorial Platform",105,40,{align:"center"});const u=120,m=(210-u)/2,f=60;d.addImage(t,"PNG",m,f,u,u),d.setFontSize(12),d.setTextColor(0,0,0),d.text(r,105,f+u+15,{align:"center"}),d.setFontSize(10),d.setTextColor(100,100,100),d.text("Scan this QR code to visit Opictuary",105,f+u+25,{align:"center"}),d.setFontSize(9),d.setTextColor(150,150,150),d.text("Honoring Life, Preserving Legacy",105,f+u+35,{align:"center"}),d.save("opictuary-qr-code.pdf"),o({title:"PDF Downloaded",description:"Your QR code PDF has been downloaded successfully!"})}catch(d){console.error("Error generating PDF:",d),o({variant:"destructive",title:"Error",description:"Failed to generate PDF. Please try again."})}};return e.jsx("div",{className:"min-h-screen bg-background py-12 px-4",children:e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsxs($,{children:[e.jsxs(le,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(or,{className:"w-6 h-6","aria-hidden":"true"}),"QR Code Generator"]}),e.jsx($e,{children:"Generate a QR code for the Opictuary app and download it as a PDF"})]}),e.jsxs(V,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"app-url",children:"App URL"}),e.jsx(re,{id:"app-url",value:r,onChange:d=>n(d.target.value),placeholder:"https://your-app.replit.app","data-testid":"input-app-url"})]}),e.jsx(O,{onClick:l,disabled:a||!r,className:"w-full","data-testid":"button-generate-qr",children:a?"Generating...":"Generate QR Code"}),t&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-center p-6 bg-muted rounded-lg",children:e.jsx("img",{src:t,alt:"QR Code for Opictuary app",className:"w-64 h-64","data-testid":"img-qr-code"})}),e.jsxs(O,{onClick:c,variant:"default",className:"w-full","data-testid":"button-download-pdf",children:[e.jsx(Al,{className:"w-4 h-4 mr-2","aria-hidden":"true"}),"Download as PDF"]}),e.jsx("div",{className:"p-4 bg-accent/20 rounded-lg border border-accent",children:e.jsxs("p",{className:"text-sm text-foreground",children:[e.jsx("strong",{children:"Next step:"})," After downloading the PDF, you can email it to"," ",e.jsx("span",{className:"font-mono",children:"opictuary@gmail.com"})," or any other email address."]})})]})]})]})})})}const mxe=Dr({eventType:we().min(1,"Event type is required"),eventDate:we().min(1,"Event date is required"),location:we().min(1,"Location is required"),description:we().min(10,"Description must be at least 10 characters"),sendReminders:xn().default(!0)}),cP=[{value:"balloon_release",label:"Balloon Release",icon:_t},{value:"candlelight_vigil",label:"Candlelight Vigil",icon:Nr},{value:"memorial_picnic",label:"Memorial Picnic",icon:Ms},{value:"memorial_barbecue",label:"Memorial Barbecue",icon:Nr},{value:"tree_planting",label:"Tree Planting",icon:Bx},{value:"charity_walk",label:"Charity Walk",icon:WI},{value:"scholarship_announcement",label:"Scholarship Announcement",icon:Za}];function hxe(){const[,t]=Sc("/memorial/:id/events"),s=(t==null?void 0:t.id)||"",[r,n]=N.useState(!1),[a,i]=N.useState(null),{toast:o}=Ht(),{data:l=[],isLoading:c}=Xe({queryKey:["/api/memorials",s,"events"]}),{data:d=[]}=Xe({queryKey:["/api/events",a==null?void 0:a.id,"rsvps"],enabled:!!a}),u=Or({resolver:$r(mxe),defaultValues:{eventType:"",eventDate:"",location:"",description:"",sendReminders:!0}}),m=yt({mutationFn:async p=>await(await pt("POST",`/api/memorials/${s}/events`,p)).json(),onSuccess:()=>{xt.invalidateQueries({queryKey:["/api/memorials",s,"events"]}),n(!1),u.reset(),o({title:"Event Created",description:"Memorial event has been created successfully."})},onError:()=>{o({title:"Error",description:"Failed to create event. Please try again.",variant:"destructive"})}}),f=p=>{m.mutate(p)},h=p=>cP.find(y=>y.value===p)||{value:p,label:p,icon:ds};return e.jsxs("div",{className:"container mx-auto py-8 px-4 max-w-6xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"Memorial Events"}),e.jsx("p",{className:"text-muted-foreground",children:"Plan and manage memorial gatherings"})]}),e.jsxs(Os,{open:r,onOpenChange:n,children:[e.jsx(si,{asChild:!0,children:e.jsxs(O,{"data-testid":"button-create-event",children:[e.jsx(bs,{className:"w-4 h-4 mr-2"}),"Create Event"]})}),e.jsxs(Ds,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Is,{children:e.jsx(Rs,{children:"Create Memorial Event"})}),e.jsx(Wr,{...u,children:e.jsxs("form",{onSubmit:u.handleSubmit(f),className:"space-y-6",children:[e.jsx(fe,{control:u.control,name:"eventType",render:({field:p})=>e.jsxs(me,{children:[e.jsx(he,{children:"Event Type"}),e.jsxs(Rt,{onValueChange:p.onChange,value:p.value,children:[e.jsx(xe,{children:e.jsx(Mt,{"data-testid":"select-event-type",children:e.jsx(Ft,{placeholder:"Select event type"})})}),e.jsx(Lt,{children:cP.map(g=>{const y=g.icon;return e.jsx(te,{value:g.value,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{className:"w-4 h-4"}),g.label]})},g.value)})})]}),e.jsx(ye,{})]})}),e.jsx(fe,{control:u.control,name:"eventDate",render:({field:p})=>e.jsxs(me,{children:[e.jsx(he,{children:"Event Date & Time"}),e.jsx(xe,{children:e.jsx(re,{type:"datetime-local",...p,"data-testid":"input-event-date"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:u.control,name:"location",render:({field:p})=>e.jsxs(me,{children:[e.jsx(he,{children:"Location"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"Enter event location",...p,"data-testid":"input-location"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:u.control,name:"description",render:({field:p})=>e.jsxs(me,{children:[e.jsx(he,{children:"Description"}),e.jsx(xe,{children:e.jsx(Gt,{placeholder:"Describe the event details...",rows:4,...p,"data-testid":"input-description"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:u.control,name:"sendReminders",render:({field:p})=>e.jsxs(me,{className:"flex items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(he,{className:"text-base",children:"Send Reminders"}),e.jsx(Qt,{children:"Email and text reminders will be sent to attendees"})]}),e.jsx(xe,{children:e.jsx(ir,{checked:p.value,onCheckedChange:p.onChange,"data-testid":"switch-send-reminders"})})]})}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(O,{type:"button",variant:"outline",onClick:()=>n(!1),"data-testid":"button-cancel",children:"Cancel"}),e.jsx(O,{type:"submit",disabled:m.isPending,"data-testid":"button-submit-event",children:m.isPending?"Creating...":"Create Event"})]})]})})]})]})]}),c?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-muted-foreground",children:"Loading events..."})}):l.length===0?e.jsxs($,{className:"p-12 text-center",children:[e.jsx(ds,{className:"w-16 h-16 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Events Yet"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Create your first memorial event to bring loved ones together"}),e.jsxs(O,{onClick:()=>n(!0),"data-testid":"button-create-first-event",children:[e.jsx(bs,{className:"w-4 h-4 mr-2"}),"Create Event"]})]}):e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:l.map(p=>{const g=h(p.eventType),y=new Date(p.eventDate),v=y<new Date;return e.jsxs($,{className:"hover-elevate active-elevate-2 cursor-pointer transition-all",onClick:()=>i(p),"data-testid":`card-event-${p.id}`,children:[e.jsxs(le,{children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"mb-2",children:(()=>{const j=g.icon;return e.jsx(j,{className:"w-8 h-8 text-primary"})})()}),e.jsx(ge,{className:"text-lg",children:g.label})]}),v?e.jsx(ze,{variant:"secondary","data-testid":`badge-past-${p.id}`,children:"Past"}):e.jsx(ze,{"data-testid":`badge-upcoming-${p.id}`,children:"Upcoming"})]}),e.jsxs($e,{className:"flex items-center gap-2 mt-2",children:[e.jsx(Mr,{className:"w-4 h-4"}),Pr(y,"MMM d, yyyy 'at' h:mm a")]})]}),e.jsxs(V,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[e.jsx(tr,{className:"w-4 h-4 mt-0.5 text-muted-foreground flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:p.location})]}),e.jsx("p",{className:"text-sm line-clamp-2",children:p.description}),p.sendReminders&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(af,{className:"w-3 h-3"}),"Reminders enabled"]})]})]},p.id)})}),e.jsx(Os,{open:!!a,onOpenChange:p=>!p&&i(null),children:e.jsx(Ds,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:a&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(Is,{children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{children:(()=>{const p=h(a.eventType).icon;return e.jsx(p,{className:"w-12 h-12 text-primary"})})()}),e.jsxs("div",{className:"flex-1",children:[e.jsx(Rs,{className:"text-2xl mb-2",children:h(a.eventType).label}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(ds,{className:"w-4 h-4"}),Pr(new Date(a.eventDate),"EEEE, MMMM d, yyyy 'at' h:mm a")]})]})]})}),e.jsx(ls,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(tr,{className:"w-5 h-5 text-muted-foreground mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-1",children:"Location"}),e.jsx("p",{className:"text-muted-foreground",children:a.location})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Nn,{className:"w-5 h-5 text-muted-foreground mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-1",children:"Description"}),e.jsx("p",{className:"text-muted-foreground",children:a.description})]})]}),a.sendReminders&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(af,{className:"w-5 h-5 text-muted-foreground mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-1",children:"Reminders"}),e.jsx("p",{className:"text-muted-foreground",children:"Email and text reminders will be sent to all attendees"})]})]})]}),e.jsx(ls,{}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium mb-4 flex items-center gap-2",children:[e.jsx(Ms,{className:"w-5 h-5"}),"Attendees (",d.length,")"]}),d.length===0?e.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No RSVPs yet"}):e.jsx("div",{className:"space-y-2",children:d.map(p=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border","data-testid":`rsvp-${p.id}`,children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:p.attendeeName}),p.attendeeEmail&&e.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[e.jsx(Ti,{className:"w-3 h-3"}),p.attendeeEmail]})]}),e.jsx(ze,{variant:p.status==="confirmed"?"default":"secondary",children:p.status})]},p.id))})]})]})})})]})}const fxe=Dr({title:we().min(1,"Title is required"),ceremonyDate:we().min(1,"Ceremony date is required"),location:we().min(1,"Location is required"),coverImageUrl:we().optional(),backgroundAudioUrl:we().optional(),enableBluetoothAudio:xn().default(!1),bluetoothDeviceName:we().optional()}),pxe=Dr({itemType:we().min(1,"Item type is required"),title:we().min(1,"Title is required"),description:we().optional(),speaker:we().optional(),duration:Ll().optional(),audioUrl:we().optional(),audioType:we().optional()}),dP=[{value:"opening",label:"Opening Remarks",icon:Oy},{value:"prayer",label:"Prayer",icon:Un},{value:"reading",label:"Scripture Reading",icon:Un},{value:"eulogy",label:"Eulogy",icon:Oy},{value:"musical_tribute",label:"Musical Tribute",icon:zn},{value:"reflection",label:"Moment of Silence",icon:Un},{value:"closing",label:"Closing Remarks",icon:Oy}],xxe=[{value:"background_music",label:"Background Music"},{value:"reading",label:"Audio Reading"},{value:"eulogy",label:"Recorded Eulogy"},{value:"musical_tribute",label:"Musical Performance"},{value:"prayer",label:"Spoken Prayer"}];function gxe(){const[,t]=Sc("/memorial/:id/funeral-program"),s=(t==null?void 0:t.id)||"",[r,n]=N.useState(!1),[a,i]=N.useState(null),[o,l]=N.useState(!1),{toast:c}=Ht(),{data:d=[],isLoading:u}=Xe({queryKey:["/api/memorials",s,"funeral-programs"]}),{data:m=[]}=Xe({queryKey:["/api/funeral-programs",a==null?void 0:a.id,"items"],enabled:!!a}),f=Or({resolver:$r(fxe),defaultValues:{title:"",ceremonyDate:"",location:"",coverImageUrl:"",backgroundAudioUrl:"",enableBluetoothAudio:!1,bluetoothDeviceName:""}}),h=Or({resolver:$r(pxe),defaultValues:{itemType:"",title:"",description:"",speaker:"",audioUrl:"",audioType:""}}),p=yt({mutationFn:async j=>await(await pt("POST",`/api/memorials/${s}/funeral-programs`,j)).json(),onSuccess:()=>{xt.invalidateQueries({queryKey:["/api/memorials",s,"funeral-programs"]}),n(!1),f.reset(),c({title:"Program Created",description:"Funeral program has been created successfully."})},onError:()=>{c({title:"Error",description:"Failed to create program. Please try again.",variant:"destructive"})}}),g=yt({mutationFn:async j=>await(await pt("POST",`/api/funeral-programs/${a==null?void 0:a.id}/items`,{...j,orderIndex:m.length})).json(),onSuccess:()=>{xt.invalidateQueries({queryKey:["/api/funeral-programs",a==null?void 0:a.id,"items"]}),l(!1),h.reset(),c({title:"Item Added",description:"Program item has been added successfully."})},onError:()=>{c({title:"Error",description:"Failed to add item. Please try again.",variant:"destructive"})}}),y=j=>{p.mutate(j)},v=j=>{g.mutate(j)};return e.jsxs("div",{className:"container mx-auto py-8 px-4 max-w-6xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"Funeral Program Creator"}),e.jsx("p",{className:"text-muted-foreground",children:"Create a beautiful ceremony program with audio support"})]}),e.jsxs(Os,{open:r,onOpenChange:n,children:[e.jsx(si,{asChild:!0,children:e.jsxs(O,{"data-testid":"button-create-program",children:[e.jsx(bs,{className:"w-4 h-4 mr-2"}),"Create Program"]})}),e.jsxs(Ds,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Is,{children:e.jsx(Rs,{children:"Create Funeral Program"})}),e.jsx(Wr,{...f,children:e.jsxs("form",{onSubmit:f.handleSubmit(y),className:"space-y-6",children:[e.jsxs(ba,{defaultValue:"basic",className:"w-full",children:[e.jsxs(ra,{className:"grid w-full grid-cols-2",children:[e.jsx(qt,{value:"basic","data-testid":"tab-basic",children:"Basic Info"}),e.jsx(qt,{value:"audio","data-testid":"tab-audio",children:"Audio Settings"})]}),e.jsxs(Vt,{value:"basic",className:"space-y-4 mt-4",children:[e.jsx(fe,{control:f.control,name:"title",render:({field:j})=>e.jsxs(me,{children:[e.jsx(he,{children:"Program Title"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"Celebration of Life",...j,"data-testid":"input-title"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:f.control,name:"ceremonyDate",render:({field:j})=>e.jsxs(me,{children:[e.jsx(he,{children:"Ceremony Date & Time"}),e.jsx(xe,{children:e.jsx(re,{type:"datetime-local",...j,"data-testid":"input-ceremony-date"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:f.control,name:"location",render:({field:j})=>e.jsxs(me,{children:[e.jsx(he,{children:"Location"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"Church, Funeral Home, etc.",...j,"data-testid":"input-location"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:f.control,name:"coverImageUrl",render:({field:j})=>e.jsxs(me,{children:[e.jsx(he,{children:"Cover Image URL (Optional)"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"https://...",...j,"data-testid":"input-cover-image"})}),e.jsx(ye,{})]})})]}),e.jsxs(Vt,{value:"audio",className:"space-y-4 mt-4",children:[e.jsx(fe,{control:f.control,name:"backgroundAudioUrl",render:({field:j})=>e.jsxs(me,{children:[e.jsx(he,{children:"Background Music URL (Optional)"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"https://... (MP3, WAV)",...j,"data-testid":"input-background-audio"})}),e.jsx(Qt,{children:"Background music will play throughout the ceremony"}),e.jsx(ye,{})]})}),e.jsx(fe,{control:f.control,name:"enableBluetoothAudio",render:({field:j})=>e.jsxs(me,{className:"flex items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsxs(he,{className:"text-base flex items-center gap-2",children:[e.jsx(cw,{className:"w-4 h-4"}),"Enable Bluetooth Audio"]}),e.jsx(Qt,{children:"Connect to wireless speakers"})]}),e.jsx(xe,{children:e.jsx(ir,{checked:j.value,onCheckedChange:j.onChange,"data-testid":"switch-bluetooth"})})]})}),f.watch("enableBluetoothAudio")&&e.jsx(fe,{control:f.control,name:"bluetoothDeviceName",render:({field:j})=>e.jsxs(me,{children:[e.jsx(he,{children:"Bluetooth Device Name"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"e.g., Church Speaker System",...j,"data-testid":"input-bluetooth-device"})}),e.jsx(ye,{})]})})]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(O,{type:"button",variant:"outline",onClick:()=>n(!1),"data-testid":"button-cancel",children:"Cancel"}),e.jsx(O,{type:"submit",disabled:p.isPending,"data-testid":"button-submit-program",children:p.isPending?"Creating...":"Create Program"})]})]})})]})]})]}),u?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-muted-foreground",children:"Loading programs..."})}):d.length===0?e.jsxs($,{className:"p-12 text-center",children:[e.jsx(Un,{className:"w-16 h-16 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Programs Yet"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Create a funeral program to organize the ceremony"}),e.jsxs(O,{onClick:()=>n(!0),"data-testid":"button-create-first-program",children:[e.jsx(bs,{className:"w-4 h-4 mr-2"}),"Create Program"]})]}):e.jsx("div",{className:"grid gap-6",children:d.map(j=>e.jsx($,{className:"hover-elevate active-elevate-2 cursor-pointer transition-all",onClick:()=>i(j),"data-testid":`card-program-${j.id}`,children:e.jsx(le,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(ge,{children:j.title}),e.jsxs($e,{className:"mt-2",children:[new Date(j.ceremonyDate).toLocaleDateString(),"  ",j.location]})]}),e.jsxs("div",{className:"flex gap-2",children:[j.backgroundAudioUrl&&e.jsxs(ze,{variant:"secondary","data-testid":`badge-audio-${j.id}`,children:[e.jsx(zn,{className:"w-3 h-3 mr-1"}),"Audio"]}),j.enableBluetoothAudio&&e.jsxs(ze,{variant:"secondary","data-testid":`badge-bluetooth-${j.id}`,children:[e.jsx(cw,{className:"w-3 h-3 mr-1"}),"Bluetooth"]})]})]})})},j.id))}),e.jsx(Os,{open:!!a,onOpenChange:j=>!j&&i(null),children:e.jsx(Ds,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:a&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(Is,{children:[e.jsx(Rs,{className:"text-2xl",children:a.title}),e.jsxs("p",{className:"text-muted-foreground",children:[new Date(a.ceremonyDate).toLocaleString(),"  ",a.location]})]}),e.jsx(ls,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Program Items"}),e.jsxs(Os,{open:o,onOpenChange:l,children:[e.jsx(si,{asChild:!0,children:e.jsxs(O,{size:"sm","data-testid":"button-add-item",children:[e.jsx(bs,{className:"w-4 h-4 mr-2"}),"Add Item"]})}),e.jsxs(Ds,{className:"max-w-xl",children:[e.jsx(Is,{children:e.jsx(Rs,{children:"Add Program Item"})}),e.jsx(Wr,{...h,children:e.jsxs("form",{onSubmit:h.handleSubmit(v),className:"space-y-4",children:[e.jsx(fe,{control:h.control,name:"itemType",render:({field:j})=>e.jsxs(me,{children:[e.jsx(he,{children:"Item Type"}),e.jsxs(Rt,{onValueChange:j.onChange,value:j.value,children:[e.jsx(xe,{children:e.jsx(Mt,{"data-testid":"select-item-type",children:e.jsx(Ft,{placeholder:"Select item type"})})}),e.jsx(Lt,{children:dP.map(w=>{const _=w.icon;return e.jsx(te,{value:w.value,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{className:"w-4 h-4"}),w.label]})},w.value)})})]}),e.jsx(ye,{})]})}),e.jsx(fe,{control:h.control,name:"title",render:({field:j})=>e.jsxs(me,{children:[e.jsx(he,{children:"Title"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"Item title",...j,"data-testid":"input-item-title"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:h.control,name:"speaker",render:({field:j})=>e.jsxs(me,{children:[e.jsx(he,{children:"Speaker (Optional)"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"Speaker name",...j,"data-testid":"input-speaker"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:h.control,name:"description",render:({field:j})=>e.jsxs(me,{children:[e.jsx(he,{children:"Description (Optional)"}),e.jsx(xe,{children:e.jsx(Gt,{placeholder:"Item description",...j,"data-testid":"input-item-description"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:h.control,name:"audioUrl",render:({field:j})=>e.jsxs(me,{children:[e.jsx(he,{children:"Audio URL (Optional)"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"https://... (MP3, WAV)",...j,"data-testid":"input-audio-url"})}),e.jsx(ye,{})]})}),h.watch("audioUrl")&&e.jsx(fe,{control:h.control,name:"audioType",render:({field:j})=>e.jsxs(me,{children:[e.jsx(he,{children:"Audio Type"}),e.jsxs(Rt,{onValueChange:j.onChange,value:j.value,children:[e.jsx(xe,{children:e.jsx(Mt,{"data-testid":"select-audio-type",children:e.jsx(Ft,{placeholder:"Select audio type"})})}),e.jsx(Lt,{children:xxe.map(w=>e.jsx(te,{value:w.value,children:w.label},w.value))})]}),e.jsx(ye,{})]})}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(O,{type:"button",variant:"outline",onClick:()=>l(!1),"data-testid":"button-cancel-item",children:"Cancel"}),e.jsx(O,{type:"submit",disabled:g.isPending,"data-testid":"button-submit-item",children:g.isPending?"Adding...":"Add Item"})]})]})})]})]})]}),m.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:e.jsx("p",{children:"No program items yet. Add your first item to get started."})}):e.jsx("div",{className:"space-y-3",children:m.sort((j,w)=>j.orderIndex-w.orderIndex).map((j,w)=>{const _=dP.find(E=>E.value===j.itemType),P=(_==null?void 0:_.icon)||Un;return e.jsx($,{"data-testid":`program-item-${j.id}`,children:e.jsx(V,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex flex-col items-center gap-1",children:e.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center text-sm font-medium",children:w+1})}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(P,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("h4",{className:"font-medium",children:j.title})]}),j.speaker&&e.jsxs("p",{className:"text-sm text-muted-foreground mb-1",children:[e.jsx(Oy,{className:"w-3 h-3 inline mr-1"}),j.speaker]}),j.description&&e.jsx("p",{className:"text-sm text-muted-foreground",children:j.description})]}),j.audioUrl&&e.jsxs(ze,{variant:"secondary",children:[e.jsx(zn,{className:"w-3 h-3 mr-1"}),"Audio"]})]})})]})})},j.id)})}),e.jsx(ls,{}),e.jsx("div",{className:"flex justify-end gap-3",children:e.jsxs(O,{variant:"outline","data-testid":"button-download-pdf",children:[e.jsx(Al,{className:"w-4 h-4 mr-2"}),"Download PDF"]})})]})})})]})}const vxe=Dr({contentType:we().min(1,"Content type is required"),videoUrl:we().optional(),photoUrl:we().optional(),caption:we().min(1,"Caption is required")});function yxe(){const[,t]=Sc("/celebrity/:id/estate-content"),s=(t==null?void 0:t.id)||"",[r,n]=N.useState(!1),{toast:a}=Ht(),{data:i=[],isLoading:o}=Xe({queryKey:["/api/celebrity-memorials",s,"fan-content","admin"]}),l=Or({resolver:$r(vxe),defaultValues:{contentType:"",videoUrl:"",photoUrl:"",caption:""}}),c=yt({mutationFn:async m=>await(await pt("POST",`/api/celebrity-memorials/${s}/fan-content`,m)).json(),onSuccess:()=>{xt.invalidateQueries({queryKey:["/api/celebrity-memorials",s,"fan-content","admin"]}),n(!1),l.reset(),a({title:"Content Created",description:"Celebrity estate content has been created successfully."})},onError:()=>{a({title:"Error",description:"Failed to create content. Please try again.",variant:"destructive"})}}),d=yt({mutationFn:async m=>await(await pt("PATCH",`/api/celebrity-fan-content/${m}/publish`,{})).json(),onSuccess:()=>{xt.invalidateQueries({queryKey:["/api/celebrity-memorials",s,"fan-content","admin"]}),a({title:"Content Published",description:"Content is now visible to the public."})}}),u=m=>{c.mutate(m)};return e.jsxs("div",{className:"container mx-auto py-8 px-4 max-w-6xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"Celebrity Estate Content"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage exclusive content for fans (Admin Only)"})]}),e.jsxs(Os,{open:r,onOpenChange:n,children:[e.jsx(si,{asChild:!0,children:e.jsxs(O,{"data-testid":"button-create-content",children:[e.jsx(bs,{className:"w-4 h-4 mr-2"}),"Upload Content"]})}),e.jsxs(Ds,{className:"max-w-2xl",children:[e.jsx(Is,{children:e.jsx(Rs,{children:"Upload Celebrity Content"})}),e.jsx(Wr,{...l,children:e.jsxs("form",{onSubmit:l.handleSubmit(u),className:"space-y-4",children:[e.jsx(fe,{control:l.control,name:"contentType",render:({field:m})=>e.jsxs(me,{children:[e.jsx(he,{children:"Content Type"}),e.jsxs(Rt,{onValueChange:m.onChange,value:m.value,children:[e.jsx(xe,{children:e.jsx(Mt,{"data-testid":"select-content-type",children:e.jsx(Ft,{placeholder:"Select content type"})})}),e.jsxs(Lt,{children:[e.jsx(te,{value:"video_message",children:"Video Message"}),e.jsx(te,{value:"exclusive_photo",children:"Exclusive Photo"}),e.jsx(te,{value:"behind_the_scenes",children:"Behind the Scenes"}),e.jsx(te,{value:"tribute_video",children:"Tribute Video"})]})]}),e.jsx(ye,{})]})}),(l.watch("contentType")==="video_message"||l.watch("contentType")==="tribute_video")&&e.jsx(fe,{control:l.control,name:"videoUrl",render:({field:m})=>e.jsxs(me,{children:[e.jsx(he,{children:"Video URL"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"https://...",...m,"data-testid":"input-video-url"})}),e.jsx(ye,{})]})}),(l.watch("contentType")==="exclusive_photo"||l.watch("contentType")==="behind_the_scenes")&&e.jsx(fe,{control:l.control,name:"photoUrl",render:({field:m})=>e.jsxs(me,{children:[e.jsx(he,{children:"Photo URL"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"https://...",...m,"data-testid":"input-photo-url"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:l.control,name:"caption",render:({field:m})=>e.jsxs(me,{children:[e.jsx(he,{children:"Caption"}),e.jsx(xe,{children:e.jsx(Gt,{placeholder:"Describe this content...",rows:4,...m,"data-testid":"input-caption"})}),e.jsx(ye,{})]})}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(O,{type:"button",variant:"outline",onClick:()=>n(!1),"data-testid":"button-cancel",children:"Cancel"}),e.jsx(O,{type:"submit",disabled:c.isPending,"data-testid":"button-submit-content",children:c.isPending?"Uploading...":"Upload Content"})]})]})})]})]})]}),o?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-muted-foreground",children:"Loading content..."})}):i.length===0?e.jsxs($,{className:"p-12 text-center",children:[e.jsx(ta,{className:"w-16 h-16 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Content Yet"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Upload exclusive content for celebrity memorial fans"}),e.jsxs(O,{onClick:()=>n(!0),"data-testid":"button-upload-first",children:[e.jsx(bs,{className:"w-4 h-4 mr-2"}),"Upload Content"]})]}):e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:i.map(m=>e.jsxs($,{"data-testid":`card-content-${m.id}`,children:[e.jsx(le,{children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx(ge,{className:"text-base capitalize",children:m.contentType.replace(/_/g," ")}),e.jsx(ze,{variant:m.isPublished?"default":"secondary",children:m.isPublished?e.jsxs(e.Fragment,{children:[e.jsx(Ei,{className:"w-3 h-3 mr-1"}),"Published"]}):e.jsxs(e.Fragment,{children:[e.jsx(VI,{className:"w-3 h-3 mr-1"}),"Draft"]})})]})}),e.jsxs(V,{className:"space-y-3",children:[m.videoUrl&&e.jsx("div",{className:"aspect-video rounded-lg bg-black flex items-center justify-center",children:e.jsx(ta,{className:"w-12 h-12 text-white"})}),m.photoUrl&&e.jsx("div",{className:"aspect-square rounded-lg overflow-hidden",children:e.jsx("img",{src:m.photoUrl,alt:m.caption,className:"w-full h-full object-cover"})}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-3",children:m.caption}),m.isPublished&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.jsx(Ei,{className:"w-3 h-3 inline mr-1"}),m.viewCount," views"]}),!m.isPublished&&e.jsx(O,{size:"sm",className:"w-full",onClick:()=>d.mutate(m.id),disabled:d.isPending,"data-testid":`button-publish-${m.id}`,children:"Publish Content"})]})]},m.id))})]})}const jxe=Dr({recipientName:we().min(1,"Recipient name is required"),recipientEmail:we().email("Valid email is required"),occasion:we().min(1,"Occasion is required"),scheduledDate:we().min(1,"Scheduled date is required"),message:we().min(10,"Message must be at least 10 characters"),isRecurring:xn().default(!1),recurrencePattern:we().optional(),recurrenceCount:Ll().optional(),recurrenceEndDate:we().optional(),mediaAttachmentUrl:we().optional()}),uP=[{value:"birthday",label:"Birthday"},{value:"anniversary",label:"Anniversary"},{value:"holiday",label:"Holiday"},{value:"graduation",label:"Graduation"},{value:"wedding",label:"Wedding Day"},{value:"mothers_day",label:"Mother's Day"},{value:"fathers_day",label:"Father's Day"},{value:"custom",label:"Custom Occasion"}],bxe=[{value:"daily",label:"Every Day"},{value:"weekly",label:"Every Week"},{value:"monthly",label:"Every Month"},{value:"yearly",label:"Every Year"}],mP={birthday:"Happy Birthday! Though I'm not there to celebrate with you, I want you to know how proud I am of you. May your day be filled with joy and love.",anniversary:"Happy Anniversary! This special day reminds me of all the beautiful memories we shared. Cherish every moment.",holiday:"Wishing you a wonderful holiday season filled with love, warmth, and cherished memories of times we spent together.",mothers_day:"Happy Mother's Day! Your strength, love, and wisdom continue to inspire me every day.",fathers_day:"Happy Father's Day! Thank you for all the lessons, love, and guidance you've given me throughout the years.",graduation:"Congratulations on your graduation! This achievement makes me so proud. The future is bright ahead of you.",wedding:"Congratulations on your wedding! May your marriage be filled with endless love, laughter, and happiness."};function Nxe(){const[,t]=Sc("/memorial/:id/future-messages"),s=(t==null?void 0:t.id)||"",[r,n]=N.useState(!1),[a,i]=N.useState(""),{toast:o}=Ht(),{data:l=[],isLoading:c}=Xe({queryKey:["/api/memorials",s,"scheduled-messages"]}),d=Or({resolver:$r(jxe),defaultValues:{recipientName:"",recipientEmail:"",occasion:"",scheduledDate:"",message:"",isRecurring:!1,recurrencePattern:"",recurrenceCount:void 0,recurrenceEndDate:"",mediaAttachmentUrl:""}}),u=yt({mutationFn:async h=>{const p={recipientName:h.recipientName,recipientEmail:h.recipientEmail,eventType:h.occasion,eventDate:h.scheduledDate.split("T")[0],sendTime:h.scheduledDate.split("T")[1],message:h.message,isRecurring:h.isRecurring,recurrenceInterval:h.recurrencePattern,recurrenceCount:h.recurrenceCount,recurrenceEndDate:h.recurrenceEndDate||void 0,attachmentUrls:h.mediaAttachmentUrl?[h.mediaAttachmentUrl]:void 0,status:"pending"};return await(await pt("POST",`/api/memorials/${s}/scheduled-messages`,p)).json()},onSuccess:()=>{xt.invalidateQueries({queryKey:["/api/memorials",s,"scheduled-messages"]}),n(!1),d.reset(),o({title:"Message Scheduled",description:"Future message has been scheduled successfully."})},onError:()=>{o({title:"Error",description:"Failed to schedule message. Please try again.",variant:"destructive"})}}),m=h=>{u.mutate(h)},f=h=>{i(h),mP[h]&&d.setValue("message",mP[h])};return e.jsxs("div",{className:"container mx-auto py-8 px-4 max-w-6xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"Future Messages"}),e.jsx("p",{className:"text-muted-foreground",children:"Schedule heartfelt messages for future occasions"})]}),e.jsxs(Os,{open:r,onOpenChange:n,children:[e.jsx(si,{asChild:!0,children:e.jsxs(O,{"data-testid":"button-create-message",children:[e.jsx(bs,{className:"w-4 h-4 mr-2"}),"Schedule Message"]})}),e.jsxs(Ds,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Is,{children:e.jsx(Rs,{children:"Schedule Future Message"})}),e.jsx(Wr,{...d,children:e.jsxs("form",{onSubmit:d.handleSubmit(m),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(fe,{control:d.control,name:"recipientName",render:({field:h})=>e.jsxs(me,{children:[e.jsx(he,{children:"Recipient Name"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"Full name",...h,"data-testid":"input-recipient-name"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:d.control,name:"recipientEmail",render:({field:h})=>e.jsxs(me,{children:[e.jsx(he,{children:"Recipient Email"}),e.jsx(xe,{children:e.jsx(re,{type:"email",placeholder:"email@example.com",...h,"data-testid":"input-recipient-email"})}),e.jsx(ye,{})]})})]}),e.jsx(fe,{control:d.control,name:"occasion",render:({field:h})=>e.jsxs(me,{children:[e.jsx(he,{children:"Occasion"}),e.jsxs(Rt,{onValueChange:p=>{h.onChange(p),f(p)},value:h.value,children:[e.jsx(xe,{children:e.jsx(Mt,{"data-testid":"select-occasion",children:e.jsx(Ft,{placeholder:"Select occasion"})})}),e.jsx(Lt,{children:uP.map(p=>e.jsx(te,{value:p.value,children:p.label},p.value))})]}),e.jsx(Qt,{children:"Selecting an occasion will auto-fill a template message"}),e.jsx(ye,{})]})}),e.jsx(fe,{control:d.control,name:"scheduledDate",render:({field:h})=>e.jsxs(me,{children:[e.jsx(he,{children:"Scheduled Date & Time"}),e.jsx(xe,{children:e.jsx(re,{type:"datetime-local",...h,"data-testid":"input-scheduled-date"})}),e.jsx(Qt,{children:"When should this message be sent?"}),e.jsx(ye,{})]})}),e.jsx(fe,{control:d.control,name:"message",render:({field:h})=>e.jsxs(me,{children:[e.jsx(he,{children:"Message"}),e.jsx(xe,{children:e.jsx(Gt,{placeholder:"Write your message here...",rows:6,...h,"data-testid":"input-message"})}),e.jsx(Qt,{children:"This message will be sent to the recipient on the scheduled date"}),e.jsx(ye,{})]})}),e.jsx(fe,{control:d.control,name:"mediaAttachmentUrl",render:({field:h})=>e.jsxs(me,{children:[e.jsx(he,{children:"Media Attachment URL (Optional)"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"https://... (photo or video)",...h,"data-testid":"input-media-url"})}),e.jsx(Qt,{children:"Include a photo or video with your message"}),e.jsx(ye,{})]})}),e.jsx(fe,{control:d.control,name:"isRecurring",render:({field:h})=>e.jsxs(me,{className:"flex items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsxs(he,{className:"text-base flex items-center gap-2",children:[e.jsx(Ox,{className:"w-4 h-4"}),"Recurring Message"]}),e.jsx(Qt,{children:"Send this message every year on this date"})]}),e.jsx(xe,{children:e.jsx(ir,{checked:h.value,onCheckedChange:h.onChange,"data-testid":"switch-recurring"})})]})}),d.watch("isRecurring")&&e.jsxs(e.Fragment,{children:[e.jsx(fe,{control:d.control,name:"recurrencePattern",render:({field:h})=>e.jsxs(me,{children:[e.jsx(he,{children:"Recurrence Pattern"}),e.jsxs(Rt,{onValueChange:h.onChange,value:h.value,children:[e.jsx(xe,{children:e.jsx(Mt,{"data-testid":"select-recurrence",children:e.jsx(Ft,{placeholder:"Select pattern"})})}),e.jsx(Lt,{children:bxe.map(p=>e.jsx(te,{value:p.value,children:p.label},p.value))})]}),e.jsx(ye,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(fe,{control:d.control,name:"recurrenceCount",render:({field:h})=>e.jsxs(me,{children:[e.jsx(he,{children:"Number of Occurrences"}),e.jsx(xe,{children:e.jsx(re,{type:"number",min:"1",placeholder:"Leave empty for forever",...h,value:h.value||"",onChange:p=>h.onChange(p.target.value?parseInt(p.target.value):void 0),"data-testid":"input-recurrence-count"})}),e.jsx(Qt,{children:"How many times to repeat"}),e.jsx(ye,{})]})}),e.jsx(fe,{control:d.control,name:"recurrenceEndDate",render:({field:h})=>e.jsxs(me,{children:[e.jsx(he,{children:"End Date (Optional)"}),e.jsx(xe,{children:e.jsx(re,{type:"date",...h,"data-testid":"input-recurrence-end-date"})}),e.jsx(Qt,{children:"When to stop recurring"}),e.jsx(ye,{})]})})]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(O,{type:"button",variant:"outline",onClick:()=>n(!1),"data-testid":"button-cancel",children:"Cancel"}),e.jsx(O,{type:"submit",disabled:u.isPending,"data-testid":"button-submit-message",children:u.isPending?"Scheduling...":"Schedule Message"})]})]})})]})]})]}),c?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-muted-foreground",children:"Loading messages..."})}):l.length===0?e.jsxs($,{className:"p-12 text-center",children:[e.jsx(Ti,{className:"w-16 h-16 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Scheduled Messages Yet"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Schedule messages to be delivered to loved ones on future occasions"}),e.jsxs(O,{onClick:()=>n(!0),"data-testid":"button-schedule-first",children:[e.jsx(bs,{className:"w-4 h-4 mr-2"}),"Schedule Message"]})]}):e.jsx("div",{className:"grid gap-6",children:l.map(h=>{var y;const p=new Date(h.scheduledDate),g=p<new Date;return e.jsxs($,{"data-testid":`card-message-${h.id}`,children:[e.jsx(le,{children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ge,{className:"text-lg",children:h.recipientName}),h.isSent?e.jsx(ze,{variant:"secondary","data-testid":`badge-sent-${h.id}`,children:"Sent"}):g?e.jsx(ze,{variant:"outline","data-testid":`badge-pending-${h.id}`,children:"Pending"}):e.jsx(ze,{"data-testid":`badge-scheduled-${h.id}`,children:"Scheduled"}),h.isRecurring&&e.jsxs(ze,{variant:"secondary","data-testid":`badge-recurring-${h.id}`,children:[e.jsx(Ox,{className:"w-3 h-3 mr-1"}),"Recurring"]})]}),e.jsxs($e,{className:"flex items-center gap-2",children:[e.jsx(ds,{className:"w-4 h-4"}),((y=uP.find(v=>v.value===h.occasion))==null?void 0:y.label)||h.occasion,"  ",e.jsx(Mr,{className:"w-4 h-4"}),Pr(p,"MMM d, yyyy 'at' h:mm a")]})]})})}),e.jsxs(V,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"Message"}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-3",children:h.message})]}),h.mediaAttachmentUrl&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"Attachment"}),e.jsx("div",{className:"text-sm text-muted-foreground flex items-center gap-2",children:e.jsx(ze,{variant:"outline",children:"Media included"})})]}),e.jsx(ls,{}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ti,{className:"w-4 h-4"}),h.recipientEmail]}),h.isSent&&h.sentAt&&e.jsxs("span",{className:"text-xs",children:["Sent ",Pr(new Date(h.sentAt),"MMM d, yyyy")]})]})]})]},h.id)})})]})}const wxe={birthday:"Birthday",graduation:"Graduation",wedding:"Wedding",anniversary:"Anniversary",baby_birth:"Baby Birth",mother_day:"Mother's Day",father_day:"Father's Day",christmas:"Christmas",new_year:"New Year",holiday:"Holiday",custom:"Custom Event"},hP={draft:{label:"Draft",color:"bg-gray-500/20 text-gray-100 border-gray-500/30"},pending:{label:"Pending",color:"bg-purple-500/20 text-purple-100 border-purple-500/30"},sent:{label:"Sent",color:"bg-green-500/20 text-green-100 border-green-500/30"},failed:{label:"Failed",color:"bg-red-500/20 text-red-100 border-red-500/30"}};function _xe(){const{data:t,isLoading:s}=Xe({queryKey:["/api/scheduled-messages/upcoming"]}),n=Tw(new Date),a=Zk(n,7),i=Zk(n,30),o=h=>{if(/^\d{4}-\d{2}-\d{2}$/.test(h)){const[p,g,y]=h.split("-").map(Number);return new Date(p,g-1,y)}return e1(h)},l=(t==null?void 0:t.filter(h=>!h.isSent&&h.eventDate&&!ux(o(h.eventDate),n)))||[],c=l.filter(h=>h.eventDate&&ux(o(h.eventDate),a)),d=l.filter(h=>h.eventDate&&ux(o(h.eventDate),i)),u=(t==null?void 0:t.filter(h=>h.status==="draft"))||[],m=(t==null?void 0:t.filter(h=>h.isSent))||[],f=({message:h})=>{const p=h.eventType==="custom"&&h.customEventName?h.customEventName:wxe[h.eventType]||h.eventType,g=hP[h.status]||hP.pending,y=h.eventDate?o(h.eventDate):null;return e.jsxs($,{className:"hover-elevate active-elevate-2 transition-all","data-testid":`card-message-${h.id}`,children:[e.jsx(le,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs(ge,{className:"text-lg mb-1 flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"truncate",children:h.recipientName}),h.isRecurring&&e.jsxs(ze,{variant:"outline",className:"bg-purple-500/10 border-purple-500/30 text-purple-200",children:[e.jsx(ds,{className:"w-3 h-3 mr-1"}),"Recurring"]})]}),e.jsxs($e,{className:"flex items-center gap-2 text-sm",children:[e.jsx(ze,{className:`${g.color} border`,children:g.label}),e.jsx("span",{className:"text-purple-300",children:""}),e.jsx("span",{className:"truncate",children:p})]})]}),y&&e.jsxs("div",{className:"text-right shrink-0",children:[e.jsx("div",{className:"text-sm font-medium text-purple-200",children:Pr(y,"MMM d, yyyy")}),h.sendTime&&e.jsxs("div",{className:"text-xs text-purple-400 flex items-center justify-end gap-1 mt-1",children:[e.jsx(Mr,{className:"w-3 h-3"}),h.sendTime]})]})]})}),e.jsxs(V,{className:"space-y-3",children:[e.jsx("div",{className:"text-sm text-purple-200 line-clamp-2",children:h.message}),h.recipientEmail&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-purple-300",children:[e.jsx(Ti,{className:"w-3 h-3"}),h.recipientEmail]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-purple-700/30",children:[e.jsx("div",{className:"text-xs text-purple-400",children:h.memorialName&&e.jsxs("span",{children:["For ",h.memorialName]})}),e.jsx(He,{href:`/memorial/${h.memorialId}/future-messages`,children:e.jsxs(O,{variant:"ghost",size:"sm","data-testid":`button-view-memorial-${h.id}`,children:["View Memorial",e.jsx(Fd,{className:"w-4 h-4 ml-1"})]})})]})]})]})};return s?e.jsxs("div",{className:"container mx-auto p-6 max-w-7xl",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx(tt,{className:"h-10 w-64 mb-2"}),e.jsx(tt,{className:"h-5 w-96"})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[1,2,3,4,5,6].map(h=>e.jsx(tt,{className:"h-48"},h))})]}):e.jsxs("div",{className:"container mx-auto p-6 max-w-7xl",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold mb-2 bg-gradient-to-r from-purple-200 to-gold-200 bg-clip-text text-transparent",children:"Upcoming Messages"}),e.jsx("p",{className:"text-purple-300",children:"Manage all your scheduled messages across all memorials"})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-3 mb-8",children:[e.jsxs($,{children:[e.jsx(le,{className:"pb-3",children:e.jsx(ge,{className:"text-sm font-medium text-purple-300",children:"Next 7 Days"})}),e.jsxs(V,{children:[e.jsx("div",{className:"text-3xl font-bold text-purple-100",children:c.length}),e.jsx("p",{className:"text-xs text-purple-400 mt-1",children:"Messages scheduled"})]})]}),e.jsxs($,{children:[e.jsx(le,{className:"pb-3",children:e.jsx(ge,{className:"text-sm font-medium text-purple-300",children:"Next 30 Days"})}),e.jsxs(V,{children:[e.jsx("div",{className:"text-3xl font-bold text-purple-100",children:d.length}),e.jsx("p",{className:"text-xs text-purple-400 mt-1",children:"Messages scheduled"})]})]}),e.jsxs($,{children:[e.jsx(le,{className:"pb-3",children:e.jsx(ge,{className:"text-sm font-medium text-purple-300",children:"Total Upcoming"})}),e.jsxs(V,{children:[e.jsx("div",{className:"text-3xl font-bold text-purple-100",children:l.length}),e.jsx("p",{className:"text-xs text-purple-400 mt-1",children:"All future messages"})]})]})]}),e.jsxs(ba,{defaultValue:"upcoming",className:"space-y-6",children:[e.jsxs(ra,{className:"bg-purple-900/30",children:[e.jsxs(qt,{value:"upcoming","data-testid":"tab-upcoming",children:[e.jsx(Nn,{className:"w-4 h-4 mr-2"}),"Upcoming (",l.length,")"]}),e.jsxs(qt,{value:"next7","data-testid":"tab-next7",children:[e.jsx(ds,{className:"w-4 h-4 mr-2"}),"Next 7 Days (",c.length,")"]}),e.jsxs(qt,{value:"drafts","data-testid":"tab-drafts",children:[e.jsx(T0,{className:"w-4 h-4 mr-2"}),"Drafts (",u.length,")"]}),e.jsxs(qt,{value:"sent","data-testid":"tab-sent",children:[e.jsx(Ti,{className:"w-4 h-4 mr-2"}),"Sent (",m.length,")"]})]}),e.jsx(Vt,{value:"upcoming",className:"space-y-6",children:l.length===0?e.jsx($,{children:e.jsxs(V,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(Nn,{className:"w-16 h-16 text-purple-500/50 mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No Upcoming Messages"}),e.jsx("p",{className:"text-purple-400 text-center max-w-md",children:"You don't have any scheduled messages. Create future messages from individual memorial pages."})]})}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:l.map(h=>e.jsx(f,{message:h},h.id))})}),e.jsx(Vt,{value:"next7",className:"space-y-6",children:c.length===0?e.jsx($,{children:e.jsxs(V,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(ds,{className:"w-16 h-16 text-purple-500/50 mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No Messages in Next 7 Days"}),e.jsx("p",{className:"text-purple-400 text-center max-w-md",children:"No messages are scheduled to be sent in the next week."})]})}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:c.map(h=>e.jsx(f,{message:h},h.id))})}),e.jsx(Vt,{value:"drafts",className:"space-y-6",children:u.length===0?e.jsx($,{children:e.jsxs(V,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(T0,{className:"w-16 h-16 text-purple-500/50 mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No Draft Messages"}),e.jsx("p",{className:"text-purple-400 text-center max-w-md",children:"All your messages are scheduled or sent."})]})}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:u.map(h=>e.jsx(f,{message:h},h.id))})}),e.jsx(Vt,{value:"sent",className:"space-y-6",children:m.length===0?e.jsx($,{children:e.jsxs(V,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(Ti,{className:"w-16 h-16 text-purple-500/50 mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No Sent Messages"}),e.jsx("p",{className:"text-purple-400 text-center max-w-md",children:"Messages that have been delivered will appear here."})]})}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:m.map(h=>e.jsx(f,{message:h},h.id))})})]})]})}const Sxe=Dr({title:we().min(1,"Title is required"),description:we().optional(),videoUrl:we().url("Valid video URL is required"),thumbnailUrl:we().url().optional().or(wr("")),recipientName:we().optional(),recipientRelationship:we().optional(),milestoneType:we().min(1,"Milestone type is required"),customMilestoneName:we().optional(),releaseDate:we().min(1,"Release date is required"),releaseTime:we().regex(/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/).optional(),isRecurring:xn().default(!1),recurrenceInterval:Xn(["yearly"]).optional(),recurrenceEndDate:we().optional(),isPublic:xn().default(!1),requiresQRScan:xn().default(!1),status:Xn(["scheduled","released","viewed","expired"]).optional()}),fP=[{value:"birthday",label:"Birthday"},{value:"graduation",label:"Graduation"},{value:"wedding",label:"Wedding"},{value:"anniversary",label:"Anniversary"},{value:"baby_birth",label:"Baby Birth"},{value:"holiday",label:"Holiday"},{value:"custom",label:"Custom Milestone"}];function Cxe(){const[,t]=Sc("/memorial/:id/video-time-capsules"),s=(t==null?void 0:t.id)||"",[r,n]=N.useState(!1),[a,i]=N.useState(!1),[o,l]=N.useState(null),[c,d]=N.useState(!1),[u,m]=N.useState(null),{toast:f}=Ht(),{data:h}=Xe({queryKey:[`/api/memorials/${s}`]}),{data:p=[],isLoading:g}=Xe({queryKey:["/api/memorials",s,"video-time-capsules"]}),y=Or({resolver:$r(Sxe),defaultValues:{title:"",description:"",videoUrl:"",thumbnailUrl:"",recipientName:"",recipientRelationship:"",milestoneType:"",customMilestoneName:"",releaseDate:"",releaseTime:"00:00",isRecurring:!1,recurrenceInterval:void 0,recurrenceEndDate:"",isPublic:!1,requiresQRScan:!1,status:"scheduled"}}),v=yt({mutationFn:async k=>await(await pt("POST",`/api/memorials/${s}/video-time-capsules`,k)).json(),onSuccess:()=>{xt.invalidateQueries({queryKey:["/api/memorials",s,"video-time-capsules"]}),n(!1),i(!1),l(null),y.reset(),f({title:"Video Time Capsule Created",description:"Your video time capsule has been scheduled successfully."})},onError:()=>{f({title:"Error",description:"Failed to create video time capsule. Please try again.",variant:"destructive"})}}),j=yt({mutationFn:async({id:k,data:D})=>await(await pt("PATCH",`/api/video-time-capsules/${k}`,D)).json(),onSuccess:()=>{xt.invalidateQueries({queryKey:["/api/memorials",s,"video-time-capsules"]}),n(!1),i(!1),l(null),y.reset(),f({title:"Video Time Capsule Updated",description:"Your changes have been saved successfully."})},onError:()=>{f({title:"Error",description:"Failed to update video time capsule. Please try again.",variant:"destructive"})}}),w=yt({mutationFn:async k=>{await pt("DELETE",`/api/video-time-capsules/${k}`)},onSuccess:()=>{xt.invalidateQueries({queryKey:["/api/memorials",s,"video-time-capsules"]}),d(!1),m(null),f({title:"Video Time Capsule Deleted",description:"The video time capsule has been deleted successfully."})},onError:()=>{f({title:"Error",description:"Failed to delete video time capsule. Please try again.",variant:"destructive"})}}),_=k=>{a&&o?j.mutate({id:o.id,data:k}):v.mutate(k)},P=k=>{i(!0),l(k),y.reset({title:k.title,description:k.description||"",videoUrl:k.videoUrl,thumbnailUrl:k.thumbnailUrl||"",recipientName:k.recipientName||"",recipientRelationship:k.recipientRelationship||"",milestoneType:k.milestoneType,customMilestoneName:k.customMilestoneName||"",releaseDate:k.releaseDate,releaseTime:k.releaseTime,isRecurring:k.isRecurring,recurrenceInterval:k.recurrenceInterval,recurrenceEndDate:k.recurrenceEndDate||"",isPublic:k.isPublic,requiresQRScan:k.requiresQRScan}),n(!0)},E=k=>{m(k),d(!0)},L=()=>{u&&w.mutate(u)},T=k=>k.isReleased?e.jsx(ze,{className:"bg-green-600","data-testid":`badge-status-${k.id}`,children:"Released"}):k.status==="scheduled"?e.jsx(ze,{className:"bg-purple-600","data-testid":`badge-status-${k.id}`,children:"Scheduled"}):e.jsx(ze,{variant:"secondary","data-testid":`badge-status-${k.id}`,children:k.status}),M=k=>{const D=fP.find(z=>z.value===k);return(D==null?void 0:D.label)||k},F=(k,D=!0)=>{if(!k)return"Not set";const z=(h==null?void 0:h.timezone)||"America/New_York";return d$(k,z,D?"MMM d, yyyy h:mm a zzz":"MMM d, yyyy")};return e.jsxs("div",{className:"container mx-auto py-8 px-4 max-w-6xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2","data-testid":"heading-video-time-capsules",children:"Video Time Capsules"}),e.jsx("p",{className:"text-muted-foreground",children:"Pre-record video messages that automatically release on future milestones"})]}),e.jsxs(Os,{open:r,onOpenChange:k=>{n(k),k||(i(!1),l(null),y.reset())},children:[e.jsx(si,{asChild:!0,children:e.jsxs(O,{"data-testid":"button-create-capsule",children:[e.jsx(bs,{className:"w-4 h-4 mr-2"}),"Create Time Capsule"]})}),e.jsxs(Ds,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Is,{children:e.jsx(Rs,{"data-testid":"dialog-title-capsule",children:a?"Edit Video Time Capsule":"Create Video Time Capsule"})}),e.jsx(Wr,{...y,children:e.jsxs("form",{onSubmit:y.handleSubmit(_),className:"space-y-6",children:[e.jsx(fe,{control:y.control,name:"title",render:({field:k})=>e.jsxs(me,{children:[e.jsx(he,{children:"Title"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"e.g., Happy 18th Birthday Message",...k,"data-testid":"input-capsule-title"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:y.control,name:"description",render:({field:k})=>e.jsxs(me,{children:[e.jsx(he,{children:"Description (Optional)"}),e.jsx(xe,{children:e.jsx(Gt,{placeholder:"Add context about this video message...",...k,"data-testid":"textarea-capsule-description"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:y.control,name:"videoUrl",render:({field:k})=>e.jsxs(me,{children:[e.jsx(he,{children:"Video URL"}),e.jsx(xe,{children:e.jsx(re,{type:"url",placeholder:"https://example.com/video.mp4",...k,"data-testid":"input-video-url"})}),e.jsx(Qt,{children:"Supported formats: .mp4, .webm, .ogg, .mov, .m4v"}),e.jsx(ye,{})]})}),e.jsx(fe,{control:y.control,name:"thumbnailUrl",render:({field:k})=>e.jsxs(me,{children:[e.jsx(he,{children:"Thumbnail URL (Optional)"}),e.jsx(xe,{children:e.jsx(re,{type:"url",placeholder:"https://example.com/thumbnail.jpg",...k,"data-testid":"input-thumbnail-url"})}),e.jsx(ye,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(fe,{control:y.control,name:"recipientName",render:({field:k})=>e.jsxs(me,{children:[e.jsx(he,{children:"Recipient Name (Optional)"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"e.g., Sarah",...k,"data-testid":"input-recipient-name"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:y.control,name:"recipientRelationship",render:({field:k})=>e.jsxs(me,{children:[e.jsx(he,{children:"Relationship (Optional)"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"e.g., Daughter, Son, Friend",...k,"data-testid":"input-recipient-relationship"})}),e.jsx(ye,{})]})})]}),e.jsx(fe,{control:y.control,name:"milestoneType",render:({field:k})=>e.jsxs(me,{children:[e.jsx(he,{children:"Milestone Type"}),e.jsxs(Rt,{onValueChange:k.onChange,value:k.value,children:[e.jsx(xe,{children:e.jsx(Mt,{"data-testid":"select-milestone-type",children:e.jsx(Ft,{placeholder:"Select milestone type"})})}),e.jsx(Lt,{children:fP.map(D=>e.jsx(te,{value:D.value,"data-testid":`option-milestone-${D.value}`,children:D.label},D.value))})]}),e.jsx(ye,{})]})}),y.watch("milestoneType")==="custom"&&e.jsx(fe,{control:y.control,name:"customMilestoneName",render:({field:k})=>e.jsxs(me,{children:[e.jsx(he,{children:"Custom Milestone Name"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"e.g., First Day of College",...k,"data-testid":"input-custom-milestone"})}),e.jsx(ye,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(fe,{control:y.control,name:"releaseDate",render:({field:k})=>e.jsxs(me,{children:[e.jsx(he,{children:"Release Date"}),e.jsx(xe,{children:e.jsx(re,{type:"date",...k,"data-testid":"input-release-date"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:y.control,name:"releaseTime",render:({field:k})=>e.jsxs(me,{children:[e.jsx(he,{children:"Release Time"}),e.jsx(xe,{children:e.jsx(re,{type:"time",...k,"data-testid":"input-release-time"})}),e.jsx(ye,{})]})})]}),e.jsx(ls,{}),e.jsx(fe,{control:y.control,name:"isRecurring",render:({field:k})=>e.jsxs(me,{className:"flex items-center justify-between rounded-md border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(he,{children:"Recurring Release"}),e.jsx(Qt,{children:"Release this video every year on the same date (e.g., annual birthday message)"})]}),e.jsx(xe,{children:e.jsx(ir,{checked:k.value,onCheckedChange:k.onChange,"data-testid":"switch-recurring"})})]})}),y.watch("isRecurring")&&e.jsxs(e.Fragment,{children:[e.jsx(fe,{control:y.control,name:"recurrenceInterval",render:({field:k})=>e.jsxs(me,{children:[e.jsx(he,{children:"Recurrence Pattern"}),e.jsxs(Rt,{onValueChange:k.onChange,value:k.value,children:[e.jsx(xe,{children:e.jsx(Mt,{"data-testid":"select-recurrence-interval",children:e.jsx(Ft,{placeholder:"Select recurrence pattern"})})}),e.jsx(Lt,{children:e.jsx(te,{value:"yearly","data-testid":"option-recurrence-yearly",children:"Every Year"})})]}),e.jsx(ye,{})]})}),e.jsx(fe,{control:y.control,name:"recurrenceEndDate",render:({field:k})=>e.jsxs(me,{children:[e.jsx(he,{children:"End Recurrence On (Optional)"}),e.jsx(xe,{children:e.jsx(re,{type:"date",...k,"data-testid":"input-recurrence-end-date"})}),e.jsx(Qt,{children:"Leave empty for indefinite recurrence"}),e.jsx(ye,{})]})})]}),e.jsx(ls,{}),e.jsx(fe,{control:y.control,name:"isPublic",render:({field:k})=>e.jsxs(me,{className:"flex items-center justify-between rounded-md border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(he,{children:"Public Access"}),e.jsx(Qt,{children:"Allow anyone to view this video once released"})]}),e.jsx(xe,{children:e.jsx(ir,{checked:k.value,onCheckedChange:k.onChange,"data-testid":"switch-public"})})]})}),e.jsx(fe,{control:y.control,name:"requiresQRScan",render:({field:k})=>e.jsxs(me,{className:"flex items-center justify-between rounded-md border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(he,{children:"Require QR Code Scan"}),e.jsx(Qt,{children:"Video only accessible via QR code scan at memorial site"})]}),e.jsx(xe,{children:e.jsx(ir,{checked:k.value,onCheckedChange:k.onChange,"data-testid":"switch-qr-scan"})})]})}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(O,{type:"button",variant:"outline",onClick:()=>{n(!1),i(!1),l(null),y.reset()},"data-testid":"button-cancel",children:"Cancel"}),e.jsx(O,{type:"submit",disabled:v.isPending||j.isPending,"data-testid":"button-submit-capsule",children:v.isPending||j.isPending?"Saving...":a?"Update Capsule":"Create Capsule"})]})]})})]})]})]}),g?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-muted-foreground","data-testid":"text-loading",children:"Loading video time capsules..."})}):p.length===0?e.jsx($,{children:e.jsx(V,{className:"py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ta,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2","data-testid":"heading-no-capsules",children:"No Video Time Capsules Yet"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Create your first video time capsule to preserve precious moments for future milestones."})]})})}):e.jsx("div",{className:"grid gap-4",children:p.map(k=>e.jsxs($,{"data-testid":`card-capsule-${k.id}`,children:[e.jsx(le,{children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ge,{className:"text-xl","data-testid":`title-capsule-${k.id}`,children:k.title}),T(k)]}),k.description&&e.jsx($e,{"data-testid":`description-capsule-${k.id}`,children:k.description})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(O,{size:"icon",variant:"outline",onClick:()=>P(k),"data-testid":`button-edit-${k.id}`,children:e.jsx(Mg,{className:"w-4 h-4"})}),e.jsx(O,{size:"icon",variant:"outline",onClick:()=>E(k.id),"data-testid":`button-delete-${k.id}`,children:e.jsx(jc,{className:"w-4 h-4"})})]})]})}),e.jsxs(V,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground mb-1",children:"Milestone"}),e.jsxs("p",{className:"font-medium flex items-center gap-2","data-testid":`milestone-${k.id}`,children:[e.jsx(ds,{className:"w-4 h-4"}),k.milestoneType==="custom"&&k.customMilestoneName?k.customMilestoneName:M(k.milestoneType)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground mb-1",children:"Release Date"}),e.jsxs("p",{className:"font-medium flex items-center gap-2","data-testid":`release-date-${k.id}`,children:[e.jsx(Mr,{className:"w-4 h-4"}),k.nextReleaseDate?F(k.nextReleaseDate):F(u$(`${k.releaseDate}T${k.releaseTime||"00:00:00"}`,(h==null?void 0:h.timezone)||"America/New_York").toISOString())]})]}),k.recipientName&&e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground mb-1",children:"Recipient"}),e.jsxs("p",{className:"font-medium flex items-center gap-2","data-testid":`recipient-${k.id}`,children:[e.jsx(eu,{className:"w-4 h-4"}),k.recipientName]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground mb-1",children:"Views"}),e.jsxs("p",{className:"font-medium flex items-center gap-2","data-testid":`views-${k.id}`,children:[e.jsx(Ei,{className:"w-4 h-4"}),k.viewCount," (",k.uniqueViewers," unique)"]})]})]}),k.isRecurring&&e.jsx("div",{className:"mt-4 p-3 bg-purple-50 dark:bg-purple-950 rounded-md",children:e.jsxs("p",{className:"text-sm font-medium text-purple-900 dark:text-purple-100",children:["Recurring Release: Every year",k.recurrenceEndDate&&` until ${F(k.recurrenceEndDate,!1)}`,k.releasedCount>0&&` (Released ${k.releasedCount} times)`]})}),e.jsxs("div",{className:"mt-4 flex gap-2",children:[k.isPublic&&e.jsx(ze,{variant:"outline","data-testid":`badge-public-${k.id}`,children:"Public"}),k.requiresQRScan&&e.jsx(ze,{variant:"outline","data-testid":`badge-qr-${k.id}`,children:"QR Code Only"})]})]})]},k.id))}),e.jsx(qU,{open:c,onOpenChange:d,children:e.jsxs(H4,{children:[e.jsxs(W4,{children:[e.jsx(Y4,{"data-testid":"dialog-title-delete",children:"Delete Video Time Capsule?"}),e.jsx(G4,{children:"This action cannot be undone. The video time capsule will be permanently deleted."})]}),e.jsxs(K4,{children:[e.jsx(Z4,{"data-testid":"button-cancel-delete",children:"Cancel"}),e.jsx(Q4,{onClick:L,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90","data-testid":"button-confirm-delete",children:"Delete"})]})]})})]})}const pP=[{id:"all",label:"All Products"},{id:"plaques",label:"Plaques"},{id:"headstone-markers",label:"Headstone Markers"},{id:"memorial-cards",label:"Memorial Cards"},{id:"urns",label:"Urns"},{id:"keepsakes",label:"Keepsakes"}];function kxe(){const[t,s]=N.useState("all"),{data:r=[],isLoading:n,error:a}=Xe({queryKey:["/api/products"]}),i=t==="all"?r:r.filter(o=>o.category===t);return e.jsxs("div",{className:"min-h-screen bg-background","data-testid":"products-page",children:[e.jsx("div",{className:"bg-gradient-to-br from-primary/20 via-primary/10 to-background border-b border-border",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 sm:py-24",children:e.jsxs("div",{className:"text-center max-w-3xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-6",children:[e.jsx(_i,{className:"w-10 h-10 text-primary"}),e.jsx(or,{className:"w-10 h-10 text-primary"})]}),e.jsx("h1",{className:"text-4xl sm:text-5xl font-serif font-bold mb-6",children:"Memorial Products with QR Technology"}),e.jsx("p",{className:"text-lg text-muted-foreground leading-relaxed",children:"Beautiful physical memorial products that seamlessly connect to digital memorials. Each product features an embedded QR code, allowing visitors to access photos, videos, and memories with a simple scan."})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsxs("div",{className:"mb-12",children:[e.jsx("h2",{className:"text-sm font-semibold text-muted-foreground mb-4",children:"FILTER BY CATEGORY"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:pP.map(o=>e.jsx(O,{variant:t===o.id?"default":"outline",size:"sm",onClick:()=>s(o.id),"data-testid":`filter-${o.id}`,className:"transition-all",children:o.label},o.id))})]}),n&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[1,2,3,4,5,6,7,8].map(o=>e.jsxs($,{children:[e.jsxs(le,{children:[e.jsx(tt,{className:"h-48 w-full rounded-lg mb-4"}),e.jsx(tt,{className:"h-6 w-3/4"}),e.jsx(tt,{className:"h-4 w-1/2"})]}),e.jsxs(V,{children:[e.jsx(tt,{className:"h-4 w-full mb-2"}),e.jsx(tt,{className:"h-4 w-5/6"})]}),e.jsx(mo,{children:e.jsx(tt,{className:"h-10 w-full"})})]},o))}),a&&e.jsxs("div",{className:"text-center py-16",children:[e.jsx(_i,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Unable to Load Products"}),e.jsx("p",{className:"text-muted-foreground",children:"Please try again later."})]}),!n&&!a&&i.length===0&&e.jsxs("div",{className:"text-center py-16",children:[e.jsx(_i,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:t==="all"?"Products Coming Soon":"No Products Found"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:t==="all"?"We're preparing our collection of memorial products with QR technology. Check back soon!":"No products available in this category yet."}),t!=="all"&&e.jsx(O,{variant:"outline",onClick:()=>s("all"),children:"View All Products"})]}),!n&&!a&&i.length>0&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:i.map(o=>{var l;return e.jsxs($,{className:"hover-elevate flex flex-col","data-testid":`product-card-${o.id}`,children:[e.jsxs(le,{className:"pb-3",children:[e.jsx("div",{className:"aspect-square rounded-lg overflow-hidden bg-gradient-to-br from-primary/20 via-primary/10 to-muted mb-4 flex items-center justify-center",children:o.images&&o.images.length>0?e.jsx("img",{src:o.images[0],alt:o.name,className:"w-full h-full object-cover"}):e.jsxs("div",{className:"text-center p-6",children:[e.jsx(_i,{className:"w-16 h-16 text-primary/40 mx-auto mb-2"}),e.jsx(or,{className:"w-8 h-8 text-primary/40 mx-auto"})]})}),e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[e.jsx(ge,{className:"text-lg line-clamp-2",children:o.name}),e.jsx(ze,{variant:"secondary",className:"shrink-0",children:((l=pP.find(c=>c.id===o.category))==null?void 0:l.label)||o.category})]}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsxs("span",{className:"text-2xl font-bold",children:["$",parseFloat(o.basePrice).toFixed(2)]}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"base price"})]})]}),e.jsxs(V,{className:"flex-1 pb-3",children:[e.jsx($e,{className:"line-clamp-3",children:o.description}),o.stockStatus&&o.stockStatus!=="in_stock"&&e.jsx("div",{className:"mt-3",children:e.jsxs(ze,{variant:o.stockStatus==="low_stock"?"default":o.stockStatus==="out_of_stock"?"destructive":"secondary",children:[o.stockStatus==="low_stock"&&"Low Stock",o.stockStatus==="out_of_stock"&&"Out of Stock",o.stockStatus==="pre_order"&&"Pre-Order"]})})]}),e.jsx(mo,{children:e.jsx(He,{href:`/products/${o.id}/customize`,className:"w-full",children:e.jsxs(O,{className:"w-full gap-2",disabled:o.stockStatus==="out_of_stock","data-testid":`button-customize-${o.id}`,children:[e.jsx(Bs,{className:"w-4 h-4"}),"Customize & Order"]})})})]},o.id)})}),!n&&i.length>0&&e.jsx("div",{className:"mt-16 bg-card border border-border rounded-lg p-8",children:e.jsxs("div",{className:"max-w-3xl mx-auto text-center",children:[e.jsx(or,{className:"w-12 h-12 text-primary mx-auto mb-4"}),e.jsx("h3",{className:"text-2xl font-serif font-semibold mb-3",children:"Every Product Includes QR Technology"}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"Each memorial product features a custom QR code that links to your loved one's digital memorial. Visitors can scan the code to view photos, videos, memories, and leave their own condolences creating a lasting bridge between the physical and digital worlds."})]})})]})]})}const Axe=YF("pk_test_51SRjnR96jHydbgOxUFZjvSWSeQphnoU2b1Vd31fAuOC468pP5CokiueX7T9WSsQ0skKhOniLrRME4V82JcGUIQa800pTAsFGFZ"),Pxe=Dr({fullName:we().min(1,"Full name is required"),addressLine1:we().min(1,"Address is required"),addressLine2:we().optional(),city:we().min(1,"City is required"),state:we().min(1,"State is required"),zipCode:we().min(5,"Valid ZIP code is required"),country:we().min(1,"Country is required"),phone:we().min(10,"Valid phone number is required")}),xP=[{number:1,title:"Product",description:"Review details"},{number:2,title:"Customize",description:"Personalize"},{number:3,title:"Shipping",description:"Delivery address"},{number:4,title:"Payment",description:"Complete order"}];function Exe({orderId:t,clientSecret:s,onSuccess:r}){const n=zF(),a=BF(),{toast:i}=Ht(),[o,l]=N.useState(!1),c=async d=>{if(d.preventDefault(),!(!n||!a)){l(!0);try{const{error:u,paymentIntent:m}=await n.confirmPayment({elements:a,confirmParams:{return_url:`${window.location.origin}/orders/${t}`},redirect:"if_required"});u?(i({title:"Payment Failed",description:u.message,variant:"destructive"}),l(!1)):m&&m.status==="succeeded"&&(await pt("PATCH",`/api/product-orders/${t}`,{paymentStatus:"paid",paymentIntentId:m.id}),i({title:"Order Placed Successfully",description:"Your memorial product order has been confirmed."}),r())}catch(u){i({title:"Error",description:u.message||"Failed to process payment",variant:"destructive"}),l(!1)}}};return e.jsxs("form",{onSubmit:c,className:"space-y-6",children:[e.jsx(qF,{}),e.jsx("div",{className:"flex gap-3 pt-4",children:e.jsx(O,{type:"submit",disabled:!n||o,className:"flex-1",size:"lg","data-testid":"button-place-order",children:o?e.jsxs(e.Fragment,{children:[e.jsx(tn,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(N_,{className:"w-4 h-4 mr-2"}),"Place Order"]})})}),e.jsx("p",{className:"text-xs text-center text-muted-foreground",children:"Secure payment powered by Stripe"})]})}function Txe(){var Z,J,se,je,be;const[,t]=Sc("/products/:productId/customize"),[,s]=ja(),{toast:r}=Ht(),{user:n,isAuthenticated:a}=fo(),[i,o]=N.useState(1),[l,c]=N.useState(1),[d,u]=N.useState({}),[m,f]=N.useState(null),[h,p]=N.useState(null),[g,y]=N.useState(null),[v,j]=N.useState(!1),[w,_]=N.useState(""),[P,E]=N.useState("realistic"),[L,T]=N.useState(null),[M,F]=N.useState(!1),k=Or({resolver:$r(Pxe),defaultValues:{fullName:"",addressLine1:"",addressLine2:"",city:"",state:"",zipCode:"",country:"USA",phone:""}}),{data:D,isLoading:z}=Xe({queryKey:["/api/products",t==null?void 0:t.productId],enabled:!!(t!=null&&t.productId)}),{data:W=[]}=Xe({queryKey:["/api/user/memorials"],enabled:a}),ue=yt({mutationFn:async q=>(await pt("POST","/api/product-orders",q)).json(),onSuccess:q=>{p(q.id),xt.invalidateQueries({queryKey:["/api/product-orders"]})},onError:q=>{r({title:"Error Creating Order",description:q.message,variant:"destructive"})}}),ae=yt({mutationFn:async q=>(await pt("POST",`/api/product-orders/${q}/payment-intent`,{})).json(),onSuccess:q=>{y(q.clientSecret)},onError:q=>{r({title:"Error Initializing Payment",description:q.message,variant:"destructive"})}}),Ne=yt({mutationFn:async q=>(await pt("POST","/api/products/generate-ai-design",q)).json(),onSuccess:q=>{T(q.imageUrl),F(!1),r({title:"Design Generated",description:"Your AI-generated design is ready!"})},onError:q=>{F(!1),r({title:"Generation Failed",description:q.message||"Failed to generate AI design",variant:"destructive"})}});if(N.useEffect(()=>{if(i===4&&!h&&D&&m){const q={...d,aiDesignEnabled:v,aiDesignPrompt:v?w:void 0,aiDesignStyle:v?P:void 0,aiDesignImageUrl:v?L:void 0};ue.mutate({productId:D.id,quantity:l,customization:q,shippingAddress:m,memorialId:d.memorialId||null})}},[i,D,m,h]),N.useEffect(()=>{h&&!g&&!ae.isPending&&ae.mutate(h)},[h,g]),!a)return e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:e.jsxs($,{className:"w-full max-w-md",children:[e.jsxs(le,{children:[e.jsx(ge,{children:"Login Required"}),e.jsx($e,{children:"Please login to customize and order products."})]}),e.jsx(V,{children:e.jsx(O,{onClick:()=>window.location.href="/api/login",className:"w-full",children:"Login to Continue"})})]})});if(z)return e.jsx("div",{className:"min-h-screen bg-background p-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto py-12",children:[e.jsx(tt,{className:"h-12 w-64 mb-8"}),e.jsxs($,{children:[e.jsx(le,{children:e.jsx(tt,{className:"h-48 w-full"})}),e.jsx(V,{children:e.jsx(tt,{className:"h-32 w-full"})})]})]})});if(!D)return e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:e.jsxs($,{className:"w-full max-w-md",children:[e.jsxs(le,{children:[e.jsx(ge,{children:"Product Not Found"}),e.jsx($e,{children:"The product you're looking for doesn't exist."})]}),e.jsx(V,{children:e.jsx(O,{onClick:()=>s("/products"),className:"w-full",children:"Back to Products"})})]})});const K=()=>{const q=parseFloat(D.basePrice)*l,Te=v?15:0,Be=15,Ve=(q+Te)*.08;return q+Te+Be+Ve},Q=()=>{if(!w.trim()){r({title:"Prompt Required",description:"Please enter a design prompt",variant:"destructive"});return}F(!0);const q=W.find(Te=>Te.id===d.memorialId);Ne.mutate({prompt:w,style:P,deceasedName:q==null?void 0:q.name})},ke=()=>{if(i===2&&v&&!L){r({title:"AI Design Required",description:"Please generate your AI design before continuing",variant:"destructive"});return}i===3?k.handleSubmit(q=>{f(q),o(4)})():o(q=>Math.min(q+1,4))},G=()=>{o(q=>Math.max(q-1,1))},I=()=>{h&&s(`/orders/${h}`)};return e.jsx("div",{className:"min-h-screen bg-background py-12 px-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs(O,{variant:"ghost",size:"sm",onClick:()=>s("/products"),className:"mb-4",children:[e.jsx(Sr,{className:"w-4 h-4 mr-2"}),"Back to Products"]}),e.jsx("h1",{className:"text-3xl font-serif font-bold mb-2",children:"Customize Your Order"}),e.jsx("p",{className:"text-muted-foreground",children:D.name})]}),e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"flex items-center justify-between",children:xP.map((q,Te)=>e.jsxs("div",{className:"flex items-center flex-1",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center border-2 transition-colors ${i>q.number?"bg-primary border-primary text-primary-foreground":i===q.number?"border-primary text-primary":"border-muted text-muted-foreground"}`,children:i>q.number?e.jsx($n,{className:"w-5 h-5"}):q.number}),e.jsxs("div",{className:"text-center mt-2",children:[e.jsx("div",{className:"text-sm font-semibold",children:q.title}),e.jsx("div",{className:"text-xs text-muted-foreground hidden sm:block",children:q.description})]})]}),Te<xP.length-1&&e.jsx("div",{className:`h-0.5 flex-1 mx-2 transition-colors ${i>q.number?"bg-primary":"bg-muted"}`})]},q.number))})}),e.jsxs($,{"data-testid":`step-${i}`,children:[i===1&&e.jsxs(e.Fragment,{children:[e.jsxs(le,{children:[e.jsx(ge,{children:"Product Details"}),e.jsx($e,{children:"Review the product and select quantity"})]}),e.jsxs(V,{className:"space-y-6",children:[e.jsxs("div",{className:"flex gap-6",children:[e.jsx("div",{className:"w-48 h-48 bg-gradient-to-br from-primary/20 to-muted rounded-lg flex items-center justify-center shrink-0",children:D.images&&D.images.length>0?e.jsx("img",{src:D.images[0],alt:D.name,className:"w-full h-full object-cover rounded-lg"}):e.jsx(_i,{className:"w-16 h-16 text-primary/40"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-2xl font-semibold mb-2",children:D.name}),e.jsx(ze,{className:"mb-4",children:D.category}),e.jsx("p",{className:"text-muted-foreground mb-4",children:D.description}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsxs("span",{className:"text-3xl font-bold",children:["$",parseFloat(D.basePrice).toFixed(2)]}),e.jsx("span",{className:"text-muted-foreground",children:"per item"})]})]})]}),e.jsx(ls,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{children:"Quantity"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(O,{type:"button",variant:"outline",size:"icon",onClick:()=>c(Math.max(1,l-1)),children:"-"}),e.jsx(re,{type:"number",min:"1",value:l,onChange:q=>c(Math.max(1,parseInt(q.target.value)||1)),className:"w-20 text-center"}),e.jsx(O,{type:"button",variant:"outline",size:"icon",onClick:()=>c(l+1),children:"+"}),e.jsxs("span",{className:"text-muted-foreground",children:[" $",parseFloat(D.basePrice).toFixed(2)," = $",(parseFloat(D.basePrice)*l).toFixed(2)]})]})]})]})]}),i===2&&e.jsxs(e.Fragment,{children:[e.jsxs(le,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Bs,{className:"w-5 h-5"}),"Customization Options"]}),e.jsx($e,{children:"Personalize your memorial product"})]}),e.jsxs(V,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{children:"Link to Memorial (Optional)"}),e.jsxs(Rt,{value:d.memorialId||"none",onValueChange:q=>u({...d,memorialId:q==="none"?null:q}),children:[e.jsx(Mt,{children:e.jsx(Ft,{placeholder:"Select a memorial to link"})}),e.jsxs(Lt,{children:[e.jsx(te,{value:"none",children:"No memorial"}),W.map(q=>e.jsx(te,{value:q.id,children:q.name},q.id))]})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"The QR code on your product will link to this memorial"})]}),((Z=D.customizationOptions)==null?void 0:Z.engraving)&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{children:"Engraving Text (Optional)"}),e.jsx(Gt,{placeholder:"Enter custom text for engraving...",maxLength:D.customizationOptions.engraving.maxCharacters,value:d.engravingText||"",onChange:q=>u({...d,engravingText:q.target.value})}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[(d.engravingText||"").length," / ",D.customizationOptions.engraving.maxCharacters," characters"]}),D.customizationOptions.engraving.fonts&&e.jsxs("div",{className:"space-y-2 mt-4",children:[e.jsx(De,{children:"Font Style"}),e.jsxs(Rt,{value:d.font||"",onValueChange:q=>u({...d,font:q}),children:[e.jsx(Mt,{children:e.jsx(Ft,{placeholder:"Select font style"})}),e.jsx(Lt,{children:D.customizationOptions.engraving.fonts.map(q=>e.jsx(te,{value:q,children:q},q))})]})]})]}),((J=D.customizationOptions)==null?void 0:J.materials)&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{children:"Material"}),e.jsxs(Rt,{value:d.material||"",onValueChange:q=>u({...d,material:q}),children:[e.jsx(Mt,{children:e.jsx(Ft,{placeholder:"Select material"})}),e.jsx(Lt,{children:D.customizationOptions.materials.map(q=>e.jsx(te,{value:q,children:q},q))})]})]}),((se=D.customizationOptions)==null?void 0:se.sizes)&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{children:"Size"}),e.jsxs(Rt,{value:d.size||"",onValueChange:q=>u({...d,size:q}),children:[e.jsx(Mt,{children:e.jsx(Ft,{placeholder:"Select size"})}),e.jsx(Lt,{children:D.customizationOptions.sizes.map(q=>e.jsx(te,{value:q,children:q},q))})]})]}),((je=D.customizationOptions)==null?void 0:je.qrPlacement)&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{children:"QR Code Placement"}),e.jsxs(Rt,{value:d.qrPlacement||"",onValueChange:q=>u({...d,qrPlacement:q}),children:[e.jsx(Mt,{children:e.jsx(Ft,{placeholder:"Select QR code placement"})}),e.jsx(Lt,{children:D.customizationOptions.qrPlacement.map(q=>e.jsx(te,{value:q,children:q},q))})]})]}),D.category==="memorial-cards"&&e.jsxs(e.Fragment,{children:[e.jsx(ls,{}),e.jsxs("div",{className:"bg-gradient-to-br from-primary/5 to-primary/10 rounded-lg p-4 space-y-4 border border-primary/20",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Rg,{id:"ai-design",checked:v,onCheckedChange:q=>{j(q),q||(T(null),_(""))},"data-testid":"checkbox-ai-design"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("label",{htmlFor:"ai-design",className:"text-sm font-semibold cursor-pointer flex items-center gap-2",children:[e.jsx(Bs,{className:"w-4 h-4 text-primary"}),"Add Custom AI-Generated Design",e.jsx(ze,{variant:"secondary",className:"ml-2",children:"+$15"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Create a unique, personalized design using AI"})]})]}),v&&e.jsxs("div",{className:"space-y-4 pl-7",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"ai-prompt",children:"Design Description"}),e.jsx(Gt,{id:"ai-prompt",placeholder:"Describe the design you envision...",value:w,onChange:q=>_(q.target.value),rows:3,"data-testid":"input-ai-prompt"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:'Example: "Peaceful garden scene with butterflies and roses at sunset"'})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"ai-style",children:"Art Style"}),e.jsxs(Rt,{value:P,onValueChange:E,children:[e.jsx(Mt,{id:"ai-style","data-testid":"select-ai-style",children:e.jsx(Ft,{})}),e.jsxs(Lt,{children:[e.jsx(te,{value:"realistic",children:"Realistic"}),e.jsx(te,{value:"watercolor",children:"Watercolor"}),e.jsx(te,{value:"oil_painting",children:"Oil Painting"}),e.jsx(te,{value:"digital_art",children:"Digital Art"}),e.jsx(te,{value:"sketch",children:"Sketch"})]})]})]}),!L&&e.jsx(O,{type:"button",onClick:Q,disabled:M||!w.trim(),className:"w-full","data-testid":"button-generate-design",children:M?e.jsxs(e.Fragment,{children:[e.jsx(tn,{className:"w-4 h-4 mr-2 animate-spin"}),"Generating Design..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Bs,{className:"w-4 h-4 mr-2"}),"Generate Design"]})}),L&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"relative rounded-lg overflow-hidden border border-primary/20",children:e.jsx("img",{src:L,alt:"AI Generated Design",className:"w-full h-64 object-cover","data-testid":"img-ai-design-preview"})}),e.jsxs(O,{type:"button",variant:"outline",onClick:()=>{T(null)},className:"w-full","data-testid":"button-regenerate-design",children:[e.jsx(Bs,{className:"w-4 h-4 mr-2"}),"Regenerate Design"]})]})]})]})]}),e.jsx(ls,{}),e.jsx("div",{className:"bg-accent/10 rounded-lg p-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-muted-foreground",children:["Base Price (",l," $",parseFloat(D.basePrice).toFixed(2),")"]}),e.jsxs("span",{className:"font-semibold",children:["$",(parseFloat(D.basePrice)*l).toFixed(2)]})]}),v&&e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-muted-foreground flex items-center gap-1",children:[e.jsx(Bs,{className:"w-3 h-3"}),"AI Design Premium"]}),e.jsx("span",{className:"font-semibold",children:"$15.00"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Other Customization"}),e.jsx("span",{className:"font-semibold",children:"$0.00"})]}),e.jsx(ls,{}),e.jsxs("div",{className:"flex justify-between text-lg",children:[e.jsx("span",{className:"font-semibold",children:"Total"}),e.jsxs("span",{className:"font-bold",children:["$",K().toFixed(2)]})]})]})})]})]}),i===3&&e.jsxs(e.Fragment,{children:[e.jsxs(le,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(tr,{className:"w-5 h-5"}),"Shipping Address"]}),e.jsx($e,{children:"Where should we deliver your order?"})]}),e.jsx(V,{children:e.jsx(Wr,{...k,children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(fe,{control:k.control,name:"fullName",render:({field:q})=>e.jsxs(me,{children:[e.jsx(he,{children:"Full Name *"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"John Smith",...q})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:k.control,name:"addressLine1",render:({field:q})=>e.jsxs(me,{children:[e.jsx(he,{children:"Address Line 1 *"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"123 Main Street",...q})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:k.control,name:"addressLine2",render:({field:q})=>e.jsxs(me,{children:[e.jsx(he,{children:"Address Line 2"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"Apt 4B",...q})}),e.jsx(ye,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(fe,{control:k.control,name:"city",render:({field:q})=>e.jsxs(me,{children:[e.jsx(he,{children:"City *"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"San Francisco",...q})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:k.control,name:"state",render:({field:q})=>e.jsxs(me,{children:[e.jsx(he,{children:"State *"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"CA",...q})}),e.jsx(ye,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(fe,{control:k.control,name:"zipCode",render:({field:q})=>e.jsxs(me,{children:[e.jsx(he,{children:"ZIP Code *"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"94102",...q})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:k.control,name:"country",render:({field:q})=>e.jsxs(me,{children:[e.jsx(he,{children:"Country *"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"USA",...q})}),e.jsx(ye,{})]})})]}),e.jsx(fe,{control:k.control,name:"phone",render:({field:q})=>e.jsxs(me,{children:[e.jsx(he,{children:"Phone Number *"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"(555) 123-4567",...q})}),e.jsx(ye,{})]})})]})})})]}),i===4&&e.jsxs(e.Fragment,{children:[e.jsxs(le,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(N_,{className:"w-5 h-5"}),"Review & Payment"]}),e.jsx($e,{children:"Review your order and complete payment"})]}),e.jsxs(V,{className:"space-y-6",children:[e.jsxs("div",{className:"bg-accent/10 rounded-lg p-4 space-y-4",children:[e.jsx("h3",{className:"font-semibold",children:"Order Summary"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Product"}),e.jsx("span",{className:"font-medium",children:D.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Quantity"}),e.jsx("span",{className:"font-medium",children:l})]}),d.memorialId&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Linked Memorial"}),e.jsx("span",{className:"font-medium",children:(be=W.find(q=>q.id===d.memorialId))==null?void 0:be.name})]}),d.engravingText&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Engraving"}),e.jsxs("span",{className:"font-medium",children:[d.engravingText.substring(0,30),"..."]})]}),v&&e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-muted-foreground flex items-center gap-1",children:[e.jsx(Bs,{className:"w-3 h-3"}),"AI Design"]}),e.jsx("span",{className:"font-medium",children:"Included"})]})]}),v&&L&&e.jsxs(e.Fragment,{children:[e.jsx(ls,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold text-sm",children:"AI-Generated Design Preview"}),e.jsx("div",{className:"relative rounded-lg overflow-hidden border border-primary/20",children:e.jsx("img",{src:L,alt:"AI Generated Design Preview",className:"w-full h-48 object-cover"})}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Style: ",P.replace("_"," "),"  ",w.substring(0,50),"..."]})]})]}),e.jsx(ls,{}),m&&e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsx("h4",{className:"font-semibold",children:"Shipping To:"}),e.jsxs("p",{className:"text-muted-foreground",children:[m.fullName,e.jsx("br",{}),m.addressLine1,e.jsx("br",{}),m.addressLine2&&e.jsxs(e.Fragment,{children:[m.addressLine2,e.jsx("br",{})]}),m.city,", ",m.state," ",m.zipCode,e.jsx("br",{}),m.country,e.jsx("br",{}),m.phone]})]}),e.jsx(ls,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Subtotal"}),e.jsxs("span",{className:"font-medium",children:["$",(parseFloat(D.basePrice)*l).toFixed(2)]})]}),v&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"text-muted-foreground flex items-center gap-1",children:[e.jsx(Bs,{className:"w-3 h-3"}),"AI Design Premium"]}),e.jsx("span",{className:"font-medium",children:"$15.00"})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Shipping"}),e.jsx("span",{className:"font-medium",children:"$15.00"})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Tax (8%)"}),e.jsxs("span",{className:"font-medium",children:["$",((parseFloat(D.basePrice)*l+(v?15:0))*.08).toFixed(2)]})]}),e.jsx(ls,{}),e.jsxs("div",{className:"flex justify-between text-lg",children:[e.jsx("span",{className:"font-semibold",children:"Total"}),e.jsxs("span",{className:"font-bold",children:["$",K().toFixed(2)]})]})]})]}),ue.isPending&&e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(tn,{className:"w-8 h-8 animate-spin text-primary"}),e.jsx("span",{className:"ml-3 text-muted-foreground",children:"Preparing payment..."})]}),ue.isError&&e.jsx("div",{className:"bg-destructive/10 border border-destructive/20 rounded-lg p-4 text-destructive text-sm",children:"Failed to create order. Please try again."}),g&&e.jsx(x4,{stripe:Axe,options:{clientSecret:g},children:e.jsx(Exe,{orderId:h,clientSecret:g,onSuccess:I})})]})]}),i<4&&e.jsxs(V,{className:"flex gap-3 pt-0",children:[i>1&&e.jsxs(O,{variant:"outline",onClick:G,className:"flex-1","data-testid":"button-back",children:[e.jsx(Sr,{className:"w-4 h-4 mr-2"}),"Back"]}),e.jsxs(O,{onClick:ke,className:"flex-1","data-testid":"button-next",children:["Next",e.jsx(j_,{className:"w-4 h-4 ml-2"})]})]}),i===4&&!g&&!ue.isPending&&e.jsx(V,{className:"pt-0",children:e.jsxs(O,{variant:"outline",onClick:G,className:"w-full","data-testid":"button-back",children:[e.jsx(Sr,{className:"w-4 h-4 mr-2"}),"Back to Shipping"]})})]})]})})}const Mxe=[{value:"all",label:"All Orders"},{value:"pending",label:"Pending"},{value:"processing",label:"Processing"},{value:"shipped",label:"Shipped"},{value:"delivered",label:"Delivered"}],gP={pending:{label:"Pending",variant:"secondary"},processing:{label:"Processing",variant:"default"},in_production:{label:"In Production",variant:"default"},shipped:{label:"Shipped",variant:"default"},delivered:{label:"Delivered",variant:"default"},cancelled:{label:"Cancelled",variant:"destructive"}};function Lxe(){const{isAuthenticated:t}=fo(),[s,r]=N.useState("all"),{data:n=[],isLoading:a,error:i}=Xe({queryKey:["/api/product-orders/user"],enabled:t}),l=[...s==="all"?n:n.filter(c=>c.status===s)].sort((c,d)=>new Date(d.createdAt).getTime()-new Date(c.createdAt).getTime());return t?e.jsx("div",{className:"min-h-screen bg-background py-12 px-4","data-testid":"my-orders-page",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(Ud,{className:"w-8 h-8 text-primary"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-serif font-bold",children:"My Orders"}),e.jsx("p",{className:"text-muted-foreground",children:"View and track your memorial product orders"})]})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-6",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Filter by status:"}),e.jsxs(Rt,{value:s,onValueChange:r,children:[e.jsx(Mt,{className:"w-48",children:e.jsx(Ft,{})}),e.jsx(Lt,{children:Mxe.map(c=>e.jsx(te,{value:c.value,children:c.label},c.value))})]})]})]}),a&&e.jsx("div",{className:"space-y-4",children:[1,2,3].map(c=>e.jsx($,{children:e.jsx(V,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsx(tt,{className:"h-16 w-16 rounded"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(tt,{className:"h-4 w-48"}),e.jsx(tt,{className:"h-4 w-32"})]}),e.jsx(tt,{className:"h-10 w-32"})]})})},c))}),i&&e.jsx($,{children:e.jsxs(V,{className:"p-12 text-center",children:[e.jsx(_i,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Unable to Load Orders"}),e.jsx("p",{className:"text-muted-foreground",children:"Please try again later."})]})}),!a&&!i&&l.length===0&&e.jsx($,{children:e.jsxs(V,{className:"p-12 text-center",children:[e.jsx(Ud,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:s==="all"?"No orders yet":`No ${s} orders`}),e.jsx("p",{className:"text-muted-foreground mb-6",children:s==="all"?"Browse our memorial products to place your first order.":"Try changing the filter to see other orders."}),s==="all"?e.jsx(He,{href:"/products",children:e.jsxs(O,{children:[e.jsx(_i,{className:"w-4 h-4 mr-2"}),"Browse Products"]})}):e.jsx(O,{variant:"outline",onClick:()=>r("all"),children:"View All Orders"})]})}),!a&&!i&&l.length>0&&e.jsx("div",{className:"space-y-4",children:l.map(c=>{const d=gP[c.status]||gP.pending;return e.jsx($,{className:"hover-elevate","data-testid":`order-row-${c.id}`,children:e.jsxs(V,{className:"p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-6",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-primary/20 to-muted rounded-lg flex items-center justify-center shrink-0",children:e.jsx(_i,{className:"w-10 h-10 text-primary/40"})}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-lg",children:["Order #",c.orderNumber]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Placed on ",Pr(new Date(c.createdAt),"MMM d, yyyy")]})]}),e.jsx(ze,{variant:d.variant,children:d.label})]}),e.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Quantity: "}),e.jsx("span",{className:"font-medium",children:c.quantity})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Total: "}),e.jsxs("span",{className:"font-semibold",children:["$",parseFloat(c.total).toFixed(2)]})]}),c.trackingNumber&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Tracking: "}),e.jsx("span",{className:"font-mono font-medium",children:c.trackingNumber})]})]})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx(He,{href:`/orders/${c.id}`,children:e.jsxs(O,{variant:"outline","data-testid":`button-view-order-${c.id}`,children:[e.jsx(Ei,{className:"w-4 h-4 mr-2"}),"View Details"]})})})]}),c.estimatedDelivery&&c.status!=="delivered"&&e.jsx("div",{className:"mt-4 pt-4 border-t border-border",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Estimated delivery: ",Pr(new Date(c.estimatedDelivery),"EEEE, MMMM d, yyyy")]})})]})},c.id)})}),!a&&l.length>0&&e.jsxs("div",{className:"mt-8 text-center text-sm text-muted-foreground",children:["Showing ",l.length," ",l.length===1?"order":"orders",s!=="all"&&` with status: ${s}`]})]})}):e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:e.jsxs($,{className:"w-full max-w-md",children:[e.jsxs(le,{children:[e.jsx(ge,{children:"Login Required"}),e.jsx($e,{children:"Please login to view your orders."})]}),e.jsx(V,{children:e.jsx(O,{onClick:()=>window.location.href="/api/login",className:"w-full",children:"Login to Continue"})})]})})}const vP={pending:{label:"Pending",color:"bg-yellow-500",variant:"secondary"},processing:{label:"Processing",color:"bg-blue-500",variant:"default"},in_production:{label:"In Production",color:"bg-purple-500",variant:"default"},shipped:{label:"Shipped",color:"bg-purple-500",variant:"default"},delivered:{label:"Delivered",color:"bg-green-500",variant:"default"},cancelled:{label:"Cancelled",color:"bg-red-500",variant:"destructive"}},Q2=[{key:"pending",label:"Ordered",icon:Mr},{key:"processing",label:"Processing",icon:_i},{key:"shipped",label:"Shipped",icon:M_},{key:"delivered",label:"Delivered",icon:Oo}];function Dxe(){const[,t]=Sc("/orders/:orderId"),{data:s,isLoading:r,error:n}=Xe({queryKey:["/api/product-orders",t==null?void 0:t.orderId],enabled:!!(t!=null&&t.orderId)});if(r)return e.jsx("div",{className:"min-h-screen bg-background py-12 px-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx(tt,{className:"h-12 w-64 mb-8"}),e.jsxs($,{children:[e.jsxs(le,{children:[e.jsx(tt,{className:"h-8 w-48 mb-2"}),e.jsx(tt,{className:"h-4 w-32"})]}),e.jsx(V,{children:e.jsx(tt,{className:"h-64 w-full"})})]})]})});if(n||!s)return e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:e.jsxs($,{className:"w-full max-w-md",children:[e.jsxs(le,{children:[e.jsx(ge,{children:"Order Not Found"}),e.jsx($e,{children:"The order you're looking for doesn't exist or you don't have permission to view it."})]}),e.jsx(V,{children:e.jsx(He,{href:"/orders",children:e.jsxs(O,{className:"w-full",children:[e.jsx(Sr,{className:"w-4 h-4 mr-2"}),"View All Orders"]})})})]})});const a=vP[s.status]||vP.pending,i=Q2.findIndex(o=>o.key===s.status);return e.jsx("div",{className:"min-h-screen bg-background py-12 px-4","data-testid":"order-tracking-page",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx(He,{href:"/orders",children:e.jsxs(O,{variant:"ghost",size:"sm",className:"mb-4",children:[e.jsx(Sr,{className:"w-4 h-4 mr-2"}),"Back to All Orders"]})}),e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-serif font-bold mb-2",children:"Order Details"}),e.jsxs("p",{className:"text-muted-foreground",children:["Order placed on ",Pr(new Date(s.createdAt),"MMMM d, yyyy 'at' h:mm a")]})]}),e.jsx(ze,{variant:a.variant,className:"text-base px-4 py-2","data-testid":"order-status",children:a.label})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx($,{children:e.jsx(le,{children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs(ge,{children:["Order #",s.orderNumber]}),e.jsx($e,{"data-testid":"order-number",children:"Reference this number for customer support"})]})})})}),e.jsxs($,{children:[e.jsx(le,{children:e.jsx(ge,{children:"Order Timeline"})}),e.jsx(V,{children:e.jsx("div",{className:"space-y-4",children:Q2.map((o,l)=>{const c=l<=i,d=l===i,u=o.icon;return e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center border-2 transition-colors ${c?"bg-primary border-primary text-primary-foreground":"border-muted text-muted-foreground"}`,children:e.jsx(u,{className:"w-5 h-5"})}),l<Q2.length-1&&e.jsx("div",{className:`absolute left-5 top-10 w-0.5 h-12 transition-colors ${c?"bg-primary":"bg-muted"}`})]}),e.jsxs("div",{className:"flex-1 pt-2",children:[e.jsx("h4",{className:`font-semibold ${d||c?"text-foreground":"text-muted-foreground"}`,children:o.label}),c&&s.createdAt&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:Pr(new Date(s.createdAt),"MMM d, yyyy 'at' h:mm a")})]})]},o.key)})})})]}),s.trackingNumber&&e.jsxs($,{children:[e.jsx(le,{children:e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(M_,{className:"w-5 h-5"}),"Shipping Information"]})}),e.jsxs(V,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Tracking Number"}),e.jsx("p",{className:"font-semibold font-mono","data-testid":"tracking-number",children:s.trackingNumber})]}),s.carrier&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Carrier"}),e.jsx("p",{className:"font-semibold",children:s.carrier})]})]}),s.estimatedDelivery&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Estimated Delivery"}),e.jsx("p",{className:"font-semibold",children:Pr(new Date(s.estimatedDelivery),"EEEE, MMMM d, yyyy")})]}),s.carrier&&s.trackingNumber&&e.jsx(O,{variant:"outline",className:"w-full",asChild:!0,children:e.jsxs("a",{href:`https://www.google.com/search?q=${s.carrier}+tracking+${s.trackingNumber}`,target:"_blank",rel:"noopener noreferrer",children:["Track Package",e.jsx(pa,{className:"w-4 h-4 ml-2"})]})})]})]}),e.jsxs($,{children:[e.jsx(le,{children:e.jsx(ge,{children:"Product Details"})}),e.jsxs(V,{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-primary/20 to-muted rounded-lg flex items-center justify-center shrink-0",children:e.jsx(_i,{className:"w-10 h-10 text-primary/40"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex items-start justify-between gap-4 mb-2",children:e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-lg",children:"Product Name"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantity: ",s.quantity]})]})}),s.customization&&Object.keys(s.customization).length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-sm font-semibold mb-2",children:"Customization"}),e.jsxs("div",{className:"space-y-1 text-sm text-muted-foreground",children:[s.customization.engravingText&&e.jsxs("p",{children:[' Engraving: "',s.customization.engravingText,'"']}),s.customization.font&&e.jsxs("p",{children:[" Font: ",s.customization.font]}),s.customization.material&&e.jsxs("p",{children:[" Material: ",s.customization.material]}),s.customization.size&&e.jsxs("p",{children:[" Size: ",s.customization.size]}),s.customization.qrPlacement&&e.jsxs("p",{children:[" QR Placement: ",s.customization.qrPlacement]})]})]})]})]}),e.jsx(ls,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Subtotal"}),e.jsxs("span",{className:"font-medium",children:["$",parseFloat(s.subtotal).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Shipping"}),e.jsxs("span",{className:"font-medium",children:["$",parseFloat(s.shipping).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Tax"}),e.jsxs("span",{className:"font-medium",children:["$",parseFloat(s.tax).toFixed(2)]})]}),e.jsx(ls,{}),e.jsxs("div",{className:"flex justify-between text-lg",children:[e.jsx("span",{className:"font-semibold",children:"Total"}),e.jsxs("span",{className:"font-bold",children:["$",parseFloat(s.total).toFixed(2)]})]})]})]})]}),s.shippingAddress&&e.jsxs($,{children:[e.jsx(le,{children:e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(tr,{className:"w-5 h-5"}),"Shipping Address"]})}),e.jsx(V,{children:e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsx("p",{className:"font-semibold",children:s.shippingAddress.fullName}),e.jsx("p",{className:"text-muted-foreground",children:s.shippingAddress.addressLine1}),s.shippingAddress.addressLine2&&e.jsx("p",{className:"text-muted-foreground",children:s.shippingAddress.addressLine2}),e.jsxs("p",{className:"text-muted-foreground",children:[s.shippingAddress.city,", ",s.shippingAddress.state," ",s.shippingAddress.zipCode]}),e.jsx("p",{className:"text-muted-foreground",children:s.shippingAddress.country}),e.jsxs("p",{className:"text-muted-foreground mt-2",children:["Phone: ",s.shippingAddress.phone]})]})})]}),s.qrCodeId&&e.jsxs($,{children:[e.jsxs(le,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(or,{className:"w-5 h-5"}),"QR Code"]}),e.jsx($e,{children:"Your memorial product includes this QR code"})]}),e.jsxs(V,{className:"space-y-4",children:[e.jsx("div",{className:"bg-white p-8 rounded-lg inline-block",children:e.jsx("div",{className:"w-48 h-48 bg-gradient-to-br from-primary/20 to-muted rounded-lg flex items-center justify-center",children:e.jsx(or,{className:"w-24 h-24 text-primary/40"})})}),e.jsxs(O,{variant:"outline",className:"w-full",children:[e.jsx(Al,{className:"w-4 h-4 mr-2"}),"Download QR Code"]})]})]}),e.jsxs($,{children:[e.jsx(le,{children:e.jsx(ge,{children:"Payment Information"})}),e.jsx(V,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Payment Status"}),e.jsx(ze,{variant:s.paymentStatus==="paid"?"default":"secondary",children:s.paymentStatus==="paid"?"Paid":s.paymentStatus==="pending"?"Pending":s.paymentStatus==="failed"?"Failed":"Refunded"})]})})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(He,{href:"/orders",className:"flex-1",children:e.jsx(O,{variant:"outline",className:"w-full",children:"View All Orders"})}),e.jsx(He,{href:"/support",className:"flex-1",children:e.jsx(O,{variant:"outline",className:"w-full",children:"Contact Support"})})]})]})]})})}const Ixe=XU,Rxe=sS,Fxe=nS,Oxe=Dr({eventName:we().min(2,"Event name is required"),eventType:we().min(1,"Event type is required"),eventDate:we().min(1,"Event date is required"),eventTime:we().min(1,"Event time is required"),venue:we().min(2,"Venue is required"),venueAddress:we().optional(),expectedAttendees:Ll().min(1,"Expected attendees is required"),budget:Ll().min(0,"Budget must be a positive number"),liveStreamPlatform:we().optional(),liveStreamUrl:we().optional(),enableRsvp:xn().default(!0),rsvpDeadline:we().optional(),contactName:we().min(2,"Contact name is required"),contactEmail:we().email("Valid email is required"),contactPhone:we().optional(),additionalNotes:we().optional()}),yP=[{id:"funeral",name:"Traditional Funeral Service",icon:qI,description:"A formal ceremony typically held at a funeral home or place of worship",timeline:"3-7 days after passing",budgetRange:"$7,000 - $15,000",features:["Viewing/visitation","Formal service","Procession","Burial or cremation"],culturalNotes:"Varies by religious and cultural traditions",suggestedVendors:["Funeral Home","Florist","Caterer","Musician","Transportation"]},{id:"memorial",name:"Memorial Service",icon:Un,description:"A service held without the body present, often weeks or months after passing",timeline:"2-8 weeks after passing",budgetRange:"$3,000 - $8,000",features:["Flexible timing","Photo displays","Memory sharing","Reception"],culturalNotes:"More flexibility in format and location",suggestedVendors:["Venue","Florist","Caterer","Photographer","AV Equipment"]},{id:"celebration",name:"Celebration of Life",icon:Uo,description:"An uplifting gathering focused on celebrating the person's life and legacy",timeline:"4-12 weeks after passing",budgetRange:"$2,000 - $10,000",features:["Personal touches","Music and stories","Photo/video tributes","Social gathering"],culturalNotes:"Less formal, more personalized approach",suggestedVendors:["Event Venue","Caterer","Photographer","Videographer","Entertainment"]},{id:"military",name:"Military Honors Ceremony",icon:Uo,description:"A service with military honors for veterans and active service members",timeline:"Coordinated with military",budgetRange:"$8,000 - $20,000",features:["Honor guard","Flag presentation","Taps","21-gun salute (if eligible)"],culturalNotes:"Follows military protocols and traditions",suggestedVendors:["Military Coordinator","Funeral Home","Florist","Transportation","Caterer"]}],Au=[{id:"venue",name:"Venue & Location",icon:tr,items:[{id:"v1",name:"Book funeral home or venue",required:!0,estimatedCost:"$500-2000"},{id:"v2",name:"Reserve cemetery plot",required:!1,estimatedCost:"$1000-5000"},{id:"v3",name:"Arrange viewing room",required:!1,estimatedCost:"$200-500"},{id:"v4",name:"Setup memorial displays",required:!0,estimatedCost:"$100-300"},{id:"v5",name:"Book reception hall",required:!1,estimatedCost:"$300-1000"}]},{id:"catering",name:"Catering & Hospitality",icon:Ms,items:[{id:"c1",name:"Arrange reception catering",required:!0,estimatedCost:"$20-50 per person"},{id:"c2",name:"Order beverages",required:!0,estimatedCost:"$5-15 per person"},{id:"c3",name:"Arrange service staff",required:!1,estimatedCost:"$200-500"},{id:"c4",name:"Order memorial cake",required:!1,estimatedCost:"$100-300"},{id:"c5",name:"Setup coffee station",required:!0,estimatedCost:"$50-150"}]},{id:"flowers",name:"Flowers & Decorations",icon:_G,items:[{id:"f1",name:"Order casket spray",required:!0,estimatedCost:"$200-600"},{id:"f2",name:"Standing sprays",required:!1,estimatedCost:"$150-300 each"},{id:"f3",name:"Family bouquets",required:!0,estimatedCost:"$75-150 each"},{id:"f4",name:"Altar arrangements",required:!1,estimatedCost:"$100-250"},{id:"f5",name:"Memorial wreaths",required:!1,estimatedCost:"$100-200"}]},{id:"transportation",name:"Transportation",icon:BI,items:[{id:"t1",name:"Book hearse",required:!0,estimatedCost:"$300-500"},{id:"t2",name:"Arrange family limousines",required:!1,estimatedCost:"$200-400 per vehicle"},{id:"t3",name:"Coordinate parking",required:!0,estimatedCost:"$0-200"},{id:"t4",name:"Arrange shuttle service",required:!1,estimatedCost:"$300-600"},{id:"t5",name:"Book flower car",required:!1,estimatedCost:"$200-400"}]}],zp=[{id:"1",task:"Book venue",category:"Venue",dueDate:"2024-02-01",status:"completed",budgetAllocated:1500,actualCost:1450},{id:"2",task:"Send invitations",category:"Communications",dueDate:"2024-02-05",status:"completed",budgetAllocated:200,actualCost:180},{id:"3",task:"Order flowers",category:"Flowers",dueDate:"2024-02-10",status:"in-progress",budgetAllocated:800,actualCost:0},{id:"4",task:"Confirm catering",category:"Catering",dueDate:"2024-02-12",status:"pending",budgetAllocated:2e3,actualCost:0},{id:"5",task:"Arrange transportation",category:"Transportation",dueDate:"2024-02-14",status:"pending",budgetAllocated:600,actualCost:0},{id:"6",task:"Setup live stream",category:"Technology",dueDate:"2024-02-15",status:"pending",budgetAllocated:300,actualCost:0}];function $xe(){const{toast:t}=Ht(),[s,r]=N.useState(1),[n,a]=N.useState(null),[i,o]=N.useState({}),[l,c]=N.useState("all"),[d,u]=N.useState("wizard"),[m,f]=N.useState(!1),[h,p]=N.useState(null),[g,y]=N.useState(null),v=Or({resolver:$r(Oxe),defaultValues:{eventName:"",eventType:"",eventDate:"",eventTime:"",venue:"",venueAddress:"",expectedAttendees:50,budget:5e3,liveStreamPlatform:"",liveStreamUrl:"",enableRsvp:!0,rsvpDeadline:"",contactName:"",contactEmail:"",contactPhone:"",additionalNotes:""}}),{data:j=[],isLoading:w}=Xe({queryKey:["/api/vendor-listings"],enabled:d==="vendors"});Xe({queryKey:[`/api/event-tasks/${g}`],enabled:!!g&&d==="tasks"});const _=yt({mutationFn:async G=>(await pt("POST","/api/event-plans",{eventName:G.eventName,eventType:G.eventType,eventDate:new Date(G.eventDate).toISOString(),eventTime:G.eventTime,venue:{name:G.venue,address:G.venueAddress||"",city:"",state:"",zipCode:""},expectedAttendees:G.expectedAttendees,budget:G.budget.toString(),liveStream:G.liveStreamUrl?{platform:G.liveStreamPlatform||"Other",url:G.liveStreamUrl}:void 0,rsvpSettings:{enabled:G.enableRsvp,deadline:G.rsvpDeadline?new Date(G.rsvpDeadline).toISOString():void 0},contactInfo:{name:G.contactName,email:G.contactEmail,phone:G.contactPhone||""},additionalNotes:G.additionalNotes||""})).json(),onSuccess:G=>{y(G.id),t({title:"Event Created",description:"Your memorial event has been created successfully."}),xt.invalidateQueries({queryKey:["/api/event-plans"]}),v.reset(),r(1)},onError:G=>{t({title:"Error",description:G.message||"Failed to create event. Please try again.",variant:"destructive"})}}),P=yt({mutationFn:async G=>{if(!g)throw new Error("Please create an event plan first");return(await pt("POST","/api/vendor-bookings",{eventId:g,vendorId:G,serviceType:(h==null?void 0:h.category)||"General",bookingDate:new Date().toISOString(),serviceDetails:{description:`Booking request for ${h==null?void 0:h.name}`}})).json()},onSuccess:()=>{t({title:"Booking Request Sent",description:`Your booking request has been sent to ${h==null?void 0:h.name}. They will contact you within 24 hours.`}),xt.invalidateQueries({queryKey:[`/api/vendor-bookings/${g}`]}),f(!1),p(null)},onError:G=>{t({title:"Error",description:G.message||"Failed to send booking request.",variant:"destructive"})}}),E=G=>{_.mutate(G)},L=()=>{s<4&&r(s+1)},T=()=>{s>1&&r(s-1)},M=G=>{const I=yP.find(Z=>Z.id===G);I&&(v.setValue("eventType",I.name),a(G),t({title:"Template Applied",description:`${I.name} template has been applied to your event.`}))},F=G=>{o(I=>({...I,[G]:!I[G]}))},k=G=>{switch(G){case"completed":return e.jsx(P0,{className:"w-4 h-4 text-green-600"});case"in-progress":return e.jsx(E0,{className:"w-4 h-4 text-yellow-600 fill-yellow-600"});case"pending":return e.jsx(E0,{className:"w-4 h-4 text-muted-foreground"});default:return e.jsx(bm,{className:"w-4 h-4 text-destructive"})}},D=G=>{const I={completed:"default","in-progress":"secondary",pending:"outline"};return e.jsx(ze,{variant:I[G]||"outline",className:"text-xs",children:G.replace("-"," ")})},z=l==="all"?j:j.filter(G=>G.category===l),W=G=>{p(G),f(!0)},ue=()=>{h&&P.mutate(h.id)},ae=zp.reduce((G,I)=>G+I.budgetAllocated,0),Ne=zp.reduce((G,I)=>G+I.actualCost,0),K=zp.filter(G=>G.status==="completed").length,Q=zp.length,ke=K/Q*100;return e.jsxs("div",{className:"container mx-auto py-8 px-4 max-w-7xl",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold mb-2","data-testid":"page-title",children:"Memorial Event Planner"}),e.jsx("p",{className:"text-muted-foreground",children:"Plan and organize meaningful memorial services with our comprehensive event planning tools"})]}),e.jsxs(ba,{value:d,onValueChange:u,className:"space-y-6",children:[e.jsxs(ra,{className:"grid grid-cols-5 w-full max-w-3xl","data-testid":"main-tabs",children:[e.jsxs(qt,{value:"wizard","data-testid":"tab-wizard",children:[e.jsx(Un,{className:"w-4 h-4 mr-2"}),"Create Event"]}),e.jsxs(qt,{value:"templates","data-testid":"tab-templates",children:[e.jsx(_i,{className:"w-4 h-4 mr-2"}),"Templates"]}),e.jsxs(qt,{value:"checklist","data-testid":"tab-checklist",children:[e.jsx(zG,{className:"w-4 h-4 mr-2"}),"Checklists"]}),e.jsxs(qt,{value:"vendors","data-testid":"tab-vendors",children:[e.jsx(Ms,{className:"w-4 h-4 mr-2"}),"Vendors"]}),e.jsxs(qt,{value:"tasks","data-testid":"tab-tasks",children:[e.jsx(qG,{className:"w-4 h-4 mr-2"}),"Tasks"]})]}),e.jsx(Vt,{value:"wizard",className:"space-y-6",children:e.jsxs($,{children:[e.jsxs(le,{children:[e.jsx(ge,{children:"Create Memorial Event"}),e.jsxs($e,{children:["Step ",s," of 4: ",s===1?"Basic Information":s===2?"Event Details":s===3?"Streaming & RSVP":"Review & Confirm"]}),e.jsx(Sl,{value:s/4*100,className:"mt-2"})]}),e.jsx(V,{children:e.jsx(Wr,{...v,children:e.jsxs("form",{onSubmit:v.handleSubmit(E),className:"space-y-6",children:[s===1&&e.jsxs("div",{className:"space-y-4",children:[e.jsx(fe,{control:v.control,name:"eventName",render:({field:G})=>e.jsxs(me,{children:[e.jsx(he,{children:"Event Name"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"Memorial Service for John Doe",...G,"data-testid":"input-event-name"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:v.control,name:"eventType",render:({field:G})=>e.jsxs(me,{children:[e.jsx(he,{children:"Event Type"}),e.jsxs(Rt,{onValueChange:G.onChange,defaultValue:G.value,children:[e.jsx(xe,{children:e.jsx(Mt,{"data-testid":"select-event-type",children:e.jsx(Ft,{placeholder:"Select event type"})})}),e.jsxs(Lt,{children:[e.jsx(te,{value:"funeral",children:"Traditional Funeral"}),e.jsx(te,{value:"memorial",children:"Memorial Service"}),e.jsx(te,{value:"celebration",children:"Celebration of Life"}),e.jsx(te,{value:"military",children:"Military Honors"}),e.jsx(te,{value:"viewing",children:"Viewing/Visitation"}),e.jsx(te,{value:"graveside",children:"Graveside Service"})]})]}),e.jsx(ye,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(fe,{control:v.control,name:"eventDate",render:({field:G})=>e.jsxs(me,{children:[e.jsx(he,{children:"Event Date"}),e.jsx(xe,{children:e.jsx(re,{type:"date",...G,"data-testid":"input-event-date"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:v.control,name:"eventTime",render:({field:G})=>e.jsxs(me,{children:[e.jsx(he,{children:"Event Time"}),e.jsx(xe,{children:e.jsx(re,{type:"time",...G,"data-testid":"input-event-time"})}),e.jsx(ye,{})]})})]})]}),s===2&&e.jsxs("div",{className:"space-y-4",children:[e.jsx(fe,{control:v.control,name:"venue",render:({field:G})=>e.jsxs(me,{children:[e.jsx(he,{children:"Venue Name"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"First Baptist Church",...G,"data-testid":"input-venue"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:v.control,name:"venueAddress",render:({field:G})=>e.jsxs(me,{children:[e.jsx(he,{children:"Venue Address"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"123 Main St, City, State 12345",...G,"data-testid":"input-venue-address"})}),e.jsx(ye,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(fe,{control:v.control,name:"expectedAttendees",render:({field:G})=>e.jsxs(me,{children:[e.jsx(he,{children:"Expected Attendees"}),e.jsx(xe,{children:e.jsx(re,{type:"number",...G,onChange:I=>G.onChange(parseInt(I.target.value)),"data-testid":"input-expected-attendees"})}),e.jsx(Qt,{children:"Approximate number of guests"}),e.jsx(ye,{})]})}),e.jsx(fe,{control:v.control,name:"budget",render:({field:G})=>e.jsxs(me,{children:[e.jsx(he,{children:"Budget ($)"}),e.jsx(xe,{children:e.jsx(re,{type:"number",...G,onChange:I=>G.onChange(parseInt(I.target.value)),"data-testid":"input-budget"})}),e.jsx(Qt,{children:"Estimated total budget"}),e.jsx(ye,{})]})})]})]}),s===3&&e.jsxs("div",{className:"space-y-4",children:[e.jsx(fe,{control:v.control,name:"liveStreamPlatform",render:({field:G})=>e.jsxs(me,{children:[e.jsx(he,{children:"Live Streaming Platform"}),e.jsxs(Rt,{onValueChange:G.onChange,defaultValue:G.value,children:[e.jsx(xe,{children:e.jsx(Mt,{"data-testid":"select-stream-platform",children:e.jsx(Ft,{placeholder:"Select platform (optional)"})})}),e.jsxs(Lt,{children:[e.jsx(te,{value:"none",children:"No Live Stream"}),e.jsx(te,{value:"youtube",children:"YouTube Live"}),e.jsx(te,{value:"zoom",children:"Zoom"}),e.jsx(te,{value:"facebook",children:"Facebook Live"}),e.jsx(te,{value:"custom",children:"Custom Platform"})]})]}),e.jsx(ye,{})]})}),e.jsx(fe,{control:v.control,name:"liveStreamUrl",render:({field:G})=>e.jsxs(me,{children:[e.jsx(he,{children:"Live Stream URL"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"https://...",...G,"data-testid":"input-stream-url"})}),e.jsx(Qt,{children:"Link to the live stream (if applicable)"}),e.jsx(ye,{})]})}),e.jsx(fe,{control:v.control,name:"enableRsvp",render:({field:G})=>e.jsxs(me,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(he,{className:"text-base",children:"Enable RSVP"}),e.jsx(Qt,{children:"Allow guests to RSVP for the event"})]}),e.jsx(xe,{children:e.jsx(ir,{checked:G.value,onCheckedChange:G.onChange,"data-testid":"switch-enable-rsvp"})})]})}),v.watch("enableRsvp")&&e.jsx(fe,{control:v.control,name:"rsvpDeadline",render:({field:G})=>e.jsxs(me,{children:[e.jsx(he,{children:"RSVP Deadline"}),e.jsx(xe,{children:e.jsx(re,{type:"date",...G,"data-testid":"input-rsvp-deadline"})}),e.jsx(ye,{})]})})]}),s===4&&e.jsxs("div",{className:"space-y-4",children:[e.jsx(fe,{control:v.control,name:"contactName",render:({field:G})=>e.jsxs(me,{children:[e.jsx(he,{children:"Contact Person"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"Your name",...G,"data-testid":"input-contact-name"})}),e.jsx(ye,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(fe,{control:v.control,name:"contactEmail",render:({field:G})=>e.jsxs(me,{children:[e.jsx(he,{children:"Contact Email"}),e.jsx(xe,{children:e.jsx(re,{type:"email",placeholder:"email@example.com",...G,"data-testid":"input-contact-email"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:v.control,name:"contactPhone",render:({field:G})=>e.jsxs(me,{children:[e.jsx(he,{children:"Contact Phone"}),e.jsx(xe,{children:e.jsx(re,{type:"tel",placeholder:"(555) 123-4567",...G,"data-testid":"input-contact-phone"})}),e.jsx(ye,{})]})})]}),e.jsx(fe,{control:v.control,name:"additionalNotes",render:({field:G})=>e.jsxs(me,{children:[e.jsx(he,{children:"Additional Notes"}),e.jsx(xe,{children:e.jsx(Gt,{placeholder:"Any special requests or additional information...",...G,"data-testid":"textarea-additional-notes"})}),e.jsx(ye,{})]})}),e.jsxs($,{className:"bg-muted/50",children:[e.jsx(le,{children:e.jsx(ge,{className:"text-lg",children:"Event Summary"})}),e.jsxs(V,{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Event:"}),e.jsx("span",{className:"font-medium",children:v.watch("eventName")||"Not set"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Type:"}),e.jsx("span",{className:"font-medium",children:v.watch("eventType")||"Not set"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Date & Time:"}),e.jsxs("span",{className:"font-medium",children:[v.watch("eventDate")," at ",v.watch("eventTime")]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Venue:"}),e.jsx("span",{className:"font-medium",children:v.watch("venue")||"Not set"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Attendees:"}),e.jsx("span",{className:"font-medium",children:v.watch("expectedAttendees")})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Budget:"}),e.jsxs("span",{className:"font-medium",children:["$",v.watch("budget")]})]})]})]})]}),e.jsxs("div",{className:"flex justify-between pt-4",children:[e.jsxs(O,{type:"button",variant:"outline",onClick:T,disabled:s===1,"data-testid":"button-previous",children:[e.jsx(zI,{className:"w-4 h-4 mr-2"}),"Previous"]}),s<4?e.jsxs(O,{type:"button",onClick:L,"data-testid":"button-next",children:["Next",e.jsx(Fd,{className:"w-4 h-4 ml-2"})]}):e.jsx(O,{type:"submit",disabled:_.isPending,"data-testid":"button-create-event",children:_.isPending?"Creating...":"Create Event"})]})]})})})]})}),e.jsxs(Vt,{value:"templates",className:"space-y-6",children:[e.jsx("div",{className:"grid gap-6 md:grid-cols-2",children:yP.map(G=>e.jsxs($,{className:"hover-elevate",children:[e.jsx(le,{children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(G.icon,{className:"w-8 h-8 text-primary"}),e.jsxs("div",{children:[e.jsx(ge,{children:G.name}),e.jsx($e,{className:"mt-1",children:G.description})]})]})})}),e.jsxs(V,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Mr,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-muted-foreground",children:"Timeline:"}),e.jsx("span",{children:G.timeline})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Ga,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-muted-foreground",children:"Budget:"}),e.jsx("span",{children:G.budgetRange})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Key Features:"}),e.jsx("ul",{className:"text-sm text-muted-foreground space-y-1",children:G.features.map((I,Z)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(P0,{className:"w-3 h-3 mt-0.5 text-green-600"}),e.jsx("span",{children:I})]},Z))})]}),e.jsx("div",{className:"pt-2 border-t",children:e.jsxs("p",{className:"text-xs text-muted-foreground mb-2",children:[e.jsx("span",{className:"font-medium",children:"Cultural Notes:"})," ",G.culturalNotes]})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Suggested Vendors:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:G.suggestedVendors.map((I,Z)=>e.jsx(ze,{variant:"secondary",className:"text-xs",children:I},Z))})]})]}),e.jsx(mo,{children:e.jsx(O,{className:"w-full",onClick:()=>{M(G.id),u("wizard")},"data-testid":`button-use-template-${G.id}`,children:"Use This Template"})})]},G.id))}),e.jsxs($,{children:[e.jsxs(le,{children:[e.jsx(ge,{children:"Suggested Planning Timelines"}),e.jsx($e,{children:"Choose a timeline that works for your situation"})]}),e.jsx(V,{children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2 p-4 border rounded-lg",children:[e.jsx("h4",{className:"font-semibold",children:"30-Day Plan"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"For immediate needs"}),e.jsxs("ul",{className:"text-sm space-y-1 mt-3",children:[e.jsx("li",{children:" Week 1: Venue & date"}),e.jsx("li",{children:" Week 2: Vendors & catering"}),e.jsx("li",{children:" Week 3: Invitations & flowers"}),e.jsx("li",{children:" Week 4: Final preparations"})]})]}),e.jsxs("div",{className:"space-y-2 p-4 border rounded-lg",children:[e.jsx("h4",{className:"font-semibold",children:"60-Day Plan"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Standard timeline"}),e.jsxs("ul",{className:"text-sm space-y-1 mt-3",children:[e.jsx("li",{children:" Weeks 1-2: Planning & budget"}),e.jsx("li",{children:" Weeks 3-4: Bookings & vendors"}),e.jsx("li",{children:" Weeks 5-6: Details & decorations"}),e.jsx("li",{children:" Weeks 7-8: Finalization"})]})]}),e.jsxs("div",{className:"space-y-2 p-4 border rounded-lg",children:[e.jsx("h4",{className:"font-semibold",children:"90-Day Plan"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Extended planning"}),e.jsxs("ul",{className:"text-sm space-y-1 mt-3",children:[e.jsx("li",{children:" Month 1: Conceptualization"}),e.jsx("li",{children:" Month 2: Arrangements"}),e.jsx("li",{children:" Month 3: Execution & details"}),e.jsx("li",{children:" Final week: Review & prepare"})]})]})]})})]})]}),e.jsxs(Vt,{value:"checklist",className:"space-y-6",children:[e.jsxs($,{children:[e.jsxs(le,{children:[e.jsx(ge,{children:"What You Need Checklist"}),e.jsx($e,{children:"Track your progress for all memorial event requirements"})]}),e.jsx(V,{className:"space-y-4",children:Au.map(G=>e.jsxs(Ixe,{defaultOpen:!0,children:[e.jsxs(Rxe,{className:"flex w-full items-center justify-between rounded-lg border p-4 hover-elevate","data-testid":`checklist-category-${G.id}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(G.icon,{className:"w-5 h-5 text-primary"}),e.jsx("h3",{className:"font-semibold",children:G.name}),e.jsxs(ze,{variant:"secondary",className:"ml-2",children:[G.items.filter(I=>i[I.id]).length,"/",G.items.length]})]}),e.jsx(Fd,{className:"w-4 h-4 transition-transform duration-200"})]}),e.jsx(Fxe,{className:"mt-2 space-y-2 pl-12",children:G.items.map(I=>e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg border bg-card hover-elevate",children:[e.jsx(Rg,{checked:i[I.id]||!1,onCheckedChange:()=>F(I.id),"data-testid":`checkbox-${I.id}`}),e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:i[I.id]?"line-through text-muted-foreground":"",children:I.name}),I.required&&e.jsx(ze,{variant:"outline",className:"text-xs",children:"Required"})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Estimated cost: ",I.estimatedCost]})]})]},I.id))})]},G.id))})]}),e.jsxs($,{children:[e.jsx(le,{children:e.jsx(ge,{children:"Overall Progress"})}),e.jsx(V,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{children:"Checklist Completion"}),e.jsxs("span",{className:"font-medium",children:[Object.values(i).filter(Boolean).length," of"," ",Au.reduce((G,I)=>G+I.items.length,0)," items"]})]}),e.jsx(Sl,{value:Object.values(i).filter(Boolean).length/Au.reduce((G,I)=>G+I.items.length,0)*100})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Required Items"}),e.jsxs("p",{className:"text-2xl font-bold",children:[Au.reduce((G,I)=>G+I.items.filter(Z=>Z.required&&i[Z.id]).length,0),"/",Au.reduce((G,I)=>G+I.items.filter(Z=>Z.required).length,0)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Optional Items"}),e.jsxs("p",{className:"text-2xl font-bold",children:[Au.reduce((G,I)=>G+I.items.filter(Z=>!Z.required&&i[Z.id]).length,0),"/",Au.reduce((G,I)=>G+I.items.filter(Z=>!Z.required).length,0)]})]})]})]})})]})]}),e.jsx(Vt,{value:"vendors",className:"space-y-6",children:e.jsxs($,{children:[e.jsx(le,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(ge,{children:"Vendor Marketplace"}),e.jsx($e,{children:"Find trusted vendors for your memorial event"})]}),e.jsxs(Rt,{value:l,onValueChange:c,children:[e.jsxs(Mt,{className:"w-[200px]","data-testid":"select-vendor-filter",children:[e.jsx(T0,{className:"w-4 h-4 mr-2"}),e.jsx(Ft,{placeholder:"Filter by category"})]}),e.jsxs(Lt,{children:[e.jsx(te,{value:"all",children:"All Categories"}),e.jsx(te,{value:"Funeral Home",children:"Funeral Homes"}),e.jsx(te,{value:"Florist",children:"Florists"}),e.jsx(te,{value:"Caterer",children:"Caterers"}),e.jsx(te,{value:"Photographer",children:"Photographers"}),e.jsx(te,{value:"Transportation",children:"Transportation"})]})]})]})}),e.jsx(V,{children:e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:z.map(G=>{var I,Z,J;return e.jsxs($,{className:"hover-elevate",children:[e.jsx(le,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx(ge,{className:"text-lg",children:G.name}),e.jsx($e,{children:G.category})]}),e.jsx(ze,{variant:"secondary",children:G.priceRange})]})}),e.jsxs(V,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ks,{className:"w-4 h-4 fill-yellow-500 text-yellow-500"}),e.jsx("span",{className:"font-medium text-sm",children:G.rating})]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",G.reviews," reviews)"]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(tr,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("span",{children:["Service Area: ",G.serviceArea]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Uo,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{children:G.specialization})]})]}),e.jsx(ls,{}),e.jsxs("div",{className:"space-y-2",children:[((I=G.contact)==null?void 0:I.phone)&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx($d,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{children:G.contact.phone})]}),((Z=G.contact)==null?void 0:Z.email)&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Ti,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"truncate",children:G.contact.email})]}),((J=G.contact)==null?void 0:J.website)&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(qo,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{children:G.contact.website})]}),!G.contact&&e.jsx("p",{className:"text-sm text-muted-foreground italic",children:"Contact information not available"})]})]}),e.jsxs(mo,{className:"gap-2",children:[e.jsxs(O,{className:"flex-1",variant:"outline","data-testid":`button-contact-${G.id}`,children:[e.jsx($d,{className:"w-4 h-4 mr-2"}),"Contact"]}),e.jsx(O,{className:"flex-1","data-testid":`button-book-${G.id}`,onClick:()=>W(G),children:"Book Now"})]})]},G.id)})})})]})}),e.jsxs(Vt,{value:"tasks",className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsxs($,{children:[e.jsx(le,{className:"pb-2",children:e.jsx($e,{children:"Total Budget"})}),e.jsx(V,{children:e.jsxs("p",{className:"text-2xl font-bold",children:["$",ae.toLocaleString()]})})]}),e.jsxs($,{children:[e.jsx(le,{className:"pb-2",children:e.jsx($e,{children:"Spent So Far"})}),e.jsx(V,{children:e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["$",Ne.toLocaleString()]})})]}),e.jsxs($,{children:[e.jsx(le,{className:"pb-2",children:e.jsx($e,{children:"Remaining"})}),e.jsx(V,{children:e.jsxs("p",{className:"text-2xl font-bold",children:["$",(ae-Ne).toLocaleString()]})})]}),e.jsxs($,{children:[e.jsx(le,{className:"pb-2",children:e.jsx($e,{children:"Task Progress"})}),e.jsxs(V,{children:[e.jsxs("p",{className:"text-2xl font-bold",children:[K,"/",Q]}),e.jsx(Sl,{value:ke,className:"mt-2"})]})]})]}),e.jsxs($,{children:[e.jsxs(le,{children:[e.jsx(ge,{children:"Task Management Dashboard"}),e.jsx($e,{children:"Track all your memorial event tasks and deadlines"})]}),e.jsx(V,{children:e.jsx(Dl,{className:"h-[400px] pr-4",children:e.jsx("div",{className:"space-y-3",children:zp.map(G=>e.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-lg border bg-card hover-elevate","data-testid":`task-item-${G.id}`,children:[e.jsx("div",{children:k(G.status)}),e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"font-medium",children:G.task}),e.jsx(ze,{variant:"secondary",className:"text-xs",children:G.category})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ds,{className:"w-3 h-3"}),e.jsxs("span",{children:["Due: ",new Date(G.dueDate).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ga,{className:"w-3 h-3"}),e.jsxs("span",{children:["Budget: $",G.budgetAllocated]})]}),G.actualCost>0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Mo,{className:"w-3 h-3"}),e.jsxs("span",{children:["Actual: $",G.actualCost]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[D(G.status),e.jsx(O,{size:"sm",variant:"outline","data-testid":`button-edit-task-${G.id}`,children:"Edit"})]})]},G.id))})})})]})]})]}),e.jsx(Os,{open:m,onOpenChange:f,children:e.jsxs(Ds,{"data-testid":"modal-booking",children:[e.jsxs(Is,{children:[e.jsxs(Rs,{children:["Book ",h==null?void 0:h.name]}),e.jsxs(Lr,{children:["Complete the form below to send a booking request to ",h==null?void 0:h.name]})]}),h&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Vendor Details"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Category:"})," ",h.category]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Service Area:"})," ",h.serviceArea]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Specialization:"})," ",h.specialization]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Rating:"}),"  ",h.rating," (",h.reviews," reviews)"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Price Range:"})," ",h.priceRange]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(De,{htmlFor:"booking-date",children:"Service Date"}),e.jsx(re,{id:"booking-date",type:"date","data-testid":"input-booking-date"})]}),e.jsxs("div",{children:[e.jsx(De,{htmlFor:"booking-message",children:"Special Requirements"}),e.jsx(Gt,{id:"booking-message",placeholder:"Any special requirements or notes for the vendor...","data-testid":"textarea-booking-message"})]}),e.jsxs("div",{children:[e.jsx(De,{htmlFor:"booking-budget",children:"Estimated Budget"}),e.jsx(re,{id:"booking-budget",type:"text",placeholder:"e.g., $500-$1000","data-testid":"input-booking-budget"})]})]}),e.jsxs(Ra,{className:"gap-2",children:[e.jsx(O,{variant:"outline",onClick:()=>f(!1),children:"Cancel"}),e.jsx(O,{onClick:ue,"data-testid":"button-confirm-booking",children:"Send Booking Request"})]})]})]})})]})}const Z2=[{id:"1",name:"Michael Jordan",sport:"Basketball",position:"Shooting Guard",jerseyNumber:"23",photo:"https://api.dicebear.com/7.x/avataaars/svg?seed=MJ23",birthDate:"Feb 17, 1963",retiredDate:"2003",legacyScore:98,teams:[{name:"Chicago Bulls",years:"1984-1993, 1995-1998",championships:6},{name:"Washington Wizards",years:"2001-2003",championships:0}],stats:{Points:"32,292",Rebounds:"6,672",Assists:"5,633",Championships:"6","MVP Awards":"5","Finals MVPs":"6"},achievements:["6 NBA Champion","5 NBA MVP","14 NBA All-Star","10 NBA Scoring Champion","NBA Rookie of the Year (1985)","2 Olympic Gold Medal"],hallOfFame:{inducted:!0,year:"2009",location:"Naismith Memorial Basketball Hall of Fame"},mediaLinks:[{type:"highlights",title:"Career Highlights",url:"#"},{type:"documentary",title:"The Last Dance",url:"#"}]},{id:"2",name:"Tom Brady",sport:"Football",position:"Quarterback",jerseyNumber:"12",photo:"https://api.dicebear.com/7.x/avataaars/svg?seed=TB12",birthDate:"Aug 3, 1977",retiredDate:"2023",legacyScore:97,teams:[{name:"New England Patriots",years:"2000-2019",championships:6},{name:"Tampa Bay Buccaneers",years:"2020-2022",championships:1}],stats:{"Passing Yards":"89,214",Touchdowns:"649",Completions:"7,753","Super Bowl Wins":"7","Pro Bowls":"15","MVP Awards":"3"},achievements:["7 Super Bowl Champion","5 Super Bowl MVP","3 NFL MVP","15 Pro Bowl","NFL 2000s All-Decade Team","NFL 2010s All-Decade Team"],hallOfFame:{inducted:!1,year:"Eligible 2028",location:"Pro Football Hall of Fame"},mediaLinks:[{type:"highlights",title:"7 Super Bowl Victories",url:"#"},{type:"interview",title:"Retirement Speech",url:"#"}]},{id:"3",name:"Serena Williams",sport:"Tennis",position:"Singles/Doubles",jerseyNumber:"N/A",photo:"https://api.dicebear.com/7.x/avataaars/svg?seed=SerenaW",birthDate:"Sep 26, 1981",retiredDate:"2022",legacyScore:96,teams:[{name:"USA Fed Cup Team",years:"1999-2020",championships:2},{name:"USA Olympic Team",years:"2000-2016",championships:4}],stats:{"Grand Slam Singles":"23","Grand Slam Doubles":"14","WTA Tour Singles":"73","Olympic Gold Medals":"4","Career Prize Money":"$94.8M","Weeks at No. 1":"319"},achievements:["23 Grand Slam Singles Champion","14 Grand Slam Doubles Champion","4 Olympic Gold Medalist","5 WTA Tour Championships","Career Golden Slam in Doubles","3 AP Female Athlete of the Year"],hallOfFame:{inducted:!0,year:"2023",location:"International Tennis Hall of Fame"},mediaLinks:[{type:"highlights",title:"23 Grand Slam Victories",url:"#"},{type:"documentary",title:"Being Serena",url:"#"}]}],Bxe=[{id:"rj1",playerName:"Michael Jordan",number:"23",team:"Chicago Bulls",retirementDate:"November 1, 1994",ceremony:"United Center",videoLink:"#"},{id:"rj2",playerName:"Magic Johnson",number:"32",team:"Los Angeles Lakers",retirementDate:"February 16, 1992",ceremony:"The Forum",videoLink:"#"},{id:"rj3",playerName:"Wayne Gretzky",number:"99",team:"League-wide (NHL)",retirementDate:"February 6, 2000",ceremony:"NHL All-Star Game",videoLink:"#"}],Uxe=[{athlete:"Michael Jordan",stat:"32,292 career points",story:"That's enough to score 30 points in every game for 32 straight seasons, or the equivalent of scoring every single point in 403 complete NBA games where the final score was 80-0.",visual:null},{athlete:"Tom Brady",stat:"649 touchdown passes",story:"If Tom Brady threw one touchdown pass every Sunday, it would take over 12 years of non-stop Sunday football to match his career total.",visual:null},{athlete:"Serena Williams",stat:"23 Grand Slam singles titles",story:"That's more Grand Slams than Roger Federer (20) and almost enough to win every Grand Slam tournament for 6 straight years.",visual:null}];function zxe(){const[t,s]=N.useState("athletes"),[r,n]=N.useState("all"),[a,i]=N.useState("all"),[o,l]=N.useState(""),[c,d]=N.useState(!1),[u,m]=N.useState(null),{toast:f}=Ht(),{data:h=[],isLoading:p}=Xe({queryKey:["/api/athlete-profiles"],enabled:t==="athletes"}),{data:g=[],isLoading:y}=Xe({queryKey:["/api/team-memorials"],enabled:t==="teams"});Xe({queryKey:["/api/hall-of-fame"],enabled:t==="hall-of-fame"}),h.length>0,g.length>0;const[v,j]=N.useState({name:"",sport:"",position:"",jerseyNumber:"",birthDate:"",retiredDate:"",biography:"",teams:[],achievements:[]}),w=yt({mutationFn:async E=>(await pt("POST","/api/athlete-profiles",{memorialId:"",sport:E.sport,level:"professional",position:E.position,jerseyNumber:E.jerseyNumber,teams:E.teams.map(T=>({teamName:T,startYear:new Date().getFullYear()-10,endYear:new Date().getFullYear()})),careerStart:E.birthDate?new Date(E.birthDate).toISOString():void 0,careerEnd:E.retiredDate?new Date(E.retiredDate).toISOString():void 0,achievements:E.achievements,biography:E.biography})).json(),onSuccess:E=>{f({title:"Memorial Created",description:`Athletic memorial for ${v.name} has been created successfully.`}),xt.invalidateQueries({queryKey:["/api/athlete-profiles"]}),E.id&&_.mutate(E.id),d(!1),j({name:"",sport:"",position:"",jerseyNumber:"",birthDate:"",retiredDate:"",biography:"",teams:[],achievements:[]})},onError:E=>{f({title:"Error",description:E.message||"Failed to create athletic memorial.",variant:"destructive"})}}),_=yt({mutationFn:async E=>(await pt("GET",`/api/legacy-score/${E}`)).json(),onSuccess:()=>{xt.invalidateQueries({queryKey:["/api/athlete-profiles"]})}}),P=()=>{w.mutate(v)};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("div",{className:"bg-gradient-to-b from-blue-50 to-white dark:from-blue-950/20 dark:to-background py-16",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ni,{className:"w-16 h-16 mx-auto mb-4 text-blue-600 dark:text-blue-400"}),e.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:"Sports Memorials"}),e.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-3xl mx-auto mb-8",children:"Honor the legends of sports. Celebrate athletic excellence, team dynasties, and the moments that defined generations."}),e.jsxs(O,{size:"lg",onClick:()=>d(!0),"data-testid":"button-create-athlete-memorial",children:[e.jsx(V1,{className:"w-5 h-5 mr-2"}),"Create Athlete Memorial"]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs(ba,{value:t,onValueChange:s,className:"w-full",children:[e.jsxs(ra,{className:"grid w-full grid-cols-4 mb-8",children:[e.jsxs(qt,{value:"athletes","data-testid":"tab-athletes",children:[e.jsx(Fy,{className:"w-4 h-4 mr-2"}),"Athletes"]}),e.jsxs(qt,{value:"teams","data-testid":"tab-teams",children:[e.jsx(Ms,{className:"w-4 h-4 mr-2"}),"Teams"]}),e.jsxs(qt,{value:"hall-of-fame","data-testid":"tab-hall-of-fame",children:[e.jsx(zo,{className:"w-4 h-4 mr-2"}),"Hall of Fame"]}),e.jsxs(qt,{value:"jersey-retirements","data-testid":"tab-jersey-retirements",children:[e.jsx(HC,{className:"w-4 h-4 mr-2"}),"Jersey Retirements"]})]}),e.jsxs(Vt,{value:"athletes",className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Cc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(re,{placeholder:"Search athletes...",value:o,onChange:E=>l(E.target.value),className:"pl-10","data-testid":"input-search-athletes"})]}),e.jsxs(Rt,{value:r,onValueChange:n,"data-testid":"select-sport-filter",children:[e.jsx(Mt,{className:"w-[180px]",children:e.jsx(Ft,{placeholder:"Filter by sport"})}),e.jsxs(Lt,{children:[e.jsx(te,{value:"all",children:"All Sports"}),e.jsx(te,{value:"basketball",children:"Basketball"}),e.jsx(te,{value:"football",children:"Football"}),e.jsx(te,{value:"tennis",children:"Tennis"}),e.jsx(te,{value:"baseball",children:"Baseball"}),e.jsx(te,{value:"hockey",children:"Hockey"}),e.jsx(te,{value:"soccer",children:"Soccer"}),e.jsx(te,{value:"golf",children:"Golf"})]})]})]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:Z2.map(E=>e.jsxs($,{className:"hover-elevate","data-testid":`card-athlete-${E.id}`,children:[e.jsx(le,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(Da,{className:"h-12 w-12",children:[e.jsx(Td,{src:E.photo,alt:E.name}),e.jsx(Ia,{children:E.name.split(" ").map(L=>L[0]).join("")})]}),e.jsxs("div",{children:[e.jsx(ge,{className:"text-lg",children:E.name}),e.jsxs($e,{children:[E.sport,"  #",E.jerseyNumber]})]})]}),E.hallOfFame.inducted&&e.jsxs(ze,{variant:"outline",className:"bg-yellow-50 dark:bg-yellow-900/20",children:[e.jsx(Uo,{className:"w-3 h-3 mr-1"}),"HOF"]})]})}),e.jsxs(V,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-muted-foreground",children:"Athletic Legacy Score"}),e.jsxs("span",{className:"font-semibold",children:[E.legacyScore,"/100"]})]}),e.jsx(Sl,{value:E.legacyScore,className:"h-2"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-2 text-sm",children:Object.entries(E.stats).slice(0,4).map(([L,T])=>e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-muted-foreground",children:[L,":"]}),e.jsx("span",{className:"font-medium",children:T})]},L))}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium",children:"Career Timeline"}),E.teams.map((L,T)=>e.jsxs("div",{className:"text-xs flex items-center gap-2",children:[e.jsx(va,{className:"w-3 h-3 text-muted-foreground"}),e.jsx("span",{children:L.name}),e.jsxs("span",{className:"text-muted-foreground",children:["(",L.years,")"]}),L.championships>0&&e.jsxs(ze,{variant:"secondary",className:"text-xs",children:[L.championships," Championships"]})]},T))]}),e.jsx("div",{className:"flex gap-2",children:E.mediaLinks.map((L,T)=>e.jsxs(O,{variant:"outline",size:"sm","data-testid":`button-media-${E.id}-${T}`,children:[e.jsx(Bd,{className:"w-3 h-3 mr-1"}),L.type==="highlights"?"Highlights":L.type==="documentary"?"Documentary":"Interview"]},T))})]}),e.jsx(mo,{children:e.jsxs(O,{className:"w-full",onClick:()=>m(E),"data-testid":`button-view-profile-${E.id}`,children:["View Full Profile",e.jsx(Fd,{className:"w-4 h-4 ml-2"})]})})]},E.id))}),e.jsxs($,{className:"mt-8",children:[e.jsxs(le,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(tR,{className:"w-5 h-5"}),"Stats-to-Story Engine"]}),e.jsx($e,{children:"Converting raw statistics into memorable narratives"})]}),e.jsx(V,{className:"space-y-4",children:Uxe.map((E,L)=>e.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"text-3xl",children:E.visual}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold mb-1",children:E.athlete}),e.jsx("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400 mb-2",children:E.stat}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:E.story})]})]})},L))})]})]}),e.jsxs(Vt,{value:"teams",className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsxs(Rt,{value:a,onValueChange:i,"data-testid":"select-level-filter",children:[e.jsx(Mt,{className:"w-[180px]",children:e.jsx(Ft,{placeholder:"Filter by level"})}),e.jsxs(Lt,{children:[e.jsx(te,{value:"all",children:"All Levels"}),e.jsx(te,{value:"professional",children:"Professional"}),e.jsx(te,{value:"college",children:"College"}),e.jsx(te,{value:"olympic",children:"Olympic"})]})]}),e.jsxs(Rt,{value:r,onValueChange:n,"data-testid":"select-team-sport-filter",children:[e.jsx(Mt,{className:"w-[180px]",children:e.jsx(Ft,{placeholder:"Filter by sport"})}),e.jsxs(Lt,{children:[e.jsx(te,{value:"all",children:"All Sports"}),e.jsx(te,{value:"basketball",children:"Basketball"}),e.jsx(te,{value:"football",children:"Football"}),e.jsx(te,{value:"baseball",children:"Baseball"}),e.jsx(te,{value:"hockey",children:"Hockey"})]})]})]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:sampleTeams.map(E=>e.jsxs($,{className:"hover-elevate","data-testid":`card-team-${E.id}`,children:[e.jsxs(le,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-4xl",children:E.logo}),e.jsx(ze,{variant:E.level==="Professional"?"default":"secondary",children:E.level})]}),e.jsx(ge,{children:E.name}),e.jsxs($e,{children:[E.sport,"  ",E.season]})]}),e.jsxs(V,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[e.jsx(Ni,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),e.jsx("span",{className:"font-semibold",children:E.championship})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Achievements"}),e.jsx("ul",{className:"space-y-1",children:E.achievements.map((L,T)=>e.jsxs("li",{className:"text-sm text-muted-foreground flex items-start gap-1",children:[e.jsx(Ks,{className:"w-3 h-3 mt-0.5 flex-shrink-0"}),L]},T))})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Notable Members"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:E.notableMembers.map((L,T)=>e.jsx(ze,{variant:"outline",className:"text-xs",children:L},T))})]})]}),e.jsx(mo,{children:e.jsx(O,{variant:"outline",className:"w-full","data-testid":`button-view-roster-${E.id}`,children:"View Full Roster"})})]},E.id))})]}),e.jsx(Vt,{value:"hall-of-fame",className:"space-y-6",children:e.jsxs($,{children:[e.jsxs(le,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(zo,{className:"w-6 h-6 text-yellow-600"}),"Hall of Fame Inductees"]}),e.jsx($e,{children:"Celebrating the greatest athletes of all time"})]}),e.jsx(V,{children:e.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:Z2.filter(E=>E.hallOfFame.inducted).map(E=>e.jsxs("div",{className:"flex items-start gap-4 p-4 border rounded-lg hover-elevate","data-testid":`hof-athlete-${E.id}`,children:[e.jsxs(Da,{className:"h-16 w-16",children:[e.jsx(Td,{src:E.photo,alt:E.name}),e.jsx(Ia,{children:E.name.split(" ").map(L=>L[0]).join("")})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-lg",children:E.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[E.sport,"  ",E.position]}),e.jsxs("div",{className:"mt-2 space-y-1",children:[e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Inducted:"})," ",e.jsx("span",{className:"font-medium",children:E.hallOfFame.year})]}),e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Location:"})," ",e.jsx("span",{className:"font-medium",children:E.hallOfFame.location})]})]}),e.jsx("div",{className:"mt-3 flex flex-wrap gap-1",children:E.achievements.slice(0,3).map((L,T)=>e.jsx(ze,{variant:"secondary",className:"text-xs",children:L},T))})]}),e.jsx(O,{variant:"ghost",size:"icon","data-testid":`button-hof-details-${E.id}`,children:e.jsx(pa,{className:"w-4 h-4"})})]},E.id))})})]})}),e.jsx(Vt,{value:"jersey-retirements",className:"space-y-6",children:e.jsxs($,{children:[e.jsxs(le,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(HC,{className:"w-6 h-6"}),"Retired Jersey Numbers"]}),e.jsx($e,{children:"Virtual jersey retirement ceremonies and honors"})]}),e.jsx(V,{children:e.jsx("div",{className:"space-y-4",children:Bxe.map(E=>e.jsx("div",{className:"p-4 border rounded-lg hover-elevate","data-testid":`jersey-${E.id}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"h-16 w-16 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center",children:e.jsxs("span",{className:"text-2xl font-bold text-white",children:["#",E.number]})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:E.playerName}),e.jsx("p",{className:"text-sm text-muted-foreground",children:E.team}),e.jsxs("div",{className:"mt-1 flex items-center gap-4 text-sm",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ds,{className:"w-3 h-3"}),E.retirementDate]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(tr,{className:"w-3 h-3"}),E.ceremony]})]})]})]}),e.jsxs(O,{variant:"outline","data-testid":`button-watch-ceremony-${E.id}`,children:[e.jsx(Bd,{className:"w-4 h-4 mr-2"}),"Watch Ceremony"]})]})},E.id))})})]})})]})}),e.jsx(Os,{open:c,onOpenChange:d,children:e.jsxs(Ds,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Is,{children:[e.jsx(Rs,{children:"Create Athlete Memorial"}),e.jsx(Lr,{children:"Honor an athlete's legacy by creating a comprehensive memorial"})]}),e.jsxs("div",{className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(De,{htmlFor:"athlete-name",children:"Athlete Name"}),e.jsx(re,{id:"athlete-name",value:v.name,onChange:E=>j({...v,name:E.target.value}),placeholder:"Enter full name","data-testid":"input-athlete-name"})]}),e.jsxs("div",{children:[e.jsx(De,{htmlFor:"jersey-number",children:"Jersey Number"}),e.jsx(re,{id:"jersey-number",value:v.jerseyNumber,onChange:E=>j({...v,jerseyNumber:E.target.value}),placeholder:"#23","data-testid":"input-jersey-number"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(De,{htmlFor:"sport",children:"Sport"}),e.jsxs(Rt,{value:v.sport,onValueChange:E=>j({...v,sport:E}),children:[e.jsx(Mt,{id:"sport","data-testid":"select-sport",children:e.jsx(Ft,{placeholder:"Select sport"})}),e.jsxs(Lt,{children:[e.jsx(te,{value:"basketball",children:"Basketball"}),e.jsx(te,{value:"football",children:"Football"}),e.jsx(te,{value:"baseball",children:"Baseball"}),e.jsx(te,{value:"tennis",children:"Tennis"}),e.jsx(te,{value:"hockey",children:"Hockey"}),e.jsx(te,{value:"soccer",children:"Soccer"}),e.jsx(te,{value:"golf",children:"Golf"}),e.jsx(te,{value:"other",children:"Other"})]})]})]}),e.jsxs("div",{children:[e.jsx(De,{htmlFor:"position",children:"Position"}),e.jsx(re,{id:"position",value:v.position,onChange:E=>j({...v,position:E.target.value}),placeholder:"e.g., Point Guard","data-testid":"input-position"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(De,{htmlFor:"birth-date",children:"Birth Date"}),e.jsx(re,{id:"birth-date",type:"date",value:v.birthDate,onChange:E=>j({...v,birthDate:E.target.value}),"data-testid":"input-birth-date"})]}),e.jsxs("div",{children:[e.jsx(De,{htmlFor:"retired-date",children:"Retirement Date"}),e.jsx(re,{id:"retired-date",type:"date",value:v.retiredDate,onChange:E=>j({...v,retiredDate:E.target.value}),"data-testid":"input-retired-date"})]})]}),e.jsxs("div",{children:[e.jsx(De,{htmlFor:"biography",children:"Biography"}),e.jsx(Gt,{id:"biography",value:v.biography,onChange:E=>j({...v,biography:E.target.value}),placeholder:"Share the athlete's story, career highlights, and legacy...",rows:4,"data-testid":"textarea-biography"})]}),e.jsx(ls,{}),e.jsxs("div",{children:[e.jsx(De,{children:"Career Statistics (Sport-Specific)"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Add relevant statistics based on the selected sport"}),v.sport==="basketball"&&e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx(re,{placeholder:"Points","data-testid":"input-stat-points"}),e.jsx(re,{placeholder:"Rebounds","data-testid":"input-stat-rebounds"}),e.jsx(re,{placeholder:"Assists","data-testid":"input-stat-assists"})]}),v.sport==="football"&&e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx(re,{placeholder:"Passing Yards","data-testid":"input-stat-yards"}),e.jsx(re,{placeholder:"Touchdowns","data-testid":"input-stat-touchdowns"}),e.jsx(re,{placeholder:"Completions","data-testid":"input-stat-completions"})]}),!v.sport&&e.jsx("p",{className:"text-sm text-muted-foreground italic",children:"Select a sport to see relevant statistics fields"})]}),e.jsxs("div",{children:[e.jsx(De,{children:"Initial Legacy Score Calculation"}),e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm",children:"Calculated Legacy Score"}),e.jsx("span",{className:"text-2xl font-bold",children:"75/100"})]}),e.jsx(Sl,{value:75,className:"h-2"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Based on championships, awards, statistics, and career longevity"})]})]})]}),e.jsxs(Ra,{children:[e.jsx(O,{variant:"outline",onClick:()=>d(!1),"data-testid":"button-cancel-create",children:"Cancel"}),e.jsx(O,{onClick:P,"data-testid":"button-submit-create",children:"Create Memorial"})]})]})}),u&&e.jsx(Os,{open:!!u,onOpenChange:()=>m(null),children:e.jsxs(Ds,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Is,{children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(Da,{className:"h-16 w-16",children:[e.jsx(Td,{src:u.photo,alt:u.name}),e.jsx(Ia,{children:u.name.split(" ").map(E=>E[0]).join("")})]}),e.jsxs("div",{children:[e.jsx(Rs,{className:"text-2xl",children:u.name}),e.jsxs(Lr,{className:"text-base",children:[u.sport,"  ",u.position,"  #",u.jerseyNumber]})]})]})}),e.jsx(Dl,{className:"mt-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs($,{children:[e.jsx(le,{children:e.jsx(ge,{className:"text-lg",children:"Athletic Legacy Score"})}),e.jsxs(V,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-3xl font-bold",children:[u.legacyScore,"/100"]}),e.jsx(Mo,{className:"w-6 h-6 text-green-600"})]}),e.jsx(Sl,{value:u.legacyScore,className:"h-3"})]})]}),e.jsxs($,{children:[e.jsx(le,{children:e.jsxs(ge,{className:"text-lg flex items-center gap-2",children:[e.jsx(UI,{className:"w-5 h-5"}),"Career Statistics"]})}),e.jsx(V,{children:e.jsx("div",{className:"grid grid-cols-2 gap-4",children:Object.entries(u.stats).map(([E,L])=>e.jsxs("div",{className:"flex justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:E}),e.jsx("span",{className:"font-semibold",children:L})]},E))})})]}),e.jsxs($,{children:[e.jsx(le,{children:e.jsxs(ge,{className:"text-lg flex items-center gap-2",children:[e.jsx(Ni,{className:"w-5 h-5"}),"Achievements & Awards"]})}),e.jsx(V,{children:e.jsx("div",{className:"space-y-2",children:u.achievements.map((E,L)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ks,{className:"w-4 h-4 text-yellow-600"}),e.jsx("span",{className:"text-sm",children:E})]},L))})})]}),u.hallOfFame.inducted&&e.jsxs($,{children:[e.jsx(le,{children:e.jsxs(ge,{className:"text-lg flex items-center gap-2",children:[e.jsx(Uo,{className:"w-5 h-5"}),"Hall of Fame"]})}),e.jsx(V,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Inducted:"})," ",u.hallOfFame.year]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Location:"})," ",u.hallOfFame.location]})]})})]})]})})]})})]})}const qxe={dog:w_,cat:b_,bird:Pg,fish:__,rabbit:k_,other:Si},Vxe={rainbow_bridge:"from-purple-400 via-pink-300 to-orange-300",garden:"from-green-400 to-emerald-300",starlight:"from-indigo-500 to-purple-400",forest:"from-green-600 to-teal-400",ocean:"from-blue-400 to-cyan-300"};function Hxe(){const[t,s]=N.useState(""),[r,n]=N.useState("all");Ht();const{data:a,isLoading:i}=Xe({queryKey:["/api/pet-memorials"]}),o=a==null?void 0:a.filter(c=>{var m;const d=c.name.toLowerCase().includes(t.toLowerCase())||((m=c.breed)==null?void 0:m.toLowerCase().includes(t.toLowerCase())),u=r==="all"||c.species===r;return d&&u}),l=["dog","cat","bird","rabbit","fish","horse","reptile","other"];return e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-purple-50 via-pink-50 to-orange-50 dark:from-gray-900 dark:via-purple-900/20 dark:to-gray-900",children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[e.jsx(Zu,{className:"h-10 w-10 text-purple-500"}),e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-purple-600 via-pink-500 to-orange-400 bg-clip-text text-transparent",children:"Pet Memorials"}),e.jsx(Zu,{className:"h-10 w-10 text-orange-400"})]}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Honor your beloved companions who have crossed the Rainbow Bridge. Create lasting tributes to celebrate their unconditional love and cherished memories."})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-8 justify-center items-center",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(Cc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(re,{placeholder:"Search by name or breed...",value:t,onChange:c=>s(c.target.value),className:"pl-10","data-testid":"input-search-pets"})]}),e.jsxs(Rt,{value:r,onValueChange:n,children:[e.jsx(Mt,{className:"w-40","data-testid":"select-species-filter",children:e.jsx(Ft,{placeholder:"All Species"})}),e.jsxs(Lt,{children:[e.jsx(te,{value:"all",children:"All Species"}),l.map(c=>e.jsx(te,{value:c,children:c.charAt(0).toUpperCase()+c.slice(1)},c))]})]}),e.jsx(He,{href:"/create-pet-memorial",children:e.jsxs(O,{className:"gap-2 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600","data-testid":"button-create-pet-memorial",children:[e.jsx(bs,{className:"h-4 w-4"}),"Create Pet Memorial"]})})]}),e.jsxs(ba,{defaultValue:"all",className:"mb-8",children:[e.jsxs(ra,{className:"grid w-full max-w-md mx-auto grid-cols-3",children:[e.jsx(qt,{value:"all","data-testid":"tab-all-pets",children:"All Pets"}),e.jsx(qt,{value:"dogs","data-testid":"tab-dogs",children:"Dogs"}),e.jsx(qt,{value:"cats","data-testid":"tab-cats",children:"Cats"})]}),e.jsx(Vt,{value:"all",className:"mt-6",children:i?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(c=>e.jsxs($,{className:"animate-pulse",children:[e.jsx(le,{children:e.jsx("div",{className:"h-32 bg-gray-200 rounded-lg"})}),e.jsxs(V,{children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})]},c))}):o&&o.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(c=>e.jsx(X2,{pet:c},c.id))}):e.jsxs("div",{className:"text-center py-16",children:[e.jsx(Si,{className:"h-16 w-16 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No Pet Memorials Yet"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Be the first to create a loving tribute to your beloved pet"}),e.jsx(He,{href:"/create-pet-memorial",children:e.jsxs(O,{className:"gap-2 bg-gradient-to-r from-purple-500 to-pink-500",children:[e.jsx(bs,{className:"h-4 w-4"}),"Create First Memorial"]})})]})}),e.jsx(Vt,{value:"dogs",className:"mt-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o==null?void 0:o.filter(c=>c.species==="dog").map(c=>e.jsx(X2,{pet:c},c.id))})}),e.jsx(Vt,{value:"cats",className:"mt-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o==null?void 0:o.filter(c=>c.species==="cat").map(c=>e.jsx(X2,{pet:c},c.id))})})]}),e.jsx("div",{className:"mt-16 text-center",children:e.jsx($,{className:"max-w-2xl mx-auto bg-gradient-to-r from-purple-100 to-pink-100 dark:from-purple-900/30 dark:to-pink-900/30 border-0",children:e.jsxs(V,{className:"pt-8 pb-8",children:[e.jsx(Zu,{className:"h-12 w-12 mx-auto text-purple-500 mb-4"}),e.jsx("h3",{className:"text-2xl font-bold mb-3",children:"The Rainbow Bridge"}),e.jsx("p",{className:"text-muted-foreground italic",children:'"Just this side of heaven is a place called Rainbow Bridge. When an animal who has been especially close to someone here dies, that pet goes to Rainbow Bridge. There they are restored to health and vigor..."'})]})})})]})})}function X2({pet:t}){const s=qxe[t.species]||Si,r=Vxe[t.theme||"rainbow_bridge"];return e.jsx(He,{href:`/pet-memorial/${t.inviteCode}`,children:e.jsxs($,{className:"overflow-hidden hover:shadow-xl transition-all duration-300 cursor-pointer group","data-testid":`card-pet-memorial-${t.id}`,children:[e.jsxs("div",{className:`h-32 bg-gradient-to-r ${r} relative`,children:[t.profilePhoto?e.jsx("img",{src:t.profilePhoto,alt:t.name,className:"absolute inset-0 w-full h-full object-cover"}):e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(s,{className:"h-16 w-16 text-white/50"})}),e.jsx("div",{className:"absolute top-2 right-2",children:e.jsxs(ze,{variant:"secondary",className:"bg-white/90 text-xs",children:[e.jsx(s,{className:"h-3 w-3 mr-1"}),t.species]})})]}),e.jsx(le,{className:"pb-2",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx(ge,{className:"text-xl group-hover:text-purple-600 transition-colors",children:t.name}),t.breed&&e.jsx($e,{children:t.breed})]}),e.jsxs(Da,{className:"h-12 w-12 border-2 border-white shadow-lg -mt-8",children:[e.jsx(Td,{src:t.profilePhoto||void 0,alt:t.name}),e.jsx(Ia,{className:"bg-purple-100",children:e.jsx(s,{className:"h-6 w-6 text-purple-600"})})]})]})}),e.jsxs(V,{className:"pb-2",children:[t.epitaph&&e.jsxs("p",{className:"text-sm text-muted-foreground italic line-clamp-2",children:['"',t.epitaph,'"']}),e.jsxs("div",{className:"flex items-center gap-4 mt-3 text-sm text-muted-foreground",children:[t.age&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ds,{className:"h-3 w-3"}),t.age]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Nr,{className:"h-3 w-3 text-orange-400"}),t.candleLitCount||0," candles"]})]})]}),e.jsx(mo,{className:"pt-2 border-t",children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[e.jsx(Ei,{className:"h-3 w-3"}),t.viewCount||0," views"]}),e.jsx(O,{variant:"ghost",size:"sm",className:"text-purple-600 hover:text-purple-700",children:"View Memorial"})]})})]})})}const Wxe="/assets/original_o_with_world_and_feature_icons-0WPubkKE.png",Kxe=[{id:"original-world",name:"Original O with World & Features",description:"The original Opictuary O with Earth globe inside, surrounded by feature icons: messages, birthdays, family trees, QR codes, athletic honors, and memorial flames - all within the O",image:Wxe}];function Yxe(){return e.jsx("div",{className:"min-h-screen bg-background py-12 px-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:"text-4xl font-serif font-bold text-foreground mb-4","data-testid":"text-logo-preview-title",children:"Opictuary Continuum Logo Options"}),e.jsx("p",{className:"text-lg text-muted-foreground","data-testid":"text-logo-preview-subtitle",children:"Original O with world globe and feature icons inside"})]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-8",children:Kxe.map(t=>e.jsxs($,{className:"overflow-hidden","data-testid":`card-logo-${t.id}`,children:[e.jsx(le,{className:"pb-2",children:e.jsx(ge,{className:"text-xl","data-testid":`text-logo-name-${t.id}`,children:t.name})}),e.jsxs(V,{className:"space-y-4",children:[e.jsx("div",{className:"bg-muted/30 rounded-lg p-6 flex items-center justify-center min-h-[300px]",children:e.jsx("img",{src:t.image,alt:t.name,className:"max-w-full max-h-[280px] object-contain rounded-lg","data-testid":`img-logo-${t.id}`})}),e.jsx("p",{className:"text-sm text-muted-foreground","data-testid":`text-logo-description-${t.id}`,children:t.description})]})]},t.id))})]})})}const Gxe="/assets/opictuary_logo_no_cross_symbol-BkKekP0m.png";function Qxe(){return e.jsx("div",{className:"min-h-screen bg-background py-12 px-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:"text-4xl font-serif font-bold text-foreground mb-4","data-testid":"text-brand-logo-title",children:"New Opictuary Logo Design"}),e.jsx("p",{className:"text-lg text-muted-foreground","data-testid":"text-brand-logo-subtitle",children:"O with halo, world globe, varied feature icons, and Opictuary text below"})]}),e.jsxs($,{className:"overflow-hidden","data-testid":"card-new-logo",children:[e.jsx(le,{className:"pb-2",children:e.jsx(ge,{className:"text-xl text-center","data-testid":"text-logo-title",children:"Gold Foil Opictuary with Halo & Varied Icons"})}),e.jsxs(V,{className:"space-y-4",children:[e.jsx("div",{className:"bg-muted/30 rounded-lg p-8 flex items-center justify-center",children:e.jsx("img",{src:Gxe,alt:"Opictuary Logo - O with Halo, World Globe and Feature Icons",className:"max-w-full max-h-[400px] object-contain rounded-lg","data-testid":"img-new-logo"})}),e.jsx("p",{className:"text-center text-muted-foreground","data-testid":"text-logo-description",children:'Golden halo above the O, Earth globe inside with varied feature icons (messages, birthdays, family tree, QR codes, Olympic rings, eternal flame, video, heart, star), and "Opictuary" text at the bottom'})]})]})]})})}const Zxe=Dr({name:we().min(1,"Pet's name is required"),species:we().min(1,"Species is required"),breed:we().optional(),color:we().optional(),birthDate:we().optional(),passingDate:we().min(1,"Passing date is required"),age:we().optional(),personality:ag(we()).optional(),favoriteActivities:ag(we()).optional(),favoriteFood:we().optional(),favoriteToy:we().optional(),specialTraits:we().optional(),biography:we().optional(),epitaph:we().optional(),rainbowBridgeMessage:we().optional(),theme:we().default("rainbow_bridge"),isPublic:xn().default(!0),allowCondolences:xn().default(!0)}),Xxe=[{value:"dog",label:"Dog",icon:w_},{value:"cat",label:"Cat",icon:b_},{value:"bird",label:"Bird",icon:Pg},{value:"rabbit",label:"Rabbit",icon:k_},{value:"fish",label:"Fish",icon:__},{value:"horse",label:"Horse",icon:Si},{value:"reptile",label:"Reptile",icon:Si},{value:"other",label:"Other",icon:Si}],Jxe=["Playful","Loyal","Cuddly","Energetic","Calm","Protective","Curious","Gentle","Mischievous","Friendly","Independent","Loving"],ege=[{value:"rainbow_bridge",label:"Rainbow Bridge",icon:Zu,color:"from-purple-400 via-pink-300 to-orange-300"},{value:"garden",label:"Peaceful Garden",icon:Bx,color:"from-green-400 to-emerald-300"},{value:"starlight",label:"Starlight",icon:Ks,color:"from-indigo-500 to-purple-400"},{value:"forest",label:"Forest",icon:Bx,color:"from-green-600 to-teal-400"},{value:"ocean",label:"Ocean",icon:eR,color:"from-blue-400 to-cyan-300"}];function tge(){const[,t]=ja(),[s,r]=N.useState(1),[n,a]=N.useState([]),{toast:i}=Ht(),o=Or({resolver:$r(Zxe),defaultValues:{name:"",species:"",breed:"",passingDate:"",theme:"rainbow_bridge",isPublic:!0,allowCondolences:!0,personality:[]}}),l=yt({mutationFn:async u=>pt("/api/pet-memorials",{method:"POST",body:JSON.stringify({...u,personality:n})}),onSuccess:u=>{xt.invalidateQueries({queryKey:["/api/pet-memorials"]}),i({title:"Memorial Created",description:`${o.getValues("name")}'s memorial has been created with love.`}),t(`/pet-memorial/${u.inviteCode}`)},onError:u=>{i({title:"Error",description:u.message,variant:"destructive"})}}),c=u=>{l.mutate(u)},d=u=>{a(m=>m.includes(u)?m.filter(f=>f!==u):[...m,u])};return e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-purple-50 via-pink-50 to-orange-50 dark:from-gray-900 dark:via-purple-900/20 dark:to-gray-900",children:e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-3xl",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3",children:[e.jsx(Zu,{className:"h-8 w-8 text-purple-500"}),e.jsx("h1",{className:"text-3xl font-bold",children:"Create Pet Memorial"})]}),e.jsx("p",{className:"text-muted-foreground",children:"Honor your beloved companion with a lasting tribute"})]}),e.jsx("div",{className:"flex justify-center mb-8",children:e.jsx("div",{className:"flex items-center gap-2",children:[1,2,3].map(u=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`
                  w-10 h-10 rounded-full flex items-center justify-center font-semibold
                  ${s>=u?"bg-purple-500 text-white":"bg-gray-200 text-gray-500"}
                `,children:s>u?e.jsx($n,{className:"h-5 w-5"}):u}),u<3&&e.jsx("div",{className:`w-12 h-1 ${s>u?"bg-purple-500":"bg-gray-200"}`})]},u))})}),e.jsx(Wr,{...o,children:e.jsxs("form",{onSubmit:o.handleSubmit(c),children:[s===1&&e.jsxs($,{children:[e.jsxs(le,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Si,{className:"h-5 w-5 text-purple-500"}),"Basic Information"]}),e.jsx($e,{children:"Tell us about your beloved pet"})]}),e.jsxs(V,{className:"space-y-6",children:[e.jsx(fe,{control:o.control,name:"name",render:({field:u})=>e.jsxs(me,{children:[e.jsx(he,{children:"Pet's Name *"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"Enter your pet's name",...u,"data-testid":"input-pet-name"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:o.control,name:"species",render:({field:u})=>e.jsxs(me,{children:[e.jsx(he,{children:"Species *"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:Xxe.map(m=>{const f=m.icon;return e.jsxs(O,{type:"button",variant:u.value===m.value?"default":"outline",className:"flex flex-col h-auto py-3",onClick:()=>u.onChange(m.value),"data-testid":`button-species-${m.value}`,children:[e.jsx(f,{className:"h-5 w-5 mb-1"}),e.jsx("span",{className:"text-xs",children:m.label})]},m.value)})}),e.jsx(ye,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(fe,{control:o.control,name:"breed",render:({field:u})=>e.jsxs(me,{children:[e.jsx(he,{children:"Breed"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"e.g., Golden Retriever",...u,"data-testid":"input-breed"})})]})}),e.jsx(fe,{control:o.control,name:"color",render:({field:u})=>e.jsxs(me,{children:[e.jsx(he,{children:"Color"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"e.g., Golden",...u,"data-testid":"input-color"})})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(fe,{control:o.control,name:"birthDate",render:({field:u})=>e.jsxs(me,{children:[e.jsx(he,{children:"Birth Date"}),e.jsx(xe,{children:e.jsx(re,{type:"date",...u,"data-testid":"input-birth-date"})})]})}),e.jsx(fe,{control:o.control,name:"passingDate",render:({field:u})=>e.jsxs(me,{children:[e.jsx(he,{children:"Passing Date *"}),e.jsx(xe,{children:e.jsx(re,{type:"date",...u,"data-testid":"input-passing-date"})}),e.jsx(ye,{})]})})]}),e.jsx(fe,{control:o.control,name:"age",render:({field:u})=>e.jsxs(me,{children:[e.jsx(he,{children:"Age"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"e.g., 12 years",...u,"data-testid":"input-age"})})]})})]})]}),s===2&&e.jsxs($,{children:[e.jsxs(le,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(_t,{className:"h-5 w-5 text-pink-500"}),"Personality & Memories"]}),e.jsx($e,{children:"Describe what made them special"})]}),e.jsxs(V,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(De,{className:"mb-3 block",children:"Personality Traits"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Jxe.map(u=>e.jsx(ze,{variant:n.includes(u)?"default":"outline",className:"cursor-pointer hover-elevate",onClick:()=>d(u),"data-testid":`badge-personality-${u.toLowerCase()}`,children:u},u))})]}),e.jsx(fe,{control:o.control,name:"favoriteFood",render:({field:u})=>e.jsxs(me,{children:[e.jsx(he,{children:"Favorite Food"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"What did they love to eat?",...u,"data-testid":"input-favorite-food"})})]})}),e.jsx(fe,{control:o.control,name:"favoriteToy",render:({field:u})=>e.jsxs(me,{children:[e.jsx(he,{children:"Favorite Toy"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"What was their favorite toy?",...u,"data-testid":"input-favorite-toy"})})]})}),e.jsx(fe,{control:o.control,name:"specialTraits",render:({field:u})=>e.jsxs(me,{children:[e.jsx(he,{children:"What Made Them Special"}),e.jsx(xe,{children:e.jsx(Gt,{placeholder:"Share what made them unique and irreplaceable...",className:"min-h-24",...u,"data-testid":"textarea-special-traits"})})]})}),e.jsx(fe,{control:o.control,name:"biography",render:({field:u})=>e.jsxs(me,{children:[e.jsx(he,{children:"Life Story"}),e.jsx(xe,{children:e.jsx(Gt,{placeholder:"Tell their story - how they came into your life, adventures together, cherished moments...",className:"min-h-32",...u,"data-testid":"textarea-biography"})})]})})]})]}),s===3&&e.jsxs($,{children:[e.jsxs(le,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(C_,{className:"h-5 w-5 text-purple-500"}),"Memorial Theme & Settings"]}),e.jsx($e,{children:"Customize how their memorial looks"})]}),e.jsxs(V,{className:"space-y-6",children:[e.jsx(fe,{control:o.control,name:"theme",render:({field:u})=>e.jsxs(me,{children:[e.jsx(he,{children:"Memorial Theme"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:ege.map(m=>{const f=m.icon;return e.jsxs("div",{className:`
                                  relative rounded-lg overflow-hidden cursor-pointer border-2 transition-all
                                  ${u.value===m.value?"border-purple-500 ring-2 ring-purple-200":"border-transparent"}
                                `,onClick:()=>u.onChange(m.value),"data-testid":`theme-${m.value}`,children:[e.jsx("div",{className:`h-20 bg-gradient-to-r ${m.color}`}),e.jsxs("div",{className:"p-3 bg-white dark:bg-gray-800 flex items-center gap-2",children:[e.jsx(f,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:m.label})]})]},m.value)})})]})}),e.jsx(fe,{control:o.control,name:"epitaph",render:({field:u})=>e.jsxs(me,{children:[e.jsx(he,{children:"Epitaph"}),e.jsx(Qt,{children:"A short tribute message"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"Forever in our hearts...",...u,"data-testid":"input-epitaph"})})]})}),e.jsx(fe,{control:o.control,name:"rainbowBridgeMessage",render:({field:u})=>e.jsxs(me,{children:[e.jsx(he,{children:"Rainbow Bridge Message"}),e.jsx(xe,{children:e.jsx(Gt,{placeholder:"A special message for your pet across the Rainbow Bridge...",className:"min-h-24",...u,"data-testid":"textarea-rainbow-message"})})]})}),e.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[e.jsx(fe,{control:o.control,name:"isPublic",render:({field:u})=>e.jsxs(me,{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(he,{children:"Public Memorial"}),e.jsx(Qt,{children:"Allow others to find and view"})]}),e.jsx(xe,{children:e.jsx(ir,{checked:u.value,onCheckedChange:u.onChange,"data-testid":"switch-public"})})]})}),e.jsx(fe,{control:o.control,name:"allowCondolences",render:({field:u})=>e.jsxs(me,{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(he,{children:"Allow Condolences"}),e.jsx(Qt,{children:"Let visitors leave messages"})]}),e.jsx(xe,{children:e.jsx(ir,{checked:u.value,onCheckedChange:u.onChange,"data-testid":"switch-condolences"})})]})})]})]})]}),e.jsxs("div",{className:"flex justify-between mt-6",children:[e.jsxs(O,{type:"button",variant:"outline",onClick:()=>r(u=>Math.max(1,u-1)),disabled:s===1,"data-testid":"button-previous-step",children:[e.jsx(Sr,{className:"h-4 w-4 mr-2"}),"Previous"]}),s<3?e.jsxs(O,{type:"button",onClick:()=>r(u=>Math.min(3,u+1)),"data-testid":"button-next-step",children:["Next",e.jsx(j_,{className:"h-4 w-4 ml-2"})]}):e.jsx(O,{type:"submit",disabled:l.isPending,className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600","data-testid":"button-create-memorial",children:l.isPending?"Creating...":e.jsxs(e.Fragment,{children:[e.jsx(Bs,{className:"h-4 w-4 mr-2"}),"Create Memorial"]})})]})]})})]})})}const sge={dog:w_,cat:b_,bird:Pg,fish:__,rabbit:k_,other:Si},rge={rainbow_bridge:"from-purple-400 via-pink-300 to-orange-300",garden:"from-green-400 to-emerald-300",starlight:"from-indigo-500 to-purple-400",forest:"from-green-600 to-teal-400",ocean:"from-blue-400 to-cyan-300"};function nge(){var w;const[,t]=Sc("/pet-memorial/:inviteCode"),s=t==null?void 0:t.inviteCode,[r,n]=N.useState(!1),[a,i]=N.useState(!1),[o,l]=N.useState({authorName:"",message:"",relationship:""}),[c,d]=N.useState({litBy:"",message:""}),{toast:u}=Ht(),{data:m,isLoading:f}=Xe({queryKey:[`/api/pet-memorials/${s}`],enabled:!!s}),{data:h}=Xe({queryKey:[`/api/pet-memorials/${s}/condolences`],enabled:!!s}),{data:p}=Xe({queryKey:[`/api/pet-memorials/${s}/candles`],enabled:!!s}),g=yt({mutationFn:async _=>pt("POST",`/api/pet-memorials/${s}/condolences`,_),onSuccess:()=>{xt.invalidateQueries({queryKey:[`/api/pet-memorials/${s}/condolences`]}),n(!1),l({authorName:"",message:"",relationship:""}),u({title:"Condolence Sent",description:"Your message has been shared."})}}),y=yt({mutationFn:async _=>pt("POST",`/api/pet-memorials/${s}/candles`,_),onSuccess:()=>{xt.invalidateQueries({queryKey:[`/api/pet-memorials/${s}/candles`]}),xt.invalidateQueries({queryKey:[`/api/pet-memorials/${s}`]}),i(!1),d({litBy:"",message:""}),u({title:"Candle Lit",description:"Your candle shines in their memory."})}});if(f)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"animate-pulse text-center",children:[e.jsx(Si,{className:"h-16 w-16 mx-auto text-purple-300 mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading memorial..."})]})});if(!m)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs($,{className:"max-w-md text-center p-8",children:[e.jsx(Si,{className:"h-16 w-16 mx-auto text-muted-foreground mb-4"}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Memorial Not Found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"This memorial may be private or doesn't exist."}),e.jsx(He,{href:"/pet-memorials",children:e.jsxs(O,{variant:"outline",children:[e.jsx(Sr,{className:"h-4 w-4 mr-2"}),"Back to Pet Memorials"]})})]})});const v=sge[m.species]||Si,j=rge[m.theme||"rainbow_bridge"];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-purple-50 via-pink-50 to-orange-50 dark:from-gray-900 dark:via-purple-900/20 dark:to-gray-900",children:[e.jsxs("div",{className:`h-64 md:h-80 bg-gradient-to-r ${j} relative`,children:[m.coverPhoto&&e.jsx("img",{src:m.coverPhoto,alt:"",className:"absolute inset-0 w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black/20"}),e.jsxs("div",{className:"container mx-auto px-4 h-full flex items-end pb-8 relative",children:[e.jsx(He,{href:"/pet-memorials",className:"absolute top-4 left-4",children:e.jsxs(O,{variant:"secondary",size:"sm",className:"gap-2","data-testid":"button-back",children:[e.jsx(Sr,{className:"h-4 w-4"}),"Back"]})}),e.jsxs("div",{className:"flex items-end gap-6",children:[e.jsxs(Da,{className:"h-32 w-32 border-4 border-white shadow-2xl",children:[e.jsx(Td,{src:m.profilePhoto||void 0,alt:m.name}),e.jsx(Ia,{className:"bg-purple-100 text-4xl",children:e.jsx(v,{className:"h-16 w-16 text-purple-600"})})]}),e.jsxs("div",{className:"text-white pb-2",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold drop-shadow-lg","data-testid":"text-pet-name",children:m.name}),e.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[e.jsxs(ze,{variant:"secondary",className:"bg-white/90",children:[e.jsx(v,{className:"h-3 w-3 mr-1"}),m.breed||m.species]}),m.age&&e.jsxs(ze,{variant:"secondary",className:"bg-white/90",children:[e.jsx(ds,{className:"h-3 w-3 mr-1"}),m.age]})]})]})]})]})]}),e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[m.epitaph&&e.jsx($,{className:"border-0 bg-gradient-to-r from-purple-100/50 to-pink-100/50 dark:from-purple-900/20 dark:to-pink-900/20",children:e.jsxs(V,{className:"pt-6 text-center",children:[e.jsx(Bs,{className:"h-6 w-6 mx-auto text-purple-500 mb-3"}),e.jsxs("p",{className:"text-xl italic text-purple-900 dark:text-purple-100","data-testid":"text-epitaph",children:['"',m.epitaph,'"']})]})}),m.biography&&e.jsxs($,{children:[e.jsx(le,{children:e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(_t,{className:"h-5 w-5 text-pink-500"}),"Life Story"]})}),e.jsx(V,{children:e.jsx("p",{className:"text-muted-foreground whitespace-pre-wrap","data-testid":"text-biography",children:m.biography})})]}),m.specialTraits&&e.jsxs($,{children:[e.jsx(le,{children:e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Ks,{className:"h-5 w-5 text-yellow-500"}),"What Made ",m.name," Special"]})}),e.jsx(V,{children:e.jsx("p",{className:"text-muted-foreground",children:m.specialTraits})})]}),(((w=m.personality)==null?void 0:w.length)||m.favoriteFood||m.favoriteToy)&&e.jsxs($,{children:[e.jsx(le,{children:e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Si,{className:"h-5 w-5 text-purple-500"}),"Personality & Favorites"]})}),e.jsxs(V,{className:"space-y-4",children:[m.personality&&m.personality.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Personality"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:m.personality.map(_=>e.jsx(ze,{variant:"secondary",children:_},_))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.favoriteFood&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Favorite Food"}),e.jsx("p",{className:"text-muted-foreground",children:m.favoriteFood})]}),m.favoriteToy&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Favorite Toy"}),e.jsx("p",{className:"text-muted-foreground",children:m.favoriteToy})]})]})]})]}),m.rainbowBridgeMessage&&e.jsxs($,{className:"bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/30 dark:to-pink-900/30 border-0",children:[e.jsx(le,{children:e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Zu,{className:"h-5 w-5 text-purple-500"}),"Rainbow Bridge Message"]})}),e.jsx(V,{children:e.jsxs("p",{className:"text-muted-foreground italic",children:['"',m.rainbowBridgeMessage,'"']})})]}),h&&h.length>0&&e.jsxs($,{children:[e.jsx(le,{children:e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Pl,{className:"h-5 w-5 text-blue-500"}),"Condolences (",h.length,")"]})}),e.jsx(V,{className:"space-y-4",children:h.map(_=>e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(eu,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:_.authorName}),_.relationship&&e.jsx(ze,{variant:"outline",className:"text-xs",children:_.relationship})]}),e.jsx("p",{className:"text-muted-foreground",children:_.message})]},_.id))})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx($,{children:e.jsxs(V,{className:"pt-6 space-y-4",children:[e.jsxs(Os,{open:a,onOpenChange:i,children:[e.jsx(si,{asChild:!0,children:e.jsxs(O,{className:"w-full gap-2 bg-gradient-to-r from-orange-400 to-amber-500 hover:from-orange-500 hover:to-amber-600","data-testid":"button-light-candle",children:[e.jsx(Nr,{className:"h-4 w-4"}),"Light a Candle"]})}),e.jsxs(Ds,{children:[e.jsx(Is,{children:e.jsxs(Rs,{children:["Light a Candle for ",m.name]})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{children:[e.jsx(De,{children:"Your Name"}),e.jsx(re,{value:c.litBy,onChange:_=>d(P=>({...P,litBy:_.target.value})),placeholder:"Enter your name","data-testid":"input-candle-name"})]}),e.jsxs("div",{children:[e.jsx(De,{children:"Message (Optional)"}),e.jsx(Gt,{value:c.message,onChange:_=>d(P=>({...P,message:_.target.value})),placeholder:"A brief message...","data-testid":"textarea-candle-message"})]})]}),e.jsx(Ra,{children:e.jsx(O,{onClick:()=>y.mutate(c),disabled:!c.litBy||y.isPending,className:"bg-gradient-to-r from-orange-400 to-amber-500","data-testid":"button-submit-candle",children:y.isPending?"Lighting...":"Light Candle"})})]})]}),m.allowCondolences&&e.jsxs(Os,{open:r,onOpenChange:n,children:[e.jsx(si,{asChild:!0,children:e.jsxs(O,{variant:"outline",className:"w-full gap-2","data-testid":"button-leave-condolence",children:[e.jsx(Pl,{className:"h-4 w-4"}),"Leave Condolence"]})}),e.jsxs(Ds,{children:[e.jsx(Is,{children:e.jsx(Rs,{children:"Share Your Condolences"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{children:[e.jsx(De,{children:"Your Name *"}),e.jsx(re,{value:o.authorName,onChange:_=>l(P=>({...P,authorName:_.target.value})),placeholder:"Enter your name","data-testid":"input-condolence-name"})]}),e.jsxs("div",{children:[e.jsx(De,{children:"Relationship to Owner"}),e.jsx(re,{value:o.relationship,onChange:_=>l(P=>({...P,relationship:_.target.value})),placeholder:"e.g., Friend, Neighbor","data-testid":"input-condolence-relationship"})]}),e.jsxs("div",{children:[e.jsx(De,{children:"Your Message *"}),e.jsx(Gt,{value:o.message,onChange:_=>l(P=>({...P,message:_.target.value})),placeholder:"Share your memories or condolences...",className:"min-h-24","data-testid":"textarea-condolence-message"})]})]}),e.jsx(Ra,{children:e.jsx(O,{onClick:()=>g.mutate(o),disabled:!o.authorName||!o.message||g.isPending,"data-testid":"button-submit-condolence",children:g.isPending?"Sending...":"Send Condolence"})})]})]}),e.jsxs(O,{variant:"outline",className:"w-full gap-2","data-testid":"button-share",children:[e.jsx(so,{className:"h-4 w-4"}),"Share Memorial"]})]})}),e.jsxs($,{children:[e.jsx(le,{children:e.jsxs(ge,{className:"text-sm flex items-center gap-2",children:[e.jsx(Nr,{className:"h-4 w-4 text-orange-400"}),"Candles Lit"]})}),e.jsxs(V,{children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-4xl font-bold text-orange-500","data-testid":"text-candle-count",children:m.candleLitCount||0}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"candles burning bright"})]}),p&&p.length>0&&e.jsxs("div",{className:"mt-4 space-y-2 max-h-48 overflow-y-auto",children:[p.slice(0,5).map(_=>e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Nr,{className:"h-3 w-3 text-orange-400"}),e.jsx("span",{children:_.litBy})]},_.id)),p.length>5&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",p.length-5," more"]})]})]})]}),e.jsx($,{className:"bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 border-0",children:e.jsxs(V,{className:"pt-6 text-center",children:[e.jsx(Zu,{className:"h-10 w-10 mx-auto text-purple-500 mb-3"}),e.jsx("p",{className:"text-sm text-muted-foreground italic",children:'"Until we meet again at the Rainbow Bridge..."'})]})})]})]})})]})}const jP=[{value:"all",label:"All Faiths",icon:qo},{value:"christian",label:"Christian",icon:Tg},{value:"catholic",label:"Catholic",icon:qI},{value:"jewish",label:"Jewish",icon:Ks},{value:"islamic",label:"Islamic",icon:Ka},{value:"hindu",label:"Hindu",icon:Yi},{value:"buddhist",label:"Buddhist",icon:PG},{value:"sikh",label:"Sikh",icon:Nr},{value:"native_american",label:"Native American",icon:ZI},{value:"spiritual",label:"Spiritual",icon:_t},{value:"secular",label:"Secular",icon:uo},{value:"universal",label:"Universal",icon:qo}],age=[{value:"all",label:"All Categories"},{value:"prayer",label:"Prayers"},{value:"reading",label:"Readings"},{value:"blessing",label:"Blessings"},{value:"ceremony",label:"Ceremonies"},{value:"song",label:"Songs/Hymns"},{value:"ritual",label:"Rituals"}],bP={comforting:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",celebratory:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",reflective:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",hopeful:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"};function ige(){const[t,s]=N.useState(""),[r,n]=N.useState("all"),[a,i]=N.useState("all"),[o,l]=N.useState(null),{toast:c}=Ht(),{data:d,isLoading:u}=Xe({queryKey:["/api/multi-faith-templates",r,a]}),m=d==null?void 0:d.filter(p=>{const g=p.title.toLowerCase().includes(t.toLowerCase())||p.content.toLowerCase().includes(t.toLowerCase()),y=r==="all"||p.faith===r,v=a==="all"||p.category===a;return g&&y&&v}),f=p=>{navigator.clipboard.writeText(p),c({title:"Copied to Clipboard",description:"The text has been copied and is ready to use."})},h=p=>{const g=jP.find(y=>y.value===p);return(g==null?void 0:g.icon)||qo};return e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-amber-50 via-white to-amber-50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800",children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[e.jsx(uo,{className:"h-10 w-10 text-amber-600"}),e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-amber-600 to-orange-500 bg-clip-text text-transparent",children:"Multi-Faith Memorial Templates"})]}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Find meaningful prayers, readings, and blessings from traditions around the world to honor your loved ones with dignity and respect."})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-8 items-center",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(Cc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(re,{placeholder:"Search prayers, readings, blessings...",value:t,onChange:p=>s(p.target.value),className:"pl-10","data-testid":"input-search-templates"})]}),e.jsxs(Rt,{value:r,onValueChange:n,children:[e.jsx(Mt,{className:"w-48","data-testid":"select-faith-filter",children:e.jsx(Ft,{placeholder:"Select Faith"})}),e.jsx(Lt,{children:jP.map(p=>{const g=p.icon;return e.jsx(te,{value:p.value,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{className:"h-4 w-4"}),p.label]})},p.value)})})]}),e.jsxs(Rt,{value:a,onValueChange:i,children:[e.jsx(Mt,{className:"w-40","data-testid":"select-category-filter",children:e.jsx(Ft,{placeholder:"Category"})}),e.jsx(Lt,{children:age.map(p=>e.jsx(te,{value:p.value,children:p.label},p.value))})]})]}),e.jsxs(ba,{defaultValue:"grid",className:"mb-6",children:[e.jsxs(ra,{children:[e.jsx(qt,{value:"grid","data-testid":"tab-grid-view",children:"Grid View"}),e.jsx(qt,{value:"list","data-testid":"tab-list-view",children:"List View"})]}),e.jsx(Vt,{value:"grid",className:"mt-6",children:u?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(p=>e.jsxs($,{className:"animate-pulse",children:[e.jsxs(le,{children:[e.jsx("div",{className:"h-5 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mt-2"})]}),e.jsx(V,{children:e.jsx("div",{className:"h-20 bg-gray-200 rounded"})})]},p))}):m&&m.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map(p=>{const g=h(p.faith);return e.jsxs($,{className:"hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>l(p),"data-testid":`card-template-${p.id}`,children:[e.jsxs(le,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{className:"h-5 w-5 text-amber-600"}),e.jsx(ge,{className:"text-lg",children:p.title})]}),p.rating&&e.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[e.jsx(Ks,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),Number(p.rating).toFixed(1)]})]}),e.jsxs($e,{className:"flex flex-wrap gap-2 mt-2",children:[e.jsx(ze,{variant:"outline",className:"text-xs",children:p.faith.replace(/_/g," ")}),e.jsx(ze,{variant:"secondary",className:"text-xs",children:p.category}),p.tone&&e.jsx(ze,{className:`text-xs ${bP[p.tone]||"bg-gray-100"}`,children:p.tone})]})]}),e.jsx(V,{children:e.jsxs("p",{className:"text-sm text-muted-foreground line-clamp-4 italic",children:['"',p.content.substring(0,150),'..."']})}),e.jsxs(mo,{className:"pt-0 flex justify-between",children:[p.source&&e.jsx("span",{className:"text-xs text-muted-foreground",children:p.source}),e.jsxs(O,{variant:"ghost",size:"sm",className:"ml-auto",onClick:y=>{y.stopPropagation(),f(p.content)},"data-testid":`button-copy-${p.id}`,children:[e.jsx(To,{className:"h-4 w-4 mr-1"}),"Copy"]})]})]},p.id)})}):e.jsxs("div",{className:"text-center py-16",children:[e.jsx(uo,{className:"h-16 w-16 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No Templates Found"}),e.jsx("p",{className:"text-muted-foreground",children:"Try adjusting your search or filters"})]})}),e.jsx(Vt,{value:"list",className:"mt-6",children:e.jsx($,{children:e.jsx(Dl,{className:"h-[600px]",children:m==null?void 0:m.map((p,g)=>{const y=h(p.faith);return e.jsxs("div",{children:[e.jsxs("div",{className:"p-4 hover:bg-muted/50 cursor-pointer",onClick:()=>l(p),children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(y,{className:"h-5 w-5 text-amber-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:p.title}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-1",children:[e.jsx(ze,{variant:"outline",className:"text-xs",children:p.faith.replace(/_/g," ")}),e.jsx(ze,{variant:"secondary",className:"text-xs",children:p.category})]})]})]}),e.jsx(O,{variant:"ghost",size:"sm",onClick:v=>{v.stopPropagation(),f(p.content)},children:e.jsx(To,{className:"h-4 w-4"})})]}),e.jsxs("p",{className:"mt-2 text-sm text-muted-foreground line-clamp-2 italic",children:['"',p.content.substring(0,200),'..."']})]}),g<m.length-1&&e.jsx(ls,{})]},p.id)})})})})]}),e.jsx(Os,{open:!!o,onOpenChange:()=>l(null),children:e.jsx(Ds,{className:"max-w-2xl max-h-[80vh]",children:o&&e.jsxs(e.Fragment,{children:[e.jsxs(Is,{children:[e.jsxs(Rs,{className:"flex items-center gap-2 text-xl",children:[(()=>{const p=h(o.faith);return e.jsx(p,{className:"h-6 w-6 text-amber-600"})})(),o.title]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[e.jsx(ze,{variant:"outline",children:o.faith.replace(/_/g," ")}),e.jsx(ze,{variant:"secondary",children:o.category}),o.tone&&e.jsx(ze,{className:bP[o.tone]||"bg-gray-100",children:o.tone}),o.suitableFor&&o.suitableFor.map(p=>e.jsx(ze,{variant:"outline",className:"text-xs",children:p},p))]})]}),e.jsxs(Dl,{className:"max-h-[400px] mt-4",children:[e.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 p-6 rounded-lg",children:e.jsx("p",{className:"text-lg leading-relaxed whitespace-pre-wrap","data-testid":"text-template-content",children:o.content})}),o.source&&e.jsxs("p",{className:"mt-4 text-sm text-muted-foreground text-right",children:[" ",o.source]})]}),e.jsxs(Ra,{className:"mt-4",children:[e.jsx(O,{variant:"outline",onClick:()=>l(null),children:"Close"}),e.jsxs(O,{onClick:()=>f(o.content),"data-testid":"button-copy-full-template",children:[e.jsx(To,{className:"h-4 w-4 mr-2"}),"Copy to Clipboard"]})]})]})})}),e.jsx($,{className:"mt-12 bg-gradient-to-r from-amber-100/50 to-orange-100/50 dark:from-amber-900/20 dark:to-orange-900/20 border-0",children:e.jsxs(V,{className:"pt-8 pb-8 text-center",children:[e.jsx(qo,{className:"h-12 w-12 mx-auto text-amber-600 mb-4"}),e.jsx("h3",{className:"text-2xl font-bold mb-3",children:"Embracing All Traditions"}),e.jsx("p",{className:"text-muted-foreground max-w-xl mx-auto",children:"Our collection includes prayers, readings, and blessings from many faith traditions. Each template is curated with respect and can be personalized for your loved one's memorial."})]})})]})})}const oge=Dr({fullName:we().min(2,"Name is required"),birthDate:we().optional(),location:we().optional(),occupation:we().optional(),biography:we().optional(),lifePhilosophy:we().optional(),favoriteQuote:we().optional(),isPublic:xn().default(!1),publishAfterPassing:xn().default(!0),designatedExecutorEmail:we().email().optional().or(wr(""))}),lge=[{value:"education",label:"Education",icon:Za},{value:"career",label:"Career",icon:Eg},{value:"family",label:"Family",icon:Ms},{value:"travel",label:"Travel",icon:FG},{value:"hobby",label:"Hobbies",icon:Ks},{value:"volunteer",label:"Volunteering",icon:S_},{value:"award",label:"Awards",icon:Ni},{value:"personal",label:"Personal",icon:_t}];function cge(){const[t,s]=N.useState(!1),{toast:r}=Ht(),{data:n}=Xe({queryKey:["/api/auth/user"],retry:!1}),{data:a,isLoading:i}=Xe({queryKey:["/api/living-legacies/my"],enabled:!!n}),o=Or({resolver:$r(oge),defaultValues:{fullName:"",birthDate:"",location:"",occupation:"",biography:"",lifePhilosophy:"",favoriteQuote:"",isPublic:!1,publishAfterPassing:!0,designatedExecutorEmail:""}}),l=yt({mutationFn:async d=>await pt("POST","/api/living-legacies",d),onSuccess:()=>{xt.invalidateQueries({queryKey:["/api/living-legacies/my"]}),s(!1),o.reset(),r({title:"Living Legacy Created",description:"Your legacy has been started. Begin adding your achievements and milestones!"})},onError:d=>{r({title:"Error",description:d.message||"Failed to create living legacy",variant:"destructive"})}}),c=d=>{l.mutate(d)};return e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-purple-50 via-white to-indigo-50 dark:from-gray-900 dark:via-gray-900 dark:to-indigo-950",children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[e.jsx(Bs,{className:"h-10 w-10 text-purple-600"}),e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-purple-600 to-indigo-500 bg-clip-text text-transparent",children:"Living Legacy"})]}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Build your legacy while you live. Document your achievements, dreams, and messages for loved ones. Create a meaningful record of your life's journey."})]}),n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex justify-end mb-6",children:e.jsxs(Os,{open:t,onOpenChange:s,children:[e.jsx(si,{asChild:!0,children:e.jsxs(O,{"data-testid":"button-create-legacy",children:[e.jsx(bs,{className:"h-4 w-4 mr-2"}),"Start Your Legacy"]})}),e.jsxs(Ds,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Is,{children:e.jsxs(Rs,{className:"flex items-center gap-2",children:[e.jsx(Bs,{className:"h-5 w-5 text-purple-600"}),"Start Your Living Legacy"]})}),e.jsx(Wr,{...o,children:e.jsxs("form",{onSubmit:o.handleSubmit(c),className:"space-y-6",children:[e.jsx(fe,{control:o.control,name:"fullName",render:({field:d})=>e.jsxs(me,{children:[e.jsx(he,{children:"Your Full Name"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"Enter your name",...d,"data-testid":"input-legacy-name"})}),e.jsx(ye,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(fe,{control:o.control,name:"birthDate",render:({field:d})=>e.jsxs(me,{children:[e.jsx(he,{children:"Birth Date"}),e.jsx(xe,{children:e.jsx(re,{type:"date",...d,"data-testid":"input-legacy-birthdate"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:o.control,name:"location",render:({field:d})=>e.jsxs(me,{children:[e.jsx(he,{children:"Location"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"City, State",...d,"data-testid":"input-legacy-location"})}),e.jsx(ye,{})]})})]}),e.jsx(fe,{control:o.control,name:"occupation",render:({field:d})=>e.jsxs(me,{children:[e.jsx(he,{children:"Occupation"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"Your profession or role",...d,"data-testid":"input-legacy-occupation"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:o.control,name:"biography",render:({field:d})=>e.jsxs(me,{children:[e.jsx(he,{children:"Biography"}),e.jsx(xe,{children:e.jsx(Gt,{placeholder:"Share your life story...",className:"min-h-[100px]",...d,"data-testid":"input-legacy-biography"})}),e.jsx(Qt,{children:"You can always add more details later"}),e.jsx(ye,{})]})}),e.jsx(fe,{control:o.control,name:"lifePhilosophy",render:({field:d})=>e.jsxs(me,{children:[e.jsx(he,{children:"Life Philosophy"}),e.jsx(xe,{children:e.jsx(Gt,{placeholder:"What principles guide your life?",...d,"data-testid":"input-legacy-philosophy"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:o.control,name:"favoriteQuote",render:({field:d})=>e.jsxs(me,{children:[e.jsx(he,{children:"Favorite Quote"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"A quote that inspires you",...d,"data-testid":"input-legacy-quote"})}),e.jsx(ye,{})]})}),e.jsx(ls,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Privacy Settings"}),e.jsx(fe,{control:o.control,name:"isPublic",render:({field:d})=>e.jsxs(me,{className:"flex items-center justify-between p-4 rounded-lg border",children:[e.jsxs("div",{children:[e.jsx(he,{className:"text-base",children:"Make Public Now"}),e.jsx(Qt,{children:"Allow others to view your legacy while you're alive"})]}),e.jsx(xe,{children:e.jsx(ir,{checked:d.value,onCheckedChange:d.onChange,"data-testid":"switch-legacy-public"})})]})}),e.jsx(fe,{control:o.control,name:"publishAfterPassing",render:({field:d})=>e.jsxs(me,{className:"flex items-center justify-between p-4 rounded-lg border",children:[e.jsxs("div",{children:[e.jsx(he,{className:"text-base",children:"Publish After Passing"}),e.jsx(Qt,{children:"Convert to a memorial page when the time comes"})]}),e.jsx(xe,{children:e.jsx(ir,{checked:d.value,onCheckedChange:d.onChange,"data-testid":"switch-legacy-publish"})})]})}),e.jsx(fe,{control:o.control,name:"designatedExecutorEmail",render:({field:d})=>e.jsxs(me,{children:[e.jsx(he,{children:"Designated Executor Email"}),e.jsx(xe,{children:e.jsx(re,{type:"email",placeholder:"executor@email.com",...d,"data-testid":"input-legacy-executor"})}),e.jsx(Qt,{children:"This person will be able to manage your legacy"}),e.jsx(ye,{})]})})]}),e.jsxs(Ra,{children:[e.jsx(O,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"}),e.jsx(O,{type:"submit",disabled:l.isPending,"data-testid":"button-submit-legacy",children:l.isPending?"Creating...":"Create Legacy"})]})]})})]})]})}),i?e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[1,2,3].map(d=>e.jsxs($,{className:"animate-pulse",children:[e.jsxs(le,{children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mt-2"})]}),e.jsx(V,{children:e.jsx("div",{className:"h-4 bg-gray-200 rounded w-full"})})]},d))}):a&&a.length>0?e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:a.map(d=>e.jsxs($,{className:"hover:shadow-lg transition-shadow","data-testid":`card-legacy-${d.id}`,children:[e.jsx(le,{children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{children:[e.jsx(ge,{className:"text-xl",children:d.fullName}),d.occupation&&e.jsxs($e,{className:"flex items-center gap-1",children:[e.jsx(Eg,{className:"h-3 w-3"}),d.occupation]})]}),e.jsx(ze,{variant:d.isPublic?"default":"secondary",children:d.isPublic?e.jsxs(e.Fragment,{children:[e.jsx(qo,{className:"h-3 w-3 mr-1"})," Public"]}):e.jsxs(e.Fragment,{children:[e.jsx(Od,{className:"h-3 w-3 mr-1"})," Private"]})})]})}),e.jsxs(V,{className:"space-y-4",children:[d.location&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(tr,{className:"h-4 w-4"}),d.location]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"Completion"}),e.jsxs("span",{className:"font-medium",children:[d.completionPercentage||0,"%"]})]}),e.jsx(Sl,{value:d.completionPercentage||0,className:"h-2"})]}),d.favoriteQuote&&e.jsxs("p",{className:"text-sm italic text-muted-foreground border-l-2 border-purple-300 pl-3",children:['"',d.favoriteQuote,'"']})]}),e.jsxs(mo,{className:"flex justify-between gap-2",children:[e.jsx(O,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs(He,{href:`/living-legacy/${d.id}`,children:["View Legacy",e.jsx(Fd,{className:"h-4 w-4 ml-1"})]})}),e.jsxs(O,{variant:"ghost",size:"sm",children:[e.jsx(Mg,{className:"h-4 w-4 mr-1"}),"Edit"]})]})]},d.id))}):e.jsx($,{className:"max-w-2xl mx-auto text-center",children:e.jsxs(V,{className:"pt-8 pb-8",children:[e.jsx(Bs,{className:"h-16 w-16 mx-auto text-purple-300 mb-6"}),e.jsx("h3",{className:"text-2xl font-bold mb-3",children:"Start Building Your Legacy"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Document your life's achievements, share your wisdom, and leave meaningful messages for those you love."}),e.jsxs(O,{onClick:()=>s(!0),"data-testid":"button-start-first-legacy",children:[e.jsx(bs,{className:"h-4 w-4 mr-2"}),"Create Your First Legacy"]})]})}),e.jsxs("div",{className:"mt-12",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 text-center",children:"What You Can Document"}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:lge.map(d=>{const u=d.icon;return e.jsx($,{className:"hover-elevate",children:e.jsxs(V,{className:"pt-6 text-center",children:[e.jsx(u,{className:"h-10 w-10 mx-auto text-purple-500 mb-3"}),e.jsx("h3",{className:"font-semibold",children:d.label}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Track your ",d.label.toLowerCase()," milestones"]})]})},d.value)})})]}),e.jsxs("div",{className:"mt-12 grid gap-6 md:grid-cols-3",children:[e.jsx($,{className:"bg-gradient-to-br from-purple-100/50 to-indigo-100/50 dark:from-purple-900/20 dark:to-indigo-900/20 border-0",children:e.jsxs(V,{className:"pt-6 text-center",children:[e.jsx(lx,{className:"h-10 w-10 mx-auto text-purple-600 mb-3"}),e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Bucket List"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Track dreams and goals you want to accomplish"})]})}),e.jsx($,{className:"bg-gradient-to-br from-indigo-100/50 to-blue-100/50 dark:from-indigo-900/20 dark:to-blue-900/20 border-0",children:e.jsxs(V,{className:"pt-6 text-center",children:[e.jsx(Nn,{className:"h-10 w-10 mx-auto text-indigo-600 mb-3"}),e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Future Messages"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Write letters to be delivered to loved ones"})]})}),e.jsx($,{className:"bg-gradient-to-br from-blue-100/50 to-purple-100/50 dark:from-blue-900/20 dark:to-purple-900/20 border-0",children:e.jsxs(V,{className:"pt-6 text-center",children:[e.jsx(Uo,{className:"h-10 w-10 mx-auto text-blue-600 mb-3"}),e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Achievements"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Document milestones and accomplishments"})]})})]})]}):e.jsxs($,{className:"max-w-lg mx-auto",children:[e.jsxs(le,{className:"text-center",children:[e.jsx(Od,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx(ge,{children:"Sign In Required"}),e.jsx($e,{children:"Please sign in to create and manage your Living Legacy"})]}),e.jsx(mo,{className:"justify-center",children:e.jsx(O,{asChild:!0,"data-testid":"button-login-for-legacy",children:e.jsx(He,{href:"/login",children:"Sign In to Get Started"})})})]})]})})}const NP=[{value:"parent",label:"Parent",icon:zo},{value:"child",label:"Child",icon:qC},{value:"sibling",label:"Sibling",icon:Ms},{value:"spouse",label:"Spouse/Partner",icon:_t},{value:"grandparent",label:"Grandparent",icon:zo},{value:"grandchild",label:"Grandchild",icon:qC},{value:"aunt_uncle",label:"Aunt/Uncle",icon:Ms},{value:"niece_nephew",label:"Niece/Nephew",icon:Ms},{value:"cousin",label:"Cousin",icon:Ms}],wP={parent:["Mother","Father","Step-Mother","Step-Father","Adoptive Mother","Adoptive Father"],child:["Son","Daughter","Step-Son","Step-Daughter","Adopted Son","Adopted Daughter"],sibling:["Brother","Sister","Half-Brother","Half-Sister","Step-Brother","Step-Sister"],spouse:["Husband","Wife","Partner","Ex-Husband","Ex-Wife"],grandparent:["Grandmother","Grandfather","Maternal Grandmother","Maternal Grandfather","Paternal Grandmother","Paternal Grandfather"],grandchild:["Grandson","Granddaughter"],aunt_uncle:["Aunt","Uncle","Great-Aunt","Great-Uncle"],niece_nephew:["Niece","Nephew"],cousin:["First Cousin","Second Cousin","Cousin Once Removed"]},dge=Dr({relationship:we().min(1,"Relationship type is required"),relationshipDetail:we().optional(),relatedPersonName:we().optional(),relatedMemorialId:we().optional(),isBloodRelative:xn().default(!0),marriageDate:we().optional(),marriageLocation:we().optional()});function uge(){const s=Ba().memorialId,[r,n]=N.useState(!1),[a,i]=N.useState(""),{toast:o}=Ht(),{data:l}=Xe({queryKey:["/api/auth/user"],retry:!1}),{data:c}=Xe({queryKey:[`/api/memorials/${s}`],enabled:!!s}),{data:d,isLoading:u}=Xe({queryKey:[`/api/memorials/${s}/family-tree`],enabled:!!s}),{data:m}=Xe({queryKey:[`/api/memorials/search?q=${encodeURIComponent(a)}`],enabled:a.length>=2}),f=Or({resolver:$r(dge),defaultValues:{relationship:"",relationshipDetail:"",relatedPersonName:"",relatedMemorialId:"",isBloodRelative:!0,marriageDate:"",marriageLocation:""}}),h=f.watch("relationship"),p=yt({mutationFn:async v=>await pt("POST",`/api/memorials/${s}/family-tree`,v),onSuccess:()=>{xt.invalidateQueries({queryKey:[`/api/memorials/${s}/family-tree`]}),n(!1),f.reset(),o({title:"Connection Added",description:"Family relationship has been added to the tree."})},onError:v=>{o({title:"Error",description:v.message||"Failed to add family connection",variant:"destructive"})}}),g=v=>{if(!v.relatedMemorialId&&!v.relatedPersonName){o({title:"Missing Information",description:"Please either select an existing memorial or enter a name",variant:"destructive"});return}p.mutate(v)},y=d==null?void 0:d.reduce((v,j)=>(v[j.relationship]||(v[j.relationship]=[]),v[j.relationship].push(j),v),{});return s?e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-green-50 via-white to-blue-50 dark:from-gray-900 dark:via-gray-900 dark:to-blue-950",children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[e.jsx(Ms,{className:"h-10 w-10 text-green-600"}),e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-green-600 to-blue-500 bg-clip-text text-transparent",children:"Family Tree"})]}),c&&e.jsxs("p",{className:"text-lg text-muted-foreground",children:["Family connections for ",e.jsx("span",{className:"font-semibold",children:c.name})]})]}),l&&e.jsx("div",{className:"flex justify-end mb-6",children:e.jsxs(Os,{open:r,onOpenChange:n,children:[e.jsx(si,{asChild:!0,children:e.jsxs(O,{"data-testid":"button-add-connection",children:[e.jsx(bs,{className:"h-4 w-4 mr-2"}),"Add Family Member"]})}),e.jsxs(Ds,{className:"max-w-lg",children:[e.jsx(Is,{children:e.jsxs(Rs,{className:"flex items-center gap-2",children:[e.jsx(TG,{className:"h-5 w-5 text-green-600"}),"Add Family Connection"]})}),e.jsx(Wr,{...f,children:e.jsxs("form",{onSubmit:f.handleSubmit(g),className:"space-y-6",children:[e.jsx(fe,{control:f.control,name:"relationship",render:({field:v})=>e.jsxs(me,{children:[e.jsx(he,{children:"Relationship Type"}),e.jsxs(Rt,{onValueChange:v.onChange,value:v.value,children:[e.jsx(xe,{children:e.jsx(Mt,{"data-testid":"select-relationship",children:e.jsx(Ft,{placeholder:"Select relationship"})})}),e.jsx(Lt,{children:NP.map(j=>{const w=j.icon;return e.jsx(te,{value:j.value,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{className:"h-4 w-4"}),j.label]})},j.value)})})]}),e.jsx(ye,{})]})}),h&&wP[h]&&e.jsx(fe,{control:f.control,name:"relationshipDetail",render:({field:v})=>e.jsxs(me,{children:[e.jsx(he,{children:"Specific Relationship"}),e.jsxs(Rt,{onValueChange:v.onChange,value:v.value,children:[e.jsx(xe,{children:e.jsx(Mt,{"data-testid":"select-relationship-detail",children:e.jsx(Ft,{placeholder:"Select specific relationship"})})}),e.jsx(Lt,{children:wP[h].map(j=>e.jsx(te,{value:j,children:j},j))})]}),e.jsx(ye,{})]})}),e.jsx(fe,{control:f.control,name:"isBloodRelative",render:({field:v})=>e.jsxs(me,{className:"flex items-center justify-between p-4 rounded-lg border",children:[e.jsxs("div",{children:[e.jsx(he,{className:"text-base",children:"Blood Relative"}),e.jsx(Qt,{children:"Is this a biological relationship?"})]}),e.jsx(xe,{children:e.jsx(ir,{checked:v.value,onCheckedChange:v.onChange,"data-testid":"switch-blood-relative"})})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(De,{children:"Connect to:"}),e.jsxs("div",{className:"relative",children:[e.jsx(Cc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(re,{placeholder:"Search existing memorials...",value:a,onChange:v=>i(v.target.value),className:"pl-10","data-testid":"input-search-memorial"})]}),m&&m.length>0&&e.jsx("div",{className:"border rounded-lg max-h-40 overflow-y-auto",children:m.map(v=>e.jsxs("div",{className:"p-3 hover:bg-muted cursor-pointer flex items-center justify-between",onClick:()=>{f.setValue("relatedMemorialId",v.id),f.setValue("relatedPersonName",v.name),i("")},"data-testid":`search-result-${v.id}`,children:[e.jsx("span",{children:v.name}),e.jsxs(ze,{variant:"outline",className:"text-xs",children:[v.birthDate," - ",v.deathDate]})]},v.id))}),e.jsx("div",{className:"text-center text-sm text-muted-foreground",children:"- or -"}),e.jsx(fe,{control:f.control,name:"relatedPersonName",render:({field:v})=>e.jsxs(me,{children:[e.jsx(he,{children:"Person's Name (without memorial)"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"Enter name",...v,"data-testid":"input-person-name"})}),e.jsx(Qt,{children:"Add someone who doesn't have a memorial yet"}),e.jsx(ye,{})]})})]}),h==="spouse"&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(fe,{control:f.control,name:"marriageDate",render:({field:v})=>e.jsxs(me,{children:[e.jsx(he,{children:"Marriage Date"}),e.jsx(xe,{children:e.jsx(re,{type:"date",...v,"data-testid":"input-marriage-date"})}),e.jsx(ye,{})]})}),e.jsx(fe,{control:f.control,name:"marriageLocation",render:({field:v})=>e.jsxs(me,{children:[e.jsx(he,{children:"Marriage Location"}),e.jsx(xe,{children:e.jsx(re,{placeholder:"City, State",...v,"data-testid":"input-marriage-location"})}),e.jsx(ye,{})]})})]}),e.jsxs(Ra,{children:[e.jsx(O,{type:"button",variant:"outline",onClick:()=>n(!1),children:"Cancel"}),e.jsx(O,{type:"submit",disabled:p.isPending,"data-testid":"button-submit-connection",children:p.isPending?"Adding...":"Add Connection"})]})]})})]})]})}),u?e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[1,2,3].map(v=>e.jsxs($,{className:"animate-pulse",children:[e.jsx(le,{children:e.jsx("div",{className:"h-5 bg-gray-200 rounded w-1/3"})}),e.jsx(V,{children:e.jsx("div",{className:"h-16 bg-gray-200 rounded"})})]},v))}):y&&Object.keys(y).length>0?e.jsx("div",{className:"space-y-8",children:NP.map(v=>{const j=y[v.value];if(!j||j.length===0)return null;const w=v.icon;return e.jsxs($,{children:[e.jsx(le,{children:e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(w,{className:"h-5 w-5 text-green-600"}),v.label,"s",e.jsx(ze,{variant:"secondary",className:"ml-2",children:j.length})]})}),e.jsx(V,{children:e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:j.map(_=>e.jsx($,{className:"hover-elevate","data-testid":`card-connection-${_.id}`,children:e.jsxs(V,{className:"pt-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:_.relatedPersonName||"Unknown"}),_.relationshipDetail&&e.jsx("p",{className:"text-sm text-muted-foreground",children:_.relationshipDetail})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[_.isBloodRelative?e.jsx(ze,{variant:"outline",className:"text-xs",children:"Blood Relative"}):e.jsx(ze,{variant:"secondary",className:"text-xs",children:"By Marriage"}),_.isVerified&&e.jsxs(ze,{className:"text-xs bg-green-500",children:[e.jsx(JI,{className:"h-3 w-3 mr-1"}),"Verified"]})]})]}),_.relatedMemorialId&&e.jsx(O,{variant:"ghost",size:"sm",className:"mt-2 p-0",asChild:!0,children:e.jsxs("a",{href:`/memorial/${_.relatedMemorialId}`,children:["View Memorial",e.jsx(Fd,{className:"h-4 w-4 ml-1"})]})}),v.value==="spouse"&&_.marriageDate&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Married: ",_.marriageDate,_.marriageLocation&&` in ${_.marriageLocation}`]})]})},_.id))})})]},v.value)})}):e.jsx($,{className:"max-w-2xl mx-auto text-center",children:e.jsxs(V,{className:"pt-8 pb-8",children:[e.jsx(Ms,{className:"h-16 w-16 mx-auto text-green-300 mb-6"}),e.jsx("h3",{className:"text-2xl font-bold mb-3",children:"No Family Connections Yet"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Build the family tree by adding parents, children, siblings, and other family members to create a complete picture."}),l&&e.jsxs(O,{onClick:()=>n(!0),"data-testid":"button-add-first-connection",children:[e.jsx(bs,{className:"h-4 w-4 mr-2"}),"Add First Family Member"]})]})}),e.jsx($,{className:"mt-12 bg-gradient-to-r from-green-100/50 to-blue-100/50 dark:from-green-900/20 dark:to-blue-900/20 border-0",children:e.jsxs(V,{className:"pt-8 pb-8 text-center",children:[e.jsx(_t,{className:"h-12 w-12 mx-auto text-green-600 mb-4"}),e.jsx("h3",{className:"text-2xl font-bold mb-3",children:"Connecting Generations"}),e.jsx("p",{className:"text-muted-foreground max-w-xl mx-auto",children:"Build a family tree that connects memorials together, preserving the bonds that span generations."})]})})]})}):e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx($,{className:"max-w-lg mx-auto text-center",children:e.jsxs(V,{className:"pt-8",children:[e.jsx(bm,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No Memorial Selected"}),e.jsx("p",{className:"text-muted-foreground",children:"Please access this page from a memorial to view its family tree."})]})})})}function mge(){var E,L;const s=Ba().memorialId,[r,n]=N.useState(!1),[a,i]=N.useState(null),[o,l]=N.useState(""),[c,d]=N.useState(""),{toast:u}=Ht(),{data:m,isLoading:f}=Xe({queryKey:[`/api/memorials/${s}`],enabled:!!s}),h=yt({mutationFn:async T=>pt("PATCH",`/api/memorials/${s}`,T),onSuccess:()=>{xt.invalidateQueries({queryKey:[`/api/memorials/${s}`]}),n(!1),u({title:"Location Updated",description:"Cemetery location has been saved successfully."})},onError:T=>{u({title:"Error",description:T.message||"Failed to update cemetery location",variant:"destructive"})}}),p=()=>{i((m==null?void 0:m.cemeteryCoordinates)||null),l((m==null?void 0:m.cemeteryName)||""),d((m==null?void 0:m.cemeteryLocation)||""),n(!0)},g=()=>{h.mutate({cemeteryCoordinates:a||void 0,cemeteryName:o||void 0,cemeteryLocation:c||void 0})},y=()=>{"geolocation"in navigator?navigator.geolocation.getCurrentPosition(T=>{i({lat:T.coords.latitude,lng:T.coords.longitude}),u({title:"Location Detected",description:"Your current location has been set."})},T=>{u({title:"Location Error",description:"Unable to get your current location. Please enter coordinates manually.",variant:"destructive"})}):u({title:"Not Supported",description:"Geolocation is not supported by your browser.",variant:"destructive"})},v=T=>`https://www.google.com/maps?q=${T.lat},${T.lng}`,j=T=>`https://www.google.com/maps/dir/?api=1&destination=${T.lat},${T.lng}`,w=T=>`https://maps.apple.com/?daddr=${T.lat},${T.lng}`,_=T=>`https://waze.com/ul?ll=${T.lat},${T.lng}&navigate=yes`;if(f)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-600"})});if(!m)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs($,{className:"p-8 text-center",children:[e.jsx(tr,{className:"h-16 w-16 mx-auto text-muted-foreground mb-4"}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Memorial Not Found"}),e.jsx("p",{className:"text-muted-foreground",children:"The memorial you're looking for doesn't exist."})]})});const P=((E=m.cemeteryCoordinates)==null?void 0:E.lat)&&((L=m.cemeteryCoordinates)==null?void 0:L.lng);return e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-emerald-50 via-white to-emerald-50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800",children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx(He,{href:`/memorial/${m.inviteCode}`,children:e.jsxs(O,{variant:"ghost",className:"mb-6","data-testid":"button-back-memorial",children:[e.jsx(Sr,{className:"mr-2 h-4 w-4"}),"Back to Memorial"]})}),e.jsxs("div",{className:"text-center mb-12",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[e.jsx(gG,{className:"h-10 w-10 text-emerald-600"}),e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-emerald-600 to-teal-500 bg-clip-text text-transparent",children:"Cemetery GPS Navigator"})]}),e.jsxs("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:["Find and navigate to ",m.name,"'s resting place with GPS-guided directions"]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8 max-w-5xl mx-auto",children:[e.jsxs($,{className:"overflow-hidden",children:[e.jsxs(le,{className:"bg-gradient-to-r from-emerald-500 to-teal-500 text-white",children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(vl,{className:"h-5 w-5"}),"Cemetery Information"]}),e.jsxs($e,{className:"text-emerald-100",children:["Location details for ",m.name]})]}),e.jsx(V,{className:"p-6 space-y-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(tr,{className:"h-5 w-5 text-emerald-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx(De,{className:"text-sm text-muted-foreground",children:"Cemetery Name"}),e.jsx("p",{className:"font-medium","data-testid":"text-cemetery-name",children:m.cemeteryName||"Not specified"})]})]}),e.jsx(ls,{}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(qo,{className:"h-5 w-5 text-emerald-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx(De,{className:"text-sm text-muted-foreground",children:"Address"}),e.jsx("p",{className:"font-medium","data-testid":"text-cemetery-location",children:m.cemeteryLocation||"Not specified"})]})]}),e.jsx(ls,{}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(lx,{className:"h-5 w-5 text-emerald-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx(De,{className:"text-sm text-muted-foreground",children:"GPS Coordinates"}),P?e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(ze,{variant:"secondary","data-testid":"text-coordinates",children:[m.cemeteryCoordinates.lat.toFixed(6),", ",m.cemeteryCoordinates.lng.toFixed(6)]})}):e.jsx("p",{className:"text-muted-foreground",children:"No coordinates set"})]})]})]})}),e.jsx(mo,{className:"bg-muted/50 p-4",children:e.jsxs(O,{onClick:p,variant:"outline",className:"w-full","data-testid":"button-edit-location",children:[e.jsx(XI,{className:"mr-2 h-4 w-4"}),"Edit Location"]})})]}),e.jsxs($,{className:"overflow-hidden",children:[e.jsxs(le,{className:"bg-gradient-to-r from-blue-500 to-indigo-500 text-white",children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(M0,{className:"h-5 w-5"}),"Navigation Options"]}),e.jsx($e,{className:"text-blue-100",children:"Get directions to the cemetery"})]}),e.jsx(V,{className:"p-6",children:P?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-3",children:[e.jsx(O,{asChild:!0,className:"w-full bg-gradient-to-r from-blue-500 to-blue-600 hover-elevate","data-testid":"button-google-maps",children:e.jsxs("a",{href:j(m.cemeteryCoordinates),target:"_blank",rel:"noopener noreferrer",children:[e.jsx(BI,{className:"mr-2 h-4 w-4"}),"Navigate with Google Maps",e.jsx(pa,{className:"ml-2 h-4 w-4"})]})}),e.jsx(O,{asChild:!0,variant:"outline",className:"w-full","data-testid":"button-apple-maps",children:e.jsxs("a",{href:w(m.cemeteryCoordinates),target:"_blank",rel:"noopener noreferrer",children:[e.jsx(DG,{className:"mr-2 h-4 w-4"}),"Navigate with Apple Maps",e.jsx(pa,{className:"ml-2 h-4 w-4"})]})}),e.jsx(O,{asChild:!0,variant:"outline",className:"w-full","data-testid":"button-waze",children:e.jsxs("a",{href:_(m.cemeteryCoordinates),target:"_blank",rel:"noopener noreferrer",children:[e.jsx(M0,{className:"mr-2 h-4 w-4"}),"Navigate with Waze",e.jsx(pa,{className:"ml-2 h-4 w-4"})]})})]}),e.jsx(ls,{}),e.jsxs("div",{className:"grid gap-3",children:[e.jsx(O,{asChild:!0,variant:"secondary",className:"w-full","data-testid":"button-view-map",children:e.jsxs("a",{href:v(m.cemeteryCoordinates),target:"_blank",rel:"noopener noreferrer",children:[e.jsx(tr,{className:"mr-2 h-4 w-4"}),"View on Google Maps",e.jsx(pa,{className:"ml-2 h-4 w-4"})]})}),e.jsx(O,{asChild:!0,variant:"secondary",className:"w-full","data-testid":"button-walking-directions",children:e.jsxs("a",{href:`${j(m.cemeteryCoordinates)}&travelmode=walking`,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(WI,{className:"mr-2 h-4 w-4"}),"Walking Directions",e.jsx(pa,{className:"ml-2 h-4 w-4"})]})})]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(tr,{className:"h-16 w-16 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"No GPS coordinates have been set for this memorial."}),e.jsxs(O,{onClick:p,"data-testid":"button-add-coordinates",children:[e.jsx(lx,{className:"mr-2 h-4 w-4"}),"Add Cemetery Location"]})]})})]})]}),e.jsx(Os,{open:r,onOpenChange:n,children:e.jsxs(Ds,{className:"sm:max-w-md",children:[e.jsxs(Is,{children:[e.jsxs(Rs,{className:"flex items-center gap-2",children:[e.jsx(tr,{className:"h-5 w-5 text-emerald-600"}),"Edit Cemetery Location"]}),e.jsx(Lr,{children:"Update the cemetery details and GPS coordinates"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"cemeteryName",children:"Cemetery Name"}),e.jsx(re,{id:"cemeteryName",value:o,onChange:T=>l(T.target.value),placeholder:"Enter cemetery name","data-testid":"input-cemetery-name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"cemeteryLocation",children:"Address"}),e.jsx(re,{id:"cemeteryLocation",value:c,onChange:T=>d(T.target.value),placeholder:"Enter full address","data-testid":"input-cemetery-address"})]}),e.jsx(ls,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(De,{children:"GPS Coordinates"}),e.jsxs(O,{variant:"outline",size:"sm",onClick:y,"data-testid":"button-get-location",children:[e.jsx(lx,{className:"mr-2 h-4 w-4"}),"Use Current Location"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(De,{htmlFor:"lat",className:"text-xs text-muted-foreground",children:"Latitude"}),e.jsx(re,{id:"lat",type:"number",step:"any",value:(a==null?void 0:a.lat)||"",onChange:T=>i({lat:parseFloat(T.target.value)||0,lng:(a==null?void 0:a.lng)||0}),placeholder:"e.g., 40.7128","data-testid":"input-latitude"})]}),e.jsxs("div",{children:[e.jsx(De,{htmlFor:"lng",className:"text-xs text-muted-foreground",children:"Longitude"}),e.jsx(re,{id:"lng",type:"number",step:"any",value:(a==null?void 0:a.lng)||"",onChange:T=>i({lat:(a==null?void 0:a.lat)||0,lng:parseFloat(T.target.value)||0}),placeholder:"e.g., -74.0060","data-testid":"input-longitude"})]})]})]})]}),e.jsxs(Ra,{children:[e.jsx(O,{variant:"outline",onClick:()=>n(!1),children:"Cancel"}),e.jsxs(O,{onClick:g,disabled:h.isPending,"data-testid":"button-save-location",children:[h.isPending?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):e.jsx(P_,{className:"mr-2 h-4 w-4"}),"Save Location"]})]})]})})]})})}const _P=[{id:"square",name:"Classic Square",icon:q1,cornerRadius:0,dotStyle:"square"},{id:"rounded",name:"Rounded",icon:E0,cornerRadius:30,dotStyle:"rounded"},{id:"dots",name:"Dotted",icon:Bs,cornerRadius:50,dotStyle:"dots"}],SP=[{id:"classic",name:"Classic",icon:q1,primary:"#000000",secondary:"#333333",background:"#FFFFFF"},{id:"serenity",name:"Serenity",icon:Ka,primary:"#4A5568",secondary:"#718096",background:"#F7FAFC"},{id:"remembrance",name:"Remembrance",icon:_t,primary:"#7B341E",secondary:"#9C4221",background:"#FFFAF0"},{id:"celestial",name:"Celestial",icon:Ks,primary:"#2C5282",secondary:"#3182CE",background:"#EBF8FF"},{id:"nature",name:"Nature",icon:of,primary:"#276749",secondary:"#38A169",background:"#F0FFF4"},{id:"dove",name:"Dove",icon:Pg,primary:"#553C9A",secondary:"#6B46C1",background:"#FAF5FF"},{id:"sunset",name:"Sunset",icon:Yi,primary:"#C05621",secondary:"#DD6B20",background:"#FFFBEB"},{id:"faith",name:"Faith",icon:Tg,primary:"#702459",secondary:"#97266D",background:"#FFF5F7"}],CP=[{id:"none",name:"No Frame",borderWidth:0,borderStyle:"solid",showLabel:!1,labelPosition:"bottom"},{id:"simple",name:"Simple Border",borderWidth:4,borderStyle:"solid",showLabel:!1,labelPosition:"bottom"},{id:"elegant",name:"Elegant Double",borderWidth:6,borderStyle:"double",showLabel:!1,labelPosition:"bottom"},{id:"labeled-top",name:"Label Top",borderWidth:4,borderStyle:"solid",showLabel:!0,labelPosition:"top"},{id:"labeled-bottom",name:"Label Bottom",borderWidth:4,borderStyle:"solid",showLabel:!0,labelPosition:"bottom"}];function hge(){const[t,s]=N.useState(""),[r,n]=N.useState(""),[a,i]=N.useState(null),[o,l]=N.useState(_P[0]),[c,d]=N.useState(SP[0]),[u,m]=N.useState(CP[0]),[f,h]=N.useState("Scan to Remember"),[p,g]=N.useState(300),[y,v]=N.useState(!1),j=N.useRef(null),{toast:w}=Ht(),{data:_}=Xe({queryKey:["/api/memorials"]});N.useEffect(()=>{if(r&&_){const T=_.find(M=>M.id===r);T&&s(`${window.location.origin}/memorial/${T.inviteCode}`)}},[r,_]);const P=async()=>{if(!t){w({title:"URL Required",description:"Please enter a memorial URL or select a memorial",variant:"destructive"});return}v(!0);try{const T=j.current;if(!T)return;const M=T.getContext("2d");if(!M)return;const F=u.showLabel?50:20,k=p+F*2;T.width=k,T.height=k+(u.showLabel?30:0),M.fillStyle=c.background,M.fillRect(0,0,T.width,T.height),u.borderWidth>0&&(M.strokeStyle=c.primary,M.lineWidth=u.borderWidth,u.borderStyle==="double"?(M.strokeRect(u.borderWidth,u.borderWidth,T.width-u.borderWidth*2,T.height-u.borderWidth*2),M.strokeRect(u.borderWidth*2.5,u.borderWidth*2.5,T.width-u.borderWidth*5,T.height-u.borderWidth*5)):u.borderStyle==="dashed"?(M.setLineDash([10,5]),M.strokeRect(u.borderWidth,u.borderWidth,T.width-u.borderWidth*2,T.height-u.borderWidth*2),M.setLineDash([])):M.strokeRect(u.borderWidth,u.borderWidth,T.width-u.borderWidth*2,T.height-u.borderWidth*2));const D=document.createElement("canvas");if(await Kf.toCanvas(D,t,{width:p,margin:2,color:{dark:c.primary,light:c.background},errorCorrectionLevel:"H"}),o.dotStyle==="rounded"||o.dotStyle==="dots"){const ue=D.getContext("2d");if(ue){const Ne=ue.getImageData(0,0,D.width,D.height).data,K=Math.floor(D.width/29);ue.clearRect(0,0,D.width,D.height),ue.fillStyle=c.background,ue.fillRect(0,0,D.width,D.height),ue.fillStyle=c.primary;for(let Q=0;Q<D.height;Q+=K)for(let ke=0;ke<D.width;ke+=K){const G=(Q*D.width+ke)*4;if(Ne[G]<128){const I=o.dotStyle==="dots"?K*.7:K,Z=o.dotStyle==="dots"?I/2:I*.3;o.dotStyle==="dots"?(ue.beginPath(),ue.arc(ke+K/2,Q+K/2,Z,0,Math.PI*2),ue.fill()):(E(ue,ke,Q,K,K,Z),ue.fill())}}}}const z=(T.width-p)/2;let W=(T.height-p)/2;if(u.showLabel&&(W=u.labelPosition==="top"?F+25:F),M.drawImage(D,z,W,p,p),u.showLabel&&f){M.fillStyle=c.primary,M.font="bold 16px Inter, sans-serif",M.textAlign="center";const ue=u.labelPosition==="top"?F:T.height-F+15;M.fillText(f,T.width/2,ue)}i(T.toDataURL("image/png")),w({title:"QR Code Generated",description:"Your custom QR code is ready!"})}catch(T){console.error("Error generating QR code:",T),w({title:"Generation Failed",description:"Could not generate QR code. Please try again.",variant:"destructive"})}finally{v(!1)}},E=(T,M,F,k,D,z)=>{T.beginPath(),T.moveTo(M+z,F),T.arcTo(M+k,F,M+k,F+D,z),T.arcTo(M+k,F+D,M,F+D,z),T.arcTo(M,F+D,M,F,z),T.arcTo(M,F,M+k,F,z),T.closePath()},L=()=>{if(!a)return;const T=document.createElement("a");T.download=`memorial-qr-${c.id}-${Date.now()}.png`,T.href=a,T.click(),w({title:"Download Started",description:"Your QR code is being downloaded."})};return e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-violet-50 via-white to-violet-50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800",children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[e.jsx(or,{className:"h-10 w-10 text-violet-600"}),e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-violet-600 to-purple-500 bg-clip-text text-transparent",children:"Custom QR Code Designer"})]}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Create beautiful, memorial-themed QR codes with custom shapes, colors, and frames"})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs($,{children:[e.jsxs(le,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(or,{className:"h-5 w-5"}),"Memorial Selection"]}),e.jsx($e,{children:"Choose a memorial or enter a custom URL"})]}),e.jsxs(V,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{children:"Select Memorial"}),e.jsxs(Rt,{value:r,onValueChange:n,children:[e.jsx(Mt,{"data-testid":"select-memorial",children:e.jsx(Ft,{placeholder:"Choose a memorial..."})}),e.jsx(Lt,{children:_==null?void 0:_.map(T=>e.jsx(te,{value:T.id,children:T.name},T.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{children:"Or Enter Custom URL"}),e.jsx(re,{value:t,onChange:T=>s(T.target.value),placeholder:"https://opictuary.app/memorial/...","data-testid":"input-custom-url"})]})]})]}),e.jsxs(ba,{defaultValue:"theme",children:[e.jsxs(ra,{className:"grid w-full grid-cols-3",children:[e.jsxs(qt,{value:"theme","data-testid":"tab-theme",children:[e.jsx(C_,{className:"mr-2 h-4 w-4"}),"Theme"]}),e.jsxs(qt,{value:"shape","data-testid":"tab-shape",children:[e.jsx(q1,{className:"mr-2 h-4 w-4"}),"Shape"]}),e.jsxs(qt,{value:"frame","data-testid":"tab-frame",children:[e.jsx(Bs,{className:"mr-2 h-4 w-4"}),"Frame"]})]}),e.jsx(Vt,{value:"theme",children:e.jsxs($,{children:[e.jsxs(le,{children:[e.jsx(ge,{children:"Memorial Themes"}),e.jsx($e,{children:"Choose a color theme that honors the memory"})]}),e.jsx(V,{children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:SP.map(T=>e.jsxs("button",{onClick:()=>d(T),className:`p-4 rounded-lg border-2 transition-all hover-elevate ${c.id===T.id?"border-violet-500 bg-violet-50 dark:bg-violet-900/20":"border-border"}`,"data-testid":`theme-${T.id}`,children:[e.jsx("div",{className:"w-12 h-12 rounded-full mx-auto mb-2 flex items-center justify-center",style:{backgroundColor:T.primary},children:e.jsx(T.icon,{className:"h-6 w-6 text-white"})}),e.jsx("p",{className:"text-sm font-medium text-center",children:T.name})]},T.id))})})]})}),e.jsx(Vt,{value:"shape",children:e.jsxs($,{children:[e.jsxs(le,{children:[e.jsx(ge,{children:"QR Code Style"}),e.jsx($e,{children:"Customize the appearance of the QR modules"})]}),e.jsxs(V,{children:[e.jsx("div",{className:"grid grid-cols-3 gap-3 mb-6",children:_P.map(T=>e.jsxs("button",{onClick:()=>l(T),className:`p-4 rounded-lg border-2 transition-all hover-elevate ${o.id===T.id?"border-violet-500 bg-violet-50 dark:bg-violet-900/20":"border-border"}`,"data-testid":`shape-${T.id}`,children:[e.jsx(T.icon,{className:"h-8 w-8 mx-auto mb-2"}),e.jsx("p",{className:"text-sm font-medium text-center",children:T.name})]},T.id))}),e.jsx(ls,{className:"my-6"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(De,{children:"QR Code Size"}),e.jsxs(ze,{variant:"secondary",children:[p,"px"]})]}),e.jsx(NS,{value:[p],onValueChange:T=>g(T[0]),min:150,max:500,step:10,"data-testid":"slider-size"})]})})]})]})}),e.jsx(Vt,{value:"frame",children:e.jsxs($,{children:[e.jsxs(le,{children:[e.jsx(ge,{children:"Frame & Label"}),e.jsx($e,{children:"Add a decorative frame and custom text"})]}),e.jsxs(V,{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:CP.map(T=>e.jsxs("button",{onClick:()=>m(T),className:`p-4 rounded-lg border-2 transition-all hover-elevate ${u.id===T.id?"border-violet-500 bg-violet-50 dark:bg-violet-900/20":"border-border"}`,"data-testid":`frame-${T.id}`,children:[e.jsx("div",{className:"w-12 h-12 mx-auto mb-2",style:{border:T.borderWidth>0?`${T.borderWidth}px ${T.borderStyle} currentColor`:"1px dashed currentColor"}}),e.jsx("p",{className:"text-sm font-medium text-center",children:T.name})]},T.id))}),u.showLabel&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{children:"Custom Label Text"}),e.jsx(re,{value:f,onChange:T=>h(T.target.value),placeholder:"Enter label text...",maxLength:30,"data-testid":"input-label"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[30-f.length," characters remaining"]})]})]})]})})]})]}),e.jsx("div",{className:"space-y-6",children:e.jsxs($,{className:"sticky top-24",children:[e.jsx(le,{className:"bg-gradient-to-r from-violet-500 to-purple-500 text-white rounded-t-lg",children:e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Bs,{className:"h-5 w-5"}),"Preview"]})}),e.jsxs(V,{className:"p-6",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsxs("div",{className:"rounded-lg overflow-hidden shadow-lg",style:{backgroundColor:c.background},children:[e.jsx("canvas",{ref:j,className:"max-w-full",style:{display:a?"block":"none"}}),!a&&e.jsx("div",{className:"w-64 h-64 flex items-center justify-center",style:{backgroundColor:c.background},children:e.jsxs("div",{className:"text-center text-muted-foreground",children:[e.jsx(or,{className:"h-16 w-16 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"Generate to preview"})]})})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(O,{onClick:P,className:"w-full bg-gradient-to-r from-violet-500 to-purple-500",disabled:y||!t,"data-testid":"button-generate",children:y?e.jsxs(e.Fragment,{children:[e.jsx(A_,{className:"mr-2 h-4 w-4 animate-spin"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(or,{className:"mr-2 h-4 w-4"}),"Generate QR Code"]})}),e.jsxs(O,{onClick:L,variant:"outline",className:"w-full",disabled:!a,"data-testid":"button-download",children:[e.jsx(Al,{className:"mr-2 h-4 w-4"}),"Download PNG"]})]}),e.jsx(ls,{className:"my-4"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Theme:"}),e.jsx(ze,{variant:"secondary",children:c.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Style:"}),e.jsx(ze,{variant:"secondary",children:o.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Frame:"}),e.jsx(ze,{variant:"secondary",children:u.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Size:"}),e.jsxs(ze,{variant:"secondary",children:[p,"px"]})]})]})]})]})})]})]})})}const fge=[{name:"Memorial Day",date:"05-27",icon:wG,type:"holiday"},{name:"Mother's Day",date:"05-12",icon:_t,type:"holiday"},{name:"Father's Day",date:"06-16",icon:_t,type:"holiday"},{name:"Christmas",date:"12-25",icon:Bx,type:"holiday"},{name:"Easter",date:"04-20",icon:Tg,type:"holiday"},{name:"Thanksgiving",date:"11-28",icon:Ms,type:"holiday"},{name:"All Saints Day",date:"11-01",icon:Ks,type:"holiday"},{name:"Day of the Dead",date:"11-02",icon:Ka,type:"holiday"}],pge={birthday:"bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-200",anniversary:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",holiday:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",custom:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"},xge={birthday:Pi,anniversary:_t,holiday:ds,custom:Ks};function gge(){const s=Ba().memorialId,[r,n]=N.useState(!1),[a,i]=N.useState(null),[o,l]=N.useState({name:"",date:"",eventType:"custom",description:"",reminderEnabled:!0,reminderDaysBefore:7,celebrationPlan:"",traditions:[],isRecurring:!0}),[c,d]=N.useState(""),{toast:u}=Ht(),{data:m}=Xe({queryKey:[`/api/memorials/${s}`],enabled:!!s}),{data:f,isLoading:h}=Xe({queryKey:[`/api/memorials/${s}/holiday-events`],enabled:!!s}),p=yt({mutationFn:async F=>pt("POST",`/api/memorials/${s}/holiday-events`,F),onSuccess:()=>{xt.invalidateQueries({queryKey:[`/api/memorials/${s}/holiday-events`]}),n(!1),v(),u({title:"Event Created",description:"Holiday event has been added to the timeline."})}}),g=yt({mutationFn:async({id:F,data:k})=>pt("PATCH",`/api/memorials/${s}/holiday-events/${F}`,k),onSuccess:()=>{xt.invalidateQueries({queryKey:[`/api/memorials/${s}/holiday-events`]}),i(null),v(),u({title:"Event Updated",description:"Holiday event has been updated."})}}),y=yt({mutationFn:async F=>pt("DELETE",`/api/memorials/${s}/holiday-events/${F}`),onSuccess:()=>{xt.invalidateQueries({queryKey:[`/api/memorials/${s}/holiday-events`]}),u({title:"Event Deleted",description:"Holiday event has been removed."})}}),v=()=>{l({name:"",date:"",eventType:"custom",description:"",reminderEnabled:!0,reminderDaysBefore:7,celebrationPlan:"",traditions:[],isRecurring:!0}),d("")},j=()=>{c.trim()&&(l(F=>({...F,traditions:[...F.traditions,c.trim()]})),d(""))},w=F=>{l(k=>({...k,traditions:k.traditions.filter((D,z)=>z!==F)}))},_=()=>{if(!o.name||!o.date){u({title:"Missing Information",description:"Please enter event name and date.",variant:"destructive"});return}a?g.mutate({id:a.id,data:o}):p.mutate(o)},P=F=>{i(F),l({name:F.name,date:F.date,eventType:F.eventType,description:F.description||"",reminderEnabled:F.reminderEnabled,reminderDaysBefore:F.reminderDaysBefore,celebrationPlan:F.celebrationPlan||"",traditions:F.traditions||[],isRecurring:F.isRecurring}),n(!0)},E=F=>{const k=new Date().getFullYear();l({...o,name:F.name,date:`${k}-${F.date}`,eventType:"holiday",isRecurring:!0}),n(!0)},L=N.useMemo(()=>{if(!f)return[];const F=new Date;return f.map(k=>{let z=e1(k.date);if(k.isRecurring)for(;ux(z,F);)z=qO(z,1);const W=VO(z,F);return{...k,nextOccurrence:z,daysUntil:W}}).filter(k=>k.daysUntil>=0).sort((k,D)=>k.daysUntil-D.daysUntil).slice(0,5)},[f]),T=N.useMemo(()=>{if(!f)return{};const F={};return f.forEach(k=>{const D=e1(k.date).getMonth();F[D]||(F[D]=[]),F[D].push(k)}),F},[f]),M=["January","February","March","April","May","June","July","August","September","October","November","December"];return s?e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-orange-50 via-white to-orange-50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800",children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx(He,{href:`/memorial/${(m==null?void 0:m.inviteCode)||s}`,children:e.jsxs(O,{variant:"ghost",className:"mb-6","data-testid":"button-back",children:[e.jsx(Sr,{className:"mr-2 h-4 w-4"}),"Back to Memorial"]})}),e.jsxs("div",{className:"text-center mb-12",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[e.jsx(ds,{className:"h-10 w-10 text-orange-600"}),e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-orange-600 to-amber-500 bg-clip-text text-transparent",children:"Holiday Memorial Timeline"})]}),e.jsxs("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:["Plan celebrations and receive reminders for special days to honor ",(m==null?void 0:m.name)||"your loved one"]})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs($,{children:[e.jsxs(le,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Mr,{className:"h-5 w-5"}),"Upcoming Events"]}),e.jsx($e,{children:"Events coming up soon"})]}),e.jsxs(O,{onClick:()=>n(!0),"data-testid":"button-add-event",children:[e.jsx(bs,{className:"mr-2 h-4 w-4"}),"Add Event"]})]}),e.jsx(V,{children:h?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600"})}):L.length>0?e.jsx("div",{className:"space-y-4",children:L.map(F=>{const k=xge[F.eventType];return e.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-lg border hover-elevate","data-testid":`event-${F.id}`,children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${pge[F.eventType]}`,children:e.jsx(k,{className:"h-6 w-6"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold truncate",children:F.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:Pr(F.nextOccurrence,"MMMM d, yyyy")})]}),e.jsx("div",{className:"flex-shrink-0 text-right",children:F.daysUntil===0?e.jsx(ze,{className:"bg-orange-500",children:"Today!"}):F.daysUntil<=7?e.jsxs(ze,{variant:"destructive",children:[F.daysUntil," days"]}):e.jsxs(ze,{variant:"secondary",children:[F.daysUntil," days"]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(O,{size:"icon",variant:"ghost",onClick:()=>P(F),"data-testid":`button-edit-${F.id}`,children:e.jsx(XI,{className:"h-4 w-4"})}),e.jsx(O,{size:"icon",variant:"ghost",onClick:()=>y.mutate(F.id),"data-testid":`button-delete-${F.id}`,children:e.jsx(jc,{className:"h-4 w-4 text-destructive"})})]})]},F.id)})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(A0,{className:"h-16 w-16 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"No events scheduled yet."}),e.jsxs(O,{onClick:()=>n(!0),children:[e.jsx(bs,{className:"mr-2 h-4 w-4"}),"Add Your First Event"]})]})})]}),e.jsxs($,{children:[e.jsxs(le,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(A0,{className:"h-5 w-5"}),"Annual Timeline"]}),e.jsx($e,{children:"All memorial events throughout the year"})]}),e.jsx(V,{children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:M.map((F,k)=>{const D=T[k]||[];return e.jsxs("div",{className:`p-3 rounded-lg border ${D.length>0?"bg-orange-50 dark:bg-orange-900/20 border-orange-200 dark:border-orange-800":""}`,children:[e.jsx("h4",{className:"font-medium text-sm mb-2",children:F}),D.length>0?e.jsx("div",{className:"space-y-1",children:D.map(z=>e.jsx(ze,{variant:"secondary",className:"text-xs block truncate",children:z.name},z.id))}):e.jsx("p",{className:"text-xs text-muted-foreground",children:"No events"})]},F)})})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs($,{children:[e.jsxs(le,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(ao,{className:"h-5 w-5"}),"Quick Add Holidays"]}),e.jsx($e,{children:"Add common memorial holidays"})]}),e.jsx(V,{children:e.jsx("div",{className:"grid grid-cols-2 gap-2",children:fge.map(F=>e.jsxs(O,{variant:"outline",size:"sm",className:"justify-start",onClick:()=>E(F),"data-testid":`button-holiday-${F.name.toLowerCase().replace(/\s/g,"-")}`,children:[e.jsx(F.icon,{className:"mr-2 h-4 w-4"}),F.name]},F.name))})})]}),e.jsxs($,{className:"bg-gradient-to-br from-orange-100 to-amber-100 dark:from-orange-900/30 dark:to-amber-900/30 border-orange-200 dark:border-orange-800",children:[e.jsx(le,{children:e.jsxs(ge,{className:"flex items-center gap-2 text-orange-800 dark:text-orange-200",children:[e.jsx(af,{className:"h-5 w-5"}),"Reminder Settings"]})}),e.jsx(V,{className:"text-orange-700 dark:text-orange-300",children:e.jsx("p",{className:"text-sm",children:"Reminders will be sent based on each event's settings. You can customize how many days before each event you'd like to receive a notification."})})]})]})]}),e.jsx(Os,{open:r,onOpenChange:F=>{n(F),F||(i(null),v())},children:e.jsxs(Ds,{className:"sm:max-w-lg",children:[e.jsxs(Is,{children:[e.jsxs(Rs,{className:"flex items-center gap-2",children:[e.jsx(ds,{className:"h-5 w-5 text-orange-600"}),a?"Edit Event":"Add Memorial Event"]}),e.jsx(Lr,{children:"Create a special day to remember and celebrate"})]}),e.jsxs("div",{className:"space-y-4 py-4 max-h-[60vh] overflow-y-auto",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-2 space-y-2",children:[e.jsx(De,{children:"Event Name"}),e.jsx(re,{value:o.name,onChange:F=>l({...o,name:F.target.value}),placeholder:"e.g., Dad's Birthday","data-testid":"input-event-name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{children:"Date"}),e.jsx(re,{type:"date",value:o.date,onChange:F=>l({...o,date:F.target.value}),"data-testid":"input-event-date"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{children:"Event Type"}),e.jsxs(Rt,{value:o.eventType,onValueChange:F=>l({...o,eventType:F}),children:[e.jsx(Mt,{"data-testid":"select-event-type",children:e.jsx(Ft,{})}),e.jsxs(Lt,{children:[e.jsx(te,{value:"birthday",children:"Birthday"}),e.jsx(te,{value:"anniversary",children:"Anniversary"}),e.jsx(te,{value:"holiday",children:"Holiday"}),e.jsx(te,{value:"custom",children:"Custom"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{children:"Description (Optional)"}),e.jsx(Gt,{value:o.description,onChange:F=>l({...o,description:F.target.value}),placeholder:"Add notes about this special day...","data-testid":"input-description"})]}),e.jsx(ls,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(De,{children:"Recurring Annually"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Repeat this event every year"})]}),e.jsx(ir,{checked:o.isRecurring,onCheckedChange:F=>l({...o,isRecurring:F}),"data-testid":"switch-recurring"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(De,{children:"Enable Reminders"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Get notified before this event"})]}),e.jsx(ir,{checked:o.reminderEnabled,onCheckedChange:F=>l({...o,reminderEnabled:F}),"data-testid":"switch-reminder"})]}),o.reminderEnabled&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{children:"Remind me"}),e.jsxs(Rt,{value:o.reminderDaysBefore.toString(),onValueChange:F=>l({...o,reminderDaysBefore:parseInt(F)}),children:[e.jsx(Mt,{"data-testid":"select-reminder-days",children:e.jsx(Ft,{})}),e.jsxs(Lt,{children:[e.jsx(te,{value:"1",children:"1 day before"}),e.jsx(te,{value:"3",children:"3 days before"}),e.jsx(te,{value:"7",children:"1 week before"}),e.jsx(te,{value:"14",children:"2 weeks before"}),e.jsx(te,{value:"30",children:"1 month before"})]})]})]})]}),e.jsx(ls,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{children:"Celebration Plan (Optional)"}),e.jsx(Gt,{value:o.celebrationPlan,onChange:F=>l({...o,celebrationPlan:F.target.value}),placeholder:"How do you plan to honor this day? (visit cemetery, share stories, make favorite meal...)","data-testid":"input-celebration-plan"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{children:"Family Traditions"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(re,{value:c,onChange:F=>d(F.target.value),placeholder:"Add a tradition...",onKeyPress:F=>F.key==="Enter"&&j(),"data-testid":"input-tradition"}),e.jsx(O,{type:"button",variant:"outline",onClick:j,children:e.jsx(bs,{className:"h-4 w-4"})})]}),o.traditions.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:o.traditions.map((F,k)=>e.jsxs(ze,{variant:"secondary",className:"pr-1",children:[F,e.jsx(O,{variant:"ghost",size:"icon",className:"h-4 w-4 ml-1",onClick:()=>w(k),children:e.jsx(jc,{className:"h-3 w-3"})})]},k))})]})]}),e.jsxs(Ra,{children:[e.jsx(O,{variant:"outline",onClick:()=>n(!1),children:"Cancel"}),e.jsxs(O,{onClick:_,disabled:p.isPending||g.isPending,"data-testid":"button-save-event",children:[p.isPending||g.isPending?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):e.jsx($n,{className:"mr-2 h-4 w-4"}),a?"Update Event":"Save Event"]})]})]})})]})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs($,{className:"p-8 text-center",children:[e.jsx(ds,{className:"h-16 w-16 mx-auto text-muted-foreground mb-4"}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"No Memorial Selected"}),e.jsx("p",{className:"text-muted-foreground",children:"Please select a memorial to view the holiday timeline."})]})})}const vge=[{icon:lm,title:"Make a Donation",description:"Donate to their favorite charity in their memory"},{icon:Pi,title:"Bake Their Recipe",description:"Make their favorite cake or dish"},{icon:Ms,title:"Family Gathering",description:"Bring family together to share stories"},{icon:$I,title:"Photo Memories",description:"Create a slideshow of cherished moments"},{icon:zn,title:"Play Their Music",description:"Listen to songs they loved"},{icon:Pl,title:"Share Stories",description:"Tell stories about them to younger generations"},{icon:Ks,title:"Release Balloons",description:"Release balloons with messages attached"},{icon:_t,title:"Visit Their Place",description:"Visit the cemetery or their favorite spot"}];function yge(){const s=Ba().memorialId,[r,n]=N.useState(!1),[a,i]=N.useState({authorName:"",authorEmail:"",message:"",relationship:""}),{toast:o}=Ht(),{data:l,isLoading:c}=Xe({queryKey:[`/api/memorials/${s}`],enabled:!!s}),{data:d,isLoading:u}=Xe({queryKey:[`/api/memorials/${s}/birthday-wishes`],enabled:!!s}),m=yt({mutationFn:async p=>pt("POST",`/api/memorials/${s}/birthday-wishes`,{...p,year:new Date().getFullYear()}),onSuccess:()=>{xt.invalidateQueries({queryKey:[`/api/memorials/${s}/birthday-wishes`]}),n(!1),i({authorName:"",authorEmail:"",message:"",relationship:""}),o({title:"Wish Sent",description:"Your birthday wish has been added to the celebration."})},onError:p=>{o({title:"Error",description:p.message||"Failed to send birthday wish",variant:"destructive"})}}),f=N.useMemo(()=>{if(!(l!=null&&l.birthDate))return null;const p=new Date,g=l.birthDate.split(/[\s,]+/),y=new Date(Date.parse(g[0]+" 1, 2000")).getMonth(),v=parseInt(g[1])||1;let j=new Date(p.getFullYear(),y,v);ux(j,p)&&(j=qO(j,1));const w=VO(j,p),_=parseInt(g[2])||parseInt(g[g.length-1]),P=j.getFullYear()-_;return{nextBirthday:j,daysUntil:w,age:P,birthMonth:y,birthDay:v}},[l==null?void 0:l.birthDate]),h=N.useMemo(()=>{if(!d)return{};const p={};return d.forEach(g=>{p[g.year]||(p[g.year]=[]),p[g.year].push(g)}),p},[d]);return s?c?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-pink-600"})}):l?e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-pink-50 via-white to-pink-50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800",children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx(He,{href:`/memorial/${l.inviteCode}`,children:e.jsxs(O,{variant:"ghost",className:"mb-6","data-testid":"button-back",children:[e.jsx(Sr,{className:"mr-2 h-4 w-4"}),"Back to Memorial"]})}),e.jsxs("div",{className:"text-center mb-12",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[e.jsx(Pi,{className:"h-10 w-10 text-pink-600"}),e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-pink-600 to-rose-500 bg-clip-text text-transparent",children:"Birthday Celebration"})]}),e.jsxs("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:["Celebrate and honor ",l.name,"'s birthday with love and cherished memories"]})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs($,{className:"overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-pink-500 to-rose-500 p-8 text-white text-center",children:[e.jsx(Da,{className:"w-24 h-24 mx-auto mb-4 border-4 border-white/30",children:e.jsx(Ia,{className:"bg-white/20 text-white text-2xl",children:l.name.split(" ").map(p=>p[0]).join("")})}),e.jsx("h2",{className:"text-3xl font-bold mb-2",children:l.name}),f&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xl opacity-90",children:f.daysUntil===0?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx(ao,{className:"h-6 w-6"}),"Happy Heavenly Birthday!",e.jsx(ao,{className:"h-6 w-6"})]}):e.jsxs(e.Fragment,{children:["Birthday in ",f.daysUntil," days"]})}),e.jsxs("p",{className:"opacity-80",children:["Would be celebrating ",f.age," years"]})]})]}),e.jsx(V,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Birthday Date"}),e.jsx("p",{className:"text-muted-foreground",children:l.birthDate})]}),e.jsxs(O,{onClick:()=>n(!0),className:"bg-gradient-to-r from-pink-500 to-rose-500","data-testid":"button-send-wish",children:[e.jsx(_t,{className:"mr-2 h-4 w-4"}),"Send Birthday Wish"]})]})})]}),e.jsxs($,{children:[e.jsxs(le,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Pl,{className:"h-5 w-5"}),"Birthday Wishes"]}),e.jsx($e,{children:"Messages of love and remembrance"})]}),e.jsxs(ze,{variant:"secondary",children:[(d==null?void 0:d.length)||0," wishes"]})]}),e.jsx(V,{children:u?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-pink-600"})}):d&&d.length>0?e.jsx("div",{className:"space-y-4",children:Object.entries(h).sort(([p],[g])=>parseInt(g)-parseInt(p)).map(([p,g])=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(ds,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium text-muted-foreground",children:p}),e.jsx(ls,{className:"flex-1"})]}),e.jsx("div",{className:"space-y-3 pl-6",children:g.map(y=>e.jsxs("div",{className:"p-4 rounded-lg bg-gradient-to-r from-pink-50 to-rose-50 dark:from-pink-900/20 dark:to-rose-900/20 border border-pink-100 dark:border-pink-800","data-testid":`wish-${y.id}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:y.authorName}),y.relationship&&e.jsx(ze,{variant:"outline",className:"ml-2 text-xs",children:y.relationship})]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:Pr(e1(y.createdAt),"MMM d")})]}),e.jsx("p",{className:"text-sm",children:y.message})]},y.id))})]},p))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(_t,{className:"h-16 w-16 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"No birthday wishes yet."}),e.jsxs(O,{onClick:()=>n(!0),children:[e.jsx(bs,{className:"mr-2 h-4 w-4"}),"Be the First to Send a Wish"]})]})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs($,{children:[e.jsxs(le,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(GI,{className:"h-5 w-5"}),"Celebration Ideas"]}),e.jsx($e,{children:"Ways to honor their special day"})]}),e.jsx(V,{children:e.jsx("div",{className:"space-y-3",children:vge.map((p,g)=>e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg hover-elevate cursor-pointer",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-pink-100 dark:bg-pink-900/30 flex items-center justify-center",children:e.jsx(p.icon,{className:"h-5 w-5 text-pink-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm",children:p.title}),e.jsx("p",{className:"text-xs text-muted-foreground",children:p.description})]})]},g))})})]}),e.jsxs($,{className:"bg-gradient-to-br from-pink-100 to-rose-100 dark:from-pink-900/30 dark:to-rose-900/30 border-pink-200 dark:border-pink-800",children:[e.jsx(le,{children:e.jsxs(ge,{className:"flex items-center gap-2 text-pink-800 dark:text-pink-200",children:[e.jsx(so,{className:"h-5 w-5"}),"Share This Celebration"]})}),e.jsxs(V,{className:"space-y-3",children:[e.jsxs("p",{className:"text-sm text-pink-700 dark:text-pink-300",children:["Invite family and friends to join in celebrating ",l.name,"'s birthday."]}),e.jsxs(O,{variant:"outline",className:"w-full border-pink-300 dark:border-pink-700",onClick:()=>{navigator.clipboard.writeText(window.location.href),o({title:"Link Copied",description:"Share this link to invite others to celebrate."})},"data-testid":"button-share",children:[e.jsx(so,{className:"mr-2 h-4 w-4"}),"Copy Celebration Link"]})]})]}),f&&f.daysUntil<=30&&f.daysUntil>0&&e.jsx($,{className:"bg-gradient-to-br from-yellow-100 to-amber-100 dark:from-yellow-900/30 dark:to-amber-900/30 border-yellow-200 dark:border-yellow-800",children:e.jsx(V,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Bs,{className:"h-8 w-8 text-yellow-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-yellow-800 dark:text-yellow-200",children:"Birthday Coming Soon!"}),e.jsxs("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:[f.daysUntil," days until ",l.name,"'s heavenly birthday"]})]})]})})})]})]}),e.jsx(Os,{open:r,onOpenChange:n,children:e.jsxs(Ds,{className:"sm:max-w-md",children:[e.jsxs(Is,{children:[e.jsxs(Rs,{className:"flex items-center gap-2",children:[e.jsx(_t,{className:"h-5 w-5 text-pink-600"}),"Send a Birthday Wish"]}),e.jsxs(Lr,{children:["Share a loving message for ",l.name,"'s birthday celebration"]})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{children:"Your Name"}),e.jsx(re,{value:a.authorName,onChange:p=>i({...a,authorName:p.target.value}),placeholder:"Enter your name","data-testid":"input-author-name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{children:"Your Relationship (Optional)"}),e.jsx(re,{value:a.relationship,onChange:p=>i({...a,relationship:p.target.value}),placeholder:"e.g., Daughter, Friend, Colleague","data-testid":"input-relationship"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{children:"Your Birthday Wish"}),e.jsx(Gt,{value:a.message,onChange:p=>i({...a,message:p.target.value}),placeholder:"Share your loving message...",rows:4,"data-testid":"input-message"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{children:"Email (Optional - for notifications)"}),e.jsx(re,{type:"email",value:a.authorEmail,onChange:p=>i({...a,authorEmail:p.target.value}),placeholder:"your@email.com","data-testid":"input-email"})]})]}),e.jsxs(Ra,{children:[e.jsx(O,{variant:"outline",onClick:()=>n(!1),children:"Cancel"}),e.jsxs(O,{onClick:()=>m.mutate(a),disabled:!a.authorName||!a.message||m.isPending,className:"bg-gradient-to-r from-pink-500 to-rose-500","data-testid":"button-submit-wish",children:[m.isPending?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):e.jsx($x,{className:"mr-2 h-4 w-4"}),"Send Wish"]})]})]})})]})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs($,{className:"p-8 text-center",children:[e.jsx(Pi,{className:"h-16 w-16 mx-auto text-muted-foreground mb-4"}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Memorial Not Found"}),e.jsx("p",{className:"text-muted-foreground",children:"The memorial you're looking for doesn't exist."})]})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs($,{className:"p-8 text-center",children:[e.jsx(Pi,{className:"h-16 w-16 mx-auto text-muted-foreground mb-4"}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"No Memorial Selected"}),e.jsx("p",{className:"text-muted-foreground",children:"Please select a memorial to celebrate."})]})})}const jge=[{year:1896,city:"Athens",country:"Greece"},{year:1900,city:"Paris",country:"France"},{year:1904,city:"St. Louis",country:"USA"},{year:1908,city:"London",country:"UK"},{year:1912,city:"Stockholm",country:"Sweden"},{year:1920,city:"Antwerp",country:"Belgium"},{year:1924,city:"Paris",country:"France"},{year:1928,city:"Amsterdam",country:"Netherlands"},{year:1932,city:"Los Angeles",country:"USA"},{year:1936,city:"Berlin",country:"Germany"},{year:1948,city:"London",country:"UK"},{year:1952,city:"Helsinki",country:"Finland"},{year:1956,city:"Melbourne",country:"Australia"},{year:1960,city:"Rome",country:"Italy"},{year:1964,city:"Tokyo",country:"Japan"},{year:1968,city:"Mexico City",country:"Mexico"},{year:1972,city:"Munich",country:"Germany"},{year:1976,city:"Montreal",country:"Canada"},{year:1980,city:"Moscow",country:"USSR"},{year:1984,city:"Los Angeles",country:"USA"},{year:1988,city:"Seoul",country:"South Korea"},{year:1992,city:"Barcelona",country:"Spain"},{year:1996,city:"Atlanta",country:"USA"},{year:2e3,city:"Sydney",country:"Australia"},{year:2004,city:"Athens",country:"Greece"},{year:2008,city:"Beijing",country:"China"},{year:2012,city:"London",country:"UK"},{year:2016,city:"Rio",country:"Brazil"},{year:2020,city:"Tokyo",country:"Japan"},{year:2024,city:"Paris",country:"France"}];function bge(){const s=Ba().athleteId,[r,n]=N.useState(null),{data:a,isLoading:i}=Xe({queryKey:[`/api/athlete-profiles/${s}`],enabled:!!s}),o=N.useMemo(()=>{var v,j,w,_,P;if(!a)return[];const m=a.careerStats;if(!m)return[];const f=parseInt(((v=m["Gold Medals"])==null?void 0:v.replace(/[^0-9]/g,""))||"0"),h=parseInt(((j=m["Silver Medals"])==null?void 0:j.replace(/[^0-9]/g,""))||"0"),p=parseInt(((w=m["Bronze Medals"])==null?void 0:w.replace(/[^0-9]/g,""))||"0"),g=parseInt(((_=m["World Records"])==null?void 0:_.replace(/[^0-9]/g,""))||"0"),y=parseInt(((P=m["Olympic Appearances"])==null?void 0:P.replace(/[^0-9]/g,""))||"1");return[{category:"Gold Medal Performance",score:Math.min(40,f*8),maxScore:40,icon:Ni,description:`${f} gold medal${f!==1?"s":""} won`},{category:"Overall Medal Count",score:Math.min(25,(f+h+p)*3),maxScore:25,icon:Fy,description:`${f+h+p} total medals`},{category:"Olympic Longevity",score:Math.min(15,y*5),maxScore:15,icon:ds,description:`${y} Olympic games attended`},{category:"Record Breaking",score:Math.min(15,g*5),maxScore:15,icon:tR,description:`${g} world record${g!==1?"s":""}`},{category:"Legacy Impact",score:Math.min(5,a.legacyScore?Math.floor(a.legacyScore/20):0),maxScore:5,icon:zo,description:"Cultural and historical significance"}]},[a]),l=N.useMemo(()=>o.reduce((m,f)=>m+f.score,0),[o]),c=m=>m>=80?"text-yellow-500":m>=60?"text-gray-400":m>=40?"text-amber-700":"text-muted-foreground",d=m=>m>=90?"Legendary":m>=80?"Hall of Fame":m>=60?"Olympic Champion":m>=40?"Medalist":"Olympic Athlete";if(!s)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs($,{className:"p-8 text-center",children:[e.jsx(Ni,{className:"h-16 w-16 mx-auto text-muted-foreground mb-4"}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"No Olympian Selected"}),e.jsx("p",{className:"text-muted-foreground",children:"Please select an Olympic athlete to view their legacy."}),e.jsx(He,{href:"/sports-memorials",children:e.jsx(O,{className:"mt-4",children:"Browse Olympic Athletes"})})]})});if(i)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-yellow-600"})});if(!a)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs($,{className:"p-8 text-center",children:[e.jsx(Ni,{className:"h-16 w-16 mx-auto text-muted-foreground mb-4"}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Athlete Not Found"}),e.jsx("p",{className:"text-muted-foreground",children:"The Olympic athlete you're looking for doesn't exist."})]})});const u=a.careerStats;return e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-yellow-50 via-white to-yellow-50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800",children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx(He,{href:"/sports-memorials",children:e.jsxs(O,{variant:"ghost",className:"mb-6","data-testid":"button-back",children:[e.jsx(Sr,{className:"mr-2 h-4 w-4"}),"Back to Sports Memorials"]})}),e.jsxs("div",{className:"text-center mb-12",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[e.jsx(Nr,{className:"h-10 w-10 text-orange-500"}),e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-yellow-600 to-orange-500 bg-clip-text text-transparent",children:"Olympic Legacy Memorial"}),e.jsx(Nr,{className:"h-10 w-10 text-orange-500"})]}),e.jsxs("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:["Celebrating the extraordinary achievements of ",a.name]})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs($,{className:"overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-yellow-500 via-orange-500 to-red-500 p-8 text-white",children:e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs(Da,{className:"w-32 h-32 border-4 border-white/30",children:[a.profileImage?e.jsx(Td,{src:a.profileImage,alt:a.name}):null,e.jsx(Ia,{className:"bg-white/20 text-white text-3xl",children:a.name.split(" ").map(m=>m[0]).join("")})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold mb-2",children:a.name}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[e.jsxs(ze,{className:"bg-white/20 text-white border-white/30",children:[e.jsx(Ni,{className:"mr-1 h-3 w-3"}),a.sport]}),a.position&&e.jsx(ze,{className:"bg-white/20 text-white border-white/30",children:a.position}),a.nationality&&e.jsxs(ze,{className:"bg-white/20 text-white border-white/30",children:[e.jsx(qo,{className:"mr-1 h-3 w-3"}),a.nationality]})]}),e.jsx("p",{className:"opacity-90",children:a.careerSpan||"Olympic Career"})]})]})}),e.jsxs(V,{className:"p-6",children:[e.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx(Fy,{className:"h-5 w-5 text-yellow-600"}),"Olympic Medal Count"]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"text-center p-4 rounded-lg bg-yellow-100 dark:bg-yellow-900/20",children:[e.jsx(Ni,{className:"h-8 w-8 mx-auto mb-2 text-yellow-500"}),e.jsx("p",{className:"text-3xl font-bold text-yellow-600",children:(u==null?void 0:u["Gold Medals"])||"0"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Gold"})]}),e.jsxs("div",{className:"text-center p-4 rounded-lg bg-gray-100 dark:bg-gray-800/50",children:[e.jsx(Fy,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),e.jsx("p",{className:"text-3xl font-bold text-gray-500",children:(u==null?void 0:u["Silver Medals"])||"0"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Silver"})]}),e.jsxs("div",{className:"text-center p-4 rounded-lg bg-amber-100 dark:bg-amber-900/20",children:[e.jsx(Uo,{className:"h-8 w-8 mx-auto mb-2 text-amber-700"}),e.jsx("p",{className:"text-3xl font-bold text-amber-700",children:(u==null?void 0:u["Bronze Medals"])||"0"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Bronze"})]})]}),a.biography&&e.jsxs(e.Fragment,{children:[e.jsx(ls,{className:"my-6"}),e.jsx("h3",{className:"text-xl font-bold mb-3",children:"Biography"}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:a.biography})]}),a.achievements&&a.achievements.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(ls,{className:"my-6"}),e.jsxs("h3",{className:"text-xl font-bold mb-3 flex items-center gap-2",children:[e.jsx(Ks,{className:"h-5 w-5 text-yellow-600"}),"Key Achievements"]}),e.jsx("div",{className:"space-y-2",children:a.achievements.map((m,f)=>e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ks,{className:"h-4 w-4 text-yellow-500 mt-1 flex-shrink-0"}),e.jsx("span",{children:m})]},f))})]})]})]}),e.jsxs($,{children:[e.jsx(le,{children:e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Mo,{className:"h-5 w-5"}),"Career Statistics"]})}),e.jsx(V,{children:u?e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:Object.entries(u).map(([m,f])=>e.jsxs("div",{className:"p-4 rounded-lg bg-muted/50",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:m}),e.jsx("p",{className:"text-2xl font-bold",children:f})]},m))}):e.jsx("p",{className:"text-muted-foreground text-center py-8",children:"No statistics available"})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs($,{className:"overflow-hidden",children:[e.jsxs(le,{className:"bg-gradient-to-r from-yellow-500 to-orange-500 text-white",children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(zo,{className:"h-5 w-5"}),"Athletic Legacy Score"]}),e.jsx($e,{className:"text-yellow-100",children:"Comprehensive Olympic achievement rating"})]}),e.jsxs(V,{className:"p-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("p",{className:`text-6xl font-bold ${c(l)}`,children:l}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"out of 100"}),e.jsx(ze,{className:"mt-2",variant:"secondary",children:d(l)})]}),e.jsx("div",{className:"space-y-4",children:o.map(m=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m.icon,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:m.category})]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[m.score,"/",m.maxScore]})]}),e.jsx(Sl,{value:m.score/m.maxScore*100,className:"h-2"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:m.description})]},m.category))})]})]}),e.jsxs($,{children:[e.jsx(le,{children:e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Nr,{className:"h-5 w-5 text-orange-500"}),"Olympic Games History"]})}),e.jsx(V,{children:e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:jge.slice(-10).reverse().map(m=>e.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg hover-elevate cursor-pointer",onClick:()=>n(m.year.toString()),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Nr,{className:"h-4 w-4 text-orange-400"}),e.jsx("span",{className:"font-medium",children:m.year})]}),e.jsxs("div",{className:"text-right text-sm text-muted-foreground",children:[e.jsx("p",{children:m.city}),e.jsx("p",{className:"text-xs",children:m.country})]})]},m.year))})})]}),e.jsx($,{className:"bg-gradient-to-br from-orange-100 to-yellow-100 dark:from-orange-900/30 dark:to-yellow-900/30 border-orange-200 dark:border-orange-800",children:e.jsxs(V,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(_t,{className:"h-6 w-6 text-orange-600"}),e.jsx("h4",{className:"font-bold text-orange-800 dark:text-orange-200",children:"Honor Their Legacy"})]}),e.jsx("p",{className:"text-sm text-orange-700 dark:text-orange-300 mb-4",children:"Share this memorial to celebrate their Olympic achievements and inspire future generations."}),e.jsx(He,{href:a.memorialId?`/memorial/${a.memorialId}`:"/sports-memorials",children:e.jsx(O,{variant:"outline",className:"w-full border-orange-300 dark:border-orange-700",children:"View Full Memorial"})})]})})]})]})]})})}const jy=[{id:1,name:"Thanksgiving",date:"November 28, 2024",icon:Um,color:"text-orange-500",category:"National",tradition:"American"},{id:2,name:"Hanukkah",date:"December 25, 2024",icon:Nr,color:"text-blue-500",category:"Jewish",tradition:"Jewish"},{id:3,name:"Christmas",date:"December 25, 2024",icon:Ks,color:"text-red-500",category:"Christian",tradition:"Christian"},{id:4,name:"Kwanzaa",date:"December 26, 2024",icon:Nr,color:"text-green-500",category:"Cultural",tradition:"African American"},{id:5,name:"New Year's Eve",date:"December 31, 2024",icon:ao,color:"text-purple-500",category:"Global",tradition:"Global"},{id:6,name:"Lunar New Year",date:"January 29, 2025",icon:Ka,color:"text-red-500",category:"Cultural",tradition:"East Asian"},{id:7,name:"Diwali",date:"November 1, 2024",icon:Nr,color:"text-amber-500",category:"Hindu",tradition:"Hindu"},{id:8,name:"Eid al-Fitr",date:"April 10, 2024",icon:Ka,color:"text-emerald-500",category:"Islamic",tradition:"Islamic"},{id:9,name:"Eid al-Adha",date:"June 16, 2024",icon:Ka,color:"text-emerald-600",category:"Islamic",tradition:"Islamic"},{id:10,name:"Vesak (Buddha Day)",date:"May 23, 2024",icon:Yi,color:"text-yellow-500",category:"Buddhist",tradition:"Buddhist"},{id:11,name:"Vaisakhi",date:"April 14, 2024",icon:Yi,color:"text-orange-400",category:"Sikh",tradition:"Sikh"},{id:12,name:"Passover",date:"April 22, 2024",icon:Ks,color:"text-blue-400",category:"Jewish",tradition:"Jewish"},{id:13,name:"Easter",date:"March 31, 2024",icon:Yi,color:"text-pink-500",category:"Christian",tradition:"Christian"},{id:14,name:"Nowruz",date:"March 20, 2024",icon:Yi,color:"text-green-400",category:"Persian",tradition:"Persian"},{id:15,name:"Holi",date:"March 25, 2024",icon:Bs,color:"text-pink-400",category:"Hindu",tradition:"Hindu"},{id:16,name:"Day of the Dead",date:"November 2, 2024",icon:Nr,color:"text-orange-600",category:"Mexican",tradition:"Latin American"},{id:17,name:"Bodhi Day",date:"December 8, 2024",icon:Um,color:"text-green-600",category:"Buddhist",tradition:"Buddhist"},{id:18,name:"Winter Solstice",date:"December 21, 2024",icon:Yi,color:"text-cyan-500",category:"Pagan",tradition:"Pagan/Wiccan"},{id:19,name:"Yule",date:"December 21, 2024",icon:Nr,color:"text-red-600",category:"Pagan",tradition:"Nordic"},{id:20,name:"Lohri",date:"January 13, 2025",icon:Nr,color:"text-orange-500",category:"Punjabi",tradition:"Punjabi"},{id:21,name:"Makar Sankranti",date:"January 14, 2025",icon:Yi,color:"text-yellow-600",category:"Hindu",tradition:"Hindu"},{id:22,name:"Tu BiShvat",date:"February 13, 2025",icon:Um,color:"text-green-500",category:"Jewish",tradition:"Jewish"},{id:23,name:"Maha Shivaratri",date:"February 26, 2025",icon:Ka,color:"text-indigo-500",category:"Hindu",tradition:"Hindu"},{id:24,name:"Purim",date:"March 14, 2025",icon:Ks,color:"text-purple-500",category:"Jewish",tradition:"Jewish"},{id:25,name:"St. Patrick's Day",date:"March 17, 2025",icon:Um,color:"text-green-500",category:"Irish",tradition:"Irish"},{id:26,name:"Ramadan Begins",date:"March 1, 2025",icon:Ka,color:"text-emerald-500",category:"Islamic",tradition:"Islamic"},{id:27,name:"Thai New Year (Songkran)",date:"April 13, 2025",icon:Yi,color:"text-blue-400",category:"Thai",tradition:"Thai"},{id:28,name:"Baisakhi",date:"April 14, 2025",icon:Yi,color:"text-orange-500",category:"Sikh",tradition:"Sikh"},{id:29,name:"Hanami",date:"April 1, 2025",icon:Um,color:"text-pink-400",category:"Japanese",tradition:"Japanese"},{id:30,name:"Cinco de Mayo",date:"May 5, 2025",icon:ao,color:"text-green-500",category:"Mexican",tradition:"Mexican"},{id:31,name:"Shavuot",date:"June 1, 2025",icon:Ks,color:"text-blue-500",category:"Jewish",tradition:"Jewish"},{id:32,name:"Juneteenth",date:"June 19, 2025",icon:Ks,color:"text-red-500",category:"American",tradition:"African American"},{id:33,name:"Obon Festival",date:"August 15, 2025",icon:Nr,color:"text-purple-400",category:"Japanese",tradition:"Japanese"},{id:34,name:"Raksha Bandhan",date:"August 9, 2025",icon:_t,color:"text-pink-500",category:"Hindu",tradition:"Hindu"},{id:35,name:"Krishna Janmashtami",date:"August 16, 2025",icon:Ka,color:"text-blue-600",category:"Hindu",tradition:"Hindu"},{id:36,name:"Ganesh Chaturthi",date:"August 27, 2025",icon:Ks,color:"text-orange-500",category:"Hindu",tradition:"Hindu"},{id:37,name:"Mid-Autumn Festival",date:"October 6, 2025",icon:Ka,color:"text-amber-400",category:"Chinese",tradition:"Chinese"},{id:38,name:"Navratri",date:"October 2, 2025",icon:Bs,color:"text-red-400",category:"Hindu",tradition:"Hindu"},{id:39,name:"Durga Puja",date:"October 11, 2025",icon:Ks,color:"text-red-500",category:"Hindu",tradition:"Hindu"},{id:40,name:"Rosh Hashanah",date:"September 22, 2025",icon:Ka,color:"text-blue-500",category:"Jewish",tradition:"Jewish"},{id:41,name:"Yom Kippur",date:"October 1, 2025",icon:Ks,color:"text-blue-600",category:"Jewish",tradition:"Jewish"},{id:42,name:"Sukkot",date:"October 6, 2025",icon:Um,color:"text-green-500",category:"Jewish",tradition:"Jewish"},{id:43,name:"Dia de los Muertos",date:"November 2, 2025",icon:Nr,color:"text-orange-600",category:"Mexican",tradition:"Latin American"},{id:44,name:"All Saints Day",date:"November 1, 2025",icon:Ks,color:"text-white",category:"Christian",tradition:"Christian"},{id:45,name:"Guy Fawkes Night",date:"November 5, 2025",icon:Nr,color:"text-orange-500",category:"British",tradition:"British"},{id:46,name:"Guru Nanak Jayanti",date:"November 15, 2025",icon:Yi,color:"text-yellow-500",category:"Sikh",tradition:"Sikh"},{id:47,name:"Mawlid al-Nabi",date:"September 5, 2025",icon:Ka,color:"text-green-500",category:"Islamic",tradition:"Islamic"},{id:48,name:"Indigenous Peoples Day",date:"October 13, 2025",icon:qo,color:"text-brown-500",category:"Indigenous",tradition:"Indigenous"},{id:49,name:"Samhain",date:"October 31, 2025",icon:Ka,color:"text-orange-500",category:"Pagan",tradition:"Celtic"},{id:50,name:"Festivus",date:"December 23, 2025",icon:ao,color:"text-gray-500",category:"Secular",tradition:"Secular"}],Nge=[{icon:Pi,title:"Birthday Wishes",description:"Collect and display birthday wishes from friends and family"},{icon:zn,title:"Bluetooth Playlists",description:"Share music with connected devices during celebrations"},{icon:ta,title:"Live Celebration",description:"Stream and celebrate with friends in real-time"},{icon:Ud,title:"Shopping Spree",description:"Spend birthday donations at partner stores"}],wge=[{icon:lm,title:"Gift Registry",description:"Create and share your wedding gift wishlist"},{icon:_t,title:"Cash Gifts",description:"Accept monetary gifts through secure wallets"},{icon:Ms,title:"Guest Management",description:"Track RSVPs and thank-you notes"},{icon:ta,title:"Live Stream",description:"Share your special day with remote guests"}];function _ge(){const[t,s]=ja(),[r,n]=N.useState(""),[a,i]=N.useState(null),[o,l]=N.useState(!1),c=()=>{const g=new URLSearchParams(window.location.search).get("tab");return g&&["holidays","birthdays","weddings"].includes(g)?g:"holidays"},[d,u]=N.useState(c);N.useEffect(()=>{const p=c();p!==d&&u(p)},[t]);const m=p=>{u(p);const g=`/celebrations${p!=="holidays"?`?tab=${p}`:""}`;s(g)},f=[...new Set(jy.map(p=>p.tradition))].sort(),h=jy.filter(p=>{const g=p.name.toLowerCase().includes(r.toLowerCase())||p.category.toLowerCase().includes(r.toLowerCase())||p.tradition.toLowerCase().includes(r.toLowerCase()),y=!a||p.tradition===a;return g&&y});return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-primary/20 via-accent/10 to-background",children:[e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_70%_30%,rgba(218,165,32,0.15),transparent_50%)]"}),e.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 sm:py-20",children:e.jsxs("div",{className:"text-center space-y-6",children:[e.jsxs(ze,{variant:"secondary",className:"mb-4","data-testid":"badge-new-feature",children:[e.jsx(Bs,{className:"w-3 h-3 mr-1"}),"Continuum Celebrations"]}),e.jsxs("h1",{className:"text-4xl sm:text-5xl lg:text-6xl font-serif font-bold text-foreground tracking-tight","data-testid":"text-celebrations-title",children:["Celebrate Every",e.jsx("br",{}),e.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-primary to-accent",children:"Moment Together"})]}),e.jsx("p",{className:"text-lg sm:text-xl text-muted-foreground max-w-3xl mx-auto leading-relaxed","data-testid":"text-celebrations-description",children:"From holidays and birthdays to weddings and special occasions - create shared experiences with live streaming, Bluetooth playlists, gift registries, and shopping sprees from donated funds."})]})})]}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsxs(ba,{value:d,onValueChange:m,className:"w-full",children:[e.jsxs(ra,{className:"grid w-full max-w-lg mx-auto grid-cols-3 mb-12","data-testid":"tabs-celebrations",children:[e.jsxs(qt,{value:"holidays",className:"gap-2","data-testid":"tab-holidays",children:[e.jsx(ds,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Holidays"})]}),e.jsxs(qt,{value:"birthdays",className:"gap-2","data-testid":"tab-birthdays",children:[e.jsx(Pi,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Birthdays"})]}),e.jsxs(qt,{value:"weddings",className:"gap-2","data-testid":"tab-weddings",children:[e.jsx(_t,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Weddings"})]})]}),e.jsxs(Vt,{value:"holidays",className:"space-y-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-serif font-semibold text-foreground mb-3","data-testid":"text-holidays-title",children:"Multi-Faith Holiday Calendar"}),e.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"50+ holidays from every tradition and culture. No religious bias - you choose what matters to you."})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 max-w-2xl mx-auto",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Cc,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(re,{placeholder:"Search holidays...",value:r,onChange:p=>n(p.target.value),className:"pl-10","data-testid":"input-search-holidays"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[e.jsx(O,{variant:a===null?"default":"outline",size:"sm",onClick:()=>i(null),"data-testid":"filter-all",children:"All"}),["Hindu","Jewish","Islamic","Christian","Buddhist","Sikh","Global"].map(p=>e.jsx(O,{variant:a===p?"default":"outline",size:"sm",onClick:()=>i(a===p?null:p),"data-testid":`filter-${p.toLowerCase()}`,children:p},p))]})]}),e.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:["Showing ",h.length," of ",jy.length," holidays"]}),e.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-4",children:(o?h:h.slice(0,12)).map(p=>e.jsx($,{className:"hover-elevate","data-testid":`card-holiday-${p.id}`,children:e.jsx(V,{className:"p-5",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`p-3 rounded-lg bg-muted ${p.color}`,children:e.jsx(p.icon,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[e.jsx("h3",{className:"font-semibold text-foreground",children:p.name}),e.jsx(ze,{variant:"outline",className:"text-xs shrink-0",children:p.category})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:p.date}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:p.tradition})]})]})})},p.id))}),h.length>12&&!o&&e.jsx("div",{className:"text-center",children:e.jsxs(O,{variant:"outline",size:"lg",onClick:()=>l(!0),"data-testid":"button-load-more-holidays",children:["Show All ",h.length," Holidays"]})}),o&&h.length>12&&e.jsx("div",{className:"text-center",children:e.jsx(O,{variant:"ghost",size:"lg",onClick:()=>l(!1),"data-testid":"button-show-less-holidays",children:"Show Less"})}),e.jsxs($,{className:"mt-8",children:[e.jsxs(le,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(qo,{className:"w-5 h-5 text-primary"}),"All Holidays, All Traditions"]}),e.jsx($e,{children:"Our platform respects every faith and culture. Create celebration events for any holiday."})]}),e.jsx(V,{children:e.jsxs("div",{className:"grid sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-lg bg-muted/50 text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-primary",children:[jy.length,"+"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"World Holidays"})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-muted/50 text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-primary",children:[f.length,"+"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Faith Traditions"})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-muted/50 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:"100+"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Regional Celebrations"})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-muted/50 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:"Custom"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Personal Dates"})]})]})})]}),e.jsx("div",{className:"text-center pt-4",children:e.jsx(He,{href:"/holiday-timeline",children:e.jsxs(O,{size:"lg","data-testid":"button-explore-holidays",children:[e.jsx(ds,{className:"w-5 h-5 mr-2"}),"Explore Full Holiday Calendar"]})})})]}),e.jsxs(Vt,{value:"birthdays",className:"space-y-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-serif font-semibold text-foreground mb-3","data-testid":"text-birthdays-title",children:"Birthday Celebration Platform"}),e.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Create unforgettable birthday experiences with live streaming, shared playlists, and a shopping spree from donated funds."})]}),e.jsx("div",{className:"grid sm:grid-cols-2 gap-6",children:Nge.map((p,g)=>e.jsx($,{className:"hover-elevate","data-testid":`card-birthday-feature-${g}`,children:e.jsx(V,{className:"p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 rounded-lg bg-primary/10",children:e.jsx(p.icon,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground mb-1",children:p.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:p.description})]})]})})},g))}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs($,{className:"bg-gradient-to-br from-primary/10 to-primary/5 border-primary/20",children:[e.jsx(le,{children:e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(cw,{className:"w-5 h-5 text-primary"}),"Bluetooth Party Mode"]})}),e.jsxs(V,{className:"space-y-4",children:[e.jsx("p",{className:"text-muted-foreground",children:"Connect multiple devices to share music during the celebration. Everyone hears the same playlist in perfect sync."}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(zn,{className:"w-4 h-4 text-primary"}),e.jsx("span",{children:"Curated celebration playlists"})]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Ms,{className:"w-4 h-4 text-primary"}),e.jsx("span",{children:"Up to 20 connected devices"})]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Bd,{className:"w-4 h-4 text-primary"}),e.jsx("span",{children:"Host controls playback"})]})]})]})]}),e.jsxs($,{className:"bg-gradient-to-br from-accent/10 to-accent/5 border-accent/20",children:[e.jsx(le,{children:e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Ud,{className:"w-5 h-5 text-accent-foreground"}),"Birthday Shopping Spree"]})}),e.jsxs(V,{className:"space-y-4",children:[e.jsx("p",{className:"text-muted-foreground",children:"Receive birthday donations and spend them on things you actually want. Shop from your wallet balance at partner stores."}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(lm,{className:"w-4 h-4 text-primary"}),e.jsx("span",{children:"Collect donations from guests"})]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Ud,{className:"w-4 h-4 text-primary"}),e.jsx("span",{children:"Shop at partner retailers"})]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Mr,{className:"w-4 h-4 text-primary"}),e.jsx("span",{children:"Track spending and orders"})]})]})]})]})]}),e.jsx("div",{className:"text-center pt-4",children:e.jsx(He,{href:"/birthday-celebration",children:e.jsxs(O,{size:"lg","data-testid":"button-create-birthday",children:[e.jsx(Pi,{className:"w-5 h-5 mr-2"}),"Create Birthday Celebration"]})})})]}),e.jsxs(Vt,{value:"weddings",className:"space-y-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-serif font-semibold text-foreground mb-3","data-testid":"text-weddings-title",children:"Wedding Gift Registry"}),e.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Create beautiful gift registries, accept cash gifts, and share your special day with everyone - near and far."})]}),e.jsx("div",{className:"grid sm:grid-cols-2 gap-6",children:wge.map((p,g)=>e.jsx($,{className:"hover-elevate","data-testid":`card-wedding-feature-${g}`,children:e.jsx(V,{className:"p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 rounded-lg bg-primary/10",children:e.jsx(p.icon,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground mb-1",children:p.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:p.description})]})]})})},g))}),e.jsxs($,{children:[e.jsx(le,{children:e.jsx(ge,{children:"How It Works"})}),e.jsx(V,{children:e.jsxs("div",{className:"grid sm:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center mx-auto",children:e.jsx("span",{className:"text-xl font-bold text-primary",children:"1"})}),e.jsx("h4",{className:"font-semibold",children:"Create Registry"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Add items from any store or accept cash contributions"})]}),e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center mx-auto",children:e.jsx("span",{className:"text-xl font-bold text-primary",children:"2"})}),e.jsx("h4",{className:"font-semibold",children:"Share with Guests"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Send your unique registry link to friends and family"})]}),e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center mx-auto",children:e.jsx("span",{className:"text-xl font-bold text-primary",children:"3"})}),e.jsx("h4",{className:"font-semibold",children:"Receive & Thank"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Track gifts and send personalized thank-you notes"})]})]})})]}),e.jsx("div",{className:"text-center pt-4",children:e.jsxs(O,{size:"lg","data-testid":"button-create-registry",children:[e.jsx(lm,{className:"w-5 h-5 mr-2"}),"Create Gift Registry"]})})]})]})}),e.jsx("div",{className:"bg-card/50 py-16",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-serif font-semibold text-foreground mb-3","data-testid":"text-live-title",children:"Celebrate Together, Anywhere"}),e.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Stream your celebrations live to friends and family who can't be there in person."})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6 max-w-4xl mx-auto",children:[e.jsx($,{className:"text-center hover-elevate",children:e.jsxs(V,{className:"p-6 space-y-4",children:[e.jsx(ta,{className:"w-10 h-10 text-primary mx-auto"}),e.jsx("h3",{className:"font-semibold",children:"Live Video"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"HD video streaming with chat and reactions"})]})}),e.jsx($,{className:"text-center hover-elevate",children:e.jsxs(V,{className:"p-6 space-y-4",children:[e.jsx(zn,{className:"w-10 h-10 text-primary mx-auto"}),e.jsx("h3",{className:"font-semibold",children:"Shared Music"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Everyone listens to the same playlist together"})]})}),e.jsx($,{className:"text-center hover-elevate",children:e.jsxs(V,{className:"p-6 space-y-4",children:[e.jsx(ao,{className:"w-10 h-10 text-primary mx-auto"}),e.jsx("h3",{className:"font-semibold",children:"Virtual Reactions"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Send reactions, photos, and messages in real-time"})]})})]})]})})]})}function Sge(){return e.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:e.jsx($,{className:"w-full max-w-md mx-4",children:e.jsxs(V,{className:"pt-6",children:[e.jsxs("div",{className:"flex mb-4 gap-2",children:[e.jsx(bm,{className:"h-8 w-8 text-red-500"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),e.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}function Cge(){const[t,s]=N.useState(null),[r,n]=N.useState(!1);N.useEffect(()=>{const o=l=>{l.preventDefault(),s(l);const c=localStorage.getItem("installPromptDismissed"),d=c?parseInt(c):0,u=(Date.now()-d)/(1e3*60*60*24);(!c||u>7)&&n(!0)};return window.addEventListener("beforeinstallprompt",o),window.matchMedia("(display-mode: standalone)").matches&&n(!1),()=>window.removeEventListener("beforeinstallprompt",o)},[]);const a=async()=>{if(!t)return;t.prompt();const{outcome:o}=await t.userChoice;o==="accepted"?n(!1):(n(!1),localStorage.setItem("installPromptDismissed",Date.now().toString())),s(null)},i=()=>{n(!1),localStorage.setItem("installPromptDismissed",Date.now().toString())};return r?e.jsx("div",{className:"fixed bottom-4 left-4 right-4 md:left-auto md:right-4 md:max-w-md z-50 animate-in slide-in-from-bottom-5",children:e.jsx($,{className:"bg-gradient-to-br from-primary/95 to-primary border-primary/20 shadow-lg",children:e.jsx(V,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:e.jsx("div",{className:"w-10 h-10 rounded-full bg-primary-foreground/20 flex items-center justify-center",children:e.jsx(T_,{className:"w-5 h-5 text-primary-foreground"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-sm font-semibold text-primary-foreground mb-1","data-testid":"text-install-title",children:"Install Opictuary"}),e.jsx("p",{className:"text-xs text-primary-foreground/90 mb-3","data-testid":"text-install-description",children:"Add to your home screen for quick access and offline viewing of memorials"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(O,{size:"sm",variant:"secondary",onClick:a,className:"flex-1 bg-primary-foreground text-primary hover:bg-primary-foreground/90","data-testid":"button-install-app",children:[e.jsx(Al,{className:"w-3.5 h-3.5 mr-1.5"}),"Install"]}),e.jsx(O,{size:"sm",variant:"ghost",onClick:i,className:"text-primary-foreground/80 hover:text-primary-foreground hover:bg-primary-foreground/10","data-testid":"button-dismiss-install",children:"Not now"})]})]}),e.jsx("button",{onClick:i,className:"flex-shrink-0 text-primary-foreground/60 hover:text-primary-foreground transition-colors","aria-label":"Close","data-testid":"button-close-install",children:e.jsx(Vo,{className:"w-4 h-4"})})]})})})}):null}function kge(){const[t,s]=N.useState(!1),[r,n]=N.useState(""),[a,i]=N.useState(""),[o,l]=N.useState(!1),c=N.useRef(null),{toast:d}=Ht(),{data:u=[],isLoading:m}=Xe({queryKey:["/api/chat/messages"],enabled:t}),f=yt({mutationFn:async y=>{var P;const v=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:y}),credentials:"include"});if(!v.ok)throw new Error("Failed to send message");const j=(P=v.body)==null?void 0:P.getReader();if(!j)throw new Error("No response body");const w=new TextDecoder;let _="";for(l(!0),i("");;){const{done:E,value:L}=await j.read();if(E)break;const M=w.decode(L).split(`
`);for(const F of M)if(F.startsWith("data: ")){const k=F.slice(6);if(k==="[DONE]"){l(!1),i("");return}try{const D=JSON.parse(k);if(D.error)throw l(!1),i(""),new Error(D.error);D.content&&(_+=D.content,i(_))}catch(D){throw l(!1),i(""),D}}}},onSuccess:()=>{xt.invalidateQueries({queryKey:["/api/chat/messages"]})},onError:y=>{d({title:"Error",description:y.message,variant:"destructive"}),l(!1),i("")}}),h=yt({mutationFn:()=>pt("DELETE","/api/chat/messages"),onSuccess:()=>{xt.invalidateQueries({queryKey:["/api/chat/messages"]}),d({title:"Success",description:"Chat history cleared"})},onError:y=>{d({title:"Error",description:y.message,variant:"destructive"})}}),p=()=>{!r.trim()||f.isPending||o||(f.mutate(r),n(""))},g=y=>{y.key==="Enter"&&!y.shiftKey&&(y.preventDefault(),p())};return N.useEffect(()=>{c.current&&(c.current.scrollTop=c.current.scrollHeight)},[u,a]),t?e.jsxs($,{className:"fixed bottom-6 right-6 w-96 h-[600px] shadow-xl z-50 flex flex-col",children:[e.jsxs(le,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[e.jsxs("div",{children:[e.jsx(ge,{children:"AI Assistant"}),e.jsx($e,{children:"Ask me anything about the platform"})]}),e.jsxs("div",{className:"flex gap-2",children:[u.length>0&&e.jsx(O,{size:"icon",variant:"ghost",onClick:()=>h.mutate(),disabled:h.isPending,"data-testid":"button-clear-chat",children:e.jsx(jc,{className:"h-4 w-4"})}),e.jsx(O,{size:"icon",variant:"ghost",onClick:()=>s(!1),"data-testid":"button-close-chat",children:e.jsx(Vo,{className:"h-4 w-4"})})]})]}),e.jsxs(V,{className:"flex-1 flex flex-col min-h-0 p-4",children:[e.jsx(Dl,{className:"flex-1 pr-4",ref:c,children:m?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx(tn,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):u.length===0&&!a?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center text-muted-foreground",children:[e.jsx(Pl,{className:"h-12 w-12 mb-4 opacity-50"}),e.jsx("p",{className:"text-sm",children:"Start a conversation!"}),e.jsx("p",{className:"text-xs mt-2",children:"I can help you navigate the platform, create memorials, and answer questions."})]}):e.jsxs("div",{className:"space-y-4",children:[u.map(y=>e.jsx("div",{className:`flex ${y.role==="user"?"justify-end":"justify-start"}`,"data-testid":`message-${y.role}`,children:e.jsx("div",{className:`max-w-[80%] rounded-lg px-4 py-2 ${y.role==="user"?"bg-primary text-primary-foreground":"bg-muted"}`,children:e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:y.content})})},y.id)),a&&e.jsx("div",{className:"flex justify-start","data-testid":"message-streaming",children:e.jsxs("div",{className:"max-w-[80%] rounded-lg px-4 py-2 bg-muted",children:[e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:a}),e.jsx(tn,{className:"h-3 w-3 animate-spin mt-1"})]})})]})}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsx(re,{placeholder:"Type your message...",value:r,onChange:y=>n(y.target.value),onKeyPress:g,disabled:f.isPending||o,"data-testid":"input-chat-message"}),e.jsx(O,{size:"icon",onClick:p,disabled:!r.trim()||f.isPending||o,"data-testid":"button-send-message",children:f.isPending||o?e.jsx(tn,{className:"h-4 w-4 animate-spin"}):e.jsx($x,{className:"h-4 w-4"})})]})]})]}):e.jsx(O,{size:"icon",className:"fixed bottom-6 right-6 h-14 w-14 rounded-full shadow-lg z-50",onClick:()=>s(!0),"data-testid":"button-open-chat",children:e.jsx(Pl,{className:"h-6 w-6"})})}function Age({badgeVariant:t="classic"}){return e.jsx("footer",{className:"border-t border-border/50 bg-card/80 backdrop-blur-md mt-20",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[e.jsxs("div",{className:"flex flex-col items-center md:items-start",children:[e.jsx(ac,{variant:t,size:"small",className:"mb-4"}),e.jsx("p",{className:"text-sm text-muted-foreground text-center md:text-left",children:"Honoring life, preserving legacy"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-4",children:"Our Features"}),e.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsx("li",{children:e.jsx(He,{href:"/products",children:e.jsx("span",{className:"hover:text-foreground transition-colors cursor-pointer","data-testid":"footer-link-products",children:"Products"})})}),e.jsx("li",{children:e.jsx(He,{href:"/upcoming-messages",children:e.jsx("span",{className:"hover:text-foreground transition-colors cursor-pointer","data-testid":"footer-link-future-messages",children:"Future Messages"})})}),e.jsx("li",{children:e.jsx(He,{href:"/qr-code",children:e.jsx("span",{className:"hover:text-foreground transition-colors cursor-pointer","data-testid":"footer-link-qr-memorials",children:"QR Memorials"})})}),e.jsx("li",{children:e.jsx(He,{href:"/celebrity-memorials",children:e.jsx("span",{className:"hover:text-foreground transition-colors cursor-pointer","data-testid":"footer-link-celebrity",children:"Celebrity Memorials"})})}),e.jsx("li",{children:e.jsx(He,{href:"/alumni-memorials",children:e.jsx("span",{className:"hover:text-foreground transition-colors cursor-pointer","data-testid":"footer-link-alumni",children:"Alumni Memorials"})})}),e.jsx("li",{children:e.jsx(He,{href:"/essential-workers",children:e.jsx("span",{className:"hover:text-foreground transition-colors cursor-pointer","data-testid":"footer-link-essential",children:"Essential Workers"})})}),e.jsx("li",{children:e.jsx(He,{href:"/hood-memorials",children:e.jsx("span",{className:"hover:text-foreground transition-colors cursor-pointer","data-testid":"footer-link-hood",children:"Hood Memorials"})})}),e.jsx("li",{children:e.jsx(He,{href:"/neighborhoods",children:e.jsx("span",{className:"hover:text-foreground transition-colors cursor-pointer","data-testid":"footer-link-neighborhoods",children:"Neighborhoods"})})}),e.jsx("li",{children:e.jsx(He,{href:"/prison-access",children:e.jsx("span",{className:"hover:text-foreground transition-colors cursor-pointer","data-testid":"footer-link-prison-access",children:"Prison Access"})})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-4",children:"Quick Links"}),e.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsx("li",{children:e.jsx(He,{href:"/create-memorial",children:e.jsx("span",{className:"hover:text-foreground transition-colors cursor-pointer","data-testid":"footer-link-create",children:"Create Memorial"})})}),e.jsx("li",{children:e.jsx(He,{href:"/about",children:e.jsx("span",{className:"hover:text-foreground transition-colors cursor-pointer","data-testid":"footer-link-about",children:"About Us"})})}),e.jsx("li",{children:e.jsx(He,{href:"/support",children:e.jsx("span",{className:"hover:text-foreground transition-colors cursor-pointer","data-testid":"footer-link-support",children:"Support Hub"})})}),e.jsx("li",{children:e.jsx(He,{href:"/partner-signup",children:e.jsx("span",{className:"hover:text-foreground transition-colors cursor-pointer","data-testid":"footer-link-partners",children:"Partner Program"})})}),e.jsx("li",{children:e.jsx(He,{href:"/advertising",children:e.jsx("span",{className:"hover:text-foreground transition-colors cursor-pointer","data-testid":"footer-link-advertising",children:"Advertising"})})}),e.jsx("li",{children:e.jsx(He,{href:"/privacy",children:e.jsx("span",{className:"hover:text-foreground transition-colors cursor-pointer","data-testid":"footer-link-privacy",children:"Privacy Policy"})})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-4",children:"Contact Us"}),e.jsxs("ul",{className:"space-y-3 text-sm text-muted-foreground",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Ti,{className:"w-4 h-4"}),e.jsx("span",{children:"support@opictuary.com"})]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx($d,{className:"w-4 h-4"}),e.jsx("span",{children:"1-800-OPICTUARY"})]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(tr,{className:"w-4 h-4"}),e.jsx("span",{children:"San Francisco, CA"})]})]})]})]}),e.jsxs("div",{className:"mt-12 pt-8 border-t border-border/30 flex flex-col md:flex-row justify-between items-center gap-4",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:[" ",new Date().getFullYear()," Opictuary. All rights reserved."]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx("span",{children:"Made with"}),e.jsx(_t,{className:"w-4 h-4 text-red-500 fill-red-500"}),e.jsx("span",{children:"for families in need"})]})]})]})})}function Pge(){const{user:t,isAuthenticated:s,isLoading:r}=fo();if(r)return e.jsx("div",{className:"h-10 w-10 rounded-full bg-muted animate-pulse"});if(!s)return e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(O,{variant:"ghost",size:"sm",onClick:()=>window.location.href="/api/login","data-testid":"button-login",className:"hidden sm:flex",children:[e.jsx(MG,{className:"w-4 h-4 mr-2"}),"Login"]}),e.jsxs(O,{size:"sm",onClick:()=>window.location.href="/api/login","data-testid":"button-signup",children:[e.jsx(V1,{className:"w-4 h-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Sign Up"})]})]});const n=t!=null&&t.firstName&&(t!=null&&t.lastName)?`${t.firstName} ${t.lastName}`:(t==null?void 0:t.firstName)||(t==null?void 0:t.lastName)||void 0;return e.jsxs(bw,{children:[e.jsx(Nw,{asChild:!0,children:e.jsx(O,{variant:"ghost",className:"relative h-10 w-10 rounded-full p-0 hover-elevate","data-testid":"button-user-menu",children:e.jsx(_U,{src:t==null?void 0:t.profileImageUrl,name:n,email:(t==null?void 0:t.email)||void 0,size:"md"})})}),e.jsxs($0,{className:"w-56",align:"end",forceMount:!0,children:[e.jsx(Q7,{className:"font-normal",children:e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("p",{className:"text-sm font-medium leading-none","data-testid":"text-user-name",children:n||"User"}),e.jsx("p",{className:"text-xs leading-none text-muted-foreground","data-testid":"text-user-email",children:t==null?void 0:t.email})]})}),e.jsx(fl,{}),e.jsx(He,{href:"/profile",children:e.jsxs(Ts,{className:"cursor-pointer","data-testid":"menu-item-profile",children:[e.jsx(eu,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"My Profile"})]})}),e.jsx(He,{href:"/my-memorials",children:e.jsxs(Ts,{className:"cursor-pointer","data-testid":"menu-item-memorials",children:[e.jsx(_t,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"My Memorials"})]})}),e.jsx(He,{href:"/upcoming-messages",children:e.jsxs(Ts,{className:"cursor-pointer","data-testid":"menu-item-upcoming-messages",children:[e.jsx(ds,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Legacy Messages"})]})}),e.jsx(He,{href:"/memorial/e94ee1f4-2506-4848-9c7e-97b6d473cf81",children:e.jsxs(Ts,{className:"cursor-pointer","data-testid":"menu-item-photo-gallery",children:[e.jsx(vi,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Photo Gallery"})]})}),e.jsx(He,{href:"/profile?tab=settings",children:e.jsxs(Ts,{className:"cursor-pointer","data-testid":"menu-item-settings",children:[e.jsx(E_,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Settings"})]})}),(t==null?void 0:t.isAdmin)&&e.jsxs(e.Fragment,{children:[e.jsx(fl,{}),e.jsx(He,{href:"/admin",children:e.jsxs(Ts,{className:"cursor-pointer","data-testid":"menu-item-admin",children:[e.jsx(UI,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Admin Dashboard"})]})}),e.jsx(He,{href:"/admin/product-orders",children:e.jsxs(Ts,{className:"cursor-pointer","data-testid":"menu-item-admin-orders",children:[e.jsx(Ud,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Product Orders"})]})})]}),e.jsx(fl,{}),e.jsxs(Ts,{className:"cursor-pointer text-destructive focus:text-destructive",onClick:()=>window.location.href="/api/logout","data-testid":"menu-item-logout",children:[e.jsx(LG,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Log out"})]})]})]})}const Ege=()=>{const[t]=ja(),s=N.useRef(t);N.useEffect(()=>{t!==s.current&&(m$(t),s.current=t)},[t])};function Tge(){return Ege(),e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("a",{href:"#main-content",className:"sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-[100] focus:px-4 focus:py-2 focus:bg-primary focus:text-primary-foreground focus:rounded-md focus:shadow-lg","data-testid":"link-skip-to-content",children:"Skip to main content"}),e.jsx("nav",{className:"border-b border-border/50 bg-card/80 backdrop-blur-md sticky top-0 z-50 shadow-sm",role:"navigation","aria-label":"Main navigation",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-20",children:[e.jsx(He,{href:"/",children:e.jsxs("div",{className:"hover-elevate px-3 py-2 rounded-md transition-colors cursor-pointer","data-testid":"link-home",role:"link","aria-label":"Opictuary home page",children:[e.jsx(ro,{variant:"classic",showTagline:!0,className:"hidden md:flex"}),e.jsx(ro,{variant:"classic",showTagline:!1,className:"flex md:hidden"})]})}),e.jsxs("div",{className:"hidden lg:flex gap-1",children:[e.jsx(He,{href:"/memorial/e94ee1f4-2506-4848-9c7e-97b6d473cf81",children:e.jsxs(O,{variant:"ghost",size:"sm","data-testid":"nav-demo-memorial",className:"text-sm",children:[e.jsx(vi,{className:"w-4 h-4 mr-1.5"}),"Demo Memorial"]})}),e.jsx(He,{href:"/create-memorial",children:e.jsxs(O,{variant:"ghost",size:"sm","data-testid":"nav-create-memorial",className:"text-sm",children:[e.jsx(Un,{className:"w-4 h-4 mr-1.5"}),"Create Memorial"]})}),e.jsx(He,{href:"/celebrations",children:e.jsxs(O,{variant:"ghost",size:"sm","data-testid":"nav-celebrations",className:"text-sm",children:[e.jsx(ao,{className:"w-4 h-4 mr-1.5"}),"Celebrations"]})}),e.jsx(He,{href:"/products",children:e.jsxs(O,{variant:"ghost",size:"sm","data-testid":"nav-products",className:"text-sm",children:[e.jsx(Ud,{className:"w-4 h-4 mr-1.5"}),"Products"]})}),e.jsxs(bw,{children:[e.jsx(Nw,{asChild:!0,children:e.jsxs(O,{variant:"ghost",size:"sm","data-testid":"nav-features-dropdown",className:"text-sm",children:[e.jsx(Bs,{className:"w-4 h-4 mr-1.5"}),"Features",e.jsx(Fx,{className:"w-3 h-3 ml-1.5"})]})}),e.jsxs($0,{align:"end",className:"w-56",children:[e.jsx(Ts,{asChild:!0,className:"cursor-pointer","data-testid":"dropdown-celebrations",children:e.jsxs(He,{href:"/celebrations",children:[e.jsx(ao,{className:"w-4 h-4 mr-2"}),e.jsx("span",{children:"Celebrations Hub"})]})}),e.jsx(Ts,{asChild:!0,className:"cursor-pointer","data-testid":"dropdown-birthdays",children:e.jsxs(He,{href:"/celebrations?tab=birthdays",children:[e.jsx(Pi,{className:"w-4 h-4 mr-2"}),e.jsx("span",{children:"Birthday Celebrations"})]})}),e.jsx(Ts,{asChild:!0,className:"cursor-pointer","data-testid":"dropdown-weddings",children:e.jsxs(He,{href:"/celebrations?tab=weddings",children:[e.jsx(_t,{className:"w-4 h-4 mr-2"}),e.jsx("span",{children:"Wedding Gifts"})]})}),e.jsx(fl,{}),e.jsx(Ts,{asChild:!0,className:"cursor-pointer","data-testid":"dropdown-event-planner",children:e.jsxs(He,{href:"/event-planner",children:[e.jsx(ds,{className:"w-4 h-4 mr-2"}),e.jsx("span",{children:"Event Planner"})]})}),e.jsx(Ts,{asChild:!0,className:"cursor-pointer","data-testid":"dropdown-future-messages",children:e.jsxs(He,{href:"/upcoming-messages",children:[e.jsx(ds,{className:"w-4 h-4 mr-2"}),e.jsx("span",{children:"Future Messages"})]})}),e.jsx(Ts,{asChild:!0,className:"cursor-pointer","data-testid":"dropdown-qr-memorials",children:e.jsxs(He,{href:"/qr-code",children:[e.jsx(KC,{className:"w-4 h-4 mr-2"}),e.jsx("span",{children:"QR Memorials"})]})}),e.jsx(fl,{}),e.jsx(Ts,{asChild:!0,className:"cursor-pointer","data-testid":"dropdown-celebrity-memorials",children:e.jsxs(He,{href:"/celebrity-memorials",children:[e.jsx(zo,{className:"w-4 h-4 mr-2"}),e.jsx("span",{children:"Celebrity Memorials"})]})}),e.jsx(Ts,{asChild:!0,className:"cursor-pointer","data-testid":"dropdown-alumni-memorials",children:e.jsxs(He,{href:"/alumni-memorials",children:[e.jsx(Za,{className:"w-4 h-4 mr-2"}),e.jsx("span",{children:"Alumni Memorials"})]})}),e.jsx(Ts,{asChild:!0,className:"cursor-pointer","data-testid":"dropdown-sports-memorials",children:e.jsxs(He,{href:"/sports-memorials",children:[e.jsx(Ni,{className:"w-4 h-4 mr-2"}),e.jsx("span",{children:"Sports Memorials"})]})}),e.jsx(Ts,{asChild:!0,className:"cursor-pointer","data-testid":"dropdown-pet-memorials",children:e.jsxs(He,{href:"/pet-memorials",children:[e.jsx(Si,{className:"w-4 h-4 mr-2"}),e.jsx("span",{children:"Pet Memorials"})]})}),e.jsx(Ts,{asChild:!0,className:"cursor-pointer","data-testid":"dropdown-multi-faith",children:e.jsxs(He,{href:"/multi-faith-templates",children:[e.jsx(Bs,{className:"w-4 h-4 mr-2"}),e.jsx("span",{children:"Multi-Faith Templates"})]})}),e.jsx(Ts,{asChild:!0,className:"cursor-pointer","data-testid":"dropdown-living-legacy",children:e.jsxs(He,{href:"/living-legacy",children:[e.jsx(Bs,{className:"w-4 h-4 mr-2"}),e.jsx("span",{children:"Living Legacy"})]})}),e.jsx(Ts,{asChild:!0,className:"cursor-pointer","data-testid":"dropdown-qr-designer",children:e.jsxs(He,{href:"/qr-designer",children:[e.jsx(or,{className:"w-4 h-4 mr-2"}),e.jsx("span",{children:"QR Code Designer"})]})}),e.jsx(Ts,{asChild:!0,className:"cursor-pointer","data-testid":"dropdown-essential-workers",children:e.jsxs(He,{href:"/essential-workers",children:[e.jsx(va,{className:"w-4 h-4 mr-2"}),e.jsx("span",{children:"Essential Workers"})]})}),e.jsx(Ts,{asChild:!0,className:"cursor-pointer","data-testid":"dropdown-hood-memorials",children:e.jsxs(He,{href:"/hood-memorials",children:[e.jsx(Ms,{className:"w-4 h-4 mr-2"}),e.jsx("span",{children:"Hood Memorials"})]})}),e.jsx(Ts,{asChild:!0,className:"cursor-pointer","data-testid":"dropdown-neighborhoods",children:e.jsxs(He,{href:"/neighborhoods",children:[e.jsx(tr,{className:"w-4 h-4 mr-2"}),e.jsx("span",{children:"Neighborhoods"})]})}),e.jsx(fl,{}),e.jsx(Ts,{asChild:!0,className:"cursor-pointer","data-testid":"dropdown-prison-access",children:e.jsxs(He,{href:"/prison-access",children:[e.jsx(Od,{className:"w-4 h-4 mr-2"}),e.jsx("span",{children:"Prison Access"})]})})]})]}),e.jsx(He,{href:"/about",children:e.jsx(O,{variant:"ghost",size:"sm","data-testid":"nav-about",className:"text-sm",children:"About"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(O,{variant:"ghost",size:"icon",className:"relative hidden md:flex","data-testid":"button-notifications","aria-label":"Notifications - 3 unread",children:[e.jsx(af,{className:"w-5 h-5","aria-hidden":"true"}),e.jsx(ze,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 text-xs","aria-label":"3 notifications",children:"3"})]}),e.jsx(Pge,{}),e.jsx("div",{className:"lg:hidden",children:e.jsxs(bw,{children:[e.jsx(Nw,{asChild:!0,children:e.jsxs(O,{variant:"ghost",size:"sm","data-testid":"nav-mobile-features-dropdown",className:"text-sm",children:[e.jsx(Bs,{className:"w-4 h-4 mr-1.5"}),"Features",e.jsx(Fx,{className:"w-3 h-3 ml-1.5"})]})}),e.jsxs($0,{align:"end",className:"w-56",children:[e.jsx(Ts,{asChild:!0,className:"cursor-pointer","data-testid":"dropdown-mobile-celebrations",children:e.jsxs(He,{href:"/celebrations",children:[e.jsx(ao,{className:"w-4 h-4 mr-2"}),e.jsx("span",{children:"Celebrations Hub"})]})}),e.jsx(Ts,{asChild:!0,className:"cursor-pointer","data-testid":"dropdown-mobile-birthdays",children:e.jsxs(He,{href:"/celebrations?tab=birthdays",children:[e.jsx(Pi,{className:"w-4 h-4 mr-2"}),e.jsx("span",{children:"Birthday Celebrations"})]})}),e.jsx(Ts,{asChild:!0,className:"cursor-pointer","data-testid":"dropdown-mobile-weddings",children:e.jsxs(He,{href:"/celebrations?tab=weddings",children:[e.jsx(_t,{className:"w-4 h-4 mr-2"}),e.jsx("span",{children:"Wedding Gifts"})]})}),e.jsx(fl,{}),e.jsx(Ts,{asChild:!0,className:"cursor-pointer","data-testid":"dropdown-mobile-event-planner",children:e.jsxs(He,{href:"/event-planner",children:[e.jsx(ds,{className:"w-4 h-4 mr-2"}),e.jsx("span",{children:"Event Planner"})]})}),e.jsx(Ts,{asChild:!0,className:"cursor-pointer","data-testid":"dropdown-mobile-future-messages",children:e.jsxs(He,{href:"/upcoming-messages",children:[e.jsx(ds,{className:"w-4 h-4 mr-2"}),e.jsx("span",{children:"Future Messages"})]})}),e.jsx(Ts,{asChild:!0,className:"cursor-pointer","data-testid":"dropdown-mobile-qr-memorials",children:e.jsxs(He,{href:"/qr-code",children:[e.jsx(KC,{className:"w-4 h-4 mr-2"}),e.jsx("span",{children:"QR Memorials"})]})}),e.jsx(fl,{}),e.jsx(Ts,{asChild:!0,className:"cursor-pointer","data-testid":"dropdown-mobile-celebrity-memorials",children:e.jsxs(He,{href:"/celebrity-memorials",children:[e.jsx(zo,{className:"w-4 h-4 mr-2"}),e.jsx("span",{children:"Celebrity Memorials"})]})}),e.jsx(Ts,{asChild:!0,className:"cursor-pointer","data-testid":"dropdown-mobile-alumni-memorials",children:e.jsxs(He,{href:"/alumni-memorials",children:[e.jsx(Za,{className:"w-4 h-4 mr-2"}),e.jsx("span",{children:"Alumni Memorials"})]})}),e.jsx(Ts,{asChild:!0,className:"cursor-pointer","data-testid":"dropdown-mobile-sports-memorials",children:e.jsxs(He,{href:"/sports-memorials",children:[e.jsx(Ni,{className:"w-4 h-4 mr-2"}),e.jsx("span",{children:"Sports Memorials"})]})}),e.jsx(Ts,{asChild:!0,className:"cursor-pointer","data-testid":"dropdown-mobile-qr-designer",children:e.jsxs(He,{href:"/qr-designer",children:[e.jsx(or,{className:"w-4 h-4 mr-2"}),e.jsx("span",{children:"QR Code Designer"})]})}),e.jsx(Ts,{asChild:!0,className:"cursor-pointer","data-testid":"dropdown-mobile-essential-workers",children:e.jsxs(He,{href:"/essential-workers",children:[e.jsx(va,{className:"w-4 h-4 mr-2"}),e.jsx("span",{children:"Essential Workers"})]})}),e.jsx(Ts,{asChild:!0,className:"cursor-pointer","data-testid":"dropdown-mobile-hood-memorials",children:e.jsxs(He,{href:"/hood-memorials",children:[e.jsx(Ms,{className:"w-4 h-4 mr-2"}),e.jsx("span",{children:"Hood Memorials"})]})}),e.jsx(Ts,{asChild:!0,className:"cursor-pointer","data-testid":"dropdown-mobile-neighborhoods",children:e.jsxs(He,{href:"/neighborhoods",children:[e.jsx(tr,{className:"w-4 h-4 mr-2"}),e.jsx("span",{children:"Neighborhoods"})]})}),e.jsx(fl,{}),e.jsx(Ts,{asChild:!0,className:"cursor-pointer","data-testid":"dropdown-mobile-prison-access",children:e.jsxs(He,{href:"/prison-access",children:[e.jsx(Od,{className:"w-4 h-4 mr-2"}),e.jsx("span",{children:"Prison Access"})]})})]})]})}),e.jsx(He,{href:"/create-memorial",children:e.jsxs(O,{size:"sm",className:"lg:hidden","data-testid":"nav-mobile-create",children:[e.jsx(Un,{className:"w-4 h-4 mr-1.5"}),"Create"]})})]})]})})}),e.jsx("main",{id:"main-content",role:"main",children:e.jsxs(BK,{children:[e.jsx(Pt,{path:"/",component:Lie}),e.jsx(Pt,{path:"/obituary/:memorialId",component:gpe}),e.jsx(Pt,{path:"/memorial/:code/upload",component:qde}),e.jsx(Pt,{path:"/memorial/:id",component:Tie}),e.jsx(Pt,{path:"/about",component:Die}),e.jsx(Pt,{path:"/celebrity-memorials",component:Fie}),e.jsx(Pt,{path:"/create-celebrity-memorial",component:$ie}),e.jsx(Pt,{path:"/prison-access",component:Uie}),e.jsx(Pt,{path:"/essential-workers",component:Gie}),e.jsx(Pt,{path:"/create-essential-worker",component:Zie}),e.jsx(Pt,{path:"/hood-memorials",component:Xie}),e.jsx(Pt,{path:"/create-hood-memorial",component:hce}),e.jsx(Pt,{path:"/neighborhoods",component:fce}),e.jsx(Pt,{path:"/create-neighborhood",component:pce}),e.jsx(Pt,{path:"/neighborhood/:id",component:xce}),e.jsx(Pt,{path:"/alumni-memorials",component:gce}),e.jsx(Pt,{path:"/alumni-memorials/create",component:yce}),e.jsx(Pt,{path:"/alumni-memorials/:id",component:jce}),e.jsx(Pt,{path:"/sports-memorials",component:zxe}),e.jsx(Pt,{path:"/pet-memorials",component:Hxe}),e.jsx(Pt,{path:"/create-pet-memorial",component:tge}),e.jsx(Pt,{path:"/pet-memorial/:inviteCode",component:nge}),e.jsx(Pt,{path:"/multi-faith-templates",component:ige}),e.jsx(Pt,{path:"/living-legacy",component:cge}),e.jsx(Pt,{path:"/family-tree/:memorialId",component:uge}),e.jsx(Pt,{path:"/cemetery-navigator/:memorialId",component:mge}),e.jsx(Pt,{path:"/qr-designer",component:hge}),e.jsx(Pt,{path:"/holiday-timeline/:memorialId",component:gge}),e.jsx(Pt,{path:"/birthday-celebration/:memorialId",component:yge}),e.jsx(Pt,{path:"/olympian-memorial/:athleteId",component:bge}),e.jsx(Pt,{path:"/celebrations",component:_ge}),e.jsx(Pt,{path:"/self-obituary",component:Nce}),e.jsx(Pt,{path:"/create-memorial",component:_ce}),e.jsx(Pt,{path:"/grief-support/:memorialId",component:Kce}),e.jsx(Pt,{path:"/customization",component:Sce}),e.jsx(Pt,{path:"/advertise",component:T6}),e.jsx(Pt,{path:"/advertiser-submission",component:T6}),e.jsx(Pt,{path:"/advertising",component:Qce}),e.jsx(Pt,{path:"/advertisement-admin",component:Ace}),e.jsx(Pt,{path:"/partner-signup",component:Ece}),e.jsx(Pt,{path:"/partner-dashboard/:partnerId",component:Tce}),e.jsx(Pt,{path:"/badge-preview",component:Ice}),e.jsx(Pt,{path:"/design-reference",component:Wce}),e.jsx(Pt,{path:"/new-logo",component:Yxe}),e.jsx(Pt,{path:"/brand2024",component:Qxe}),e.jsx(Pt,{path:"/profile",component:dde}),e.jsx(Pt,{path:"/my-memorials",component:ude}),e.jsx(Pt,{path:"/memorials/:id/manage",component:ppe}),e.jsx(Pt,{path:"/memorials/:id/program-edit",component:Npe}),e.jsx(Pt,{path:"/memorial/:id/program",component:_pe}),e.jsx(Pt,{path:"/memorial/:id/events",component:hxe}),e.jsx(Pt,{path:"/memorial/:id/funeral-program",component:gxe}),e.jsx(Pt,{path:"/memorial/:id/future-messages",component:Nxe}),e.jsx(Pt,{path:"/memorial/:id/video-time-capsules",component:Cxe}),e.jsx(Pt,{path:"/upcoming-messages",component:_xe}),e.jsx(Pt,{path:"/event-planner",component:$xe}),e.jsx(Pt,{path:"/celebrity/:id/estate-content",component:yxe}),e.jsx(Pt,{path:"/products",component:kxe}),e.jsx(Pt,{path:"/products/:productId/customize",component:Txe}),e.jsx(Pt,{path:"/orders",component:Lxe}),e.jsx(Pt,{path:"/orders/:orderId",component:Dxe}),e.jsx(Pt,{path:"/admin",component:hde}),e.jsx(Pt,{path:"/admin/screenshots",component:fde}),e.jsx(Pt,{path:"/admin/product-orders",component:vde}),e.jsx(Pt,{path:"/admin/qr-code",component:lP}),e.jsx(Pt,{path:"/qr-code",component:lP}),e.jsx(Pt,{path:"/privacy",component:yde}),e.jsx(Pt,{path:"/child-safety",component:jde}),e.jsx(Pt,{path:"/support",component:$de}),e.jsx(Pt,{component:Sge})]})}),e.jsx(Age,{badgeVariant:"classic"})]})}function Mge(){return N.useEffect(()=>{console.warn("Missing required Google Analytics key: VITE_GA_MEASUREMENT_ID")},[]),e.jsx(iY,{client:xt,children:e.jsxs(tX,{children:[e.jsx(Tge,{}),e.jsx(Cge,{}),e.jsx(kge,{}),e.jsx(EQ,{})]})})}OD(document.getElementById("root")).render(e.jsx(Mge,{}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js").then(t=>{console.log("Service Worker registered:",t.scope)}).catch(t=>{console.error("Service Worker registration failed:",t)})});export{yk as B,s2 as C,uf as E,bk as L,TF as W,mr as _,Dge as c,h5 as g};
